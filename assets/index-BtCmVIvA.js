(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(s){if(s.ep)return;s.ep=!0;const d=i(s);fetch(s.href,d)}})();var Lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ky(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var r=t.default;if(typeof r=="function"){var i=function a(){var s=!1;try{s=this instanceof a}catch{}return s?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};i.prototype=r.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var s=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(i,a,s.get?s:{enumerable:!0,get:function(){return t[a]}})}),i}var Um={exports:{}},qh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function aR(){if(Mb)return qh;Mb=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(a,s,d){var l=null;if(d!==void 0&&(l=""+d),s.key!==void 0&&(l=""+s.key),"key"in s){d={};for(var c in s)c!=="key"&&(d[c]=s[c])}else d=s;return s=d.ref,{$$typeof:t,type:a,key:l,ref:s!==void 0?s:null,props:d}}return qh.Fragment=r,qh.jsx=i,qh.jsxs=i,qh}var kb;function oR(){return kb||(kb=1,Um.exports=aR()),Um.exports}var ki=oR(),Lm={exports:{}},cn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function sR(){if(Bb)return cn;Bb=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function _(J){return J===null||typeof J!="object"?null:(J=b&&J[b]||J["@@iterator"],typeof J=="function"?J:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,x={};function P(J,xe,Xe){this.props=J,this.context=xe,this.refs=x,this.updater=Xe||A}P.prototype.isReactComponent={},P.prototype.setState=function(J,xe){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,xe,"setState")},P.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function R(){}R.prototype=P.prototype;function F(J,xe,Xe){this.props=J,this.context=xe,this.refs=x,this.updater=Xe||A}var I=F.prototype=new R;I.constructor=F,T(I,P.prototype),I.isPureReactComponent=!0;var $=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function Y(J,xe,Xe,je,dt,It){return Xe=It.ref,{$$typeof:t,type:J,key:xe,ref:Xe!==void 0?Xe:null,props:It}}function q(J,xe){return Y(J.type,xe,void 0,void 0,void 0,J.props)}function Ie(J){return typeof J=="object"&&J!==null&&J.$$typeof===t}function K(J){var xe={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Xe){return xe[Xe]})}var ie=/\/+/g;function ge(J,xe){return typeof J=="object"&&J!==null&&J.key!=null?K(""+J.key):xe.toString(36)}function Se(){}function et(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(Se,Se):(J.status="pending",J.then(function(xe){J.status==="pending"&&(J.status="fulfilled",J.value=xe)},function(xe){J.status==="pending"&&(J.status="rejected",J.reason=xe)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function st(J,xe,Xe,je,dt){var It=typeof J;(It==="undefined"||It==="boolean")&&(J=null);var Mt=!1;if(J===null)Mt=!0;else switch(It){case"bigint":case"string":case"number":Mt=!0;break;case"object":switch(J.$$typeof){case t:case r:Mt=!0;break;case m:return Mt=J._init,st(Mt(J._payload),xe,Xe,je,dt)}}if(Mt)return dt=dt(J),Mt=je===""?"."+ge(J,0):je,$(dt)?(Xe="",Mt!=null&&(Xe=Mt.replace(ie,"$&/")+"/"),st(dt,xe,Xe,"",function(Te){return Te})):dt!=null&&(Ie(dt)&&(dt=q(dt,Xe+(dt.key==null||J&&J.key===dt.key?"":(""+dt.key).replace(ie,"$&/")+"/")+Mt)),xe.push(dt)),1;Mt=0;var Me=je===""?".":je+":";if($(J))for(var le=0;le<J.length;le++)je=J[le],It=Me+ge(je,le),Mt+=st(je,xe,Xe,It,dt);else if(le=_(J),typeof le=="function")for(J=le.call(J),le=0;!(je=J.next()).done;)je=je.value,It=Me+ge(je,le++),Mt+=st(je,xe,Xe,It,dt);else if(It==="object"){if(typeof J.then=="function")return st(et(J),xe,Xe,je,dt);throw xe=String(J),Error("Objects are not valid as a React child (found: "+(xe==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":xe)+"). If you meant to render a collection of children, use an array instead.")}return Mt}function Ne(J,xe,Xe){if(J==null)return J;var je=[],dt=0;return st(J,je,"","",function(It){return xe.call(Xe,It,dt++)}),je}function gt(J){if(J._status===-1){var xe=J._result;xe=xe(),xe.then(function(Xe){(J._status===0||J._status===-1)&&(J._status=1,J._result=Xe)},function(Xe){(J._status===0||J._status===-1)&&(J._status=2,J._result=Xe)}),J._status===-1&&(J._status=0,J._result=xe)}if(J._status===1)return J._result.default;throw J._result}var ve=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function tt(){}return cn.Children={map:Ne,forEach:function(J,xe,Xe){Ne(J,function(){xe.apply(this,arguments)},Xe)},count:function(J){var xe=0;return Ne(J,function(){xe++}),xe},toArray:function(J){return Ne(J,function(xe){return xe})||[]},only:function(J){if(!Ie(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},cn.Component=P,cn.Fragment=i,cn.Profiler=s,cn.PureComponent=F,cn.StrictMode=a,cn.Suspense=p,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,cn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return B.H.useMemoCache(J)}},cn.cache=function(J){return function(){return J.apply(null,arguments)}},cn.cloneElement=function(J,xe,Xe){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var je=T({},J.props),dt=J.key,It=void 0;if(xe!=null)for(Mt in xe.ref!==void 0&&(It=void 0),xe.key!==void 0&&(dt=""+xe.key),xe)!W.call(xe,Mt)||Mt==="key"||Mt==="__self"||Mt==="__source"||Mt==="ref"&&xe.ref===void 0||(je[Mt]=xe[Mt]);var Mt=arguments.length-2;if(Mt===1)je.children=Xe;else if(1<Mt){for(var Me=Array(Mt),le=0;le<Mt;le++)Me[le]=arguments[le+2];je.children=Me}return Y(J.type,dt,void 0,void 0,It,je)},cn.createContext=function(J){return J={$$typeof:l,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:d,_context:J},J},cn.createElement=function(J,xe,Xe){var je,dt={},It=null;if(xe!=null)for(je in xe.key!==void 0&&(It=""+xe.key),xe)W.call(xe,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(dt[je]=xe[je]);var Mt=arguments.length-2;if(Mt===1)dt.children=Xe;else if(1<Mt){for(var Me=Array(Mt),le=0;le<Mt;le++)Me[le]=arguments[le+2];dt.children=Me}if(J&&J.defaultProps)for(je in Mt=J.defaultProps,Mt)dt[je]===void 0&&(dt[je]=Mt[je]);return Y(J,It,void 0,void 0,null,dt)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(J){return{$$typeof:c,render:J}},cn.isValidElement=Ie,cn.lazy=function(J){return{$$typeof:m,_payload:{_status:-1,_result:J},_init:gt}},cn.memo=function(J,xe){return{$$typeof:f,type:J,compare:xe===void 0?null:xe}},cn.startTransition=function(J){var xe=B.T,Xe={};B.T=Xe;try{var je=J(),dt=B.S;dt!==null&&dt(Xe,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(tt,ve)}catch(It){ve(It)}finally{B.T=xe}},cn.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},cn.use=function(J){return B.H.use(J)},cn.useActionState=function(J,xe,Xe){return B.H.useActionState(J,xe,Xe)},cn.useCallback=function(J,xe){return B.H.useCallback(J,xe)},cn.useContext=function(J){return B.H.useContext(J)},cn.useDebugValue=function(){},cn.useDeferredValue=function(J,xe){return B.H.useDeferredValue(J,xe)},cn.useEffect=function(J,xe,Xe){var je=B.H;if(typeof Xe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return je.useEffect(J,xe)},cn.useId=function(){return B.H.useId()},cn.useImperativeHandle=function(J,xe,Xe){return B.H.useImperativeHandle(J,xe,Xe)},cn.useInsertionEffect=function(J,xe){return B.H.useInsertionEffect(J,xe)},cn.useLayoutEffect=function(J,xe){return B.H.useLayoutEffect(J,xe)},cn.useMemo=function(J,xe){return B.H.useMemo(J,xe)},cn.useOptimistic=function(J,xe){return B.H.useOptimistic(J,xe)},cn.useReducer=function(J,xe,Xe){return B.H.useReducer(J,xe,Xe)},cn.useRef=function(J){return B.H.useRef(J)},cn.useState=function(J){return B.H.useState(J)},cn.useSyncExternalStore=function(J,xe,Xe){return B.H.useSyncExternalStore(J,xe,Xe)},cn.useTransition=function(){return B.H.useTransition()},cn.version="19.1.0",cn}var Hb;function ag(){return Hb||(Hb=1,Lm.exports=sR()),Lm.exports}var St=ag();const lR=qS(St);var Mm={exports:{}},zh={},km={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function uR(){return jb||(jb=1,function(t){function r(Ne,gt){var ve=Ne.length;Ne.push(gt);e:for(;0<ve;){var tt=ve-1>>>1,J=Ne[tt];if(0<s(J,gt))Ne[tt]=gt,Ne[ve]=J,ve=tt;else break e}}function i(Ne){return Ne.length===0?null:Ne[0]}function a(Ne){if(Ne.length===0)return null;var gt=Ne[0],ve=Ne.pop();if(ve!==gt){Ne[0]=ve;e:for(var tt=0,J=Ne.length,xe=J>>>1;tt<xe;){var Xe=2*(tt+1)-1,je=Ne[Xe],dt=Xe+1,It=Ne[dt];if(0>s(je,ve))dt<J&&0>s(It,je)?(Ne[tt]=It,Ne[dt]=ve,tt=dt):(Ne[tt]=je,Ne[Xe]=ve,tt=Xe);else if(dt<J&&0>s(It,ve))Ne[tt]=It,Ne[dt]=ve,tt=dt;else break e}}return gt}function s(Ne,gt){var ve=Ne.sortIndex-gt.sortIndex;return ve!==0?ve:Ne.id-gt.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var p=[],f=[],m=1,b=null,_=3,A=!1,T=!1,x=!1,P=!1,R=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function $(Ne){for(var gt=i(f);gt!==null;){if(gt.callback===null)a(f);else if(gt.startTime<=Ne)a(f),gt.sortIndex=gt.expirationTime,r(p,gt);else break;gt=i(f)}}function B(Ne){if(x=!1,$(Ne),!T)if(i(p)!==null)T=!0,W||(W=!0,ge());else{var gt=i(f);gt!==null&&st(B,gt.startTime-Ne)}}var W=!1,Y=-1,q=5,Ie=-1;function K(){return P?!0:!(t.unstable_now()-Ie<q)}function ie(){if(P=!1,W){var Ne=t.unstable_now();Ie=Ne;var gt=!0;try{e:{T=!1,x&&(x=!1,F(Y),Y=-1),A=!0;var ve=_;try{t:{for($(Ne),b=i(p);b!==null&&!(b.expirationTime>Ne&&K());){var tt=b.callback;if(typeof tt=="function"){b.callback=null,_=b.priorityLevel;var J=tt(b.expirationTime<=Ne);if(Ne=t.unstable_now(),typeof J=="function"){b.callback=J,$(Ne),gt=!0;break t}b===i(p)&&a(p),$(Ne)}else a(p);b=i(p)}if(b!==null)gt=!0;else{var xe=i(f);xe!==null&&st(B,xe.startTime-Ne),gt=!1}}break e}finally{b=null,_=ve,A=!1}gt=void 0}}finally{gt?ge():W=!1}}}var ge;if(typeof I=="function")ge=function(){I(ie)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,et=Se.port2;Se.port1.onmessage=ie,ge=function(){et.postMessage(null)}}else ge=function(){R(ie,0)};function st(Ne,gt){Y=R(function(){Ne(t.unstable_now())},gt)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ne){Ne.callback=null},t.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<Ne?Math.floor(1e3/Ne):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(Ne){switch(_){case 1:case 2:case 3:var gt=3;break;default:gt=_}var ve=_;_=gt;try{return Ne()}finally{_=ve}},t.unstable_requestPaint=function(){P=!0},t.unstable_runWithPriority=function(Ne,gt){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var ve=_;_=Ne;try{return gt()}finally{_=ve}},t.unstable_scheduleCallback=function(Ne,gt,ve){var tt=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?tt+ve:tt):ve=tt,Ne){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ve+J,Ne={id:m++,callback:gt,priorityLevel:Ne,startTime:ve,expirationTime:J,sortIndex:-1},ve>tt?(Ne.sortIndex=ve,r(f,Ne),i(p)===null&&Ne===i(f)&&(x?(F(Y),Y=-1):x=!0,st(B,ve-tt))):(Ne.sortIndex=J,r(p,Ne),T||A||(T=!0,W||(W=!0,ge()))),Ne},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(Ne){var gt=_;return function(){var ve=_;_=gt;try{return Ne.apply(this,arguments)}finally{_=ve}}}}(Bm)),Bm}var Vb;function cR(){return Vb||(Vb=1,km.exports=uR()),km.exports}var Hm={exports:{}},aa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function fR(){if(Kb)return aa;Kb=1;var t=ag();function r(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function d(p,f,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:b==null?null:""+b,children:p,containerInfo:f,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return aa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,aa.createPortal=function(p,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(r(299));return d(p,f,null,m)},aa.flushSync=function(p){var f=l.T,m=a.p;try{if(l.T=null,a.p=2,p)return p()}finally{l.T=f,a.p=m,a.d.f()}},aa.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,a.d.C(p,f))},aa.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},aa.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var m=f.as,b=c(m,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?a.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:A}):m==="script"&&a.d.X(p,{crossOrigin:b,integrity:_,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},aa.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);a.d.M(p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&a.d.M(p)},aa.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,b=c(m,f.crossOrigin);a.d.L(p,m,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},aa.preloadModule=function(p,f){if(typeof p=="string")if(f){var m=c(f.as,f.crossOrigin);a.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else a.d.m(p)},aa.requestFormReset=function(p){a.d.r(p)},aa.unstable_batchedUpdates=function(p,f){return p(f)},aa.useFormState=function(p,f,m){return l.H.useFormState(p,f,m)},aa.useFormStatus=function(){return l.H.useHostTransitionStatus()},aa.version="19.1.0",aa}var Gb;function dR(){if(Gb)return Hm.exports;Gb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Hm.exports=fR(),Hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b;function hR(){if($b)return zh;$b=1;var t=cR(),r=ag(),i=dR();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function l(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function c(e){if(d(e)!==e)throw Error(a(188))}function p(e){var n=e.alternate;if(!n){if(n=d(e),n===null)throw Error(a(188));return n!==e?null:e}for(var o=e,h=n;;){var E=o.return;if(E===null)break;var N=E.alternate;if(N===null){if(h=E.return,h!==null){o=h;continue}break}if(E.child===N.child){for(N=E.child;N;){if(N===o)return c(E),e;if(N===h)return c(E),n;N=N.sibling}throw Error(a(188))}if(o.return!==h.return)o=E,h=N;else{for(var Z=!1,ce=E.child;ce;){if(ce===o){Z=!0,o=E,h=N;break}if(ce===h){Z=!0,h=E,o=N;break}ce=ce.sibling}if(!Z){for(ce=N.child;ce;){if(ce===o){Z=!0,o=N,h=E;break}if(ce===h){Z=!0,h=N,o=E;break}ce=ce.sibling}if(!Z)throw Error(a(189))}}if(o.alternate!==h)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?e:n}function f(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=f(e),n!==null)return n;e=e.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),I=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),Ie=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function ge(e){return e===null||typeof e!="object"?null:(e=ie&&e[ie]||e["@@iterator"],typeof e=="function"?e:null)}var Se=Symbol.for("react.client.reference");function et(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case P:return"Profiler";case x:return"StrictMode";case B:return"Suspense";case W:return"SuspenseList";case Ie:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case I:return(e.displayName||"Context")+".Provider";case F:return(e._context.displayName||"Context")+".Consumer";case $:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return n=e.displayName||null,n!==null?n:et(e.type)||"Memo";case q:n=e._payload,e=e._init;try{return et(e(n))}catch{}}return null}var st=Array.isArray,Ne=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},tt=[],J=-1;function xe(e){return{current:e}}function Xe(e){0>J||(e.current=tt[J],tt[J]=null,J--)}function je(e,n){J++,tt[J]=e.current,e.current=n}var dt=xe(null),It=xe(null),Mt=xe(null),Me=xe(null);function le(e,n){switch(je(Mt,n),je(It,e),je(dt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?rr(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=rr(n),e=Pr(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Xe(dt),je(dt,e)}function Te(){Xe(dt),Xe(It),Xe(Mt)}function Je(e){e.memoizedState!==null&&je(Me,e);var n=dt.current,o=Pr(n,e.type);n!==o&&(je(It,e),je(dt,o))}function se(e){It.current===e&&(Xe(dt),Xe(It)),Me.current===e&&(Xe(Me),jh._currentValue=ve)}var M=Object.prototype.hasOwnProperty,D=t.unstable_scheduleCallback,G=t.unstable_cancelCallback,re=t.unstable_shouldYield,we=t.unstable_requestPaint,Ce=t.unstable_now,at=t.unstable_getCurrentPriorityLevel,Re=t.unstable_ImmediatePriority,ht=t.unstable_UserBlockingPriority,Ct=t.unstable_NormalPriority,vt=t.unstable_LowPriority,We=t.unstable_IdlePriority,$e=t.log,Oe=t.unstable_setDisableYieldValue,lt=null,Q=null;function k(e){if(typeof $e=="function"&&Oe(e),Q&&typeof Q.setStrictMode=="function")try{Q.setStrictMode(lt,e)}catch{}}var V=Math.clz32?Math.clz32:Ze,j=Math.log,qe=Math.LN2;function Ze(e){return e>>>=0,e===0?32:31-(j(e)/qe|0)|0}var ze=256,Jt=4194304;function kr(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Hr(e,n,o){var h=e.pendingLanes;if(h===0)return 0;var E=0,N=e.suspendedLanes,Z=e.pingedLanes;e=e.warmLanes;var ce=h&134217727;return ce!==0?(h=ce&~N,h!==0?E=kr(h):(Z&=ce,Z!==0?E=kr(Z):o||(o=ce&~e,o!==0&&(E=kr(o))))):(ce=h&~N,ce!==0?E=kr(ce):Z!==0?E=kr(Z):o||(o=h&~e,o!==0&&(E=kr(o)))),E===0?0:n!==0&&n!==E&&(n&N)===0&&(N=E&-E,o=n&-n,N>=o||N===32&&(o&4194048)!==0)?n:E}function ar(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ke(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var e=ze;return ze<<=1,(ze&4194048)===0&&(ze=256),e}function ot(){var e=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),e}function Le(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function ct(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Qt(e,n,o,h,E,N){var Z=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var ce=e.entanglements,Be=e.expirationTimes,yt=e.hiddenUpdates;for(o=Z&~o;0<o;){var Nt=31-V(o),kt=1<<Nt;ce[Nt]=0,Be[Nt]=-1;var wt=yt[Nt];if(wt!==null)for(yt[Nt]=null,Nt=0;Nt<wt.length;Nt++){var At=wt[Nt];At!==null&&(At.lane&=-536870913)}o&=~kt}h!==0&&qt(e,h,0),N!==0&&E===0&&e.tag!==0&&(e.suspendedLanes|=N&~(Z&~n))}function qt(e,n,o){e.pendingLanes|=n,e.suspendedLanes&=~n;var h=31-V(n);e.entangledLanes|=n,e.entanglements[h]=e.entanglements[h]|1073741824|o&4194090}function er(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var h=31-V(o),E=1<<h;E&n|e[h]&n&&(e[h]|=n),o&=~E}}function Ht(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ue(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function pe(){var e=gt.p;return e!==0?e:(e=window.event,e===void 0?32:Pb(e.type))}function Tt(e,n){var o=gt.p;try{return gt.p=e,n()}finally{gt.p=o}}var xt=Math.random().toString(36).slice(2),Pt="__reactFiber$"+xt,Xt="__reactProps$"+xt,tr="__reactContainer$"+xt,Nr="__reactEvents$"+xt,Vt="__reactListeners$"+xt,Zt="__reactHandles$"+xt,yr="__reactResources$"+xt,ir="__reactMarker$"+xt;function Fr(e){delete e[Pt],delete e[Xt],delete e[Nr],delete e[Vt],delete e[Zt]}function Er(e){var n=e[Pt];if(n)return n;for(var o=e.parentNode;o;){if(n=o[tr]||o[Pt]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=gb(e);e!==null;){if(o=e[Pt])return o;e=gb(e)}return n}e=o,o=e.parentNode}return null}function Gr(e){if(e=e[Pt]||e[tr]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function pr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function or(e){var n=e[yr];return n||(n=e[yr]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Gt(e){e[ir]=!0}var Jr=new Set,xn={};function un(e,n){Dr(e,n),Dr(e+"Capture",n)}function Dr(e,n){for(xn[e]=n,e=0;e<n.length;e++)Jr.add(n[e])}var Sn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dn={},lr={};function li(e){return M.call(lr,e)?!0:M.call(Dn,e)?!1:Sn.test(e)?lr[e]=!0:(Dn[e]=!0,!1)}function An(e,n,o){if(li(n))if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var h=n.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+o)}}function ji(e,n,o){if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+o)}}function ui(e,n,o,h){if(h===null)e.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(n,o,""+h)}}var Ra,Qi;function ci(e){if(Ra===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);Ra=n&&n[1]||"",Qi=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ra+e+Qi}var v=!1;function y(e,n){if(!e||v)return"";v=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(n){var kt=function(){throw Error()};if(Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(At){var wt=At}Reflect.construct(e,[],kt)}else{try{kt.call()}catch(At){wt=At}e.call(kt.prototype)}}else{try{throw Error()}catch(At){wt=At}(kt=e())&&typeof kt.catch=="function"&&kt.catch(function(){})}}catch(At){if(At&&wt&&typeof At.stack=="string")return[At.stack,wt.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=h.DetermineComponentFrameRoot(),Z=N[0],ce=N[1];if(Z&&ce){var Be=Z.split(`
`),yt=ce.split(`
`);for(E=h=0;h<Be.length&&!Be[h].includes("DetermineComponentFrameRoot");)h++;for(;E<yt.length&&!yt[E].includes("DetermineComponentFrameRoot");)E++;if(h===Be.length||E===yt.length)for(h=Be.length-1,E=yt.length-1;1<=h&&0<=E&&Be[h]!==yt[E];)E--;for(;1<=h&&0<=E;h--,E--)if(Be[h]!==yt[E]){if(h!==1||E!==1)do if(h--,E--,0>E||Be[h]!==yt[E]){var Nt=`
`+Be[h].replace(" at new "," at ");return e.displayName&&Nt.includes("<anonymous>")&&(Nt=Nt.replace("<anonymous>",e.displayName)),Nt}while(1<=h&&0<=E);break}}}finally{v=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?ci(o):""}function S(e){switch(e.tag){case 26:case 27:case 5:return ci(e.type);case 16:return ci("Lazy");case 13:return ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return y(e.type,!1);case 11:return y(e.type.render,!1);case 1:return y(e.type,!0);case 31:return ci("Activity");default:return""}}function C(e){try{var n="";do n+=S(e),e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function H(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function X(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function oe(e){var n=X(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),h=""+e[n];if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var E=o.get,N=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return E.call(this)},set:function(Z){h=""+Z,N.call(this,Z)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(Z){h=""+Z},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function be(e){e._valueTracker||(e._valueTracker=oe(e))}function he(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),h="";return e&&(h=X(e)?e.checked?"true":"false":e.value),e=h,e!==o?(n.setValue(e),!0):!1}function me(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ee=/[\n"\\]/g;function Ae(e){return e.replace(Ee,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function De(e,n,o,h,E,N,Z,ce){e.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?e.type=Z:e.removeAttribute("type"),n!=null?Z==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+H(n)):e.value!==""+H(n)&&(e.value=""+H(n)):Z!=="submit"&&Z!=="reset"||e.removeAttribute("value"),n!=null?nt(e,Z,H(n)):o!=null?nt(e,Z,H(o)):h!=null&&e.removeAttribute("value"),E==null&&N!=null&&(e.defaultChecked=!!N),E!=null&&(e.checked=E&&typeof E!="function"&&typeof E!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?e.name=""+H(ce):e.removeAttribute("name")}function Ge(e,n,o,h,E,N,Z,ce){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(e.type=N),n!=null||o!=null){if(!(N!=="submit"&&N!=="reset"||n!=null))return;o=o!=null?""+H(o):"",n=n!=null?""+H(n):o,ce||n===e.value||(e.value=n),e.defaultValue=n}h=h??E,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=ce?e.checked:!!h,e.defaultChecked=!!h,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(e.name=Z)}function nt(e,n,o){n==="number"&&me(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function pt(e,n,o,h){if(e=e.options,n){n={};for(var E=0;E<o.length;E++)n["$"+o[E]]=!0;for(o=0;o<e.length;o++)E=n.hasOwnProperty("$"+e[o].value),e[o].selected!==E&&(e[o].selected=E),E&&h&&(e[o].defaultSelected=!0)}else{for(o=""+H(o),n=null,E=0;E<e.length;E++){if(e[E].value===o){e[E].selected=!0,h&&(e[E].defaultSelected=!0);return}n!==null||e[E].disabled||(n=e[E])}n!==null&&(n.selected=!0)}}function _t(e,n,o){if(n!=null&&(n=""+H(n),n!==e.value&&(e.value=n),o==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=o!=null?""+H(o):""}function ae(e,n,o,h){if(n==null){if(h!=null){if(o!=null)throw Error(a(92));if(st(h)){if(1<h.length)throw Error(a(93));h=h[0]}o=h}o==null&&(o=""),n=o}o=H(n),e.defaultValue=o,h=e.textContent,h===o&&h!==""&&h!==null&&(e.value=h)}function _e(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var Pe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fe(e,n,o){var h=n.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":h?e.setProperty(n,o):typeof o!="number"||o===0||Pe.has(n)?n==="float"?e.cssFloat=o:e[n]=(""+o).trim():e[n]=o+"px"}function ut(e,n,o){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||n!=null&&n.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var E in n)h=n[E],n.hasOwnProperty(E)&&o[E]!==h&&Fe(e,E,h)}else for(var N in n)n.hasOwnProperty(N)&&Fe(e,N,n[N])}function Et(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $r(e){return Bt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var sr=null;function hr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var en=null,fr=null;function tn(e){var n=Gr(e);if(n&&(e=n.stateNode)){var o=e[Xt]||null;e:switch(e=n.stateNode,n.type){case"input":if(De(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ae(""+n)+'"][type="radio"]'),n=0;n<o.length;n++){var h=o[n];if(h!==e&&h.form===e.form){var E=h[Xt]||null;if(!E)throw Error(a(90));De(h,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(n=0;n<o.length;n++)h=o[n],h.form===e.form&&he(h)}break e;case"textarea":_t(e,o.value,o.defaultValue);break e;case"select":n=o.value,n!=null&&pt(e,!!o.multiple,n,!1)}}}var Xr=!1;function Tn(e,n,o){if(Xr)return e(n,o);Xr=!0;try{var h=e(n);return h}finally{if(Xr=!1,(en!==null||fr!==null)&&(lu(),en&&(n=en,e=fr,fr=en=null,tn(n),e)))for(n=0;n<e.length;n++)tn(e[n])}}function Yr(e,n){var o=e.stateNode;if(o===null)return null;var h=o[Xt]||null;if(h===null)return null;o=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(a(231,n,typeof o));return o}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vn=!1;if(Zr)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){vn=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{vn=!1}var jn=null,Ei=null,Xi=null;function Cn(){if(Xi)return Xi;var e,n=Ei,o=n.length,h,E="value"in jn?jn.value:jn.textContent,N=E.length;for(e=0;e<o&&n[e]===E[e];e++);var Z=o-e;for(h=1;h<=Z&&n[o-h]===E[N-h];h++);return Xi=E.slice(e,1<h?1-h:void 0)}function Vi(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function $a(){return!0}function lo(){return!1}function En(e){function n(o,h,E,N,Z){this._reactName=o,this._targetInst=E,this.type=h,this.nativeEvent=N,this.target=Z,this.currentTarget=null;for(var ce in e)e.hasOwnProperty(ce)&&(o=e[ce],this[ce]=o?o(N):N[ce]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?$a:lo,this.isPropagationStopped=lo,this}return m(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),n}var $n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=En($n),qn=m({},$n,{view:0,detail:0}),Yo=En(qn),ua,U,te,ne=m({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==te&&(te&&e.type==="mousemove"?(ua=e.screenX-te.screenX,U=e.screenY-te.screenY):U=ua=0,te=e),ua)},movementY:function(e){return"movementY"in e?e.movementY:U}}),fe=En(ne),Ue=m({},ne,{dataTransfer:0}),ye=En(Ue),He=m({},qn,{relatedTarget:0}),Rt=En(He),bt=m({},$n,{animationName:0,elapsedTime:0,pseudoElement:0}),Ot=En(bt),$t=m({},$n,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jt=En($t),zt=m({},$n,{data:0}),Dt=En(zt),Wt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ur={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vr(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ur[e])?!!n[e]:!1}function Kr(){return vr}var br=m({},qn,{key:function(e){if(e.key){var n=Wt[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Vi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kr,charCode:function(e){return e.type==="keypress"?Vi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yt=En(br),Mr=m({},ne,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dr=En(Mr),Lr=m({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kr}),zr=En(Lr),Ft=m({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0}),Or=En(Ft),yn=m({},ne,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ur=En(yn),dn=m({},$n,{newState:0,oldState:0}),sn=En(dn),On=[9,13,27,32],wr=Zr&&"CompositionEvent"in window,jr=null;Zr&&"documentMode"in document&&(jr=document.documentMode);var zn=Zr&&"TextEvent"in window&&!jr,di=Zr&&(!wr||jr&&8<jr&&11>=jr),xr=" ",kn=!1;function Un(e,n){switch(e){case"keyup":return On.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vn=!1;function rn(e,n){switch(e){case"compositionend":return Qr(n);case"keypress":return n.which!==32?null:(kn=!0,xr);case"textInput":return e=n.data,e===xr&&kn?null:e;default:return null}}function Ta(e,n){if(Vn)return e==="compositionend"||!wr&&Un(e,n)?(e=Cn(),Xi=Ei=jn=null,Vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return di&&n.locale!=="ko"?null:n.data;default:return null}}var Mu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ps(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Mu[e.type]:n==="textarea"}function ku(e,n,o,h){en?fr?fr.push(h):fr=[h]:en=h,n=gd(n,"onChange"),0<n.length&&(o=new xa("onChange","change",null,o,h),e.push({event:o,listeners:n}))}var qa=null,Qo=null;function ff(e){Fh(e,0)}function ca(e){var n=pr(e);if(he(n))return e}function Io(e,n){if(e==="change")return n}var Il=!1;if(Zr){var Is;if(Zr){var za="oninput"in document;if(!za){var Ca=document.createElement("div");Ca.setAttribute("oninput","return;"),za=typeof Ca.oninput=="function"}Is=za}else Is=!1;Il=Is&&(!document.documentMode||9<document.documentMode)}function hn(){qa&&(qa.detachEvent("onpropertychange",Ns),Qo=qa=null)}function Ns(e){if(e.propertyName==="value"&&ca(Qo)){var n=[];ku(n,Qo,e,hr(e)),Tn(ff,n)}}function df(e,n,o){e==="focusin"?(hn(),qa=n,Qo=o,qa.attachEvent("onpropertychange",Ns)):e==="focusout"&&hn()}function Fs(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ca(Qo)}function ti(e,n){if(e==="click")return ca(n)}function Bu(e,n){if(e==="input"||e==="change")return ca(n)}function hf(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var xi=typeof Object.is=="function"?Object.is:hf;function Wa(e,n){if(xi(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),h=Object.keys(n);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var E=o[h];if(!M.call(n,E)||!xi(e[E],n[E]))return!1}return!0}function Ds(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nl(e,n){var o=Ds(e);e=0;for(var h;o;){if(o.nodeType===3){if(h=e+o.textContent.length,e<=n&&h>=n)return{node:o,offset:n-e};e=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ds(o)}}function Pd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Pd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Oa(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=me(e.document);n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=me(e.document)}return n}function Id(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var vg=Zr&&"documentMode"in document&&11>=document.documentMode,Ki=null,pf=null,Fl=null,gf=!1;function fa(e,n,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;gf||Ki==null||Ki!==me(h)||(h=Ki,"selectionStart"in h&&Id(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Fl&&Wa(Fl,h)||(Fl=h,h=gd(pf,"onSelect"),0<h.length&&(n=new xa("onSelect","select",null,n,o),e.push({event:n,listeners:h}),n.target=Ki)))}function Us(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var uo={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},Nd={},Ls={};Zr&&(Ls=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function Ms(e){if(Nd[e])return Nd[e];if(!uo[e])return e;var n=uo[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in Ls)return Nd[e]=n[o];return e}var Xo=Ms("animationend"),Zo=Ms("animationiteration"),bg=Ms("animationstart"),cm=Ms("transitionrun"),fm=Ms("transitionstart"),Pn=Ms("transitioncancel"),Fd=Ms("transitionend"),Dd=new Map,yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yf.push("scrollEnd");function Ja(e,n){Dd.set(e,n),un(n,[e])}var Zi=new WeakMap;function Pa(e,n){if(typeof e=="object"&&e!==null){var o=Zi.get(e);return o!==void 0?o:(n={value:e,source:n,stack:C(n)},Zi.set(e,n),n)}return{value:e,source:n,stack:C(n)}}var Ia=[],Ya=0,mf=0;function vf(){for(var e=Ya,n=mf=Ya=0;n<e;){var o=Ia[n];Ia[n++]=null;var h=Ia[n];Ia[n++]=null;var E=Ia[n];Ia[n++]=null;var N=Ia[n];if(Ia[n++]=null,h!==null&&E!==null){var Z=h.pending;Z===null?E.next=E:(E.next=Z.next,Z.next=E),h.pending=E}N!==0&&wg(o,E,N)}}function Dl(e,n,o,h){Ia[Ya++]=e,Ia[Ya++]=n,Ia[Ya++]=o,Ia[Ya++]=h,mf|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function Ud(e,n,o,h){return Dl(e,n,o,h),bf(e)}function da(e,n){return Dl(e,null,null,n),bf(e)}function wg(e,n,o){e.lanes|=o;var h=e.alternate;h!==null&&(h.lanes|=o);for(var E=!1,N=e.return;N!==null;)N.childLanes|=o,h=N.alternate,h!==null&&(h.childLanes|=o),N.tag===22&&(e=N.stateNode,e===null||e._visibility&1||(E=!0)),e=N,N=N.return;return e.tag===3?(N=e.stateNode,E&&n!==null&&(E=31-V(o),e=N.hiddenUpdates,h=e[E],h===null?e[E]=[n]:h.push(n),n.lane=o|536870912),N):null}function bf(e){if(50<Bc)throw Bc=0,Hc=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ul={};function Hu(e,n,o,h){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pi(e,n,o,h){return new Hu(e,n,o,h)}function ju(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Na(e,n){var o=e.alternate;return o===null?(o=pi(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Ld(e,n){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,n=o.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Vu(e,n,o,h,E,N){var Z=0;if(h=e,typeof e=="function")ju(e)&&(Z=1);else if(typeof e=="string")Z=qA(e,o,dt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ie:return e=pi(31,o,n,E),e.elementType=Ie,e.lanes=N,e;case T:return ks(o.children,E,N,n);case x:Z=8,E|=24;break;case P:return e=pi(12,o,n,E|2),e.elementType=P,e.lanes=N,e;case B:return e=pi(13,o,n,E),e.elementType=B,e.lanes=N,e;case W:return e=pi(19,o,n,E),e.elementType=W,e.lanes=N,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:case I:Z=10;break e;case F:Z=9;break e;case $:Z=11;break e;case Y:Z=14;break e;case q:Z=16,h=null;break e}Z=29,o=Error(a(130,e===null?"null":typeof e,"")),h=null}return n=pi(Z,o,n,E),n.elementType=e,n.type=h,n.lanes=N,n}function ks(e,n,o,h){return e=pi(7,e,h,n),e.lanes=o,e}function Xn(e,n,o){return e=pi(6,e,null,n),e.lanes=o,e}function Ku(e,n,o){return n=pi(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Bs=[],Hs=0,Gu=null,$u=0,ha=[],pa=0,js=null,co=1,fo="";function Vs(e,n){Bs[Hs++]=$u,Bs[Hs++]=Gu,Gu=e,$u=n}function Md(e,n,o){ha[pa++]=co,ha[pa++]=fo,ha[pa++]=js,js=e;var h=co;e=fo;var E=32-V(h)-1;h&=~(1<<E),o+=1;var N=32-V(n)+E;if(30<N){var Z=E-E%5;N=(h&(1<<Z)-1).toString(32),h>>=Z,E-=Z,co=1<<32-V(n)+E|o<<E|h,fo=N+e}else co=1<<N|o<<E|h,fo=e}function qu(e){e.return!==null&&(Vs(e,1),Md(e,1,0))}function wf(e){for(;e===Gu;)Gu=Bs[--Hs],Bs[Hs]=null,$u=Bs[--Hs],Bs[Hs]=null;for(;e===js;)js=ha[--pa],ha[pa]=null,fo=ha[--pa],ha[pa]=null,co=ha[--pa],ha[pa]=null}var Pi=null,ri=null,In=!1,es=null,Qa=!1,_f=Error(a(519));function ts(e){var n=Error(a(418,""));throw zu(Pa(n,e)),_f}function _g(e){var n=e.stateNode,o=e.type,h=e.memoizedProps;switch(n[Pt]=e,n[Xt]=h,o){case"dialog":mn("cancel",n),mn("close",n);break;case"iframe":case"object":case"embed":mn("load",n);break;case"video":case"audio":for(o=0;o<$c.length;o++)mn($c[o],n);break;case"source":mn("error",n);break;case"img":case"image":case"link":mn("error",n),mn("load",n);break;case"details":mn("toggle",n);break;case"input":mn("invalid",n),Ge(n,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),be(n);break;case"select":mn("invalid",n);break;case"textarea":mn("invalid",n),ae(n,h.value,h.defaultValue,h.children),be(n)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||n.textContent===""+o||h.suppressHydrationWarning===!0||L(n.textContent,o)?(h.popover!=null&&(mn("beforetoggle",n),mn("toggle",n)),h.onScroll!=null&&mn("scroll",n),h.onScrollEnd!=null&&mn("scrollend",n),h.onClick!=null&&(n.onclick=z),n=!0):n=!1,n||ts(e)}function Sf(e){for(Pi=e.return;Pi;)switch(Pi.tag){case 5:case 13:Qa=!1;return;case 27:case 3:Qa=!0;return;default:Pi=Pi.return}}function Ll(e){if(e!==Pi)return!1;if(!In)return Sf(e),In=!0,!1;var n=e.tag,o;if((o=n!==3&&n!==27)&&((o=n===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||ln(e.type,e.memoizedProps)),o=!o),o&&ri&&ts(e),Sf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(o=e.data,o==="/$"){if(n===0){ri=an(e.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++;e=e.nextSibling}ri=null}}else n===27?(n=ri,Li(e.type)?(e=$o,$o=null,ri=e):ri=n):ri=Pi?an(e.stateNode.nextSibling):null;return!0}function Ml(){ri=Pi=null,In=!1}function kd(){var e=es;return e!==null&&(qi===null?qi=e:qi.push.apply(qi,e),es=null),e}function zu(e){es===null?es=[e]:es.push(e)}var Ef=xe(null),Ks=null,No=null;function rs(e,n,o){je(Ef,n._currentValue),n._currentValue=o}function Fo(e){e._currentValue=Ef.current,Xe(Ef)}function Af(e,n,o){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===o)break;e=e.return}}function Bd(e,n,o,h){var E=e.child;for(E!==null&&(E.return=e);E!==null;){var N=E.dependencies;if(N!==null){var Z=E.child;N=N.firstContext;e:for(;N!==null;){var ce=N;N=E;for(var Be=0;Be<n.length;Be++)if(ce.context===n[Be]){N.lanes|=o,ce=N.alternate,ce!==null&&(ce.lanes|=o),Af(N.return,o,e),h||(Z=null);break e}N=ce.next}}else if(E.tag===18){if(Z=E.return,Z===null)throw Error(a(341));Z.lanes|=o,N=Z.alternate,N!==null&&(N.lanes|=o),Af(Z,o,e),Z=null}else Z=E.child;if(Z!==null)Z.return=E;else for(Z=E;Z!==null;){if(Z===e){Z=null;break}if(E=Z.sibling,E!==null){E.return=Z.return,Z=E;break}Z=Z.return}E=Z}}function kl(e,n,o,h){e=null;for(var E=n,N=!1;E!==null;){if(!N){if((E.flags&524288)!==0)N=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var Z=E.alternate;if(Z===null)throw Error(a(387));if(Z=Z.memoizedProps,Z!==null){var ce=E.type;xi(E.pendingProps.value,Z.value)||(e!==null?e.push(ce):e=[ce])}}else if(E===Me.current){if(Z=E.alternate,Z===null)throw Error(a(387));Z.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(e!==null?e.push(jh):e=[jh])}E=E.return}e!==null&&Bd(n,e,o,h),n.flags|=262144}function Rf(e){for(e=e.firstContext;e!==null;){if(!xi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ns(e){Ks=e,No=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ii(e){return Hd(Ks,e)}function Wu(e,n){return Ks===null&&ns(e),Hd(e,n)}function Hd(e,n){var o=n._currentValue;if(n={context:n,memoizedValue:o,next:null},No===null){if(e===null)throw Error(a(308));No=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else No=No.next=n;return o}var dm=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(o,h){e.push(h)}};this.abort=function(){n.aborted=!0,e.forEach(function(o){return o()})}},Sg=t.unstable_scheduleCallback,hm=t.unstable_NormalPriority,gr={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bi(){return{controller:new dm,data:new Map,refCount:0}}function Bl(e){e.refCount--,e.refCount===0&&Sg(hm,function(){e.controller.abort()})}var Ju=null,Xa=0,Fa=0,Gs=null;function Eg(e,n){if(Ju===null){var o=Ju=[];Xa=0,Fa=Ih(),Gs={status:"pending",value:void 0,then:function(h){o.push(h)}}}return Xa++,n.then(jd,jd),n}function jd(){if(--Xa===0&&Ju!==null){Gs!==null&&(Gs.status="fulfilled");var e=Ju;Ju=null,Fa=0,Gs=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Ag(e,n){var o=[],h={status:"pending",value:null,reason:null,then:function(E){o.push(E)}};return e.then(function(){h.status="fulfilled",h.value=n;for(var E=0;E<o.length;E++)(0,o[E])(n)},function(E){for(h.status="rejected",h.reason=E,E=0;E<o.length;E++)(0,o[E])(void 0)}),h}var Vd=Ne.S;Ne.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&Eg(e,n),Vd!==null&&Vd(e,n)};var Do=xe(null);function Kd(){var e=Do.current;return e!==null?e:Yn.pooledCache}function Yu(e,n){n===null?je(Do,Do.current):je(Do,n.pool)}function Gd(){var e=Kd();return e===null?null:{parent:gr._currentValue,pool:e}}var Za=Error(a(460)),Hl=Error(a(474)),$s=Error(a(542)),Da={then:function(){}};function qs(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ho(){}function Qu(e,n,o){switch(o=e[o],o===void 0?e.push(n):o!==n&&(n.then(ho,ho),n=o),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Xu(e),e;default:if(typeof n.status=="string")n.then(ho,ho);else{if(e=Yn,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(h){if(n.status==="pending"){var E=n;E.status="fulfilled",E.value=h}},function(h){if(n.status==="pending"){var E=n;E.status="rejected",E.reason=h}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Xu(e),e}throw po=n,Za}}var po=null;function zs(){if(po===null)throw Error(a(459));var e=po;return po=null,e}function Xu(e){if(e===Za||e===$s)throw Error(a(483))}var go=!1;function eo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ws(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ga(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function yo(e,n,o){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(Bn&2)!==0){var E=h.pending;return E===null?n.next=n:(n.next=E.next,E.next=n),h.pending=n,n=bf(e),wg(e,null,o),n}return Dl(e,h,n,o),bf(e)}function Uo(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194048)!==0)){var h=n.lanes;h&=e.pendingLanes,o|=h,n.lanes=o,er(e,o)}}function Js(e,n){var o=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var E=null,N=null;if(o=o.firstBaseUpdate,o!==null){do{var Z={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};N===null?E=N=Z:N=N.next=Z,o=o.next}while(o!==null);N===null?E=N=n:N=N.next=n}else E=N=n;o={baseState:h.baseState,firstBaseUpdate:E,lastBaseUpdate:N,shared:h.shared,callbacks:h.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}var Zu=!1;function wi(){if(Zu){var e=Gs;if(e!==null)throw e}}function Ir(e,n,o,h){Zu=!1;var E=e.updateQueue;go=!1;var N=E.firstBaseUpdate,Z=E.lastBaseUpdate,ce=E.shared.pending;if(ce!==null){E.shared.pending=null;var Be=ce,yt=Be.next;Be.next=null,Z===null?N=yt:Z.next=yt,Z=Be;var Nt=e.alternate;Nt!==null&&(Nt=Nt.updateQueue,ce=Nt.lastBaseUpdate,ce!==Z&&(ce===null?Nt.firstBaseUpdate=yt:ce.next=yt,Nt.lastBaseUpdate=Be))}if(N!==null){var kt=E.baseState;Z=0,Nt=yt=Be=null,ce=N;do{var wt=ce.lane&-536870913,At=wt!==ce.lane;if(At?(wn&wt)===wt:(h&wt)===wt){wt!==0&&wt===Fa&&(Zu=!0),Nt!==null&&(Nt=Nt.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var qr=e,Br=ce;wt=n;var Qn=o;switch(Br.tag){case 1:if(qr=Br.payload,typeof qr=="function"){kt=qr.call(Qn,kt,wt);break e}kt=qr;break e;case 3:qr.flags=qr.flags&-65537|128;case 0:if(qr=Br.payload,wt=typeof qr=="function"?qr.call(Qn,kt,wt):qr,wt==null)break e;kt=m({},kt,wt);break e;case 2:go=!0}}wt=ce.callback,wt!==null&&(e.flags|=64,At&&(e.flags|=8192),At=E.callbacks,At===null?E.callbacks=[wt]:At.push(wt))}else At={lane:wt,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Nt===null?(yt=Nt=At,Be=kt):Nt=Nt.next=At,Z|=wt;if(ce=ce.next,ce===null){if(ce=E.shared.pending,ce===null)break;At=ce,ce=At.next,At.next=null,E.lastBaseUpdate=At,E.shared.pending=null}}while(!0);Nt===null&&(Be=kt),E.baseState=Be,E.firstBaseUpdate=yt,E.lastBaseUpdate=Nt,N===null&&(E.shared.lanes=0),Ro|=Z,e.lanes=Z,e.memoizedState=kt}}function xf(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function Ys(e,n){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)xf(o[e],n)}var jl=xe(null),is=xe(0);function Qs(e,n){e=Ao,je(is,e),je(jl,n),Ao=e|n.baseLanes}function Xs(){je(is,Ao),je(jl,jl.current)}function ec(){Ao=is.current,Xe(jl),Xe(is)}var mo=0,nn=null,pn=null,ni=null,Tf=!1,Zs=!1,as=!1,tc=0,rc=0,el=null,$d=0;function ii(){throw Error(a(321))}function Cf(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!xi(e[o],n[o]))return!1;return!0}function os(e,n,o,h,E,N){return mo=N,nn=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ne.H=e===null||e.memoizedState===null?Jd:Ac,as=!1,N=o(h,E),as=!1,Zs&&(N=gi(n,o,h,E)),tl(e),N}function tl(e){Ne.H=wo;var n=pn!==null&&pn.next!==null;if(mo=0,ni=pn=nn=null,Tf=!1,rc=0,el=null,n)throw Error(a(300));e===null||Ci||(e=e.dependencies,e!==null&&Rf(e)&&(Ci=!0))}function gi(e,n,o,h){nn=e;var E=0;do{if(Zs&&(el=null),rc=0,Zs=!1,25<=E)throw Error(a(301));if(E+=1,ni=pn=null,e.updateQueue!=null){var N=e.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Ne.H=Lf,N=n(o,h)}while(Zs);return N}function Vl(){var e=Ne.H,n=e.useState()[0];return n=typeof n.then=="function"?cs(n):n,e=e.useState()[0],(pn!==null?pn.memoizedState:null)!==e&&(nn.flags|=1024),n}function ss(){var e=tc!==0;return tc=0,e}function ls(e,n,o){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~o}function Gi(e){if(Tf){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Tf=!1}mo=0,ni=pn=nn=null,Zs=!1,rc=tc=0,el=null}function bn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ni===null?nn.memoizedState=ni=e:ni=ni.next=e,ni}function Jn(){if(pn===null){var e=nn.alternate;e=e!==null?e.memoizedState:null}else e=pn.next;var n=ni===null?nn.memoizedState:ni.next;if(n!==null)ni=n,pn=e;else{if(e===null)throw nn.alternate===null?Error(a(467)):Error(a(310));pn=e,e={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},ni===null?nn.memoizedState=ni=e:ni=ni.next=e}return ni}function us(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cs(e){var n=rc;return rc+=1,el===null&&(el=[]),e=Qu(el,e,n),n=nn,(ni===null?n.memoizedState:ni.next)===null&&(n=n.alternate,Ne.H=n===null||n.memoizedState===null?Jd:Ac),e}function Kl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return cs(e);if(e.$$typeof===I)return Ii(e)}throw Error(a(438,String(e)))}function nc(e){var n=null,o=nn.updateQueue;if(o!==null&&(n=o.memoCache),n==null){var h=nn.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(n={data:h.data.map(function(E){return E.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),o===null&&(o=us(),nn.updateQueue=o),o.memoCache=n,o=n.data[n.index],o===void 0)for(o=n.data[n.index]=Array(e),h=0;h<e;h++)o[h]=K;return n.index++,o}function Ua(e,n){return typeof n=="function"?n(e):n}function rl(e){var n=Jn();return Gl(n,pn,e)}function Gl(e,n,o){var h=e.queue;if(h===null)throw Error(a(311));h.lastRenderedReducer=o;var E=e.baseQueue,N=h.pending;if(N!==null){if(E!==null){var Z=E.next;E.next=N.next,N.next=Z}n.baseQueue=E=N,h.pending=null}if(N=e.baseState,E===null)e.memoizedState=N;else{n=E.next;var ce=Z=null,Be=null,yt=n,Nt=!1;do{var kt=yt.lane&-536870913;if(kt!==yt.lane?(wn&kt)===kt:(mo&kt)===kt){var wt=yt.revertLane;if(wt===0)Be!==null&&(Be=Be.next={lane:0,revertLane:0,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null}),kt===Fa&&(Nt=!0);else if((mo&wt)===wt){yt=yt.next,wt===Fa&&(Nt=!0);continue}else kt={lane:0,revertLane:yt.revertLane,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null},Be===null?(ce=Be=kt,Z=N):Be=Be.next=kt,nn.lanes|=wt,Ro|=wt;kt=yt.action,as&&o(N,kt),N=yt.hasEagerState?yt.eagerState:o(N,kt)}else wt={lane:kt,revertLane:yt.revertLane,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null},Be===null?(ce=Be=wt,Z=N):Be=Be.next=wt,nn.lanes|=kt,Ro|=kt;yt=yt.next}while(yt!==null&&yt!==n);if(Be===null?Z=N:Be.next=ce,!xi(N,e.memoizedState)&&(Ci=!0,Nt&&(o=Gs,o!==null)))throw o;e.memoizedState=N,e.baseState=Z,e.baseQueue=Be,h.lastRenderedState=N}return E===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function Lo(e){var n=Jn(),o=n.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=e;var h=o.dispatch,E=o.pending,N=n.memoizedState;if(E!==null){o.pending=null;var Z=E=E.next;do N=e(N,Z.action),Z=Z.next;while(Z!==E);xi(N,n.memoizedState)||(Ci=!0),n.memoizedState=N,n.baseQueue===null&&(n.baseState=N),o.lastRenderedState=N}return[N,h]}function ic(e,n,o){var h=nn,E=Jn(),N=In;if(N){if(o===void 0)throw Error(a(407));o=o()}else o=n();var Z=!xi((pn||E).memoizedState,o);Z&&(E.memoizedState=o,Ci=!0),E=E.queue;var ce=fs.bind(null,h,E,e);if(ds(2048,8,ce,[e]),E.getSnapshot!==n||Z||ni!==null&&ni.memoizedState.tag&1){if(h.flags|=2048,Mo(9,il(),oc.bind(null,h,E,o,n),null),Yn===null)throw Error(a(349));N||(mo&124)!==0||ac(h,n,o)}return o}function ac(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=nn.updateQueue,n===null?(n=us(),nn.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function oc(e,n,o,h){n.value=o,n.getSnapshot=h,sc(n)&&lc(e)}function fs(e,n,o){return o(function(){sc(n)&&lc(e)})}function sc(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!xi(e,o)}catch{return!0}}function lc(e){var n=da(e,2);n!==null&&Di(n,e,2)}function $l(e){var n=bn();if(typeof e=="function"){var o=e;if(e=o(),as){k(!0);try{o()}finally{k(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:e},n}function vo(e,n,o,h){return e.baseState=o,Gl(e,pn,typeof h=="function"?h:Ua)}function Of(e,n,o,h,E){if(fl(e))throw Error(a(485));if(e=n.action,e!==null){var N={payload:E,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){N.listeners.push(Z)}};Ne.T!==null?o(!0):N.isTransition=!1,h(N),o=n.pending,o===null?(N.next=n.pending=N,uc(n,N)):(N.next=o.next,n.pending=o.next=N)}}function uc(e,n){var o=n.action,h=n.payload,E=e.state;if(n.isTransition){var N=Ne.T,Z={};Ne.T=Z;try{var ce=o(E,h),Be=Ne.S;Be!==null&&Be(Z,ce),cc(e,n,ce)}catch(yt){ql(e,n,yt)}finally{Ne.T=N}}else try{N=o(E,h),cc(e,n,N)}catch(yt){ql(e,n,yt)}}function cc(e,n,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){Pf(e,n,h)},function(h){return ql(e,n,h)}):Pf(e,n,o)}function Pf(e,n,o){n.status="fulfilled",n.value=o,qd(n),e.state=o,n=e.pending,n!==null&&(o=n.next,o===n?e.pending=null:(o=o.next,n.next=o,uc(e,o)))}function ql(e,n,o){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do n.status="rejected",n.reason=o,qd(n),n=n.next;while(n!==h)}e.action=null}function qd(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function fc(e,n){return n}function zd(e,n){if(In){var o=Yn.formState;if(o!==null){e:{var h=nn;if(In){if(ri){t:{for(var E=ri,N=Qa;E.nodeType!==8;){if(!N){E=null;break t}if(E=an(E.nextSibling),E===null){E=null;break t}}N=E.data,E=N==="F!"||N==="F"?E:null}if(E){ri=an(E.nextSibling),h=E.data==="F!";break e}}ts(h)}h=!1}h&&(n=o[0])}}return o=bn(),o.memoizedState=o.baseState=n,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fc,lastRenderedState:n},o.queue=h,o=cl.bind(null,nn,h),h.dispatch=o,h=$l(!1),N=hs.bind(null,nn,!1,h.queue),h=bn(),E={state:n,dispatch:null,action:e,pending:null},h.queue=E,o=Of.bind(null,nn,E,N,o),E.dispatch=o,h.memoizedState=e,[n,o,!1]}function dc(e){var n=Jn();return nl(n,pn,e)}function nl(e,n,o){if(n=Gl(e,n,fc)[0],e=rl(Ua)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var h=cs(n)}catch(Z){throw Z===Za?$s:Z}else h=n;n=Jn();var E=n.queue,N=E.dispatch;return o!==n.memoizedState&&(nn.flags|=2048,Mo(9,il(),hc.bind(null,E,o),null)),[h,N,e]}function hc(e,n){e.action=n}function pc(e){var n=Jn(),o=pn;if(o!==null)return nl(n,o,e);Jn(),n=n.memoizedState,o=Jn();var h=o.queue.dispatch;return o.memoizedState=e,[n,h,!1]}function Mo(e,n,o,h){return e={tag:e,create:o,deps:h,inst:n,next:null},n=nn.updateQueue,n===null&&(n=us(),nn.updateQueue=n),o=n.lastEffect,o===null?n.lastEffect=e.next=e:(h=o.next,o.next=e,e.next=h,n.lastEffect=e),e}function il(){return{destroy:void 0,resource:void 0}}function zl(){return Jn().memoizedState}function al(e,n,o,h){var E=bn();h=h===void 0?null:h,nn.flags|=e,E.memoizedState=Mo(1|n,il(),o,h)}function ds(e,n,o,h){var E=Jn();h=h===void 0?null:h;var N=E.memoizedState.inst;pn!==null&&h!==null&&Cf(h,pn.memoizedState.deps)?E.memoizedState=Mo(n,N,o,h):(nn.flags|=e,E.memoizedState=Mo(1|n,N,o,h))}function gc(e,n){al(8390656,8,e,n)}function ol(e,n){ds(2048,8,e,n)}function yc(e,n){return ds(4,2,e,n)}function If(e,n){return ds(4,4,e,n)}function sl(e,n){if(typeof n=="function"){e=e();var o=n(e);return function(){typeof o=="function"?o():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function mc(e,n,o){o=o!=null?o.concat([e]):null,ds(4,4,sl.bind(null,n,e),o)}function vc(){}function ll(e,n){var o=Jn();n=n===void 0?null:n;var h=o.memoizedState;return n!==null&&Cf(n,h[1])?h[0]:(o.memoizedState=[e,n],e)}function bc(e,n){var o=Jn();n=n===void 0?null:n;var h=o.memoizedState;if(n!==null&&Cf(n,h[1]))return h[0];if(h=e(),as){k(!0);try{e()}finally{k(!1)}}return o.memoizedState=[h,n],h}function wc(e,n,o){return o===void 0||(mo&1073741824)!==0?e.memoizedState=n:(e.memoizedState=o,e=id(),nn.lanes|=e,Ro|=e,o)}function Nf(e,n,o,h){return xi(o,n)?o:jl.current!==null?(e=wc(e,o,h),xi(e,n)||(Ci=!0),e):(mo&42)===0?(Ci=!0,e.memoizedState=o):(e=id(),nn.lanes|=e,Ro|=e,n)}function Wd(e,n,o,h,E){var N=gt.p;gt.p=N!==0&&8>N?N:8;var Z=Ne.T,ce={};Ne.T=ce,hs(e,!1,n,o);try{var Be=E(),yt=Ne.S;if(yt!==null&&yt(ce,Be),Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var Nt=Ag(Be,h);bo(e,n,Nt,zi(e))}else bo(e,n,h,zi(e))}catch(kt){bo(e,n,{then:function(){},status:"rejected",reason:kt},zi())}finally{gt.p=N,Ne.T=Z}}function Rg(){}function Ff(e,n,o,h){if(e.tag!==5)throw Error(a(476));var E=_c(e).queue;Wd(e,E,n,ve,o===null?Rg:function(){return Df(e),o(h)})}function _c(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:ve},next:null};var o={};return n.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:o},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Df(e){var n=_c(e).next.queue;bo(e,n,{},zi())}function Uf(){return Ii(jh)}function Sc(){return Jn().memoizedState}function ul(){return Jn().memoizedState}function Wl(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var o=zi();e=ga(o);var h=yo(n,e,o);h!==null&&(Di(h,n,o),Uo(h,n,o)),n={cache:bi()},e.payload=n;return}n=n.return}}function Jl(e,n,o){var h=zi();o={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},fl(e)?dl(n,o):(o=Ud(e,n,o,h),o!==null&&(Di(o,e,h),Ec(o,n,h)))}function cl(e,n,o){var h=zi();bo(e,n,o,h)}function bo(e,n,o,h){var E={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(fl(e))dl(n,E);else{var N=e.alternate;if(e.lanes===0&&(N===null||N.lanes===0)&&(N=n.lastRenderedReducer,N!==null))try{var Z=n.lastRenderedState,ce=N(Z,o);if(E.hasEagerState=!0,E.eagerState=ce,xi(ce,Z))return Dl(e,n,E,0),Yn===null&&vf(),!1}catch{}finally{}if(o=Ud(e,n,E,h),o!==null)return Di(o,e,h),Ec(o,n,h),!0}return!1}function hs(e,n,o,h){if(h={lane:2,revertLane:Ih(),action:h,hasEagerState:!1,eagerState:null,next:null},fl(e)){if(n)throw Error(a(479))}else n=Ud(e,o,h,2),n!==null&&Di(n,e,2)}function fl(e){var n=e.alternate;return e===nn||n!==null&&n===nn}function dl(e,n){Zs=Tf=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function Ec(e,n,o){if((o&4194048)!==0){var h=n.lanes;h&=e.pendingLanes,o|=h,n.lanes=o,er(e,o)}}var wo={readContext:Ii,use:Kl,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useLayoutEffect:ii,useInsertionEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useSyncExternalStore:ii,useId:ii,useHostTransitionStatus:ii,useFormState:ii,useActionState:ii,useOptimistic:ii,useMemoCache:ii,useCacheRefresh:ii},Jd={readContext:Ii,use:Kl,useCallback:function(e,n){return bn().memoizedState=[e,n===void 0?null:n],e},useContext:Ii,useEffect:gc,useImperativeHandle:function(e,n,o){o=o!=null?o.concat([e]):null,al(4194308,4,sl.bind(null,n,e),o)},useLayoutEffect:function(e,n){return al(4194308,4,e,n)},useInsertionEffect:function(e,n){al(4,2,e,n)},useMemo:function(e,n){var o=bn();n=n===void 0?null:n;var h=e();if(as){k(!0);try{e()}finally{k(!1)}}return o.memoizedState=[h,n],h},useReducer:function(e,n,o){var h=bn();if(o!==void 0){var E=o(n);if(as){k(!0);try{o(n)}finally{k(!1)}}}else E=n;return h.memoizedState=h.baseState=E,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:E},h.queue=e,e=e.dispatch=Jl.bind(null,nn,e),[h.memoizedState,e]},useRef:function(e){var n=bn();return e={current:e},n.memoizedState=e},useState:function(e){e=$l(e);var n=e.queue,o=cl.bind(null,nn,n);return n.dispatch=o,[e.memoizedState,o]},useDebugValue:vc,useDeferredValue:function(e,n){var o=bn();return wc(o,e,n)},useTransition:function(){var e=$l(!1);return e=Wd.bind(null,nn,e.queue,!0,!1),bn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,o){var h=nn,E=bn();if(In){if(o===void 0)throw Error(a(407));o=o()}else{if(o=n(),Yn===null)throw Error(a(349));(wn&124)!==0||ac(h,n,o)}E.memoizedState=o;var N={value:o,getSnapshot:n};return E.queue=N,gc(fs.bind(null,h,N,e),[e]),h.flags|=2048,Mo(9,il(),oc.bind(null,h,N,o,n),null),o},useId:function(){var e=bn(),n=Yn.identifierPrefix;if(In){var o=fo,h=co;o=(h&~(1<<32-V(h)-1)).toString(32)+o,n="«"+n+"R"+o,o=tc++,0<o&&(n+="H"+o.toString(32)),n+="»"}else o=$d++,n="«"+n+"r"+o.toString(32)+"»";return e.memoizedState=n},useHostTransitionStatus:Uf,useFormState:zd,useActionState:zd,useOptimistic:function(e){var n=bn();n.memoizedState=n.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=o,n=hs.bind(null,nn,!0,o),o.dispatch=n,[e,n]},useMemoCache:nc,useCacheRefresh:function(){return bn().memoizedState=Wl.bind(null,nn)}},Ac={readContext:Ii,use:Kl,useCallback:ll,useContext:Ii,useEffect:ol,useImperativeHandle:mc,useInsertionEffect:yc,useLayoutEffect:If,useMemo:bc,useReducer:rl,useRef:zl,useState:function(){return rl(Ua)},useDebugValue:vc,useDeferredValue:function(e,n){var o=Jn();return Nf(o,pn.memoizedState,e,n)},useTransition:function(){var e=rl(Ua)[0],n=Jn().memoizedState;return[typeof e=="boolean"?e:cs(e),n]},useSyncExternalStore:ic,useId:Sc,useHostTransitionStatus:Uf,useFormState:dc,useActionState:dc,useOptimistic:function(e,n){var o=Jn();return vo(o,pn,e,n)},useMemoCache:nc,useCacheRefresh:ul},Lf={readContext:Ii,use:Kl,useCallback:ll,useContext:Ii,useEffect:ol,useImperativeHandle:mc,useInsertionEffect:yc,useLayoutEffect:If,useMemo:bc,useReducer:Lo,useRef:zl,useState:function(){return Lo(Ua)},useDebugValue:vc,useDeferredValue:function(e,n){var o=Jn();return pn===null?wc(o,e,n):Nf(o,pn.memoizedState,e,n)},useTransition:function(){var e=Lo(Ua)[0],n=Jn().memoizedState;return[typeof e=="boolean"?e:cs(e),n]},useSyncExternalStore:ic,useId:Sc,useHostTransitionStatus:Uf,useFormState:pc,useActionState:pc,useOptimistic:function(e,n){var o=Jn();return pn!==null?vo(o,pn,e,n):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:nc,useCacheRefresh:ul},La=null,ea=0;function ps(e){var n=ea;return ea+=1,La===null&&(La=[]),Qu(La,e,n)}function ko(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function hl(e,n){throw n.$$typeof===b?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Rc(e){var n=e._init;return n(e._payload)}function xc(e){function n(it,Qe){if(e){var ft=it.deletions;ft===null?(it.deletions=[Qe],it.flags|=16):ft.push(Qe)}}function o(it,Qe){if(!e)return null;for(;Qe!==null;)n(it,Qe),Qe=Qe.sibling;return null}function h(it){for(var Qe=new Map;it!==null;)it.key!==null?Qe.set(it.key,it):Qe.set(it.index,it),it=it.sibling;return Qe}function E(it,Qe){return it=Na(it,Qe),it.index=0,it.sibling=null,it}function N(it,Qe,ft){return it.index=ft,e?(ft=it.alternate,ft!==null?(ft=ft.index,ft<Qe?(it.flags|=67108866,Qe):ft):(it.flags|=67108866,Qe)):(it.flags|=1048576,Qe)}function Z(it){return e&&it.alternate===null&&(it.flags|=67108866),it}function ce(it,Qe,ft,Ut){return Qe===null||Qe.tag!==6?(Qe=Xn(ft,it.mode,Ut),Qe.return=it,Qe):(Qe=E(Qe,ft),Qe.return=it,Qe)}function Be(it,Qe,ft,Ut){var _r=ft.type;return _r===T?Nt(it,Qe,ft.props.children,Ut,ft.key):Qe!==null&&(Qe.elementType===_r||typeof _r=="object"&&_r!==null&&_r.$$typeof===q&&Rc(_r)===Qe.type)?(Qe=E(Qe,ft.props),ko(Qe,ft),Qe.return=it,Qe):(Qe=Vu(ft.type,ft.key,ft.props,null,it.mode,Ut),ko(Qe,ft),Qe.return=it,Qe)}function yt(it,Qe,ft,Ut){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==ft.containerInfo||Qe.stateNode.implementation!==ft.implementation?(Qe=Ku(ft,it.mode,Ut),Qe.return=it,Qe):(Qe=E(Qe,ft.children||[]),Qe.return=it,Qe)}function Nt(it,Qe,ft,Ut,_r){return Qe===null||Qe.tag!==7?(Qe=ks(ft,it.mode,Ut,_r),Qe.return=it,Qe):(Qe=E(Qe,ft),Qe.return=it,Qe)}function kt(it,Qe,ft){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Qe=Xn(""+Qe,it.mode,ft),Qe.return=it,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case _:return ft=Vu(Qe.type,Qe.key,Qe.props,null,it.mode,ft),ko(ft,Qe),ft.return=it,ft;case A:return Qe=Ku(Qe,it.mode,ft),Qe.return=it,Qe;case q:var Ut=Qe._init;return Qe=Ut(Qe._payload),kt(it,Qe,ft)}if(st(Qe)||ge(Qe))return Qe=ks(Qe,it.mode,ft,null),Qe.return=it,Qe;if(typeof Qe.then=="function")return kt(it,ps(Qe),ft);if(Qe.$$typeof===I)return kt(it,Wu(it,Qe),ft);hl(it,Qe)}return null}function wt(it,Qe,ft,Ut){var _r=Qe!==null?Qe.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return _r!==null?null:ce(it,Qe,""+ft,Ut);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case _:return ft.key===_r?Be(it,Qe,ft,Ut):null;case A:return ft.key===_r?yt(it,Qe,ft,Ut):null;case q:return _r=ft._init,ft=_r(ft._payload),wt(it,Qe,ft,Ut)}if(st(ft)||ge(ft))return _r!==null?null:Nt(it,Qe,ft,Ut,null);if(typeof ft.then=="function")return wt(it,Qe,ps(ft),Ut);if(ft.$$typeof===I)return wt(it,Qe,Wu(it,ft),Ut);hl(it,ft)}return null}function At(it,Qe,ft,Ut,_r){if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint")return it=it.get(ft)||null,ce(Qe,it,""+Ut,_r);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case _:return it=it.get(Ut.key===null?ft:Ut.key)||null,Be(Qe,it,Ut,_r);case A:return it=it.get(Ut.key===null?ft:Ut.key)||null,yt(Qe,it,Ut,_r);case q:var _n=Ut._init;return Ut=_n(Ut._payload),At(it,Qe,ft,Ut,_r)}if(st(Ut)||ge(Ut))return it=it.get(ft)||null,Nt(Qe,it,Ut,_r,null);if(typeof Ut.then=="function")return At(it,Qe,ft,ps(Ut),_r);if(Ut.$$typeof===I)return At(it,Qe,ft,Wu(Qe,Ut),_r);hl(Qe,Ut)}return null}function qr(it,Qe,ft,Ut){for(var _r=null,_n=null,Cr=Qe,Vr=Qe=0,Mi=null;Cr!==null&&Vr<ft.length;Vr++){Cr.index>Vr?(Mi=Cr,Cr=null):Mi=Cr.sibling;var Mn=wt(it,Cr,ft[Vr],Ut);if(Mn===null){Cr===null&&(Cr=Mi);break}e&&Cr&&Mn.alternate===null&&n(it,Cr),Qe=N(Mn,Qe,Vr),_n===null?_r=Mn:_n.sibling=Mn,_n=Mn,Cr=Mi}if(Vr===ft.length)return o(it,Cr),In&&Vs(it,Vr),_r;if(Cr===null){for(;Vr<ft.length;Vr++)Cr=kt(it,ft[Vr],Ut),Cr!==null&&(Qe=N(Cr,Qe,Vr),_n===null?_r=Cr:_n.sibling=Cr,_n=Cr);return In&&Vs(it,Vr),_r}for(Cr=h(Cr);Vr<ft.length;Vr++)Mi=At(Cr,it,Vr,ft[Vr],Ut),Mi!==null&&(e&&Mi.alternate!==null&&Cr.delete(Mi.key===null?Vr:Mi.key),Qe=N(Mi,Qe,Vr),_n===null?_r=Mi:_n.sibling=Mi,_n=Mi);return e&&Cr.forEach(function(_u){return n(it,_u)}),In&&Vs(it,Vr),_r}function Br(it,Qe,ft,Ut){if(ft==null)throw Error(a(151));for(var _r=null,_n=null,Cr=Qe,Vr=Qe=0,Mi=null,Mn=ft.next();Cr!==null&&!Mn.done;Vr++,Mn=ft.next()){Cr.index>Vr?(Mi=Cr,Cr=null):Mi=Cr.sibling;var _u=wt(it,Cr,Mn.value,Ut);if(_u===null){Cr===null&&(Cr=Mi);break}e&&Cr&&_u.alternate===null&&n(it,Cr),Qe=N(_u,Qe,Vr),_n===null?_r=_u:_n.sibling=_u,_n=_u,Cr=Mi}if(Mn.done)return o(it,Cr),In&&Vs(it,Vr),_r;if(Cr===null){for(;!Mn.done;Vr++,Mn=ft.next())Mn=kt(it,Mn.value,Ut),Mn!==null&&(Qe=N(Mn,Qe,Vr),_n===null?_r=Mn:_n.sibling=Mn,_n=Mn);return In&&Vs(it,Vr),_r}for(Cr=h(Cr);!Mn.done;Vr++,Mn=ft.next())Mn=At(Cr,it,Vr,Mn.value,Ut),Mn!==null&&(e&&Mn.alternate!==null&&Cr.delete(Mn.key===null?Vr:Mn.key),Qe=N(Mn,Qe,Vr),_n===null?_r=Mn:_n.sibling=Mn,_n=Mn);return e&&Cr.forEach(function(iR){return n(it,iR)}),In&&Vs(it,Vr),_r}function Qn(it,Qe,ft,Ut){if(typeof ft=="object"&&ft!==null&&ft.type===T&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case _:e:{for(var _r=ft.key;Qe!==null;){if(Qe.key===_r){if(_r=ft.type,_r===T){if(Qe.tag===7){o(it,Qe.sibling),Ut=E(Qe,ft.props.children),Ut.return=it,it=Ut;break e}}else if(Qe.elementType===_r||typeof _r=="object"&&_r!==null&&_r.$$typeof===q&&Rc(_r)===Qe.type){o(it,Qe.sibling),Ut=E(Qe,ft.props),ko(Ut,ft),Ut.return=it,it=Ut;break e}o(it,Qe);break}else n(it,Qe);Qe=Qe.sibling}ft.type===T?(Ut=ks(ft.props.children,it.mode,Ut,ft.key),Ut.return=it,it=Ut):(Ut=Vu(ft.type,ft.key,ft.props,null,it.mode,Ut),ko(Ut,ft),Ut.return=it,it=Ut)}return Z(it);case A:e:{for(_r=ft.key;Qe!==null;){if(Qe.key===_r)if(Qe.tag===4&&Qe.stateNode.containerInfo===ft.containerInfo&&Qe.stateNode.implementation===ft.implementation){o(it,Qe.sibling),Ut=E(Qe,ft.children||[]),Ut.return=it,it=Ut;break e}else{o(it,Qe);break}else n(it,Qe);Qe=Qe.sibling}Ut=Ku(ft,it.mode,Ut),Ut.return=it,it=Ut}return Z(it);case q:return _r=ft._init,ft=_r(ft._payload),Qn(it,Qe,ft,Ut)}if(st(ft))return qr(it,Qe,ft,Ut);if(ge(ft)){if(_r=ge(ft),typeof _r!="function")throw Error(a(150));return ft=_r.call(ft),Br(it,Qe,ft,Ut)}if(typeof ft.then=="function")return Qn(it,Qe,ps(ft),Ut);if(ft.$$typeof===I)return Qn(it,Qe,Wu(it,ft),Ut);hl(it,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint"?(ft=""+ft,Qe!==null&&Qe.tag===6?(o(it,Qe.sibling),Ut=E(Qe,ft),Ut.return=it,it=Ut):(o(it,Qe),Ut=Xn(ft,it.mode,Ut),Ut.return=it,it=Ut),Z(it)):o(it,Qe)}return function(it,Qe,ft,Ut){try{ea=0;var _r=Qn(it,Qe,ft,Ut);return La=null,_r}catch(Cr){if(Cr===Za||Cr===$s)throw Cr;var _n=pi(29,Cr,null,it.mode);return _n.lanes=Ut,_n.return=it,_n}finally{}}}var Bo=xc(!0),pl=xc(!1),Ti=xe(null),ya=null;function ta(e){var n=e.alternate;je(_i,_i.current&1),je(Ti,e),ya===null&&(n===null||jl.current!==null||n.memoizedState!==null)&&(ya=e)}function gl(e){if(e.tag===22){if(je(_i,_i.current),je(Ti,e),ya===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(ya=e)}}else gs()}function gs(){je(_i,_i.current),je(Ti,Ti.current)}function Ho(e){Xe(Ti),ya===e&&(ya=null),Xe(_i)}var _i=xe(0);function Mf(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||El(o)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Yd(e,n,o,h){n=e.memoizedState,o=o(h,n),o=o==null?n:m({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var kf={enqueueSetState:function(e,n,o){e=e._reactInternals;var h=zi(),E=ga(h);E.payload=n,o!=null&&(E.callback=o),n=yo(e,E,h),n!==null&&(Di(n,e,h),Uo(n,e,h))},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var h=zi(),E=ga(h);E.tag=1,E.payload=n,o!=null&&(E.callback=o),n=yo(e,E,h),n!==null&&(Di(n,e,h),Uo(n,e,h))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=zi(),h=ga(o);h.tag=2,n!=null&&(h.callback=n),n=yo(e,h,o),n!==null&&(Di(n,e,o),Uo(n,e,o))}};function Qd(e,n,o,h,E,N,Z){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,N,Z):n.prototype&&n.prototype.isPureReactComponent?!Wa(o,h)||!Wa(E,N):!0}function Xd(e,n,o,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,h),n.state!==e&&kf.enqueueReplaceState(n,n.state,null)}function Yl(e,n){var o=n;if("ref"in n){o={};for(var h in n)h!=="ref"&&(o[h]=n[h])}if(e=e.defaultProps){o===n&&(o=m({},o));for(var E in e)o[E]===void 0&&(o[E]=e[E])}return o}var Bf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function pm(e){Bf(e)}function gm(e){console.error(e)}function ym(e){Bf(e)}function Zd(e,n){try{var o=e.onUncaughtError;o(n.value,{componentStack:n.stack})}catch(h){setTimeout(function(){throw h})}}function mm(e,n,o){try{var h=e.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function xg(e,n,o){return o=ga(o),o.tag=3,o.payload={element:null},o.callback=function(){Zd(e,n)},o}function Tg(e){return e=ga(e),e.tag=3,e}function Cg(e,n,o,h){var E=o.type.getDerivedStateFromError;if(typeof E=="function"){var N=h.value;e.payload=function(){return E(N)},e.callback=function(){mm(n,o,h)}}var Z=o.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(e.callback=function(){mm(n,o,h),typeof E!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var ce=h.stack;this.componentDidCatch(h.value,{componentStack:ce!==null?ce:""})})}function pb(e,n,o,h,E){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(n=o.alternate,n!==null&&kl(n,o,E,!0),o=Ti.current,o!==null){switch(o.tag){case 13:return ya===null?Sh():o.alternate===null&&oi===0&&(oi=3),o.flags&=-257,o.flags|=65536,o.lanes=E,h===Da?o.flags|=16384:(n=o.updateQueue,n===null?o.updateQueue=new Set([h]):n.add(h),dd(e,h,E)),!1;case 22:return o.flags|=65536,h===Da?o.flags|=16384:(n=o.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=n):(o=n.retryQueue,o===null?n.retryQueue=new Set([h]):o.add(h)),dd(e,h,E)),!1}throw Error(a(435,o.tag))}return dd(e,h,E),Sh(),!1}if(In)return n=Ti.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=E,h!==_f&&(e=Error(a(422),{cause:h}),zu(Pa(e,o)))):(h!==_f&&(n=Error(a(423),{cause:h}),zu(Pa(n,o))),e=e.current.alternate,e.flags|=65536,E&=-E,e.lanes|=E,h=Pa(h,o),E=xg(e.stateNode,h,E),Js(e,E),oi!==4&&(oi=2)),!1;var N=Error(a(520),{cause:h});if(N=Pa(N,o),Mc===null?Mc=[N]:Mc.push(N),oi!==4&&(oi=2),n===null)return!0;h=Pa(h,o),o=n;do{switch(o.tag){case 3:return o.flags|=65536,e=E&-E,o.lanes|=e,e=xg(o.stateNode,h,e),Js(o,e),!1;case 1:if(n=o.type,N=o.stateNode,(o.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(vs===null||!vs.has(N))))return o.flags|=65536,E&=-E,o.lanes|=E,E=Tg(E),Cg(E,e,o,h),Js(o,E),!1}o=o.return}while(o!==null);return!1}var vm=Error(a(461)),Ci=!1;function Ni(e,n,o,h){n.child=e===null?pl(n,null,o,h):Bo(n,e.child,o,h)}function bm(e,n,o,h,E){o=o.render;var N=n.ref;if("ref"in h){var Z={};for(var ce in h)ce!=="ref"&&(Z[ce]=h[ce])}else Z=h;return ns(n),h=os(e,n,o,Z,N,E),ce=ss(),e!==null&&!Ci?(ls(e,n,E),_o(e,n,E)):(In&&ce&&qu(n),n.flags|=1,Ni(e,n,h,E),n.child)}function Og(e,n,o,h,E){if(e===null){var N=o.type;return typeof N=="function"&&!ju(N)&&N.defaultProps===void 0&&o.compare===null?(n.tag=15,n.type=N,ma(e,n,N,h,E)):(e=Vu(o.type,null,h,n,n.mode,E),e.ref=n.ref,e.return=n,n.child=e)}if(N=e.child,!eu(e,E)){var Z=N.memoizedProps;if(o=o.compare,o=o!==null?o:Wa,o(Z,h)&&e.ref===n.ref)return _o(e,n,E)}return n.flags|=1,e=Na(N,h),e.ref=n.ref,e.return=n,n.child=e}function ma(e,n,o,h,E){if(e!==null){var N=e.memoizedProps;if(Wa(N,h)&&e.ref===n.ref)if(Ci=!1,n.pendingProps=h=N,eu(e,E))(e.flags&131072)!==0&&(Ci=!0);else return n.lanes=e.lanes,_o(e,n,E)}return Hf(e,n,o,h,E)}function eh(e,n,o){var h=n.pendingProps,E=h.children,N=e!==null?e.memoizedState:null;if(h.mode==="hidden"){if((n.flags&128)!==0){if(h=N!==null?N.baseLanes|o:o,e!==null){for(E=n.child=e.child,N=0;E!==null;)N=N|E.lanes|E.childLanes,E=E.sibling;n.childLanes=N&~h}else n.childLanes=0,n.child=null;return Tc(e,n,h,o)}if((o&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Yu(n,N!==null?N.cachePool:null),N!==null?Qs(n,N):Xs(),gl(n);else return n.lanes=n.childLanes=536870912,Tc(e,n,N!==null?N.baseLanes|o:o,o)}else N!==null?(Yu(n,N.cachePool),Qs(n,N),gs(),n.memoizedState=null):(e!==null&&Yu(n,null),Xs(),gs());return Ni(e,n,E,o),n.child}function Tc(e,n,o,h){var E=Kd();return E=E===null?null:{parent:gr._currentValue,pool:E},n.memoizedState={baseLanes:o,cachePool:E},e!==null&&Yu(n,null),Xs(),gl(n),e!==null&&kl(e,n,h,!0),null}function Ql(e,n){var o=n.ref;if(o===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(e===null||e.ref!==o)&&(n.flags|=4194816)}}function Hf(e,n,o,h,E){return ns(n),o=os(e,n,o,h,void 0,E),h=ss(),e!==null&&!Ci?(ls(e,n,E),_o(e,n,E)):(In&&h&&qu(n),n.flags|=1,Ni(e,n,o,E),n.child)}function th(e,n,o,h,E,N){return ns(n),n.updateQueue=null,o=gi(n,h,o,E),tl(e),h=ss(),e!==null&&!Ci?(ls(e,n,N),_o(e,n,N)):(In&&h&&qu(n),n.flags|=1,Ni(e,n,o,N),n.child)}function jf(e,n,o,h,E){if(ns(n),n.stateNode===null){var N=Ul,Z=o.contextType;typeof Z=="object"&&Z!==null&&(N=Ii(Z)),N=new o(h,N),n.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=kf,n.stateNode=N,N._reactInternals=n,N=n.stateNode,N.props=h,N.state=n.memoizedState,N.refs={},eo(n),Z=o.contextType,N.context=typeof Z=="object"&&Z!==null?Ii(Z):Ul,N.state=n.memoizedState,Z=o.getDerivedStateFromProps,typeof Z=="function"&&(Yd(n,o,Z,h),N.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(Z=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),Z!==N.state&&kf.enqueueReplaceState(N,N.state,null),Ir(n,h,N,E),wi(),N.state=n.memoizedState),typeof N.componentDidMount=="function"&&(n.flags|=4194308),h=!0}else if(e===null){N=n.stateNode;var ce=n.memoizedProps,Be=Yl(o,ce);N.props=Be;var yt=N.context,Nt=o.contextType;Z=Ul,typeof Nt=="object"&&Nt!==null&&(Z=Ii(Nt));var kt=o.getDerivedStateFromProps;Nt=typeof kt=="function"||typeof N.getSnapshotBeforeUpdate=="function",ce=n.pendingProps!==ce,Nt||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(ce||yt!==Z)&&Xd(n,N,h,Z),go=!1;var wt=n.memoizedState;N.state=wt,Ir(n,h,N,E),wi(),yt=n.memoizedState,ce||wt!==yt||go?(typeof kt=="function"&&(Yd(n,o,kt,h),yt=n.memoizedState),(Be=go||Qd(n,o,Be,h,wt,yt,Z))?(Nt||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(n.flags|=4194308)):(typeof N.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=yt),N.props=h,N.state=yt,N.context=Z,h=Be):(typeof N.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{N=n.stateNode,Ws(e,n),Z=n.memoizedProps,Nt=Yl(o,Z),N.props=Nt,kt=n.pendingProps,wt=N.context,yt=o.contextType,Be=Ul,typeof yt=="object"&&yt!==null&&(Be=Ii(yt)),ce=o.getDerivedStateFromProps,(yt=typeof ce=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Z!==kt||wt!==Be)&&Xd(n,N,h,Be),go=!1,wt=n.memoizedState,N.state=wt,Ir(n,h,N,E),wi();var At=n.memoizedState;Z!==kt||wt!==At||go||e!==null&&e.dependencies!==null&&Rf(e.dependencies)?(typeof ce=="function"&&(Yd(n,o,ce,h),At=n.memoizedState),(Nt=go||Qd(n,o,Nt,h,wt,At,Be)||e!==null&&e.dependencies!==null&&Rf(e.dependencies))?(yt||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(h,At,Be),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(h,At,Be)),typeof N.componentDidUpdate=="function"&&(n.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof N.componentDidUpdate!="function"||Z===e.memoizedProps&&wt===e.memoizedState||(n.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Z===e.memoizedProps&&wt===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=At),N.props=h,N.state=At,N.context=Be,h=Nt):(typeof N.componentDidUpdate!="function"||Z===e.memoizedProps&&wt===e.memoizedState||(n.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Z===e.memoizedProps&&wt===e.memoizedState||(n.flags|=1024),h=!1)}return N=h,Ql(e,n),h=(n.flags&128)!==0,N||h?(N=n.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:N.render(),n.flags|=1,e!==null&&h?(n.child=Bo(n,e.child,null,E),n.child=Bo(n,null,o,E)):Ni(e,n,o,E),n.memoizedState=N.state,e=n.child):e=_o(e,n,E),e}function rh(e,n,o,h){return Ml(),n.flags|=256,Ni(e,n,o,h),n.child}var Xl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cc(e){return{baseLanes:e,cachePool:Gd()}}function Vf(e,n,o){return e=e!==null?e.childLanes&~o:0,n&&(e|=na),e}function nh(e,n,o){var h=n.pendingProps,E=!1,N=(n.flags&128)!==0,Z;if((Z=N)||(Z=e!==null&&e.memoizedState===null?!1:(_i.current&2)!==0),Z&&(E=!0,n.flags&=-129),Z=(n.flags&32)!==0,n.flags&=-33,e===null){if(In){if(E?ta(n):gs(),In){var ce=ri,Be;if(Be=ce){e:{for(Be=ce,ce=Qa;Be.nodeType!==8;){if(!ce){ce=null;break e}if(Be=an(Be.nextSibling),Be===null){ce=null;break e}}ce=Be}ce!==null?(n.memoizedState={dehydrated:ce,treeContext:js!==null?{id:co,overflow:fo}:null,retryLane:536870912,hydrationErrors:null},Be=pi(18,null,null,0),Be.stateNode=ce,Be.return=n,n.child=Be,Pi=n,ri=null,Be=!0):Be=!1}Be||ts(n)}if(ce=n.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))return El(ce)?n.lanes=32:n.lanes=536870912,null;Ho(n)}return ce=h.children,h=h.fallback,E?(gs(),E=n.mode,ce=Zl({mode:"hidden",children:ce},E),h=ks(h,E,o,null),ce.return=n,h.return=n,ce.sibling=h,n.child=ce,E=n.child,E.memoizedState=Cc(o),E.childLanes=Vf(e,Z,o),n.memoizedState=Xl,h):(ta(n),Kf(n,ce))}if(Be=e.memoizedState,Be!==null&&(ce=Be.dehydrated,ce!==null)){if(N)n.flags&256?(ta(n),n.flags&=-257,n=Gf(e,n,o)):n.memoizedState!==null?(gs(),n.child=e.child,n.flags|=128,n=null):(gs(),E=h.fallback,ce=n.mode,h=Zl({mode:"visible",children:h.children},ce),E=ks(E,ce,o,null),E.flags|=2,h.return=n,E.return=n,h.sibling=E,n.child=h,Bo(n,e.child,null,o),h=n.child,h.memoizedState=Cc(o),h.childLanes=Vf(e,Z,o),n.memoizedState=Xl,n=E);else if(ta(n),El(ce)){if(Z=ce.nextSibling&&ce.nextSibling.dataset,Z)var yt=Z.dgst;Z=yt,h=Error(a(419)),h.stack="",h.digest=Z,zu({value:h,source:null,stack:null}),n=Gf(e,n,o)}else if(Ci||kl(e,n,o,!1),Z=(o&e.childLanes)!==0,Ci||Z){if(Z=Yn,Z!==null&&(h=o&-o,h=(h&42)!==0?1:Ht(h),h=(h&(Z.suspendedLanes|o))!==0?0:h,h!==0&&h!==Be.retryLane))throw Be.retryLane=h,da(e,h),Di(Z,e,h),vm;ce.data==="$?"||Sh(),n=Gf(e,n,o)}else ce.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=Be.treeContext,ri=an(ce.nextSibling),Pi=n,In=!0,es=null,Qa=!1,e!==null&&(ha[pa++]=co,ha[pa++]=fo,ha[pa++]=js,co=e.id,fo=e.overflow,js=n),n=Kf(n,h.children),n.flags|=4096);return n}return E?(gs(),E=h.fallback,ce=n.mode,Be=e.child,yt=Be.sibling,h=Na(Be,{mode:"hidden",children:h.children}),h.subtreeFlags=Be.subtreeFlags&65011712,yt!==null?E=Na(yt,E):(E=ks(E,ce,o,null),E.flags|=2),E.return=n,h.return=n,h.sibling=E,n.child=h,h=E,E=n.child,ce=e.child.memoizedState,ce===null?ce=Cc(o):(Be=ce.cachePool,Be!==null?(yt=gr._currentValue,Be=Be.parent!==yt?{parent:yt,pool:yt}:Be):Be=Gd(),ce={baseLanes:ce.baseLanes|o,cachePool:Be}),E.memoizedState=ce,E.childLanes=Vf(e,Z,o),n.memoizedState=Xl,h):(ta(n),o=e.child,e=o.sibling,o=Na(o,{mode:"visible",children:h.children}),o.return=n,o.sibling=null,e!==null&&(Z=n.deletions,Z===null?(n.deletions=[e],n.flags|=16):Z.push(e)),n.child=o,n.memoizedState=null,o)}function Kf(e,n){return n=Zl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Zl(e,n){return e=pi(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gf(e,n,o){return Bo(n,e.child,null,o),e=Kf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function ih(e,n,o){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),Af(e.return,n,o)}function $f(e,n,o,h,E){var N=e.memoizedState;N===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:E}:(N.isBackwards=n,N.rendering=null,N.renderingStartTime=0,N.last=h,N.tail=o,N.tailMode=E)}function ah(e,n,o){var h=n.pendingProps,E=h.revealOrder,N=h.tail;if(Ni(e,n,h.children,o),h=_i.current,(h&2)!==0)h=h&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ih(e,o,n);else if(e.tag===19)ih(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}switch(je(_i,h),E){case"forwards":for(o=n.child,E=null;o!==null;)e=o.alternate,e!==null&&Mf(e)===null&&(E=o),o=o.sibling;o=E,o===null?(E=n.child,n.child=null):(E=o.sibling,o.sibling=null),$f(n,!1,E,o,N);break;case"backwards":for(o=null,E=n.child,n.child=null;E!==null;){if(e=E.alternate,e!==null&&Mf(e)===null){n.child=E;break}e=E.sibling,E.sibling=o,o=E,E=e}$f(n,!0,o,null,N);break;case"together":$f(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function _o(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),Ro|=n.lanes,(o&n.childLanes)===0)if(e!==null){if(kl(e,n,o,!1),(o&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,o=Na(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=Na(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function eu(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Rf(e)))}function Pg(e,n,o){switch(n.tag){case 3:le(n,n.stateNode.containerInfo),rs(n,gr,e.memoizedState.cache),Ml();break;case 27:case 5:Je(n);break;case 4:le(n,n.stateNode.containerInfo);break;case 10:rs(n,n.type,n.memoizedProps.value);break;case 13:var h=n.memoizedState;if(h!==null)return h.dehydrated!==null?(ta(n),n.flags|=128,null):(o&n.child.childLanes)!==0?nh(e,n,o):(ta(n),e=_o(e,n,o),e!==null?e.sibling:null);ta(n);break;case 19:var E=(e.flags&128)!==0;if(h=(o&n.childLanes)!==0,h||(kl(e,n,o,!1),h=(o&n.childLanes)!==0),E){if(h)return ah(e,n,o);n.flags|=128}if(E=n.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),je(_i,_i.current),h)break;return null;case 22:case 23:return n.lanes=0,eh(e,n,o);case 24:rs(n,gr,e.memoizedState.cache)}return _o(e,n,o)}function oh(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps)Ci=!0;else{if(!eu(e,o)&&(n.flags&128)===0)return Ci=!1,Pg(e,n,o);Ci=(e.flags&131072)!==0}else Ci=!1,In&&(n.flags&1048576)!==0&&Md(n,$u,n.index);switch(n.lanes=0,n.tag){case 16:e:{e=n.pendingProps;var h=n.elementType,E=h._init;if(h=E(h._payload),n.type=h,typeof h=="function")ju(h)?(e=Yl(h,e),n.tag=1,n=jf(null,n,h,e,o)):(n.tag=0,n=Hf(null,n,h,e,o));else{if(h!=null){if(E=h.$$typeof,E===$){n.tag=11,n=bm(null,n,h,e,o);break e}else if(E===Y){n.tag=14,n=Og(null,n,h,e,o);break e}}throw n=et(h)||h,Error(a(306,n,""))}}return n;case 0:return Hf(e,n,n.type,n.pendingProps,o);case 1:return h=n.type,E=Yl(h,n.pendingProps),jf(e,n,h,E,o);case 3:e:{if(le(n,n.stateNode.containerInfo),e===null)throw Error(a(387));h=n.pendingProps;var N=n.memoizedState;E=N.element,Ws(e,n),Ir(n,h,null,o);var Z=n.memoizedState;if(h=Z.cache,rs(n,gr,h),h!==N.cache&&Bd(n,[gr],o,!0),wi(),h=Z.element,N.isDehydrated)if(N={element:h,isDehydrated:!1,cache:Z.cache},n.updateQueue.baseState=N,n.memoizedState=N,n.flags&256){n=rh(e,n,h,o);break e}else if(h!==E){E=Pa(Error(a(424)),n),zu(E),n=rh(e,n,h,o);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ri=an(e.firstChild),Pi=n,In=!0,es=null,Qa=!0,o=pl(n,null,h,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ml(),h===E){n=_o(e,n,o);break e}Ni(e,n,h,o)}n=n.child}return n;case 26:return Ql(e,n),e===null?(o=bb(n.type,null,n.pendingProps,null))?n.memoizedState=o:In||(o=n.type,e=n.pendingProps,h=Kt(Mt.current).createElement(o),h[Pt]=n,h[Xt]=e,ke(h,o,e),Gt(h),n.stateNode=h):n.memoizedState=bb(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Je(n),e===null&&In&&(h=n.stateNode=yb(n.type,n.pendingProps,Mt.current),Pi=n,Qa=!0,E=ri,Li(n.type)?($o=E,ri=an(h.firstChild)):ri=E),Ni(e,n,n.pendingProps.children,o),Ql(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&In&&((E=h=ri)&&(h=Wc(h,n.type,n.pendingProps,Qa),h!==null?(n.stateNode=h,Pi=n,ri=an(h.firstChild),Qa=!1,E=!0):E=!1),E||ts(n)),Je(n),E=n.type,N=n.pendingProps,Z=e!==null?e.memoizedProps:null,h=N.children,ln(E,N)?h=null:Z!==null&&ln(E,Z)&&(n.flags|=32),n.memoizedState!==null&&(E=os(e,n,Vl,null,null,o),jh._currentValue=E),Ql(e,n),Ni(e,n,h,o),n.child;case 6:return e===null&&In&&((e=o=ri)&&(o=Jc(o,n.pendingProps,Qa),o!==null?(n.stateNode=o,Pi=n,ri=null,e=!0):e=!1),e||ts(n)),null;case 13:return nh(e,n,o);case 4:return le(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=Bo(n,null,h,o):Ni(e,n,h,o),n.child;case 11:return bm(e,n,n.type,n.pendingProps,o);case 7:return Ni(e,n,n.pendingProps,o),n.child;case 8:return Ni(e,n,n.pendingProps.children,o),n.child;case 12:return Ni(e,n,n.pendingProps.children,o),n.child;case 10:return h=n.pendingProps,rs(n,n.type,h.value),Ni(e,n,h.children,o),n.child;case 9:return E=n.type._context,h=n.pendingProps.children,ns(n),E=Ii(E),h=h(E),n.flags|=1,Ni(e,n,h,o),n.child;case 14:return Og(e,n,n.type,n.pendingProps,o);case 15:return ma(e,n,n.type,n.pendingProps,o);case 19:return ah(e,n,o);case 31:return h=n.pendingProps,o=n.mode,h={mode:h.mode,children:h.children},e===null?(o=Zl(h,o),o.ref=n.ref,n.child=o,o.return=n,n=o):(o=Na(e.child,h),o.ref=n.ref,n.child=o,o.return=n,n=o),n;case 22:return eh(e,n,o);case 24:return ns(n),h=Ii(gr),e===null?(E=Kd(),E===null&&(E=Yn,N=bi(),E.pooledCache=N,N.refCount++,N!==null&&(E.pooledCacheLanes|=o),E=N),n.memoizedState={parent:h,cache:E},eo(n),rs(n,gr,E)):((e.lanes&o)!==0&&(Ws(e,n),Ir(n,null,null,o),wi()),E=e.memoizedState,N=n.memoizedState,E.parent!==h?(E={parent:h,cache:h},n.memoizedState=E,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=E),rs(n,gr,h)):(h=N.cache,rs(n,gr,h),h!==E.cache&&Bd(n,[gr],o,!0))),Ni(e,n,n.pendingProps.children,o),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function So(e){e.flags|=4}function Oc(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ab(n)){if(n=Ti.current,n!==null&&((wn&4194048)===wn?ya!==null:(wn&62914560)!==wn&&(wn&536870912)===0||n!==ya))throw po=Da,Hl;e.flags|=8192}}function Pc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?ot():536870912,e.lanes|=n,bl|=n)}function tu(e,n){if(!In)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function ei(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,h=0;if(n)for(var E=e.child;E!==null;)o|=E.lanes|E.childLanes,h|=E.subtreeFlags&65011712,h|=E.flags&65011712,E.return=e,E=E.sibling;else for(E=e.child;E!==null;)o|=E.lanes|E.childLanes,h|=E.subtreeFlags,h|=E.flags,E.return=e,E=E.sibling;return e.subtreeFlags|=h,e.childLanes=o,n}function qf(e,n,o){var h=n.pendingProps;switch(wf(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(n),null;case 1:return ei(n),null;case 3:return o=n.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),n.memoizedState.cache!==h&&(n.flags|=2048),Fo(gr),Te(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Ll(n)?So(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,kd())),ei(n),null;case 26:return o=n.memoizedState,e===null?(So(n),o!==null?(ei(n),Oc(n,o)):(ei(n),n.flags&=-16777217)):o?o!==e.memoizedState?(So(n),ei(n),Oc(n,o)):(ei(n),n.flags&=-16777217):(e.memoizedProps!==h&&So(n),ei(n),n.flags&=-16777217),null;case 27:se(n),o=Mt.current;var E=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==h&&So(n);else{if(!h){if(n.stateNode===null)throw Error(a(166));return ei(n),null}e=dt.current,Ll(n)?_g(n):(e=yb(E,h,o),n.stateNode=e,So(n))}return ei(n),null;case 5:if(se(n),o=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&So(n);else{if(!h){if(n.stateNode===null)throw Error(a(166));return ei(n),null}if(e=dt.current,Ll(n))_g(n);else{switch(E=Kt(Mt.current),e){case 1:e=E.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:e=E.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":e=E.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":e=E.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":e=E.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof h.is=="string"?E.createElement("select",{is:h.is}):E.createElement("select"),h.multiple?e.multiple=!0:h.size&&(e.size=h.size);break;default:e=typeof h.is=="string"?E.createElement(o,{is:h.is}):E.createElement(o)}}e[Pt]=n,e[Xt]=h;e:for(E=n.child;E!==null;){if(E.tag===5||E.tag===6)e.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===n)break e;for(;E.sibling===null;){if(E.return===null||E.return===n)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}n.stateNode=e;e:switch(ke(e,o,h),o){case"button":case"input":case"select":case"textarea":e=!!h.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&So(n)}}return ei(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==h&&So(n);else{if(typeof h!="string"&&n.stateNode===null)throw Error(a(166));if(e=Mt.current,Ll(n)){if(e=n.stateNode,o=n.memoizedProps,h=null,E=Pi,E!==null)switch(E.tag){case 27:case 5:h=E.memoizedProps}e[Pt]=n,e=!!(e.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||L(e.nodeValue,o)),e||ts(n)}else e=Kt(e).createTextNode(h),e[Pt]=n,n.stateNode=e}return ei(n),null;case 13:if(h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(E=Ll(n),h!==null&&h.dehydrated!==null){if(e===null){if(!E)throw Error(a(318));if(E=n.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));E[Pt]=n}else Ml(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ei(n),E=!1}else E=kd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=E),E=!0;if(!E)return n.flags&256?(Ho(n),n):(Ho(n),null)}if(Ho(n),(n.flags&128)!==0)return n.lanes=o,n;if(o=h!==null,e=e!==null&&e.memoizedState!==null,o){h=n.child,E=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(E=h.alternate.memoizedState.cachePool.pool);var N=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(N=h.memoizedState.cachePool.pool),N!==E&&(h.flags|=2048)}return o!==e&&o&&(n.child.flags|=8192),Pc(n,n.updateQueue),ei(n),null;case 4:return Te(),e===null&&Uh(n.stateNode.containerInfo),ei(n),null;case 10:return Fo(n.type),ei(n),null;case 19:if(Xe(_i),E=n.memoizedState,E===null)return ei(n),null;if(h=(n.flags&128)!==0,N=E.rendering,N===null)if(h)tu(E,!1);else{if(oi!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(N=Mf(e),N!==null){for(n.flags|=128,tu(E,!1),e=N.updateQueue,n.updateQueue=e,Pc(n,e),n.subtreeFlags=0,e=o,o=n.child;o!==null;)Ld(o,e),o=o.sibling;return je(_i,_i.current&1|2),n.child}e=e.sibling}E.tail!==null&&Ce()>Ko&&(n.flags|=128,h=!0,tu(E,!1),n.lanes=4194304)}else{if(!h)if(e=Mf(N),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,Pc(n,e),tu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!N.alternate&&!In)return ei(n),null}else 2*Ce()-E.renderingStartTime>Ko&&o!==536870912&&(n.flags|=128,h=!0,tu(E,!1),n.lanes=4194304);E.isBackwards?(N.sibling=n.child,n.child=N):(e=E.last,e!==null?e.sibling=N:n.child=N,E.last=N)}return E.tail!==null?(n=E.tail,E.rendering=n,E.tail=n.sibling,E.renderingStartTime=Ce(),n.sibling=null,e=_i.current,je(_i,h?e&1|2:e&1),n):(ei(n),null);case 22:case 23:return Ho(n),ec(),h=n.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(n.flags|=8192):h&&(n.flags|=8192),h?(o&536870912)!==0&&(n.flags&128)===0&&(ei(n),n.subtreeFlags&6&&(n.flags|=8192)):ei(n),o=n.updateQueue,o!==null&&Pc(n,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),h=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(h=n.memoizedState.cachePool.pool),h!==o&&(n.flags|=2048),e!==null&&Xe(Do),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Fo(gr),ei(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function Ig(e,n){switch(wf(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Fo(gr),Te(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return se(n),null;case 13:if(Ho(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Ml()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Xe(_i),null;case 4:return Te(),null;case 10:return Fo(n.type),null;case 22:case 23:return Ho(n),ec(),e!==null&&Xe(Do),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Fo(gr),null;case 25:return null;default:return null}}function sh(e,n){switch(wf(n),n.tag){case 3:Fo(gr),Te();break;case 26:case 27:case 5:se(n);break;case 4:Te();break;case 13:Ho(n);break;case 19:Xe(_i);break;case 10:Fo(n.type);break;case 22:case 23:Ho(n),ec(),e!==null&&Xe(Do);break;case 24:Fo(gr)}}function ru(e,n){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var E=h.next;o=E;do{if((o.tag&e)===e){h=void 0;var N=o.create,Z=o.inst;h=N(),Z.destroy=h}o=o.next}while(o!==E)}}catch(ce){Kn(n,n.return,ce)}}function to(e,n,o){try{var h=n.updateQueue,E=h!==null?h.lastEffect:null;if(E!==null){var N=E.next;h=N;do{if((h.tag&e)===e){var Z=h.inst,ce=Z.destroy;if(ce!==void 0){Z.destroy=void 0,E=n;var Be=o,yt=ce;try{yt()}catch(Nt){Kn(E,Be,Nt)}}}h=h.next}while(h!==N)}}catch(Nt){Kn(n,n.return,Nt)}}function lh(e){var n=e.updateQueue;if(n!==null){var o=e.stateNode;try{Ys(n,o)}catch(h){Kn(e,e.return,h)}}}function Ic(e,n,o){o.props=Yl(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(h){Kn(e,n,h)}}function nu(e,n){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var h=e.stateNode;break;case 30:h=e.stateNode;break;default:h=e.stateNode}typeof o=="function"?e.refCleanup=o(h):o.current=h}}catch(E){Kn(e,n,E)}}function Ma(e,n){var o=e.ref,h=e.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(E){Kn(e,n,E)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(E){Kn(e,n,E)}else o.current=null}function uh(e){var n=e.type,o=e.memoizedProps,h=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break e;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(E){Kn(e,e.return,E)}}function zf(e,n,o){try{var h=e.stateNode;Ve(h,e.type,o,n),h[Xt]=n}catch(E){Kn(e,e.return,E)}}function ch(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Li(e.type)||e.tag===4}function Wf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ch(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Li(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jf(e,n,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,n):(n=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,n.appendChild(e),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=z));else if(h!==4&&(h===27&&Li(e.type)&&(o=e.stateNode,n=null),e=e.child,e!==null))for(Jf(e,n,o),e=e.sibling;e!==null;)Jf(e,n,o),e=e.sibling}function jo(e,n,o){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(h!==4&&(h===27&&Li(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(jo(e,n,o),e=e.sibling;e!==null;)jo(e,n,o),e=e.sibling}function fh(e){var n=e.stateNode,o=e.memoizedProps;try{for(var h=e.type,E=n.attributes;E.length;)n.removeAttributeNode(E[0]);ke(n,h,o),n[Pt]=e,n[Xt]=o}catch(N){Kn(e,e.return,N)}}var Eo=!1,ai=!1,Nc=!1,Yf=typeof WeakSet=="function"?WeakSet:Set,yi=null;function Ng(e,n){if(e=e.containerInfo,Ye=ry,e=Oa(e),Id(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var E=h.anchorOffset,N=h.focusNode;h=h.focusOffset;try{o.nodeType,N.nodeType}catch{o=null;break e}var Z=0,ce=-1,Be=-1,yt=0,Nt=0,kt=e,wt=null;t:for(;;){for(var At;kt!==o||E!==0&&kt.nodeType!==3||(ce=Z+E),kt!==N||h!==0&&kt.nodeType!==3||(Be=Z+h),kt.nodeType===3&&(Z+=kt.nodeValue.length),(At=kt.firstChild)!==null;)wt=kt,kt=At;for(;;){if(kt===e)break t;if(wt===o&&++yt===E&&(ce=Z),wt===N&&++Nt===h&&(Be=Z),(At=kt.nextSibling)!==null)break;kt=wt,wt=kt.parentNode}kt=At}o=ce===-1||Be===-1?null:{start:ce,end:Be}}else o=null}o=o||{start:0,end:0}}else o=null;for(Lt={focusedElem:e,selectionRange:o},ry=!1,yi=n;yi!==null;)if(n=yi,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,yi=e;else for(;yi!==null;){switch(n=yi,N=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&N!==null){e=void 0,o=n,E=N.memoizedProps,N=N.memoizedState,h=o.stateNode;try{var qr=Yl(o.type,E,o.elementType===o.type);e=h.getSnapshotBeforeUpdate(qr,N),h.__reactInternalSnapshotBeforeUpdate=e}catch(Br){Kn(o,o.return,Br)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,o=e.nodeType,o===9)ao(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ao(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,yi=e;break}yi=n.return}}function Qf(e,n,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:yl(e,o),h&4&&ru(5,o);break;case 1:if(yl(e,o),h&4)if(e=o.stateNode,n===null)try{e.componentDidMount()}catch(Z){Kn(o,o.return,Z)}else{var E=Yl(o.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(E,n,e.__reactInternalSnapshotBeforeUpdate)}catch(Z){Kn(o,o.return,Z)}}h&64&&lh(o),h&512&&nu(o,o.return);break;case 3:if(yl(e,o),h&64&&(e=o.updateQueue,e!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{Ys(e,n)}catch(Z){Kn(o,o.return,Z)}}break;case 27:n===null&&h&4&&fh(o);case 26:case 5:yl(e,o),n===null&&h&4&&uh(o),h&512&&nu(o,o.return);break;case 12:yl(e,o);break;case 13:yl(e,o),h&4&&hh(e,o),h&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=Vg.bind(null,o),Tr(e,o))));break;case 22:if(h=o.memoizedState!==null||Eo,!h){n=n!==null&&n.memoizedState!==null||ai,E=Eo;var N=ai;Eo=h,(ai=n)&&!N?ml(e,o,(o.subtreeFlags&8772)!==0):yl(e,o),Eo=E,ai=N}break;case 30:break;default:yl(e,o)}}function Xf(e){var n=e.alternate;n!==null&&(e.alternate=null,Xf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Fr(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Zn=null,Fi=!1;function ro(e,n,o){for(o=o.child;o!==null;)dh(e,n,o),o=o.sibling}function dh(e,n,o){if(Q&&typeof Q.onCommitFiberUnmount=="function")try{Q.onCommitFiberUnmount(lt,o)}catch{}switch(o.tag){case 26:ai||Ma(o,n),ro(e,n,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ai||Ma(o,n);var h=Zn,E=Fi;Li(o.type)&&(Zn=o.stateNode,Fi=!1),ro(e,n,o),Mh(o.stateNode),Zn=h,Fi=E;break;case 5:ai||Ma(o,n);case 6:if(h=Zn,E=Fi,Zn=null,ro(e,n,o),Zn=h,Fi=E,Zn!==null)if(Fi)try{(Zn.nodeType===9?Zn.body:Zn.nodeName==="HTML"?Zn.ownerDocument.body:Zn).removeChild(o.stateNode)}catch(N){Kn(o,n,N)}else try{Zn.removeChild(o.stateNode)}catch(N){Kn(o,n,N)}break;case 18:Zn!==null&&(Fi?(e=Zn,ws(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),$h(e)):ws(Zn,o.stateNode));break;case 4:h=Zn,E=Fi,Zn=o.stateNode.containerInfo,Fi=!0,ro(e,n,o),Zn=h,Fi=E;break;case 0:case 11:case 14:case 15:ai||to(2,o,n),ai||to(4,o,n),ro(e,n,o);break;case 1:ai||(Ma(o,n),h=o.stateNode,typeof h.componentWillUnmount=="function"&&Ic(o,n,h)),ro(e,n,o);break;case 21:ro(e,n,o);break;case 22:ai=(h=ai)||o.memoizedState!==null,ro(e,n,o),ai=h;break;default:ro(e,n,o)}}function hh(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{$h(e)}catch(o){Kn(n,n.return,o)}}function wm(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Yf),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Yf),n;default:throw Error(a(435,e.tag))}}function Zf(e,n){var o=wm(e);n.forEach(function(h){var E=Em.bind(null,e,h);o.has(h)||(o.add(h),h.then(E,E))})}function ra(e,n){var o=n.deletions;if(o!==null)for(var h=0;h<o.length;h++){var E=o[h],N=e,Z=n,ce=Z;e:for(;ce!==null;){switch(ce.tag){case 27:if(Li(ce.type)){Zn=ce.stateNode,Fi=!1;break e}break;case 5:Zn=ce.stateNode,Fi=!1;break e;case 3:case 4:Zn=ce.stateNode.containerInfo,Fi=!0;break e}ce=ce.return}if(Zn===null)throw Error(a(160));dh(N,Z,E),Zn=null,Fi=!1,N=E.alternate,N!==null&&(N.return=null),E.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ph(n,e),n=n.sibling}var ka=null;function ph(e,n){var o=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ra(n,e),va(e),h&4&&(to(3,e,e.return),ru(3,e),to(5,e,e.return));break;case 1:ra(n,e),va(e),h&512&&(ai||o===null||Ma(o,o.return)),h&64&&Eo&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var E=ka;if(ra(n,e),va(e),h&512&&(ai||o===null||Ma(o,o.return)),h&4){var N=o!==null?o.memoizedState:null;if(h=e.memoizedState,o===null)if(h===null)if(e.stateNode===null){e:{h=e.type,o=e.memoizedProps,E=E.ownerDocument||E;t:switch(h){case"title":N=E.getElementsByTagName("title")[0],(!N||N[ir]||N[Pt]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=E.createElement(h),E.head.insertBefore(N,E.querySelector("head > title"))),ke(N,h,o),N[Pt]=e,Gt(N),h=N;break e;case"link":var Z=Sb("link","href",E).get(h+(o.href||""));if(Z){for(var ce=0;ce<Z.length;ce++)if(N=Z[ce],N.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&N.getAttribute("rel")===(o.rel==null?null:o.rel)&&N.getAttribute("title")===(o.title==null?null:o.title)&&N.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){Z.splice(ce,1);break t}}N=E.createElement(h),ke(N,h,o),E.head.appendChild(N);break;case"meta":if(Z=Sb("meta","content",E).get(h+(o.content||""))){for(ce=0;ce<Z.length;ce++)if(N=Z[ce],N.getAttribute("content")===(o.content==null?null:""+o.content)&&N.getAttribute("name")===(o.name==null?null:o.name)&&N.getAttribute("property")===(o.property==null?null:o.property)&&N.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&N.getAttribute("charset")===(o.charSet==null?null:o.charSet)){Z.splice(ce,1);break t}}N=E.createElement(h),ke(N,h,o),E.head.appendChild(N);break;default:throw Error(a(468,h))}N[Pt]=e,Gt(N),h=N}e.stateNode=h}else Eb(E,e.type,e.stateNode);else e.stateNode=_b(E,h,e.memoizedProps);else N!==h?(N===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):N.count--,h===null?Eb(E,e.type,e.stateNode):_b(E,h,e.memoizedProps)):h===null&&e.stateNode!==null&&zf(e,e.memoizedProps,o.memoizedProps)}break;case 27:ra(n,e),va(e),h&512&&(ai||o===null||Ma(o,o.return)),o!==null&&h&4&&zf(e,e.memoizedProps,o.memoizedProps);break;case 5:if(ra(n,e),va(e),h&512&&(ai||o===null||Ma(o,o.return)),e.flags&32){E=e.stateNode;try{_e(E,"")}catch(At){Kn(e,e.return,At)}}h&4&&e.stateNode!=null&&(E=e.memoizedProps,zf(e,E,o!==null?o.memoizedProps:E)),h&1024&&(Nc=!0);break;case 6:if(ra(n,e),va(e),h&4){if(e.stateNode===null)throw Error(a(162));h=e.memoizedProps,o=e.stateNode;try{o.nodeValue=h}catch(At){Kn(e,e.return,At)}}break;case 3:if(Zg=null,E=ka,ka=Qg(n.containerInfo),ra(n,e),ka=E,va(e),h&4&&o!==null&&o.memoizedState.isDehydrated)try{$h(n.containerInfo)}catch(At){Kn(e,e.return,At)}Nc&&(Nc=!1,_m(e));break;case 4:h=ka,ka=Qg(e.stateNode.containerInfo),ra(n,e),va(e),ka=h;break;case 12:ra(n,e),va(e);break;case 13:ra(n,e),va(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(rd=Ce()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Zf(e,h)));break;case 22:E=e.memoizedState!==null;var Be=o!==null&&o.memoizedState!==null,yt=Eo,Nt=ai;if(Eo=yt||E,ai=Nt||Be,ra(n,e),ai=Nt,Eo=yt,va(e),h&8192)e:for(n=e.stateNode,n._visibility=E?n._visibility&-2:n._visibility|1,E&&(o===null||Be||Eo||ai||iu(e)),o=null,n=e;;){if(n.tag===5||n.tag===26){if(o===null){Be=o=n;try{if(N=Be.stateNode,E)Z=N.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{ce=Be.stateNode;var kt=Be.memoizedProps.style,wt=kt!=null&&kt.hasOwnProperty("display")?kt.display:null;ce.style.display=wt==null||typeof wt=="boolean"?"":(""+wt).trim()}}catch(At){Kn(Be,Be.return,At)}}}else if(n.tag===6){if(o===null){Be=n;try{Be.stateNode.nodeValue=E?"":Be.memoizedProps}catch(At){Kn(Be,Be.return,At)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;o===n&&(o=null),n=n.return}o===n&&(o=null),n.sibling.return=n.return,n=n.sibling}h&4&&(h=e.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,Zf(e,o))));break;case 19:ra(n,e),va(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Zf(e,h)));break;case 30:break;case 21:break;default:ra(n,e),va(e)}}function va(e){var n=e.flags;if(n&2){try{for(var o,h=e.return;h!==null;){if(ch(h)){o=h;break}h=h.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var E=o.stateNode,N=Wf(e);jo(e,N,E);break;case 5:var Z=o.stateNode;o.flags&32&&(_e(Z,""),o.flags&=-33);var ce=Wf(e);jo(e,ce,Z);break;case 3:case 4:var Be=o.stateNode.containerInfo,yt=Wf(e);Jf(e,yt,Be);break;default:throw Error(a(161))}}catch(Nt){Kn(e,e.return,Nt)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function _m(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;_m(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function yl(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Qf(e,n.alternate,n),n=n.sibling}function iu(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:to(4,n,n.return),iu(n);break;case 1:Ma(n,n.return);var o=n.stateNode;typeof o.componentWillUnmount=="function"&&Ic(n,n.return,o),iu(n);break;case 27:Mh(n.stateNode);case 26:case 5:Ma(n,n.return),iu(n);break;case 22:n.memoizedState===null&&iu(n);break;case 30:iu(n);break;default:iu(n)}e=e.sibling}}function ml(e,n,o){for(o=o&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var h=n.alternate,E=e,N=n,Z=N.flags;switch(N.tag){case 0:case 11:case 15:ml(E,N,o),ru(4,N);break;case 1:if(ml(E,N,o),h=N,E=h.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(yt){Kn(h,h.return,yt)}if(h=N,E=h.updateQueue,E!==null){var ce=h.stateNode;try{var Be=E.shared.hiddenCallbacks;if(Be!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Be.length;E++)xf(Be[E],ce)}catch(yt){Kn(h,h.return,yt)}}o&&Z&64&&lh(N),nu(N,N.return);break;case 27:fh(N);case 26:case 5:ml(E,N,o),o&&h===null&&Z&4&&uh(N),nu(N,N.return);break;case 12:ml(E,N,o);break;case 13:ml(E,N,o),o&&Z&4&&hh(E,N);break;case 22:N.memoizedState===null&&ml(E,N,o),nu(N,N.return);break;case 30:break;default:ml(E,N,o)}n=n.sibling}}function Fg(e,n){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&Bl(o))}function gh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Bl(e))}function Ba(e,n,o,h){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)vl(e,n,o,h),n=n.sibling}function vl(e,n,o,h){var E=n.flags;switch(n.tag){case 0:case 11:case 15:Ba(e,n,o,h),E&2048&&ru(9,n);break;case 1:Ba(e,n,o,h);break;case 3:Ba(e,n,o,h),E&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Bl(e)));break;case 12:if(E&2048){Ba(e,n,o,h),e=n.stateNode;try{var N=n.memoizedProps,Z=N.id,ce=N.onPostCommit;typeof ce=="function"&&ce(Z,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(Be){Kn(n,n.return,Be)}}else Ba(e,n,o,h);break;case 13:Ba(e,n,o,h);break;case 23:break;case 22:N=n.stateNode,Z=n.alternate,n.memoizedState!==null?N._visibility&2?Ba(e,n,o,h):Fc(e,n):N._visibility&2?Ba(e,n,o,h):(N._visibility|=2,au(e,n,o,h,(n.subtreeFlags&10256)!==0)),E&2048&&Fg(Z,n);break;case 24:Ba(e,n,o,h),E&2048&&gh(n.alternate,n);break;default:Ba(e,n,o,h)}}function au(e,n,o,h,E){for(E=E&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var N=e,Z=n,ce=o,Be=h,yt=Z.flags;switch(Z.tag){case 0:case 11:case 15:au(N,Z,ce,Be,E),ru(8,Z);break;case 23:break;case 22:var Nt=Z.stateNode;Z.memoizedState!==null?Nt._visibility&2?au(N,Z,ce,Be,E):Fc(N,Z):(Nt._visibility|=2,au(N,Z,ce,Be,E)),E&&yt&2048&&Fg(Z.alternate,Z);break;case 24:au(N,Z,ce,Be,E),E&&yt&2048&&gh(Z.alternate,Z);break;default:au(N,Z,ce,Be,E)}n=n.sibling}}function Fc(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var o=e,h=n,E=h.flags;switch(h.tag){case 22:Fc(o,h),E&2048&&Fg(h.alternate,h);break;case 24:Fc(o,h),E&2048&&gh(h.alternate,h);break;default:Fc(o,h)}n=n.sibling}}var Dc=8192;function Vo(e){if(e.subtreeFlags&Dc)for(e=e.child;e!==null;)yh(e),e=e.sibling}function yh(e){switch(e.tag){case 26:Vo(e),e.flags&Dc&&e.memoizedState!==null&&WA(ka,e.memoizedState,e.memoizedProps);break;case 5:Vo(e);break;case 3:case 4:var n=ka;ka=Qg(e.stateNode.containerInfo),Vo(e),ka=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Dc,Dc=16777216,Vo(e),Dc=n):Vo(e));break;default:Vo(e)}}function mh(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Uc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var h=n[o];yi=h,Dg(h,e)}mh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vh(e),e=e.sibling}function vh(e){switch(e.tag){case 0:case 11:case 15:Uc(e),e.flags&2048&&to(9,e,e.return);break;case 3:Uc(e);break;case 12:Uc(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,ed(e)):Uc(e);break;default:Uc(e)}}function ed(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var h=n[o];yi=h,Dg(h,e)}mh(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:to(8,n,n.return),ed(n);break;case 22:o=n.stateNode,o._visibility&2&&(o._visibility&=-3,ed(n));break;default:ed(n)}e=e.sibling}}function Dg(e,n){for(;yi!==null;){var o=yi;switch(o.tag){case 0:case 11:case 15:to(8,o,n);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Bl(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,yi=h;else e:for(o=e;yi!==null;){h=yi;var E=h.sibling,N=h.return;if(Xf(h),h===o){yi=null;break e}if(E!==null){E.return=N,yi=E;break e}yi=N}}}var bh={getCacheForType:function(e){var n=Ii(gr),o=n.data.get(e);return o===void 0&&(o=e(),n.data.set(e,o)),o}},Sm=typeof WeakMap=="function"?WeakMap:Map,Bn=0,Yn=null,gn=null,wn=0,Ln=0,$i=null,no=!1,ba=!1,Lc=!1,Ao=0,oi=0,Ro=0,ys=0,td=0,na=0,bl=0,Mc=null,qi=null,ms=!1,rd=0,Ko=1/0,ou=null,vs=null,Ai=0,Go=null,su=null,wl=0,kc=0,wh=null,nd=null,Bc=0,Hc=null;function zi(){if((Bn&2)!==0&&wn!==0)return wn&-wn;if(Ne.T!==null){var e=Fa;return e!==0?e:Ih()}return pe()}function id(){na===0&&(na=(wn&536870912)===0||In?mt():536870912);var e=Ti.current;return e!==null&&(e.flags|=32),na}function Di(e,n,o){(e===Yn&&(Ln===2||Ln===9)||e.cancelPendingCommit!==null)&&(bs(e,0),xo(e,wn,na,!1)),ct(e,o),((Bn&2)===0||e!==Yn)&&(e===Yn&&((Bn&2)===0&&(ys|=o),oi===4&&xo(e,wn,na,!1)),io(e))}function ad(e,n,o){if((Bn&6)!==0)throw Error(a(327));var h=!o&&(n&124)===0&&(n&e.expiredLanes)===0||ar(e,n),E=h?Lg(e,n):Eh(e,n,!0),N=h;do{if(E===0){ba&&!h&&xo(e,n,0,!1);break}else{if(o=e.current.alternate,N&&!sd(o)){E=Eh(e,n,!1),N=!1;continue}if(E===2){if(N=n,e.errorRecoveryDisabledLanes&N)var Z=0;else Z=e.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){n=Z;e:{var ce=e;E=Mc;var Be=ce.current.memoizedState.isDehydrated;if(Be&&(bs(ce,Z).flags|=256),Z=Eh(ce,Z,!1),Z!==2){if(Lc&&!Be){ce.errorRecoveryDisabledLanes|=N,ys|=N,E=4;break e}N=qi,qi=E,N!==null&&(qi===null?qi=N:qi.push.apply(qi,N))}E=Z}if(N=!1,E!==2)continue}}if(E===1){bs(e,0),xo(e,n,0,!0);break}e:{switch(h=e,N=E,N){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:xo(h,n,na,!no);break e;case 2:qi=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(E=rd+300-Ce(),10<E)){if(xo(h,n,na,!no),Hr(h,0,!0)!==0)break e;h.timeoutHandle=Hn(od.bind(null,h,o,qi,ou,ms,n,na,ys,bl,no,N,2,-0,0),E);break e}od(h,o,qi,ou,ms,n,na,ys,bl,no,N,0,-0,0)}}break}while(!0);io(e)}function od(e,n,o,h,E,N,Z,ce,Be,yt,Nt,kt,wt,At){if(e.timeoutHandle=-1,kt=n.subtreeFlags,(kt&8192||(kt&16785408)===16785408)&&(Hh={stylesheets:null,count:0,unsuspend:zA},yh(n),kt=JA(),kt!==null)){e.cancelPendingCommit=kt(jg.bind(null,e,n,N,o,h,E,Z,ce,Be,Nt,1,wt,At)),xo(e,N,Z,!yt);return}jg(e,n,N,o,h,E,Z,ce,Be)}function sd(e){for(var n=e;;){var o=n.tag;if((o===0||o===11||o===15)&&n.flags&16384&&(o=n.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var E=o[h],N=E.getSnapshot;E=E.value;try{if(!xi(N(),E))return!1}catch{return!1}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function xo(e,n,o,h){n&=~td,n&=~ys,e.suspendedLanes|=n,e.pingedLanes&=~n,h&&(e.warmLanes|=n),h=e.expirationTimes;for(var E=n;0<E;){var N=31-V(E),Z=1<<N;h[N]=-1,E&=~Z}o!==0&&qt(e,o,n)}function lu(){return(Bn&6)===0?(pu(0),!1):!0}function uu(){if(gn!==null){if(Ln===0)var e=gn.return;else e=gn,No=Ks=null,Gi(e),La=null,ea=0,e=gn;for(;e!==null;)sh(e.alternate,e),e=e.return;gn=null}}function bs(e,n){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,Sr(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),uu(),Yn=e,gn=o=Na(e.current,null),wn=n,Ln=0,$i=null,no=!1,ba=ar(e,n),Lc=!1,bl=na=td=ys=Ro=oi=0,qi=Mc=null,ms=!1,(n&8)!==0&&(n|=n&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=n;0<h;){var E=31-V(h),N=1<<E;n|=e[E],h&=~N}return Ao=n,vf(),o}function Ug(e,n){nn=null,Ne.H=wo,n===Za||n===$s?(n=zs(),Ln=3):n===Hl?(n=zs(),Ln=4):Ln=n===vm?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,$i=n,gn===null&&(oi=1,Zd(e,Pa(n,e.current)))}function _h(){var e=Ne.H;return Ne.H=wo,e===null?wo:e}function cu(){var e=Ne.A;return Ne.A=bh,e}function Sh(){oi=4,no||(wn&4194048)!==wn&&Ti.current!==null||(ba=!0),(Ro&134217727)===0&&(ys&134217727)===0||Yn===null||xo(Yn,wn,na,!1)}function Eh(e,n,o){var h=Bn;Bn|=2;var E=_h(),N=cu();(Yn!==e||wn!==n)&&(ou=null,bs(e,n)),n=!1;var Z=oi;e:do try{if(Ln!==0&&gn!==null){var ce=gn,Be=$i;switch(Ln){case 8:uu(),Z=6;break e;case 3:case 2:case 9:case 6:Ti.current===null&&(n=!0);var yt=Ln;if(Ln=0,$i=null,fu(e,ce,Be,yt),o&&ba){Z=0;break e}break;default:yt=Ln,Ln=0,$i=null,fu(e,ce,Be,yt)}}ld(),Z=oi;break}catch(Nt){Ug(e,Nt)}while(!0);return n&&e.shellSuspendCounter++,No=Ks=null,Bn=h,Ne.H=E,Ne.A=N,gn===null&&(Yn=null,wn=0,vf()),Z}function ld(){for(;gn!==null;)kg(gn)}function Lg(e,n){var o=Bn;Bn|=2;var h=_h(),E=cu();Yn!==e||wn!==n?(ou=null,Ko=Ce()+500,bs(e,n)):ba=ar(e,n);e:do try{if(Ln!==0&&gn!==null){n=gn;var N=$i;t:switch(Ln){case 1:Ln=0,$i=null,fu(e,n,N,1);break;case 2:case 9:if(qs(N)){Ln=0,$i=null,Bg(n);break}n=function(){Ln!==2&&Ln!==9||Yn!==e||(Ln=7),io(e)},N.then(n,n);break e;case 3:Ln=7;break e;case 4:Ln=5;break e;case 7:qs(N)?(Ln=0,$i=null,Bg(n)):(Ln=0,$i=null,fu(e,n,N,7));break;case 5:var Z=null;switch(gn.tag){case 26:Z=gn.memoizedState;case 5:case 27:var ce=gn;if(!Z||Ab(Z)){Ln=0,$i=null;var Be=ce.sibling;if(Be!==null)gn=Be;else{var yt=ce.return;yt!==null?(gn=yt,jc(yt)):gn=null}break t}}Ln=0,$i=null,fu(e,n,N,5);break;case 6:Ln=0,$i=null,fu(e,n,N,6);break;case 8:uu(),oi=6;break e;default:throw Error(a(462))}}Mg();break}catch(Nt){Ug(e,Nt)}while(!0);return No=Ks=null,Ne.H=h,Ne.A=E,Bn=o,gn!==null?0:(Yn=null,wn=0,vf(),oi)}function Mg(){for(;gn!==null&&!re();)kg(gn)}function kg(e){var n=oh(e.alternate,e,Ao);e.memoizedProps=e.pendingProps,n===null?jc(e):gn=n}function Bg(e){var n=e,o=n.alternate;switch(n.tag){case 15:case 0:n=th(o,n,n.pendingProps,n.type,void 0,wn);break;case 11:n=th(o,n,n.pendingProps,n.type.render,n.ref,wn);break;case 5:Gi(n);default:sh(o,n),n=gn=Ld(n,Ao),n=oh(o,n,Ao)}e.memoizedProps=e.pendingProps,n===null?jc(e):gn=n}function fu(e,n,o,h){No=Ks=null,Gi(n),La=null,ea=0;var E=n.return;try{if(pb(e,E,n,o,wn)){oi=1,Zd(e,Pa(o,e.current)),gn=null;return}}catch(N){if(E!==null)throw gn=E,N;oi=1,Zd(e,Pa(o,e.current)),gn=null;return}n.flags&32768?(In||h===1?e=!0:ba||(wn&536870912)!==0?e=!1:(no=e=!0,(h===2||h===9||h===3||h===6)&&(h=Ti.current,h!==null&&h.tag===13&&(h.flags|=16384))),Hg(n,e)):jc(n)}function jc(e){var n=e;do{if((n.flags&32768)!==0){Hg(n,no);return}e=n.return;var o=qf(n.alternate,n,Ao);if(o!==null){gn=o;return}if(n=n.sibling,n!==null){gn=n;return}gn=n=e}while(n!==null);oi===0&&(oi=5)}function Hg(e,n){do{var o=Ig(e.alternate,e);if(o!==null){o.flags&=32767,gn=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!n&&(e=e.sibling,e!==null)){gn=e;return}gn=e=o}while(e!==null);oi=6,gn=null}function jg(e,n,o,h,E,N,Z,ce,Be){e.cancelPendingCommit=null;do _l();while(Ai!==0);if((Bn&6)!==0)throw Error(a(327));if(n!==null){if(n===e.current)throw Error(a(177));if(N=n.lanes|n.childLanes,N|=mf,Qt(e,o,N,Z,ce,Be),e===Yn&&(gn=Yn=null,wn=0),su=n,Go=e,wl=o,kc=N,wh=E,nd=h,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Am(Ct,function(){return du(),null})):(e.callbackNode=null,e.callbackPriority=0),h=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||h){h=Ne.T,Ne.T=null,E=gt.p,gt.p=2,Z=Bn,Bn|=4;try{Ng(e,n,o)}finally{Bn=Z,gt.p=E,Ne.T=h}}Ai=1,Ah(),ud(),Rh()}}function Ah(){if(Ai===1){Ai=0;var e=Go,n=su,o=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||o){o=Ne.T,Ne.T=null;var h=gt.p;gt.p=2;var E=Bn;Bn|=4;try{ph(n,e);var N=Lt,Z=Oa(e.containerInfo),ce=N.focusedElem,Be=N.selectionRange;if(Z!==ce&&ce&&ce.ownerDocument&&Pd(ce.ownerDocument.documentElement,ce)){if(Be!==null&&Id(ce)){var yt=Be.start,Nt=Be.end;if(Nt===void 0&&(Nt=yt),"selectionStart"in ce)ce.selectionStart=yt,ce.selectionEnd=Math.min(Nt,ce.value.length);else{var kt=ce.ownerDocument||document,wt=kt&&kt.defaultView||window;if(wt.getSelection){var At=wt.getSelection(),qr=ce.textContent.length,Br=Math.min(Be.start,qr),Qn=Be.end===void 0?Br:Math.min(Be.end,qr);!At.extend&&Br>Qn&&(Z=Qn,Qn=Br,Br=Z);var it=Nl(ce,Br),Qe=Nl(ce,Qn);if(it&&Qe&&(At.rangeCount!==1||At.anchorNode!==it.node||At.anchorOffset!==it.offset||At.focusNode!==Qe.node||At.focusOffset!==Qe.offset)){var ft=kt.createRange();ft.setStart(it.node,it.offset),At.removeAllRanges(),Br>Qn?(At.addRange(ft),At.extend(Qe.node,Qe.offset)):(ft.setEnd(Qe.node,Qe.offset),At.addRange(ft))}}}}for(kt=[],At=ce;At=At.parentNode;)At.nodeType===1&&kt.push({element:At,left:At.scrollLeft,top:At.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<kt.length;ce++){var Ut=kt[ce];Ut.element.scrollLeft=Ut.left,Ut.element.scrollTop=Ut.top}}ry=!!Ye,Lt=Ye=null}finally{Bn=E,gt.p=h,Ne.T=o}}e.current=n,Ai=2}}function ud(){if(Ai===2){Ai=0;var e=Go,n=su,o=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||o){o=Ne.T,Ne.T=null;var h=gt.p;gt.p=2;var E=Bn;Bn|=4;try{Qf(e,n.alternate,n)}finally{Bn=E,gt.p=h,Ne.T=o}}Ai=3}}function Rh(){if(Ai===4||Ai===3){Ai=0,we();var e=Go,n=su,o=wl,h=nd;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ai=5:(Ai=0,su=Go=null,cd(e,e.pendingLanes));var E=e.pendingLanes;if(E===0&&(vs=null),ue(o),n=n.stateNode,Q&&typeof Q.onCommitFiberRoot=="function")try{Q.onCommitFiberRoot(lt,n,void 0,(n.current.flags&128)===128)}catch{}if(h!==null){n=Ne.T,E=gt.p,gt.p=2,Ne.T=null;try{for(var N=e.onRecoverableError,Z=0;Z<h.length;Z++){var ce=h[Z];N(ce.value,{componentStack:ce.stack})}}finally{Ne.T=n,gt.p=E}}(wl&3)!==0&&_l(),io(e),E=e.pendingLanes,(o&4194090)!==0&&(E&42)!==0?e===Hc?Bc++:(Bc=0,Hc=e):Bc=0,pu(0)}}function cd(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Bl(n)))}function _l(e){return Ah(),ud(),Rh(),du()}function du(){if(Ai!==5)return!1;var e=Go,n=kc;kc=0;var o=ue(wl),h=Ne.T,E=gt.p;try{gt.p=32>o?32:o,Ne.T=null,o=wh,wh=null;var N=Go,Z=wl;if(Ai=0,su=Go=null,wl=0,(Bn&6)!==0)throw Error(a(331));var ce=Bn;if(Bn|=4,vh(N.current),vl(N,N.current,Z,o),Bn=ce,pu(0,!1),Q&&typeof Q.onPostCommitFiberRoot=="function")try{Q.onPostCommitFiberRoot(lt,N)}catch{}return!0}finally{gt.p=E,Ne.T=h,cd(e,n)}}function fd(e,n,o){n=Pa(o,n),n=xg(e.stateNode,n,2),e=yo(e,n,2),e!==null&&(ct(e,2),io(e))}function Kn(e,n,o){if(e.tag===3)fd(e,e,o);else for(;n!==null;){if(n.tag===3){fd(n,e,o);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(vs===null||!vs.has(h))){e=Pa(o,e),o=Tg(2),h=yo(n,o,2),h!==null&&(Cg(o,h,n,e),ct(h,2),io(h));break}}n=n.return}}function dd(e,n,o){var h=e.pingCache;if(h===null){h=e.pingCache=new Sm;var E=new Set;h.set(n,E)}else E=h.get(n),E===void 0&&(E=new Set,h.set(n,E));E.has(o)||(Lc=!0,E.add(o),e=xh.bind(null,e,n,o),n.then(e,e))}function xh(e,n,o){var h=e.pingCache;h!==null&&h.delete(n),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,Yn===e&&(wn&o)===o&&(oi===4||oi===3&&(wn&62914560)===wn&&300>Ce()-rd?(Bn&2)===0&&bs(e,0):td|=o,bl===wn&&(bl=0)),io(e)}function Th(e,n){n===0&&(n=ot()),e=da(e,n),e!==null&&(ct(e,n),io(e))}function Vg(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),Th(e,o)}function Em(e,n){var o=0;switch(e.tag){case 13:var h=e.stateNode,E=e.memoizedState;E!==null&&(o=E.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(a(314))}h!==null&&h.delete(n),Th(e,o)}function Am(e,n){return D(e,n)}var Vc=null,hu=null,Ch=!1,Kc=!1,Oh=!1,Sl=0;function io(e){e!==hu&&e.next===null&&(hu===null?Vc=hu=e:hu=hu.next=e),Kc=!0,Ch||(Ch=!0,Rm())}function pu(e,n){if(!Oh&&Kc){Oh=!0;do for(var o=!1,h=Vc;h!==null;){if(e!==0){var E=h.pendingLanes;if(E===0)var N=0;else{var Z=h.suspendedLanes,ce=h.pingedLanes;N=(1<<31-V(42|e)+1)-1,N&=E&~(Z&~ce),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(o=!0,Ph(h,N))}else N=wn,N=Hr(h,h===Yn?N:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(N&3)===0||ar(h,N)||(o=!0,Ph(h,N));h=h.next}while(o);Oh=!1}}function hd(){Kg()}function Kg(){Kc=Ch=!1;var e=0;Sl!==0&&(Ha()&&(e=Sl),Sl=0);for(var n=Ce(),o=null,h=Vc;h!==null;){var E=h.next,N=Gg(h,n);N===0?(h.next=null,o===null?Vc=E:o.next=E,E===null&&(hu=o)):(o=h,(e!==0||(N&3)!==0)&&(Kc=!0)),h=E}pu(e)}function Gg(e,n){for(var o=e.suspendedLanes,h=e.pingedLanes,E=e.expirationTimes,N=e.pendingLanes&-62914561;0<N;){var Z=31-V(N),ce=1<<Z,Be=E[Z];Be===-1?((ce&o)===0||(ce&h)!==0)&&(E[Z]=Ke(ce,n)):Be<=n&&(e.expiredLanes|=ce),N&=~ce}if(n=Yn,o=wn,o=Hr(e,e===n?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h=e.callbackNode,o===0||e===n&&(Ln===2||Ln===9)||e.cancelPendingCommit!==null)return h!==null&&h!==null&&G(h),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||ar(e,o)){if(n=o&-o,n===e.callbackPriority)return n;switch(h!==null&&G(h),ue(o)){case 2:case 8:o=ht;break;case 32:o=Ct;break;case 268435456:o=We;break;default:o=Ct}return h=gu.bind(null,e),o=D(o,h),e.callbackPriority=n,e.callbackNode=o,n}return h!==null&&h!==null&&G(h),e.callbackPriority=2,e.callbackNode=null,2}function gu(e,n){if(Ai!==0&&Ai!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(_l()&&e.callbackNode!==o)return null;var h=wn;return h=Hr(e,e===Yn?h:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h===0?null:(ad(e,h,n),Gg(e,Ce()),e.callbackNode!=null&&e.callbackNode===o?gu.bind(null,e):null)}function Ph(e,n){if(_l())return null;ad(e,n,!0)}function Rm(){mi(function(){(Bn&6)!==0?D(Re,hd):Kg()})}function Ih(){return Sl===0&&(Sl=mt()),Sl}function $g(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$r(""+e)}function qg(e,n){var o=n.ownerDocument.createElement("input");return o.name=n.name,o.value=n.value,e.id&&o.setAttribute("form",e.id),n.parentNode.insertBefore(o,n),e=new FormData(e),o.parentNode.removeChild(o),e}function zg(e,n,o,h,E){if(n==="submit"&&o&&o.stateNode===E){var N=$g((E[Xt]||null).action),Z=h.submitter;Z&&(n=(n=Z[Xt]||null)?$g(n.formAction):Z.getAttribute("formAction"),n!==null&&(N=n,Z=null));var ce=new xa("action","action",null,h,E);e.push({event:ce,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Sl!==0){var Be=Z?qg(E,Z):new FormData(E);Ff(o,{pending:!0,data:Be,method:E.method,action:N},null,Be)}}else typeof N=="function"&&(ce.preventDefault(),Be=Z?qg(E,Z):new FormData(E),Ff(o,{pending:!0,data:Be,method:E.method,action:N},N,Be))},currentTarget:E}]})}}for(var Gc=0;Gc<yf.length;Gc++){var Nh=yf[Gc],Wg=Nh.toLowerCase(),Jg=Nh[0].toUpperCase()+Nh.slice(1);Ja(Wg,"on"+Jg)}Ja(Xo,"onAnimationEnd"),Ja(Zo,"onAnimationIteration"),Ja(bg,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(cm,"onTransitionRun"),Ja(fm,"onTransitionStart"),Ja(Pn,"onTransitionCancel"),Ja(Fd,"onTransitionEnd"),Dr("onMouseEnter",["mouseout","mouseover"]),Dr("onMouseLeave",["mouseout","mouseover"]),Dr("onPointerEnter",["pointerout","pointerover"]),Dr("onPointerLeave",["pointerout","pointerover"]),un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),un("onBeforeInput",["compositionend","keypress","textInput","paste"]),un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($c));function Fh(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var h=e[o],E=h.event;h=h.listeners;e:{var N=void 0;if(n)for(var Z=h.length-1;0<=Z;Z--){var ce=h[Z],Be=ce.instance,yt=ce.currentTarget;if(ce=ce.listener,Be!==N&&E.isPropagationStopped())break e;N=ce,E.currentTarget=yt;try{N(E)}catch(Nt){Bf(Nt)}E.currentTarget=null,N=Be}else for(Z=0;Z<h.length;Z++){if(ce=h[Z],Be=ce.instance,yt=ce.currentTarget,ce=ce.listener,Be!==N&&E.isPropagationStopped())break e;N=ce,E.currentTarget=yt;try{N(E)}catch(Nt){Bf(Nt)}E.currentTarget=null,N=Be}}}}function mn(e,n){var o=n[Nr];o===void 0&&(o=n[Nr]=new Set);var h=e+"__bubble";o.has(h)||(Yg(n,e,2,!1),o.add(h))}function Dh(e,n,o){var h=0;n&&(h|=4),Yg(o,e,h,n)}var pd="_reactListening"+Math.random().toString(36).slice(2);function Uh(e){if(!e[pd]){e[pd]=!0,Jr.forEach(function(o){o!=="selectionchange"&&(qc.has(o)||Dh(o,!1,e),Dh(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[pd]||(n[pd]=!0,Dh("selectionchange",!1,n))}}function Yg(e,n,o,h){switch(Pb(n)){case 2:var E=XA;break;case 8:E=ZA;break;default:E=Pm}o=E.bind(null,n,o,e),E=void 0,!vn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(E=!0),h?E!==void 0?e.addEventListener(n,o,{capture:!0,passive:E}):e.addEventListener(n,o,!0):E!==void 0?e.addEventListener(n,o,{passive:E}):e.addEventListener(n,o,!1)}function Lh(e,n,o,h,E){var N=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var Z=h.tag;if(Z===3||Z===4){var ce=h.stateNode.containerInfo;if(ce===E)break;if(Z===4)for(Z=h.return;Z!==null;){var Be=Z.tag;if((Be===3||Be===4)&&Z.stateNode.containerInfo===E)return;Z=Z.return}for(;ce!==null;){if(Z=Er(ce),Z===null)return;if(Be=Z.tag,Be===5||Be===6||Be===26||Be===27){h=N=Z;continue e}ce=ce.parentNode}}h=h.return}Tn(function(){var yt=N,Nt=hr(o),kt=[];e:{var wt=Dd.get(e);if(wt!==void 0){var At=xa,qr=e;switch(e){case"keypress":if(Vi(o)===0)break e;case"keydown":case"keyup":At=Yt;break;case"focusin":qr="focus",At=Rt;break;case"focusout":qr="blur",At=Rt;break;case"beforeblur":case"afterblur":At=Rt;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=fe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=ye;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=zr;break;case Xo:case Zo:case bg:At=Ot;break;case Fd:At=Or;break;case"scroll":case"scrollend":At=Yo;break;case"wheel":At=Ur;break;case"copy":case"cut":case"paste":At=jt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=dr;break;case"toggle":case"beforetoggle":At=sn}var Br=(n&4)!==0,Qn=!Br&&(e==="scroll"||e==="scrollend"),it=Br?wt!==null?wt+"Capture":null:wt;Br=[];for(var Qe=yt,ft;Qe!==null;){var Ut=Qe;if(ft=Ut.stateNode,Ut=Ut.tag,Ut!==5&&Ut!==26&&Ut!==27||ft===null||it===null||(Ut=Yr(Qe,it),Ut!=null&&Br.push(zc(Qe,Ut,ft))),Qn)break;Qe=Qe.return}0<Br.length&&(wt=new At(wt,qr,null,o,Nt),kt.push({event:wt,listeners:Br}))}}if((n&7)===0){e:{if(wt=e==="mouseover"||e==="pointerover",At=e==="mouseout"||e==="pointerout",wt&&o!==sr&&(qr=o.relatedTarget||o.fromElement)&&(Er(qr)||qr[tr]))break e;if((At||wt)&&(wt=Nt.window===Nt?Nt:(wt=Nt.ownerDocument)?wt.defaultView||wt.parentWindow:window,At?(qr=o.relatedTarget||o.toElement,At=yt,qr=qr?Er(qr):null,qr!==null&&(Qn=d(qr),Br=qr.tag,qr!==Qn||Br!==5&&Br!==27&&Br!==6)&&(qr=null)):(At=null,qr=yt),At!==qr)){if(Br=fe,Ut="onMouseLeave",it="onMouseEnter",Qe="mouse",(e==="pointerout"||e==="pointerover")&&(Br=dr,Ut="onPointerLeave",it="onPointerEnter",Qe="pointer"),Qn=At==null?wt:pr(At),ft=qr==null?wt:pr(qr),wt=new Br(Ut,Qe+"leave",At,o,Nt),wt.target=Qn,wt.relatedTarget=ft,Ut=null,Er(Nt)===yt&&(Br=new Br(it,Qe+"enter",qr,o,Nt),Br.target=ft,Br.relatedTarget=Qn,Ut=Br),Qn=Ut,At&&qr)t:{for(Br=At,it=qr,Qe=0,ft=Br;ft;ft=yu(ft))Qe++;for(ft=0,Ut=it;Ut;Ut=yu(Ut))ft++;for(;0<Qe-ft;)Br=yu(Br),Qe--;for(;0<ft-Qe;)it=yu(it),ft--;for(;Qe--;){if(Br===it||it!==null&&Br===it.alternate)break t;Br=yu(Br),it=yu(it)}Br=null}else Br=null;At!==null&&u(kt,wt,At,Br,!1),qr!==null&&Qn!==null&&u(kt,Qn,qr,Br,!0)}}e:{if(wt=yt?pr(yt):window,At=wt.nodeName&&wt.nodeName.toLowerCase(),At==="select"||At==="input"&&wt.type==="file")var _r=Io;else if(Ps(wt))if(Il)_r=Bu;else{_r=Fs;var _n=df}else At=wt.nodeName,!At||At.toLowerCase()!=="input"||wt.type!=="checkbox"&&wt.type!=="radio"?yt&&Et(yt.elementType)&&(_r=Io):_r=ti;if(_r&&(_r=_r(e,yt))){ku(kt,_r,o,Nt);break e}_n&&_n(e,wt,yt),e==="focusout"&&yt&&wt.type==="number"&&yt.memoizedProps.value!=null&&nt(wt,"number",wt.value)}switch(_n=yt?pr(yt):window,e){case"focusin":(Ps(_n)||_n.contentEditable==="true")&&(Ki=_n,pf=yt,Fl=null);break;case"focusout":Fl=pf=Ki=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,fa(kt,o,Nt);break;case"selectionchange":if(vg)break;case"keydown":case"keyup":fa(kt,o,Nt)}var Cr;if(wr)e:{switch(e){case"compositionstart":var Vr="onCompositionStart";break e;case"compositionend":Vr="onCompositionEnd";break e;case"compositionupdate":Vr="onCompositionUpdate";break e}Vr=void 0}else Vn?Un(e,o)&&(Vr="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Vr="onCompositionStart");Vr&&(di&&o.locale!=="ko"&&(Vn||Vr!=="onCompositionStart"?Vr==="onCompositionEnd"&&Vn&&(Cr=Cn()):(jn=Nt,Ei="value"in jn?jn.value:jn.textContent,Vn=!0)),_n=gd(yt,Vr),0<_n.length&&(Vr=new Dt(Vr,e,null,o,Nt),kt.push({event:Vr,listeners:_n}),Cr?Vr.data=Cr:(Cr=Qr(o),Cr!==null&&(Vr.data=Cr)))),(Cr=zn?rn(e,o):Ta(e,o))&&(Vr=gd(yt,"onBeforeInput"),0<Vr.length&&(_n=new Dt("onBeforeInput","beforeinput",null,o,Nt),kt.push({event:_n,listeners:Vr}),_n.data=Cr)),zg(kt,e,yt,o,Nt)}Fh(kt,n)})}function zc(e,n,o){return{instance:e,listener:n,currentTarget:o}}function gd(e,n){for(var o=n+"Capture",h=[];e!==null;){var E=e,N=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||N===null||(E=Yr(e,o),E!=null&&h.unshift(zc(e,E,N)),E=Yr(e,n),E!=null&&h.push(zc(e,E,N))),e.tag===3)return h;e=e.return}return[]}function yu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function u(e,n,o,h,E){for(var N=n._reactName,Z=[];o!==null&&o!==h;){var ce=o,Be=ce.alternate,yt=ce.stateNode;if(ce=ce.tag,Be!==null&&Be===h)break;ce!==5&&ce!==26&&ce!==27||yt===null||(Be=yt,E?(yt=Yr(o,N),yt!=null&&Z.unshift(zc(o,yt,Be))):E||(yt=Yr(o,N),yt!=null&&Z.push(zc(o,yt,Be)))),o=o.return}Z.length!==0&&e.push({event:n,listeners:Z})}var g=/\r\n?/g,w=/\u0000|\uFFFD/g;function O(e){return(typeof e=="string"?e:""+e).replace(g,`
`).replace(w,"")}function L(e,n){return n=O(n),O(e)===n}function z(){}function ee(e,n,o,h,E,N){switch(o){case"children":typeof h=="string"?n==="body"||n==="textarea"&&h===""||_e(e,h):(typeof h=="number"||typeof h=="bigint")&&n!=="body"&&_e(e,""+h);break;case"className":ji(e,"class",h);break;case"tabIndex":ji(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":ji(e,o,h);break;case"style":ut(e,h,N);break;case"data":if(n!=="object"){ji(e,"data",h);break}case"src":case"href":if(h===""&&(n!=="a"||o!=="href")){e.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=$r(""+h),e.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(o==="formAction"?(n!=="input"&&ee(e,n,"name",E.name,E,null),ee(e,n,"formEncType",E.formEncType,E,null),ee(e,n,"formMethod",E.formMethod,E,null),ee(e,n,"formTarget",E.formTarget,E,null)):(ee(e,n,"encType",E.encType,E,null),ee(e,n,"method",E.method,E,null),ee(e,n,"target",E.target,E,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(o);break}h=$r(""+h),e.setAttribute(o,h);break;case"onClick":h!=null&&(e.onclick=z);break;case"onScroll":h!=null&&mn("scroll",e);break;case"onScrollEnd":h!=null&&mn("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(a(61));if(o=h.__html,o!=null){if(E.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}o=$r(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""+h):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":h===!0?e.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(o,h):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(o,h):e.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(o):e.setAttribute(o,h);break;case"popover":mn("beforetoggle",e),mn("toggle",e),An(e,"popover",h);break;case"xlinkActuate":ui(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ui(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ui(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ui(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ui(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ui(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ui(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ui(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ui(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":An(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=cr.get(o)||o,An(e,o,h))}}function de(e,n,o,h,E,N){switch(o){case"style":ut(e,h,N);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(a(61));if(o=h.__html,o!=null){if(E.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"children":typeof h=="string"?_e(e,h):(typeof h=="number"||typeof h=="bigint")&&_e(e,""+h);break;case"onScroll":h!=null&&mn("scroll",e);break;case"onScrollEnd":h!=null&&mn("scrollend",e);break;case"onClick":h!=null&&(e.onclick=z);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(E=o.endsWith("Capture"),n=o.slice(2,E?o.length-7:void 0),N=e[Xt]||null,N=N!=null?N[o]:null,typeof N=="function"&&e.removeEventListener(n,N,E),typeof h=="function")){typeof N!="function"&&N!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(n,h,E);break e}o in e?e[o]=h:h===!0?e.setAttribute(o,""):An(e,o,h)}}}function ke(e,n,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mn("error",e),mn("load",e);var h=!1,E=!1,N;for(N in o)if(o.hasOwnProperty(N)){var Z=o[N];if(Z!=null)switch(N){case"src":h=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ee(e,n,N,Z,o,null)}}E&&ee(e,n,"srcSet",o.srcSet,o,null),h&&ee(e,n,"src",o.src,o,null);return;case"input":mn("invalid",e);var ce=N=Z=E=null,Be=null,yt=null;for(h in o)if(o.hasOwnProperty(h)){var Nt=o[h];if(Nt!=null)switch(h){case"name":E=Nt;break;case"type":Z=Nt;break;case"checked":Be=Nt;break;case"defaultChecked":yt=Nt;break;case"value":N=Nt;break;case"defaultValue":ce=Nt;break;case"children":case"dangerouslySetInnerHTML":if(Nt!=null)throw Error(a(137,n));break;default:ee(e,n,h,Nt,o,null)}}Ge(e,N,ce,Be,yt,Z,E,!1),be(e);return;case"select":mn("invalid",e),h=Z=N=null;for(E in o)if(o.hasOwnProperty(E)&&(ce=o[E],ce!=null))switch(E){case"value":N=ce;break;case"defaultValue":Z=ce;break;case"multiple":h=ce;default:ee(e,n,E,ce,o,null)}n=N,o=Z,e.multiple=!!h,n!=null?pt(e,!!h,n,!1):o!=null&&pt(e,!!h,o,!0);return;case"textarea":mn("invalid",e),N=E=h=null;for(Z in o)if(o.hasOwnProperty(Z)&&(ce=o[Z],ce!=null))switch(Z){case"value":h=ce;break;case"defaultValue":E=ce;break;case"children":N=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(91));break;default:ee(e,n,Z,ce,o,null)}ae(e,h,E,N),be(e);return;case"option":for(Be in o)if(o.hasOwnProperty(Be)&&(h=o[Be],h!=null))switch(Be){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ee(e,n,Be,h,o,null)}return;case"dialog":mn("beforetoggle",e),mn("toggle",e),mn("cancel",e),mn("close",e);break;case"iframe":case"object":mn("load",e);break;case"video":case"audio":for(h=0;h<$c.length;h++)mn($c[h],e);break;case"image":mn("error",e),mn("load",e);break;case"details":mn("toggle",e);break;case"embed":case"source":case"link":mn("error",e),mn("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(yt in o)if(o.hasOwnProperty(yt)&&(h=o[yt],h!=null))switch(yt){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ee(e,n,yt,h,o,null)}return;default:if(Et(n)){for(Nt in o)o.hasOwnProperty(Nt)&&(h=o[Nt],h!==void 0&&de(e,n,Nt,h,o,void 0));return}}for(ce in o)o.hasOwnProperty(ce)&&(h=o[ce],h!=null&&ee(e,n,ce,h,o,null))}function Ve(e,n,o,h){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,N=null,Z=null,ce=null,Be=null,yt=null,Nt=null;for(At in o){var kt=o[At];if(o.hasOwnProperty(At)&&kt!=null)switch(At){case"checked":break;case"value":break;case"defaultValue":Be=kt;default:h.hasOwnProperty(At)||ee(e,n,At,null,h,kt)}}for(var wt in h){var At=h[wt];if(kt=o[wt],h.hasOwnProperty(wt)&&(At!=null||kt!=null))switch(wt){case"type":N=At;break;case"name":E=At;break;case"checked":yt=At;break;case"defaultChecked":Nt=At;break;case"value":Z=At;break;case"defaultValue":ce=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(a(137,n));break;default:At!==kt&&ee(e,n,wt,At,h,kt)}}De(e,Z,ce,Be,yt,Nt,N,E);return;case"select":At=Z=ce=wt=null;for(N in o)if(Be=o[N],o.hasOwnProperty(N)&&Be!=null)switch(N){case"value":break;case"multiple":At=Be;default:h.hasOwnProperty(N)||ee(e,n,N,null,h,Be)}for(E in h)if(N=h[E],Be=o[E],h.hasOwnProperty(E)&&(N!=null||Be!=null))switch(E){case"value":wt=N;break;case"defaultValue":ce=N;break;case"multiple":Z=N;default:N!==Be&&ee(e,n,E,N,h,Be)}n=ce,o=Z,h=At,wt!=null?pt(e,!!o,wt,!1):!!h!=!!o&&(n!=null?pt(e,!!o,n,!0):pt(e,!!o,o?[]:"",!1));return;case"textarea":At=wt=null;for(ce in o)if(E=o[ce],o.hasOwnProperty(ce)&&E!=null&&!h.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:ee(e,n,ce,null,h,E)}for(Z in h)if(E=h[Z],N=o[Z],h.hasOwnProperty(Z)&&(E!=null||N!=null))switch(Z){case"value":wt=E;break;case"defaultValue":At=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:E!==N&&ee(e,n,Z,E,h,N)}_t(e,wt,At);return;case"option":for(var qr in o)if(wt=o[qr],o.hasOwnProperty(qr)&&wt!=null&&!h.hasOwnProperty(qr))switch(qr){case"selected":e.selected=!1;break;default:ee(e,n,qr,null,h,wt)}for(Be in h)if(wt=h[Be],At=o[Be],h.hasOwnProperty(Be)&&wt!==At&&(wt!=null||At!=null))switch(Be){case"selected":e.selected=wt&&typeof wt!="function"&&typeof wt!="symbol";break;default:ee(e,n,Be,wt,h,At)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Br in o)wt=o[Br],o.hasOwnProperty(Br)&&wt!=null&&!h.hasOwnProperty(Br)&&ee(e,n,Br,null,h,wt);for(yt in h)if(wt=h[yt],At=o[yt],h.hasOwnProperty(yt)&&wt!==At&&(wt!=null||At!=null))switch(yt){case"children":case"dangerouslySetInnerHTML":if(wt!=null)throw Error(a(137,n));break;default:ee(e,n,yt,wt,h,At)}return;default:if(Et(n)){for(var Qn in o)wt=o[Qn],o.hasOwnProperty(Qn)&&wt!==void 0&&!h.hasOwnProperty(Qn)&&de(e,n,Qn,void 0,h,wt);for(Nt in h)wt=h[Nt],At=o[Nt],!h.hasOwnProperty(Nt)||wt===At||wt===void 0&&At===void 0||de(e,n,Nt,wt,h,At);return}}for(var it in o)wt=o[it],o.hasOwnProperty(it)&&wt!=null&&!h.hasOwnProperty(it)&&ee(e,n,it,null,h,wt);for(kt in h)wt=h[kt],At=o[kt],!h.hasOwnProperty(kt)||wt===At||wt==null&&At==null||ee(e,n,kt,wt,h,At)}var Ye=null,Lt=null;function Kt(e){return e.nodeType===9?e:e.ownerDocument}function rr(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pr(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function ln(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Wr=null;function Ha(){var e=window.event;return e&&e.type==="popstate"?e===Wr?!1:(Wr=e,!0):(Wr=null,!1)}var Hn=typeof setTimeout=="function"?setTimeout:void 0,Sr=typeof clearTimeout=="function"?clearTimeout:void 0,Ui=typeof Promise=="function"?Promise:void 0,mi=typeof queueMicrotask=="function"?queueMicrotask:typeof Ui<"u"?function(e){return Ui.resolve(null).then(e).catch(ia)}:Hn;function ia(e){setTimeout(function(){throw e})}function Li(e){return e==="head"}function ws(e,n){var o=n,h=0,E=0;do{var N=o.nextSibling;if(e.removeChild(o),N&&N.nodeType===8)if(o=N.data,o==="/$"){if(0<h&&8>h){o=h;var Z=e.ownerDocument;if(o&1&&Mh(Z.documentElement),o&2&&Mh(Z.body),o&4)for(o=Z.head,Mh(o),Z=o.firstChild;Z;){var ce=Z.nextSibling,Be=Z.nodeName;Z[ir]||Be==="SCRIPT"||Be==="STYLE"||Be==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||o.removeChild(Z),Z=ce}}if(E===0){e.removeChild(N),$h(n);return}E--}else o==="$"||o==="$?"||o==="$!"?E++:h=o.charCodeAt(0)-48;else h=0;o=N}while(o);$h(n)}function ao(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var o=n;switch(n=n.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ao(o),Fr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function Wc(e,n,o,h){for(;e.nodeType===1;){var E=o;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[ir])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(N=e.getAttribute("rel"),N==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(N!==E.rel||e.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||e.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||e.getAttribute("title")!==(E.title==null?null:E.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(N=e.getAttribute("src"),(N!==(E.src==null?null:E.src)||e.getAttribute("type")!==(E.type==null?null:E.type)||e.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&N&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var N=E.name==null?null:""+E.name;if(E.type==="hidden"&&e.getAttribute("name")===N)return e}else return e;if(e=an(e.nextSibling),e===null)break}return null}function Jc(e,n,o){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=an(e.nextSibling),e===null))return null;return e}function El(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Tr(e,n){var o=e.ownerDocument;if(e.data!=="$?"||o.readyState==="complete")n();else{var h=function(){n(),o.removeEventListener("DOMContentLoaded",h)};o.addEventListener("DOMContentLoaded",h),e._reactRetry=h}}function an(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var $o=null;function gb(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return e;n--}else o==="/$"&&n++}e=e.previousSibling}return null}function yb(e,n,o){switch(n=Kt(o),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Mh(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Fr(e)}var To=new Map,mb=new Set;function Qg(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Al=gt.d;gt.d={f:LA,r:MA,D:kA,C:BA,L:HA,m:jA,X:KA,S:VA,M:GA};function LA(){var e=Al.f(),n=lu();return e||n}function MA(e){var n=Gr(e);n!==null&&n.tag===5&&n.type==="form"?Df(n):Al.r(e)}var yd=typeof document>"u"?null:document;function vb(e,n,o){var h=yd;if(h&&typeof n=="string"&&n){var E=Ae(n);E='link[rel="'+e+'"][href="'+E+'"]',typeof o=="string"&&(E+='[crossorigin="'+o+'"]'),mb.has(E)||(mb.add(E),e={rel:e,crossOrigin:o,href:n},h.querySelector(E)===null&&(n=h.createElement("link"),ke(n,"link",e),Gt(n),h.head.appendChild(n)))}}function kA(e){Al.D(e),vb("dns-prefetch",e,null)}function BA(e,n){Al.C(e,n),vb("preconnect",e,n)}function HA(e,n,o){Al.L(e,n,o);var h=yd;if(h&&e&&n){var E='link[rel="preload"][as="'+Ae(n)+'"]';n==="image"&&o&&o.imageSrcSet?(E+='[imagesrcset="'+Ae(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(E+='[imagesizes="'+Ae(o.imageSizes)+'"]')):E+='[href="'+Ae(e)+'"]';var N=E;switch(n){case"style":N=md(e);break;case"script":N=vd(e)}To.has(N)||(e=m({rel:"preload",href:n==="image"&&o&&o.imageSrcSet?void 0:e,as:n},o),To.set(N,e),h.querySelector(E)!==null||n==="style"&&h.querySelector(kh(N))||n==="script"&&h.querySelector(Bh(N))||(n=h.createElement("link"),ke(n,"link",e),Gt(n),h.head.appendChild(n)))}}function jA(e,n){Al.m(e,n);var o=yd;if(o&&e){var h=n&&typeof n.as=="string"?n.as:"script",E='link[rel="modulepreload"][as="'+Ae(h)+'"][href="'+Ae(e)+'"]',N=E;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=vd(e)}if(!To.has(N)&&(e=m({rel:"modulepreload",href:e},n),To.set(N,e),o.querySelector(E)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Bh(N)))return}h=o.createElement("link"),ke(h,"link",e),Gt(h),o.head.appendChild(h)}}}function VA(e,n,o){Al.S(e,n,o);var h=yd;if(h&&e){var E=or(h).hoistableStyles,N=md(e);n=n||"default";var Z=E.get(N);if(!Z){var ce={loading:0,preload:null};if(Z=h.querySelector(kh(N)))ce.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":n},o),(o=To.get(N))&&xm(e,o);var Be=Z=h.createElement("link");Gt(Be),ke(Be,"link",e),Be._p=new Promise(function(yt,Nt){Be.onload=yt,Be.onerror=Nt}),Be.addEventListener("load",function(){ce.loading|=1}),Be.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,Xg(Z,n,h)}Z={type:"stylesheet",instance:Z,count:1,state:ce},E.set(N,Z)}}}function KA(e,n){Al.X(e,n);var o=yd;if(o&&e){var h=or(o).hoistableScripts,E=vd(e),N=h.get(E);N||(N=o.querySelector(Bh(E)),N||(e=m({src:e,async:!0},n),(n=To.get(E))&&Tm(e,n),N=o.createElement("script"),Gt(N),ke(N,"link",e),o.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},h.set(E,N))}}function GA(e,n){Al.M(e,n);var o=yd;if(o&&e){var h=or(o).hoistableScripts,E=vd(e),N=h.get(E);N||(N=o.querySelector(Bh(E)),N||(e=m({src:e,async:!0,type:"module"},n),(n=To.get(E))&&Tm(e,n),N=o.createElement("script"),Gt(N),ke(N,"link",e),o.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},h.set(E,N))}}function bb(e,n,o,h){var E=(E=Mt.current)?Qg(E):null;if(!E)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(n=md(o.href),o=or(E).hoistableStyles,h=o.get(n),h||(h={type:"style",instance:null,count:0,state:null},o.set(n,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=md(o.href);var N=or(E).hoistableStyles,Z=N.get(e);if(Z||(E=E.ownerDocument||E,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(e,Z),(N=E.querySelector(kh(e)))&&!N._p&&(Z.instance=N,Z.state.loading=5),To.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},To.set(e,o),N||$A(E,e,o,Z.state))),n&&h===null)throw Error(a(528,""));return Z}if(n&&h!==null)throw Error(a(529,""));return null;case"script":return n=o.async,o=o.src,typeof o=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=vd(o),o=or(E).hoistableScripts,h=o.get(n),h||(h={type:"script",instance:null,count:0,state:null},o.set(n,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function md(e){return'href="'+Ae(e)+'"'}function kh(e){return'link[rel="stylesheet"]['+e+"]"}function wb(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function $A(e,n,o,h){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?h.loading=1:(n=e.createElement("link"),h.preload=n,n.addEventListener("load",function(){return h.loading|=1}),n.addEventListener("error",function(){return h.loading|=2}),ke(n,"link",o),Gt(n),e.head.appendChild(n))}function vd(e){return'[src="'+Ae(e)+'"]'}function Bh(e){return"script[async]"+e}function _b(e,n,o){if(n.count++,n.instance===null)switch(n.type){case"style":var h=e.querySelector('style[data-href~="'+Ae(o.href)+'"]');if(h)return n.instance=h,Gt(h),h;var E=m({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),Gt(h),ke(h,"style",E),Xg(h,o.precedence,e),n.instance=h;case"stylesheet":E=md(o.href);var N=e.querySelector(kh(E));if(N)return n.state.loading|=4,n.instance=N,Gt(N),N;h=wb(o),(E=To.get(E))&&xm(h,E),N=(e.ownerDocument||e).createElement("link"),Gt(N);var Z=N;return Z._p=new Promise(function(ce,Be){Z.onload=ce,Z.onerror=Be}),ke(N,"link",h),n.state.loading|=4,Xg(N,o.precedence,e),n.instance=N;case"script":return N=vd(o.src),(E=e.querySelector(Bh(N)))?(n.instance=E,Gt(E),E):(h=o,(E=To.get(N))&&(h=m({},o),Tm(h,E)),e=e.ownerDocument||e,E=e.createElement("script"),Gt(E),ke(E,"link",h),e.head.appendChild(E),n.instance=E);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(h=n.instance,n.state.loading|=4,Xg(h,o.precedence,e));return n.instance}function Xg(e,n,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=h.length?h[h.length-1]:null,N=E,Z=0;Z<h.length;Z++){var ce=h[Z];if(ce.dataset.precedence===n)N=ce;else if(N!==E)break}N?N.parentNode.insertBefore(e,N.nextSibling):(n=o.nodeType===9?o.head:o,n.insertBefore(e,n.firstChild))}function xm(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Tm(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Zg=null;function Sb(e,n,o){if(Zg===null){var h=new Map,E=Zg=new Map;E.set(o,h)}else E=Zg,h=E.get(o),h||(h=new Map,E.set(o,h));if(h.has(e))return h;for(h.set(e,null),o=o.getElementsByTagName(e),E=0;E<o.length;E++){var N=o[E];if(!(N[ir]||N[Pt]||e==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=N.getAttribute(n)||"";Z=e+Z;var ce=h.get(Z);ce?ce.push(N):h.set(Z,[N])}}return h}function Eb(e,n,o){e=e.ownerDocument||e,e.head.insertBefore(o,n==="title"?e.querySelector("head > title"):null)}function qA(e,n,o){if(o===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Ab(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Hh=null;function zA(){}function WA(e,n,o){if(Hh===null)throw Error(a(475));var h=Hh;if(n.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var E=md(o.href),N=e.querySelector(kh(E));if(N){e=N._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(h.count++,h=ey.bind(h),e.then(h,h)),n.state.loading|=4,n.instance=N,Gt(N);return}N=e.ownerDocument||e,o=wb(o),(E=To.get(E))&&xm(o,E),N=N.createElement("link"),Gt(N);var Z=N;Z._p=new Promise(function(ce,Be){Z.onload=ce,Z.onerror=Be}),ke(N,"link",o),n.instance=N}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(h.count++,n=ey.bind(h),e.addEventListener("load",n),e.addEventListener("error",n))}}function JA(){if(Hh===null)throw Error(a(475));var e=Hh;return e.stylesheets&&e.count===0&&Cm(e,e.stylesheets),0<e.count?function(n){var o=setTimeout(function(){if(e.stylesheets&&Cm(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(o)}}:null}function ey(){if(this.count--,this.count===0){if(this.stylesheets)Cm(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ty=null;function Cm(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ty=new Map,n.forEach(YA,e),ty=null,ey.call(e))}function YA(e,n){if(!(n.state.loading&4)){var o=ty.get(e);if(o)var h=o.get(null);else{o=new Map,ty.set(e,o);for(var E=e.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<E.length;N++){var Z=E[N];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(o.set(Z.dataset.precedence,Z),h=Z)}h&&o.set(null,h)}E=n.instance,Z=E.getAttribute("data-precedence"),N=o.get(Z)||h,N===h&&o.set(null,E),o.set(Z,E),this.count++,h=ey.bind(this),E.addEventListener("load",h),E.addEventListener("error",h),N?N.parentNode.insertBefore(E,N.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(E,e.firstChild)),n.state.loading|=4}}var jh={$$typeof:I,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function QA(e,n,o,h,E,N,Z,ce){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Le(0),this.hiddenUpdates=Le(null),this.identifierPrefix=h,this.onUncaughtError=E,this.onCaughtError=N,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function Rb(e,n,o,h,E,N,Z,ce,Be,yt,Nt,kt){return e=new QA(e,n,o,Z,ce,Be,yt,kt),n=1,N===!0&&(n|=24),N=pi(3,null,null,n),e.current=N,N.stateNode=e,n=bi(),n.refCount++,e.pooledCache=n,n.refCount++,N.memoizedState={element:h,isDehydrated:o,cache:n},eo(N),e}function xb(e){return e?(e=Ul,e):Ul}function Tb(e,n,o,h,E,N){E=xb(E),h.context===null?h.context=E:h.pendingContext=E,h=ga(n),h.payload={element:o},N=N===void 0?null:N,N!==null&&(h.callback=N),o=yo(e,h,n),o!==null&&(Di(o,e,n),Uo(o,e,n))}function Cb(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function Om(e,n){Cb(e,n),(e=e.alternate)&&Cb(e,n)}function Ob(e){if(e.tag===13){var n=da(e,67108864);n!==null&&Di(n,e,67108864),Om(e,67108864)}}var ry=!0;function XA(e,n,o,h){var E=Ne.T;Ne.T=null;var N=gt.p;try{gt.p=2,Pm(e,n,o,h)}finally{gt.p=N,Ne.T=E}}function ZA(e,n,o,h){var E=Ne.T;Ne.T=null;var N=gt.p;try{gt.p=8,Pm(e,n,o,h)}finally{gt.p=N,Ne.T=E}}function Pm(e,n,o,h){if(ry){var E=Im(h);if(E===null)Lh(e,n,h,ny,o),Ib(e,h);else if(tR(E,e,n,o,h))h.stopPropagation();else if(Ib(e,h),n&4&&-1<eR.indexOf(e)){for(;E!==null;){var N=Gr(E);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var Z=kr(N.pendingLanes);if(Z!==0){var ce=N;for(ce.pendingLanes|=2,ce.entangledLanes|=2;Z;){var Be=1<<31-V(Z);ce.entanglements[1]|=Be,Z&=~Be}io(N),(Bn&6)===0&&(Ko=Ce()+500,pu(0))}}break;case 13:ce=da(N,2),ce!==null&&Di(ce,N,2),lu(),Om(N,2)}if(N=Im(h),N===null&&Lh(e,n,h,ny,o),N===E)break;E=N}E!==null&&h.stopPropagation()}else Lh(e,n,h,null,o)}}function Im(e){return e=hr(e),Nm(e)}var ny=null;function Nm(e){if(ny=null,e=Er(e),e!==null){var n=d(e);if(n===null)e=null;else{var o=n.tag;if(o===13){if(e=l(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return ny=e,null}function Pb(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case Re:return 2;case ht:return 8;case Ct:case vt:return 32;case We:return 268435456;default:return 32}default:return 32}}var Fm=!1,mu=null,vu=null,bu=null,Vh=new Map,Kh=new Map,wu=[],eR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ib(e,n){switch(e){case"focusin":case"focusout":mu=null;break;case"dragenter":case"dragleave":vu=null;break;case"mouseover":case"mouseout":bu=null;break;case"pointerover":case"pointerout":Vh.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kh.delete(n.pointerId)}}function Gh(e,n,o,h,E,N){return e===null||e.nativeEvent!==N?(e={blockedOn:n,domEventName:o,eventSystemFlags:h,nativeEvent:N,targetContainers:[E]},n!==null&&(n=Gr(n),n!==null&&Ob(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,E!==null&&n.indexOf(E)===-1&&n.push(E),e)}function tR(e,n,o,h,E){switch(n){case"focusin":return mu=Gh(mu,e,n,o,h,E),!0;case"dragenter":return vu=Gh(vu,e,n,o,h,E),!0;case"mouseover":return bu=Gh(bu,e,n,o,h,E),!0;case"pointerover":var N=E.pointerId;return Vh.set(N,Gh(Vh.get(N)||null,e,n,o,h,E)),!0;case"gotpointercapture":return N=E.pointerId,Kh.set(N,Gh(Kh.get(N)||null,e,n,o,h,E)),!0}return!1}function Nb(e){var n=Er(e.target);if(n!==null){var o=d(n);if(o!==null){if(n=o.tag,n===13){if(n=l(o),n!==null){e.blockedOn=n,Tt(e.priority,function(){if(o.tag===13){var h=zi();h=Ht(h);var E=da(o,h);E!==null&&Di(E,o,h),Om(o,h)}});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function iy(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=Im(e.nativeEvent);if(o===null){o=e.nativeEvent;var h=new o.constructor(o.type,o);sr=h,o.target.dispatchEvent(h),sr=null}else return n=Gr(o),n!==null&&Ob(n),e.blockedOn=o,!1;n.shift()}return!0}function Fb(e,n,o){iy(e)&&o.delete(n)}function rR(){Fm=!1,mu!==null&&iy(mu)&&(mu=null),vu!==null&&iy(vu)&&(vu=null),bu!==null&&iy(bu)&&(bu=null),Vh.forEach(Fb),Kh.forEach(Fb)}function ay(e,n){e.blockedOn===n&&(e.blockedOn=null,Fm||(Fm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,rR)))}var oy=null;function Db(e){oy!==e&&(oy=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){oy===e&&(oy=null);for(var n=0;n<e.length;n+=3){var o=e[n],h=e[n+1],E=e[n+2];if(typeof h!="function"){if(Nm(h||o)===null)continue;break}var N=Gr(o);N!==null&&(e.splice(n,3),n-=3,Ff(N,{pending:!0,data:E,method:o.method,action:h},h,E))}}))}function $h(e){function n(Be){return ay(Be,e)}mu!==null&&ay(mu,e),vu!==null&&ay(vu,e),bu!==null&&ay(bu,e),Vh.forEach(n),Kh.forEach(n);for(var o=0;o<wu.length;o++){var h=wu[o];h.blockedOn===e&&(h.blockedOn=null)}for(;0<wu.length&&(o=wu[0],o.blockedOn===null);)Nb(o),o.blockedOn===null&&wu.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var E=o[h],N=o[h+1],Z=E[Xt]||null;if(typeof N=="function")Z||Db(o);else if(Z){var ce=null;if(N&&N.hasAttribute("formAction")){if(E=N,Z=N[Xt]||null)ce=Z.formAction;else if(Nm(E)!==null)continue}else ce=Z.action;typeof ce=="function"?o[h+1]=ce:(o.splice(h,3),h-=3),Db(o)}}}function Dm(e){this._internalRoot=e}sy.prototype.render=Dm.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var o=n.current,h=zi();Tb(o,h,e,n,null,null)},sy.prototype.unmount=Dm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Tb(e.current,2,null,e,null,null),lu(),n[tr]=null}};function sy(e){this._internalRoot=e}sy.prototype.unstable_scheduleHydration=function(e){if(e){var n=pe();e={blockedOn:null,target:e,priority:n};for(var o=0;o<wu.length&&n!==0&&n<wu[o].priority;o++);wu.splice(o,0,e),o===0&&Nb(e)}};var Ub=r.version;if(Ub!=="19.1.0")throw Error(a(527,Ub,"19.1.0"));gt.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=p(n),e=e!==null?f(e):null,e=e===null?null:e.stateNode,e};var nR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Ne,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ly=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ly.isDisabled&&ly.supportsFiber)try{lt=ly.inject(nR),Q=ly}catch{}}return zh.createRoot=function(e,n){if(!s(e))throw Error(a(299));var o=!1,h="",E=pm,N=gm,Z=ym,ce=null;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onUncaughtError!==void 0&&(E=n.onUncaughtError),n.onCaughtError!==void 0&&(N=n.onCaughtError),n.onRecoverableError!==void 0&&(Z=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(ce=n.unstable_transitionCallbacks)),n=Rb(e,1,!1,null,null,o,h,E,N,Z,ce,null),e[tr]=n.current,Uh(e),new Dm(n)},zh.hydrateRoot=function(e,n,o){if(!s(e))throw Error(a(299));var h=!1,E="",N=pm,Z=gm,ce=ym,Be=null,yt=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(E=o.identifierPrefix),o.onUncaughtError!==void 0&&(N=o.onUncaughtError),o.onCaughtError!==void 0&&(Z=o.onCaughtError),o.onRecoverableError!==void 0&&(ce=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(Be=o.unstable_transitionCallbacks),o.formState!==void 0&&(yt=o.formState)),n=Rb(e,1,!0,n,o??null,h,E,N,Z,ce,Be,yt),n.context=xb(null),o=n.current,h=zi(),h=Ht(h),E=ga(h),E.callback=null,yo(o,E,h),o=h,n.current.lanes=o,ct(n,o),io(n),e[tr]=n.current,Uh(e),new sy(n)},zh.version="19.1.0",zh}var qb;function pR(){if(qb)return Mm.exports;qb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Mm.exports=hR(),Mm.exports}var gR=pR(),Ry={exports:{}},rt={},Yc={},Wh={},jm={},Jh={},zb;function yR(){if(zb)return Jh;zb=1,Jh.byteLength=c,Jh.toByteArray=f,Jh.fromByteArray=_;for(var t=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,d=a.length;s<d;++s)t[s]=a[s],r[a.charCodeAt(s)]=s;r[45]=62,r[95]=63;function l(A){var T=A.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=A.indexOf("=");x===-1&&(x=T);var P=x===T?0:4-x%4;return[x,P]}function c(A){var T=l(A),x=T[0],P=T[1];return(x+P)*3/4-P}function p(A,T,x){return(T+x)*3/4-x}function f(A){var T,x=l(A),P=x[0],R=x[1],F=new i(p(A,P,R)),I=0,$=R>0?P-4:P,B;for(B=0;B<$;B+=4)T=r[A.charCodeAt(B)]<<18|r[A.charCodeAt(B+1)]<<12|r[A.charCodeAt(B+2)]<<6|r[A.charCodeAt(B+3)],F[I++]=T>>16&255,F[I++]=T>>8&255,F[I++]=T&255;return R===2&&(T=r[A.charCodeAt(B)]<<2|r[A.charCodeAt(B+1)]>>4,F[I++]=T&255),R===1&&(T=r[A.charCodeAt(B)]<<10|r[A.charCodeAt(B+1)]<<4|r[A.charCodeAt(B+2)]>>2,F[I++]=T>>8&255,F[I++]=T&255),F}function m(A){return t[A>>18&63]+t[A>>12&63]+t[A>>6&63]+t[A&63]}function b(A,T,x){for(var P,R=[],F=T;F<x;F+=3)P=(A[F]<<16&16711680)+(A[F+1]<<8&65280)+(A[F+2]&255),R.push(m(P));return R.join("")}function _(A){for(var T,x=A.length,P=x%3,R=[],F=16383,I=0,$=x-P;I<$;I+=F)R.push(b(A,I,I+F>$?$:I+F));return P===1?(T=A[x-1],R.push(t[T>>2]+t[T<<4&63]+"==")):P===2&&(T=(A[x-2]<<8)+A[x-1],R.push(t[T>>10]+t[T>>4&63]+t[T<<2&63]+"=")),R.join("")}return Jh}var uy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Wb;function mR(){return Wb||(Wb=1,uy.read=function(t,r,i,a,s){var d,l,c=s*8-a-1,p=(1<<c)-1,f=p>>1,m=-7,b=i?s-1:0,_=i?-1:1,A=t[r+b];for(b+=_,d=A&(1<<-m)-1,A>>=-m,m+=c;m>0;d=d*256+t[r+b],b+=_,m-=8);for(l=d&(1<<-m)-1,d>>=-m,m+=a;m>0;l=l*256+t[r+b],b+=_,m-=8);if(d===0)d=1-f;else{if(d===p)return l?NaN:(A?-1:1)*(1/0);l=l+Math.pow(2,a),d=d-f}return(A?-1:1)*l*Math.pow(2,d-a)},uy.write=function(t,r,i,a,s,d){var l,c,p,f=d*8-s-1,m=(1<<f)-1,b=m>>1,_=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=a?0:d-1,T=a?1:-1,x=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(c=isNaN(r)?1:0,l=m):(l=Math.floor(Math.log(r)/Math.LN2),r*(p=Math.pow(2,-l))<1&&(l--,p*=2),l+b>=1?r+=_/p:r+=_*Math.pow(2,1-b),r*p>=2&&(l++,p/=2),l+b>=m?(c=0,l=m):l+b>=1?(c=(r*p-1)*Math.pow(2,s),l=l+b):(c=r*Math.pow(2,b-1)*Math.pow(2,s),l=0));s>=8;t[i+A]=c&255,A+=T,c/=256,s-=8);for(l=l<<s|c,f+=s;f>0;t[i+A]=l&255,A+=T,l/=256,f-=8);t[i+A-T]|=x*128}),uy}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Jb;function Ts(){return Jb||(Jb=1,function(t){const r=yR(),i=mR(),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=F,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=d(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const Q=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(Q,k),Q.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function l(Q){if(Q>s)throw new RangeError('The value "'+Q+'" is invalid for option "size"');const k=new Uint8Array(Q);return Object.setPrototypeOf(k,c.prototype),k}function c(Q,k,V){if(typeof Q=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(Q)}return p(Q,k,V)}c.poolSize=8192;function p(Q,k,V){if(typeof Q=="string")return _(Q,k);if(ArrayBuffer.isView(Q))return T(Q);if(Q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q);if(vt(Q,ArrayBuffer)||Q&&vt(Q.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(vt(Q,SharedArrayBuffer)||Q&&vt(Q.buffer,SharedArrayBuffer)))return x(Q,k,V);if(typeof Q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const j=Q.valueOf&&Q.valueOf();if(j!=null&&j!==Q)return c.from(j,k,V);const qe=P(Q);if(qe)return qe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Q[Symbol.toPrimitive]=="function")return c.from(Q[Symbol.toPrimitive]("string"),k,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q)}c.from=function(Q,k,V){return p(Q,k,V)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function f(Q){if(typeof Q!="number")throw new TypeError('"size" argument must be of type number');if(Q<0)throw new RangeError('The value "'+Q+'" is invalid for option "size"')}function m(Q,k,V){return f(Q),Q<=0?l(Q):k!==void 0?typeof V=="string"?l(Q).fill(k,V):l(Q).fill(k):l(Q)}c.alloc=function(Q,k,V){return m(Q,k,V)};function b(Q){return f(Q),l(Q<0?0:R(Q)|0)}c.allocUnsafe=function(Q){return b(Q)},c.allocUnsafeSlow=function(Q){return b(Q)};function _(Q,k){if((typeof k!="string"||k==="")&&(k="utf8"),!c.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const V=I(Q,k)|0;let j=l(V);const qe=j.write(Q,k);return qe!==V&&(j=j.slice(0,qe)),j}function A(Q){const k=Q.length<0?0:R(Q.length)|0,V=l(k);for(let j=0;j<k;j+=1)V[j]=Q[j]&255;return V}function T(Q){if(vt(Q,Uint8Array)){const k=new Uint8Array(Q);return x(k.buffer,k.byteOffset,k.byteLength)}return A(Q)}function x(Q,k,V){if(k<0||Q.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(Q.byteLength<k+(V||0))throw new RangeError('"length" is outside of buffer bounds');let j;return k===void 0&&V===void 0?j=new Uint8Array(Q):V===void 0?j=new Uint8Array(Q,k):j=new Uint8Array(Q,k,V),Object.setPrototypeOf(j,c.prototype),j}function P(Q){if(c.isBuffer(Q)){const k=R(Q.length)|0,V=l(k);return V.length===0||Q.copy(V,0,0,k),V}if(Q.length!==void 0)return typeof Q.length!="number"||We(Q.length)?l(0):A(Q);if(Q.type==="Buffer"&&Array.isArray(Q.data))return A(Q.data)}function R(Q){if(Q>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return Q|0}function F(Q){return+Q!=Q&&(Q=0),c.alloc(+Q)}c.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==c.prototype},c.compare=function(k,V){if(vt(k,Uint8Array)&&(k=c.from(k,k.offset,k.byteLength)),vt(V,Uint8Array)&&(V=c.from(V,V.offset,V.byteLength)),!c.isBuffer(k)||!c.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===V)return 0;let j=k.length,qe=V.length;for(let Ze=0,ze=Math.min(j,qe);Ze<ze;++Ze)if(k[Ze]!==V[Ze]){j=k[Ze],qe=V[Ze];break}return j<qe?-1:qe<j?1:0},c.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(k,V){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return c.alloc(0);let j;if(V===void 0)for(V=0,j=0;j<k.length;++j)V+=k[j].length;const qe=c.allocUnsafe(V);let Ze=0;for(j=0;j<k.length;++j){let ze=k[j];if(vt(ze,Uint8Array))Ze+ze.length>qe.length?(c.isBuffer(ze)||(ze=c.from(ze)),ze.copy(qe,Ze)):Uint8Array.prototype.set.call(qe,ze,Ze);else if(c.isBuffer(ze))ze.copy(qe,Ze);else throw new TypeError('"list" argument must be an Array of Buffers');Ze+=ze.length}return qe};function I(Q,k){if(c.isBuffer(Q))return Q.length;if(ArrayBuffer.isView(Q)||vt(Q,ArrayBuffer))return Q.byteLength;if(typeof Q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Q);const V=Q.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&V===0)return 0;let qe=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return Ce(Q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V*2;case"hex":return V>>>1;case"base64":return ht(Q).length;default:if(qe)return j?-1:Ce(Q).length;k=(""+k).toLowerCase(),qe=!0}}c.byteLength=I;function $(Q,k,V){let j=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((V===void 0||V>this.length)&&(V=this.length),V<=0)||(V>>>=0,k>>>=0,V<=k))return"";for(Q||(Q="utf8");;)switch(Q){case"hex":return tt(this,k,V);case"utf8":case"utf-8":return et(this,k,V);case"ascii":return gt(this,k,V);case"latin1":case"binary":return ve(this,k,V);case"base64":return Se(this,k,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,k,V);default:if(j)throw new TypeError("Unknown encoding: "+Q);Q=(Q+"").toLowerCase(),j=!0}}c.prototype._isBuffer=!0;function B(Q,k,V){const j=Q[k];Q[k]=Q[V],Q[V]=j}c.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let V=0;V<k;V+=2)B(this,V,V+1);return this},c.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let V=0;V<k;V+=4)B(this,V,V+3),B(this,V+1,V+2);return this},c.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let V=0;V<k;V+=8)B(this,V,V+7),B(this,V+1,V+6),B(this,V+2,V+5),B(this,V+3,V+4);return this},c.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?et(this,0,k):$.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(k){if(!c.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:c.compare(this,k)===0},c.prototype.inspect=function(){let k="";const V=t.INSPECT_MAX_BYTES;return k=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(k+=" ... "),"<Buffer "+k+">"},a&&(c.prototype[a]=c.prototype.inspect),c.prototype.compare=function(k,V,j,qe,Ze){if(vt(k,Uint8Array)&&(k=c.from(k,k.offset,k.byteLength)),!c.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(V===void 0&&(V=0),j===void 0&&(j=k?k.length:0),qe===void 0&&(qe=0),Ze===void 0&&(Ze=this.length),V<0||j>k.length||qe<0||Ze>this.length)throw new RangeError("out of range index");if(qe>=Ze&&V>=j)return 0;if(qe>=Ze)return-1;if(V>=j)return 1;if(V>>>=0,j>>>=0,qe>>>=0,Ze>>>=0,this===k)return 0;let ze=Ze-qe,Jt=j-V;const kr=Math.min(ze,Jt),Hr=this.slice(qe,Ze),ar=k.slice(V,j);for(let Ke=0;Ke<kr;++Ke)if(Hr[Ke]!==ar[Ke]){ze=Hr[Ke],Jt=ar[Ke];break}return ze<Jt?-1:Jt<ze?1:0};function W(Q,k,V,j,qe){if(Q.length===0)return-1;if(typeof V=="string"?(j=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),V=+V,We(V)&&(V=qe?0:Q.length-1),V<0&&(V=Q.length+V),V>=Q.length){if(qe)return-1;V=Q.length-1}else if(V<0)if(qe)V=0;else return-1;if(typeof k=="string"&&(k=c.from(k,j)),c.isBuffer(k))return k.length===0?-1:Y(Q,k,V,j,qe);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?qe?Uint8Array.prototype.indexOf.call(Q,k,V):Uint8Array.prototype.lastIndexOf.call(Q,k,V):Y(Q,[k],V,j,qe);throw new TypeError("val must be string, number or Buffer")}function Y(Q,k,V,j,qe){let Ze=1,ze=Q.length,Jt=k.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(Q.length<2||k.length<2)return-1;Ze=2,ze/=2,Jt/=2,V/=2}function kr(ar,Ke){return Ze===1?ar[Ke]:ar.readUInt16BE(Ke*Ze)}let Hr;if(qe){let ar=-1;for(Hr=V;Hr<ze;Hr++)if(kr(Q,Hr)===kr(k,ar===-1?0:Hr-ar)){if(ar===-1&&(ar=Hr),Hr-ar+1===Jt)return ar*Ze}else ar!==-1&&(Hr-=Hr-ar),ar=-1}else for(V+Jt>ze&&(V=ze-Jt),Hr=V;Hr>=0;Hr--){let ar=!0;for(let Ke=0;Ke<Jt;Ke++)if(kr(Q,Hr+Ke)!==kr(k,Ke)){ar=!1;break}if(ar)return Hr}return-1}c.prototype.includes=function(k,V,j){return this.indexOf(k,V,j)!==-1},c.prototype.indexOf=function(k,V,j){return W(this,k,V,j,!0)},c.prototype.lastIndexOf=function(k,V,j){return W(this,k,V,j,!1)};function q(Q,k,V,j){V=Number(V)||0;const qe=Q.length-V;j?(j=Number(j),j>qe&&(j=qe)):j=qe;const Ze=k.length;j>Ze/2&&(j=Ze/2);let ze;for(ze=0;ze<j;++ze){const Jt=parseInt(k.substr(ze*2,2),16);if(We(Jt))return ze;Q[V+ze]=Jt}return ze}function Ie(Q,k,V,j){return Ct(Ce(k,Q.length-V),Q,V,j)}function K(Q,k,V,j){return Ct(at(k),Q,V,j)}function ie(Q,k,V,j){return Ct(ht(k),Q,V,j)}function ge(Q,k,V,j){return Ct(Re(k,Q.length-V),Q,V,j)}c.prototype.write=function(k,V,j,qe){if(V===void 0)qe="utf8",j=this.length,V=0;else if(j===void 0&&typeof V=="string")qe=V,j=this.length,V=0;else if(isFinite(V))V=V>>>0,isFinite(j)?(j=j>>>0,qe===void 0&&(qe="utf8")):(qe=j,j=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ze=this.length-V;if((j===void 0||j>Ze)&&(j=Ze),k.length>0&&(j<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");qe||(qe="utf8");let ze=!1;for(;;)switch(qe){case"hex":return q(this,k,V,j);case"utf8":case"utf-8":return Ie(this,k,V,j);case"ascii":case"latin1":case"binary":return K(this,k,V,j);case"base64":return ie(this,k,V,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,k,V,j);default:if(ze)throw new TypeError("Unknown encoding: "+qe);qe=(""+qe).toLowerCase(),ze=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Se(Q,k,V){return k===0&&V===Q.length?r.fromByteArray(Q):r.fromByteArray(Q.slice(k,V))}function et(Q,k,V){V=Math.min(Q.length,V);const j=[];let qe=k;for(;qe<V;){const Ze=Q[qe];let ze=null,Jt=Ze>239?4:Ze>223?3:Ze>191?2:1;if(qe+Jt<=V){let kr,Hr,ar,Ke;switch(Jt){case 1:Ze<128&&(ze=Ze);break;case 2:kr=Q[qe+1],(kr&192)===128&&(Ke=(Ze&31)<<6|kr&63,Ke>127&&(ze=Ke));break;case 3:kr=Q[qe+1],Hr=Q[qe+2],(kr&192)===128&&(Hr&192)===128&&(Ke=(Ze&15)<<12|(kr&63)<<6|Hr&63,Ke>2047&&(Ke<55296||Ke>57343)&&(ze=Ke));break;case 4:kr=Q[qe+1],Hr=Q[qe+2],ar=Q[qe+3],(kr&192)===128&&(Hr&192)===128&&(ar&192)===128&&(Ke=(Ze&15)<<18|(kr&63)<<12|(Hr&63)<<6|ar&63,Ke>65535&&Ke<1114112&&(ze=Ke))}}ze===null?(ze=65533,Jt=1):ze>65535&&(ze-=65536,j.push(ze>>>10&1023|55296),ze=56320|ze&1023),j.push(ze),qe+=Jt}return Ne(j)}const st=4096;function Ne(Q){const k=Q.length;if(k<=st)return String.fromCharCode.apply(String,Q);let V="",j=0;for(;j<k;)V+=String.fromCharCode.apply(String,Q.slice(j,j+=st));return V}function gt(Q,k,V){let j="";V=Math.min(Q.length,V);for(let qe=k;qe<V;++qe)j+=String.fromCharCode(Q[qe]&127);return j}function ve(Q,k,V){let j="";V=Math.min(Q.length,V);for(let qe=k;qe<V;++qe)j+=String.fromCharCode(Q[qe]);return j}function tt(Q,k,V){const j=Q.length;(!k||k<0)&&(k=0),(!V||V<0||V>j)&&(V=j);let qe="";for(let Ze=k;Ze<V;++Ze)qe+=$e[Q[Ze]];return qe}function J(Q,k,V){const j=Q.slice(k,V);let qe="";for(let Ze=0;Ze<j.length-1;Ze+=2)qe+=String.fromCharCode(j[Ze]+j[Ze+1]*256);return qe}c.prototype.slice=function(k,V){const j=this.length;k=~~k,V=V===void 0?j:~~V,k<0?(k+=j,k<0&&(k=0)):k>j&&(k=j),V<0?(V+=j,V<0&&(V=0)):V>j&&(V=j),V<k&&(V=k);const qe=this.subarray(k,V);return Object.setPrototypeOf(qe,c.prototype),qe};function xe(Q,k,V){if(Q%1!==0||Q<0)throw new RangeError("offset is not uint");if(Q+k>V)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(k,V,j){k=k>>>0,V=V>>>0,j||xe(k,V,this.length);let qe=this[k],Ze=1,ze=0;for(;++ze<V&&(Ze*=256);)qe+=this[k+ze]*Ze;return qe},c.prototype.readUintBE=c.prototype.readUIntBE=function(k,V,j){k=k>>>0,V=V>>>0,j||xe(k,V,this.length);let qe=this[k+--V],Ze=1;for(;V>0&&(Ze*=256);)qe+=this[k+--V]*Ze;return qe},c.prototype.readUint8=c.prototype.readUInt8=function(k,V){return k=k>>>0,V||xe(k,1,this.length),this[k]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(k,V){return k=k>>>0,V||xe(k,2,this.length),this[k]|this[k+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(k,V){return k=k>>>0,V||xe(k,2,this.length),this[k]<<8|this[k+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},c.prototype.readBigUInt64LE=Oe(function(k){k=k>>>0,D(k,"offset");const V=this[k],j=this[k+7];(V===void 0||j===void 0)&&G(k,this.length-8);const qe=V+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,Ze=this[++k]+this[++k]*2**8+this[++k]*2**16+j*2**24;return BigInt(qe)+(BigInt(Ze)<<BigInt(32))}),c.prototype.readBigUInt64BE=Oe(function(k){k=k>>>0,D(k,"offset");const V=this[k],j=this[k+7];(V===void 0||j===void 0)&&G(k,this.length-8);const qe=V*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],Ze=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+j;return(BigInt(qe)<<BigInt(32))+BigInt(Ze)}),c.prototype.readIntLE=function(k,V,j){k=k>>>0,V=V>>>0,j||xe(k,V,this.length);let qe=this[k],Ze=1,ze=0;for(;++ze<V&&(Ze*=256);)qe+=this[k+ze]*Ze;return Ze*=128,qe>=Ze&&(qe-=Math.pow(2,8*V)),qe},c.prototype.readIntBE=function(k,V,j){k=k>>>0,V=V>>>0,j||xe(k,V,this.length);let qe=V,Ze=1,ze=this[k+--qe];for(;qe>0&&(Ze*=256);)ze+=this[k+--qe]*Ze;return Ze*=128,ze>=Ze&&(ze-=Math.pow(2,8*V)),ze},c.prototype.readInt8=function(k,V){return k=k>>>0,V||xe(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},c.prototype.readInt16LE=function(k,V){k=k>>>0,V||xe(k,2,this.length);const j=this[k]|this[k+1]<<8;return j&32768?j|4294901760:j},c.prototype.readInt16BE=function(k,V){k=k>>>0,V||xe(k,2,this.length);const j=this[k+1]|this[k]<<8;return j&32768?j|4294901760:j},c.prototype.readInt32LE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},c.prototype.readInt32BE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},c.prototype.readBigInt64LE=Oe(function(k){k=k>>>0,D(k,"offset");const V=this[k],j=this[k+7];(V===void 0||j===void 0)&&G(k,this.length-8);const qe=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(j<<24);return(BigInt(qe)<<BigInt(32))+BigInt(V+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),c.prototype.readBigInt64BE=Oe(function(k){k=k>>>0,D(k,"offset");const V=this[k],j=this[k+7];(V===void 0||j===void 0)&&G(k,this.length-8);const qe=(V<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(qe)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+j)}),c.prototype.readFloatLE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),i.read(this,k,!0,23,4)},c.prototype.readFloatBE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),i.read(this,k,!1,23,4)},c.prototype.readDoubleLE=function(k,V){return k=k>>>0,V||xe(k,8,this.length),i.read(this,k,!0,52,8)},c.prototype.readDoubleBE=function(k,V){return k=k>>>0,V||xe(k,8,this.length),i.read(this,k,!1,52,8)};function Xe(Q,k,V,j,qe,Ze){if(!c.isBuffer(Q))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>qe||k<Ze)throw new RangeError('"value" argument is out of bounds');if(V+j>Q.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(k,V,j,qe){if(k=+k,V=V>>>0,j=j>>>0,!qe){const Jt=Math.pow(2,8*j)-1;Xe(this,k,V,j,Jt,0)}let Ze=1,ze=0;for(this[V]=k&255;++ze<j&&(Ze*=256);)this[V+ze]=k/Ze&255;return V+j},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(k,V,j,qe){if(k=+k,V=V>>>0,j=j>>>0,!qe){const Jt=Math.pow(2,8*j)-1;Xe(this,k,V,j,Jt,0)}let Ze=j-1,ze=1;for(this[V+Ze]=k&255;--Ze>=0&&(ze*=256);)this[V+Ze]=k/ze&255;return V+j},c.prototype.writeUint8=c.prototype.writeUInt8=function(k,V,j){return k=+k,V=V>>>0,j||Xe(this,k,V,1,255,0),this[V]=k&255,V+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(k,V,j){return k=+k,V=V>>>0,j||Xe(this,k,V,2,65535,0),this[V]=k&255,this[V+1]=k>>>8,V+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(k,V,j){return k=+k,V=V>>>0,j||Xe(this,k,V,2,65535,0),this[V]=k>>>8,this[V+1]=k&255,V+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(k,V,j){return k=+k,V=V>>>0,j||Xe(this,k,V,4,4294967295,0),this[V+3]=k>>>24,this[V+2]=k>>>16,this[V+1]=k>>>8,this[V]=k&255,V+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(k,V,j){return k=+k,V=V>>>0,j||Xe(this,k,V,4,4294967295,0),this[V]=k>>>24,this[V+1]=k>>>16,this[V+2]=k>>>8,this[V+3]=k&255,V+4};function je(Q,k,V,j,qe){M(k,j,qe,Q,V,7);let Ze=Number(k&BigInt(4294967295));Q[V++]=Ze,Ze=Ze>>8,Q[V++]=Ze,Ze=Ze>>8,Q[V++]=Ze,Ze=Ze>>8,Q[V++]=Ze;let ze=Number(k>>BigInt(32)&BigInt(4294967295));return Q[V++]=ze,ze=ze>>8,Q[V++]=ze,ze=ze>>8,Q[V++]=ze,ze=ze>>8,Q[V++]=ze,V}function dt(Q,k,V,j,qe){M(k,j,qe,Q,V,7);let Ze=Number(k&BigInt(4294967295));Q[V+7]=Ze,Ze=Ze>>8,Q[V+6]=Ze,Ze=Ze>>8,Q[V+5]=Ze,Ze=Ze>>8,Q[V+4]=Ze;let ze=Number(k>>BigInt(32)&BigInt(4294967295));return Q[V+3]=ze,ze=ze>>8,Q[V+2]=ze,ze=ze>>8,Q[V+1]=ze,ze=ze>>8,Q[V]=ze,V+8}c.prototype.writeBigUInt64LE=Oe(function(k,V=0){return je(this,k,V,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Oe(function(k,V=0){return dt(this,k,V,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(k,V,j,qe){if(k=+k,V=V>>>0,!qe){const kr=Math.pow(2,8*j-1);Xe(this,k,V,j,kr-1,-kr)}let Ze=0,ze=1,Jt=0;for(this[V]=k&255;++Ze<j&&(ze*=256);)k<0&&Jt===0&&this[V+Ze-1]!==0&&(Jt=1),this[V+Ze]=(k/ze>>0)-Jt&255;return V+j},c.prototype.writeIntBE=function(k,V,j,qe){if(k=+k,V=V>>>0,!qe){const kr=Math.pow(2,8*j-1);Xe(this,k,V,j,kr-1,-kr)}let Ze=j-1,ze=1,Jt=0;for(this[V+Ze]=k&255;--Ze>=0&&(ze*=256);)k<0&&Jt===0&&this[V+Ze+1]!==0&&(Jt=1),this[V+Ze]=(k/ze>>0)-Jt&255;return V+j},c.prototype.writeInt8=function(k,V,j){return k=+k,V=V>>>0,j||Xe(this,k,V,1,127,-128),k<0&&(k=255+k+1),this[V]=k&255,V+1},c.prototype.writeInt16LE=function(k,V,j){return k=+k,V=V>>>0,j||Xe(this,k,V,2,32767,-32768),this[V]=k&255,this[V+1]=k>>>8,V+2},c.prototype.writeInt16BE=function(k,V,j){return k=+k,V=V>>>0,j||Xe(this,k,V,2,32767,-32768),this[V]=k>>>8,this[V+1]=k&255,V+2},c.prototype.writeInt32LE=function(k,V,j){return k=+k,V=V>>>0,j||Xe(this,k,V,4,2147483647,-2147483648),this[V]=k&255,this[V+1]=k>>>8,this[V+2]=k>>>16,this[V+3]=k>>>24,V+4},c.prototype.writeInt32BE=function(k,V,j){return k=+k,V=V>>>0,j||Xe(this,k,V,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[V]=k>>>24,this[V+1]=k>>>16,this[V+2]=k>>>8,this[V+3]=k&255,V+4},c.prototype.writeBigInt64LE=Oe(function(k,V=0){return je(this,k,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Oe(function(k,V=0){return dt(this,k,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function It(Q,k,V,j,qe,Ze){if(V+j>Q.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function Mt(Q,k,V,j,qe){return k=+k,V=V>>>0,qe||It(Q,k,V,4),i.write(Q,k,V,j,23,4),V+4}c.prototype.writeFloatLE=function(k,V,j){return Mt(this,k,V,!0,j)},c.prototype.writeFloatBE=function(k,V,j){return Mt(this,k,V,!1,j)};function Me(Q,k,V,j,qe){return k=+k,V=V>>>0,qe||It(Q,k,V,8),i.write(Q,k,V,j,52,8),V+8}c.prototype.writeDoubleLE=function(k,V,j){return Me(this,k,V,!0,j)},c.prototype.writeDoubleBE=function(k,V,j){return Me(this,k,V,!1,j)},c.prototype.copy=function(k,V,j,qe){if(!c.isBuffer(k))throw new TypeError("argument should be a Buffer");if(j||(j=0),!qe&&qe!==0&&(qe=this.length),V>=k.length&&(V=k.length),V||(V=0),qe>0&&qe<j&&(qe=j),qe===j||k.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if(qe<0)throw new RangeError("sourceEnd out of bounds");qe>this.length&&(qe=this.length),k.length-V<qe-j&&(qe=k.length-V+j);const Ze=qe-j;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(V,j,qe):Uint8Array.prototype.set.call(k,this.subarray(j,qe),V),Ze},c.prototype.fill=function(k,V,j,qe){if(typeof k=="string"){if(typeof V=="string"?(qe=V,V=0,j=this.length):typeof j=="string"&&(qe=j,j=this.length),qe!==void 0&&typeof qe!="string")throw new TypeError("encoding must be a string");if(typeof qe=="string"&&!c.isEncoding(qe))throw new TypeError("Unknown encoding: "+qe);if(k.length===1){const ze=k.charCodeAt(0);(qe==="utf8"&&ze<128||qe==="latin1")&&(k=ze)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(V<0||this.length<V||this.length<j)throw new RangeError("Out of range index");if(j<=V)return this;V=V>>>0,j=j===void 0?this.length:j>>>0,k||(k=0);let Ze;if(typeof k=="number")for(Ze=V;Ze<j;++Ze)this[Ze]=k;else{const ze=c.isBuffer(k)?k:c.from(k,qe),Jt=ze.length;if(Jt===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(Ze=0;Ze<j-V;++Ze)this[Ze+V]=ze[Ze%Jt]}return this};const le={};function Te(Q,k,V){le[Q]=class extends V{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Q}]`,this.stack,delete this.name}get code(){return Q}set code(qe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:qe,writable:!0})}toString(){return`${this.name} [${Q}]: ${this.message}`}}}Te("ERR_BUFFER_OUT_OF_BOUNDS",function(Q){return Q?`${Q} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Te("ERR_INVALID_ARG_TYPE",function(Q,k){return`The "${Q}" argument must be of type number. Received type ${typeof k}`},TypeError),Te("ERR_OUT_OF_RANGE",function(Q,k,V){let j=`The value of "${Q}" is out of range.`,qe=V;return Number.isInteger(V)&&Math.abs(V)>2**32?qe=Je(String(V)):typeof V=="bigint"&&(qe=String(V),(V>BigInt(2)**BigInt(32)||V<-(BigInt(2)**BigInt(32)))&&(qe=Je(qe)),qe+="n"),j+=` It must be ${k}. Received ${qe}`,j},RangeError);function Je(Q){let k="",V=Q.length;const j=Q[0]==="-"?1:0;for(;V>=j+4;V-=3)k=`_${Q.slice(V-3,V)}${k}`;return`${Q.slice(0,V)}${k}`}function se(Q,k,V){D(k,"offset"),(Q[k]===void 0||Q[k+V]===void 0)&&G(k,Q.length-(V+1))}function M(Q,k,V,j,qe,Ze){if(Q>V||Q<k){const ze=typeof k=="bigint"?"n":"";let Jt;throw k===0||k===BigInt(0)?Jt=`>= 0${ze} and < 2${ze} ** ${(Ze+1)*8}${ze}`:Jt=`>= -(2${ze} ** ${(Ze+1)*8-1}${ze}) and < 2 ** ${(Ze+1)*8-1}${ze}`,new le.ERR_OUT_OF_RANGE("value",Jt,Q)}se(j,qe,Ze)}function D(Q,k){if(typeof Q!="number")throw new le.ERR_INVALID_ARG_TYPE(k,"number",Q)}function G(Q,k,V){throw Math.floor(Q)!==Q?(D(Q,V),new le.ERR_OUT_OF_RANGE("offset","an integer",Q)):k<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${k}`,Q)}const re=/[^+/0-9A-Za-z-_]/g;function we(Q){if(Q=Q.split("=")[0],Q=Q.trim().replace(re,""),Q.length<2)return"";for(;Q.length%4!==0;)Q=Q+"=";return Q}function Ce(Q,k){k=k||1/0;let V;const j=Q.length;let qe=null;const Ze=[];for(let ze=0;ze<j;++ze){if(V=Q.charCodeAt(ze),V>55295&&V<57344){if(!qe){if(V>56319){(k-=3)>-1&&Ze.push(239,191,189);continue}else if(ze+1===j){(k-=3)>-1&&Ze.push(239,191,189);continue}qe=V;continue}if(V<56320){(k-=3)>-1&&Ze.push(239,191,189),qe=V;continue}V=(qe-55296<<10|V-56320)+65536}else qe&&(k-=3)>-1&&Ze.push(239,191,189);if(qe=null,V<128){if((k-=1)<0)break;Ze.push(V)}else if(V<2048){if((k-=2)<0)break;Ze.push(V>>6|192,V&63|128)}else if(V<65536){if((k-=3)<0)break;Ze.push(V>>12|224,V>>6&63|128,V&63|128)}else if(V<1114112){if((k-=4)<0)break;Ze.push(V>>18|240,V>>12&63|128,V>>6&63|128,V&63|128)}else throw new Error("Invalid code point")}return Ze}function at(Q){const k=[];for(let V=0;V<Q.length;++V)k.push(Q.charCodeAt(V)&255);return k}function Re(Q,k){let V,j,qe;const Ze=[];for(let ze=0;ze<Q.length&&!((k-=2)<0);++ze)V=Q.charCodeAt(ze),j=V>>8,qe=V%256,Ze.push(qe),Ze.push(j);return Ze}function ht(Q){return r.toByteArray(we(Q))}function Ct(Q,k,V,j){let qe;for(qe=0;qe<j&&!(qe+V>=k.length||qe>=Q.length);++qe)k[qe+V]=Q[qe];return qe}function vt(Q,k){return Q instanceof k||Q!=null&&Q.constructor!=null&&Q.constructor.name!=null&&Q.constructor.name===k.name}function We(Q){return Q!==Q}const $e=function(){const Q="0123456789abcdef",k=new Array(256);for(let V=0;V<16;++V){const j=V*16;for(let qe=0;qe<16;++qe)k[j+qe]=Q[V]+Q[qe]}return k}();function Oe(Q){return typeof BigInt>"u"?lt:Q}function lt(){throw new Error("BigInt not supported")}}(jm)),jm}var Vm,Yb;function vR(){if(Yb)return Vm;Yb=1;var{Buffer:t}=Ts(),r={},i=r.LEFT_BRACE=1,a=r.RIGHT_BRACE=2,s=r.LEFT_BRACKET=3,d=r.RIGHT_BRACKET=4,l=r.COLON=5,c=r.COMMA=6,p=r.TRUE=7,f=r.FALSE=8,m=r.NULL=9,b=r.STRING=10,_=r.NUMBER=11,A=r.START=17,T=r.STOP=18,x=r.TRUE1=33,P=r.TRUE2=34,R=r.TRUE3=35,F=r.FALSE1=49,I=r.FALSE2=50,$=r.FALSE3=51,B=r.FALSE4=52,W=r.NULL1=65,Y=r.NULL2=66,q=r.NULL3=67,Ie=r.NUMBER1=81,K=r.NUMBER3=83,ie=r.STRING1=97,ge=r.STRING2=98,Se=r.STRING3=99,et=r.STRING4=100,st=r.STRING5=101,Ne=r.STRING6=102,gt=r.VALUE=113,ve=r.KEY=114,tt=r.OBJECT=129,J=r.ARRAY=130,xe=92,Xe=47,je=8,dt=12,It=10,Mt=13,Me=9,le=64*1024;function Te(M){return t.alloc?t.alloc(M):new t(M)}function Je(){this.tState=A,this.value=void 0,this.string=void 0,this.stringBuffer=Te(le),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=gt,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:Te(2),3:Te(3),4:Te(4)},this.offset=-1}Je.toknam=function(M){for(var D=Object.keys(r),G=0,re=D.length;G<re;G++){var we=D[G];if(r[we]===M)return we}return M&&"0x"+M.toString(16)};var se=Je.prototype;return se.onError=function(M){throw M},se.charError=function(M,D){this.tState=T,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(M[D]))+" at position "+D+" in state "+Je.toknam(this.tState)))},se.appendStringChar=function(M){this.stringBufferOffset>=le&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=M},se.appendStringBuf=function(M,D,G){var re=M.length;typeof D=="number"&&(typeof G=="number"?G<0?re=M.length-D+G:re=G-D:re=M.length-D),re<0&&(re=0),this.stringBufferOffset+re>le&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),M.copy(this.stringBuffer,this.stringBufferOffset,D,G),this.stringBufferOffset+=re},se.write=function(M){typeof M=="string"&&(M=new t(M));for(var D,G=0,re=M.length;G<re;G++)if(this.tState===A){if(D=M[G],this.offset++,D===123)this.onToken(i,"{");else if(D===125)this.onToken(a,"}");else if(D===91)this.onToken(s,"[");else if(D===93)this.onToken(d,"]");else if(D===58)this.onToken(l,":");else if(D===44)this.onToken(c,",");else if(D===116)this.tState=x;else if(D===102)this.tState=F;else if(D===110)this.tState=W;else if(D===34)this.string="",this.stringBufferOffset=0,this.tState=ie;else if(D===45)this.string="-",this.tState=Ie;else if(D>=48&&D<64)this.string=String.fromCharCode(D),this.tState=K;else if(!(D===32||D===9||D===10||D===13))return this.charError(M,G)}else if(this.tState===ie)if(D=M[G],this.bytes_remaining>0){for(var we=0;we<this.bytes_remaining;we++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+we]=M[we];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,G=G+we-1}else if(this.bytes_remaining===0&&D>=128){if(D<=193||D>244)return this.onError(new Error("Invalid UTF-8 character at position "+G+" in state "+Je.toknam(this.tState)));if(D>=194&&D<=223&&(this.bytes_in_sequence=2),D>=224&&D<=239&&(this.bytes_in_sequence=3),D>=240&&D<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+G>M.length){for(var Ce=0;Ce<=M.length-1-G;Ce++)this.temp_buffs[this.bytes_in_sequence][Ce]=M[G+Ce];this.bytes_remaining=G+this.bytes_in_sequence-M.length,G=M.length-1}else this.appendStringBuf(M,G,G+this.bytes_in_sequence),G=G+this.bytes_in_sequence-1}else if(D===34)this.tState=A,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(b,this.string),this.offset+=t.byteLength(this.string,"utf8")+1,this.string=void 0;else if(D===92)this.tState=ge;else if(D>=32)this.appendStringChar(D);else return this.charError(M,G);else if(this.tState===ge)if(D=M[G],D===34)this.appendStringChar(D),this.tState=ie;else if(D===92)this.appendStringChar(xe),this.tState=ie;else if(D===47)this.appendStringChar(Xe),this.tState=ie;else if(D===98)this.appendStringChar(je),this.tState=ie;else if(D===102)this.appendStringChar(dt),this.tState=ie;else if(D===110)this.appendStringChar(It),this.tState=ie;else if(D===114)this.appendStringChar(Mt),this.tState=ie;else if(D===116)this.appendStringChar(Me),this.tState=ie;else if(D===117)this.unicode="",this.tState=Se;else return this.charError(M,G);else if(this.tState===Se||this.tState===et||this.tState===st||this.tState===Ne)if(D=M[G],D>=48&&D<64||D>64&&D<=70||D>96&&D<=102){if(this.unicode+=String.fromCharCode(D),this.tState++===Ne){var at=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&at>=56320&&at<57344?(this.appendStringBuf(new t(String.fromCharCode(this.highSurrogate,at))),this.highSurrogate=void 0):this.highSurrogate===void 0&&at>=55296&&at<56320?this.highSurrogate=at:(this.highSurrogate!==void 0&&(this.appendStringBuf(new t(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new t(String.fromCharCode(at)))),this.tState=ie}}else return this.charError(M,G);else if(this.tState===Ie||this.tState===K)switch(D=M[G],D){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(D),this.tState=K;break;default:this.tState=A;var Re=this.numberReviver(this.string,M,G);if(Re)return Re;this.offset+=this.string.length-1,this.string=void 0,G--;break}else if(this.tState===x)if(M[G]===114)this.tState=P;else return this.charError(M,G);else if(this.tState===P)if(M[G]===117)this.tState=R;else return this.charError(M,G);else if(this.tState===R)if(M[G]===101)this.tState=A,this.onToken(p,!0),this.offset+=3;else return this.charError(M,G);else if(this.tState===F)if(M[G]===97)this.tState=I;else return this.charError(M,G);else if(this.tState===I)if(M[G]===108)this.tState=$;else return this.charError(M,G);else if(this.tState===$)if(M[G]===115)this.tState=B;else return this.charError(M,G);else if(this.tState===B)if(M[G]===101)this.tState=A,this.onToken(f,!1),this.offset+=4;else return this.charError(M,G);else if(this.tState===W)if(M[G]===117)this.tState=Y;else return this.charError(M,G);else if(this.tState===Y)if(M[G]===108)this.tState=q;else return this.charError(M,G);else if(this.tState===q)if(M[G]===108)this.tState=A,this.onToken(m,null),this.offset+=3;else return this.charError(M,G)},se.onToken=function(M,D){},se.parseError=function(M,D){this.tState=T,this.onError(new Error("Unexpected "+Je.toknam(M)+(D?"("+JSON.stringify(D)+")":"")+" in state "+Je.toknam(this.state)))},se.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},se.pop=function(){var M=this.value,D=this.stack.pop();this.value=D.value,this.key=D.key,this.mode=D.mode,this.emit(M),this.mode||(this.state=gt)},se.emit=function(M){this.mode&&(this.state=c),this.onValue(M)},se.onValue=function(M){},se.onToken=function(M,D){if(this.state===gt)if(M===b||M===_||M===p||M===f||M===m)this.value&&(this.value[this.key]=D),this.emit(D);else if(M===i)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=ve,this.mode=tt;else if(M===s)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=J,this.state=gt;else if(M===a)if(this.mode===tt)this.pop();else return this.parseError(M,D);else if(M===d)if(this.mode===J)this.pop();else return this.parseError(M,D);else return this.parseError(M,D);else if(this.state===ve)if(M===b)this.key=D,this.state=l;else if(M===a)this.pop();else return this.parseError(M,D);else if(this.state===l)if(M===l)this.state=gt;else return this.parseError(M,D);else if(this.state===c)if(M===c)this.mode===J?(this.key++,this.state=gt):this.mode===tt&&(this.state=ve);else if(M===d&&this.mode===J||M===a&&this.mode===tt)this.pop();else return this.parseError(M,D);else return this.parseError(M,D)},se.numberReviver=function(M,D,G){var re=Number(M);if(isNaN(re))return this.charError(D,G);M.match(/[0-9]+/)==M&&re.toString()!=M?this.onToken(b,M):this.onToken(_,re)},Je.C=r,Vm=Je,Vm}var Qc={},Yh={},Km={},Qb;function zS(){return Qb||(Qb=1,function(){(function(t){(function(r){var i=typeof globalThis<"u"&&globalThis||typeof t<"u"&&t||typeof Lb<"u"&&Lb||{},a={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function s(K){return K&&DataView.prototype.isPrototypeOf(K)}if(a.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(K){return K&&d.indexOf(Object.prototype.toString.call(K))>-1};function c(K){if(typeof K!="string"&&(K=String(K)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(K)||K==="")throw new TypeError('Invalid character in header field name: "'+K+'"');return K.toLowerCase()}function p(K){return typeof K!="string"&&(K=String(K)),K}function f(K){var ie={next:function(){var ge=K.shift();return{done:ge===void 0,value:ge}}};return a.iterable&&(ie[Symbol.iterator]=function(){return ie}),ie}function m(K){this.map={},K instanceof m?K.forEach(function(ie,ge){this.append(ge,ie)},this):Array.isArray(K)?K.forEach(function(ie){if(ie.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+ie.length);this.append(ie[0],ie[1])},this):K&&Object.getOwnPropertyNames(K).forEach(function(ie){this.append(ie,K[ie])},this)}m.prototype.append=function(K,ie){K=c(K),ie=p(ie);var ge=this.map[K];this.map[K]=ge?ge+", "+ie:ie},m.prototype.delete=function(K){delete this.map[c(K)]},m.prototype.get=function(K){return K=c(K),this.has(K)?this.map[K]:null},m.prototype.has=function(K){return this.map.hasOwnProperty(c(K))},m.prototype.set=function(K,ie){this.map[c(K)]=p(ie)},m.prototype.forEach=function(K,ie){for(var ge in this.map)this.map.hasOwnProperty(ge)&&K.call(ie,this.map[ge],ge,this)},m.prototype.keys=function(){var K=[];return this.forEach(function(ie,ge){K.push(ge)}),f(K)},m.prototype.values=function(){var K=[];return this.forEach(function(ie){K.push(ie)}),f(K)},m.prototype.entries=function(){var K=[];return this.forEach(function(ie,ge){K.push([ge,ie])}),f(K)},a.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function b(K){if(!K._noBody){if(K.bodyUsed)return Promise.reject(new TypeError("Already read"));K.bodyUsed=!0}}function _(K){return new Promise(function(ie,ge){K.onload=function(){ie(K.result)},K.onerror=function(){ge(K.error)}})}function A(K){var ie=new FileReader,ge=_(ie);return ie.readAsArrayBuffer(K),ge}function T(K){var ie=new FileReader,ge=_(ie),Se=/charset=([A-Za-z0-9_-]+)/.exec(K.type),et=Se?Se[1]:"utf-8";return ie.readAsText(K,et),ge}function x(K){for(var ie=new Uint8Array(K),ge=new Array(ie.length),Se=0;Se<ie.length;Se++)ge[Se]=String.fromCharCode(ie[Se]);return ge.join("")}function P(K){if(K.slice)return K.slice(0);var ie=new Uint8Array(K.byteLength);return ie.set(new Uint8Array(K)),ie.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(K){this.bodyUsed=this.bodyUsed,this._bodyInit=K,K?typeof K=="string"?this._bodyText=K:a.blob&&Blob.prototype.isPrototypeOf(K)?this._bodyBlob=K:a.formData&&FormData.prototype.isPrototypeOf(K)?this._bodyFormData=K:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(K)?this._bodyText=K.toString():a.arrayBuffer&&a.blob&&s(K)?(this._bodyArrayBuffer=P(K.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(K)||l(K))?this._bodyArrayBuffer=P(K):this._bodyText=K=Object.prototype.toString.call(K):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof K=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(K)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var K=b(this);if(K)return K;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var K=b(this);return K||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(a.blob)return this.blob().then(A);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var K=b(this);if(K)return K;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function I(K){var ie=K.toUpperCase();return F.indexOf(ie)>-1?ie:K}function $(K,ie){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');ie=ie||{};var ge=ie.body;if(K instanceof $){if(K.bodyUsed)throw new TypeError("Already read");this.url=K.url,this.credentials=K.credentials,ie.headers||(this.headers=new m(K.headers)),this.method=K.method,this.mode=K.mode,this.signal=K.signal,!ge&&K._bodyInit!=null&&(ge=K._bodyInit,K.bodyUsed=!0)}else this.url=String(K);if(this.credentials=ie.credentials||this.credentials||"same-origin",(ie.headers||!this.headers)&&(this.headers=new m(ie.headers)),this.method=I(ie.method||this.method||"GET"),this.mode=ie.mode||this.mode||null,this.signal=ie.signal||this.signal||function(){if("AbortController"in i){var st=new AbortController;return st.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ge)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(ge),(this.method==="GET"||this.method==="HEAD")&&(ie.cache==="no-store"||ie.cache==="no-cache")){var Se=/([?&])_=[^&]*/;if(Se.test(this.url))this.url=this.url.replace(Se,"$1_="+new Date().getTime());else{var et=/\?/;this.url+=(et.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})};function B(K){var ie=new FormData;return K.trim().split("&").forEach(function(ge){if(ge){var Se=ge.split("="),et=Se.shift().replace(/\+/g," "),st=Se.join("=").replace(/\+/g," ");ie.append(decodeURIComponent(et),decodeURIComponent(st))}}),ie}function W(K){var ie=new m,ge=K.replace(/\r?\n[\t ]+/g," ");return ge.split("\r").map(function(Se){return Se.indexOf(`
`)===0?Se.substr(1,Se.length):Se}).forEach(function(Se){var et=Se.split(":"),st=et.shift().trim();if(st){var Ne=et.join(":").trim();try{ie.append(st,Ne)}catch(gt){console.warn("Response "+gt.message)}}}),ie}R.call($.prototype);function Y(K,ie){if(!(this instanceof Y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(ie||(ie={}),this.type="default",this.status=ie.status===void 0?200:ie.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=ie.statusText===void 0?"":""+ie.statusText,this.headers=new m(ie.headers),this.url=ie.url||"",this._initBody(K)}R.call(Y.prototype),Y.prototype.clone=function(){return new Y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},Y.error=function(){var K=new Y(null,{status:200,statusText:""});return K.ok=!1,K.status=0,K.type="error",K};var q=[301,302,303,307,308];Y.redirect=function(K,ie){if(q.indexOf(ie)===-1)throw new RangeError("Invalid status code");return new Y(null,{status:ie,headers:{location:K}})},r.DOMException=i.DOMException;try{new r.DOMException}catch{r.DOMException=function(ie,ge){this.message=ie,this.name=ge;var Se=Error(ie);this.stack=Se.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function Ie(K,ie){return new Promise(function(ge,Se){var et=new $(K,ie);if(et.signal&&et.signal.aborted)return Se(new r.DOMException("Aborted","AbortError"));var st=new XMLHttpRequest;function Ne(){st.abort()}st.onload=function(){var tt={statusText:st.statusText,headers:W(st.getAllResponseHeaders()||"")};et.url.indexOf("file://")===0&&(st.status<200||st.status>599)?tt.status=200:tt.status=st.status,tt.url="responseURL"in st?st.responseURL:tt.headers.get("X-Request-URL");var J="response"in st?st.response:st.responseText;setTimeout(function(){ge(new Y(J,tt))},0)},st.onerror=function(){setTimeout(function(){Se(new TypeError("Network request failed"))},0)},st.ontimeout=function(){setTimeout(function(){Se(new TypeError("Network request timed out"))},0)},st.onabort=function(){setTimeout(function(){Se(new r.DOMException("Aborted","AbortError"))},0)};function gt(tt){try{return tt===""&&i.location.href?i.location.href:tt}catch{return tt}}if(st.open(et.method,gt(et.url),!0),et.credentials==="include"?st.withCredentials=!0:et.credentials==="omit"&&(st.withCredentials=!1),"responseType"in st&&(a.blob?st.responseType="blob":a.arrayBuffer&&(st.responseType="arraybuffer")),ie&&typeof ie.headers=="object"&&!(ie.headers instanceof m||i.Headers&&ie.headers instanceof i.Headers)){var ve=[];Object.getOwnPropertyNames(ie.headers).forEach(function(tt){ve.push(c(tt)),st.setRequestHeader(tt,p(ie.headers[tt]))}),et.headers.forEach(function(tt,J){ve.indexOf(J)===-1&&st.setRequestHeader(J,tt)})}else et.headers.forEach(function(tt,J){st.setRequestHeader(J,tt)});et.signal&&(et.signal.addEventListener("abort",Ne),st.onreadystatechange=function(){st.readyState===4&&et.signal.removeEventListener("abort",Ne)}),st.send(typeof et._bodyInit>"u"?null:et._bodyInit)})}return Ie.polyfill=!0,i.fetch||(i.fetch=Ie,i.Headers=m,i.Request=$,i.Response=Y),r.Headers=m,r.Request=$,r.Response=Y,r.fetch=Ie,Object.defineProperty(r,"__esModule",{value:!0}),r})({})})(typeof self<"u"?self:Km)}()),Km}var Xc={},Rl={},Xb;function bR(){if(Xb)return Rl;Xb=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.removeDotSegmentsOfPath=Rl.removeDotSegments=Rl.resolve=void 0;function t(s,d){d=d||"";const l=d.indexOf("#");if(l>0&&(d=d.substr(0,l)),!s.length){if(d.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${d}' for value '${s}'`);return d}if(s.startsWith("?")){const A=d.indexOf("?");return A>0&&(d=d.substr(0,A)),d+s}if(s.startsWith("#"))return d+s;if(!d.length){const A=s.indexOf(":");if(A<0)throw new Error(`Found invalid relative IRI '${s}' for a missing baseIRI`);return i(s,A)}const c=s.indexOf(":");if(c>=0)return i(s,c);const p=d.indexOf(":");if(p<0)throw new Error(`Found invalid baseIRI '${d}' for value '${s}'`);const f=d.substr(0,p+1);if(s.indexOf("//")===0)return f+i(s,c);let m;if(d.indexOf("//",p)===p+1){if(m=d.indexOf("/",p+3),m<0)return d.length>p+3?d+"/"+i(s,c):f+i(s,c)}else if(m=d.indexOf("/",p+1),m<0)return f+i(s,c);if(s.indexOf("/")===0)return d.substr(0,m)+r(s);let b=d.substr(m);const _=b.lastIndexOf("/");return _>=0&&_<b.length-1&&(b=b.substr(0,_+1),s[0]==="."&&s[1]!=="."&&s[1]!=="/"&&s[2]&&(s=s.substr(1))),s=b+s,s=r(s),d.substr(0,m)+s}Rl.resolve=t;function r(s){const d=[];let l=0;for(;l<s.length;)switch(s[l]){case"/":if(s[l+1]===".")if(s[l+2]==="."){if(!a(s[l+3])){d.push([]),l++;break}d.pop(),s[l+3]||d.push([]),l+=3}else{if(!a(s[l+2])){d.push([]),l++;break}s[l+2]||d.push([]),l+=2}else d.push([]),l++;break;case"#":case"?":d.length||d.push([]),d[d.length-1].push(s.substr(l)),l=s.length;break;default:d.length||d.push([]),d[d.length-1].push(s[l]),l++;break}return"/"+d.map(c=>c.join("")).join("/")}Rl.removeDotSegments=r;function i(s,d){let l=d+1;d>=0?s[d+1]==="/"&&s[d+2]==="/"&&(l=d+3):s[0]==="/"&&s[1]==="/"&&(l=2);const c=s.indexOf("/",l);if(c<0)return s;const p=s.substr(0,c),f=s.substr(c);return p+r(f)}Rl.removeDotSegmentsOfPath=i;function a(s){return!s||s==="#"||s==="?"||s==="/"}return Rl}var Zb;function Av(){return Zb||(Zb=1,function(t){var r=Xc&&Xc.__createBinding||(Object.create?function(a,s,d,l){l===void 0&&(l=d),Object.defineProperty(a,l,{enumerable:!0,get:function(){return s[d]}})}:function(a,s,d,l){l===void 0&&(l=d),a[l]=s[d]}),i=Xc&&Xc.__exportStar||function(a,s){for(var d in a)d!=="default"&&!Object.prototype.hasOwnProperty.call(s,d)&&r(s,a,d)};Object.defineProperty(t,"__esModule",{value:!0}),i(bR(),t)}(Xc)),Xc}var Gm={},ew;function og(){return ew||(ew=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;class r extends Error{constructor(a,s){super(a),this.code=s}}t.ErrorCoded=r,function(i){i.COLLIDING_KEYWORDS="colliding keywords",i.CONFLICTING_INDEXES="conflicting indexes",i.CYCLIC_IRI_MAPPING="cyclic IRI mapping",i.INVALID_ID_VALUE="invalid @id value",i.INVALID_INDEX_VALUE="invalid @index value",i.INVALID_NEST_VALUE="invalid @nest value",i.INVALID_PREFIX_VALUE="invalid @prefix value",i.INVALID_PROPAGATE_VALUE="invalid @propagate value",i.INVALID_REVERSE_VALUE="invalid @reverse value",i.INVALID_IMPORT_VALUE="invalid @import value",i.INVALID_VERSION_VALUE="invalid @version value",i.INVALID_BASE_IRI="invalid base IRI",i.INVALID_CONTAINER_MAPPING="invalid container mapping",i.INVALID_CONTEXT_ENTRY="invalid context entry",i.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",i.INVALID_DEFAULT_LANGUAGE="invalid default language",i.INVALID_INCLUDED_VALUE="invalid @included value",i.INVALID_IRI_MAPPING="invalid IRI mapping",i.INVALID_JSON_LITERAL="invalid JSON literal",i.INVALID_KEYWORD_ALIAS="invalid keyword alias",i.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",i.INVALID_LANGUAGE_MAPPING="invalid language mapping",i.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",i.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",i.INVALID_LOCAL_CONTEXT="invalid local context",i.INVALID_REMOTE_CONTEXT="invalid remote context",i.INVALID_REVERSE_PROPERTY="invalid reverse property",i.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",i.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",i.INVALID_SCOPED_CONTEXT="invalid scoped context",i.INVALID_SCRIPT_ELEMENT="invalid script element",i.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",i.INVALID_TERM_DEFINITION="invalid term definition",i.INVALID_TYPE_MAPPING="invalid type mapping",i.INVALID_TYPE_VALUE="invalid type value",i.INVALID_TYPED_VALUE="invalid typed value",i.INVALID_VALUE_OBJECT="invalid value object",i.INVALID_VALUE_OBJECT_VALUE="invalid value object value",i.INVALID_VOCAB_MAPPING="invalid vocab mapping",i.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",i.KEYWORD_REDEFINITION="keyword redefinition",i.LOADING_DOCUMENT_FAILED="loading document failed",i.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",i.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",i.PROCESSING_MODE_CONFLICT="processing mode conflict",i.PROTECTED_TERM_REDEFINITION="protected term redefinition",i.CONTEXT_OVERFLOW="context overflow",i.INVALID_BASE_DIRECTION="invalid base direction",i.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",i.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",i.INVALID_EMBEDDED_NODE="invalid embedded node",i.INVALID_ANNOTATION="invalid annotation"}(t.ERROR_CODES||(t.ERROR_CODES={}))}(Gm)),Gm}var Qh={},$m,tw;function Rv(){if(tw)return $m;tw=1;var t=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,i=/\s|\uFEFF|\xA0/,a=/\r?\n[\x20\x09]+/g,s=/[;,"]/,d=/[;,"]|\s/,l=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,c={IDLE:1,URI:2,ATTR:4};function p(T){return T.replace(r,"")}function f(T){return i.test(T)}function m(T,x){for(;f(T[x]);)x++;return x}function b(T){return d.test(T)||!l.test(T)}function _(T,x){return Object.keys(T).length===Object.keys(x).length&&Object.keys(T).every(P=>P in x&&T[P]===x[P])}class A{constructor(x){this.refs=[],x&&this.parse(x)}rel(x){for(var P=[],R=x.toLowerCase(),F=0;F<this.refs.length;F++)typeof this.refs[F].rel=="string"&&this.refs[F].rel.toLowerCase()===R&&P.push(this.refs[F]);return P}get(x,P){x=x.toLowerCase(),P=P.toLowerCase();for(var R=[],F=0;F<this.refs.length;F++)typeof this.refs[F][x]=="string"&&this.refs[F][x].toLowerCase()===P&&R.push(this.refs[F]);return R}set(x){return this.refs.push(x),this}setUnique(x){return this.refs.some(P=>_(P,x))||this.refs.push(x),this}has(x,P){x=x.toLowerCase(),P=P.toLowerCase();for(var R=0;R<this.refs.length;R++)if(typeof this.refs[R][x]=="string"&&this.refs[R][x].toLowerCase()===P)return!0;return!1}parse(x,I){I=I||0,x=I?x.slice(I):x,x=p(x).replace(a,"");for(var R=c.IDLE,F=x.length,I=0,$=null;I<F;)if(R===c.IDLE){if(f(x[I])){I++;continue}else if(x[I]==="<"){$!=null&&($.rel!=null?this.refs.push(...A.expandRelations($)):this.refs.push($));var B=x.indexOf(">",I);if(B===-1)throw new Error("Expected end of URI delimiter at offset "+I);$={uri:x.slice(I+1,B)},I=B,R=c.URI}else throw new Error('Unexpected character "'+x[I]+'" at offset '+I);I++}else if(R===c.URI)if(f(x[I])){I++;continue}else if(x[I]===";")R=c.ATTR,I++;else if(x[I]===",")R=c.IDLE,I++;else throw new Error('Unexpected character "'+x[I]+'" at offset '+I);else if(R===c.ATTR){if(x[I]===";"||f(x[I])){I++;continue}var B=x.indexOf("=",I);B===-1&&(B=x.indexOf(";",I)),B===-1&&(B=x.length);var W=p(x.slice(I,B)).toLowerCase(),Y="";if(I=B+1,I=m(x,I),x[I]==='"')for(I++;I<F;){if(x[I]==='"'){I++;break}x[I]==="\\"&&I++,Y+=x[I],I++}else{for(var B=I+1;!s.test(x[B])&&B<F;)B++;Y=x.slice(I,B),I=B}switch($[W]&&A.isSingleOccurenceAttr(W)||(W[W.length-1]==="*"?$[W]=A.parseExtendedValue(Y):(Y=W==="type"?Y.toLowerCase():Y,$[W]!=null?Array.isArray($[W])?$[W].push(Y):$[W]=[$[W],Y]:$[W]=Y)),x[I]){case",":R=c.IDLE;break;case";":R=c.ATTR;break}I++}else throw new Error('Unknown parser state "'+R+'"');return $!=null&&($.rel!=null?this.refs.push(...A.expandRelations($)):this.refs.push($)),$=null,this}toString(){for(var x=[],P="",R=null,F=0;F<this.refs.length;F++)R=this.refs[F],P=Object.keys(this.refs[F]).reduce(function(I,$){return $==="uri"?I:I+"; "+A.formatAttribute($,R[$])},"<"+R.uri+">"),x.push(P);return x.join(", ")}}return A.isCompatibleEncoding=function(T){return t.test(T)},A.parse=function(T,x){return new A().parse(T,x)},A.isSingleOccurenceAttr=function(T){return T==="rel"||T==="type"||T==="media"||T==="title"||T==="title*"},A.isTokenAttr=function(T){return T==="rel"||T==="type"||T==="anchor"},A.escapeQuotes=function(T){return T.replace(/"/g,'\\"')},A.expandRelations=function(T){var x=T.rel.split(" ");return x.map(function(P){var R=Object.assign({},T);return R.rel=P,R})},A.parseExtendedValue=function(T){var x=/([^']+)?(?:'([^']*)')?(.+)/.exec(T);return{language:x[2].toLowerCase(),encoding:A.isCompatibleEncoding(x[1])?null:x[1].toLowerCase(),value:A.isCompatibleEncoding(x[1])?decodeURIComponent(x[3]):x[3]}},A.formatExtendedAttribute=function(T,x){var P=(x.encoding||"utf-8").toUpperCase(),R=x.language||"en",F="";return Buffer.isBuffer(x.value)&&A.isCompatibleEncoding(P)?F=x.value.toString(P):Buffer.isBuffer(x.value)?F=x.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):F=encodeURIComponent(x.value),T+"="+P+"'"+R+"'"+F},A.formatAttribute=function(T,x){return Array.isArray(x)?x.map(P=>A.formatAttribute(T,P)).join("; "):T[T.length-1]==="*"||typeof x!="string"?A.formatExtendedAttribute(T,x):(A.isTokenAttr(T)?x=b(x)?'"'+A.escapeQuotes(x)+'"':A.escapeQuotes(x):b(x)&&(x=encodeURIComponent(x),x=x.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),x='"'+x+'"'),T+"="+x)},$m=A,$m}var rw;function WS(){if(rw)return Qh;rw=1,Object.defineProperty(Qh,"__esModule",{value:!0}),Qh.FetchDocumentLoader=void 0,zS();const t=og(),r=Rv(),i=Av();let a=class{constructor(d){this.fetcher=d}async load(d){const l=await(this.fetcher||fetch)(d,{headers:new Headers({accept:"application/ld+json"})});if(l.ok&&l.headers){let c=l.headers.get("Content-Type");if(c){const p=c.indexOf(";");p>0&&(c=c.substr(0,p))}if(c==="application/ld+json")return await l.json();if(l.headers.has("Link")){let p;if(l.headers.forEach((f,m)=>{if(m==="link"){const b=(0,r.parse)(f);for(const _ of b.get("type","application/ld+json"))if(_.rel==="alternate"){if(p)throw new Error("Multiple JSON-LD alternate links were found on "+d);p=(0,i.resolve)(_.uri,d)}}}),p)return this.load(p)}throw new t.ErrorCoded(`Unsupported JSON-LD media type ${c}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(l.statusText||`Status code: ${l.status}`)}};return Qh.FetchDocumentLoader=a,Qh}var qm={},Xh={},nw;function xv(){if(nw)return Xh;nw=1,Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.Util=void 0;class t{static isCompactIri(i){return i.indexOf(":")>0&&!(i&&i[0]==="#")}static getPrefix(i,a){if(i&&i[0]==="#")return null;const s=i.indexOf(":");if(s>=0){if(i.length>s+1&&i.charAt(s+1)==="/"&&i.charAt(s+2)==="/")return null;const d=i.substr(0,s);if(d==="_")return null;if(a[d])return d}return null}static getContextValueId(i){if(i===null||typeof i=="string")return i;const a=i["@id"];return a||null}static isSimpleTermDefinitionPrefix(i,a){return!t.isPotentialKeyword(i)&&(a.allowPrefixNonGenDelims||typeof i=="string"&&(i[0]==="_"||t.isPrefixIriEndingWithGenDelim(i)))}static isPotentialKeyword(i){return typeof i=="string"&&t.KEYWORD_REGEX.test(i)}static isPrefixIriEndingWithGenDelim(i){return t.ENDS_WITH_GEN_DELIM.test(i)}static isPrefixValue(i){return i&&(typeof i=="string"||i&&typeof i=="object")}static isValidIri(i){return!!(i&&t.IRI_REGEX.test(i))}static isValidIriWeak(i){return!!i&&i[0]!==":"&&t.IRI_REGEX_WEAK.test(i)}static isValidKeyword(i){return t.VALID_KEYWORDS[i]}static isTermProtected(i,a){const s=i[a];return typeof s!="string"&&s&&s["@protected"]}static hasProtectedTerms(i){for(const a of Object.keys(i))if(t.isTermProtected(i,a))return!0;return!1}static isReservedInternalKeyword(i){return i.startsWith("@__")}static deepEqual(i,a){const s=Object.keys(i),d=Object.keys(a);return s.length!==d.length?!1:s.every(l=>{const c=i[l],p=a[l];return c===p||c!==null&&p!==null&&typeof c=="object"&&typeof p=="object"&&this.deepEqual(c,p)})}}return t.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,t.IRI_REGEX_WEAK=/(?::[^:])|\//,t.KEYWORD_REGEX=/^@[a-z]+$/i,t.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,t.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,t.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,t.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},t.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],t.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],t.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],t.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],t.CONTAINERS_1_0=["@list","@set","@index"],Xh.Util=t,Xh}var iw;function JS(){return iw||(iw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.JsonLdContextNormalized=void 0;const r=Av(),i=og(),a=xv();class s{constructor(l){this.contextRaw=l}getContextRaw(){return this.contextRaw}expandTerm(l,c,p=t.defaultExpandOptions){const f=this.contextRaw[l];if(f===null||f&&f["@id"]===null)return null;let m=!0;if(f&&c){const P=a.Util.getContextValueId(f);if(P&&P!==l)if(typeof P!="string"||!a.Util.isValidIri(P)&&!a.Util.isValidKeyword(P))a.Util.isPotentialKeyword(P)||(m=!1);else return P}const b=a.Util.getPrefix(l,this.contextRaw),_=this.contextRaw["@vocab"],A=(!!_||_==="")&&_.indexOf(":")<0,T=this.contextRaw["@base"],x=a.Util.isPotentialKeyword(l);if(b){const P=this.contextRaw[b],R=a.Util.getContextValueId(P);if(R){if(typeof P=="string"||!p.allowPrefixForcing){if(!a.Util.isSimpleTermDefinitionPrefix(R,p))return l}else if(R[0]!=="_"&&!x&&!P["@prefix"]&&!(l in this.contextRaw))return l;return R+l.substr(b.length+1)}}else if(c&&(_||_===""||p.allowVocabRelativeToBase&&T&&A)&&!x&&!a.Util.isCompactIri(l))if(A){if(p.allowVocabRelativeToBase)return(_||T?(0,r.resolve)(_,T):"")+l;throw new i.ErrorCoded(`Relative vocab expansion for term '${l}' with vocab '${_}' is not allowed.`,i.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return _+l;else if(!c&&T&&!x&&!a.Util.isCompactIri(l))return(0,r.resolve)(l,T);if(m)return l;throw new i.ErrorCoded(`Invalid IRI mapping found for context entry '${l}': '${JSON.stringify(f)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(l,c){if(c&&this.contextRaw["@vocab"]&&l.startsWith(this.contextRaw["@vocab"]))return l.substr(this.contextRaw["@vocab"].length);if(!c&&this.contextRaw["@base"]&&l.startsWith(this.contextRaw["@base"]))return l.substr(this.contextRaw["@base"].length);const p={prefix:"",suffix:l};for(const f in this.contextRaw){const m=this.contextRaw[f];if(m&&!a.Util.isPotentialKeyword(f)){const b=a.Util.getContextValueId(m);if(l.startsWith(b)){const _=l.substr(b.length);if(_)_.length<p.suffix.length&&(p.prefix=f,p.suffix=_);else if(c)return f}}}return p.prefix?p.prefix+":"+p.suffix:l}}t.JsonLdContextNormalized=s,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(qm)),qm}var aw;function wR(){if(aw)return Yh;aw=1,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.ContextParser=void 0,zS();const t=Av(),r=og(),i=WS(),a=JS(),s=xv();let d=class tf{constructor(c){c=c||{},this.documentLoader=c.documentLoader||new i.FetchDocumentLoader,this.documentCache={},this.validateContext=!c.skipValidation,this.expandContentTypeToBase=!!c.expandContentTypeToBase,this.remoteContextsDepthLimit=c.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in c?!!c.redirectSchemaOrgHttps:!0}static validateLanguage(c,p,f){if(typeof c!="string")throw new r.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(c)}'`,f);if(!s.Util.REGEX_LANGUAGE_TAG.test(c)){if(p)throw new r.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(c)}'`,f);return!1}return!0}static validateDirection(c,p){if(typeof c!="string")throw new r.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(c)}'`,r.ERROR_CODES.INVALID_BASE_DIRECTION);if(!s.Util.REGEX_DIRECTION_TAG.test(c)){if(p)throw new r.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(c)}'`,r.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(c){for(const p of Object.keys(c)){let f=c[p];if(f&&typeof f=="object"&&f["@reverse"]&&!f["@id"]){if(typeof f["@reverse"]!="string"||s.Util.isValidKeyword(f["@reverse"]))throw new r.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${f["@reverse"]}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);f=c[p]=Object.assign(Object.assign({},f),{"@id":f["@reverse"]}),f["@id"]=f["@reverse"],s.Util.isPotentialKeyword(f["@reverse"])?delete f["@reverse"]:f["@reverse"]=!0}}return c}expandPrefixedTerms(c,p,f){const m=c.getContextRaw();for(const b of f||Object.keys(m))if(s.Util.EXPAND_KEYS_BLACKLIST.indexOf(b)<0&&!s.Util.isReservedInternalKeyword(b)){const _=m[b];if(s.Util.isPotentialKeyword(b)&&s.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(b)>=0&&(b!=="@type"||typeof m[b]=="object"&&!(m[b]["@protected"]||m[b]["@container"]==="@set")))throw new r.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${b} to ${JSON.stringify(_)}`,r.ERROR_CODES.KEYWORD_REDEFINITION);if(s.Util.ALIAS_RANGE_BLACKLIST.indexOf(s.Util.getContextValueId(_))>=0)throw new r.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${b} to ${JSON.stringify(_)}`,r.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(_&&s.Util.isPotentialKeyword(s.Util.getContextValueId(_))&&_["@prefix"]===!0)throw new r.ErrorCoded(`Tried to use keyword aliases as prefix: '${b}': '${JSON.stringify(_)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);for(;s.Util.isPrefixValue(m[b]);){const A=m[b];let T=!1;if(typeof A=="string")m[b]=c.expandTerm(A,!0),T=T||A!==m[b];else{const x=A["@id"],P=A["@type"],R=!("@prefix"in A)||s.Util.isValidIri(b);if("@id"in A)x!=null&&typeof x=="string"&&(m[b]=Object.assign(Object.assign({},m[b]),{"@id":c.expandTerm(x,!0)}),T=T||x!==m[b]["@id"]);else if(!s.Util.isPotentialKeyword(b)&&R){const F=c.expandTerm(b,!0);F!==b&&(m[b]=Object.assign(Object.assign({},m[b]),{"@id":F}),T=!0)}if(P&&typeof P=="string"&&P!=="@vocab"&&(!A["@container"]||!A["@container"]["@type"])&&R){let F=c.expandTerm(P,!0);p&&P===F&&(F=c.expandTerm(P,!1)),F!==P&&(T=!0,m[b]=Object.assign(Object.assign({},m[b]),{"@type":F}))}}if(!T)break}}}normalize(c,{processingMode:p,normalizeLanguageTags:f}){if(f||p===1)for(const m of Object.keys(c))if(m==="@language"&&typeof c[m]=="string")c[m]=c[m].toLowerCase();else{const b=c[m];if(b&&typeof b=="object"&&typeof b["@language"]=="string"){const _=b["@language"].toLowerCase();_!==b["@language"]&&(c[m]=Object.assign(Object.assign({},b),{"@language":_}))}}}containersToHash(c){for(const p of Object.keys(c)){const f=c[p];if(f&&typeof f=="object"){if(typeof f["@container"]=="string")c[p]=Object.assign(Object.assign({},f),{"@container":{[f["@container"]]:!0}});else if(Array.isArray(f["@container"])){const m={};for(const b of f["@container"])m[b]=!0;c[p]=Object.assign(Object.assign({},f),{"@container":m})}}}}applyScopedProtected(c,{processingMode:p},f){if(p&&p>=1.1&&c["@protected"]){for(const m of Object.keys(c))if(!s.Util.isReservedInternalKeyword(m)&&!s.Util.isPotentialKeyword(m)&&!s.Util.isTermProtected(c,m)){const b=c[m];b&&typeof b=="object"?"@protected"in c[m]||(c[m]=Object.assign(Object.assign({},c[m]),{"@protected":!0})):(c[m]={"@id":b,"@protected":!0},s.Util.isSimpleTermDefinitionPrefix(b,f)&&(c[m]=Object.assign(Object.assign({},c[m]),{"@prefix":!0})))}delete c["@protected"]}}validateKeywordRedefinitions(c,p,f,m){for(const b of m??Object.keys(p))if(s.Util.isTermProtected(c,b)&&(typeof p[b]=="string"?p[b]={"@id":p[b],"@protected":!0}:p[b]=Object.assign(Object.assign({},p[b]),{"@protected":!0}),!s.Util.deepEqual(c[b],p[b])))throw new r.ErrorCoded(`Attempted to override the protected keyword ${b} from ${JSON.stringify(s.Util.getContextValueId(c[b]))} to ${JSON.stringify(s.Util.getContextValueId(p[b]))}`,r.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(c,{processingMode:p}){for(const f of Object.keys(c)){if(s.Util.isReservedInternalKeyword(f))continue;if(f==="")throw new r.ErrorCoded(`The empty term is not allowed, got: '${f}': '${JSON.stringify(c[f])}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);const m=c[f],b=typeof m;if(s.Util.isPotentialKeyword(f)){switch(f.substr(1)){case"vocab":if(m!==null&&b!=="string")throw new r.ErrorCoded(`Found an invalid @vocab IRI: ${m}`,r.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(m!==null&&b!=="string")throw new r.ErrorCoded(`Found an invalid @base IRI: ${c[f]}`,r.ERROR_CODES.INVALID_BASE_IRI);break;case"language":m!==null&&tf.validateLanguage(m,!0,r.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(m!==null&&b!=="number")throw new r.ErrorCoded(`Found an invalid @version number: ${m}`,r.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":m!==null&&tf.validateDirection(m,!0);break;case"propagate":if(p===1)throw new r.ErrorCoded(`Found an illegal @propagate keyword: ${m}`,r.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(m!==null&&b!=="boolean")throw new r.ErrorCoded(`Found an invalid @propagate value: ${m}`,r.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(s.Util.isValidKeyword(f)&&s.Util.isValidKeyword(s.Util.getContextValueId(m)))throw new r.ErrorCoded(`Illegal keyword alias in term value, found: '${f}': '${s.Util.getContextValueId(m)}'`,r.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(m!==null)switch(b){case"string":if(s.Util.getPrefix(m,c)===f)throw new r.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${f}': '${JSON.stringify(m)}'`,r.ERROR_CODES.CYCLIC_IRI_MAPPING);if(s.Util.isValidIriWeak(f)){if(m==="@type")throw new r.ErrorCoded(`IRIs can not be mapped to @type, found: '${f}': '${m}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(s.Util.isValidIri(m)&&m!==new a.JsonLdContextNormalized(c).expandTerm(f))throw new r.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${f}': '${m}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!s.Util.isCompactIri(f)&&!("@id"in m)&&(m["@type"]==="@id"?!c["@base"]:!c["@vocab"]))throw new r.ErrorCoded(`Missing @id in context entry: '${f}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);for(const _ of Object.keys(m)){const A=m[_];if(A)switch(_){case"@id":if(s.Util.isValidKeyword(A)&&A!=="@type"&&A!=="@id"&&A!=="@graph"&&A!=="@nest")throw new r.ErrorCoded(`Illegal keyword alias in term value, found: '${f}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(s.Util.isValidIriWeak(f)){if(A==="@type")throw new r.ErrorCoded(`IRIs can not be mapped to @type, found: '${f}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(s.Util.isValidIri(A)&&A!==new a.JsonLdContextNormalized(c).expandTerm(f))throw new r.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${f}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof A!="string")throw new r.ErrorCoded(`Detected non-string @id in context entry: '${f}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(s.Util.getPrefix(A,c)===f)throw new r.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${f}': '${JSON.stringify(m)}'`,r.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(m["@container"]==="@type"&&A!=="@id"&&A!=="@vocab")throw new r.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${f}': '${A}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof A!="string")throw new r.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(b)}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);if(A!=="@id"&&A!=="@vocab"&&(p===1||A!=="@json")&&(p===1||A!=="@none")&&(A[0]==="_"||!s.Util.isValidIri(A)))throw new r.ErrorCoded(`A context @type must be an absolute IRI, found: '${f}': '${A}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof A=="string"&&m["@id"]&&m["@id"]!==A)throw new r.ErrorCoded(`Found non-matching @id and @reverse term values in '${f}':'${A}' and '${m["@id"]}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in m)throw new r.ErrorCoded(`@nest is not allowed in the reverse property '${f}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(p===1&&(Object.keys(A).length>1||s.Util.CONTAINERS_1_0.indexOf(Object.keys(A)[0])<0))throw new r.ErrorCoded(`Invalid term @container for '${f}' ('${Object.keys(A)}') in 1.0, must be only one of ${s.Util.CONTAINERS_1_0.join(", ")}`,r.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const T of Object.keys(A)){if(T==="@list"&&m["@reverse"])throw new r.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${f}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(s.Util.CONTAINERS.indexOf(T)<0)throw new r.ErrorCoded(`Invalid term @container for '${f}' ('${T}'), must be one of ${s.Util.CONTAINERS.join(", ")}`,r.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":tf.validateLanguage(A,!0,r.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":tf.validateDirection(A,!0);break;case"@prefix":if(A!==null&&typeof A!="boolean")throw new r.ErrorCoded(`Found an invalid term @prefix boolean in: '${f}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in m)&&!s.Util.isValidIri(f))throw new r.ErrorCoded(`Invalid @prefix definition for '${f}' ('${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(p===1||!m["@container"]||!m["@container"]["@index"])throw new r.ErrorCoded(`Attempt to add illegal key to value object: '${f}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(s.Util.isPotentialKeyword(A)&&A!=="@nest")throw new r.ErrorCoded(`Found an invalid term @nest value in: '${f}': '${JSON.stringify(m)}'`,r.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new r.ErrorCoded(`Found an invalid term value: '${f}': '${m}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(c,p,f){return typeof c=="string"||(f&&!("@base"in c)&&p.parentContext&&typeof p.parentContext=="object"&&"@base"in p.parentContext&&(c["@base"]=p.parentContext["@base"],p.parentContext["@__baseDocument"]&&(c["@__baseDocument"]=!0)),p.baseIRI&&!p.external&&("@base"in c?c["@base"]!==null&&typeof c["@base"]=="string"&&!s.Util.isValidIri(c["@base"])&&(c["@base"]=(0,t.resolve)(c["@base"],p.parentContext&&p.parentContext["@base"]||p.baseIRI)):(c["@base"]=p.baseIRI,c["@__baseDocument"]=!0))),c}normalizeContextIri(c,p){if(!s.Util.isValidIri(c))try{c=(0,t.resolve)(c,p)}catch{throw new Error(`Invalid context IRI: ${c}`)}return this.redirectSchemaOrgHttps&&c.startsWith("http://schema.org")&&(c="https://schema.org/"),c}async parseInnerContexts(c,p,f){for(const m of f??Object.keys(c)){const b=c[m];if(b&&typeof b=="object"&&"@context"in b&&b["@context"]!==null&&!p.ignoreScopedContexts){if(this.validateContext)try{const _=Object.assign(Object.assign({},c),{[m]:Object.assign({},c[m])});delete _[m]["@context"],await this.parse(b["@context"],Object.assign(Object.assign({},p),{external:!1,parentContext:_,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(_){throw new r.ErrorCoded(_.message,r.ERROR_CODES.INVALID_SCOPED_CONTEXT)}c[m]=Object.assign(Object.assign({},b),{"@context":(await this.parse(b["@context"],Object.assign(Object.assign({},p),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:c}))).getContextRaw()})}}return c}async parse(c,p={},f={}){const{baseIRI:m,parentContext:b,external:_,processingMode:A=tf.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:T,ignoreProtection:x,minimalProcessing:P}=p,R=p.remoteContexts||{};if(Object.keys(R).length>=this.remoteContextsDepthLimit)throw new r.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(R),r.ERROR_CODES.CONTEXT_OVERFLOW);if(c==null){if(!x&&b&&s.Util.hasProtectedTerms(b))throw new r.ErrorCoded("Illegal context nullification when terms are protected",r.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new a.JsonLdContextNormalized(this.applyBaseEntry({},p,!1))}else if(typeof c=="string"){const F=this.normalizeContextIri(c,m),I=this.getOverriddenLoad(F,p);if(I)return new a.JsonLdContextNormalized(I);const $=await this.parse(await this.load(F),Object.assign(Object.assign({},p),{baseIRI:F,external:!0,remoteContexts:Object.assign(Object.assign({},R),{[F]:!0})}));return this.applyBaseEntry($.getContextRaw(),p,!0),$}else if(Array.isArray(c)){const F=[],I=await Promise.all(c.map((B,W)=>{if(typeof B=="string"){const Y=this.normalizeContextIri(B,m);F[W]=Y;const q=this.getOverriddenLoad(Y,p);return q||this.load(Y)}else return B}));if(P)return new a.JsonLdContextNormalized(I);const $=await I.reduce((B,W,Y)=>B.then(q=>this.parse(W,Object.assign(Object.assign({},p),{baseIRI:F[Y]||p.baseIRI,external:!!F[Y]||p.external,parentContext:q.getContextRaw(),remoteContexts:F[Y]?Object.assign(Object.assign({},R),{[F[Y]]:!0}):R}),{skipValidation:Y<I.length-1})),Promise.resolve(new a.JsonLdContextNormalized(b||{})));return this.applyBaseEntry($.getContextRaw(),p,!0),$}else if(typeof c=="object"){if("@context"in c)return await this.parse(c["@context"],p);if(c=Object.assign({},c),_&&delete c["@base"],this.applyBaseEntry(c,p,!0),this.containersToHash(c),P)return new a.JsonLdContextNormalized(c);let F={};if("@import"in c)if(A>=1.1){if(typeof c["@import"]!="string")throw new r.ErrorCoded("An @import value must be a string, but got "+typeof c["@import"],r.ERROR_CODES.INVALID_IMPORT_VALUE);F=await this.loadImportContext(this.normalizeContextIri(c["@import"],m)),delete c["@import"]}else throw new r.ErrorCoded("Context importing is not supported in JSON-LD 1.0",r.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(F,{processingMode:A},a.defaultExpandOptions);const I=Object.assign(F,c);this.idifyReverseTerms(I),this.normalize(I,{processingMode:A,normalizeLanguageTags:T}),this.applyScopedProtected(I,{processingMode:A},a.defaultExpandOptions);const $=Object.keys(I),B=[];if(typeof b=="object")for(const Y in b)Y in I?B.push(Y):I[Y]=b[Y];await this.parseInnerContexts(I,p,$);const W=new a.JsonLdContextNormalized(I);return(I&&I["@version"]||tf.DEFAULT_PROCESSING_MODE)>=1.1&&(c["@vocab"]&&typeof c["@vocab"]=="string"||c["@vocab"]==="")&&(b&&"@vocab"in b&&c["@vocab"].indexOf(":")<0?I["@vocab"]=b["@vocab"]+c["@vocab"]:(s.Util.isCompactIri(c["@vocab"])||c["@vocab"]in I)&&(I["@vocab"]=W.expandTerm(c["@vocab"],!0))),this.expandPrefixedTerms(W,this.expandContentTypeToBase,$),!x&&b&&A>=1.1&&this.validateKeywordRedefinitions(b,I,a.defaultExpandOptions,B),this.validateContext&&!f.skipValidation&&this.validate(I,{processingMode:A}),W}else throw new r.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${c}`,r.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(c){const p=this.documentCache[c];if(p)return p;let f;try{f=await this.documentLoader.load(c)}catch(m){throw new r.ErrorCoded(`Failed to load remote context ${c}: ${m.message}`,r.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in f))throw new r.ErrorCoded(`Missing @context in remote context at ${c}`,r.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[c]=f["@context"]}getOverriddenLoad(c,p){if(c in(p.remoteContexts||{})){if(p.ignoreRemoteScopedContexts)return c;throw new r.ErrorCoded("Detected a cyclic context inclusion of "+c,r.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(c){let p=await this.load(c);if(typeof p!="object"||Array.isArray(p))throw new r.ErrorCoded("An imported context must be a single object: "+c,r.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in p)throw new r.ErrorCoded("An imported context can not import another context: "+c,r.ERROR_CODES.INVALID_CONTEXT_ENTRY);return p=Object.assign({},p),this.containersToHash(p),p}};return d.DEFAULT_PROCESSING_MODE=1.1,Yh.ContextParser=d,Yh}var zm={},ow;function _R(){return ow||(ow=1,Object.defineProperty(zm,"__esModule",{value:!0})),zm}var Wm={},sw;function SR(){return sw||(sw=1,Object.defineProperty(Wm,"__esModule",{value:!0})),Wm}var lw;function Ea(){return lw||(lw=1,function(t){var r=Qc&&Qc.__createBinding||(Object.create?function(a,s,d,l){l===void 0&&(l=d);var c=Object.getOwnPropertyDescriptor(s,d);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,l,c)}:function(a,s,d,l){l===void 0&&(l=d),a[l]=s[d]}),i=Qc&&Qc.__exportStar||function(a,s){for(var d in a)d!=="default"&&!Object.prototype.hasOwnProperty.call(s,d)&&r(s,a,d)};Object.defineProperty(t,"__esModule",{value:!0}),i(wR(),t),i(og(),t),i(WS(),t),i(_R(),t),i(SR(),t),i(JS(),t),i(xv(),t)}(Qc)),Qc}var Jm={exports:{}},Ym={exports:{}},Qm,uw;function hi(){if(uw)return Qm;uw=1;class t extends Error{constructor(i){if(!Array.isArray(i))throw new TypeError(`Expected input to be an Array, got ${typeof i}`);let a="";for(let s=0;s<i.length;s++)a+=`    ${i[s].stack}
`;super(a),this.name="AggregateError",this.errors=i}}return Qm={AggregateError:t,ArrayIsArray(r){return Array.isArray(r)},ArrayPrototypeIncludes(r,i){return r.includes(i)},ArrayPrototypeIndexOf(r,i){return r.indexOf(i)},ArrayPrototypeJoin(r,i){return r.join(i)},ArrayPrototypeMap(r,i){return r.map(i)},ArrayPrototypePop(r,i){return r.pop(i)},ArrayPrototypePush(r,i){return r.push(i)},ArrayPrototypeSlice(r,i,a){return r.slice(i,a)},Error,FunctionPrototypeCall(r,i,...a){return r.call(i,...a)},FunctionPrototypeSymbolHasInstance(r,i){return Function.prototype[Symbol.hasInstance].call(r,i)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(r,i){return Object.defineProperties(r,i)},ObjectDefineProperty(r,i,a){return Object.defineProperty(r,i,a)},ObjectGetOwnPropertyDescriptor(r,i){return Object.getOwnPropertyDescriptor(r,i)},ObjectKeys(r){return Object.keys(r)},ObjectSetPrototypeOf(r,i){return Object.setPrototypeOf(r,i)},Promise,PromisePrototypeCatch(r,i){return r.catch(i)},PromisePrototypeThen(r,i,a){return r.then(i,a)},PromiseReject(r){return Promise.reject(r)},PromiseResolve(r){return Promise.resolve(r)},ReflectApply:Reflect.apply,RegExpPrototypeTest(r,i){return r.test(i)},SafeSet:Set,String,StringPrototypeSlice(r,i,a){return r.slice(i,a)},StringPrototypeToLowerCase(r){return r.toLowerCase()},StringPrototypeToUpperCase(r){return r.toUpperCase()},StringPrototypeTrim(r){return r.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(r,i,a){return r.set(i,a)},Boolean,Uint8Array},Qm}var Xm={exports:{}},Zm,cw;function YS(){return cw||(cw=1,Zm={format(t,...r){return t.replace(/%([sdifj])/g,function(...[i,a]){const s=r.shift();return a==="f"?s.toFixed(6):a==="j"?JSON.stringify(s):a==="s"&&typeof s=="object"?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}),Zm}var e0,fw;function Aa(){if(fw)return e0;fw=1;const{format:t,inspect:r}=YS(),{AggregateError:i}=hi(),a=globalThis.AggregateError||i,s=Symbol("kIsNodeError"),d=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,c="__node_internal_",p={};function f(P,R){if(!P)throw new p.ERR_INTERNAL_ASSERTION(R)}function m(P){let R="",F=P.length;const I=P[0]==="-"?1:0;for(;F>=I+4;F-=3)R=`_${P.slice(F-3,F)}${R}`;return`${P.slice(0,F)}${R}`}function b(P,R,F){if(typeof R=="function")return f(R.length<=F.length,`Code: ${P}; The provided arguments length (${F.length}) does not match the required ones (${R.length}).`),R(...F);const I=(R.match(/%[dfijoOs]/g)||[]).length;return f(I===F.length,`Code: ${P}; The provided arguments length (${F.length}) does not match the required ones (${I}).`),F.length===0?R:t(R,...F)}function _(P,R,F){F||(F=Error);class I extends F{constructor(...B){super(b(P,R,B))}toString(){return`${this.name} [${P}]: ${this.message}`}}Object.defineProperties(I.prototype,{name:{value:F.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${P}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),I.prototype.code=P,I.prototype[s]=!0,p[P]=I}function A(P){const R=c+P.name;return Object.defineProperty(P,"name",{value:R}),P}function T(P,R){if(P&&R&&P!==R){if(Array.isArray(R.errors))return R.errors.push(P),R;const F=new a([R,P],R.message);return F.code=R.code,F}return P||R}class x extends Error{constructor(R="The operation was aborted",F=void 0){if(F!==void 0&&typeof F!="object")throw new p.ERR_INVALID_ARG_TYPE("options","Object",F);super(R,F),this.code="ABORT_ERR",this.name="AbortError"}}return _("ERR_ASSERTION","%s",Error),_("ERR_INVALID_ARG_TYPE",(P,R,F)=>{f(typeof P=="string","'name' must be a string"),Array.isArray(R)||(R=[R]);let I="The ";P.endsWith(" argument")?I+=`${P} `:I+=`"${P}" ${P.includes(".")?"property":"argument"} `,I+="must be ";const $=[],B=[],W=[];for(const q of R)f(typeof q=="string","All expected entries have to be of type string"),d.includes(q)?$.push(q.toLowerCase()):l.test(q)?B.push(q):(f(q!=="object",'The value "object" should be written as "Object"'),W.push(q));if(B.length>0){const q=$.indexOf("object");q!==-1&&($.splice($,q,1),B.push("Object"))}if($.length>0){switch($.length){case 1:I+=`of type ${$[0]}`;break;case 2:I+=`one of type ${$[0]} or ${$[1]}`;break;default:{const q=$.pop();I+=`one of type ${$.join(", ")}, or ${q}`}}(B.length>0||W.length>0)&&(I+=" or ")}if(B.length>0){switch(B.length){case 1:I+=`an instance of ${B[0]}`;break;case 2:I+=`an instance of ${B[0]} or ${B[1]}`;break;default:{const q=B.pop();I+=`an instance of ${B.join(", ")}, or ${q}`}}W.length>0&&(I+=" or ")}switch(W.length){case 0:break;case 1:W[0].toLowerCase()!==W[0]&&(I+="an "),I+=`${W[0]}`;break;case 2:I+=`one of ${W[0]} or ${W[1]}`;break;default:{const q=W.pop();I+=`one of ${W.join(", ")}, or ${q}`}}if(F==null)I+=`. Received ${F}`;else if(typeof F=="function"&&F.name)I+=`. Received function ${F.name}`;else if(typeof F=="object"){var Y;if((Y=F.constructor)!==null&&Y!==void 0&&Y.name)I+=`. Received an instance of ${F.constructor.name}`;else{const q=r(F,{depth:-1});I+=`. Received ${q}`}}else{let q=r(F,{colors:!1});q.length>25&&(q=`${q.slice(0,25)}...`),I+=`. Received type ${typeof F} (${q})`}return I},TypeError),_("ERR_INVALID_ARG_VALUE",(P,R,F="is invalid")=>{let I=r(R);return I.length>128&&(I=I.slice(0,128)+"..."),`The ${P.includes(".")?"property":"argument"} '${P}' ${F}. Received ${I}`},TypeError),_("ERR_INVALID_RETURN_VALUE",(P,R,F)=>{var I;const $=F!=null&&(I=F.constructor)!==null&&I!==void 0&&I.name?`instance of ${F.constructor.name}`:`type ${typeof F}`;return`Expected ${P} to be returned from the "${R}" function but got ${$}.`},TypeError),_("ERR_MISSING_ARGS",(...P)=>{f(P.length>0,"At least one arg needs to be specified");let R;const F=P.length;switch(P=(Array.isArray(P)?P:[P]).map(I=>`"${I}"`).join(" or "),F){case 1:R+=`The ${P[0]} argument`;break;case 2:R+=`The ${P[0]} and ${P[1]} arguments`;break;default:{const I=P.pop();R+=`The ${P.join(", ")}, and ${I} arguments`}break}return`${R} must be specified`},TypeError),_("ERR_OUT_OF_RANGE",(P,R,F)=>{f(R,'Missing "range" argument');let I;if(Number.isInteger(F)&&Math.abs(F)>2**32)I=m(String(F));else if(typeof F=="bigint"){I=String(F);const $=BigInt(2)**BigInt(32);(F>$||F<-$)&&(I=m(I)),I+="n"}else I=r(F);return`The value of "${P}" is out of range. It must be ${R}. Received ${I}`},RangeError),_("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),_("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),_("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),_("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),_("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),_("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),_("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),_("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),_("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),_("ERR_STREAM_WRITE_AFTER_END","write after end",Error),_("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e0={AbortError:x,aggregateTwoErrors:A(T),hideStackFrames:A,codes:p},e0}var Zh={exports:{}},dw;function Xp(){if(dw)return Zh.exports;dw=1;const{AbortController:t,AbortSignal:r}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Zh.exports=t,Zh.exports.AbortSignal=r,Zh.exports.default=t,Zh.exports}var cy={exports:{}},hw;function lf(){if(hw)return cy.exports;hw=1;var t=typeof Reflect=="object"?Reflect:null,r=t&&typeof t.apply=="function"?t.apply:function(B,W,Y){return Function.prototype.apply.call(B,W,Y)},i;t&&typeof t.ownKeys=="function"?i=t.ownKeys:Object.getOwnPropertySymbols?i=function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:i=function(B){return Object.getOwnPropertyNames(B)};function a($){console&&console.warn&&console.warn($)}var s=Number.isNaN||function(B){return B!==B};function d(){d.init.call(this)}cy.exports=d,cy.exports.once=R,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var l=10;function c($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function($){if(typeof $!="number"||$<0||s($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");l=$}}),d.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(B){if(typeof B!="number"||B<0||s(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this};function p($){return $._maxListeners===void 0?d.defaultMaxListeners:$._maxListeners}d.prototype.getMaxListeners=function(){return p(this)},d.prototype.emit=function(B){for(var W=[],Y=1;Y<arguments.length;Y++)W.push(arguments[Y]);var q=B==="error",Ie=this._events;if(Ie!==void 0)q=q&&Ie.error===void 0;else if(!q)return!1;if(q){var K;if(W.length>0&&(K=W[0]),K instanceof Error)throw K;var ie=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw ie.context=K,ie}var ge=Ie[B];if(ge===void 0)return!1;if(typeof ge=="function")r(ge,this,W);else for(var Se=ge.length,et=T(ge,Se),Y=0;Y<Se;++Y)r(et[Y],this,W);return!0};function f($,B,W,Y){var q,Ie,K;if(c(W),Ie=$._events,Ie===void 0?(Ie=$._events=Object.create(null),$._eventsCount=0):(Ie.newListener!==void 0&&($.emit("newListener",B,W.listener?W.listener:W),Ie=$._events),K=Ie[B]),K===void 0)K=Ie[B]=W,++$._eventsCount;else if(typeof K=="function"?K=Ie[B]=Y?[W,K]:[K,W]:Y?K.unshift(W):K.push(W),q=p($),q>0&&K.length>q&&!K.warned){K.warned=!0;var ie=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(B)+" listeners added. Use emitter.setMaxListeners() to increase limit");ie.name="MaxListenersExceededWarning",ie.emitter=$,ie.type=B,ie.count=K.length,a(ie)}return $}d.prototype.addListener=function(B,W){return f(this,B,W,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(B,W){return f(this,B,W,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b($,B,W){var Y={fired:!1,wrapFn:void 0,target:$,type:B,listener:W},q=m.bind(Y);return q.listener=W,Y.wrapFn=q,q}d.prototype.once=function(B,W){return c(W),this.on(B,b(this,B,W)),this},d.prototype.prependOnceListener=function(B,W){return c(W),this.prependListener(B,b(this,B,W)),this},d.prototype.removeListener=function(B,W){var Y,q,Ie,K,ie;if(c(W),q=this._events,q===void 0)return this;if(Y=q[B],Y===void 0)return this;if(Y===W||Y.listener===W)--this._eventsCount===0?this._events=Object.create(null):(delete q[B],q.removeListener&&this.emit("removeListener",B,Y.listener||W));else if(typeof Y!="function"){for(Ie=-1,K=Y.length-1;K>=0;K--)if(Y[K]===W||Y[K].listener===W){ie=Y[K].listener,Ie=K;break}if(Ie<0)return this;Ie===0?Y.shift():x(Y,Ie),Y.length===1&&(q[B]=Y[0]),q.removeListener!==void 0&&this.emit("removeListener",B,ie||W)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(B){var W,Y,q;if(Y=this._events,Y===void 0)return this;if(Y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Y[B]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Y[B]),this;if(arguments.length===0){var Ie=Object.keys(Y),K;for(q=0;q<Ie.length;++q)K=Ie[q],K!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(W=Y[B],typeof W=="function")this.removeListener(B,W);else if(W!==void 0)for(q=W.length-1;q>=0;q--)this.removeListener(B,W[q]);return this};function _($,B,W){var Y=$._events;if(Y===void 0)return[];var q=Y[B];return q===void 0?[]:typeof q=="function"?W?[q.listener||q]:[q]:W?P(q):T(q,q.length)}d.prototype.listeners=function(B){return _(this,B,!0)},d.prototype.rawListeners=function(B){return _(this,B,!1)},d.listenerCount=function($,B){return typeof $.listenerCount=="function"?$.listenerCount(B):A.call($,B)},d.prototype.listenerCount=A;function A($){var B=this._events;if(B!==void 0){var W=B[$];if(typeof W=="function")return 1;if(W!==void 0)return W.length}return 0}d.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function T($,B){for(var W=new Array(B),Y=0;Y<B;++Y)W[Y]=$[Y];return W}function x($,B){for(;B+1<$.length;B++)$[B]=$[B+1];$.pop()}function P($){for(var B=new Array($.length),W=0;W<B.length;++W)B[W]=$[W].listener||$[W];return B}function R($,B){return new Promise(function(W,Y){function q(K){$.removeListener(B,Ie),Y(K)}function Ie(){typeof $.removeListener=="function"&&$.removeListener("error",q),W([].slice.call(arguments))}I($,B,Ie,{once:!0}),B!=="error"&&F($,q,{once:!0})})}function F($,B,W){typeof $.on=="function"&&I($,"error",B,W)}function I($,B,W,Y){if(typeof $.on=="function")Y.once?$.once(B,W):$.on(B,W);else if(typeof $.addEventListener=="function")$.addEventListener(B,function q(Ie){Y.once&&$.removeEventListener(B,q),W(Ie)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $)}return cy.exports}var pw;function Ka(){return pw||(pw=1,function(t){const r=Ts(),{format:i,inspect:a}=YS(),{codes:{ERR_INVALID_ARG_TYPE:s}}=Aa(),{kResistStopPropagation:d,AggregateError:l,SymbolDispose:c}=hi(),p=globalThis.AbortSignal||Xp().AbortSignal,f=globalThis.AbortController||Xp().AbortController,m=Object.getPrototypeOf(async function(){}).constructor,b=globalThis.Blob||r.Blob,_=typeof b<"u"?function(P){return P instanceof b}:function(P){return!1},A=(x,P)=>{if(x!==void 0&&(x===null||typeof x!="object"||!("aborted"in x)))throw new s(P,"AbortSignal",x)},T=(x,P)=>{if(typeof x!="function")throw new s(P,"Function",x)};t.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(x){let P=!1;return function(...R){P||(P=!0,x.apply(this,R))}},createDeferredPromise:function(){let x,P;return{promise:new Promise((F,I)=>{x=F,P=I}),resolve:x,reject:P}},promisify(x){return new Promise((P,R)=>{x((F,...I)=>F?R(F):P(...I))})},debuglog(){return function(){}},format:i,inspect:a,types:{isAsyncFunction(x){return x instanceof m},isArrayBufferView(x){return ArrayBuffer.isView(x)}},isBlob:_,deprecate(x,P){return x},addAbortListener:lf().addAbortListener||function(P,R){if(P===void 0)throw new s("signal","AbortSignal",P);A(P,"signal"),T(R,"listener");let F;return P.aborted?queueMicrotask(()=>R()):(P.addEventListener("abort",R,{__proto__:null,once:!0,[d]:!0}),F=()=>{P.removeEventListener("abort",R)}),{__proto__:null,[c](){var I;(I=F)===null||I===void 0||I()}}},AbortSignalAny:p.any||function(P){if(P.length===1)return P[0];const R=new f,F=()=>R.abort();return P.forEach(I=>{A(I,"signals"),I.addEventListener("abort",F,{once:!0})}),R.signal.addEventListener("abort",()=>{P.forEach(I=>I.removeEventListener("abort",F))},{once:!0}),R.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(Xm)),Xm.exports}var fy={},t0,gw;function sg(){if(gw)return t0;gw=1;const{ArrayIsArray:t,ArrayPrototypeIncludes:r,ArrayPrototypeJoin:i,ArrayPrototypeMap:a,NumberIsInteger:s,NumberIsNaN:d,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:c,NumberParseInt:p,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:m,String:b,StringPrototypeToUpperCase:_,StringPrototypeTrim:A}=hi(),{hideStackFrames:T,codes:{ERR_SOCKET_BAD_PORT:x,ERR_INVALID_ARG_TYPE:P,ERR_INVALID_ARG_VALUE:R,ERR_OUT_OF_RANGE:F,ERR_UNKNOWN_SIGNAL:I}}=Aa(),{normalizeEncoding:$}=Ka(),{isAsyncFunction:B,isArrayBufferView:W}=Ka().types,Y={};function q(Re){return Re===(Re|0)}function Ie(Re){return Re===Re>>>0}const K=/^[0-7]+$/,ie="must be a 32-bit unsigned integer or an octal string";function ge(Re,ht,Ct){if(typeof Re>"u"&&(Re=Ct),typeof Re=="string"){if(m(K,Re)===null)throw new R(ht,Re,ie);Re=p(Re,8)}return st(Re,ht),Re}const Se=T((Re,ht,Ct=c,vt=l)=>{if(typeof Re!="number")throw new P(ht,"number",Re);if(!s(Re))throw new F(ht,"an integer",Re);if(Re<Ct||Re>vt)throw new F(ht,`>= ${Ct} && <= ${vt}`,Re)}),et=T((Re,ht,Ct=-2147483648,vt=2147483647)=>{if(typeof Re!="number")throw new P(ht,"number",Re);if(!s(Re))throw new F(ht,"an integer",Re);if(Re<Ct||Re>vt)throw new F(ht,`>= ${Ct} && <= ${vt}`,Re)}),st=T((Re,ht,Ct=!1)=>{if(typeof Re!="number")throw new P(ht,"number",Re);if(!s(Re))throw new F(ht,"an integer",Re);const vt=Ct?1:0,We=4294967295;if(Re<vt||Re>We)throw new F(ht,`>= ${vt} && <= ${We}`,Re)});function Ne(Re,ht){if(typeof Re!="string")throw new P(ht,"string",Re)}function gt(Re,ht,Ct=void 0,vt){if(typeof Re!="number")throw new P(ht,"number",Re);if(Ct!=null&&Re<Ct||vt!=null&&Re>vt||(Ct!=null||vt!=null)&&d(Re))throw new F(ht,`${Ct!=null?`>= ${Ct}`:""}${Ct!=null&&vt!=null?" && ":""}${vt!=null?`<= ${vt}`:""}`,Re)}const ve=T((Re,ht,Ct)=>{if(!r(Ct,Re)){const We="must be one of: "+i(a(Ct,$e=>typeof $e=="string"?`'${$e}'`:b($e)),", ");throw new R(ht,Re,We)}});function tt(Re,ht){if(typeof Re!="boolean")throw new P(ht,"boolean",Re)}function J(Re,ht,Ct){return Re==null||!f(Re,ht)?Ct:Re[ht]}const xe=T((Re,ht,Ct=null)=>{const vt=J(Ct,"allowArray",!1),We=J(Ct,"allowFunction",!1);if(!J(Ct,"nullable",!1)&&Re===null||!vt&&t(Re)||typeof Re!="object"&&(!We||typeof Re!="function"))throw new P(ht,"Object",Re)}),Xe=T((Re,ht)=>{if(Re!=null&&typeof Re!="object"&&typeof Re!="function")throw new P(ht,"a dictionary",Re)}),je=T((Re,ht,Ct=0)=>{if(!t(Re))throw new P(ht,"Array",Re);if(Re.length<Ct){const vt=`must be longer than ${Ct}`;throw new R(ht,Re,vt)}});function dt(Re,ht){je(Re,ht);for(let Ct=0;Ct<Re.length;Ct++)Ne(Re[Ct],`${ht}[${Ct}]`)}function It(Re,ht){je(Re,ht);for(let Ct=0;Ct<Re.length;Ct++)tt(Re[Ct],`${ht}[${Ct}]`)}function Mt(Re,ht){je(Re,ht);for(let Ct=0;Ct<Re.length;Ct++){const vt=Re[Ct],We=`${ht}[${Ct}]`;if(vt==null)throw new P(We,"AbortSignal",vt);se(vt,We)}}function Me(Re,ht="signal"){if(Ne(Re,ht),Y[Re]===void 0)throw Y[_(Re)]!==void 0?new I(Re+" (signals must use all capital letters)"):new I(Re)}const le=T((Re,ht="buffer")=>{if(!W(Re))throw new P(ht,["Buffer","TypedArray","DataView"],Re)});function Te(Re,ht){const Ct=$(ht),vt=Re.length;if(Ct==="hex"&&vt%2!==0)throw new R("encoding",ht,`is invalid for data of length ${vt}`)}function Je(Re,ht="Port",Ct=!0){if(typeof Re!="number"&&typeof Re!="string"||typeof Re=="string"&&A(Re).length===0||+Re!==+Re>>>0||Re>65535||Re===0&&!Ct)throw new x(ht,Re,Ct);return Re|0}const se=T((Re,ht)=>{if(Re!==void 0&&(Re===null||typeof Re!="object"||!("aborted"in Re)))throw new P(ht,"AbortSignal",Re)}),M=T((Re,ht)=>{if(typeof Re!="function")throw new P(ht,"Function",Re)}),D=T((Re,ht)=>{if(typeof Re!="function"||B(Re))throw new P(ht,"Function",Re)}),G=T((Re,ht)=>{if(Re!==void 0)throw new P(ht,"undefined",Re)});function re(Re,ht,Ct){if(!r(Ct,Re))throw new P(ht,`('${i(Ct,"|")}')`,Re)}const we=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ce(Re,ht){if(typeof Re>"u"||!m(we,Re))throw new R(ht,Re,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function at(Re){if(typeof Re=="string")return Ce(Re,"hints"),Re;if(t(Re)){const ht=Re.length;let Ct="";if(ht===0)return Ct;for(let vt=0;vt<ht;vt++){const We=Re[vt];Ce(We,"hints"),Ct+=We,vt!==ht-1&&(Ct+=", ")}return Ct}throw new R("hints",Re,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return t0={isInt32:q,isUint32:Ie,parseFileMode:ge,validateArray:je,validateStringArray:dt,validateBooleanArray:It,validateAbortSignalArray:Mt,validateBoolean:tt,validateBuffer:le,validateDictionary:Xe,validateEncoding:Te,validateFunction:M,validateInt32:et,validateInteger:Se,validateNumber:gt,validateObject:xe,validateOneOf:ve,validatePlainFunction:D,validatePort:Je,validateSignalName:Me,validateString:Ne,validateUint32:st,validateUndefined:G,validateUnion:re,validateAbortSignal:se,validateLinkHeaderValue:at},t0}var dy={exports:{}},r0={exports:{}},yw;function uf(){if(yw)return r0.exports;yw=1;var t=r0.exports={},r,i;function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=a}catch{r=a}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function d(x){if(r===setTimeout)return setTimeout(x,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(x,0);try{return r(x,0)}catch{try{return r.call(null,x,0)}catch{return r.call(this,x,0)}}}function l(x){if(i===clearTimeout)return clearTimeout(x);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(x);try{return i(x)}catch{try{return i.call(null,x)}catch{return i.call(this,x)}}}var c=[],p=!1,f,m=-1;function b(){!p||!f||(p=!1,f.length?c=f.concat(c):m=-1,c.length&&_())}function _(){if(!p){var x=d(b);p=!0;for(var P=c.length;P;){for(f=c,c=[];++m<P;)f&&f[m].run();m=-1,P=c.length}f=null,p=!1,l(x)}}t.nextTick=function(x){var P=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)P[R-1]=arguments[R];c.push(new A(x,P)),c.length===1&&!p&&d(_)};function A(x,P){this.fun=x,this.array=P}A.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function T(){}return t.on=T,t.addListener=T,t.once=T,t.off=T,t.removeListener=T,t.removeAllListeners=T,t.emit=T,t.prependListener=T,t.prependOnceListener=T,t.listeners=function(x){return[]},t.binding=function(x){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(x){throw new Error("process.chdir is not supported")},t.umask=function(){return 0},r0.exports}var n0,mw;function Pl(){if(mw)return n0;mw=1;const{SymbolAsyncIterator:t,SymbolIterator:r,SymbolFor:i}=hi(),a=i("nodejs.stream.destroyed"),s=i("nodejs.stream.errored"),d=i("nodejs.stream.readable"),l=i("nodejs.stream.writable"),c=i("nodejs.stream.disturbed"),p=i("nodejs.webstream.isClosedPromise"),f=i("nodejs.webstream.controllerErrorFunction");function m(J,xe=!1){var Xe;return!!(J&&typeof J.pipe=="function"&&typeof J.on=="function"&&(!xe||typeof J.pause=="function"&&typeof J.resume=="function")&&(!J._writableState||((Xe=J._readableState)===null||Xe===void 0?void 0:Xe.readable)!==!1)&&(!J._writableState||J._readableState))}function b(J){var xe;return!!(J&&typeof J.write=="function"&&typeof J.on=="function"&&(!J._readableState||((xe=J._writableState)===null||xe===void 0?void 0:xe.writable)!==!1))}function _(J){return!!(J&&typeof J.pipe=="function"&&J._readableState&&typeof J.on=="function"&&typeof J.write=="function")}function A(J){return J&&(J._readableState||J._writableState||typeof J.write=="function"&&typeof J.on=="function"||typeof J.pipe=="function"&&typeof J.on=="function")}function T(J){return!!(J&&!A(J)&&typeof J.pipeThrough=="function"&&typeof J.getReader=="function"&&typeof J.cancel=="function")}function x(J){return!!(J&&!A(J)&&typeof J.getWriter=="function"&&typeof J.abort=="function")}function P(J){return!!(J&&!A(J)&&typeof J.readable=="object"&&typeof J.writable=="object")}function R(J){return T(J)||x(J)||P(J)}function F(J,xe){return J==null?!1:xe===!0?typeof J[t]=="function":xe===!1?typeof J[r]=="function":typeof J[t]=="function"||typeof J[r]=="function"}function I(J){if(!A(J))return null;const xe=J._writableState,Xe=J._readableState,je=xe||Xe;return!!(J.destroyed||J[a]||je!=null&&je.destroyed)}function $(J){if(!b(J))return null;if(J.writableEnded===!0)return!0;const xe=J._writableState;return xe!=null&&xe.errored?!1:typeof xe?.ended!="boolean"?null:xe.ended}function B(J,xe){if(!b(J))return null;if(J.writableFinished===!0)return!0;const Xe=J._writableState;return Xe!=null&&Xe.errored?!1:typeof Xe?.finished!="boolean"?null:!!(Xe.finished||xe===!1&&Xe.ended===!0&&Xe.length===0)}function W(J){if(!m(J))return null;if(J.readableEnded===!0)return!0;const xe=J._readableState;return!xe||xe.errored?!1:typeof xe?.ended!="boolean"?null:xe.ended}function Y(J,xe){if(!m(J))return null;const Xe=J._readableState;return Xe!=null&&Xe.errored?!1:typeof Xe?.endEmitted!="boolean"?null:!!(Xe.endEmitted||xe===!1&&Xe.ended===!0&&Xe.length===0)}function q(J){return J&&J[d]!=null?J[d]:typeof J?.readable!="boolean"?null:I(J)?!1:m(J)&&J.readable&&!Y(J)}function Ie(J){return J&&J[l]!=null?J[l]:typeof J?.writable!="boolean"?null:I(J)?!1:b(J)&&J.writable&&!$(J)}function K(J,xe){return A(J)?I(J)?!0:!(xe?.readable!==!1&&q(J)||xe?.writable!==!1&&Ie(J)):null}function ie(J){var xe,Xe;return A(J)?J.writableErrored?J.writableErrored:(xe=(Xe=J._writableState)===null||Xe===void 0?void 0:Xe.errored)!==null&&xe!==void 0?xe:null:null}function ge(J){var xe,Xe;return A(J)?J.readableErrored?J.readableErrored:(xe=(Xe=J._readableState)===null||Xe===void 0?void 0:Xe.errored)!==null&&xe!==void 0?xe:null:null}function Se(J){if(!A(J))return null;if(typeof J.closed=="boolean")return J.closed;const xe=J._writableState,Xe=J._readableState;return typeof xe?.closed=="boolean"||typeof Xe?.closed=="boolean"?xe?.closed||Xe?.closed:typeof J._closed=="boolean"&&et(J)?J._closed:null}function et(J){return typeof J._closed=="boolean"&&typeof J._defaultKeepAlive=="boolean"&&typeof J._removedConnection=="boolean"&&typeof J._removedContLen=="boolean"}function st(J){return typeof J._sent100=="boolean"&&et(J)}function Ne(J){var xe;return typeof J._consuming=="boolean"&&typeof J._dumped=="boolean"&&((xe=J.req)===null||xe===void 0?void 0:xe.upgradeOrConnect)===void 0}function gt(J){if(!A(J))return null;const xe=J._writableState,Xe=J._readableState,je=xe||Xe;return!je&&st(J)||!!(je&&je.autoDestroy&&je.emitClose&&je.closed===!1)}function ve(J){var xe;return!!(J&&((xe=J[c])!==null&&xe!==void 0?xe:J.readableDidRead||J.readableAborted))}function tt(J){var xe,Xe,je,dt,It,Mt,Me,le,Te,Je;return!!(J&&((xe=(Xe=(je=(dt=(It=(Mt=J[s])!==null&&Mt!==void 0?Mt:J.readableErrored)!==null&&It!==void 0?It:J.writableErrored)!==null&&dt!==void 0?dt:(Me=J._readableState)===null||Me===void 0?void 0:Me.errorEmitted)!==null&&je!==void 0?je:(le=J._writableState)===null||le===void 0?void 0:le.errorEmitted)!==null&&Xe!==void 0?Xe:(Te=J._readableState)===null||Te===void 0?void 0:Te.errored)!==null&&xe!==void 0?xe:!((Je=J._writableState)===null||Je===void 0)&&Je.errored))}return n0={isDestroyed:I,kIsDestroyed:a,isDisturbed:ve,kIsDisturbed:c,isErrored:tt,kIsErrored:s,isReadable:q,kIsReadable:d,kIsClosedPromise:p,kControllerErrorFunction:f,kIsWritable:l,isClosed:Se,isDuplexNodeStream:_,isFinished:K,isIterable:F,isReadableNodeStream:m,isReadableStream:T,isReadableEnded:W,isReadableFinished:Y,isReadableErrored:ge,isNodeStream:A,isWebStream:R,isWritable:Ie,isWritableNodeStream:b,isWritableStream:x,isWritableEnded:$,isWritableFinished:B,isWritableErrored:ie,isServerRequest:Ne,isServerResponse:st,willEmitClose:gt,isTransformStream:P},n0}var vw;function Fu(){if(vw)return dy.exports;vw=1;const t=uf(),{AbortError:r,codes:i}=Aa(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:s}=i,{kEmptyObject:d,once:l}=Ka(),{validateAbortSignal:c,validateFunction:p,validateObject:f,validateBoolean:m}=sg(),{Promise:b,PromisePrototypeThen:_,SymbolDispose:A}=hi(),{isClosed:T,isReadable:x,isReadableNodeStream:P,isReadableStream:R,isReadableFinished:F,isReadableErrored:I,isWritable:$,isWritableNodeStream:B,isWritableStream:W,isWritableFinished:Y,isWritableErrored:q,isNodeStream:Ie,willEmitClose:K,kIsClosedPromise:ie}=Pl();let ge;function Se(ve){return ve.setHeader&&typeof ve.abort=="function"}const et=()=>{};function st(ve,tt,J){var xe,Xe;if(arguments.length===2?(J=tt,tt=d):tt==null?tt=d:f(tt,"options"),p(J,"callback"),c(tt.signal,"options.signal"),J=l(J),R(ve)||W(ve))return Ne(ve,tt,J);if(!Ie(ve))throw new a("stream",["ReadableStream","WritableStream","Stream"],ve);const je=(xe=tt.readable)!==null&&xe!==void 0?xe:P(ve),dt=(Xe=tt.writable)!==null&&Xe!==void 0?Xe:B(ve),It=ve._writableState,Mt=ve._readableState,Me=()=>{ve.writable||Je()};let le=K(ve)&&P(ve)===je&&B(ve)===dt,Te=Y(ve,!1);const Je=()=>{Te=!0,ve.destroyed&&(le=!1),!(le&&(!ve.readable||je))&&(!je||se)&&J.call(ve)};let se=F(ve,!1);const M=()=>{se=!0,ve.destroyed&&(le=!1),!(le&&(!ve.writable||dt))&&(!dt||Te)&&J.call(ve)},D=Re=>{J.call(ve,Re)};let G=T(ve);const re=()=>{G=!0;const Re=q(ve)||I(ve);if(Re&&typeof Re!="boolean")return J.call(ve,Re);if(je&&!se&&P(ve,!0)&&!F(ve,!1))return J.call(ve,new s);if(dt&&!Te&&!Y(ve,!1))return J.call(ve,new s);J.call(ve)},we=()=>{G=!0;const Re=q(ve)||I(ve);if(Re&&typeof Re!="boolean")return J.call(ve,Re);J.call(ve)},Ce=()=>{ve.req.on("finish",Je)};Se(ve)?(ve.on("complete",Je),le||ve.on("abort",re),ve.req?Ce():ve.on("request",Ce)):dt&&!It&&(ve.on("end",Me),ve.on("close",Me)),!le&&typeof ve.aborted=="boolean"&&ve.on("aborted",re),ve.on("end",M),ve.on("finish",Je),tt.error!==!1&&ve.on("error",D),ve.on("close",re),G?t.nextTick(re):It!=null&&It.errorEmitted||Mt!=null&&Mt.errorEmitted?le||t.nextTick(we):(!je&&(!le||x(ve))&&(Te||$(ve)===!1)||!dt&&(!le||$(ve))&&(se||x(ve)===!1)||Mt&&ve.req&&ve.aborted)&&t.nextTick(we);const at=()=>{J=et,ve.removeListener("aborted",re),ve.removeListener("complete",Je),ve.removeListener("abort",re),ve.removeListener("request",Ce),ve.req&&ve.req.removeListener("finish",Je),ve.removeListener("end",Me),ve.removeListener("close",Me),ve.removeListener("finish",Je),ve.removeListener("end",M),ve.removeListener("error",D),ve.removeListener("close",re)};if(tt.signal&&!G){const Re=()=>{const ht=J;at(),ht.call(ve,new r(void 0,{cause:tt.signal.reason}))};if(tt.signal.aborted)t.nextTick(Re);else{ge=ge||Ka().addAbortListener;const ht=ge(tt.signal,Re),Ct=J;J=l((...vt)=>{ht[A](),Ct.apply(ve,vt)})}}return at}function Ne(ve,tt,J){let xe=!1,Xe=et;if(tt.signal)if(Xe=()=>{xe=!0,J.call(ve,new r(void 0,{cause:tt.signal.reason}))},tt.signal.aborted)t.nextTick(Xe);else{ge=ge||Ka().addAbortListener;const dt=ge(tt.signal,Xe),It=J;J=l((...Mt)=>{dt[A](),It.apply(ve,Mt)})}const je=(...dt)=>{xe||t.nextTick(()=>J.apply(ve,dt))};return _(ve[ie].promise,je,je),et}function gt(ve,tt){var J;let xe=!1;return tt===null&&(tt=d),(J=tt)!==null&&J!==void 0&&J.cleanup&&(m(tt.cleanup,"cleanup"),xe=tt.cleanup),new b((Xe,je)=>{const dt=st(ve,tt,It=>{xe&&dt(),It?je(It):Xe()})})}return dy.exports=st,dy.exports.finished=gt,dy.exports}var i0,bw;function Ad(){if(bw)return i0;bw=1;const t=uf(),{aggregateTwoErrors:r,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:a}=Aa(),{Symbol:s}=hi(),{kIsDestroyed:d,isDestroyed:l,isFinished:c,isServerRequest:p}=Pl(),f=s("kDestroy"),m=s("kConstruct");function b(K,ie,ge){K&&(K.stack,ie&&!ie.errored&&(ie.errored=K),ge&&!ge.errored&&(ge.errored=K))}function _(K,ie){const ge=this._readableState,Se=this._writableState,et=Se||ge;return Se!=null&&Se.destroyed||ge!=null&&ge.destroyed?(typeof ie=="function"&&ie(),this):(b(K,Se,ge),Se&&(Se.destroyed=!0),ge&&(ge.destroyed=!0),et.constructed?A(this,K,ie):this.once(f,function(st){A(this,r(st,K),ie)}),this)}function A(K,ie,ge){let Se=!1;function et(st){if(Se)return;Se=!0;const Ne=K._readableState,gt=K._writableState;b(st,gt,Ne),gt&&(gt.closed=!0),Ne&&(Ne.closed=!0),typeof ge=="function"&&ge(st),st?t.nextTick(T,K,st):t.nextTick(x,K)}try{K._destroy(ie||null,et)}catch(st){et(st)}}function T(K,ie){P(K,ie),x(K)}function x(K){const ie=K._readableState,ge=K._writableState;ge&&(ge.closeEmitted=!0),ie&&(ie.closeEmitted=!0),(ge!=null&&ge.emitClose||ie!=null&&ie.emitClose)&&K.emit("close")}function P(K,ie){const ge=K._readableState,Se=K._writableState;Se!=null&&Se.errorEmitted||ge!=null&&ge.errorEmitted||(Se&&(Se.errorEmitted=!0),ge&&(ge.errorEmitted=!0),K.emit("error",ie))}function R(){const K=this._readableState,ie=this._writableState;K&&(K.constructed=!0,K.closed=!1,K.closeEmitted=!1,K.destroyed=!1,K.errored=null,K.errorEmitted=!1,K.reading=!1,K.ended=K.readable===!1,K.endEmitted=K.readable===!1),ie&&(ie.constructed=!0,ie.destroyed=!1,ie.closed=!1,ie.closeEmitted=!1,ie.errored=null,ie.errorEmitted=!1,ie.finalCalled=!1,ie.prefinished=!1,ie.ended=ie.writable===!1,ie.ending=ie.writable===!1,ie.finished=ie.writable===!1)}function F(K,ie,ge){const Se=K._readableState,et=K._writableState;if(et!=null&&et.destroyed||Se!=null&&Se.destroyed)return this;Se!=null&&Se.autoDestroy||et!=null&&et.autoDestroy?K.destroy(ie):ie&&(ie.stack,et&&!et.errored&&(et.errored=ie),Se&&!Se.errored&&(Se.errored=ie),ge?t.nextTick(P,K,ie):P(K,ie))}function I(K,ie){if(typeof K._construct!="function")return;const ge=K._readableState,Se=K._writableState;ge&&(ge.constructed=!1),Se&&(Se.constructed=!1),K.once(m,ie),!(K.listenerCount(m)>1)&&t.nextTick($,K)}function $(K){let ie=!1;function ge(Se){if(ie){F(K,Se??new i);return}ie=!0;const et=K._readableState,st=K._writableState,Ne=st||et;et&&(et.constructed=!0),st&&(st.constructed=!0),Ne.destroyed?K.emit(f,Se):Se?F(K,Se,!0):t.nextTick(B,K)}try{K._construct(Se=>{t.nextTick(ge,Se)})}catch(Se){t.nextTick(ge,Se)}}function B(K){K.emit(m)}function W(K){return K?.setHeader&&typeof K.abort=="function"}function Y(K){K.emit("close")}function q(K,ie){K.emit("error",ie),t.nextTick(Y,K)}function Ie(K,ie){!K||l(K)||(!ie&&!c(K)&&(ie=new a),p(K)?(K.socket=null,K.destroy(ie)):W(K)?K.abort():W(K.req)?K.req.abort():typeof K.destroy=="function"?K.destroy(ie):typeof K.close=="function"?K.close():ie?t.nextTick(q,K,ie):t.nextTick(Y,K),K.destroyed||(K[d]=!0))}return i0={construct:I,destroyer:Ie,destroy:_,undestroy:R,errorOrDestroy:F},i0}var a0,ww;function Tv(){if(ww)return a0;ww=1;const{ArrayIsArray:t,ObjectSetPrototypeOf:r}=hi(),{EventEmitter:i}=lf();function a(d){i.call(this,d)}r(a.prototype,i.prototype),r(a,i),a.prototype.pipe=function(d,l){const c=this;function p(x){d.writable&&d.write(x)===!1&&c.pause&&c.pause()}c.on("data",p);function f(){c.readable&&c.resume&&c.resume()}d.on("drain",f),!d._isStdio&&(!l||l.end!==!1)&&(c.on("end",b),c.on("close",_));let m=!1;function b(){m||(m=!0,d.end())}function _(){m||(m=!0,typeof d.destroy=="function"&&d.destroy())}function A(x){T(),i.listenerCount(this,"error")===0&&this.emit("error",x)}s(c,"error",A),s(d,"error",A);function T(){c.removeListener("data",p),d.removeListener("drain",f),c.removeListener("end",b),c.removeListener("close",_),c.removeListener("error",A),d.removeListener("error",A),c.removeListener("end",T),c.removeListener("close",T),d.removeListener("close",T)}return c.on("end",T),c.on("close",T),d.on("close",T),d.emit("pipe",c),d};function s(d,l,c){if(typeof d.prependListener=="function")return d.prependListener(l,c);!d._events||!d._events[l]?d.on(l,c):t(d._events[l])?d._events[l].unshift(c):d._events[l]=[c,d._events[l]]}return a0={Stream:a,prependListener:s},a0}var o0={exports:{}},_w;function Gy(){return _w||(_w=1,function(t){const{SymbolDispose:r}=hi(),{AbortError:i,codes:a}=Aa(),{isNodeStream:s,isWebStream:d,kControllerErrorFunction:l}=Pl(),c=Fu(),{ERR_INVALID_ARG_TYPE:p}=a;let f;const m=(b,_)=>{if(typeof b!="object"||!("aborted"in b))throw new p(_,"AbortSignal",b)};t.exports.addAbortSignal=function(_,A){if(m(_,"signal"),!s(A)&&!d(A))throw new p("stream",["ReadableStream","WritableStream","Stream"],A);return t.exports.addAbortSignalNoValidate(_,A)},t.exports.addAbortSignalNoValidate=function(b,_){if(typeof b!="object"||!("aborted"in b))return _;const A=s(_)?()=>{_.destroy(new i(void 0,{cause:b.reason}))}:()=>{_[l](new i(void 0,{cause:b.reason}))};if(b.aborted)A();else{f=f||Ka().addAbortListener;const T=f(b,A);c(_,T[r])}return _}}(o0)),o0.exports}var s0,Sw;function ER(){if(Sw)return s0;Sw=1;const{StringPrototypeSlice:t,SymbolIterator:r,TypedArrayPrototypeSet:i,Uint8Array:a}=hi(),{Buffer:s}=Ts(),{inspect:d}=Ka();return s0=class{constructor(){this.head=null,this.tail=null,this.length=0}push(c){const p={data:c,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length}unshift(c){const p={data:c,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length}shift(){if(this.length===0)return;const c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}clear(){this.head=this.tail=null,this.length=0}join(c){if(this.length===0)return"";let p=this.head,f=""+p.data;for(;(p=p.next)!==null;)f+=c+p.data;return f}concat(c){if(this.length===0)return s.alloc(0);const p=s.allocUnsafe(c>>>0);let f=this.head,m=0;for(;f;)i(p,f.data,m),m+=f.data.length,f=f.next;return p}consume(c,p){const f=this.head.data;if(c<f.length){const m=f.slice(0,c);return this.head.data=f.slice(c),m}return c===f.length?this.shift():p?this._getString(c):this._getBuffer(c)}first(){return this.head.data}*[r](){for(let c=this.head;c;c=c.next)yield c.data}_getString(c){let p="",f=this.head,m=0;do{const b=f.data;if(c>b.length)p+=b,c-=b.length;else{c===b.length?(p+=b,++m,f.next?this.head=f.next:this.head=this.tail=null):(p+=t(b,0,c),this.head=f,f.data=t(b,c));break}++m}while((f=f.next)!==null);return this.length-=m,p}_getBuffer(c){const p=s.allocUnsafe(c),f=c;let m=this.head,b=0;do{const _=m.data;if(c>_.length)i(p,_,f-c),c-=_.length;else{c===_.length?(i(p,_,f-c),++b,m.next?this.head=m.next:this.head=this.tail=null):(i(p,new a(_.buffer,_.byteOffset,c),f-c),this.head=m,m.data=_.slice(c));break}++b}while((m=m.next)!==null);return this.length-=b,p}[Symbol.for("nodejs.util.inspect.custom")](c,p){return d(this,{...p,depth:0,customInspect:!1})}},s0}var l0,Ew;function $y(){if(Ew)return l0;Ew=1;const{MathFloor:t,NumberIsInteger:r}=hi(),{validateInteger:i}=sg(),{ERR_INVALID_ARG_VALUE:a}=Aa().codes;let s=16*1024,d=16;function l(m,b,_){return m.highWaterMark!=null?m.highWaterMark:b?m[_]:null}function c(m){return m?d:s}function p(m,b){i(b,"value",0),m?d=b:s=b}function f(m,b,_,A){const T=l(b,A,_);if(T!=null){if(!r(T)||T<0){const x=A?`options.${_}`:"options.highWaterMark";throw new a(x,T)}return t(T)}return c(m.objectMode)}return l0={getHighWaterMark:f,getDefaultHighWaterMark:c,setDefaultHighWaterMark:p},l0}var u0={},hy={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Aw;function AR(){return Aw||(Aw=1,function(t,r){var i=Ts(),a=i.Buffer;function s(l,c){for(var p in l)c[p]=l[p]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=i:(s(i,r),r.Buffer=d);function d(l,c,p){return a(l,c,p)}d.prototype=Object.create(a.prototype),s(a,d),d.from=function(l,c,p){if(typeof l=="number")throw new TypeError("Argument must not be a number");return a(l,c,p)},d.alloc=function(l,c,p){if(typeof l!="number")throw new TypeError("Argument must be a number");var f=a(l);return c!==void 0?typeof p=="string"?f.fill(c,p):f.fill(c):f.fill(0),f},d.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return a(l)},d.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(l)}}(hy,hy.exports)),hy.exports}var Rw;function RR(){if(Rw)return u0;Rw=1;var t=AR().Buffer,r=t.isEncoding||function(R){switch(R=""+R,R&&R.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(R){if(!R)return"utf8";for(var F;;)switch(R){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return R;default:if(F)return;R=(""+R).toLowerCase(),F=!0}}function a(R){var F=i(R);if(typeof F!="string"&&(t.isEncoding===r||!r(R)))throw new Error("Unknown encoding: "+R);return F||R}u0.StringDecoder=s;function s(R){this.encoding=a(R);var F;switch(this.encoding){case"utf16le":this.text=b,this.end=_,F=4;break;case"utf8":this.fillLast=p,F=4;break;case"base64":this.text=A,this.end=T,F=3;break;default:this.write=x,this.end=P;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(F)}s.prototype.write=function(R){if(R.length===0)return"";var F,I;if(this.lastNeed){if(F=this.fillLast(R),F===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<R.length?F?F+this.text(R,I):this.text(R,I):F||""},s.prototype.end=m,s.prototype.text=f,s.prototype.fillLast=function(R){if(this.lastNeed<=R.length)return R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,R.length),this.lastNeed-=R.length};function d(R){return R<=127?0:R>>5===6?2:R>>4===14?3:R>>3===30?4:R>>6===2?-1:-2}function l(R,F,I){var $=F.length-1;if($<I)return 0;var B=d(F[$]);return B>=0?(B>0&&(R.lastNeed=B-1),B):--$<I||B===-2?0:(B=d(F[$]),B>=0?(B>0&&(R.lastNeed=B-2),B):--$<I||B===-2?0:(B=d(F[$]),B>=0?(B>0&&(B===2?B=0:R.lastNeed=B-3),B):0))}function c(R,F,I){if((F[0]&192)!==128)return R.lastNeed=0,"�";if(R.lastNeed>1&&F.length>1){if((F[1]&192)!==128)return R.lastNeed=1,"�";if(R.lastNeed>2&&F.length>2&&(F[2]&192)!==128)return R.lastNeed=2,"�"}}function p(R){var F=this.lastTotal-this.lastNeed,I=c(this,R);if(I!==void 0)return I;if(this.lastNeed<=R.length)return R.copy(this.lastChar,F,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);R.copy(this.lastChar,F,0,R.length),this.lastNeed-=R.length}function f(R,F){var I=l(this,R,F);if(!this.lastNeed)return R.toString("utf8",F);this.lastTotal=I;var $=R.length-(I-this.lastNeed);return R.copy(this.lastChar,0,$),R.toString("utf8",F,$)}function m(R){var F=R&&R.length?this.write(R):"";return this.lastNeed?F+"�":F}function b(R,F){if((R.length-F)%2===0){var I=R.toString("utf16le",F);if(I){var $=I.charCodeAt(I.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=R[R.length-1],R.toString("utf16le",F,R.length-1)}function _(R){var F=R&&R.length?this.write(R):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return F+this.lastChar.toString("utf16le",0,I)}return F}function A(R,F){var I=(R.length-F)%3;return I===0?R.toString("base64",F):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=R[R.length-1]:(this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1]),R.toString("base64",F,R.length-I))}function T(R){var F=R&&R.length?this.write(R):"";return this.lastNeed?F+this.lastChar.toString("base64",0,3-this.lastNeed):F}function x(R){return R.toString(this.encoding)}function P(R){return R&&R.length?this.write(R):""}return u0}var c0,xw;function QS(){if(xw)return c0;xw=1;const t=uf(),{PromisePrototypeThen:r,SymbolAsyncIterator:i,SymbolIterator:a}=hi(),{Buffer:s}=Ts(),{ERR_INVALID_ARG_TYPE:d,ERR_STREAM_NULL_VALUES:l}=Aa().codes;function c(p,f,m){let b;if(typeof f=="string"||f instanceof s)return new p({objectMode:!0,...m,read(){this.push(f),this.push(null)}});let _;if(f&&f[i])_=!0,b=f[i]();else if(f&&f[a])_=!1,b=f[a]();else throw new d("iterable",["Iterable"],f);const A=new p({objectMode:!0,highWaterMark:1,...m});let T=!1;A._read=function(){T||(T=!0,P())},A._destroy=function(R,F){r(x(R),()=>t.nextTick(F,R),I=>t.nextTick(F,I||R))};async function x(R){const F=R!=null,I=typeof b.throw=="function";if(F&&I){const{value:$,done:B}=await b.throw(R);if(await $,B)return}if(typeof b.return=="function"){const{value:$}=await b.return();await $}}async function P(){for(;;){try{const{value:R,done:F}=_?await b.next():b.next();if(F)A.push(null);else{const I=R&&typeof R.then=="function"?await R:R;if(I===null)throw T=!1,new l;if(A.push(I))continue;T=!1}}catch(R){A.destroy(R)}break}}return A}return c0=c,c0}var f0,Tw;function qy(){if(Tw)return f0;Tw=1;const t=uf(),{ArrayPrototypeIndexOf:r,NumberIsInteger:i,NumberIsNaN:a,NumberParseInt:s,ObjectDefineProperties:d,ObjectKeys:l,ObjectSetPrototypeOf:c,Promise:p,SafeSet:f,SymbolAsyncDispose:m,SymbolAsyncIterator:b,Symbol:_}=hi();f0=vt,vt.ReadableState=Ct;const{EventEmitter:A}=lf(),{Stream:T,prependListener:x}=Tv(),{Buffer:P}=Ts(),{addAbortSignal:R}=Gy(),F=Fu();let I=Ka().debuglog("stream",ue=>{I=ue});const $=ER(),B=Ad(),{getHighWaterMark:W,getDefaultHighWaterMark:Y}=$y(),{aggregateTwoErrors:q,codes:{ERR_INVALID_ARG_TYPE:Ie,ERR_METHOD_NOT_IMPLEMENTED:K,ERR_OUT_OF_RANGE:ie,ERR_STREAM_PUSH_AFTER_EOF:ge,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Se},AbortError:et}=Aa(),{validateObject:st}=sg(),Ne=_("kPaused"),{StringDecoder:gt}=RR(),ve=QS();c(vt.prototype,T.prototype),c(vt,T);const tt=()=>{},{errorOrDestroy:J}=B,xe=1,Xe=2,je=4,dt=8,It=16,Mt=32,Me=64,le=128,Te=256,Je=512,se=1024,M=2048,D=4096,G=8192,re=16384,we=32768,Ce=65536,at=1<<17,Re=1<<18;function ht(ue){return{enumerable:!1,get(){return(this.state&ue)!==0},set(pe){pe?this.state|=ue:this.state&=~ue}}}d(Ct.prototype,{objectMode:ht(xe),ended:ht(Xe),endEmitted:ht(je),reading:ht(dt),constructed:ht(It),sync:ht(Mt),needReadable:ht(Me),emittedReadable:ht(le),readableListening:ht(Te),resumeScheduled:ht(Je),errorEmitted:ht(se),emitClose:ht(M),autoDestroy:ht(D),destroyed:ht(G),closed:ht(re),closeEmitted:ht(we),multiAwaitDrain:ht(Ce),readingMore:ht(at),dataEmitted:ht(Re)});function Ct(ue,pe,Tt){typeof Tt!="boolean"&&(Tt=pe instanceof Tl()),this.state=M|D|It|Mt,ue&&ue.objectMode&&(this.state|=xe),Tt&&ue&&ue.readableObjectMode&&(this.state|=xe),this.highWaterMark=ue?W(this,ue,"readableHighWaterMark",Tt):Y(!1),this.buffer=new $,this.length=0,this.pipes=[],this.flowing=null,this[Ne]=null,ue&&ue.emitClose===!1&&(this.state&=~M),ue&&ue.autoDestroy===!1&&(this.state&=~D),this.errored=null,this.defaultEncoding=ue&&ue.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ue&&ue.encoding&&(this.decoder=new gt(ue.encoding),this.encoding=ue.encoding)}function vt(ue){if(!(this instanceof vt))return new vt(ue);const pe=this instanceof Tl();this._readableState=new Ct(ue,this,pe),ue&&(typeof ue.read=="function"&&(this._read=ue.read),typeof ue.destroy=="function"&&(this._destroy=ue.destroy),typeof ue.construct=="function"&&(this._construct=ue.construct),ue.signal&&!pe&&R(ue.signal,this)),T.call(this,ue),B.construct(this,()=>{this._readableState.needReadable&&qe(this,this._readableState)})}vt.prototype.destroy=B.destroy,vt.prototype._undestroy=B.undestroy,vt.prototype._destroy=function(ue,pe){pe(ue)},vt.prototype[A.captureRejectionSymbol]=function(ue){this.destroy(ue)},vt.prototype[m]=function(){let ue;return this.destroyed||(ue=this.readableEnded?null:new et,this.destroy(ue)),new p((pe,Tt)=>F(this,xt=>xt&&xt!==ue?Tt(xt):pe(null)))},vt.prototype.push=function(ue,pe){return We(this,ue,pe,!1)},vt.prototype.unshift=function(ue,pe){return We(this,ue,pe,!0)};function We(ue,pe,Tt,xt){I("readableAddChunk",pe);const Pt=ue._readableState;let Xt;if((Pt.state&xe)===0&&(typeof pe=="string"?(Tt=Tt||Pt.defaultEncoding,Pt.encoding!==Tt&&(xt&&Pt.encoding?pe=P.from(pe,Tt).toString(Pt.encoding):(pe=P.from(pe,Tt),Tt=""))):pe instanceof P?Tt="":T._isUint8Array(pe)?(pe=T._uint8ArrayToBuffer(pe),Tt=""):pe!=null&&(Xt=new Ie("chunk",["string","Buffer","Uint8Array"],pe))),Xt)J(ue,Xt);else if(pe===null)Pt.state&=~dt,k(ue,Pt);else if((Pt.state&xe)!==0||pe&&pe.length>0)if(xt)if((Pt.state&je)!==0)J(ue,new Se);else{if(Pt.destroyed||Pt.errored)return!1;$e(ue,Pt,pe,!0)}else if(Pt.ended)J(ue,new ge);else{if(Pt.destroyed||Pt.errored)return!1;Pt.state&=~dt,Pt.decoder&&!Tt?(pe=Pt.decoder.write(pe),Pt.objectMode||pe.length!==0?$e(ue,Pt,pe,!1):qe(ue,Pt)):$e(ue,Pt,pe,!1)}else xt||(Pt.state&=~dt,qe(ue,Pt));return!Pt.ended&&(Pt.length<Pt.highWaterMark||Pt.length===0)}function $e(ue,pe,Tt,xt){pe.flowing&&pe.length===0&&!pe.sync&&ue.listenerCount("data")>0?((pe.state&Ce)!==0?pe.awaitDrainWriters.clear():pe.awaitDrainWriters=null,pe.dataEmitted=!0,ue.emit("data",Tt)):(pe.length+=pe.objectMode?1:Tt.length,xt?pe.buffer.unshift(Tt):pe.buffer.push(Tt),(pe.state&Me)!==0&&V(ue)),qe(ue,pe)}vt.prototype.isPaused=function(){const ue=this._readableState;return ue[Ne]===!0||ue.flowing===!1},vt.prototype.setEncoding=function(ue){const pe=new gt(ue);this._readableState.decoder=pe,this._readableState.encoding=this._readableState.decoder.encoding;const Tt=this._readableState.buffer;let xt="";for(const Pt of Tt)xt+=pe.write(Pt);return Tt.clear(),xt!==""&&Tt.push(xt),this._readableState.length=xt.length,this};const Oe=1073741824;function lt(ue){if(ue>Oe)throw new ie("size","<= 1GiB",ue);return ue--,ue|=ue>>>1,ue|=ue>>>2,ue|=ue>>>4,ue|=ue>>>8,ue|=ue>>>16,ue++,ue}function Q(ue,pe){return ue<=0||pe.length===0&&pe.ended?0:(pe.state&xe)!==0?1:a(ue)?pe.flowing&&pe.length?pe.buffer.first().length:pe.length:ue<=pe.length?ue:pe.ended?pe.length:0}vt.prototype.read=function(ue){I("read",ue),ue===void 0?ue=NaN:i(ue)||(ue=s(ue,10));const pe=this._readableState,Tt=ue;if(ue>pe.highWaterMark&&(pe.highWaterMark=lt(ue)),ue!==0&&(pe.state&=~le),ue===0&&pe.needReadable&&((pe.highWaterMark!==0?pe.length>=pe.highWaterMark:pe.length>0)||pe.ended))return I("read: emitReadable",pe.length,pe.ended),pe.length===0&&pe.ended?ct(this):V(this),null;if(ue=Q(ue,pe),ue===0&&pe.ended)return pe.length===0&&ct(this),null;let xt=(pe.state&Me)!==0;if(I("need readable",xt),(pe.length===0||pe.length-ue<pe.highWaterMark)&&(xt=!0,I("length less than watermark",xt)),pe.ended||pe.reading||pe.destroyed||pe.errored||!pe.constructed)xt=!1,I("reading, ended or constructing",xt);else if(xt){I("do read"),pe.state|=dt|Mt,pe.length===0&&(pe.state|=Me);try{this._read(pe.highWaterMark)}catch(Xt){J(this,Xt)}pe.state&=~Mt,pe.reading||(ue=Q(Tt,pe))}let Pt;return ue>0?Pt=Le(ue,pe):Pt=null,Pt===null?(pe.needReadable=pe.length<=pe.highWaterMark,ue=0):(pe.length-=ue,pe.multiAwaitDrain?pe.awaitDrainWriters.clear():pe.awaitDrainWriters=null),pe.length===0&&(pe.ended||(pe.needReadable=!0),Tt!==ue&&pe.ended&&ct(this)),Pt!==null&&!pe.errorEmitted&&!pe.closeEmitted&&(pe.dataEmitted=!0,this.emit("data",Pt)),Pt};function k(ue,pe){if(I("onEofChunk"),!pe.ended){if(pe.decoder){const Tt=pe.decoder.end();Tt&&Tt.length&&(pe.buffer.push(Tt),pe.length+=pe.objectMode?1:Tt.length)}pe.ended=!0,pe.sync?V(ue):(pe.needReadable=!1,pe.emittedReadable=!0,j(ue))}}function V(ue){const pe=ue._readableState;I("emitReadable",pe.needReadable,pe.emittedReadable),pe.needReadable=!1,pe.emittedReadable||(I("emitReadable",pe.flowing),pe.emittedReadable=!0,t.nextTick(j,ue))}function j(ue){const pe=ue._readableState;I("emitReadable_",pe.destroyed,pe.length,pe.ended),!pe.destroyed&&!pe.errored&&(pe.length||pe.ended)&&(ue.emit("readable"),pe.emittedReadable=!1),pe.needReadable=!pe.flowing&&!pe.ended&&pe.length<=pe.highWaterMark,Ke(ue)}function qe(ue,pe){!pe.readingMore&&pe.constructed&&(pe.readingMore=!0,t.nextTick(Ze,ue,pe))}function Ze(ue,pe){for(;!pe.reading&&!pe.ended&&(pe.length<pe.highWaterMark||pe.flowing&&pe.length===0);){const Tt=pe.length;if(I("maybeReadMore read 0"),ue.read(0),Tt===pe.length)break}pe.readingMore=!1}vt.prototype._read=function(ue){throw new K("_read()")},vt.prototype.pipe=function(ue,pe){const Tt=this,xt=this._readableState;xt.pipes.length===1&&(xt.multiAwaitDrain||(xt.multiAwaitDrain=!0,xt.awaitDrainWriters=new f(xt.awaitDrainWriters?[xt.awaitDrainWriters]:[]))),xt.pipes.push(ue),I("pipe count=%d opts=%j",xt.pipes.length,pe);const Xt=(!pe||pe.end!==!1)&&ue!==t.stdout&&ue!==t.stderr?Nr:or;xt.endEmitted?t.nextTick(Xt):Tt.once("end",Xt),ue.on("unpipe",tr);function tr(Gt,Jr){I("onunpipe"),Gt===Tt&&Jr&&Jr.hasUnpiped===!1&&(Jr.hasUnpiped=!0,yr())}function Nr(){I("onend"),ue.end()}let Vt,Zt=!1;function yr(){I("cleanup"),ue.removeListener("close",Gr),ue.removeListener("finish",pr),Vt&&ue.removeListener("drain",Vt),ue.removeListener("error",Er),ue.removeListener("unpipe",tr),Tt.removeListener("end",Nr),Tt.removeListener("end",or),Tt.removeListener("data",Fr),Zt=!0,Vt&&xt.awaitDrainWriters&&(!ue._writableState||ue._writableState.needDrain)&&Vt()}function ir(){Zt||(xt.pipes.length===1&&xt.pipes[0]===ue?(I("false write response, pause",0),xt.awaitDrainWriters=ue,xt.multiAwaitDrain=!1):xt.pipes.length>1&&xt.pipes.includes(ue)&&(I("false write response, pause",xt.awaitDrainWriters.size),xt.awaitDrainWriters.add(ue)),Tt.pause()),Vt||(Vt=ze(Tt,ue),ue.on("drain",Vt))}Tt.on("data",Fr);function Fr(Gt){I("ondata");const Jr=ue.write(Gt);I("dest.write",Jr),Jr===!1&&ir()}function Er(Gt){if(I("onerror",Gt),or(),ue.removeListener("error",Er),ue.listenerCount("error")===0){const Jr=ue._writableState||ue._readableState;Jr&&!Jr.errorEmitted?J(ue,Gt):ue.emit("error",Gt)}}x(ue,"error",Er);function Gr(){ue.removeListener("finish",pr),or()}ue.once("close",Gr);function pr(){I("onfinish"),ue.removeListener("close",Gr),or()}ue.once("finish",pr);function or(){I("unpipe"),Tt.unpipe(ue)}return ue.emit("pipe",Tt),ue.writableNeedDrain===!0?ir():xt.flowing||(I("pipe resume"),Tt.resume()),ue};function ze(ue,pe){return function(){const xt=ue._readableState;xt.awaitDrainWriters===pe?(I("pipeOnDrain",1),xt.awaitDrainWriters=null):xt.multiAwaitDrain&&(I("pipeOnDrain",xt.awaitDrainWriters.size),xt.awaitDrainWriters.delete(pe)),(!xt.awaitDrainWriters||xt.awaitDrainWriters.size===0)&&ue.listenerCount("data")&&ue.resume()}}vt.prototype.unpipe=function(ue){const pe=this._readableState,Tt={hasUnpiped:!1};if(pe.pipes.length===0)return this;if(!ue){const Pt=pe.pipes;pe.pipes=[],this.pause();for(let Xt=0;Xt<Pt.length;Xt++)Pt[Xt].emit("unpipe",this,{hasUnpiped:!1});return this}const xt=r(pe.pipes,ue);return xt===-1?this:(pe.pipes.splice(xt,1),pe.pipes.length===0&&this.pause(),ue.emit("unpipe",this,Tt),this)},vt.prototype.on=function(ue,pe){const Tt=T.prototype.on.call(this,ue,pe),xt=this._readableState;return ue==="data"?(xt.readableListening=this.listenerCount("readable")>0,xt.flowing!==!1&&this.resume()):ue==="readable"&&!xt.endEmitted&&!xt.readableListening&&(xt.readableListening=xt.needReadable=!0,xt.flowing=!1,xt.emittedReadable=!1,I("on readable",xt.length,xt.reading),xt.length?V(this):xt.reading||t.nextTick(kr,this)),Tt},vt.prototype.addListener=vt.prototype.on,vt.prototype.removeListener=function(ue,pe){const Tt=T.prototype.removeListener.call(this,ue,pe);return ue==="readable"&&t.nextTick(Jt,this),Tt},vt.prototype.off=vt.prototype.removeListener,vt.prototype.removeAllListeners=function(ue){const pe=T.prototype.removeAllListeners.apply(this,arguments);return(ue==="readable"||ue===void 0)&&t.nextTick(Jt,this),pe};function Jt(ue){const pe=ue._readableState;pe.readableListening=ue.listenerCount("readable")>0,pe.resumeScheduled&&pe[Ne]===!1?pe.flowing=!0:ue.listenerCount("data")>0?ue.resume():pe.readableListening||(pe.flowing=null)}function kr(ue){I("readable nexttick read 0"),ue.read(0)}vt.prototype.resume=function(){const ue=this._readableState;return ue.flowing||(I("resume"),ue.flowing=!ue.readableListening,Hr(this,ue)),ue[Ne]=!1,this};function Hr(ue,pe){pe.resumeScheduled||(pe.resumeScheduled=!0,t.nextTick(ar,ue,pe))}function ar(ue,pe){I("resume",pe.reading),pe.reading||ue.read(0),pe.resumeScheduled=!1,ue.emit("resume"),Ke(ue),pe.flowing&&!pe.reading&&ue.read(0)}vt.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ne]=!0,this};function Ke(ue){const pe=ue._readableState;for(I("flow",pe.flowing);pe.flowing&&ue.read()!==null;);}vt.prototype.wrap=function(ue){let pe=!1;ue.on("data",xt=>{!this.push(xt)&&ue.pause&&(pe=!0,ue.pause())}),ue.on("end",()=>{this.push(null)}),ue.on("error",xt=>{J(this,xt)}),ue.on("close",()=>{this.destroy()}),ue.on("destroy",()=>{this.destroy()}),this._read=()=>{pe&&ue.resume&&(pe=!1,ue.resume())};const Tt=l(ue);for(let xt=1;xt<Tt.length;xt++){const Pt=Tt[xt];this[Pt]===void 0&&typeof ue[Pt]=="function"&&(this[Pt]=ue[Pt].bind(ue))}return this},vt.prototype[b]=function(){return mt(this)},vt.prototype.iterator=function(ue){return ue!==void 0&&st(ue,"options"),mt(this,ue)};function mt(ue,pe){typeof ue.read!="function"&&(ue=vt.wrap(ue,{objectMode:!0}));const Tt=ot(ue,pe);return Tt.stream=ue,Tt}async function*ot(ue,pe){let Tt=tt;function xt(tr){this===ue?(Tt(),Tt=tt):Tt=tr}ue.on("readable",xt);let Pt;const Xt=F(ue,{writable:!1},tr=>{Pt=tr?q(Pt,tr):null,Tt(),Tt=tt});try{for(;;){const tr=ue.destroyed?null:ue.read();if(tr!==null)yield tr;else{if(Pt)throw Pt;if(Pt===null)return;await new p(xt)}}}catch(tr){throw Pt=q(Pt,tr),Pt}finally{(Pt||pe?.destroyOnReturn!==!1)&&(Pt===void 0||ue._readableState.autoDestroy)?B.destroyer(ue,null):(ue.off("readable",xt),Xt())}}d(vt.prototype,{readable:{__proto__:null,get(){const ue=this._readableState;return!!ue&&ue.readable!==!1&&!ue.destroyed&&!ue.errorEmitted&&!ue.endEmitted},set(ue){this._readableState&&(this._readableState.readable=!!ue)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ue){this._readableState&&(this._readableState.flowing=ue)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ue){this._readableState&&(this._readableState.destroyed=ue)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),d(Ct.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Ne]!==!1},set(ue){this[Ne]=!!ue}}}),vt._fromList=Le;function Le(ue,pe){if(pe.length===0)return null;let Tt;return pe.objectMode?Tt=pe.buffer.shift():!ue||ue>=pe.length?(pe.decoder?Tt=pe.buffer.join(""):pe.buffer.length===1?Tt=pe.buffer.first():Tt=pe.buffer.concat(pe.length),pe.buffer.clear()):Tt=pe.buffer.consume(ue,pe.decoder),Tt}function ct(ue){const pe=ue._readableState;I("endReadable",pe.endEmitted),pe.endEmitted||(pe.ended=!0,t.nextTick(Qt,pe,ue))}function Qt(ue,pe){if(I("endReadableNT",ue.endEmitted,ue.length),!ue.errored&&!ue.closeEmitted&&!ue.endEmitted&&ue.length===0){if(ue.endEmitted=!0,pe.emit("end"),pe.writable&&pe.allowHalfOpen===!1)t.nextTick(qt,pe);else if(ue.autoDestroy){const Tt=pe._writableState;(!Tt||Tt.autoDestroy&&(Tt.finished||Tt.writable===!1))&&pe.destroy()}}}function qt(ue){ue.writable&&!ue.writableEnded&&!ue.destroyed&&ue.end()}vt.from=function(ue,pe){return ve(vt,ue,pe)};let er;function Ht(){return er===void 0&&(er={}),er}return vt.fromWeb=function(ue,pe){return Ht().newStreamReadableFromReadableStream(ue,pe)},vt.toWeb=function(ue,pe){return Ht().newReadableStreamFromStreamReadable(ue,pe)},vt.wrap=function(ue,pe){var Tt,xt;return new vt({objectMode:(Tt=(xt=ue.readableObjectMode)!==null&&xt!==void 0?xt:ue.objectMode)!==null&&Tt!==void 0?Tt:!0,...pe,destroy(Pt,Xt){B.destroyer(ue,Pt),Xt(Pt)}}).wrap(ue)},f0}var d0,Cw;function Cv(){if(Cw)return d0;Cw=1;const t=uf(),{ArrayPrototypeSlice:r,Error:i,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:s,ObjectDefineProperties:d,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:c,Symbol:p,SymbolHasInstance:f}=hi();d0=st,st.WritableState=Se;const{EventEmitter:m}=lf(),b=Tv().Stream,{Buffer:_}=Ts(),A=Ad(),{addAbortSignal:T}=Gy(),{getHighWaterMark:x,getDefaultHighWaterMark:P}=$y(),{ERR_INVALID_ARG_TYPE:R,ERR_METHOD_NOT_IMPLEMENTED:F,ERR_MULTIPLE_CALLBACK:I,ERR_STREAM_CANNOT_PIPE:$,ERR_STREAM_DESTROYED:B,ERR_STREAM_ALREADY_FINISHED:W,ERR_STREAM_NULL_VALUES:Y,ERR_STREAM_WRITE_AFTER_END:q,ERR_UNKNOWN_ENCODING:Ie}=Aa().codes,{errorOrDestroy:K}=A;l(st.prototype,b.prototype),l(st,b);function ie(){}const ge=p("kOnFinished");function Se(D,G,re){typeof re!="boolean"&&(re=G instanceof Tl()),this.objectMode=!!(D&&D.objectMode),re&&(this.objectMode=this.objectMode||!!(D&&D.writableObjectMode)),this.highWaterMark=D?x(this,D,"writableHighWaterMark",re):P(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const we=!!(D&&D.decodeStrings===!1);this.decodeStrings=!we,this.defaultEncoding=D&&D.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=J.bind(void 0,G),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,et(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!D||D.emitClose!==!1,this.autoDestroy=!D||D.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ge]=[]}function et(D){D.buffered=[],D.bufferedIndex=0,D.allBuffers=!0,D.allNoop=!0}Se.prototype.getBuffer=function(){return r(this.buffered,this.bufferedIndex)},s(Se.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function st(D){const G=this instanceof Tl();if(!G&&!a(st,this))return new st(D);this._writableState=new Se(D,this,G),D&&(typeof D.write=="function"&&(this._write=D.write),typeof D.writev=="function"&&(this._writev=D.writev),typeof D.destroy=="function"&&(this._destroy=D.destroy),typeof D.final=="function"&&(this._final=D.final),typeof D.construct=="function"&&(this._construct=D.construct),D.signal&&T(D.signal,this)),b.call(this,D),A.construct(this,()=>{const re=this._writableState;re.writing||dt(this,re),le(this,re)})}s(st,f,{__proto__:null,value:function(D){return a(this,D)?!0:this!==st?!1:D&&D._writableState instanceof Se}}),st.prototype.pipe=function(){K(this,new $)};function Ne(D,G,re,we){const Ce=D._writableState;if(typeof re=="function")we=re,re=Ce.defaultEncoding;else{if(!re)re=Ce.defaultEncoding;else if(re!=="buffer"&&!_.isEncoding(re))throw new Ie(re);typeof we!="function"&&(we=ie)}if(G===null)throw new Y;if(!Ce.objectMode)if(typeof G=="string")Ce.decodeStrings!==!1&&(G=_.from(G,re),re="buffer");else if(G instanceof _)re="buffer";else if(b._isUint8Array(G))G=b._uint8ArrayToBuffer(G),re="buffer";else throw new R("chunk",["string","Buffer","Uint8Array"],G);let at;return Ce.ending?at=new q:Ce.destroyed&&(at=new B("write")),at?(t.nextTick(we,at),K(D,at,!0),at):(Ce.pendingcb++,gt(D,Ce,G,re,we))}st.prototype.write=function(D,G,re){return Ne(this,D,G,re)===!0},st.prototype.cork=function(){this._writableState.corked++},st.prototype.uncork=function(){const D=this._writableState;D.corked&&(D.corked--,D.writing||dt(this,D))},st.prototype.setDefaultEncoding=function(G){if(typeof G=="string"&&(G=c(G)),!_.isEncoding(G))throw new Ie(G);return this._writableState.defaultEncoding=G,this};function gt(D,G,re,we,Ce){const at=G.objectMode?1:re.length;G.length+=at;const Re=G.length<G.highWaterMark;return Re||(G.needDrain=!0),G.writing||G.corked||G.errored||!G.constructed?(G.buffered.push({chunk:re,encoding:we,callback:Ce}),G.allBuffers&&we!=="buffer"&&(G.allBuffers=!1),G.allNoop&&Ce!==ie&&(G.allNoop=!1)):(G.writelen=at,G.writecb=Ce,G.writing=!0,G.sync=!0,D._write(re,we,G.onwrite),G.sync=!1),Re&&!G.errored&&!G.destroyed}function ve(D,G,re,we,Ce,at,Re){G.writelen=we,G.writecb=Re,G.writing=!0,G.sync=!0,G.destroyed?G.onwrite(new B("write")):re?D._writev(Ce,G.onwrite):D._write(Ce,at,G.onwrite),G.sync=!1}function tt(D,G,re,we){--G.pendingcb,we(re),je(G),K(D,re)}function J(D,G){const re=D._writableState,we=re.sync,Ce=re.writecb;if(typeof Ce!="function"){K(D,new I);return}re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0,G?(G.stack,re.errored||(re.errored=G),D._readableState&&!D._readableState.errored&&(D._readableState.errored=G),we?t.nextTick(tt,D,re,G,Ce):tt(D,re,G,Ce)):(re.buffered.length>re.bufferedIndex&&dt(D,re),we?re.afterWriteTickInfo!==null&&re.afterWriteTickInfo.cb===Ce?re.afterWriteTickInfo.count++:(re.afterWriteTickInfo={count:1,cb:Ce,stream:D,state:re},t.nextTick(xe,re.afterWriteTickInfo)):Xe(D,re,1,Ce))}function xe({stream:D,state:G,count:re,cb:we}){return G.afterWriteTickInfo=null,Xe(D,G,re,we)}function Xe(D,G,re,we){for(!G.ending&&!D.destroyed&&G.length===0&&G.needDrain&&(G.needDrain=!1,D.emit("drain"));re-- >0;)G.pendingcb--,we();G.destroyed&&je(G),le(D,G)}function je(D){if(D.writing)return;for(let Ce=D.bufferedIndex;Ce<D.buffered.length;++Ce){var G;const{chunk:at,callback:Re}=D.buffered[Ce],ht=D.objectMode?1:at.length;D.length-=ht,Re((G=D.errored)!==null&&G!==void 0?G:new B("write"))}const re=D[ge].splice(0);for(let Ce=0;Ce<re.length;Ce++){var we;re[Ce]((we=D.errored)!==null&&we!==void 0?we:new B("end"))}et(D)}function dt(D,G){if(G.corked||G.bufferProcessing||G.destroyed||!G.constructed)return;const{buffered:re,bufferedIndex:we,objectMode:Ce}=G,at=re.length-we;if(!at)return;let Re=we;if(G.bufferProcessing=!0,at>1&&D._writev){G.pendingcb-=at-1;const ht=G.allNoop?ie:vt=>{for(let We=Re;We<re.length;++We)re[We].callback(vt)},Ct=G.allNoop&&Re===0?re:r(re,Re);Ct.allBuffers=G.allBuffers,ve(D,G,!0,G.length,Ct,"",ht),et(G)}else{do{const{chunk:ht,encoding:Ct,callback:vt}=re[Re];re[Re++]=null;const We=Ce?1:ht.length;ve(D,G,!1,We,ht,Ct,vt)}while(Re<re.length&&!G.writing);Re===re.length?et(G):Re>256?(re.splice(0,Re),G.bufferedIndex=0):G.bufferedIndex=Re}G.bufferProcessing=!1}st.prototype._write=function(D,G,re){if(this._writev)this._writev([{chunk:D,encoding:G}],re);else throw new F("_write()")},st.prototype._writev=null,st.prototype.end=function(D,G,re){const we=this._writableState;typeof D=="function"?(re=D,D=null,G=null):typeof G=="function"&&(re=G,G=null);let Ce;if(D!=null){const at=Ne(this,D,G);at instanceof i&&(Ce=at)}return we.corked&&(we.corked=1,this.uncork()),Ce||(!we.errored&&!we.ending?(we.ending=!0,le(this,we,!0),we.ended=!0):we.finished?Ce=new W("end"):we.destroyed&&(Ce=new B("end"))),typeof re=="function"&&(Ce||we.finished?t.nextTick(re,Ce):we[ge].push(re)),this};function It(D){return D.ending&&!D.destroyed&&D.constructed&&D.length===0&&!D.errored&&D.buffered.length===0&&!D.finished&&!D.writing&&!D.errorEmitted&&!D.closeEmitted}function Mt(D,G){let re=!1;function we(Ce){if(re){K(D,Ce??I());return}if(re=!0,G.pendingcb--,Ce){const at=G[ge].splice(0);for(let Re=0;Re<at.length;Re++)at[Re](Ce);K(D,Ce,G.sync)}else It(G)&&(G.prefinished=!0,D.emit("prefinish"),G.pendingcb++,t.nextTick(Te,D,G))}G.sync=!0,G.pendingcb++;try{D._final(we)}catch(Ce){we(Ce)}G.sync=!1}function Me(D,G){!G.prefinished&&!G.finalCalled&&(typeof D._final=="function"&&!G.destroyed?(G.finalCalled=!0,Mt(D,G)):(G.prefinished=!0,D.emit("prefinish")))}function le(D,G,re){It(G)&&(Me(D,G),G.pendingcb===0&&(re?(G.pendingcb++,t.nextTick((we,Ce)=>{It(Ce)?Te(we,Ce):Ce.pendingcb--},D,G)):It(G)&&(G.pendingcb++,Te(D,G))))}function Te(D,G){G.pendingcb--,G.finished=!0;const re=G[ge].splice(0);for(let we=0;we<re.length;we++)re[we]();if(D.emit("finish"),G.autoDestroy){const we=D._readableState;(!we||we.autoDestroy&&(we.endEmitted||we.readable===!1))&&D.destroy()}}d(st.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(D){this._writableState&&(this._writableState.destroyed=D)}},writable:{__proto__:null,get(){const D=this._writableState;return!!D&&D.writable!==!1&&!D.destroyed&&!D.errored&&!D.ending&&!D.ended},set(D){this._writableState&&(this._writableState.writable=!!D)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const D=this._writableState;return D?!D.destroyed&&!D.ending&&D.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Je=A.destroy;st.prototype.destroy=function(D,G){const re=this._writableState;return!re.destroyed&&(re.bufferedIndex<re.buffered.length||re[ge].length)&&t.nextTick(je,re),Je.call(this,D,G),this},st.prototype._undestroy=A.undestroy,st.prototype._destroy=function(D,G){G(D)},st.prototype[m.captureRejectionSymbol]=function(D){this.destroy(D)};let se;function M(){return se===void 0&&(se={}),se}return st.fromWeb=function(D,G){return M().newStreamWritableFromWritableStream(D,G)},st.toWeb=function(D){return M().newWritableStreamFromStreamWritable(D)},d0}var h0,Ow;function xR(){if(Ow)return h0;Ow=1;const t=uf(),r=Ts(),{isReadable:i,isWritable:a,isIterable:s,isNodeStream:d,isReadableNodeStream:l,isWritableNodeStream:c,isDuplexNodeStream:p,isReadableStream:f,isWritableStream:m}=Pl(),b=Fu(),{AbortError:_,codes:{ERR_INVALID_ARG_TYPE:A,ERR_INVALID_RETURN_VALUE:T}}=Aa(),{destroyer:x}=Ad(),P=Tl(),R=qy(),F=Cv(),{createDeferredPromise:I}=Ka(),$=QS(),B=globalThis.Blob||r.Blob,W=typeof B<"u"?function(Se){return Se instanceof B}:function(Se){return!1},Y=globalThis.AbortController||Xp().AbortController,{FunctionPrototypeCall:q}=hi();class Ie extends P{constructor(Se){super(Se),Se?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),Se?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}h0=function ge(Se,et){if(p(Se))return Se;if(l(Se))return ie({readable:Se});if(c(Se))return ie({writable:Se});if(d(Se))return ie({writable:!1,readable:!1});if(f(Se))return ie({readable:R.fromWeb(Se)});if(m(Se))return ie({writable:F.fromWeb(Se)});if(typeof Se=="function"){const{value:Ne,write:gt,final:ve,destroy:tt}=K(Se);if(s(Ne))return $(Ie,Ne,{objectMode:!0,write:gt,final:ve,destroy:tt});const J=Ne?.then;if(typeof J=="function"){let xe;const Xe=q(J,Ne,je=>{if(je!=null)throw new T("nully","body",je)},je=>{x(xe,je)});return xe=new Ie({objectMode:!0,readable:!1,write:gt,final(je){ve(async()=>{try{await Xe,t.nextTick(je,null)}catch(dt){t.nextTick(je,dt)}})},destroy:tt})}throw new T("Iterable, AsyncIterable or AsyncFunction",et,Ne)}if(W(Se))return ge(Se.arrayBuffer());if(s(Se))return $(Ie,Se,{objectMode:!0,writable:!1});if(f(Se?.readable)&&m(Se?.writable))return Ie.fromWeb(Se);if(typeof Se?.writable=="object"||typeof Se?.readable=="object"){const Ne=Se!=null&&Se.readable?l(Se?.readable)?Se?.readable:ge(Se.readable):void 0,gt=Se!=null&&Se.writable?c(Se?.writable)?Se?.writable:ge(Se.writable):void 0;return ie({readable:Ne,writable:gt})}const st=Se?.then;if(typeof st=="function"){let Ne;return q(st,Se,gt=>{gt!=null&&Ne.push(gt),Ne.push(null)},gt=>{x(Ne,gt)}),Ne=new Ie({objectMode:!0,writable:!1,read(){}})}throw new A(et,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Se)};function K(ge){let{promise:Se,resolve:et}=I();const st=new Y,Ne=st.signal;return{value:ge(async function*(){for(;;){const ve=Se;Se=null;const{chunk:tt,done:J,cb:xe}=await ve;if(t.nextTick(xe),J)return;if(Ne.aborted)throw new _(void 0,{cause:Ne.reason});({promise:Se,resolve:et}=I()),yield tt}}(),{signal:Ne}),write(ve,tt,J){const xe=et;et=null,xe({chunk:ve,done:!1,cb:J})},final(ve){const tt=et;et=null,tt({done:!0,cb:ve})},destroy(ve,tt){st.abort(),tt(ve)}}}function ie(ge){const Se=ge.readable&&typeof ge.readable.read!="function"?R.wrap(ge.readable):ge.readable,et=ge.writable;let st=!!i(Se),Ne=!!a(et),gt,ve,tt,J,xe;function Xe(je){const dt=J;J=null,dt?dt(je):je&&xe.destroy(je)}return xe=new Ie({readableObjectMode:!!(Se!=null&&Se.readableObjectMode),writableObjectMode:!!(et!=null&&et.writableObjectMode),readable:st,writable:Ne}),Ne&&(b(et,je=>{Ne=!1,je&&x(Se,je),Xe(je)}),xe._write=function(je,dt,It){et.write(je,dt)?It():gt=It},xe._final=function(je){et.end(),ve=je},et.on("drain",function(){if(gt){const je=gt;gt=null,je()}}),et.on("finish",function(){if(ve){const je=ve;ve=null,je()}})),st&&(b(Se,je=>{st=!1,je&&x(Se,je),Xe(je)}),Se.on("readable",function(){if(tt){const je=tt;tt=null,je()}}),Se.on("end",function(){xe.push(null)}),xe._read=function(){for(;;){const je=Se.read();if(je===null){tt=xe._read;return}if(!xe.push(je))return}}),xe._destroy=function(je,dt){!je&&J!==null&&(je=new _),tt=null,gt=null,ve=null,J===null?dt(je):(J=dt,x(et,je),x(Se,je))},xe}return h0}var p0,Pw;function Tl(){if(Pw)return p0;Pw=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:r,ObjectKeys:i,ObjectSetPrototypeOf:a}=hi();p0=l;const s=qy(),d=Cv();a(l.prototype,s.prototype),a(l,s);{const m=i(d.prototype);for(let b=0;b<m.length;b++){const _=m[b];l.prototype[_]||(l.prototype[_]=d.prototype[_])}}function l(m){if(!(this instanceof l))return new l(m);s.call(this,m),d.call(this,m),m?(this.allowHalfOpen=m.allowHalfOpen!==!1,m.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),m.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(l.prototype,{writable:{__proto__:null,...r(d.prototype,"writable")},writableHighWaterMark:{__proto__:null,...r(d.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...r(d.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...r(d.prototype,"writableBuffer")},writableLength:{__proto__:null,...r(d.prototype,"writableLength")},writableFinished:{__proto__:null,...r(d.prototype,"writableFinished")},writableCorked:{__proto__:null,...r(d.prototype,"writableCorked")},writableEnded:{__proto__:null,...r(d.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...r(d.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(m){this._readableState&&this._writableState&&(this._readableState.destroyed=m,this._writableState.destroyed=m)}}});let c;function p(){return c===void 0&&(c={}),c}l.fromWeb=function(m,b){return p().newStreamDuplexFromReadableWritablePair(m,b)},l.toWeb=function(m){return p().newReadableWritablePairFromDuplex(m)};let f;return l.from=function(m){return f||(f=xR()),f(m,"body")},p0}var g0,Iw;function XS(){if(Iw)return g0;Iw=1;const{ObjectSetPrototypeOf:t,Symbol:r}=hi();g0=l;const{ERR_METHOD_NOT_IMPLEMENTED:i}=Aa().codes,a=Tl(),{getHighWaterMark:s}=$y();t(l.prototype,a.prototype),t(l,a);const d=r("kCallback");function l(f){if(!(this instanceof l))return new l(f);const m=f?s(this,f,"readableHighWaterMark",!0):null;m===0&&(f={...f,highWaterMark:null,readableHighWaterMark:m,writableHighWaterMark:f.writableHighWaterMark||0}),a.call(this,f),this._readableState.sync=!1,this[d]=null,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",p)}function c(f){typeof this._flush=="function"&&!this.destroyed?this._flush((m,b)=>{if(m){f?f(m):this.destroy(m);return}b!=null&&this.push(b),this.push(null),f&&f()}):(this.push(null),f&&f())}function p(){this._final!==c&&c.call(this)}return l.prototype._final=c,l.prototype._transform=function(f,m,b){throw new i("_transform()")},l.prototype._write=function(f,m,b){const _=this._readableState,A=this._writableState,T=_.length;this._transform(f,m,(x,P)=>{if(x){b(x);return}P!=null&&this.push(P),A.ended||T===_.length||_.length<_.highWaterMark?b():this[d]=b})},l.prototype._read=function(){if(this[d]){const f=this[d];this[d]=null,f()}},g0}var y0,Nw;function ZS(){if(Nw)return y0;Nw=1;const{ObjectSetPrototypeOf:t}=hi();y0=i;const r=XS();t(i.prototype,r.prototype),t(i,r);function i(a){if(!(this instanceof i))return new i(a);r.call(this,a)}return i.prototype._transform=function(a,s,d){d(null,a)},y0}var m0,Fw;function Ov(){if(Fw)return m0;Fw=1;const t=uf(),{ArrayIsArray:r,Promise:i,SymbolAsyncIterator:a,SymbolDispose:s}=hi(),d=Fu(),{once:l}=Ka(),c=Ad(),p=Tl(),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:b,ERR_MISSING_ARGS:_,ERR_STREAM_DESTROYED:A,ERR_STREAM_PREMATURE_CLOSE:T},AbortError:x}=Aa(),{validateFunction:P,validateAbortSignal:R}=sg(),{isIterable:F,isReadable:I,isReadableNodeStream:$,isNodeStream:B,isTransformStream:W,isWebStream:Y,isReadableStream:q,isReadableFinished:Ie}=Pl(),K=globalThis.AbortController||Xp().AbortController;let ie,ge,Se;function et(je,dt,It){let Mt=!1;je.on("close",()=>{Mt=!0});const Me=d(je,{readable:dt,writable:It},le=>{Mt=!le});return{destroy:le=>{Mt||(Mt=!0,c.destroyer(je,le||new A("pipe")))},cleanup:Me}}function st(je){return P(je[je.length-1],"streams[stream.length - 1]"),je.pop()}function Ne(je){if(F(je))return je;if($(je))return gt(je);throw new m("val",["Readable","Iterable","AsyncIterable"],je)}async function*gt(je){ge||(ge=qy()),yield*ge.prototype[a].call(je)}async function ve(je,dt,It,{end:Mt}){let Me,le=null;const Te=M=>{if(M&&(Me=M),le){const D=le;le=null,D()}},Je=()=>new i((M,D)=>{Me?D(Me):le=()=>{Me?D(Me):M()}});dt.on("drain",Te);const se=d(dt,{readable:!1},Te);try{dt.writableNeedDrain&&await Je();for await(const M of je)dt.write(M)||await Je();Mt&&(dt.end(),await Je()),It()}catch(M){It(Me!==M?f(Me,M):M)}finally{se(),dt.off("drain",Te)}}async function tt(je,dt,It,{end:Mt}){W(dt)&&(dt=dt.writable);const Me=dt.getWriter();try{for await(const le of je)await Me.ready,Me.write(le).catch(()=>{});await Me.ready,Mt&&await Me.close(),It()}catch(le){try{await Me.abort(le),It(le)}catch(Te){It(Te)}}}function J(...je){return xe(je,l(st(je)))}function xe(je,dt,It){if(je.length===1&&r(je[0])&&(je=je[0]),je.length<2)throw new _("streams");const Mt=new K,Me=Mt.signal,le=It?.signal,Te=[];R(le,"options.signal");function Je(){Ce(new x)}Se=Se||Ka().addAbortListener;let se;le&&(se=Se(le,Je));let M,D;const G=[];let re=0;function we(vt){Ce(vt,--re===0)}function Ce(vt,We){var $e;if(vt&&(!M||M.code==="ERR_STREAM_PREMATURE_CLOSE")&&(M=vt),!(!M&&!We)){for(;G.length;)G.shift()(M);($e=se)===null||$e===void 0||$e[s](),Mt.abort(),We&&(M||Te.forEach(Oe=>Oe()),t.nextTick(dt,M,D))}}let at;for(let vt=0;vt<je.length;vt++){const We=je[vt],$e=vt<je.length-1,Oe=vt>0,lt=$e||It?.end!==!1,Q=vt===je.length-1;if(B(We)){let k=function(V){V&&V.name!=="AbortError"&&V.code!=="ERR_STREAM_PREMATURE_CLOSE"&&we(V)};var Ct=k;if(lt){const{destroy:V,cleanup:j}=et(We,$e,Oe);G.push(V),I(We)&&Q&&Te.push(j)}We.on("error",k),I(We)&&Q&&Te.push(()=>{We.removeListener("error",k)})}if(vt===0)if(typeof We=="function"){if(at=We({signal:Me}),!F(at))throw new b("Iterable, AsyncIterable or Stream","source",at)}else F(We)||$(We)||W(We)?at=We:at=p.from(We);else if(typeof We=="function"){if(W(at)){var Re;at=Ne((Re=at)===null||Re===void 0?void 0:Re.readable)}else at=Ne(at);if(at=We(at,{signal:Me}),$e){if(!F(at,!0))throw new b("AsyncIterable",`transform[${vt-1}]`,at)}else{var ht;ie||(ie=ZS());const k=new ie({objectMode:!0}),V=(ht=at)===null||ht===void 0?void 0:ht.then;if(typeof V=="function")re++,V.call(at,Ze=>{D=Ze,Ze!=null&&k.write(Ze),lt&&k.end(),t.nextTick(we)},Ze=>{k.destroy(Ze),t.nextTick(we,Ze)});else if(F(at,!0))re++,ve(at,k,we,{end:lt});else if(q(at)||W(at)){const Ze=at.readable||at;re++,ve(Ze,k,we,{end:lt})}else throw new b("AsyncIterable or Promise","destination",at);at=k;const{destroy:j,cleanup:qe}=et(at,!1,!0);G.push(j),Q&&Te.push(qe)}}else if(B(We)){if($(at)){re+=2;const k=Xe(at,We,we,{end:lt});I(We)&&Q&&Te.push(k)}else if(W(at)||q(at)){const k=at.readable||at;re++,ve(k,We,we,{end:lt})}else if(F(at))re++,ve(at,We,we,{end:lt});else throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],at);at=We}else if(Y(We)){if($(at))re++,tt(Ne(at),We,we,{end:lt});else if(q(at)||F(at))re++,tt(at,We,we,{end:lt});else if(W(at))re++,tt(at.readable,We,we,{end:lt});else throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],at);at=We}else at=p.from(We)}return(Me!=null&&Me.aborted||le!=null&&le.aborted)&&t.nextTick(Je),at}function Xe(je,dt,It,{end:Mt}){let Me=!1;if(dt.on("close",()=>{Me||It(new T)}),je.pipe(dt,{end:!1}),Mt){let Te=function(){Me=!0,dt.end()};var le=Te;Ie(je)?t.nextTick(Te):je.once("end",Te)}else It();return d(je,{readable:!0,writable:!1},Te=>{const Je=je._readableState;Te&&Te.code==="ERR_STREAM_PREMATURE_CLOSE"&&Je&&Je.ended&&!Je.errored&&!Je.errorEmitted?je.once("end",It).once("error",It):It(Te)}),d(dt,{readable:!1,writable:!0},It)}return m0={pipelineImpl:xe,pipeline:J},m0}var v0,Dw;function eE(){if(Dw)return v0;Dw=1;const{pipeline:t}=Ov(),r=Tl(),{destroyer:i}=Ad(),{isNodeStream:a,isReadable:s,isWritable:d,isWebStream:l,isTransformStream:c,isWritableStream:p,isReadableStream:f}=Pl(),{AbortError:m,codes:{ERR_INVALID_ARG_VALUE:b,ERR_MISSING_ARGS:_}}=Aa(),A=Fu();return v0=function(...x){if(x.length===0)throw new _("streams");if(x.length===1)return r.from(x[0]);const P=[...x];if(typeof x[0]=="function"&&(x[0]=r.from(x[0])),typeof x[x.length-1]=="function"){const ie=x.length-1;x[ie]=r.from(x[ie])}for(let ie=0;ie<x.length;++ie)if(!(!a(x[ie])&&!l(x[ie]))){if(ie<x.length-1&&!(s(x[ie])||f(x[ie])||c(x[ie])))throw new b(`streams[${ie}]`,P[ie],"must be readable");if(ie>0&&!(d(x[ie])||p(x[ie])||c(x[ie])))throw new b(`streams[${ie}]`,P[ie],"must be writable")}let R,F,I,$,B;function W(ie){const ge=$;$=null,ge?ge(ie):ie?B.destroy(ie):!K&&!Ie&&B.destroy()}const Y=x[0],q=t(x,W),Ie=!!(d(Y)||p(Y)||c(Y)),K=!!(s(q)||f(q)||c(q));if(B=new r({writableObjectMode:!!(Y!=null&&Y.writableObjectMode),readableObjectMode:!!(q!=null&&q.readableObjectMode),writable:Ie,readable:K}),Ie){if(a(Y))B._write=function(ge,Se,et){Y.write(ge,Se)?et():R=et},B._final=function(ge){Y.end(),F=ge},Y.on("drain",function(){if(R){const ge=R;R=null,ge()}});else if(l(Y)){const Se=(c(Y)?Y.writable:Y).getWriter();B._write=async function(et,st,Ne){try{await Se.ready,Se.write(et).catch(()=>{}),Ne()}catch(gt){Ne(gt)}},B._final=async function(et){try{await Se.ready,Se.close().catch(()=>{}),F=et}catch(st){et(st)}}}const ie=c(q)?q.readable:q;A(ie,()=>{if(F){const ge=F;F=null,ge()}})}if(K){if(a(q))q.on("readable",function(){if(I){const ie=I;I=null,ie()}}),q.on("end",function(){B.push(null)}),B._read=function(){for(;;){const ie=q.read();if(ie===null){I=B._read;return}if(!B.push(ie))return}};else if(l(q)){const ge=(c(q)?q.readable:q).getReader();B._read=async function(){for(;;)try{const{value:Se,done:et}=await ge.read();if(!B.push(Se))return;if(et){B.push(null);return}}catch{return}}}}return B._destroy=function(ie,ge){!ie&&$!==null&&(ie=new m),I=null,R=null,F=null,$===null?ge(ie):($=ge,a(q)&&i(q,ie))},B},v0}var Uw;function TR(){if(Uw)return fy;Uw=1;const t=globalThis.AbortController||Xp().AbortController,{codes:{ERR_INVALID_ARG_VALUE:r,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:s},AbortError:d}=Aa(),{validateAbortSignal:l,validateInteger:c,validateObject:p}=sg(),f=hi().Symbol("kWeak"),m=hi().Symbol("kResistStopPropagation"),{finished:b}=Fu(),_=eE(),{addAbortSignalNoValidate:A}=Gy(),{isWritable:T,isNodeStream:x}=Pl(),{deprecate:P}=Ka(),{ArrayPrototypePush:R,Boolean:F,MathFloor:I,Number:$,NumberIsNaN:B,Promise:W,PromiseReject:Y,PromiseResolve:q,PromisePrototypeThen:Ie,Symbol:K}=hi(),ie=K("kEmpty"),ge=K("kEof");function Se(le,Te){if(Te!=null&&p(Te,"options"),Te?.signal!=null&&l(Te.signal,"options.signal"),x(le)&&!T(le))throw new r("stream",le,"must be writable");const Je=_(this,le);return Te!=null&&Te.signal&&A(Te.signal,Je),Je}function et(le,Te){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);Te!=null&&p(Te,"options"),Te?.signal!=null&&l(Te.signal,"options.signal");let Je=1;Te?.concurrency!=null&&(Je=I(Te.concurrency));let se=Je-1;return Te?.highWaterMark!=null&&(se=I(Te.highWaterMark)),c(Je,"options.concurrency",1),c(se,"options.highWaterMark",0),se+=Je,(async function*(){const D=Ka().AbortSignalAny([Te?.signal].filter(F)),G=this,re=[],we={signal:D};let Ce,at,Re=!1,ht=0;function Ct(){Re=!0,vt()}function vt(){ht-=1,We()}function We(){at&&!Re&&ht<Je&&re.length<se&&(at(),at=null)}async function $e(){try{for await(let Oe of G){if(Re)return;if(D.aborted)throw new d;try{if(Oe=le(Oe,we),Oe===ie)continue;Oe=q(Oe)}catch(lt){Oe=Y(lt)}ht+=1,Ie(Oe,vt,Ct),re.push(Oe),Ce&&(Ce(),Ce=null),!Re&&(re.length>=se||ht>=Je)&&await new W(lt=>{at=lt})}re.push(ge)}catch(Oe){const lt=Y(Oe);Ie(lt,vt,Ct),re.push(lt)}finally{Re=!0,Ce&&(Ce(),Ce=null)}}$e();try{for(;;){for(;re.length>0;){const Oe=await re[0];if(Oe===ge)return;if(D.aborted)throw new d;Oe!==ie&&(yield Oe),re.shift(),We()}await new W(Oe=>{Ce=Oe})}}finally{Re=!0,at&&(at(),at=null)}}).call(this)}function st(le=void 0){return le!=null&&p(le,"options"),le?.signal!=null&&l(le.signal,"options.signal"),(async function*(){let Je=0;for await(const M of this){var se;if(le!=null&&(se=le.signal)!==null&&se!==void 0&&se.aborted)throw new d({cause:le.signal.reason});yield[Je++,M]}}).call(this)}async function Ne(le,Te=void 0){for await(const Je of J.call(this,le,Te))return!0;return!1}async function gt(le,Te=void 0){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);return!await Ne.call(this,async(...Je)=>!await le(...Je),Te)}async function ve(le,Te){for await(const Je of J.call(this,le,Te))return Je}async function tt(le,Te){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);async function Je(se,M){return await le(se,M),ie}for await(const se of et.call(this,Je,Te));}function J(le,Te){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);async function Je(se,M){return await le(se,M)?se:ie}return et.call(this,Je,Te)}class xe extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Xe(le,Te,Je){var se;if(typeof le!="function")throw new i("reducer",["Function","AsyncFunction"],le);Je!=null&&p(Je,"options"),Je?.signal!=null&&l(Je.signal,"options.signal");let M=arguments.length>1;if(Je!=null&&(se=Je.signal)!==null&&se!==void 0&&se.aborted){const Ce=new d(void 0,{cause:Je.signal.reason});throw this.once("error",()=>{}),await b(this.destroy(Ce)),Ce}const D=new t,G=D.signal;if(Je!=null&&Je.signal){const Ce={once:!0,[f]:this,[m]:!0};Je.signal.addEventListener("abort",()=>D.abort(),Ce)}let re=!1;try{for await(const Ce of this){var we;if(re=!0,Je!=null&&(we=Je.signal)!==null&&we!==void 0&&we.aborted)throw new d;M?Te=await le(Te,Ce,{signal:G}):(Te=Ce,M=!0)}if(!re&&!M)throw new xe}finally{D.abort()}return Te}async function je(le){le!=null&&p(le,"options"),le?.signal!=null&&l(le.signal,"options.signal");const Te=[];for await(const se of this){var Je;if(le!=null&&(Je=le.signal)!==null&&Je!==void 0&&Je.aborted)throw new d(void 0,{cause:le.signal.reason});R(Te,se)}return Te}function dt(le,Te){const Je=et.call(this,le,Te);return(async function*(){for await(const M of Je)yield*M}).call(this)}function It(le){if(le=$(le),B(le))return 0;if(le<0)throw new s("number",">= 0",le);return le}function Mt(le,Te=void 0){return Te!=null&&p(Te,"options"),Te?.signal!=null&&l(Te.signal,"options.signal"),le=It(le),(async function*(){var se;if(Te!=null&&(se=Te.signal)!==null&&se!==void 0&&se.aborted)throw new d;for await(const D of this){var M;if(Te!=null&&(M=Te.signal)!==null&&M!==void 0&&M.aborted)throw new d;le--<=0&&(yield D)}}).call(this)}function Me(le,Te=void 0){return Te!=null&&p(Te,"options"),Te?.signal!=null&&l(Te.signal,"options.signal"),le=It(le),(async function*(){var se;if(Te!=null&&(se=Te.signal)!==null&&se!==void 0&&se.aborted)throw new d;for await(const D of this){var M;if(Te!=null&&(M=Te.signal)!==null&&M!==void 0&&M.aborted)throw new d;if(le-- >0&&(yield D),le<=0)return}}).call(this)}return fy.streamReturningOperators={asIndexedPairs:P(st,"readable.asIndexedPairs will be removed in a future version."),drop:Mt,filter:J,flatMap:dt,map:et,take:Me,compose:Se},fy.promiseReturningOperators={every:gt,forEach:tt,reduce:Xe,toArray:je,some:Ne,find:ve},fy}var b0,Lw;function tE(){if(Lw)return b0;Lw=1;const{ArrayPrototypePop:t,Promise:r}=hi(),{isIterable:i,isNodeStream:a,isWebStream:s}=Pl(),{pipelineImpl:d}=Ov(),{finished:l}=Fu();rE();function c(...p){return new r((f,m)=>{let b,_;const A=p[p.length-1];if(A&&typeof A=="object"&&!a(A)&&!i(A)&&!s(A)){const T=t(p);b=T.signal,_=T.end}d(p,(T,x)=>{T?m(T):f(x)},{signal:b,end:_})})}return b0={finished:l,pipeline:c},b0}var Mw;function rE(){if(Mw)return Ym.exports;Mw=1;const{Buffer:t}=Ts(),{ObjectDefineProperty:r,ObjectKeys:i,ReflectApply:a}=hi(),{promisify:{custom:s}}=Ka(),{streamReturningOperators:d,promiseReturningOperators:l}=TR(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=Aa(),p=eE(),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:m}=$y(),{pipeline:b}=Ov(),{destroyer:_}=Ad(),A=Fu(),T=tE(),x=Pl(),P=Ym.exports=Tv().Stream;P.isDestroyed=x.isDestroyed,P.isDisturbed=x.isDisturbed,P.isErrored=x.isErrored,P.isReadable=x.isReadable,P.isWritable=x.isWritable,P.Readable=qy();for(const I of i(d)){let B=function(...W){if(new.target)throw c();return P.Readable.from(a($,this,W))};var F=B;const $=d[I];r(B,"name",{__proto__:null,value:$.name}),r(B,"length",{__proto__:null,value:$.length}),r(P.Readable.prototype,I,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}for(const I of i(l)){let B=function(...Y){if(new.target)throw c();return a($,this,Y)};var F=B;const $=l[I];r(B,"name",{__proto__:null,value:$.name}),r(B,"length",{__proto__:null,value:$.length}),r(P.Readable.prototype,I,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}P.Writable=Cv(),P.Duplex=Tl(),P.Transform=XS(),P.PassThrough=ZS(),P.pipeline=b;const{addAbortSignal:R}=Gy();return P.addAbortSignal=R,P.finished=A,P.destroy=_,P.compose=p,P.setDefaultHighWaterMark=f,P.getDefaultHighWaterMark=m,r(P,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return T}}),r(b,s,{__proto__:null,enumerable:!0,get(){return T.pipeline}}),r(A,s,{__proto__:null,enumerable:!0,get(){return T.finished}}),P.Stream=P,P._isUint8Array=function($){return $ instanceof Uint8Array},P._uint8ArrayToBuffer=function($){return t.from($.buffer,$.byteOffset,$.byteLength)},Ym.exports}var kw;function nE(){return kw||(kw=1,function(t){const r=rE(),i=tE(),a=r.Readable.destroy;t.exports=r.Readable,t.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,t.exports._isUint8Array=r._isUint8Array,t.exports.isDisturbed=r.isDisturbed,t.exports.isErrored=r.isErrored,t.exports.isReadable=r.isReadable,t.exports.Readable=r.Readable,t.exports.Writable=r.Writable,t.exports.Duplex=r.Duplex,t.exports.Transform=r.Transform,t.exports.PassThrough=r.PassThrough,t.exports.addAbortSignal=r.addAbortSignal,t.exports.finished=r.finished,t.exports.destroy=r.destroy,t.exports.destroy=a,t.exports.pipeline=r.pipeline,t.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return i}}),t.exports.Stream=r.Stream,t.exports.default=t.exports}(Jm)),Jm.exports}var ep={},tp={},Zc={},rp={},Bw;function iE(){if(Bw)return rp;Bw=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.BlankNode=void 0;class t{constructor(i){this.termType="BlankNode",this.value=i}equals(i){return!!i&&i.termType==="BlankNode"&&i.value===this.value}}return rp.BlankNode=t,rp}var np={},ip={},Hw;function aE(){if(Hw)return ip;Hw=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.DefaultGraph=void 0;class t{constructor(){this.termType="DefaultGraph",this.value=""}equals(i){return!!i&&i.termType==="DefaultGraph"}}return ip.DefaultGraph=t,t.INSTANCE=new t,ip}var ap={},op={},jw;function Pv(){if(jw)return op;jw=1,Object.defineProperty(op,"__esModule",{value:!0}),op.NamedNode=void 0;class t{constructor(i){this.termType="NamedNode",this.value=i}equals(i){return!!i&&i.termType==="NamedNode"&&i.value===this.value}}return op.NamedNode=t,op}var Vw;function oE(){if(Vw)return ap;Vw=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.Literal=void 0;const t=Pv();class r{constructor(a,s){this.termType="Literal",this.value=a,typeof s=="string"?(this.language=s,this.datatype=r.RDF_LANGUAGE_STRING):s?(this.language="",this.datatype=s):(this.language="",this.datatype=r.XSD_STRING)}equals(a){return!!a&&a.termType==="Literal"&&a.value===this.value&&a.language===this.language&&this.datatype.equals(a.datatype)}}return ap.Literal=r,r.RDF_LANGUAGE_STRING=new t.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new t.NamedNode("http://www.w3.org/2001/XMLSchema#string"),ap}var sp={},Kw;function sE(){if(Kw)return sp;Kw=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.Quad=void 0;class t{constructor(i,a,s,d){this.termType="Quad",this.value="",this.subject=i,this.predicate=a,this.object=s,this.graph=d}equals(i){return!!i&&(i.termType==="Quad"||!i.termType)&&this.subject.equals(i.subject)&&this.predicate.equals(i.predicate)&&this.object.equals(i.object)&&this.graph.equals(i.graph)}}return sp.Quad=t,sp}var lp={},Gw;function lE(){if(Gw)return lp;Gw=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.Variable=void 0;class t{constructor(i){this.termType="Variable",this.value=i}equals(i){return!!i&&i.termType==="Variable"&&i.value===this.value}}return lp.Variable=t,lp}var $w;function CR(){if($w)return np;$w=1,Object.defineProperty(np,"__esModule",{value:!0}),np.DataFactory=void 0;const t=iE(),r=aE(),i=oE(),a=Pv(),s=sE(),d=lE();let l=0;class c{constructor(f){this.blankNodeCounter=0,f=f||{},this.blankNodePrefix=f.blankNodePrefix||`df_${l++}_`}namedNode(f){return new a.NamedNode(f)}blankNode(f){return new t.BlankNode(f||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(f,m){return new i.Literal(f,m)}variable(f){return new d.Variable(f)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(f,m,b,_){return new s.Quad(f,m,b,_||this.defaultGraph())}fromTerm(f){switch(f.termType){case"NamedNode":return this.namedNode(f.value);case"BlankNode":return this.blankNode(f.value);case"Literal":return f.language?this.literal(f.value,f.language):f.datatype.equals(i.Literal.XSD_STRING)?this.literal(f.value):this.literal(f.value,this.fromTerm(f.datatype));case"Variable":return this.variable(f.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(f.subject),this.fromTerm(f.predicate),this.fromTerm(f.object),this.fromTerm(f.graph))}}fromQuad(f){return this.fromTerm(f)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return np.DataFactory=c,np}var qw;function OR(){return qw||(qw=1,function(t){var r=Zc&&Zc.__createBinding||(Object.create?function(a,s,d,l){l===void 0&&(l=d);var c=Object.getOwnPropertyDescriptor(s,d);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,l,c)}:function(a,s,d,l){l===void 0&&(l=d),a[l]=s[d]}),i=Zc&&Zc.__exportStar||function(a,s){for(var d in a)d!=="default"&&!Object.prototype.hasOwnProperty.call(s,d)&&r(s,a,d)};Object.defineProperty(t,"__esModule",{value:!0}),i(iE(),t),i(CR(),t),i(aE(),t),i(oE(),t),i(Pv(),t),i(sE(),t),i(lE(),t)}(Zc)),Zc}var up={},cp={},zw;function PR(){if(zw)return cp;zw=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.ContainerHandlerIdentifier=void 0;let t=class{canCombineWithGraph(){return!0}async handle(i,a,s,d,l,c){let p;if(a.emittedStack[c+1]&&a.idStack[c+1])p=a.idStack[c+1][0];else{const b=await s.getContainerKey(d[c],d,c)!==null?await s.resourceToTerm(await a.getContext(d),d[c]):s.dataFactory.blankNode();if(!b){a.emittedStack[c]=!1;return}p=b,a.idStack[c+1]=[p]}let f=a.idStack[c];f||(f=a.idStack[c]=[]),f.some(m=>m.equals(p))||f.push(p),await a.handlePendingContainerFlushBuffers()||(a.emittedStack[c]=!1)}};return cp.ContainerHandlerIdentifier=t,cp}var fp={},dp={},Ww;function zy(){if(Ww)return dp;Ww=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.EntryHandlerPredicate=void 0;const t=Ea(),r=cf();let i=class uE{static async handlePredicateObject(s,d,l,c,p,f,m,b,_){const A=await d.getPropertiesDepth(l,c),T=await d.getDepthOffsetGraph(c,l),x=c-T,P=s.idStack[A];if(P&&!_)for(const R of P)if(T>=0){const I=s.idStack[x-1];if(I)for(const $ of I)d.emitQuadChecked(c,R,p,f,$,m,b);else m?(d.validateReverseSubject(f),s.getUnidentifiedGraphBufferSafe(x-1).push({subject:f,predicate:p,object:R,isEmbedded:b})):s.getUnidentifiedGraphBufferSafe(x-1).push({subject:R,predicate:p,object:f,isEmbedded:b})}else{const I=await d.getGraphContainerValue(l,A);d.emitQuadChecked(c,R,p,f,I,m,b)}else if(m&&d.validateReverseSubject(f),_){if(s.rdfstar){s.idStack[c]&&s.emitError(new t.ErrorCoded(`Found an illegal @id inside an annotation: ${s.idStack[c][0].value}`,t.ERROR_CODES.INVALID_ANNOTATION));for(let I=0;I<c;I++)await d.unaliasKeyword(l[I],l,I)==="@id"&&s.emitError(new t.ErrorCoded("Found an illegal annotation inside an embedded node",t.ERROR_CODES.INVALID_ANNOTATION));const R=s.getAnnotationsBufferSafe(A),F={predicate:p,object:f,reverse:m,nestedAnnotations:[],depth:A};R.push(F);for(let I=R.length-2;I>=0;I--){const $=R[I];$.depth>A&&(F.nestedAnnotations.push($),R.splice(I,1))}}}else s.getUnidentifiedValueBufferSafe(A).push({predicate:p,object:f,reverse:m,isEmbedded:b})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(s,d,l,c,p){const f=l[c];if(f){const m=await s.getContext(l);if(!s.jsonLiteralStack[c]&&await d.predicateToTerm(m,l[c]))return r.Util.getContextValueType(m,f)==="@json"&&(s.jsonLiteralStack[c+1]=!0),!0}return!1}async test(s,d,l,c,p){return c[p]}async handle(s,d,l,c,p,f,m){const b=c[f],_=await s.getContext(c),A=await d.predicateToTerm(_,l);if(A){const T=await d.valueToTerm(_,l,p,f,c);if(T.length)for(let x of T){let P=await d.unaliasKeywordParent(c,f);const R=r.Util.isPropertyReverse(_,b,P);let F=0;for(;P==="@reverse"||typeof P=="number";)typeof P=="number"?F++:f--,P=await d.unaliasKeywordParent(c,f-F);const I=r.Util.isPropertyInEmbeddedNode(P);d.validateReverseInEmbeddedNode(l,R,I);const $=r.Util.isPropertyInAnnotationObject(P);if(p){const B="@list"in r.Util.getContextValueContainer(_,l);if(B||p["@list"]){if((B&&!Array.isArray(p)&&!p["@list"]||p["@list"]&&!Array.isArray(p["@list"]))&&x!==d.rdfNil){const W=d.dataFactory.blankNode();s.emitQuad(f,d.dataFactory.quad(W,d.rdfRest,d.rdfNil,d.getDefaultGraph())),s.emitQuad(f,d.dataFactory.quad(W,d.rdfFirst,x,d.getDefaultGraph())),x=W}if(R&&!s.allowSubjectList)throw new t.ErrorCoded(`Found illegal list value in subject position at ${l}`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await uE.handlePredicateObject(s,d,c,f,A,x,R,I,$)}}}};return dp.EntryHandlerPredicate=i,dp}var Jw;function IR(){if(Jw)return fp;Jw=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.ContainerHandlerIndex=void 0;const t=Ea(),r=zy(),i=cf();let a=class{canCombineWithGraph(){return!0}async handle(d,l,c,p,f,m){if(!Array.isArray(f)){const b="@graph"in d,_=await l.getContext(p),A=p[m-1],T=i.Util.getContextValueIndex(_,A);if(T){if(t.Util.isPotentialKeyword(T))throw new t.ErrorCoded(`Keywords can not be used as @index value, got: ${T}`,t.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof T!="string")throw new t.ErrorCoded(`@index values must be strings, got: ${T}`,t.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof f!="object"){if(i.Util.getContextValueType(_,A)!=="@id")throw new t.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${f}`,t.ERROR_CODES.INVALID_VALUE_OBJECT);const R=c.resourceToTerm(_,f);R&&(l.idStack[m+1]=[R])}const P=c.createVocabOrBaseTerm(_,T);if(P){const R=await c.valueToTerm(_,T,await c.getContainerKey(p[m],p,m),m,p);if(b){const F=await c.getGraphContainerValue(p,m+1);for(const I of R)l.emitQuad(m,c.dataFactory.quad(F,P,I,c.getDefaultGraph()))}else for(const F of R)await r.EntryHandlerPredicate.handlePredicateObject(l,c,p,m+1,P,F,!1,!1,!1)}}const x=b?2:1;await l.newOnValueJob(p.slice(0,p.length-x),f,m-x,!0),await l.handlePendingContainerFlushBuffers()}l.emittedStack[m]=!1}};return fp.ContainerHandlerIndex=a,fp}var hp={},Yw;function NR(){if(Yw)return hp;Yw=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.ContainerHandlerLanguage=void 0;const t=Ea();let r=class{canCombineWithGraph(){return!1}async handle(a,s,d,l,c,p){const f=await d.getContainerKey(l[p],l,p);if(Array.isArray(c))c=c.map(m=>({"@value":m,"@language":f}));else{if(typeof c!="string")throw new t.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(c)}', but expected string`,t.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);c={"@value":c,"@language":f}}await s.newOnValueJob(l.slice(0,l.length-1),c,p-1,!0),s.emittedStack[p]=!1}};return hp.ContainerHandlerLanguage=r,hp}var pp={},Qw;function FR(){if(Qw)return pp;Qw=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.ContainerHandlerType=void 0;const t=zy(),r=cf();let i=class{canCombineWithGraph(){return!1}async handle(s,d,l,c,p,f){if(!Array.isArray(p)){if(typeof p=="string"){const _=await d.getContext(c),T=r.Util.getContextValueType(_,c[f-1])==="@vocab"?await l.createVocabOrBaseTerm(_,p):await l.resourceToTerm(_,p);if(T){const x={"@id":T.termType==="NamedNode"?T.value:p};await d.newOnValueJob(c.slice(0,c.length-1),x,f-1,!0),d.idStack[f+1]=[T]}}else{const _=!!d.idStack[f+1];_||delete d.idStack[f],await d.newOnValueJob(c.slice(0,c.length-1),p,f-1,!0),_||(d.idStack[f+1]=d.idStack[f])}const m=await l.getContainerKey(c[f],c,f),b=m!==null?l.createVocabOrBaseTerm(await d.getContext(c),m):null;b&&await t.EntryHandlerPredicate.handlePredicateObject(d,l,c,f+1,l.rdfType,b,!1,!1,!1),await d.handlePendingContainerFlushBuffers()}d.emittedStack[f]=!1}};return pp.ContainerHandlerType=i,pp}var Xw;function cE(){if(Xw)return up;Xw=1,Object.defineProperty(up,"__esModule",{value:!0}),up.EntryHandlerContainer=void 0;const t=PR(),r=IR(),i=NR(),a=FR(),s=cf();let d=class Ru{static isSimpleGraphContainer(c){return"@graph"in c&&("@set"in c&&Object.keys(c).length===2||Object.keys(c).length===1)}static isComplexGraphContainer(c){return"@graph"in c&&("@set"in c&&Object.keys(c).length>2||!("@set"in c)&&Object.keys(c).length>1)}static getContainerGraphIndex(c,p,f){let m=Ru.isSimpleGraphContainer(c),b="";for(let _=p;_<f.length;_++)(!m||typeof f[_]=="number")&&(b+=":"+f[_]),!m&&typeof f[_]!="number"&&(m=!0);return b}static async getContainerHandler(c,p,f){const m={containers:{"@set":!0},depth:f,fallback:!0};let b=!1;const _=await c.getContext(p,2);for(let A=f-1;A>=0;A--)if(typeof p[A]!="number"){const T=s.Util.getContextValue(_,"@container",p[A],!1);if(T&&Ru.isSimpleGraphContainer(T))return{containers:T,depth:A+1,fallback:!1};const x=s.Util.getContextValue(_,"@container",p[A-1],!1);if(x){const P="@graph"in x;for(const R in Ru.CONTAINER_HANDLERS)if(x[R])return P?Ru.CONTAINER_HANDLERS[R].canCombineWithGraph()?{containers:x,depth:A,fallback:!1}:m:b?m:{containers:x,depth:A,fallback:!1};return m}else{if(b)return m;b=!0}}return m}static async isBufferableContainerHandler(c,p,f){const m=await Ru.getContainerHandler(c,p,f);return!m.fallback&&!("@graph"in m.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(c,p,f,m,b){return!!await this.test(c,p,null,f,m)}async test(c,p,f,m,b){const _=s.Util.getContextValueContainer(await c.getContext(m,2),m[b-1]);for(const A in Ru.CONTAINER_HANDLERS)if(_[A])return{containers:_,handler:Ru.CONTAINER_HANDLERS[A]};return null}async handle(c,p,f,m,b,_,A){return A.handler.handle(A.containers,c,p,m,b,_)}};return d.CONTAINER_HANDLERS={"@id":new t.ContainerHandlerIdentifier,"@index":new r.ContainerHandlerIndex,"@language":new i.ContainerHandlerLanguage,"@type":new a.ContainerHandlerType},up.EntryHandlerContainer=d,up}var w0,Zw;function DR(){return Zw||(Zw=1,w0=function t(r){return r===null||typeof r!="object"||r.toJSON!=null?JSON.stringify(r):Array.isArray(r)?"["+r.reduce((i,a,s)=>{const d=s===0?"":",",l=a===void 0||typeof a=="symbol"?null:a;return i+d+t(l)},"")+"]":"{"+Object.keys(r).sort().reduce((i,a,s)=>{if(r[a]===void 0||typeof r[a]=="symbol")return i;const d=i.length===0?"":",";return i+d+t(a)+":"+t(r[a])},"")+"}"}),w0}var e_;function cf(){if(e_)return tp;e_=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.Util=void 0;const t=Ea(),r=OR(),i=cE(),a=DR();class s{constructor(l){this.parsingContext=l.parsingContext,this.dataFactory=l.dataFactory||new r.DataFactory,this.rdfFirst=this.dataFactory.namedNode(s.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(s.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(s.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(s.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(s.RDF+"JSON")}static getContextValue(l,c,p,f){const m=l.getContextRaw()[p];if(!m)return f;const b=m[c];return b===void 0?f:b}static getContextValueContainer(l,c){return s.getContextValue(l,"@container",c,{"@set":!0})}static getContextValueType(l,c){const p=s.getContextValue(l,"@type",c,null);return p==="@none"?null:p}static getContextValueLanguage(l,c){return s.getContextValue(l,"@language",c,l.getContextRaw()["@language"]||null)}static getContextValueDirection(l,c){return s.getContextValue(l,"@direction",c,l.getContextRaw()["@direction"]||null)}static isContextValueReverse(l,c){return!!s.getContextValue(l,"@reverse",c,null)}static getContextValueIndex(l,c){return s.getContextValue(l,"@index",c,l.getContextRaw()["@index"]||null)}static isPropertyReverse(l,c,p){return p==="@reverse"!==s.isContextValueReverse(l,c)}static isPropertyInEmbeddedNode(l){return l==="@id"}static isPropertyInAnnotationObject(l){return l==="@annotation"}static isValidIri(l){return l!==null&&t.Util.isValidIri(l)}static isPrefixArray(l,c){if(l.length>c.length)return!1;for(let p=0;p<l.length;p++)if(l[p]!==c[p])return!1;return!0}async validateValueIndexes(l){if(this.parsingContext.validateValueIndexes){const c={};for(const p of l)if(p&&typeof p=="object"){const f=p["@id"],m=p["@index"];if(f&&m){const b=c[f];if(b&&b!==m)throw new t.ErrorCoded(`Conflicting @index value for ${f}`,t.ERROR_CODES.CONFLICTING_INDEXES);c[f]=m}}}}async valueToTerm(l,c,p,f,m){if(s.getContextValueType(l,c)==="@json")return[this.dataFactory.literal(this.valueToJsonString(p),this.rdfJson)];const b=typeof p;switch(b){case"object":if(p==null)return[];if(Array.isArray(p))return"@list"in s.getContextValueContainer(l,c)?p.length===0?[this.rdfNil]:this.parsingContext.idStack[f+1]||[]:(await this.validateValueIndexes(p),[]);if(l=await this.getContextSelfOrPropertyScoped(l,c),"@context"in p&&(l=await this.parsingContext.parseContext(p["@context"],(await this.parsingContext.getContext(m,0)).getContextRaw())),p=await this.unaliasKeywords(p,m,f,l),"@value"in p){let _,A,T,x,P;for(c in p){const R=p[c];switch(c){case"@value":_=R;break;case"@language":A=R;break;case"@direction":T=R;break;case"@type":x=R;break;case"@index":P=R;break;case"@annotation":break;default:throw new t.ErrorCoded(`Unknown value entry '${c}' in @value: ${JSON.stringify(p)}`,t.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(x,m,f,!0,l)==="@json")return[this.dataFactory.literal(this.valueToJsonString(_),this.rdfJson)];if(_===null)return[];if(typeof _=="object")throw new t.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(_)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&P&&typeof P!="string")throw new t.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(P)}'`,t.ERROR_CODES.INVALID_INDEX_VALUE);if(A){if(typeof _!="string")throw new t.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(_)}'`,t.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!t.ContextParser.validateLanguage(A,this.parsingContext.strictValues,t.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(A=A.toLowerCase())}if(T){if(typeof _!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(_)}'`);if(!t.ContextParser.validateDirection(T,this.parsingContext.strictValues))return[]}if(A&&T&&this.parsingContext.rdfDirection){if(x)throw new t.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(p)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(f,_,A,T))}else if(A){if(x)throw new t.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(p)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(_,A)]}else if(T&&this.parsingContext.rdfDirection){if(x)throw new t.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(p)}'`,t.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(f,_,A,T))}else if(x){if(typeof x!="string")throw new t.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(x)}'`,t.ERROR_CODES.INVALID_TYPED_VALUE);const R=this.createVocabOrBaseTerm(l,x);if(!R)throw new t.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(x)}'`,t.ERROR_CODES.INVALID_TYPED_VALUE);if(R.termType!=="NamedNode")throw new t.ErrorCoded(`Illegal value type (${R.termType}): ${x}`,t.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(_,R)]}return await this.valueToTerm(new t.JsonLdContextNormalized({}),c,_,f,m)}else if("@set"in p){if(Object.keys(p).length>1)throw new t.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${c}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in p){if(Object.keys(p).length>1)throw new t.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${c}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const _=p["@list"];return Array.isArray(_)?_.length===0?[this.rdfNil]:this.parsingContext.idStack[f+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(m),c,_,f-1,m.slice(0,-1))}else{if("@reverse"in p&&typeof p["@reverse"]=="boolean")return[];if("@graph"in s.getContextValueContainer(await this.parsingContext.getContext(m),c)){const _=this.parsingContext.graphContainerTermStack[f+1];return _?Object.values(_):[this.dataFactory.blankNode()]}else if("@id"in p){if(Object.keys(p).length>1&&(l=await this.parsingContext.getContext(m,0)),"@context"in p&&(l=await this.parsingContext.parseContext(p["@context"],l.getContextRaw())),p["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(l,p["@id"]));{const _=p["@id"];let A;if(typeof _=="object")if(this.parsingContext.rdfstar)A=this.parsingContext.idStack[f+1][0];else throw new t.ErrorCoded(`Found illegal @id '${p}'`,t.ERROR_CODES.INVALID_ID_VALUE);else A=this.resourceToTerm(l,_);return this.nullableTermToArray(A)}}else return this.parsingContext.emittedStack[f+1]||p&&typeof p=="object"&&Object.keys(p).length===0?this.parsingContext.idStack[f+1]||(this.parsingContext.idStack[f+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(f,await this.getContextSelfOrPropertyScoped(l,c),c,p,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(f,await this.getContextSelfOrPropertyScoped(l,c),c,(!!p).toString(),this.dataFactory.namedNode(s.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(f,await this.getContextSelfOrPropertyScoped(l,c),c,p,this.dataFactory.namedNode(p%1===0&&p<1e21?s.XSD_INTEGER:s.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${b}`)),[]}}async getContextSelfOrPropertyScoped(l,c){const p=l.getContextRaw()[c];return p&&typeof p=="object"&&"@context"in p&&(l=await this.parsingContext.parseContext(p,l.getContextRaw(),!0)),l}nullableTermToArray(l){return l?[l]:[]}predicateToTerm(l,c){const p=l.expandTerm(c,!0,this.parsingContext.getExpandOptions());if(!p)return null;if(p[0]==="_"&&p[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(p.substr(2)):null;if(s.isValidIri(p))return this.dataFactory.namedNode(p);if(p&&this.parsingContext.strictValues)this.parsingContext.emitError(new t.ErrorCoded(`Invalid predicate IRI: ${p}`,t.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(l,c){if(c.startsWith("_:"))return this.dataFactory.blankNode(c.substr(2));const p=l.expandTerm(c,!1,this.parsingContext.getExpandOptions());if(!s.isValidIri(p))if(p&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${p}`));else return null;return this.dataFactory.namedNode(p)}createVocabOrBaseTerm(l,c){if(c.startsWith("_:"))return this.dataFactory.blankNode(c.substr(2));const p=this.parsingContext.getExpandOptions();let f=l.expandTerm(c,!0,p);if(f===c&&(f=l.expandTerm(c,!1,p)),!s.isValidIri(f))if(f&&this.parsingContext.strictValues&&!f.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${f}`));else return null;return this.dataFactory.namedNode(f)}intToString(l,c){return typeof l=="number"?Number.isFinite(l)?l%1===0&&(!c||c.value!==s.XSD_DOUBLE)?Number(l).toString():l.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):l>0?"INF":"-INF":l}stringValueToTerm(l,c,p,f,m){const b=s.getContextValueType(c,p);if(b)if(b==="@id"){if(!m)return this.resourceToTerm(c,this.intToString(f,m))}else if(b==="@vocab"){if(!m)return this.createVocabOrBaseTerm(c,this.intToString(f,m))}else m=this.dataFactory.namedNode(b);if(!m){const _=s.getContextValueLanguage(c,p),A=s.getContextValueDirection(c,p);return A&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(l,this.intToString(f,m),_,A):this.dataFactory.literal(this.intToString(f,m),_)}return this.dataFactory.literal(this.intToString(f,m),m)}createLanguageDirectionLiteral(l,c,p,f){if(this.parsingContext.rdfDirection==="i18n-datatype")return p||(p=""),this.dataFactory.literal(c,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${p}_${f}`));{const m=this.dataFactory.blankNode(),b=this.getDefaultGraph();return this.parsingContext.emitQuad(l,this.dataFactory.quad(m,this.dataFactory.namedNode(s.RDF+"value"),this.dataFactory.literal(c),b)),p&&this.parsingContext.emitQuad(l,this.dataFactory.quad(m,this.dataFactory.namedNode(s.RDF+"language"),this.dataFactory.literal(p),b)),this.parsingContext.emitQuad(l,this.dataFactory.quad(m,this.dataFactory.namedNode(s.RDF+"direction"),this.dataFactory.literal(f),b)),m}}valueToJsonString(l){return a(l)}async unaliasKeyword(l,c,p,f,m){if(Number.isInteger(l))return l;if(!f){const b=this.parsingContext.unaliasedKeywordCacheStack[p];if(b)return b}if(!t.Util.isPotentialKeyword(l)){m=m||await this.parsingContext.getContext(c);let b=m.getContextRaw()[l];b&&typeof b=="object"&&(b=b["@id"]),t.Util.isValidKeyword(b)&&(l=b)}return f?l:this.parsingContext.unaliasedKeywordCacheStack[p]=l}async unaliasKeywordParent(l,c){return await this.unaliasKeyword(c>0&&l[c-1],l,c-1)}async unaliasKeywords(l,c,p,f){const m={};for(const b in l)m[await this.unaliasKeyword(b,c,p+1,!0,f)]=l[b];return m}async isLiteral(l,c){for(let p=c;p>=0;p--){if(await this.unaliasKeyword(l[p],l,p)==="@annotation")return!1;if(this.parsingContext.literalStack[p]||this.parsingContext.jsonLiteralStack[p])return!0}return!1}async getDepthOffsetGraph(l,c){for(let p=l-1;p>0;p--)if(await this.unaliasKeyword(c[p],c,p)==="@graph"){const f=(await i.EntryHandlerContainer.getContainerHandler(this.parsingContext,c,p)).containers;return i.EntryHandlerContainer.isComplexGraphContainer(f)?-1:l-p-1}return-1}validateReverseSubject(l){if(l.termType==="Literal")throw new t.ErrorCoded(`Found illegal literal in subject position: ${l.value}`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(l,c){let p=this.getDefaultGraph();const{containers:f,depth:m}=await i.EntryHandlerContainer.getContainerHandler(this.parsingContext,l,c);if("@graph"in f){const b=i.EntryHandlerContainer.getContainerGraphIndex(f,m,l),_=this.parsingContext.graphContainerTermStack[m];if(p=_?_[b]:null,!p){let A=null;if("@id"in f){const T=await this.getContainerKey(l[m],l,m);T!==null&&(A=await this.resourceToTerm(await this.parsingContext.getContext(l),T))}A||(A=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[m]||(this.parsingContext.graphContainerTermStack[m]={}),p=this.parsingContext.graphContainerTermStack[m][b]=A}}return p}async getPropertiesDepth(l,c){let p=c;for(let f=c-1;f>0;f--)if(typeof l[f]!="number"){const m=await this.unaliasKeyword(l[f],l,f);if(m==="@reverse")return f;if(m==="@nest")p=f;else return p}return p}async getContainerKey(l,c,p){const f=await this.unaliasKeyword(l,c,p);return f==="@none"?null:f}validateReverseInEmbeddedNode(l,c,p){if(p&&c&&!this.parsingContext.rdfstarReverseInEmbedded)throw new t.ErrorCoded(`Illegal reverse property in embedded node in ${l}`,t.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(l,c,p,f,m,b,_){let A;if(b?(this.validateReverseSubject(f),A=this.dataFactory.quad(f,p,c,m)):A=this.dataFactory.quad(c,p,f,m),_){if(A.graph.termType!=="DefaultGraph"&&(A=this.dataFactory.quad(A.subject,A.predicate,A.object)),this.parsingContext.idStack[l-1])throw new t.ErrorCoded("Illegal multiple properties in an embedded node",t.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[l-1]=[A]}else this.parsingContext.emitQuad(l,A);const T=this.parsingContext.annotationsBuffer[l];if(T){for(const x of T)this.emitAnnotation(l,A,x);delete this.parsingContext.annotationsBuffer[l]}}emitAnnotation(l,c,p){let f;p.reverse?(this.validateReverseSubject(p.object),f=this.dataFactory.quad(p.object,p.predicate,c)):f=this.dataFactory.quad(c,p.predicate,p.object),this.parsingContext.emitQuad(l,f);for(const m of p.nestedAnnotations)this.emitAnnotation(l,f,m)}}return s.XSD="http://www.w3.org/2001/XMLSchema#",s.XSD_BOOLEAN=s.XSD+"boolean",s.XSD_INTEGER=s.XSD+"integer",s.XSD_DOUBLE=s.XSD+"double",s.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",tp.Util=s,tp}var t_;function UR(){if(t_)return ep;t_=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.EntryHandlerArrayValue=void 0;const t=cf(),r=Ea();let i=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(s,d,l,c,p){return this.test(s,d,null,l,c)}async test(s,d,l,c,p){return typeof c[p]=="number"}async handle(s,d,l,c,p,f){let m=await d.unaliasKeywordParent(c,f);if(m==="@list"){let b=null,_=0;for(let A=f-2;A>0;A--){const T=c[A];if(typeof T=="string"||typeof T=="number"){_=A,b=T;break}}if(b!==null){const A=await d.valueToTerm(await s.getContext(c),b,p,f,c);for(const T of A)await this.handleListElement(s,d,T,p,f,c.slice(0,_),_);A.length===0&&await this.handleListElement(s,d,null,p,f,c.slice(0,_),_)}}else if(m==="@set")await s.newOnValueJob(c.slice(0,-2),p,f-2,!1);else if(m!==void 0&&m!=="@type"){for(let _=f-1;_>0;_--)if(typeof c[_]!="number"){m=await d.unaliasKeyword(c[_],c,_);break}const b=await s.getContext(c.slice(0,-1));if("@list"in t.Util.getContextValueContainer(b,m)){s.emittedStack[f+1]=!0;const _=await d.valueToTerm(await s.getContext(c),m,p,f,c);for(const A of _)await this.handleListElement(s,d,A,p,f,c.slice(0,-1),f-1);_.length===0&&await this.handleListElement(s,d,null,p,f,c.slice(0,-1),f-1)}else s.shiftStack(f,1),await s.newOnValueJob(c.slice(0,-1),p,f-1,!1),s.contextTree.removeContext(c.slice(0,-1))}}async handleListElement(s,d,l,c,p,f,m){let b=s.listPointerStack[p];if(c!==null&&(await d.unaliasKeywords(c,f,p))["@value"]!==null){if(!b||!b.value){const _=d.dataFactory.blankNode();b={value:_,listRootDepth:m,listId:_}}else{const _=d.dataFactory.blankNode();s.emitQuad(p,d.dataFactory.quad(b.value,d.rdfRest,_,d.getDefaultGraph())),b.value=_}l&&s.emitQuad(p,d.dataFactory.quad(b.value,d.rdfFirst,l,d.getDefaultGraph()))}else b||(b={listRootDepth:m,listId:d.rdfNil});s.listPointerStack[p]=b,s.rdfstar&&s.annotationsBuffer[p]&&s.emitError(new r.ErrorCoded("Found an illegal annotation inside a list",r.ERROR_CODES.INVALID_ANNOTATION))}};return ep.EntryHandlerArrayValue=i,ep}var gp={},r_;function LR(){if(r_)return gp;r_=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.EntryHandlerInvalidFallback=void 0;let t=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(i,a,s,d,l){return!1}async test(i,a,s,d,l){return!0}async handle(i,a,s,d,l,c){i.emittedStack[c]=!1}};return gp.EntryHandlerInvalidFallback=t,gp}var yp={},mp={},n_;function Du(){if(n_)return mp;n_=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.EntryHandlerKeyword=void 0;let t=class{constructor(i){this.keyword=i}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(i,a,s,d,l){return!1}async test(i,a,s,d,l){return s===this.keyword}};return mp.EntryHandlerKeyword=t,mp}var i_;function MR(){if(i_)return yp;i_=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.EntryHandlerKeywordContext=void 0;const t=Ea(),r=Du();let i=class extends r.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(s,d,l,c,p,f){s.streamingProfile&&(s.processingStack[f]||s.processingType[f]||s.idStack[f]!==void 0)&&s.emitError(new t.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",t.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const m=s.getContext(c),b=s.parseContext(p,(await m).getContextRaw());s.contextTree.setContext(c.slice(0,-1),b),s.emitContext(p),await s.validateContext(await b)}};return yp.EntryHandlerKeywordContext=i,yp}var vp={},a_;function kR(){if(a_)return vp;a_=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.EntryHandlerKeywordGraph=void 0;const t=Du();let r=class extends t.EntryHandlerKeyword{constructor(){super("@graph")}async handle(a,s,d,l,c,p){a.graphStack[p+1]=!0}};return vp.EntryHandlerKeywordGraph=r,vp}var bp={},o_;function BR(){if(o_)return bp;o_=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.EntryHandlerKeywordId=void 0;const t=Ea(),r=Du();let i=class extends r.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(s,d,l,c,p,f){if(typeof p!="string"){if(s.rdfstar&&typeof p=="object"){const b=Object.keys(p);b.length===1&&b[0]==="@id"&&s.emitError(new t.ErrorCoded(`Invalid embedded node without property with @id ${p["@id"]}`,t.ERROR_CODES.INVALID_EMBEDDED_NODE))}else s.emitError(new t.ErrorCoded(`Found illegal @id '${p}'`,t.ERROR_CODES.INVALID_ID_VALUE));return}const m=await d.getPropertiesDepth(c,f);if(s.idStack[m]!==void 0&&(s.idStack[m][0].listHead?s.emitError(new t.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${c[f-1]}'`,t.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):s.emitError(new t.ErrorCoded(`Found duplicate @ids '${s.idStack[m][0].value}' and '${p}'`,t.ERROR_CODES.COLLIDING_KEYWORDS))),s.rdfstar&&s.annotationsBuffer[f])for(const b of s.annotationsBuffer[f])b.depth===f&&s.emitError(new t.ErrorCoded(`Found an illegal @id inside an annotation: ${p}`,t.ERROR_CODES.INVALID_ANNOTATION));s.idStack[m]=d.nullableTermToArray(await d.resourceToTerm(await s.getContext(c),p))}};return bp.EntryHandlerKeywordId=i,bp}var wp={},s_;function HR(){if(s_)return wp;s_=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.EntryHandlerKeywordIncluded=void 0;const t=Ea(),r=Du();let i=class extends r.EntryHandlerKeyword{constructor(){super("@included")}async handle(s,d,l,c,p,f){typeof p!="object"&&s.emitError(new t.ErrorCoded(`Found illegal @included '${p}'`,t.ERROR_CODES.INVALID_INCLUDED_VALUE));const m=await d.unaliasKeywords(p,c,f,await s.getContext(c));"@value"in m&&s.emitError(new t.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(p)}'`,t.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in m&&s.emitError(new t.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(p)}'`,t.ERROR_CODES.INVALID_INCLUDED_VALUE)),s.emittedStack[f]=!1}};return wp.EntryHandlerKeywordIncluded=i,wp}var _p={},l_;function jR(){if(l_)return _p;l_=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.EntryHandlerKeywordNest=void 0;const t=Ea(),r=Du();let i=class extends r.EntryHandlerKeyword{constructor(){super("@nest")}async handle(s,d,l,c,p,f){typeof p!="object"&&s.emitError(new t.ErrorCoded(`Found invalid @nest entry for '${l}': '${p}'`,t.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await d.unaliasKeywords(p,c,f,await s.getContext(c))&&s.emitError(new t.ErrorCoded(`Found an invalid @value node for '${l}'`,t.ERROR_CODES.INVALID_NEST_VALUE)),s.emittedStack[f]=!1}};return _p.EntryHandlerKeywordNest=i,_p}var Sp={},u_;function VR(){if(u_)return Sp;u_=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.EntryHandlerKeywordType=void 0;const t=Ea(),r=cf(),i=zy(),a=Du();let s=class extends a.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(l,c,p,f,m,b){const _=f[b],A=await l.getContext(f),T=c.rdfType,x=await c.unaliasKeywordParent(f,b),P=r.Util.isPropertyReverse(A,_,x),R=r.Util.isPropertyInEmbeddedNode(x);c.validateReverseInEmbeddedNode(p,P,R);const F=r.Util.isPropertyInAnnotationObject(x),I=Array.isArray(m)?m:[m];for(const W of I){typeof W!="string"&&l.emitError(new t.ErrorCoded(`Found illegal @type '${W}'`,t.ERROR_CODES.INVALID_TYPE_VALUE));const Y=c.createVocabOrBaseTerm(A,W);Y&&await i.EntryHandlerPredicate.handlePredicateObject(l,c,f,b,T,Y,P,R,F)}let $=Promise.resolve(A),B=!1;for(const W of I.sort()){const Y=r.Util.getContextValue(A,"@context",W,null);Y&&(B=!0,$=$.then(q=>l.parseContext(Y,q.getContextRaw())))}l.streamingProfile&&(B||!l.streamingProfileAllowOutOfOrderPlainType)&&(l.processingStack[b]||l.idStack[b])&&l.emitError(new t.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",t.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),B&&($=$.then(W=>W.getContextRaw()["@propagate"]!==!0?new t.JsonLdContextNormalized(Object.assign(Object.assign({},W.getContextRaw()),{"@propagate":!1,"@__propagateFallback":A.getContextRaw()})):W),l.contextTree.setContext(f.slice(0,f.length-1),$)),l.processingType[b]=!0}};return Sp.EntryHandlerKeywordType=s,Sp}var Ep={},c_;function KR(){if(c_)return Ep;c_=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.EntryHandlerKeywordUnknownFallback=void 0;const t=Ea();let r=class fE{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(a,s,d,l,c){const p=await s.unaliasKeyword(d[l],d,l);return t.Util.isPotentialKeyword(p)?!(!c&&p==="@list"):!1}async test(a,s,d,l,c){return t.Util.isPotentialKeyword(d)}async handle(a,s,d,l,c,p){const f=fE.VALID_KEYWORDS_TYPES[d];f!==void 0?f&&typeof c!==f.type&&a.emitError(new t.ErrorCoded(`Invalid value type for '${d}' with value '${c}'`,f.errorCode)):a.strictValues&&a.emitError(new Error(`Unknown keyword '${d}' with value '${c}'`)),a.emittedStack[p]=!1}};return r.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:t.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:t.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null},Ep.EntryHandlerKeywordUnknownFallback=r,Ep}var Ap={},f_;function GR(){if(f_)return Ap;f_=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.EntryHandlerKeywordValue=void 0;const t=Du();let r=class extends t.EntryHandlerKeyword{constructor(){super("@value")}async validate(a,s,d,l,c){const p=d[l];return p&&!a.literalStack[l]&&await this.test(a,s,p,d,l)&&(a.literalStack[l]=!0),super.validate(a,s,d,l,c)}async test(a,s,d,l,c){return await s.unaliasKeyword(l[c],l.slice(0,l.length-1),c-1,!0)==="@value"}async handle(a,s,d,l,c,p){a.literalStack[p]=!0,delete a.unidentifiedValuesBuffer[p],delete a.unidentifiedGraphsBuffer[p],a.emittedStack[p]=!1}};return Ap.EntryHandlerKeywordValue=r,Ap}var Rp={},xp={},d_;function $R(){if(d_)return xp;d_=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.ContextTree=void 0;let t=class dE{constructor(){this.subTrees={}}getContext(i){if(i.length>0){const[a,...s]=i,d=this.subTrees[a];if(d){const l=d.getContext(s);if(l)return l.then(({context:c,depth:p})=>({context:c,depth:p+1}))}}return this.context?this.context.then(a=>({context:a,depth:0})):null}setContext(i,a){if(i.length===0)this.context=a;else{const[s,...d]=i;let l=this.subTrees[s];l||(l=this.subTrees[s]=new dE),l.setContext(d,a)}}removeContext(i){this.setContext(i,null)}};return xp.ContextTree=t,xp}var h_;function qR(){if(h_)return Rp;h_=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.ParsingContext=void 0;const t=Ea(),r=og(),i=$R(),a=pE();let s=class hE{constructor(l){this.contextParser=new t.ContextParser({documentLoader:l.documentLoader,skipValidation:l.skipContextValidation}),this.streamingProfile=!!l.streamingProfile,this.baseIRI=l.baseIRI,this.produceGeneralizedRdf=!!l.produceGeneralizedRdf,this.allowSubjectList=!!l.allowSubjectList,this.processingMode=l.processingMode||a.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!l.strictValues,this.validateValueIndexes=!!l.validateValueIndexes,this.defaultGraph=l.defaultGraph,this.rdfDirection=l.rdfDirection,this.normalizeLanguageTags=l.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=l.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=l.rdfstar!==!1,this.rdfstarReverseInEmbedded=l.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new i.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=l.parser,l.context?(this.rootContext=this.parseContext(l.context),this.rootContext.then(c=>this.validateContext(c))):this.rootContext=Promise.resolve(new t.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(l,c,p){return this.contextParser.parse(l,{baseIRI:this.baseIRI,ignoreProtection:p,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:c,processingMode:this.activeProcessingMode})}validateContext(l){const c=l.getContextRaw()["@version"];if(c){if(this.activeProcessingMode&&c>this.activeProcessingMode)throw new r.ErrorCoded(`Unsupported JSON-LD version '${c}' under active processing mode ${this.activeProcessingMode}.`,r.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&c<this.activeProcessingMode)throw new r.ErrorCoded(`Invalid JSON-LD version ${c} under active processing mode ${this.activeProcessingMode}.`,r.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=c}}async getContext(l,c=1){const p=l;for(;typeof l[l.length-1]=="number";)l=l.slice(0,l.length-1);c&&(l=l.slice(0,-c));const f=await this.getContextPropagationAware(l);let b=f.context.getContextRaw();for(let _=f.depth;_<p.length-c;_++){const A=p[_],T=b[A];if(T&&typeof T=="object"&&"@context"in T){const x=(await this.parseContext(T,b,!0)).getContextRaw(),P=!(A in x)||x[A]["@context"]["@propagate"];(P!==!1||_===p.length-1-c)&&(b=Object.assign({},x),delete b["@propagate"],b[A]=Object.assign({},b[A]),"@id"in T&&(b[A]["@id"]=T["@id"]),delete b[A]["@context"],P!==!1&&this.contextTree.setContext(p.slice(0,_+c),Promise.resolve(new t.JsonLdContextNormalized(b))))}}return new t.JsonLdContextNormalized(b)}async getContextPropagationAware(l){const c=l.length;let p=null,f;do{f=!1,p&&"@__propagateFallback"in p.context.getContextRaw()?p.context=new t.JsonLdContextNormalized(p.context.getContextRaw()["@__propagateFallback"]):(p&&(l=l.slice(0,p.depth-1)),p=await this.contextTree.getContext(l)||{context:await this.rootContext,depth:0});const m=l[l.length-1];if(m in p.context.getContextRaw()){const b=p.context.getContextRaw()[m];b&&typeof b=="object"&&"@context"in b&&(f=!0)}}while(p.depth>0&&p.context.getContextRaw()["@propagate"]===!1&&p.depth!==c&&!f);return p.depth===0&&p.context.getContextRaw()["@propagate"]===!1&&p.depth!==c&&(p.context=new t.JsonLdContextNormalized({})),p}async newOnValueJob(l,c,p,f){await this.parser.newOnValueJob(l,c,p,f)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const l of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(l.depth,l.keys),this.parser.flushStacks(l.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(l,c){l===1&&(this.topLevelProperties=!0),this.parser.push(c)}emitError(l){this.parser.emit("error",l)}emitContext(l){this.parser.emit("context",l)}getUnidentifiedValueBufferSafe(l){let c=this.unidentifiedValuesBuffer[l];return c||(c=[],this.unidentifiedValuesBuffer[l]=c),c}getUnidentifiedGraphBufferSafe(l){let c=this.unidentifiedGraphsBuffer[l];return c||(c=[],this.unidentifiedGraphsBuffer[l]=c),c}getAnnotationsBufferSafe(l){let c=this.annotationsBuffer[l];return c||(c=[],this.annotationsBuffer[l]=c),c}getExpandOptions(){return hE.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(l,c){const p=this.idStack[l+c];if(p&&(this.idStack[l]=p,this.emittedStack[l]=!0,delete this.idStack[l+c]),this.pendingContainerFlushBuffers.length)for(const f of this.pendingContainerFlushBuffers)f.depth>=l+c&&(f.depth-=c,f.keys.splice(l,c));this.unidentifiedValuesBuffer[l+c]&&(this.unidentifiedValuesBuffer[l]=this.unidentifiedValuesBuffer[l+c],delete this.unidentifiedValuesBuffer[l+c]),this.annotationsBuffer[l+c-1]&&(this.annotationsBuffer[l-1]||(this.annotationsBuffer[l-1]=[]),this.annotationsBuffer[l-1]=[...this.annotationsBuffer[l-1],...this.annotationsBuffer[l+c-1]],delete this.annotationsBuffer[l+c-1])}};return s.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},Rp.ParsingContext=s,Rp}var Tp={},p_;function zR(){if(p_)return Tp;p_=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.EntryHandlerKeywordAnnotation=void 0;const t=Du(),r=Ea();let i=class extends t.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(s,d,l,c,p,f){(typeof p=="string"||typeof p=="object"&&p["@value"])&&s.emitError(new r.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(p)}`,r.ERROR_CODES.INVALID_ANNOTATION))}};return Tp.EntryHandlerKeywordAnnotation=i,Tp}var g_;function pE(){if(g_)return Wh;g_=1,Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.JsonLdParser=void 0;const t=vR(),r=Ea(),i=nE(),a=UR(),s=cE(),d=LR(),l=zy(),c=MR(),p=kR(),f=BR(),m=HR(),b=jR(),_=VR(),A=KR(),T=GR(),x=qR(),P=cf(),R=Rv(),F=zR();let I=class _d extends i.Transform{constructor(B){super({readableObjectMode:!0}),B=B||{},this.options=B,this.parsingContext=new x.ParsingContext(Object.assign({parser:this},B)),this.util=new P.Util({dataFactory:B.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new t,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(B,W,Y,q){let Ie,K=["application/activity+json"];if(q&&q.wellKnownMediaTypes&&(K=q.wellKnownMediaTypes),W!=="application/ld+json"&&!K.includes(W)){if(W!=="application/json"&&!W.endsWith("+json"))throw new r.ErrorCoded(`Unsupported JSON-LD media type ${W}`,r.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(Y&&Y.has("Link")&&Y.forEach((ge,Se)=>{if(Se==="link"){const et=(0,R.parse)(ge);for(const st of et.get("rel","http://www.w3.org/ns/json-ld#context")){if(Ie)throw new r.ErrorCoded("Multiple JSON-LD context link headers were found on "+B,r.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);Ie=st.uri}}}),!Ie&&!q?.ignoreMissingContextLinkHeader)throw new r.ErrorCoded(`Missing context link header for media type ${W} on ${B}`,r.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let ie;if(Y&&Y.has("Content-Type")){const ge=Y.get("Content-Type"),Se=/; *profile=([^"]*)/.exec(ge);Se&&Se[1]==="http://www.w3.org/ns/json-ld#streaming"&&(ie=!0)}return new _d(Object.assign({baseIRI:B,context:Ie,streamingProfile:ie},q||{}))}import(B){if("pipe"in B){B.on("error",Y=>W.emit("error",Y));const W=B.pipe(new _d(this.options));return W}else{const W=new i.PassThrough({readableObjectMode:!0});B.on("error",q=>Y.emit("error",q)),B.on("data",q=>W.push(q)),B.on("end",()=>W.push(null));const Y=W.pipe(new _d(this.options));return Y}}_transform(B,W,Y){this.jsonParser.write(B),this.lastOnValueJob.then(()=>Y(),q=>Y(q))}async newOnValueJob(B,W,Y,q){let Ie=!0;if(q&&Y<this.lastDepth){const et=this.parsingContext.listPointerStack[this.lastDepth];et&&(et.value&&this.push(this.util.dataFactory.quad(et.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),et.listId.listHead=!0,this.parsingContext.idStack[et.listRootDepth+1]=[et.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await s.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),Ie=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const K=await this.util.unaliasKeyword(B[Y],B,Y),ie=await this.util.unaliasKeywordParent(B,Y);this.parsingContext.emittedStack[Y]=!0;let ge=!0;r.Util.isValidKeyword(K)&&ie==="@reverse"&&K!=="@context"&&this.emit("error",new r.ErrorCoded(`Found the @id '${W}' inside an @reverse property`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let Se=!1;this.parsingContext.validationStack.length>1&&(Se=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let et=Math.max(1,this.parsingContext.validationStack.length-1);et<B.length-1;et++){const st=this.parsingContext.validationStack[et]||(this.parsingContext.validationStack[et]=await this.validateKey(B.slice(0,et+1),et,Se));if(st.valid)!Se&&st.property&&(Se=!0);else{this.parsingContext.emittedStack[Y]=!1,ge=!1;break}}if(await this.util.isLiteral(B,Y)&&(ge=!1),ge)for(const et of _d.ENTRY_HANDLERS){const st=await et.test(this.parsingContext,this.util,K,B,Y);if(st){await et.handle(this.parsingContext,this.util,K,B,W,Y,st),et.isStackProcessor()&&(this.parsingContext.processingStack[Y]=!0);break}}Y===0&&Array.isArray(W)&&await this.util.validateValueIndexes(W),Ie&&Y<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=Y,this.lastKeys=B,this.parsingContext.unaliasedKeywordCacheStack.splice(Y-1)}flushStacks(B){this.parsingContext.processingStack.splice(B,1),this.parsingContext.processingType.splice(B,1),this.parsingContext.emittedStack.splice(B,1),this.parsingContext.idStack.splice(B,1),this.parsingContext.graphStack.splice(B+1,1),this.parsingContext.graphContainerTermStack.splice(B,1),this.parsingContext.jsonLiteralStack.splice(B,1),this.parsingContext.validationStack.splice(B-1,2),this.parsingContext.literalStack.splice(B,this.parsingContext.literalStack.length-B),this.parsingContext.annotationsBuffer.splice(B,1)}async flushBuffer(B,W){let Y=this.parsingContext.idStack[B];!!Y||(Y=this.parsingContext.idStack[B]=[this.util.dataFactory.blankNode()]);const Ie=this.parsingContext.unidentifiedValuesBuffer[B];if(Ie){for(const ge of Y){const Se=await this.util.getDepthOffsetGraph(B,W),et=this.parsingContext.graphStack[B]||Se>=0?this.parsingContext.idStack[B-Se-1]:[await this.util.getGraphContainerValue(W,B)];if(et)for(const st of et){this.parsingContext.emittedStack[B]=!0;for(const Ne of Ie)this.util.emitQuadChecked(B,ge,Ne.predicate,Ne.object,st,Ne.reverse,Ne.isEmbedded)}else{const st=this.parsingContext.getUnidentifiedGraphBufferSafe(B-await this.util.getDepthOffsetGraph(B,W)-1);for(const Ne of Ie)Ne.reverse?st.push({object:ge,predicate:Ne.predicate,subject:Ne.object,isEmbedded:Ne.isEmbedded}):st.push({object:Ne.object,predicate:Ne.predicate,subject:ge,isEmbedded:Ne.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(B,1),this.parsingContext.literalStack.splice(B,1),this.parsingContext.jsonLiteralStack.splice(B,1)}const K=this.parsingContext.unidentifiedGraphsBuffer[B];if(K){for(const ge of Y){const Se=B===1&&ge.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():ge;this.parsingContext.emittedStack[B]=!0;for(const et of K)this.parsingContext.emitQuad(B,this.util.dataFactory.quad(et.subject,et.predicate,et.object,Se))}this.parsingContext.unidentifiedGraphsBuffer.splice(B,1)}const ie=this.parsingContext.annotationsBuffer[B];if(ie){ie.length>0&&B===1&&this.parsingContext.emitError(new r.ErrorCoded("Annotations can not be made on top-level nodes",r.ERROR_CODES.INVALID_ANNOTATION));const ge=this.parsingContext.getAnnotationsBufferSafe(B-1);for(const Se of ie)ge.push(Se);delete this.parsingContext.annotationsBuffer[B]}}async validateKey(B,W,Y){for(const q of _d.ENTRY_HANDLERS)if(await q.validate(this.parsingContext,this.util,B,W,Y))return{valid:!0,property:Y||q.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=B=>{const W=this.jsonParser.stack.length,Y=new Array(W+1).fill(0).map((q,Ie)=>Ie===W?this.jsonParser.key:this.jsonParser.stack[Ie].key);if(!this.isParsingContextInner(W)){const q=()=>this.newOnValueJob(Y,B,W,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(Y.slice(0,-1)))if(Y[W]==="@context"){let Ie=this.contextJobs[W];Ie||(Ie=this.contextJobs[W]=[]),Ie.push(q)}else this.contextAwaitingJobs.push({job:q,keys:Y,depth:W});else this.lastOnValueJob=this.lastOnValueJob.then(q);!this.parsingContext.streamingProfile&&W===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=B=>{this.emit("error",B)}}isParsingContextInner(B){for(let W=B;W>0;W--)if(this.jsonParser.stack[W-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const W of this.contextJobs)if(W)for(const Y of W)await Y();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const B=[];for(const W of this.contextAwaitingJobs)await this.util.unaliasKeyword(W.keys[W.depth],W.keys,W.depth,!0)==="@type"||typeof W.keys[W.depth]=="number"&&await this.util.unaliasKeyword(W.keys[W.depth-1],W.keys,W.depth-1,!0)==="@type"?this.typeJobs.push({job:W.job,keys:W.keys.slice(0,W.keys.length-1)}):B.push(W);for(const W of B){if(this.typeJobs.length>0){const Y=[],q=[];for(let ie=0;ie<this.typeJobs.length;ie++){const ge=this.typeJobs[ie];P.Util.isPrefixArray(ge.keys,W.keys)&&(Y.push(ge),q.push(ie))}const Ie=Y.sort((ie,ge)=>ie.keys.length-ge.keys.length);for(const ie of Ie)await ie.job();const K=q.sort().reverse();for(const ie of K)this.typeJobs.splice(ie,1)}await W.job()}}};return I.DEFAULT_PROCESSING_MODE="1.1",I.ENTRY_HANDLERS=[new a.EntryHandlerArrayValue,new c.EntryHandlerKeywordContext,new f.EntryHandlerKeywordId,new m.EntryHandlerKeywordIncluded,new p.EntryHandlerKeywordGraph,new b.EntryHandlerKeywordNest,new _.EntryHandlerKeywordType,new T.EntryHandlerKeywordValue,new F.EntryHandlerKeywordAnnotation,new s.EntryHandlerContainer,new A.EntryHandlerKeywordUnknownFallback,new l.EntryHandlerPredicate,new d.EntryHandlerInvalidFallback],Wh.JsonLdParser=I,Wh}var y_;function WR(){return y_||(y_=1,function(t){var r=Yc&&Yc.__createBinding||(Object.create?function(a,s,d,l){l===void 0&&(l=d);var c=Object.getOwnPropertyDescriptor(s,d);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,l,c)}:function(a,s,d,l){l===void 0&&(l=d),a[l]=s[d]}),i=Yc&&Yc.__exportStar||function(a,s){for(var d in a)d!=="default"&&!Object.prototype.hasOwnProperty.call(s,d)&&r(s,a,d)};Object.defineProperty(t,"__esModule",{value:!0}),i(pE(),t)}(Yc)),Yc}var Su={},m_;function Iv(){if(m_)return Su;m_=1,Object.defineProperty(Su,"__esModule",{value:!0});var t=globalThis.fetch;const{fetch:r,Response:i,Request:a,Headers:s}=globalThis;return Su.Headers=s,Su.Request=a,Su.Response=i,Su.default=t,Su.fetch=r,Su}var JR=Ts();const Cp="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Op="http://www.w3.org/2001/XMLSchema#",py="http://www.w3.org/2000/10/swap/",Ji={xsd:{decimal:`${Op}decimal`,boolean:`${Op}boolean`,double:`${Op}double`,integer:`${Op}integer`,string:`${Op}string`},rdf:{type:`${Cp}type`,nil:`${Cp}nil`,first:`${Cp}first`,rest:`${Cp}rest`,langString:`${Cp}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${py}reify#forSome`,forAll:`${py}reify#forAll`},log:{implies:`${py}log#implies`,isImpliedBy:`${py}log#isImpliedBy`}},{xsd:gy}=Ji,YR=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,v_={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},QR=/[\x00-\x20<>\\"\{\}\|\^\`]/,XR={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},ZR=/$0^/;class Nv{constructor(r){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,r=r||{},this._isImpliedBy=r.isImpliedBy,this._lineMode=!!r.lineMode){this._n3Mode=!1;for(const i in this)!(i in XR)&&this[i]instanceof RegExp&&(this[i]=ZR)}else this._n3Mode=r.n3!==!1;this.comments=!!r.comments,this._literalClosingPos=0}_tokenizeToEnd(r,i){let a=this._input,s=a.length;for(;;){let c,p;for(;c=this._newline.exec(a);)this.comments&&(p=this._comment.exec(c[0]))&&d("comment",p[1],"",this._line,c[0].length),a=a.substr(c[0].length,a.length),s=a.length,this._line++;if(!c&&(c=this._whitespace.exec(a))&&(a=a.substr(c[0].length,a.length)),this._endOfFile.test(a))return i&&(this.comments&&(p=this._comment.exec(a))&&d("comment",p[1],"",this._line,a.length),a=null,d("eof","","",this._line,0)),this._input=a;const f=this._line,m=a[0];let b="",_="",A="",T=null,x=0,P=!1;switch(m){case"^":if(a.length<3)break;if(a[1]==="^"){if(this._previousMarker="^^",a=a.substr(2),a[0]!=="<"){P=!0;break}}else{this._n3Mode&&(x=1,b="^");break}case"<":if(T=this._unescapedIri.exec(a))b="IRI",_=T[1];else if(T=this._iri.exec(a)){if(_=this._unescape(T[1]),_===null||QR.test(_))return l(this);b="IRI"}else a.length>1&&a[1]==="<"?(b="<<",x=2):this._n3Mode&&a.length>1&&a[1]==="="&&(x=2,this._isImpliedBy?(b="abbreviation",_="<"):(b="inverse",_=">"));break;case">":a.length>1&&a[1]===">"&&(b=">>",x=2);break;case"_":((T=this._blank.exec(a))||i&&(T=this._blank.exec(`${a} `)))&&(b="blank",A="_",_=T[1]);break;case'"':if(T=this._simpleQuotedString.exec(a))_=T[1];else if({value:_,matchLength:x}=this._parseLiteral(a),_===null)return l(this);(T!==null||x!==0)&&(b="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(T=this._simpleApostropheString.exec(a))_=T[1];else if({value:_,matchLength:x}=this._parseLiteral(a),_===null)return l(this);(T!==null||x!==0)&&(b="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(T=this._variable.exec(a))&&(b="var",_=T[0]);break;case"@":this._previousMarker==="literal"&&(T=this._langcode.exec(a))?(b="langcode",_=T[1]):(T=this._keyword.exec(a))&&(b=T[0]);break;case".":if(a.length===1?i:a[1]<"0"||a[1]>"9"){b=".",x=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(T=this._number.exec(a)||i&&(T=this._number.exec(`${a} `)))&&(b="literal",_=T[0],A=typeof T[1]=="string"?gy.double:typeof T[2]=="string"?gy.decimal:gy.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(T=this._sparqlKeyword.exec(a))?b=T[0].toUpperCase():P=!0;break;case"f":case"t":(T=this._boolean.exec(a))?(b="literal",_=T[0],A=gy.boolean):P=!0;break;case"a":(T=this._shortPredicates.exec(a))?(b="abbreviation",_="a"):P=!0;break;case"=":this._n3Mode&&a.length>1&&(b="abbreviation",a[1]!==">"?(x=1,_="="):(x=2,_=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(x=1,b=m);break;case"{":!this._lineMode&&a.length>=2&&(a[1]==="|"?(b="{|",x=2):(b=m,x=1));break;case"|":a.length>=2&&a[1]==="}"&&(b="|}",x=2);break;default:P=!0}if(P&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(T=this._prefix.exec(a))?(b="prefix",_=T[1]||""):((T=this._prefixed.exec(a))||i&&(T=this._prefixed.exec(`${a} `)))&&(b="prefixed",A=T[1]||"",_=this._unescape(T[2]))),this._previousMarker==="^^")switch(b){case"prefixed":b="type";break;case"IRI":b="typeIRI";break;default:b=""}if(!b)return i||!/^'''|^"""/.test(a)&&/\n|\r/.test(a)?l(this):this._input=a;const R=x||T[0].length,F=d(b,_,A,f,R);this.previousToken=F,this._previousMarker=b,a=a.substr(R,a.length)}function d(c,p,f,m,b){const _=a?s-a.length:s,A=_+b,T={type:c,value:p,prefix:f,line:m,start:_,end:A};return r(null,T),T}function l(c){r(c._syntaxError(/^\S*/.exec(a)[0]))}}_unescape(r){let i=!1;const a=r.replace(YR,(s,d,l,c)=>{if(typeof d=="string")return String.fromCharCode(Number.parseInt(d,16));if(typeof l=="string"){let p=Number.parseInt(l,16);return p<=65535?String.fromCharCode(Number.parseInt(l,16)):String.fromCharCode(55296+((p-=65536)>>10),56320+(p&1023))}return c in v_?v_[c]:(i=!0,"")});return i?null:a}_parseLiteral(r){if(r.length>=3){const i=r.match(/^(?:"""|"|'''|'|)/)[0],a=i.length;let s=Math.max(this._literalClosingPos,a);for(;(s=r.indexOf(i,s))>0;){let d=0;for(;r[s-d-1]==="\\";)d++;if(d%2===0){const l=r.substring(a,s),c=l.split(/\r\n|\r|\n/).length-1,p=s+a;if(a===1&&c!==0||a===3&&this._lineMode)break;return this._line+=c,{value:this._unescape(l),matchLength:p}}s++}this._literalClosingPos=r.length-a+1}return{value:"",matchLength:0}}_syntaxError(r){this._input=null;const i=new Error(`Unexpected "${r}" on line ${this._line}.`);return i.context={token:void 0,line:this._line,previousToken:this.previousToken},i}_readStartingBom(r){return r.startsWith("\uFEFF")?r.substr(1):r}tokenize(r,i){if(this._line=1,typeof r=="string")if(this._input=this._readStartingBom(r),typeof i=="function")queueMicrotask(()=>this._tokenizeToEnd(i,!0));else{const a=[];let s;if(this._tokenizeToEnd((d,l)=>d?s=d:a.push(l),!0),s)throw s;return a}else this._pendingBuffer=null,typeof r.setEncoding=="function"&&r.setEncoding("utf8"),r.on("data",a=>{this._input!==null&&a.length!==0&&(this._pendingBuffer&&(a=JR.Buffer.concat([this._pendingBuffer,a]),this._pendingBuffer=null),a[a.length-1]&128?this._pendingBuffer=a:(typeof this._input>"u"?this._input=this._readStartingBom(typeof a=="string"?a:a.toString()):this._input+=a,this._tokenizeToEnd(i,!1)))}),r.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(i,!0)}),r.on("error",i)}}const{rdf:ex,xsd:rf}=Ji;let Rd,tx=0;const zo={namedNode:gE,blankNode:yE,variable:vE,literal:mE,defaultGraph:rx,quad:X0,triple:X0,fromTerm:qp,fromQuad:bE};class so{constructor(r){this.id=r}get value(){return this.id}equals(r){return r instanceof so?this.id===r.id:!!r&&this.termType===r.termType&&this.value===r.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Wy extends so{get termType(){return"NamedNode"}}class Iu extends so{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const r=this.id;let i=r.lastIndexOf('"')+1;return i<r.length&&r[i++]==="@"?r.substr(i).toLowerCase():""}get datatype(){return new Wy(this.datatypeString)}get datatypeString(){const r=this.id,i=r.lastIndexOf('"')+1,a=i<r.length?r[i]:"";return a==="^"?r.substr(i+2):a!=="@"?rf.string:ex.langString}equals(r){return r instanceof Iu?this.id===r.id:!!r&&!!r.datatype&&this.termType===r.termType&&this.value===r.value&&this.language===r.language&&this.datatype.value===r.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Fv extends so{constructor(r){super(`_:${r}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Dv extends so{constructor(r){super(`?${r}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class Uv extends so{constructor(){return super(""),Rd||this}get termType(){return"DefaultGraph"}equals(r){return this===r||!!r&&this.termType===r.termType}}Rd=new Uv;function af(t,r,i){if(r=r||zo,!t)return r.defaultGraph();switch(t[0]){case"?":return r.variable(t.substr(1));case"_":return r.blankNode(t.substr(2));case'"':if(r===zo)return new Iu(t);if(t[t.length-1]==='"')return r.literal(t.substr(1,t.length-2));const a=t.lastIndexOf('"',t.length-1);return r.literal(t.substr(1,a-1),t[a+1]==="@"?t.substr(a+2):r.namedNode(t.substr(a+3)));case"[":t=JSON.parse(t);break;default:if(!i||!Array.isArray(t))return r.namedNode(t)}return r.quad(af(t[0],r,!0),af(t[1],r,!0),af(t[2],r,!0),t[3]&&af(t[3],r,!0))}function Cu(t,r){if(typeof t=="string")return t;if(t instanceof so&&t.termType!=="Quad")return t.id;if(!t)return Rd.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==rf.string?`^^${t.datatype.value}`:""}`;case"Quad":const i=[Cu(t.subject,!0),Cu(t.predicate,!0),Cu(t.object,!0)];return t.graph&&t.graph.termType!=="DefaultGraph"&&i.push(Cu(t.graph,!0)),r?i:JSON.stringify(i);default:throw new Error(`Unexpected termType: ${t.termType}`)}}class Sd extends so{constructor(r,i,a,s){super(""),this._subject=r,this._predicate=i,this._object=a,this._graph=s||Rd}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(r){return!!r&&this._subject.equals(r.subject)&&this._predicate.equals(r.predicate)&&this._object.equals(r.object)&&this._graph.equals(r.graph)}}function gE(t){return new Wy(t)}function yE(t){return new Fv(t||`n3-${tx++}`)}function mE(t,r){if(typeof r=="string")return new Iu(`"${t}"@${r.toLowerCase()}`);let i=r?r.value:"";return i===""&&(typeof t=="boolean"?i=rf.boolean:typeof t=="number"&&(Number.isFinite(t)?i=Number.isInteger(t)?rf.integer:rf.double:(i=rf.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),i===""||i===rf.string?new Iu(`"${t}"`):new Iu(`"${t}"^^${i}`)}function vE(t){return new Dv(t)}function rx(){return Rd}function X0(t,r,i,a){return new Sd(t,r,i,a)}function qp(t){if(t instanceof so)return t;switch(t.termType){case"NamedNode":return gE(t.value);case"BlankNode":return yE(t.value);case"Variable":return vE(t.value);case"DefaultGraph":return Rd;case"Literal":return mE(t.value,t.language||t.datatype);case"Quad":return bE(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function bE(t){if(t instanceof Sd)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return X0(qp(t.subject),qp(t.predicate),qp(t.object),qp(t.graph))}let b_=0;class Jy{constructor(r){this._contextStack=[],this._graph=null,r=r||{},this._setBase(r.baseIRI),r.factory&&wE(this,r.factory);const i=typeof r.format=="string"?r.format.match(/\w*$/)[0].toLowerCase():"",a=/turtle/.test(i),s=/trig/.test(i),d=/triple/.test(i),l=/quad/.test(i),c=this._n3Mode=/n3/.test(i),p=d||l;(this._supportsNamedGraphs=!(a||c))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(a||s||d||c),this._isImpliedBy=r.isImpliedBy,this._supportsRDFStar=i===""||/star|\*$/.test(i),p&&(this._resolveRelativeIRI=f=>null),this._blankNodePrefix=typeof r.blankNodePrefix!="string"?"":r.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=r.lexer||new Nv({lineMode:p,n3:c,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!r.explicitQuantifiers}static _resetBlankNodePrefix(){b_=0}_setBase(r){if(!r)this._base="",this._basePath="";else{const i=r.indexOf("#");i>=0&&(r=r.substr(0,i)),this._base=r,this._basePath=r.indexOf("/")<0?r:r.replace(/[^\/?]*(?:\?.*)?$/,""),r=r.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=r[0],this._baseScheme=r[1]}}_saveContext(r,i,a,s,d){const l=this._n3Mode;this._contextStack.push({type:r,subject:a,predicate:s,object:d,graph:i,inverse:l?this._inversePredicate:!1,blankPrefix:l?this._prefixes._:"",quantified:l?this._quantified:null}),l&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(r,i){const a=this._contextStack.pop();if(!a||a.type!==r)return this._error(`Unexpected ${i.type}`,i);this._subject=a.subject,this._predicate=a.predicate,this._object=a.object,this._graph=a.graph,this._n3Mode&&(this._inversePredicate=a.inverse,this._prefixes._=a.blankPrefix,this._quantified=a.quantified)}_readInTopContext(r){switch(r.type){case"eof":return this._graph!==null?this._error("Unclosed graph",r):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(r)}}_readEntity(r,i){let a;switch(r.type){case"IRI":case"typeIRI":const s=this._resolveIRI(r.value);if(s===null)return this._error("Invalid IRI",r);a=this._factory.namedNode(s);break;case"type":case"prefixed":const d=this._prefixes[r.prefix];if(d===void 0)return this._error(`Undefined prefix "${r.prefix}:"`,r);a=this._factory.namedNode(d+r.value);break;case"blank":a=this._factory.blankNode(this._prefixes[r.prefix]+r.value);break;case"var":a=this._factory.variable(r.value.substr(1));break;default:return this._error(`Expected entity but got ${r.type}`,r)}return!i&&this._n3Mode&&a.id in this._quantified&&(a=this._quantified[a.id]),a}_readSubject(r){switch(this._predicate=null,r.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",r);case"}":return this._readPunctuation(r);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',r);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',r);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",r);if(r.prefix.length===0)return this._literalValue=r.value,this._completeSubjectLiteral;this._subject=this._factory.literal(r.value,this._factory.namedNode(r.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",r);default:if((this._subject=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(r){const i=r.type;switch(i){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[r.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${i}`,r):(this._subject=null,i==="]"?this._readBlankNodeTail(r):this._readPunctuation(r));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",r);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",r);default:if((this._predicate=this._readEntity(r))===void 0)return}return this._readObject}_readObject(r){switch(r.type){case"literal":if(r.prefix.length===0)return this._literalValue=r.value,this._readDataTypeOrLang;this._object=this._factory.literal(r.value,this._factory.namedNode(r.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",r);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",r);default:if((this._object=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(r){return r.type==="{"?this._readGraph(r):this._readPredicate(r)}_readGraph(r){return r.type!=="{"?this._error(`Expected graph but got ${r.type}`,r):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(r){return r.type==="]"?(this._subject=null,this._readBlankNodeTail(r)):(this._predicate=null,this._readPredicate(r))}_readBlankNodeTail(r){if(r.type!=="]")return this._readBlankNodePunctuation(r);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const i=this._predicate===null;return this._restoreContext("blank",r),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:i?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(r){switch(r.type){case".":case"}":return this._subject=null,this._readPunctuation(r);default:return this._readPredicate(r)}}_readListItem(r){let i=null,a=null,s=this._readListItem;const d=this._subject,l=this._contextStack,c=l[l.length-1];switch(r.type){case"[":this._saveContext("blank",this._graph,a=this._factory.blankNode(),this.RDF_FIRST,this._subject=i=this._factory.blankNode()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,a=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",r),l.length!==0&&l[l.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;a=this.RDF_NIL;break;case"literal":r.prefix.length===0?(this._literalValue=r.value,s=this._readListItemDataTypeOrLang):(i=this._factory.literal(r.value,this._factory.namedNode(r.prefix)),s=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",r);default:if((i=this._readEntity(r))===void 0)return}if(a===null&&(this._subject=a=this._factory.blankNode()),d===null?c.predicate===null?c.subject=a:c.object=a:this._emit(d,this.RDF_REST,a,this._graph),i!==null){if(this._n3Mode&&(r.type==="IRI"||r.type==="prefixed"))return this._saveContext("item",this._graph,a,this.RDF_FIRST,i),this._subject=i,this._predicate=null,this._getPathReader(this._readListItem);this._emit(a,this.RDF_FIRST,i,this._graph)}return s}_readDataTypeOrLang(r){return this._completeObjectLiteral(r,!1)}_readListItemDataTypeOrLang(r){return this._completeObjectLiteral(r,!0)}_completeLiteral(r){let i=this._factory.literal(this._literalValue);switch(r.type){case"type":case"typeIRI":const a=this._readEntity(r);if(a===void 0)return;i=this._factory.literal(this._literalValue,a),r=null;break;case"langcode":i=this._factory.literal(this._literalValue,r.value),r=null;break}return{token:r,literal:i}}_completeSubjectLiteral(r){return this._subject=this._completeLiteral(r).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(r,i){const a=this._completeLiteral(r);if(a)return this._object=a.literal,i&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),a.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(a.token))}_readFormulaTail(r){return r.type!=="}"?this._readPunctuation(r):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",r),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(r){let i,a=this._graph;const s=this._subject,d=this._inversePredicate;switch(r.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",r);if(this._n3Mode)return this._readFormulaTail(r);this._graph=null;case".":this._subject=null,i=this._contextStack.length?this._readSubject:this._readInTopContext,d&&(this._inversePredicate=!1);break;case";":i=this._readPredicate;break;case",":i=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",r);const l=this._predicate,c=this._object;this._subject=this._factory.quad(s,l,c,this.DEFAULTGRAPH),i=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",r);this._subject=null,i=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(a=this._readEntity(r))!==void 0){i=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}if(s!==null){const l=this._predicate,c=this._object;d?this._emit(c,l,s,a):this._emit(s,l,c,a)}return i}_readBlankNodePunctuation(r){let i;switch(r.type){case";":i=this._readPredicate;break;case",":i=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}return this._emit(this._subject,this._predicate,this._object,this._graph),i}_readQuadPunctuation(r){return r.type!=="."?this._error("Expected dot to follow quad",r):this._readInTopContext}_readPrefix(r){return r.type!=="prefix"?this._error("Expected prefix to follow @prefix",r):(this._prefix=r.value,this._readPrefixIRI)}_readPrefixIRI(r){if(r.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,r);const i=this._readEntity(r);return this._prefixes[this._prefix]=i.value,this._prefixCallback(this._prefix,i),this._readDeclarationPunctuation}_readBaseIRI(r){const i=r.type==="IRI"&&this._resolveIRI(r.value);return i?(this._setBase(i),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",r)}_readNamedGraphLabel(r){switch(r.type){case"IRI":case"blank":case"prefixed":return this._readSubject(r),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",r)}}_readNamedGraphBlankLabel(r){return r.type!=="]"?this._error("Invalid graph label",r):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(r){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(r)):r.type!=="."?this._error("Expected declaration to end with a dot",r):this._readInTopContext}_readQuantifierList(r){let i;switch(r.type){case"IRI":case"prefixed":if((i=this._readEntity(r,!0))!==void 0)break;default:return this._error(`Unexpected ${r.type}`,r)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,i,this.QUANTIFIERS_GRAPH)):this._quantified[i.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(r){return r.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(r))}_getPathReader(r){return this._afterPath=r,this._readPath}_readPath(r){switch(r.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const i=this._contextStack,a=i.length&&i[i.length-1];if(a&&a.type==="item"){const s=this._subject;this._restoreContext("item",r),this._emit(this._subject,this.RDF_FIRST,s,this._graph)}return this._afterPath(r)}}_readForwardPath(r){let i,a;const s=this._factory.blankNode();if((a=this._readEntity(r))!==void 0)return this._predicate===null?(i=this._subject,this._subject=s):(i=this._object,this._object=s),this._emit(i,a,s,this._graph),this._readPath}_readBackwardPath(r){const i=this._factory.blankNode();let a,s;if((a=this._readEntity(r))!==void 0)return this._predicate===null?(s=this._subject,this._subject=i):(s=this._object,this._object=i),this._emit(i,a,s,this._graph),this._readPath}_readRDFStarTailOrGraph(r){return r.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(r))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,r):this._readRDFStarTail(r)}_readRDFStarTail(r){if(r.type!==">>")return this._error(`Expected >> but got ${r.type}`,r);const i=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",r),this._subject===null?(this._subject=i,this._readPredicate):(this._object=i,this._getContextEndReader())}_getContextEndReader(){const r=this._contextStack;if(!r.length)return this._readPunctuation;switch(r[r.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(r,i,a,s){this._callback(null,this._factory.quad(r,i,a,s||this.DEFAULTGRAPH))}_error(r,i){const a=new Error(`${r} on line ${i.line}.`);a.context={token:i,line:i.line,previousToken:this._lexer.previousToken},this._callback(a),this._callback=yy}_resolveIRI(r){return/^[a-z][a-z0-9+.-]*:/i.test(r)?r:this._resolveRelativeIRI(r)}_resolveRelativeIRI(r){if(!r.length)return this._base;switch(r[0]){case"#":return this._base+r;case"?":return this._base.replace(/(?:\?.*)?$/,r);case"/":return(r[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(r);default:return/^[^/:]*:/.test(r)?null:this._removeDotSegments(this._basePath+r)}}_removeDotSegments(r){if(!/(^|\/)\.\.?($|[/#?])/.test(r))return r;const i=r.length;let a="",s=-1,d=-1,l=0,c="/";for(;s<i;){switch(c){case":":if(d<0&&r[++s]==="/"&&r[++s]==="/")for(;(d=s+1)<i&&r[d]!=="/";)s=d;break;case"?":case"#":s=i;break;case"/":if(r[s+1]===".")switch(c=r[++s+1],c){case"/":a+=r.substring(l,s-1),l=s+1;break;case void 0:case"?":case"#":return a+r.substring(l,s)+r.substr(s+1);case".":if(c=r[++s+1],c===void 0||c==="/"||c==="?"||c==="#"){if(a+=r.substring(l,s-2),(l=a.lastIndexOf("/"))>=d&&(a=a.substr(0,l)),c!=="/")return`${a}/${r.substr(s+1)}`;l=s+1}}}c=r[++s]}return a+r.substring(l)}parse(r,i,a){let s,d,l;if(i&&(i.onQuad||i.onPrefix||i.onComment)?(s=i.onQuad,d=i.onPrefix,l=i.onComment):(s=i,d=a),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${b_++}_`,this._prefixCallback=d||yy,this._inversePredicate=!1,this._quantified=Object.create(null),!s){const p=[];let f;if(this._callback=(m,b)=>{m?f=m:b&&p.push(b)},this._lexer.tokenize(r).every(m=>this._readCallback=this._readCallback(m)),f)throw f;return p}let c=(p,f)=>{p!==null?(this._callback(p),this._callback=yy):this._readCallback&&(this._readCallback=this._readCallback(f))};l&&(this._lexer.comments=!0,c=(p,f)=>{p!==null?(this._callback(p),this._callback=yy):this._readCallback&&(f.type==="comment"?l(f.value):this._readCallback=this._readCallback(f))}),this._callback=s,this._lexer.tokenize(r,c)}}function yy(){}function wE(t,r){t._factory=r,t.DEFAULTGRAPH=r.defaultGraph(),t.RDF_FIRST=r.namedNode(Ji.rdf.first),t.RDF_REST=r.namedNode(Ji.rdf.rest),t.RDF_NIL=r.namedNode(Ji.rdf.nil),t.N3_FORALL=r.namedNode(Ji.r.forAll),t.N3_FORSOME=r.namedNode(Ji.r.forSome),t.ABBREVIATIONS={a:r.namedNode(Ji.rdf.type),"=":r.namedNode(Ji.owl.sameAs),">":r.namedNode(Ji.log.implies),"<":r.namedNode(Ji.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=r.namedNode("urn:n3:quantifiers")}wE(Jy.prototype,zo);function nx(t){return!!t&&t.termType==="NamedNode"}function ix(t){return!!t&&t.termType==="BlankNode"}function ax(t){return!!t&&t.termType==="Literal"}function ox(t){return!!t&&t.termType==="Variable"}function sx(t){return!!t&&t.termType==="Quad"}function Zp(t){return!!t&&t.termType==="DefaultGraph"}function lx(t){return Zp(t.graph)}function ux(t,r){return _E({"":t.value||t},r)("")}function _E(t,r){const i=Object.create(null);for(const s in t)a(s,t[s]);r=r||zo;function a(s,d){if(typeof d=="string"){const l=Object.create(null);i[s]=c=>l[c]||(l[c]=r.namedNode(d+c))}else if(!(s in i))throw new Error(`Unknown prefix: ${s}`);return i[s]}return a}const SE=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:lx,isBlankNode:ix,isDefaultGraph:Zp,isLiteral:ax,isNamedNode:nx,isQuad:sx,isVariable:ox,prefix:ux,prefixes:_E},Symbol.toStringTag,{value:"Module"}));function xy(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const cx=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,fx=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,w_="./",dx="../",_0="?",__="#";class lg{constructor(r){this.base=r,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(r.length+1)}static supports(r){return!cx.test(r)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!lg.supports(this.base))return this._baseMatcher=/.^/;const r=/^[^:]*:\/*/.exec(this.base)[0],i=["^",xy(r)],a=[],s=[],d=/[^/?#]*([/?#])/y;let l,c=0,p=0,f=d.lastIndex=r.length;for(;!c&&!p&&(l=d.exec(this.base));)l[1]===__?p=d.lastIndex-1:(i.push(xy(l[0]),"(?:"),a.push(")?"),l[1]!==_0?s.push(f=d.lastIndex):(c=f=d.lastIndex,p=this.base.indexOf(__,c),this._pathReplacements[c]=_0));for(let m=0;m<s.length;m++)this._pathReplacements[s[m]]=dx.repeat(s.length-m-1);return this._pathReplacements[s[s.length-1]]=w_,this._baseLength=p>0?p:this.base.length,i.push(xy(this.base.substring(f,this._baseLength)),c?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...i,...a].join(""))}toRelative(r){const i=this._getBaseMatcher().exec(r);if(!i)return r;const a=i[0].length;if(a===this._baseLength&&a===r.length)return"";const s=this._pathReplacements[a];if(s){const d=r.substring(a);return s!==_0&&!fx.test(d)?r:s===w_&&/^[^?#]/.test(d)?d:s+d}return r.substring(a-1)}}const Pp=zo.defaultGraph(),{rdf:hx,xsd:bd}=Ji,S_=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,E_=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,px={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Ip extends so{equals(r){return r===this}}class ug{constructor(r,i){if(this._prefixRegex=/$0^/,r&&typeof r.write!="function"&&(i=r,r=null),i=i||{},this._lists=i.lists,r)this._outputStream=r,this._endStream=i.end===void 0?!0:!!i.end;else{let a="";this._outputStream={write(s,d,l){a+=s,l&&l()},end:s=>{s&&s(null,a)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(i.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Pp,this._prefixIRIs=Object.create(null),i.prefixes&&this.addPrefixes(i.prefixes),i.baseIRI&&(this._baseIri=new lg(i.baseIRI)))}get _inDefaultGraph(){return Pp.equals(this._graph)}_write(r,i){this._outputStream.write(r,"utf8",i)}_writeQuad(r,i,a,s,d){try{s.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Pp.equals(s)?"":`${this._encodeIriOrBlank(s)} {
`)),this._graph=s,this._subject=null),r.equals(this._subject)?i.equals(this._predicate)?this._write(`, ${this._encodeObject(a)}`,d):this._write(`;
    ${this._encodePredicate(this._predicate=i)} ${this._encodeObject(a)}`,d):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=r)} ${this._encodePredicate(this._predicate=i)} ${this._encodeObject(a)}`,d)}catch(l){d&&d(l)}}_writeQuadLine(r,i,a,s,d){delete this._prefixMatch,this._write(this.quadToString(r,i,a,s),d)}quadToString(r,i,a,s){return`${this._encodeSubject(r)} ${this._encodeIriOrBlank(i)} ${this._encodeObject(a)}${s&&s.value?` ${this._encodeIriOrBlank(s)} .
`:` .
`}`}quadsToString(r){let i="";for(const a of r)i+=this.quadToString(a.subject,a.predicate,a.object,a.graph);return i}_encodeSubject(r){return r.termType==="Quad"?this._encodeQuad(r):this._encodeIriOrBlank(r)}_encodeIriOrBlank(r){if(r.termType!=="NamedNode")return this._lists&&r.value in this._lists&&(r=this.list(this._lists[r.value])),"id"in r?r.id:`_:${r.value}`;let i=r.value;this._baseIri&&(i=this._baseIri.toRelative(i)),S_.test(i)&&(i=i.replace(E_,A_));const a=this._prefixRegex.exec(i);return a?a[1]?this._prefixIRIs[a[1]]+a[2]:i:`<${i}>`}_encodeLiteral(r){let i=r.value;if(S_.test(i)&&(i=i.replace(E_,A_)),r.language)return`"${i}"@${r.language}`;if(this._lineMode){if(r.datatype.value===bd.string)return`"${i}"`}else switch(r.datatype.value){case bd.string:return`"${i}"`;case bd.boolean:if(i==="true"||i==="false")return i;break;case bd.integer:if(/^[+-]?\d+$/.test(i))return i;break;case bd.decimal:if(/^[+-]?\d*\.\d+$/.test(i))return i;break;case bd.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(i))return i;break}return`"${i}"^^${this._encodeIriOrBlank(r.datatype)}`}_encodePredicate(r){return r.value===hx.type?"a":this._encodeIriOrBlank(r)}_encodeObject(r){switch(r.termType){case"Quad":return this._encodeQuad(r);case"Literal":return this._encodeLiteral(r);default:return this._encodeIriOrBlank(r)}}_encodeQuad({subject:r,predicate:i,object:a,graph:s}){return`<<${this._encodeSubject(r)} ${this._encodePredicate(i)} ${this._encodeObject(a)}${Zp(s)?"":` ${this._encodeIriOrBlank(s)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(r,i,a,s,d){a===void 0?this._writeQuad(r.subject,r.predicate,r.object,r.graph,i):typeof s=="function"?this._writeQuad(r,i,a,Pp,s):this._writeQuad(r,i,a,s||Pp,d)}addQuads(r){for(let i=0;i<r.length;i++)this.addQuad(r[i])}addPrefix(r,i,a){const s={};s[r]=i,this.addPrefixes(s,a)}addPrefixes(r,i){if(!this._prefixIRIs)return i&&i();let a=!1;for(let s in r){let d=r[s];typeof d!="string"&&(d=d.value),a=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[d]=s+=":",this._write(`@prefix ${s} <${d}>.
`)}if(a){let s="",d="";for(const l in this._prefixIRIs)s+=s?`|${l}`:l,d+=(d?"|":"")+this._prefixIRIs[l];s=xy(s),this._prefixRegex=new RegExp(`^(?:${d})[^/]*$|^(${s})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(a?`
`:"",i)}blank(r,i){let a=r,s,d;switch(r===void 0?a=[]:r.termType?a=[{predicate:r,object:i}]:"length"in r||(a=[r]),d=a.length){case 0:return new Ip("[]");case 1:if(s=a[0],!(s.object instanceof Ip))return new Ip(`[ ${this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)} ]`);default:let l="[";for(let c=0;c<d;c++)s=a[c],s.predicate.equals(r)?l+=`, ${this._encodeObject(s.object)}`:(l+=`${(c?`;
  `:`
  `)+this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)}`,r=s.predicate);return new Ip(`${l}
]`)}}list(r){const i=r&&r.length||0,a=new Array(i);for(let s=0;s<i;s++)a[s]=this._encodeObject(r[s]);return new Ip(`(${a.join(" ")})`)}end(r){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let i=r&&((a,s)=>{i=null,r(a,s)});if(this._endStream)try{return this._outputStream.end(i)}catch{}i&&i()}}function A_(t){let r=px[t];return r===void 0&&(t.length===1?(r=t.charCodeAt(0).toString(16),r="\\u0000".substr(0,6-r.length)+r):(r=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),r="\\U00000000".substr(0,10-r.length)+r)),r}var Yy=nE();const S0=Symbol("iter");function Wp(t,r,i=4){if(i===0)return Object.assign(t,r);for(const a in r)t[a]=Wp(t[a]||Object.create(null),r[a],i-1);return t}function EE(t,r,i=4){let a=!1;for(const s in t)if(s in r){const d=i===0?null:EE(t[s],r[s],i-1);if(d!==!1)a=a||Object.create(null),a[s]=d;else if(i===3)return!1}return a}function AE(t,r,i=4){let a=!1;for(const s in t)if(!(s in r))a=a||Object.create(null),a[s]=i===0?null:Wp({},t[s],i-1);else if(i!==0){const d=AE(t[s],r[s],i-1);if(d!==!1)a=a||Object.create(null),a[s]=d;else if(i===3)return!1}return a}class Lv{constructor(r={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=r.factory||zo}_termFromId(r){if(r[0]==="."){const i=this._entities,a=r.split(".");return this._factory.quad(this._termFromId(i[a[1]]),this._termFromId(i[a[2]]),this._termFromId(i[a[3]]),a[4]&&this._termFromId(i[a[4]]))}return af(r,this._factory)}_termToNumericId(r){if(r.termType==="Quad"){const i=this._termToNumericId(r.subject),a=this._termToNumericId(r.predicate),s=this._termToNumericId(r.object);let d;return i&&a&&s&&(Zp(r.graph)||(d=this._termToNumericId(r.graph)))&&this._ids[d?`.${i}.${a}.${s}.${d}`:`.${i}.${a}.${s}`]}return this._ids[Cu(r)]}_termToNewNumericId(r){const i=r&&r.termType==="Quad"?`.${this._termToNewNumericId(r.subject)}.${this._termToNewNumericId(r.predicate)}.${this._termToNewNumericId(r.object)}${Zp(r.graph)?"":`.${this._termToNewNumericId(r.graph)}`}`:Cu(r);return this._ids[i]||(this._ids[this._entities[++this._id]=i]=this._id)}createBlankNode(r){let i,a;if(r)for(i=r=`_:${r}`,a=1;this._ids[i];)i=r+a++;else do i=`_:b${this._blankNodeIndex++}`;while(this._ids[i]);return this._ids[i]=++this._id,this._entities[this._id]=i,this._factory.blankNode(i.substr(2))}}class oa{constructor(r,i){this._size=0,this._graphs=Object.create(null),!i&&r&&!r[0]&&typeof r.match!="function"&&(i=r,r=null),i=i||{},this._factory=i.factory||zo,this._entityIndex=i.entityIndex||new Lv({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),r&&this.addAll(r)}get size(){let r=this._size;if(r!==null)return r;r=0;const i=this._graphs;let a,s;for(const d in i)for(const l in a=i[d].subjects)for(const c in s=a[l])r+=Object.keys(s[c]).length;return this._size=r}_addToIndex(r,i,a,s){const d=r[i]||(r[i]={}),l=d[a]||(d[a]={}),c=s in l;return c||(l[s]=null),!c}_removeFromIndex(r,i,a,s){const d=r[i],l=d[a];delete l[s];for(const c in l)return;delete d[a];for(const c in d)return;delete r[i]}*_findInIndex(r,i,a,s,d,l,c,p){let f,m,b;const _=this._entities,A=this._termFromId(_[p]),T={subject:null,predicate:null,object:null};i&&((f=r,r={})[i]=f[i]);for(const x in r)if(m=r[x]){T[d]=this._termFromId(_[x]),a&&((f=m,m={})[a]=f[a]);for(const P in m)if(b=m[P]){T[l]=this._termFromId(_[P]);const R=s?s in b?[s]:[]:Object.keys(b);for(let F=0;F<R.length;F++)T[c]=this._termFromId(_[R[F]]),yield this._factory.quad(T.subject,T.predicate,T.object,A)}}}_loop(r,i){for(const a in r)i(a)}_loopByKey0(r,i,a){let s,d;if(s=r[i])for(d in s)a(d)}_loopByKey1(r,i,a){let s,d;for(s in r)d=r[s],d[i]&&a(s)}_loopBy2Keys(r,i,a,s){let d,l,c;if((d=r[i])&&(l=d[a]))for(c in l)s(c)}_countInIndex(r,i,a,s){let d=0,l,c,p;i&&((l=r,r={})[i]=l[i]);for(const f in r)if(c=r[f]){a&&((l=c,c={})[a]=l[a]);for(const m in c)(p=c[m])&&(s?s in p&&d++:d+=Object.keys(p).length)}return d}_getGraphs(r){return r=r===""?1:r&&(this._termToNumericId(r)||-1),typeof r!="number"?this._graphs:{[r]:this._graphs[r]}}_uniqueEntities(r){const i=Object.create(null);return a=>{a in i||(i[a]=!0,r(this._termFromId(this._entities[a],this._factory)))}}add(r){return this.addQuad(r),this}addQuad(r,i,a,s){i||(s=r.graph,a=r.object,i=r.predicate,r=r.subject),s=s?this._termToNewNumericId(s):1;let d=this._graphs[s];return d||(d=this._graphs[s]={subjects:{},predicates:{},objects:{}},Object.freeze(d)),r=this._termToNewNumericId(r),i=this._termToNewNumericId(i),a=this._termToNewNumericId(a),this._addToIndex(d.subjects,r,i,a)?(this._addToIndex(d.predicates,i,a,r),this._addToIndex(d.objects,a,r,i),this._size=null,!0):!1}addQuads(r){for(let i=0;i<r.length;i++)this.addQuad(r[i])}delete(r){return this.removeQuad(r),this}has(r,i,a,s){return r&&r.subject&&({subject:r,predicate:i,object:a,graph:s}=r),!this.readQuads(r,i,a,s).next().done}import(r){return r.on("data",i=>{this.addQuad(i)}),r}removeQuad(r,i,a,s){i||({subject:r,predicate:i,object:a,graph:s}=r),s=s?this._termToNumericId(s):1;const d=this._graphs;let l,c,p;if(!(r=r&&this._termToNumericId(r))||!(i=i&&this._termToNumericId(i))||!(a=a&&this._termToNumericId(a))||!(l=d[s])||!(c=l.subjects[r])||!(p=c[i])||!(a in p))return!1;this._removeFromIndex(l.subjects,r,i,a),this._removeFromIndex(l.predicates,i,a,r),this._removeFromIndex(l.objects,a,r,i),this._size!==null&&this._size--;for(r in l.subjects)return!0;return delete d[s],!0}removeQuads(r){for(let i=0;i<r.length;i++)this.removeQuad(r[i])}remove(r){return r.on("data",i=>{this.removeQuad(i)}),r}removeMatches(r,i,a,s){const d=new Yy.Readable({objectMode:!0}),l=this.readQuads(r,i,a,s);return d._read=c=>{for(;--c>=0;){const{done:p,value:f}=l.next();if(p){d.push(null);return}d.push(f)}},this.remove(d)}deleteGraph(r){return this.removeMatches(null,null,null,r)}getQuads(r,i,a,s){return[...this.readQuads(r,i,a,s)]}*readQuads(r,i,a,s){const d=this._getGraphs(s);let l,c,p,f;if(!(r&&!(c=this._termToNumericId(r))||i&&!(p=this._termToNumericId(i))||a&&!(f=this._termToNumericId(a))))for(const m in d)(l=d[m])&&(c?f?yield*this._findInIndex(l.objects,f,c,p,"object","subject","predicate",m):yield*this._findInIndex(l.subjects,c,p,null,"subject","predicate","object",m):p?yield*this._findInIndex(l.predicates,p,f,null,"predicate","object","subject",m):f?yield*this._findInIndex(l.objects,f,null,null,"object","subject","predicate",m):yield*this._findInIndex(l.subjects,null,null,null,"subject","predicate","object",m))}match(r,i,a,s){return new Tu(this,r,i,a,s,{entityIndex:this._entityIndex})}countQuads(r,i,a,s){const d=this._getGraphs(s);let l=0,c,p,f,m;if(r&&!(p=this._termToNumericId(r))||i&&!(f=this._termToNumericId(i))||a&&!(m=this._termToNumericId(a)))return 0;for(const b in d)(c=d[b])&&(r?a?l+=this._countInIndex(c.objects,m,p,f):l+=this._countInIndex(c.subjects,p,f,m):i?l+=this._countInIndex(c.predicates,f,m,p):l+=this._countInIndex(c.objects,m,p,f));return l}forEach(r,i,a,s,d){this.some(l=>(r(l,this),!1),i,a,s,d)}every(r,i,a,s,d){return!this.some(l=>!r(l,this),i,a,s,d)}some(r,i,a,s,d){for(const l of this.readQuads(i,a,s,d))if(r(l,this))return!0;return!1}getSubjects(r,i,a){const s=[];return this.forSubjects(d=>{s.push(d)},r,i,a),s}forSubjects(r,i,a,s){const d=this._getGraphs(s);let l,c,p;if(r=this._uniqueEntities(r),!(i&&!(c=this._termToNumericId(i))||a&&!(p=this._termToNumericId(a))))for(s in d)(l=d[s])&&(c?p?this._loopBy2Keys(l.predicates,c,p,r):this._loopByKey1(l.subjects,c,r):p?this._loopByKey0(l.objects,p,r):this._loop(l.subjects,r))}getPredicates(r,i,a){const s=[];return this.forPredicates(d=>{s.push(d)},r,i,a),s}forPredicates(r,i,a,s){const d=this._getGraphs(s);let l,c,p;if(r=this._uniqueEntities(r),!(i&&!(c=this._termToNumericId(i))||a&&!(p=this._termToNumericId(a))))for(s in d)(l=d[s])&&(c?p?this._loopBy2Keys(l.objects,p,c,r):this._loopByKey0(l.subjects,c,r):p?this._loopByKey1(l.predicates,p,r):this._loop(l.predicates,r))}getObjects(r,i,a){const s=[];return this.forObjects(d=>{s.push(d)},r,i,a),s}forObjects(r,i,a,s){const d=this._getGraphs(s);let l,c,p;if(r=this._uniqueEntities(r),!(i&&!(c=this._termToNumericId(i))||a&&!(p=this._termToNumericId(a))))for(s in d)(l=d[s])&&(c?p?this._loopBy2Keys(l.subjects,c,p,r):this._loopByKey1(l.objects,c,r):p?this._loopByKey0(l.predicates,p,r):this._loop(l.objects,r))}getGraphs(r,i,a){const s=[];return this.forGraphs(d=>{s.push(d)},r,i,a),s}forGraphs(r,i,a,s){for(const d in this._graphs)this.some(l=>(r(l.graph),!0),i,a,s,this._termFromId(this._entities[d]))}createBlankNode(r){return this._entityIndex.createBlankNode(r)}extractLists({remove:r=!1,ignoreErrors:i=!1}={}){const a={},s=i?()=>!0:(c,p)=>{throw new Error(`${c.value} ${p}`)},d=this.getQuads(null,Ji.rdf.rest,Ji.rdf.nil,null),l=r?[...d]:[];return d.forEach(c=>{const p=[];let f=!1,m,b;const _=c.graph;let A=c.subject;for(;A&&!f;){const T=this.getQuads(null,null,A,null),x=this.getQuads(A,null,null,null);let P,R=null,F=null,I=null;for(let $=0;$<x.length&&!f;$++)P=x[$],P.graph.equals(_)?m?f=s(A,"has non-list arcs out"):P.predicate.value===Ji.rdf.first?R?f=s(A,"has multiple rdf:first arcs"):l.push(R=P):P.predicate.value===Ji.rdf.rest?F?f=s(A,"has multiple rdf:rest arcs"):l.push(F=P):T.length?f=s(A,"can't be subject and object"):(m=P,b="subject"):f=s(A,"not confined to single graph");for(let $=0;$<T.length&&!f;++$)P=T[$],m?f=s(A,"can't have coreferences"):P.predicate.value===Ji.rdf.rest?I?f=s(A,"has incoming rdf:rest arcs"):I=P:(m=P,b="object");R?p.unshift(R.object):f=s(A,"has no list head"),A=I&&I.subject}f?r=!1:m&&(a[m[b].value]=p)}),r&&this.removeQuads(l),a}addAll(r){if(r instanceof Tu&&(r=r.filtered),Array.isArray(r))this.addQuads(r);else if(r instanceof oa&&r._entityIndex===this._entityIndex)r._size!==0&&(this._graphs=Wp(this._graphs,r._graphs),this._size=null);else for(const i of r)this.add(i);return this}contains(r){if(r instanceof Tu&&(r=r.filtered),r===this)return!0;if(!(r instanceof oa)||this._entityIndex!==r._entityIndex)return r.every(f=>this.has(f));const i=this._graphs,a=r._graphs;let s,d,l,c,p;for(const f in a){if(!(s=i[f]))return!1;s=s.subjects;for(const m in d=a[f].subjects){if(!(l=s[m]))return!1;for(const b in c=d[m]){if(!(p=l[b]))return!1;for(const _ in c[b])if(!(_ in p))return!1}}}return!0}deleteMatches(r,i,a,s){for(const d of this.match(r,i,a,s))this.removeQuad(d);return this}difference(r){if(r&&r instanceof Tu&&(r=r.filtered),r===this)return new oa({entityIndex:this._entityIndex});if(r instanceof oa&&r._entityIndex===this._entityIndex){const i=new oa({entityIndex:this._entityIndex}),a=AE(this._graphs,r._graphs);return a&&(i._graphs=a,i._size=null),i}return this.filter(i=>!r.has(i))}equals(r){return r instanceof Tu&&(r=r.filtered),r===this||this.size===r.size&&this.contains(r)}filter(r){const i=new oa({entityIndex:this._entityIndex});for(const a of this)r(a,this)&&i.add(a);return i}intersection(r){if(r instanceof Tu&&(r=r.filtered),r===this){const i=new oa({entityIndex:this._entityIndex});return i._graphs=Wp(Object.create(null),this._graphs),i._size=this._size,i}else if(r instanceof oa&&this._entityIndex===r._entityIndex){const i=new oa({entityIndex:this._entityIndex}),a=EE(r._graphs,this._graphs);return a&&(i._graphs=a,i._size=null),i}return this.filter(i=>r.has(i))}map(r){const i=new oa({entityIndex:this._entityIndex});for(const a of this)i.add(r(a,this));return i}reduce(r,i){const a=this.readQuads();let s=i===void 0?a.next().value:i;for(const d of a)s=r(s,d,this);return s}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new ug().quadsToString(this)}union(r){const i=new oa({entityIndex:this._entityIndex});return i._graphs=Wp(Object.create(null),this._graphs),i._size=this._size,i.addAll(r),i}*[Symbol.iterator](){yield*this.readQuads()}}function _s(t,r,i=0){const a=r[i];if(a&&!(a in t))return!1;let s=!1;for(const d in a?{[a]:t[a]}:t){const l=i===2?null:_s(t[d],r,i+1);l!==!1&&(s=s||Object.create(null),s[d]=l)}return s}class Tu extends Yy.Readable{constructor(r,i,a,s,d,l){super({objectMode:!0}),Object.assign(this,{n3Store:r,subject:i,predicate:a,object:s,graph:d,options:l})}get filtered(){if(!this._filtered){const{n3Store:r,graph:i,object:a,predicate:s,subject:d}=this,l=this._filtered=new oa({factory:r._factory,entityIndex:this.options.entityIndex});let c,p,f;if(d&&!(c=l._termToNumericId(d))||s&&!(p=l._termToNumericId(s))||a&&!(f=l._termToNumericId(a)))return l;const m=r._getGraphs(i);for(const b in m){let _,A,T,x;(x=m[b])&&(!c&&p?(A=_s(x.predicates,[p,f,c]))&&(_=_s(x.subjects,[c,p,f]),T=_s(x.objects,[f,c,p])):f?(T=_s(x.objects,[f,c,p]))&&(_=_s(x.subjects,[c,p,f]),A=_s(x.predicates,[p,f,c])):(_=_s(x.subjects,[c,p,f]))&&(A=_s(x.predicates,[p,f,c]),T=_s(x.objects,[f,c,p])),_&&(l._graphs[b]={subjects:_,predicates:A,objects:T}))}l._size=null}return this._filtered}get size(){return this.filtered.size}_read(r){r>0&&!this[S0]&&(this[S0]=this[Symbol.iterator]());const i=this[S0];for(;--r>=0;){const{done:a,value:s}=i.next();if(a){this.push(null);return}this.push(s)}}addAll(r){return this.filtered.addAll(r)}contains(r){return this.filtered.contains(r)}deleteMatches(r,i,a,s){return this.filtered.deleteMatches(r,i,a,s)}difference(r){return this.filtered.difference(r)}equals(r){return this.filtered.equals(r)}every(r,i,a,s,d){return this.filtered.every(r,i,a,s,d)}filter(r){return this.filtered.filter(r)}forEach(r,i,a,s,d){return this.filtered.forEach(r,i,a,s,d)}import(r){return this.filtered.import(r)}intersection(r){return this.filtered.intersection(r)}map(r){return this.filtered.map(r)}some(r,i,a,s,d){return this.filtered.some(r,i,a,s,d)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(r){return this._filtered?this._filtered.union(r):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(r)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(r,i){return this.filtered.reduce(r,i)}toString(){return new ug().quadsToString(this)}add(r){return this.filtered.add(r)}delete(r){return this.filtered.delete(r)}has(r){return this.filtered.has(r)}match(r,i,a,s){return new Tu(this.filtered,r,i,a,s,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class RE{dataset(r){return new oa(r)}}function xE(t){const r=[];for(const{subject:i,object:a}of t.match(null,zo.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,zo.defaultGraph())){const s=[...t.match(null,null,null,i)],d=[...t.match(null,null,null,a)];r.push({premise:s,conclusion:d})}return r}class TE{constructor(r){this._store=r}_add(r,i,a,s,d){this._store._addToIndex(s.subjects,r,i,a)&&(this._store._addToIndex(s.predicates,i,a,r),this._store._addToIndex(s.objects,a,r,i),d())}_evaluatePremise(r,i,a,s=0){let d,l,c,p,f;const[m,b,_]=r.premise[s].value,A=i[r.premise[s].content],T=!(c=m.value);for(c in T?A:{[c]:A[c]})if(p=A[c]){T&&(m.value=Number(c)),d=!(c=b.value);for(c in d?p:{[c]:p[c]})if(f=p[c]){d&&(b.value=Number(c)),l=!(c=_.value);for(c in l?f:{[c]:f[c]})l&&(_.value=Number(c)),s===r.premise.length-1?r.conclusion.forEach(x=>{this._add(x.subject.value,x.predicate.value,x.object.value,i,()=>{a(x)})}):this._evaluatePremise(r,i,a,s+1);l&&(_.value=null)}d&&(b.value=null)}T&&(m.value=null)}_evaluateRules(r,i,a){for(let s=0;s<r.length;s++)this._evaluatePremise(r[s],i,a)}_reasonGraphNaive(r,i){const a=[];function s(c){c.next&&c.next.forEach(p=>{a.push([c.subject.value,c.predicate.value,c.object.value,p])})}const d=c=>{c.forEach(p=>{this._add(p.subject.value,p.predicate.value,p.object.value,i,()=>{s(p)})})};this._evaluateRules(r,i,s);let l;for(;(l=a.pop())!==void 0;){const[c,p,f,m]=l,b=m.basePremise.subject.value;b||(m.basePremise.subject.value=c);const _=m.basePremise.predicate.value;_||(m.basePremise.predicate.value=p);const A=m.basePremise.object.value;A||(m.basePremise.object.value=f),m.premise.length===0?d(m.conclusion):this._evaluatePremise(m,i,s),b||(m.basePremise.subject.value=null),_||(m.basePremise.predicate.value=null),A||(m.basePremise.object.value=null)}}_createRule({premise:r,conclusion:i}){const a={},s=l=>l.termType==="Variable"?a[l.value]=a[l.value]||{}:{value:this._store._termToNewNumericId(l)},d=l=>({subject:s(l.subject),predicate:s(l.predicate),object:s(l.object)});return{premise:r.map(l=>d(l)),conclusion:i.map(l=>d(l)),variables:Object.values(a)}}reason(r){Array.isArray(r)||(r=xE(r)),r=r.map(a=>this._createRule(a));for(const a of r)for(const s of r)for(let d=0;d<s.premise.length;d++){const l=s.premise[d];for(const c of a.conclusion){if(E0(l.subject,c.subject)&&E0(l.predicate,c.predicate)&&E0(l.object,c.object)){const p=new Set,f=[];l.subject.value=l.subject.value||1,l.object.value=l.object.value||1,l.predicate.value=l.predicate.value||1;for(let m=0;m<s.premise.length;m++)m!==d&&f.push(R_(s.premise[m],p));(c.next=c.next||[]).push({premise:f,conclusion:s.conclusion,basePremise:l})}s.variables.forEach(p=>{p.value=null})}}for(const a of r){const s=new Set;a.premise=a.premise.map(d=>R_(d,s))}const i=this._store._getGraphs();for(const a in i)this._reasonGraphNaive(r,i[a]);this._store._size=null}}function R_({subject:t,predicate:r,object:i},a){const s=t.value||a.has(t)||(a.add(t),!1),d=r.value||a.has(r)||(a.add(r),!1),l=i.value||a.has(i)||(a.add(i),!1);return!s&&d?{content:"predicates",value:[r,i,t]}:l?{content:"objects",value:[i,t,r]}:{content:"subjects",value:[t,r,i]}}function E0(t,r){return t.value===null&&(t.value=r.value),t.value===r.value}class CE extends Yy.Transform{constructor(r){super({decodeStrings:!0}),this._readableState.objectMode=!0;const i=new Jy(r);let a,s;const d={onQuad:(l,c)=>{l&&this.emit("error",l)||c&&this.push(c)},onPrefix:(l,c)=>{this.emit("prefix",l,c)}};r&&r.comments&&(d.onComment=l=>{this.emit("comment",l)}),i.parse({on:(l,c)=>{switch(l){case"data":a=c;break;case"end":s=c;break}}},d),this._transform=(l,c,p)=>{a(l),p()},this._flush=l=>{s(),l()}}import(r){return r.on("data",i=>{this.write(i)}),r.on("end",()=>{this.end()}),r.on("error",i=>{this.emit("error",i)}),this}}class OE extends Yy.Transform{constructor(r){super({encoding:"utf8",writableObjectMode:!0});const i=this._writer=new ug({write:(a,s,d)=>{this.push(a),d&&d()},end:a=>{this.push(null),a&&a()}},r);this._transform=(a,s,d)=>{i.addQuad(a,d)},this._flush=a=>{i.end(a)}}import(r){return r.on("data",i=>{this.write(i)}),r.on("end",()=>{this.end()}),r.on("error",i=>{this.emit("error",i)}),r.on("prefix",(i,a)=>{this._writer.addPrefix(i,a)}),this}}const gx={Lexer:Nv,Parser:Jy,Writer:ug,Store:oa,StoreFactory:RE,EntityIndex:Lv,StreamParser:CE,StreamWriter:OE,Util:SE,Reasoner:TE,BaseIRI:lg,DataFactory:zo,Term:so,NamedNode:Wy,Literal:Iu,BlankNode:Fv,Variable:Dv,DefaultGraph:Uv,Quad:Sd,Triple:Sd,termFromId:af,termToId:Cu},yx=Object.freeze(Object.defineProperty({__proto__:null,BaseIRI:lg,BlankNode:Fv,DataFactory:zo,DefaultGraph:Uv,EntityIndex:Lv,Lexer:Nv,Literal:Iu,NamedNode:Wy,Parser:Jy,Quad:Sd,Reasoner:TE,Store:oa,StoreFactory:RE,StreamParser:CE,StreamWriter:OE,Term:so,Triple:Sd,Util:SE,Variable:Dv,Writer:ug,default:gx,getRulesFromDataset:xE,termFromId:af,termToId:Cu},Symbol.toStringTag,{value:"Module"})),mx=Ky(yx);var A0,x_;function vx(){if(x_)return A0;x_=1;class t{constructor(i){this.value=i||"b"+ ++t.nextId}equals(i){return!!i&&i.termType===this.termType&&i.value===this.value}}return t.prototype.termType="BlankNode",t.nextId=0,A0=t,A0}var R0,T_;function PE(){if(T_)return R0;T_=1;class t{equals(i){return!!i&&i.termType===this.termType}}return t.prototype.termType="DefaultGraph",t.prototype.value="",R0=t,R0}var x0,C_;function bx(){if(C_)return x0;C_=1;function t(r){if(!r)return null;if(r.termType==="BlankNode")return this.blankNode(r.value);if(r.termType==="DefaultGraph")return this.defaultGraph();if(r.termType==="Literal")return this.literal(r.value,r.language||this.namedNode(r.datatype.value));if(r.termType==="NamedNode")return this.namedNode(r.value);if(r.termType==="Quad"){const i=this.fromTerm(r.subject),a=this.fromTerm(r.predicate),s=this.fromTerm(r.object),d=this.fromTerm(r.graph);return this.quad(i,a,s,d)}if(r.termType==="Variable")return this.variable(r.value);throw new Error(`unknown termType ${r.termType}`)}return x0=t,x0}var T0,O_;function IE(){if(O_)return T0;O_=1;class t{constructor(i){this.value=i}equals(i){return!!i&&i.termType===this.termType&&i.value===this.value}}return t.prototype.termType="NamedNode",T0=t,T0}var C0,P_;function wx(){if(P_)return C0;P_=1;const t=IE();class r{constructor(a,s,d){this.value=a,this.datatype=r.stringDatatype,this.language="",s?(this.language=s,this.datatype=r.langStringDatatype):d&&(this.datatype=d)}equals(a){return!!a&&a.termType===this.termType&&a.value===this.value&&a.language===this.language&&a.datatype.equals(this.datatype)}}return r.prototype.termType="Literal",r.langStringDatatype=new t("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.stringDatatype=new t("http://www.w3.org/2001/XMLSchema#string"),C0=r,C0}var O0,I_;function _x(){if(I_)return O0;I_=1;const t=PE();class r{constructor(a,s,d,l){this.subject=a,this.predicate=s,this.object=d,l?this.graph=l:this.graph=new t}equals(a){return!!a&&(a.termType==="Quad"||!a.termType)&&a.subject.equals(this.subject)&&a.predicate.equals(this.predicate)&&a.object.equals(this.object)&&a.graph.equals(this.graph)}}return r.prototype.termType="Quad",r.prototype.value="",O0=r,O0}var P0,N_;function Sx(){if(N_)return P0;N_=1;class t{constructor(i){this.value=i}equals(i){return!!i&&i.termType===this.termType&&i.value===this.value}}return t.prototype.termType="Variable",P0=t,P0}var I0,F_;function Ex(){if(F_)return I0;F_=1;const t=vx(),r=PE(),i=bx(),a=wx(),s=IE(),d=_x(),l=Sx();function c(R){return new s(R)}function p(R){return new t(R)}function f(R,F){return typeof F=="string"?F.indexOf(":")===-1?new a(R,F):new a(R,null,P.namedNode(F)):new a(R,null,F)}function m(R){return new l(R)}function b(){return P.defaultGraphInstance}function _(R,F,I){return P.quad(R,F,I)}function A(R,F,I,$){return new d(R,F,I,$||P.defaultGraphInstance)}function T(R){return i.call(P,R)}function x(R){return i.call(P,R)}const P={namedNode:c,blankNode:p,literal:f,variable:m,defaultGraph:b,triple:_,quad:A,fromTerm:T,fromQuad:x,defaultGraphInstance:new r};return I0=P,I0}var N0,D_;function NE(){return D_||(D_=1,N0=Ex()),N0}var F0,U_;function Ax(){if(U_)return F0;U_=1;function t(l){return typeof l=="string"||l instanceof String}const r="http://www.w3.org/2001/XMLSchema#string";function i(l){if(typeof l=="string")return l;if(!l)return"";if(typeof l.id<"u"&&l.termType!=="Quad")return l.id;let c,p,f,m;switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return`_:${l.value}`;case"Variable":return`?${l.value}`;case"DefaultGraph":return"";case"Literal":return l.language?`"${l.value}"@${l.language}`:`"${l.value}"${l.datatype&&l.datatype.value!==r?`^^${l.datatype.value}`:""}`;case"Quad":return c=s(i(l.subject)),p=s(i(l.predicate)),f=s(i(l.object)),m=l.graph.termType==="DefaultGraph"?"":` ${i(l.graph)}`,`<<${c} ${p} ${f}${m}>>`;default:throw new Error(`Unexpected termType: ${l.termType}`)}}const a=/^"(.*".*)(?="[^"]*$)/;function s(l){return l.replace(a,(c,p)=>`"${p.replace(/"/g,'""')}`)}class d{constructor(c){if(this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._quads=new Map,c)for(const p of c)this.add(p)}get size(){let c=this._size;if(c!==null)return c;c=0;const p=this._graphs;let f,m;for(const b in p)for(const _ in f=p[b].subjects)for(const A in m=f[_])c+=Object.keys(m[A]).length;return this._size=c,this._size}add(c){let p=i(c.subject),f=i(c.predicate),m=i(c.object);const b=i(c.graph);let _=this._graphs[b];_||(_=this._graphs[b]={subjects:{},predicates:{},objects:{}},Object.freeze(_));const A=this._ids,T=this._entities;return p=A[p]||(A[T[++this._id]=p]=this._id),f=A[f]||(A[T[++this._id]=f]=this._id),m=A[m]||(A[T[++this._id]=m]=this._id),this._addToIndex(_.subjects,p,f,m),this._addToIndex(_.predicates,f,m,p),this._addToIndex(_.objects,m,p,f),this._setQuad(p,f,m,b,c),this._size=null,this}delete(c){let p=i(c.subject),f=i(c.predicate),m=i(c.object);const b=i(c.graph),_=this._ids,A=this._graphs;let T,x,P;if(!(p=_[p])||!(f=_[f])||!(m=_[m])||!(T=A[b])||!(x=T.subjects[p])||!(P=x[f])||!(m in P))return this;this._removeFromIndex(T.subjects,p,f,m),this._removeFromIndex(T.predicates,f,m,p),this._removeFromIndex(T.objects,m,p,f),this._size!==null&&this._size--,this._deleteQuad(p,f,m,b);for(p in T.subjects)return this;return delete A[b],this}has(c){const p=i(c.subject),f=i(c.predicate),m=i(c.object),b=i(c.graph),_=this._graphs[b];if(!_)return!1;const A=this._ids;let T,x,P;return t(p)&&!(T=A[p])||t(f)&&!(x=A[f])||t(m)&&!(P=A[m])?!1:this._countInIndex(_.objects,P,T,x)===1}match(c,p,f,m){return this._createDataset(this._match(c,p,f,m))}[Symbol.iterator](){return this._match()[Symbol.iterator]()}_addToIndex(c,p,f,m){const b=c[p]||(c[p]={}),_=b[f]||(b[f]={}),A=m in _;return A||(_[m]=null),!A}_removeFromIndex(c,p,f,m){const b=c[p],_=b[f];delete _[m];for(const A in _)return;delete b[f];for(const A in b)return;delete c[p]}_findInIndex(c,p,f,m,b,_,A,T,x,P){let R,F,I;p&&((R=c,c={})[p]=R[p]);for(const $ in c)if(F=c[$],F){f&&((R=F,F={})[f]=R[f]);for(const B in F)if(I=F[B],I){const W=m?m in I?[m]:[]:Object.keys(I);for(let Y=0;Y<W.length;Y++){const q={[b]:$,[_]:B,[A]:W[Y]},Ie=this._getQuad(q.subject,q.predicate,q.object,T);if(P)P.push(Ie);else if(x(Ie))return!0}}}return P}_countInIndex(c,p,f,m){let b=0,_,A,T;p&&((_=c,c={})[p]=_[p]);for(const x in c)if(A=c[x],A){f&&((_=A,A={})[f]=_[f]);for(const P in A)T=A[P],T&&(m?m in T&&b++:b+=Object.keys(T).length)}return b}_getGraphs(c){return t(c)?{[c]:this._graphs[c]}:this._graphs}_match(c,p,f,m){c=c&&i(c),p=p&&i(p),f=f&&i(f),m=m&&i(m);const b=[],_=this._getGraphs(m),A=this._ids;let T,x,P,R;if(t(c)&&!(x=A[c])||t(p)&&!(P=A[p])||t(f)&&!(R=A[f]))return b;for(const F in _)T=_[F],T&&(x?R?this._findInIndex(T.objects,R,x,P,"object","subject","predicate",F,null,b):this._findInIndex(T.subjects,x,P,null,"subject","predicate","object",F,null,b):P?this._findInIndex(T.predicates,P,R,null,"predicate","object","subject",F,null,b):R?this._findInIndex(T.objects,R,null,null,"object","subject","predicate",F,null,b):this._findInIndex(T.subjects,null,null,null,"subject","predicate","object",F,null,b));return b}_getQuad(c,p,f,m){return this._quads.get(this._toId(c,p,f,m))}_setQuad(c,p,f,m,b){this._quads.set(this._toId(c,p,f,m),b)}_deleteQuad(c,p,f,m){this._quads.delete(this._toId(c,p,f,m))}_createDataset(c){return new this.constructor(c)}_toId(c,p,f,m){return`${c}:${p}:${f}:${m}`}}return F0=d,F0}var D0,L_;function Rx(){if(L_)return D0;L_=1;const t=NE(),r=Ax();function i(a){return new r(a)}return D0=Object.assign({dataset:i},t),D0}var U0={},Np={},my={},M_;function FE(){if(M_)return my;M_=1,Object.defineProperty(my,"__esModule",{value:!0}),my.default=i;let t;const r=new Uint8Array(16);function i(){if(!t&&(t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(r)}return my}var wd={},Fp={},Dp={},k_;function xx(){if(k_)return Dp;k_=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.default=void 0;var t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return Dp.default=t,Dp}var B_;function Qy(){if(B_)return Fp;B_=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.default=void 0;var t=r(xx());function r(s){return s&&s.__esModule?s:{default:s}}function i(s){return typeof s=="string"&&t.default.test(s)}var a=i;return Fp.default=a,Fp}var H_;function Xy(){if(H_)return wd;H_=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.default=void 0,wd.unsafeStringify=a;var t=r(Qy());function r(l){return l&&l.__esModule?l:{default:l}}const i=[];for(let l=0;l<256;++l)i.push((l+256).toString(16).slice(1));function a(l,c=0){return i[l[c+0]]+i[l[c+1]]+i[l[c+2]]+i[l[c+3]]+"-"+i[l[c+4]]+i[l[c+5]]+"-"+i[l[c+6]]+i[l[c+7]]+"-"+i[l[c+8]]+i[l[c+9]]+"-"+i[l[c+10]]+i[l[c+11]]+i[l[c+12]]+i[l[c+13]]+i[l[c+14]]+i[l[c+15]]}function s(l,c=0){const p=a(l,c);if(!(0,t.default)(p))throw TypeError("Stringified UUID is invalid");return p}var d=s;return wd.default=d,wd}var j_;function Tx(){if(j_)return Np;j_=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.default=void 0;var t=i(FE()),r=Xy();function i(f){return f&&f.__esModule?f:{default:f}}let a,s,d=0,l=0;function c(f,m,b){let _=m&&b||0;const A=m||new Array(16);f=f||{};let T=f.node||a,x=f.clockseq!==void 0?f.clockseq:s;if(T==null||x==null){const B=f.random||(f.rng||t.default)();T==null&&(T=a=[B[0]|1,B[1],B[2],B[3],B[4],B[5]]),x==null&&(x=s=(B[6]<<8|B[7])&16383)}let P=f.msecs!==void 0?f.msecs:Date.now(),R=f.nsecs!==void 0?f.nsecs:l+1;const F=P-d+(R-l)/1e4;if(F<0&&f.clockseq===void 0&&(x=x+1&16383),(F<0||P>d)&&f.nsecs===void 0&&(R=0),R>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=P,l=R,s=x,P+=122192928e5;const I=((P&268435455)*1e4+R)%4294967296;A[_++]=I>>>24&255,A[_++]=I>>>16&255,A[_++]=I>>>8&255,A[_++]=I&255;const $=P/4294967296*1e4&268435455;A[_++]=$>>>8&255,A[_++]=$&255,A[_++]=$>>>24&15|16,A[_++]=$>>>16&255,A[_++]=x>>>8|128,A[_++]=x&255;for(let B=0;B<6;++B)A[_+B]=T[B];return m||(0,r.unsafeStringify)(A)}var p=c;return Np.default=p,Np}var Up={},Eu={},Lp={},V_;function DE(){if(V_)return Lp;V_=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.default=void 0;var t=r(Qy());function r(s){return s&&s.__esModule?s:{default:s}}function i(s){if(!(0,t.default)(s))throw TypeError("Invalid UUID");let d;const l=new Uint8Array(16);return l[0]=(d=parseInt(s.slice(0,8),16))>>>24,l[1]=d>>>16&255,l[2]=d>>>8&255,l[3]=d&255,l[4]=(d=parseInt(s.slice(9,13),16))>>>8,l[5]=d&255,l[6]=(d=parseInt(s.slice(14,18),16))>>>8,l[7]=d&255,l[8]=(d=parseInt(s.slice(19,23),16))>>>8,l[9]=d&255,l[10]=(d=parseInt(s.slice(24,36),16))/1099511627776&255,l[11]=d/4294967296&255,l[12]=d>>>24&255,l[13]=d>>>16&255,l[14]=d>>>8&255,l[15]=d&255,l}var a=i;return Lp.default=a,Lp}var K_;function UE(){if(K_)return Eu;K_=1,Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.URL=Eu.DNS=void 0,Eu.default=l;var t=Xy(),r=i(DE());function i(c){return c&&c.__esModule?c:{default:c}}function a(c){c=unescape(encodeURIComponent(c));const p=[];for(let f=0;f<c.length;++f)p.push(c.charCodeAt(f));return p}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Eu.DNS=s;const d="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Eu.URL=d;function l(c,p,f){function m(b,_,A,T){var x;if(typeof b=="string"&&(b=a(b)),typeof _=="string"&&(_=(0,r.default)(_)),((x=_)===null||x===void 0?void 0:x.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let P=new Uint8Array(16+b.length);if(P.set(_),P.set(b,_.length),P=f(P),P[6]=P[6]&15|p,P[8]=P[8]&63|128,A){T=T||0;for(let R=0;R<16;++R)A[T+R]=P[R];return A}return(0,t.unsafeStringify)(P)}try{m.name=c}catch{}return m.DNS=s,m.URL=d,m}return Eu}var Mp={},G_;function Cx(){if(G_)return Mp;G_=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.default=void 0;function t(A){if(typeof A=="string"){const T=unescape(encodeURIComponent(A));A=new Uint8Array(T.length);for(let x=0;x<T.length;++x)A[x]=T.charCodeAt(x)}return r(a(s(A),A.length*8))}function r(A){const T=[],x=A.length*32,P="0123456789abcdef";for(let R=0;R<x;R+=8){const F=A[R>>5]>>>R%32&255,I=parseInt(P.charAt(F>>>4&15)+P.charAt(F&15),16);T.push(I)}return T}function i(A){return(A+64>>>9<<4)+14+1}function a(A,T){A[T>>5]|=128<<T%32,A[i(T)-1]=T;let x=1732584193,P=-271733879,R=-1732584194,F=271733878;for(let I=0;I<A.length;I+=16){const $=x,B=P,W=R,Y=F;x=p(x,P,R,F,A[I],7,-680876936),F=p(F,x,P,R,A[I+1],12,-389564586),R=p(R,F,x,P,A[I+2],17,606105819),P=p(P,R,F,x,A[I+3],22,-1044525330),x=p(x,P,R,F,A[I+4],7,-176418897),F=p(F,x,P,R,A[I+5],12,1200080426),R=p(R,F,x,P,A[I+6],17,-1473231341),P=p(P,R,F,x,A[I+7],22,-45705983),x=p(x,P,R,F,A[I+8],7,1770035416),F=p(F,x,P,R,A[I+9],12,-1958414417),R=p(R,F,x,P,A[I+10],17,-42063),P=p(P,R,F,x,A[I+11],22,-1990404162),x=p(x,P,R,F,A[I+12],7,1804603682),F=p(F,x,P,R,A[I+13],12,-40341101),R=p(R,F,x,P,A[I+14],17,-1502002290),P=p(P,R,F,x,A[I+15],22,1236535329),x=f(x,P,R,F,A[I+1],5,-165796510),F=f(F,x,P,R,A[I+6],9,-1069501632),R=f(R,F,x,P,A[I+11],14,643717713),P=f(P,R,F,x,A[I],20,-373897302),x=f(x,P,R,F,A[I+5],5,-701558691),F=f(F,x,P,R,A[I+10],9,38016083),R=f(R,F,x,P,A[I+15],14,-660478335),P=f(P,R,F,x,A[I+4],20,-405537848),x=f(x,P,R,F,A[I+9],5,568446438),F=f(F,x,P,R,A[I+14],9,-1019803690),R=f(R,F,x,P,A[I+3],14,-187363961),P=f(P,R,F,x,A[I+8],20,1163531501),x=f(x,P,R,F,A[I+13],5,-1444681467),F=f(F,x,P,R,A[I+2],9,-51403784),R=f(R,F,x,P,A[I+7],14,1735328473),P=f(P,R,F,x,A[I+12],20,-1926607734),x=m(x,P,R,F,A[I+5],4,-378558),F=m(F,x,P,R,A[I+8],11,-2022574463),R=m(R,F,x,P,A[I+11],16,1839030562),P=m(P,R,F,x,A[I+14],23,-35309556),x=m(x,P,R,F,A[I+1],4,-1530992060),F=m(F,x,P,R,A[I+4],11,1272893353),R=m(R,F,x,P,A[I+7],16,-155497632),P=m(P,R,F,x,A[I+10],23,-1094730640),x=m(x,P,R,F,A[I+13],4,681279174),F=m(F,x,P,R,A[I],11,-358537222),R=m(R,F,x,P,A[I+3],16,-722521979),P=m(P,R,F,x,A[I+6],23,76029189),x=m(x,P,R,F,A[I+9],4,-640364487),F=m(F,x,P,R,A[I+12],11,-421815835),R=m(R,F,x,P,A[I+15],16,530742520),P=m(P,R,F,x,A[I+2],23,-995338651),x=b(x,P,R,F,A[I],6,-198630844),F=b(F,x,P,R,A[I+7],10,1126891415),R=b(R,F,x,P,A[I+14],15,-1416354905),P=b(P,R,F,x,A[I+5],21,-57434055),x=b(x,P,R,F,A[I+12],6,1700485571),F=b(F,x,P,R,A[I+3],10,-1894986606),R=b(R,F,x,P,A[I+10],15,-1051523),P=b(P,R,F,x,A[I+1],21,-2054922799),x=b(x,P,R,F,A[I+8],6,1873313359),F=b(F,x,P,R,A[I+15],10,-30611744),R=b(R,F,x,P,A[I+6],15,-1560198380),P=b(P,R,F,x,A[I+13],21,1309151649),x=b(x,P,R,F,A[I+4],6,-145523070),F=b(F,x,P,R,A[I+11],10,-1120210379),R=b(R,F,x,P,A[I+2],15,718787259),P=b(P,R,F,x,A[I+9],21,-343485551),x=d(x,$),P=d(P,B),R=d(R,W),F=d(F,Y)}return[x,P,R,F]}function s(A){if(A.length===0)return[];const T=A.length*8,x=new Uint32Array(i(T));for(let P=0;P<T;P+=8)x[P>>5]|=(A[P/8]&255)<<P%32;return x}function d(A,T){const x=(A&65535)+(T&65535);return(A>>16)+(T>>16)+(x>>16)<<16|x&65535}function l(A,T){return A<<T|A>>>32-T}function c(A,T,x,P,R,F){return d(l(d(d(T,A),d(P,F)),R),x)}function p(A,T,x,P,R,F,I){return c(T&x|~T&P,A,T,R,F,I)}function f(A,T,x,P,R,F,I){return c(T&P|x&~P,A,T,R,F,I)}function m(A,T,x,P,R,F,I){return c(T^x^P,A,T,R,F,I)}function b(A,T,x,P,R,F,I){return c(x^(T|~P),A,T,R,F,I)}var _=t;return Mp.default=_,Mp}var $_;function Ox(){if($_)return Up;$_=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.default=void 0;var t=i(UE()),r=i(Cx());function i(d){return d&&d.__esModule?d:{default:d}}var s=(0,t.default)("v3",48,r.default);return Up.default=s,Up}var kp={},Bp={},q_;function Px(){if(q_)return Bp;q_=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.default=void 0;var r={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Bp.default=r,Bp}var z_;function Ix(){if(z_)return kp;z_=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.default=void 0;var t=a(Px()),r=a(FE()),i=Xy();function a(l){return l&&l.__esModule?l:{default:l}}function s(l,c,p){if(t.default.randomUUID&&!c&&!l)return t.default.randomUUID();l=l||{};const f=l.random||(l.rng||r.default)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,c){p=p||0;for(let m=0;m<16;++m)c[p+m]=f[m];return c}return(0,i.unsafeStringify)(f)}var d=s;return kp.default=d,kp}var Hp={},jp={},W_;function Nx(){if(W_)return jp;W_=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.default=void 0;function t(s,d,l,c){switch(s){case 0:return d&l^~d&c;case 1:return d^l^c;case 2:return d&l^d&c^l&c;case 3:return d^l^c}}function r(s,d){return s<<d|s>>>32-d}function i(s){const d=[1518500249,1859775393,2400959708,3395469782],l=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof s=="string"){const m=unescape(encodeURIComponent(s));s=[];for(let b=0;b<m.length;++b)s.push(m.charCodeAt(b))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);const c=s.length/4+2,p=Math.ceil(c/16),f=new Array(p);for(let m=0;m<p;++m){const b=new Uint32Array(16);for(let _=0;_<16;++_)b[_]=s[m*64+_*4]<<24|s[m*64+_*4+1]<<16|s[m*64+_*4+2]<<8|s[m*64+_*4+3];f[m]=b}f[p-1][14]=(s.length-1)*8/Math.pow(2,32),f[p-1][14]=Math.floor(f[p-1][14]),f[p-1][15]=(s.length-1)*8&4294967295;for(let m=0;m<p;++m){const b=new Uint32Array(80);for(let R=0;R<16;++R)b[R]=f[m][R];for(let R=16;R<80;++R)b[R]=r(b[R-3]^b[R-8]^b[R-14]^b[R-16],1);let _=l[0],A=l[1],T=l[2],x=l[3],P=l[4];for(let R=0;R<80;++R){const F=Math.floor(R/20),I=r(_,5)+t(F,A,T,x)+P+d[F]+b[R]>>>0;P=x,x=T,T=r(A,30)>>>0,A=_,_=I}l[0]=l[0]+_>>>0,l[1]=l[1]+A>>>0,l[2]=l[2]+T>>>0,l[3]=l[3]+x>>>0,l[4]=l[4]+P>>>0}return[l[0]>>24&255,l[0]>>16&255,l[0]>>8&255,l[0]&255,l[1]>>24&255,l[1]>>16&255,l[1]>>8&255,l[1]&255,l[2]>>24&255,l[2]>>16&255,l[2]>>8&255,l[2]&255,l[3]>>24&255,l[3]>>16&255,l[3]>>8&255,l[3]&255,l[4]>>24&255,l[4]>>16&255,l[4]>>8&255,l[4]&255]}var a=i;return jp.default=a,jp}var J_;function Fx(){if(J_)return Hp;J_=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.default=void 0;var t=i(UE()),r=i(Nx());function i(d){return d&&d.__esModule?d:{default:d}}var s=(0,t.default)("v5",80,r.default);return Hp.default=s,Hp}var Vp={},Y_;function Dx(){if(Y_)return Vp;Y_=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.default=void 0;var t="00000000-0000-0000-0000-000000000000";return Vp.default=t,Vp}var Kp={},Q_;function Ux(){if(Q_)return Kp;Q_=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.default=void 0;var t=r(Qy());function r(s){return s&&s.__esModule?s:{default:s}}function i(s){if(!(0,t.default)(s))throw TypeError("Invalid UUID");return parseInt(s.slice(14,15),16)}var a=i;return Kp.default=a,Kp}var X_;function Mv(){return X_||(X_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return l.default}});var r=m(Tx()),i=m(Ox()),a=m(Ix()),s=m(Fx()),d=m(Dx()),l=m(Ux()),c=m(Qy()),p=m(Xy()),f=m(DE());function m(b){return b&&b.__esModule?b:{default:b}}}(U0)),U0}var Z_;function Lx(){if(Z_)return rt;Z_=1;var t=WR(),r=Ea(),i=Iv(),a=Rv(),s=mx,d=NE(),l=Rx(),c=Mv();function p(u){const g=u;return typeof g=="object"&&typeof g.internal_resourceInfo=="object"}function f(u){const g=u;return typeof g=="object"&&typeof g.internal_resourceInfo=="object"&&typeof g.internal_resourceInfo.linkedResources=="object"}function m(u){const g=u;return typeof g.internal_changeLog=="object"&&Array.isArray(g.internal_changeLog.additions)&&Array.isArray(g.internal_changeLog.deletions)}class b extends Error{}function _(u){return typeof u=="string"?u:u.value}const A=i.fetch.bind(globalThis);function T(u){var g,w,O,L,z;const ee=(w=(g=u.headers.get("Content-Type"))===null||g===void 0?void 0:g.split(";"))!==null&&w!==void 0?w:[],de=ee.length>0&&["text/turtle","application/ld+json"].includes(ee[0]),ke={sourceIri:u.url,isRawData:!de,contentLocation:(O=u.headers.get("Content-Location"))!==null&&O!==void 0?O:void 0,contentType:(L=u.headers.get("Content-Type"))!==null&&L!==void 0?L:void 0,linkedResources:{},location:(z=u.headers.get("Location"))!==null&&z!==void 0?z:void 0},Ve=u.headers.get("Link");if(Ve){const Lt=a.parse(Ve),Kt=Lt.get("rel","acl");Kt.length===1&&(ke.aclUrl=new URL(Kt[0].uri,ke.sourceIri).href),ke.linkedResources=Lt.refs.reduce((rr,Pr)=>{var ln,Wr;return(ln=rr[Wr=Pr.rel])!==null&&ln!==void 0||(rr[Wr]=[]),rr[Pr.rel].push(new URL(Pr.uri,ke.sourceIri).href),rr},ke.linkedResources)}const Ye=u.headers.get("WAC-Allow");return Ye&&(ke.permissions=x(Ye)),ke}function x(u){function g(O){const L=O.split(" ");return L.includes("write")?{read:L.includes("read"),append:!0,write:!0,control:L.includes("control")}:{read:L.includes("read"),append:L.includes("append"),write:!1,control:L.includes("control")}}function w(O,L){const z=O.split(",").map(de=>de.split("=")).filter(de=>de.length===2&&de[0].trim()===L);if(z.length!==1)return"";const ee=z[0][1].trim();return ee.charAt(0)!=='"'||ee.charAt(ee.length-1)!=='"'?"":ee.substring(1,ee.length-1)}return{user:g(w(u,"user")),public:g(w(u,"public"))}}function P(u){let g;return typeof u.slice=="function"?g=Object.assign(u.slice(),{...u}):g={...u},g}function R(u){return!u.ok}function F(u){return u.status===401||u.status===403}const I={Authorization:"http://www.w3.org/ns/auth/acl#Authorization",accessTo:"http://www.w3.org/ns/auth/acl#accessTo",agent:"http://www.w3.org/ns/auth/acl#agent",agentGroup:"http://www.w3.org/ns/auth/acl#agentGroup",agentClass:"http://www.w3.org/ns/auth/acl#agentClass",default:"http://www.w3.org/ns/auth/acl#default",defaultForNew:"http://www.w3.org/ns/auth/acl#defaultForNew",mode:"http://www.w3.org/ns/auth/acl#mode",origin:"http://www.w3.org/ns/auth/acl#origin"},$={type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},B={seeAlso:"http://www.w3.org/2000/01/rdf-schema#seeAlso"},W={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},Y={Agent:"http://xmlns.com/foaf/0.1/Agent",primaryTopic:"http://xmlns.com/foaf/0.1/primaryTopic",isPrimaryTopicOf:"http://xmlns.com/foaf/0.1/isPrimaryTopicOf"},q={AccessControlResource:"http://www.w3.org/ns/solid/acp#AccessControlResource",Policy:"http://www.w3.org/ns/solid/acp#Policy",AccessControl:"http://www.w3.org/ns/solid/acp#AccessControl",Read:"http://www.w3.org/ns/solid/acp#Read",Append:"http://www.w3.org/ns/solid/acp#Append",Write:"http://www.w3.org/ns/solid/acp#Write",Rule:"http://www.w3.org/ns/solid/acp#Rule",Matcher:"http://www.w3.org/ns/solid/acp#Matcher",accessControl:"http://www.w3.org/ns/solid/acp#accessControl",apply:"http://www.w3.org/ns/solid/acp#apply",applyMembers:"http://www.w3.org/ns/solid/acp#applyMembers",allow:"http://www.w3.org/ns/solid/acp#allow",deny:"http://www.w3.org/ns/solid/acp#deny",allOf:"http://www.w3.org/ns/solid/acp#allOf",anyOf:"http://www.w3.org/ns/solid/acp#anyOf",noneOf:"http://www.w3.org/ns/solid/acp#noneOf",access:"http://www.w3.org/ns/solid/acp#access",accessMembers:"http://www.w3.org/ns/solid/acp#accessMembers",agent:"http://www.w3.org/ns/solid/acp#agent",group:"http://www.w3.org/ns/solid/acp#group",client:"http://www.w3.org/ns/solid/acp#client",PublicAgent:"http://www.w3.org/ns/solid/acp#PublicAgent",AuthenticatedAgent:"http://www.w3.org/ns/solid/acp#AuthenticatedAgent",CreatorAgent:"http://www.w3.org/ns/solid/acp#CreatorAgent"},Ie={PublicOidcClient:"http://www.w3.org/ns/solid/terms#PublicOidcClient"},K={publicKey:"https://w3id.org/security#publicKey"},ie={storage:"http://www.w3.org/ns/pim/space#storage"},ge={fetch:A};async function Se(u,g={...ge,ignoreAuthenticationErrors:!1}){var w;const L=await{...ge,...g}.fetch(u,{method:"HEAD"});return et(L,{ignoreAuthenticationErrors:(w=g.ignoreAuthenticationErrors)!==null&&w!==void 0?w:!1})}function et(u,g={ignoreAuthenticationErrors:!1}){if(R(u)&&(!F(u)||!g.ignoreAuthenticationErrors))throw new dt(`Fetching the metadata of the Resource at [${u.url}] failed: [${u.status}] [${u.statusText}].`,u);return{internal_resourceInfo:T(u)}}function st(u){return(p(u)?ve(u):_(u)).endsWith("/")}function Ne(u){return u.internal_resourceInfo.isRawData}function gt(u){var g;return(g=u.internal_resourceInfo.contentType)!==null&&g!==void 0?g:null}function ve(u){return p(u)?u.internal_resourceInfo.sourceIri:null}const tt=ve;function J(u){var g;if(!f(u))return null;const w=(g=Xe(u)["http://www.w3.org/ns/solid/terms#podOwner"])!==null&&g!==void 0?g:[];return w.length===1?w[0]:null}function xe(u,g){const w=J(g);return typeof w!="string"?null:w===u}function Xe(u){return u.internal_resourceInfo.linkedResources}function je(u){var g,w,O,L,z,ee,de;if(typeof u.internal_resourceInfo.permissions=="object")return{user:{read:u.internal_resourceInfo.permissions.user.read,append:u.internal_resourceInfo.permissions.user.append,write:u.internal_resourceInfo.permissions.user.write},public:{read:u.internal_resourceInfo.permissions.public.read,append:u.internal_resourceInfo.permissions.public.append,write:u.internal_resourceInfo.permissions.public.write}};const ke=Xe(u);return{user:{read:(w=(g=ke[q.allow])===null||g===void 0?void 0:g.includes(q.Read))!==null&&w!==void 0?w:!1,append:(z=((O=ke[q.allow])===null||O===void 0?void 0:O.includes(q.Append))||((L=ke[q.allow])===null||L===void 0?void 0:L.includes(q.Write)))!==null&&z!==void 0?z:!1,write:(de=(ee=ke[q.allow])===null||ee===void 0?void 0:ee.includes(q.Write))!==null&&de!==void 0?de:!1}}}class dt extends b{get statusCode(){return this.response.status}get statusText(){return this.response.statusText}constructor(g,w){super(g),this.response=w}}const It=()=>{const u=[],g=[],w=[];return{onQuad:O=>{u.push(O)},onError:O=>{w.push(O)},onComplete:O=>{g.push(O)},parse:async(O,L)=>new Promise(z=>{const ee=new t.JsonLdParser({baseIRI:ve(L),documentLoader:new r.FetchDocumentLoader(A)});let de=!1;function ke(){de||(de=!0,g.forEach(Ve=>Ve()),z())}ee.on("end",ke),ee.on("error",Ve=>{w.forEach(Ye=>Ye(Ve)),ke()}),u.forEach(Ve=>ee.on("data",Ve)),ee.write(O),ee.end()})}};l.dataset;const Mt="https://inrupt.com/.well-known/sdk-local-node/",{freeze:Me}=Object;function le(u){return u.substring(0,Mt.length)===Mt}function Te(u){return u.substring(Mt.length)}function Je(u){return`${Mt}${u}`}function se(u){return typeof u=="string"&&u.substring(0,2)==="_:"}function M(u){return u.substring(2)}function D(u){return`_:${u.value}`}const G={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function re(u){return u?"true":"false"}function we(u){return u==="true"||u==="1"?!0:u==="false"||u==="0"?!1:null}function Ce(u){let g,w;if(u.millisecond&&(u.millisecond<10?g=`00${u.millisecond}`:u.millisecond<100?g=`0${u.millisecond}`:g=u.millisecond),typeof u.timezoneHourOffset=="number"){const O=Math.abs(u.timezoneHourOffset)<10?`0${Math.abs(u.timezoneHourOffset)}`:Math.abs(u.timezoneHourOffset);w=u.timezoneHourOffset>=0?`+${O}`:`-${O}`,u.timezoneMinuteOffset?w=`${w}:${u.timezoneMinuteOffset<10?`0${u.timezoneMinuteOffset}`:u.timezoneMinuteOffset}`:w+=":00"}return`${u.hour<10?`0${u.hour}`:u.hour}:${u.minute<10?`0${u.minute}`:u.minute}:${u.second<10?`0${u.second}`:u.second}${u.millisecond?`.${g}`:""}${w||""}`}function at(u){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(u))return null;const[w,O]=We(u),[L,z,ee]=w.split(":");let de=Number.parseInt(L,10),ke=Number.parseInt(z,10);const[Ve,Ye]=ee.split("."),Lt=Number.parseInt(Ve,10),Kt=Ye?Number.parseInt(Ye,10):void 0;ke>=60&&(de+=1,ke-=60);const rr={hour:de,minute:ke,second:Lt};if(typeof Kt=="number"&&(rr.millisecond=Kt),typeof O=="string"){const[Pr,ln]=$e(O);if(typeof Pr!="number"||Pr>24||typeof ln!="number"||ln>59)return null;rr.timezoneHourOffset=Pr,rr.timezoneMinuteOffset=ln}return rr}function Re(u){return u.toISOString()}function ht(u){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(u))return null;const[w,O]=u.split("T"),[L,z]=w.charAt(0)==="-"?[-1,w.substring(1)]:[1,w],[ee,de,ke]=z.split("-"),Ve=Number.parseInt(ee,10)*L,Ye=Number.parseInt(de,10)-1,Lt=Number.parseInt(ke,10),[Kt,rr]=We(O),[Pr,ln]=typeof rr=="string"?$e(rr):[0,0],[Wr,Ha,Hn]=Kt.split(":"),Sr=Number.parseInt(Wr,10)+Pr,Ui=Number.parseInt(Ha,10)+ln,[mi,ia]=Hn.split("."),Li=Number.parseInt(mi,10),ws=ia?Number.parseInt(ia,10):0,ao=new Date(Date.UTC(Ve,Ye,Lt,Sr,Ui,Li,ws));return Ve>=0&&Ve<100&&ao.setUTCFullYear(ao.getUTCFullYear()-1900),ao}function Ct(u){const g=u.getFullYear(),w=u.getMonth()+1,O=u.getDate(),[,L]=We(u.toISOString());return`${g}-${String(w).padStart(2,"0")}-${String(O).padStart(2,"0")}${L}`}function vt(u){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(u))return null;const w=u,[O,L]=w.charAt(0)==="-"?[-1,w.substring(1)]:[1,w],[z,ee,de]=L.split("-"),ke=de.length>2?de.substring(0,2):de,Ve=Number.parseInt(z,10)*O,Ye=Number.parseInt(ee,10)-1,Lt=Number.parseInt(ke,10),Kt=12,rr=new Date(Date.UTC(Ve,Ye,Lt,Kt));return Ve>=0&&Ve<100&&rr.setUTCFullYear(rr.getUTCFullYear()-1900),rr}function We(u){if(u.endsWith("Z"))return[u.substring(0,u.length-1),"Z"];const g=u.split("+"),w=u.split("-");return g.length===1&&w.length===1?[g[0],void 0]:g.length>w.length?[g[0],`+${g[1]}`]:[w[0],`-${w[1]}`]}function $e(u){if(u==="Z")return[0,0];const g=u.charAt(0)==="+"?1:-1,[w,O]=u.substring(1).split(":"),L=Number.parseInt(w,10),z=Number.parseInt(O,10);return[L*g,z*g]}function Oe(u){return u.toString()}function lt(u){const g=Number.parseFloat(u);return Number.isNaN(g)?null:g}function Q(u){return u.toString()}function k(u){const g=Number.parseInt(u,10);return Number.isNaN(g)?null:g}function V(u){return u.toLowerCase()}function j(u){return Ze(u)&&u.termType==="NamedNode"}function qe(u){return Ze(u)&&u.termType==="Literal"}function Ze(u){return u!==null&&typeof u=="object"&&typeof u.termType=="string"&&typeof u.value=="string"&&typeof u.equals=="function"}function ze(u){return j(u)&&le(u.value)}function Jt(u){const g=_(u);if(typeof URL!="function")return!0;try{return new URL(g),!0}catch{return!1}}function kr(u,g){return ar.namedNode(Hr(Te(u.value),g))}function Hr(u,g){if(typeof URL!="function")throw new Error("The URL interface is not available, so an IRI cannot be determined.");const w=new URL(g);return w.hash=u,w.href}const ar=d;function Ke(u,g,w={}){var O;if(!["NamedNode","DefaultGraph"].includes(g.graph.termType))throw new Error(`Cannot parse Quads with nodes of type [${g.graph.termType}] as their Graph node.`);const z=g.graph.termType==="DefaultGraph"?"default":g.graph.value,ee=(O=u.graphs[z])!==null&&O!==void 0?O:{};return Me({...u,graphs:Me({...u.graphs,[z]:mt(ee,g,w)})})}function mt(u,g,w){var O;if(!["NamedNode","BlankNode"].includes(g.subject.termType))throw new Error(`Cannot parse Quads with nodes of type [${g.subject.termType}] as their Subject node.`);const z=g.subject.termType==="BlankNode"?`_:${g.subject.value}`:g.subject.value,ee=(O=u[z])!==null&&O!==void 0?O:{type:"Subject",url:z,predicates:{}};return Me({...u,[z]:ot(ee,g,w)})}function ot(u,g,w){return Me({...u,predicates:Le(u.predicates,g,w)})}function Le(u,g,w){var O;if(!["NamedNode"].includes(g.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${g.predicate.termType}] as their Predicate node.`);const z=g.predicate.value,ee=(O=u[z])!==null&&O!==void 0?O:{};return Me({...u,[z]:ct(ee,g,w)})}function ct(u,g,w){var O,L,z,ee,de,ke,Ve,Ye;if(g.object.termType==="NamedNode"){const Lt=Me([...(O=u.namedNodes)!==null&&O!==void 0?O:[],g.object.value]);return Me({...u,namedNodes:Lt})}if(g.object.termType==="Literal"){if(g.object.datatype.value===G.langString){const rr=g.object.language.toLowerCase(),Pr=Me([...(z=(L=u.langStrings)===null||L===void 0?void 0:L[rr])!==null&&z!==void 0?z:[],g.object.value]),ln=Me({...(ee=u.langStrings)!==null&&ee!==void 0?ee:{},[rr]:Pr});return Me({...u,langStrings:ln})}const Lt=Me([...(ke=(de=u.literals)===null||de===void 0?void 0:de[g.object.datatype.value])!==null&&ke!==void 0?ke:[],g.object.value]),Kt=Me({...(Ve=u.literals)!==null&&Ve!==void 0?Ve:{},[g.object.datatype.value]:Lt});return Me({...u,literals:Kt})}if(g.object.termType==="BlankNode"){const Lt=Qt(g.object,w),Kt=Me([...(Ye=u.blankNodes)!==null&&Ye!==void 0?Ye:[],Lt]);return Me({...u,blankNodes:Kt})}throw new Error(`Objects of type [${g.object.termType}] are not supported.`)}function Qt(u,g){var w,O;if(((w=g.chainBlankNodes)!==null&&w!==void 0?w:[]).find(Ve=>Ve.equals(u))===void 0)return D(u);const ee=((O=g.otherQuads)!==null&&O!==void 0?O:[]).filter(Ve=>Ve.subject.equals(u)),de=ee.filter(Ve=>!pe(Ve.object)).reduce((Ve,Ye)=>{var Lt;if(!["NamedNode"].includes(Ye.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${Ye.predicate.termType}] as their Predicate node.`);const rr=(Lt=Ve[Ye.predicate.value])!==null&&Lt!==void 0?Lt:{};return Me({...Ve,[Ye.predicate.value]:ct(rr,Ye,g)})},{});return ee.filter(Ve=>pe(Ve.object)).reduce((Ve,Ye)=>{var Lt,Kt;if(!["NamedNode"].includes(Ye.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${Ye.predicate.termType}] as their Predicate node.`);const Pr=(Lt=Ve[Ye.predicate.value])!==null&&Lt!==void 0?Lt:{},ln=(Kt=Pr.blankNodes)!==null&&Kt!==void 0?Kt:[];return Me({...Ve,[Ye.predicate.value]:{...Pr,blankNodes:[...ln,Qt(Ye.object,g)]}})},de)}function qt(u){const g=u.map(ee=>ee.subject).filter(pe),w=u.map(ee=>ee.object).filter(pe);function O(ee){return ee.every(de=>ee.every(ke=>de.equals(ke)))}const L=[];return w.forEach(ee=>{L.push(...ue(ee,u))}),g.concat(w).filter(ee=>{if(L.some(ke=>ke.equals(ee)))return!1;const de=u.filter(ke=>ke.object.equals(ee)).map(ke=>ke.subject);return de.length>0&&O(de)})}function er(u,g={}){var w;const O=[],L=(w=g.dataFactory)!==null&&w!==void 0?w:d;return Object.keys(u.graphs).forEach(z=>{const ee=u.graphs[z],de=z==="default"?L.defaultGraph():L.namedNode(z);Object.keys(ee).forEach(ke=>{const{predicates:Ve}=ee[ke],Ye=se(ke)?L.blankNode(M(ke)):L.namedNode(ke);O.push(...Ht(Ve,Ye,de,g))})}),O}function Ht(u,g,w,O={}){var L;const z=[],ee=(L=O.dataFactory)!==null&&L!==void 0?L:d;return Object.keys(u).forEach(de=>{var ke,Ve,Ye,Lt;const Kt=ee.namedNode(de),rr=(ke=u[de].langStrings)!==null&&ke!==void 0?ke:{},Pr=(Ve=u[de].namedNodes)!==null&&Ve!==void 0?Ve:[],ln=(Ye=u[de].literals)!==null&&Ye!==void 0?Ye:{},Wr=(Lt=u[de].blankNodes)!==null&&Lt!==void 0?Lt:[];Object.keys(ln).forEach(Sr=>{const Ui=ee.namedNode(Sr);ln[Sr].forEach(ia=>{const Li=ee.literal(ia,Ui);z.push(ee.quad(g,Kt,Li,w))})}),Object.keys(rr).forEach(Sr=>{rr[Sr].forEach(mi=>{const ia=ee.literal(mi,Sr);z.push(ee.quad(g,Kt,ia,w))})}),Pr.forEach(Sr=>{const Ui=ee.namedNode(Sr);z.push(ee.quad(g,Kt,Ui,w))}),Wr.forEach(Sr=>{if(se(Sr)){const Ui=ee.blankNode(M(Sr));z.push(ee.quad(g,Kt,Ui,w))}else{const Ui=ee.blankNode(),mi=ee.quad(g,Kt,Ui,w),ia=Ht(Sr,Ui,w);z.push(mi),z.push(...ia)}})}),z}function ue(u,g,w=[]){if(w.find(de=>de.equals(u))!==void 0)return w;const O=g.filter(de=>de.subject.equals(u)&&pe(de.object)).map(de=>de.object);if(O.length===0)return[];const L=[...w,u],z=O.map(de=>ue(de,g,L)),ee=[];for(const de of z)ee.push(...de);return ee}function pe(u){return u.termType==="BlankNode"}const Tt=()=>{const u=[],g=[],w=[];return{onQuad:O=>{u.push(O)},onError:O=>{w.push(O)},onComplete:O=>{g.push(O)},parse:async(O,L)=>{(await xt(ve(L))).parse(O,(ee,de)=>{ee?w.forEach(ke=>ke(ee)):de?u.forEach(ke=>ke(de)):g.forEach(ke=>ke())})}}};async function xt(u){return new s.Parser({format:"text/turtle",baseIRI:u})}async function Pt(u,g){const w="text/turtle",O=new s.Writer({format:w,prefixes:g?.prefixes}),L=u.map(de=>ar.quad(de.subject,de.predicate,de.object,void 0));return O.addQuads(L),await new Promise((de,ke)=>{O.end((Ve,Ye)=>{Ve?ke(Ve):de(Ye)})})}const Xt={acl:"http://www.w3.org/ns/auth/acl#",acp:"http://www.w3.org/ns/solid/acp#",cc:"http://creativecommons.org/ns#",cert:"http://www.w3.org/ns/auth/cert#",csvw:"http://www.w3.org/ns/csvw#",current:"#",dc:"http://purl.org/dc/terms/",dcam:"http://purl.org/dc/dcam/",dcat:"http://www.w3.org/ns/dcat#",dctype:"http://purl.org/dc/dcmitype/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",owl:"http://www.w3.org/2002/07/owl#",posixstat:"http://www.w3.org/ns/posix/stat#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",shacl:"http://www.w3.org/ns/shacl#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",solid:"http://www.w3.org/ns/solid/terms#",swapdoc:"http://www.w3.org/2000/10/swap/pim/doc#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",ws:"http://www.w3.org/ns/pim/space#",xsd:"http://www.w3.org/2001/XMLSchema#"},tr=l.dataset;function Nr(u){const g={graphs:{default:{}},type:"Dataset"},w=Array.from(u),O=qt(w);return w.filter(z=>O.every(ee=>!ee.equals(z.subject))).reduce((z,ee)=>Ke(z,ee,{otherQuads:w,chainBlankNodes:O}),g)}function Vt(u,g={}){var w,O;return((O=(w=g.datasetFactory)===null||w===void 0?void 0:w.dataset)!==null&&O!==void 0?O:tr)(er(u,g))}async function Zt(u,g){const{prefixes:w=Xt,thing:O}={...g},L=new s.Writer({format:"application/turtle",prefixes:w}),z=O?new s.NamedNode(O):void 0;for(const ee of Vt(u).match(z))L.addQuad(ee);return new Promise((ee,de)=>{L.end((ke,Ve)=>{ke?de(ke):ee(Ve)})})}var yr=Object.freeze({__proto__:null,getJsonLdParser:It,getTurtleParser:Tt,solidDatasetAsTurtle:Zt});const ir={fetch:A},Fr=["Slug","If-None-Match","Content-Type"];function Er(u){return Fr.some(g=>u[g]!==void 0)}async function Gr(u,g=ir){const w={...ir,...g},O=_(u),L=await w.fetch(O,w.init);if(R(L))throw new dt(`Fetching the File failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const z=T(L),ee=await L.blob();return Object.assign(ee,{internal_resourceInfo:z})}async function pr(u,g=ir){const w={...ir,...g},O=p(u)?_(tt(u)):_(u),L=await w.fetch(O,{...w.init,method:"DELETE"});if(R(L))throw new dt(`Deleting the file at [${O}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}async function or(u,g,w=ir){const O=_(u),L=await Dr(O,g,"POST",w);if(R(L))throw new dt(`Saving the file in [${u}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const z=L.headers.get("Location");if(z===null)throw new Error("Could not determine the location of the newly saved file.");const ee=new URL(z,new URL(O).origin).href,de=P(g),ke={internal_resourceInfo:{isRawData:!0,sourceIri:ee,contentType:Sn(g,w.contentType)}};return Object.assign(de,ke)}async function Gt(u,g,w=ir){const O=_(u),L=await Dr(O,g,"PUT",w);if(R(L))throw new dt(`Overwriting the file at [${O}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const z=P(g),ee=T(L);return ee.sourceIri=O,ee.isRawData=!0,Object.assign(z,{internal_resourceInfo:ee})}function Jr(u){return Array.isArray(u)}function xn(u){return typeof u.forEach=="function"}function un(u){if(typeof u>"u")return{};let g={};return Jr(u)?u.forEach(([w,O])=>{g[w]=O}):xn(u)?u.forEach((w,O)=>{g[O]=w}):g=u,g}async function Dr(u,g,w,O){var L,z;const ee={...ir,...O},de=un((z=(L=ee.init)===null||L===void 0?void 0:L.headers)!==null&&z!==void 0?z:{});if(Er(de))throw new Error(`No reserved header (${Fr.join(", ")}) should be set in the optional RequestInit.`);ee.slug!==void 0&&(de.Slug=ee.slug),de["Content-Type"]=Sn(g,O.contentType);const ke=_(u);return ee.fetch(ke,{...ee.init,headers:de,method:w,body:g})}function Sn(u,g){if(typeof g=="string")return g;const w=typeof u=="object"&&u!==null&&"type"in u&&typeof u.type=="string"&&u.type.length>0?u.type:void 0;return w??"application/octet-stream"}function Dn(u){var g,w,O,L,z,ee,de,ke;if(j(u))return`<${u.value}> (URL)`;if(qe(u)){if(!j(u.datatype))return`[${u.value}] (RDF/JS Literal of unknown type)`;let Ve;switch(u.datatype.value){case G.boolean:return Ve=(w=(g=we(u.value))===null||g===void 0?void 0:g.valueOf())!==null&&w!==void 0?w:`Invalid data: \`${u.value}\``,`${Ve} (boolean)`;case G.dateTime:return Ve=(L=(O=ht(u.value))===null||O===void 0?void 0:O.toUTCString())!==null&&L!==void 0?L:`Invalid data: \`${u.value}\``,`${Ve} (datetime)`;case G.decimal:return Ve=(ee=(z=lt(u.value))===null||z===void 0?void 0:z.toString())!==null&&ee!==void 0?ee:`Invalid data: \`${u.value}\``,`${Ve} (decimal)`;case G.integer:return Ve=(ke=(de=k(u.value))===null||de===void 0?void 0:de.toString())!==null&&ke!==void 0?ke:`Invalid data: \`${u.value}\``,`${Ve} (integer)`;case G.langString:return`"${u.value}" (${u.language} string)`;case G.string:return`"${u.value}" (string)`;default:return`[${u.value}] (RDF/JS Literal of type: \`${u.datatype.value}\`)`}}return u.termType==="BlankNode"?`[${u.value}] (RDF/JS BlankNode)`:u.termType==="Quad"?"??? (nested RDF* Quad)":u.termType==="Variable"?`?${u.value} (RDF/JS Variable)`:u}function lr(u){if(!Zr(u))throw new Xi(u)}function li(u,g){const w=m(u)?u.internal_changeLog:{additions:[],deletions:[]},[O,L]=g.filter(z=>!ui(z)).reduce(([z,ee],de)=>typeof ee.find(Ve=>Ve.equals(de))<"u"?[z,ee.filter(Ve=>!Ve.equals(de))]:[z.concat(de),ee],[w.additions,w.deletions]);return Me({...u,internal_changeLog:{additions:O,deletions:L}})}function An(u,g){const w=m(u)?u.internal_changeLog:{additions:[],deletions:[]},[O,L]=g.filter(z=>!ui(z)).reduce(([z,ee],de)=>typeof z.find(Ve=>Ve.equals(de))<"u"?[z.filter(Ve=>!Ve.equals(de)),ee]:[z,ee.concat(de)],[w.additions,w.deletions]);return Me({...u,internal_changeLog:{additions:O,deletions:L}})}function ji(u){return m(u)?u:Me({...u,internal_changeLog:{additions:[],deletions:[]}})}function ui(u){return u.subject.termType==="BlankNode"||u.object.termType==="BlankNode"}function Ra(u){return Object.keys(u.predicates).filter(g=>$r(u,g)!==null)}function Qi(u,g){var w,O,L;if(lr(u),!Jt(g))throw new Cn(g);const z=_(g),ee=(L=(O=(w=u.predicates[z])===null||w===void 0?void 0:w.namedNodes)===null||O===void 0?void 0:O[0])!==null&&L!==void 0?L:null;return ee===null?null:le(ee)?`#${Te(ee)}`:ee}const ci=Qi;function v(u,g){var w,O,L;if(lr(u),!Jt(g))throw new Cn(g);const z=_(g);return(L=(O=(w=u.predicates[z])===null||w===void 0?void 0:w.namedNodes)===null||O===void 0?void 0:O.map(ee=>le(ee)?`#${Te(ee)}`:ee))!==null&&L!==void 0?L:[]}const y=v;function S(u,g){lr(u);const w=hr(u,g,G.boolean);return w===null?null:we(w)}function C(u,g){return lr(u),en(u,g,G.boolean).map(we).filter(O=>O!==null)}function H(u,g){lr(u);const w=hr(u,g,G.dateTime);return w===null?null:ht(w)}function X(u,g){return lr(u),en(u,g,G.dateTime).map(ht).filter(O=>O!==null)}function oe(u,g){lr(u);const w=hr(u,g,G.date);return w===null?null:vt(w)}function be(u,g){return lr(u),en(u,g,G.date).map(vt).filter(O=>O!==null)}function he(u,g){lr(u);const w=hr(u,g,G.time);return w===null?null:at(w)}function me(u,g){return lr(u),en(u,g,G.time).map(at).filter(O=>O!==null)}function Ee(u,g){lr(u);const w=hr(u,g,G.decimal);return w===null?null:lt(w)}function Ae(u,g){return lr(u),en(u,g,G.decimal).map(O=>lt(O)).filter(O=>O!==null)}function De(u,g){lr(u);const w=hr(u,g,G.integer);return w===null?null:k(w)}function Ge(u,g){return lr(u),en(u,g,G.integer).map(O=>k(O)).filter(O=>O!==null)}function nt(u,g){return pt(u,g,"en")}function pt(u,g,w){var O,L;if(lr(u),!Jt(g))throw new Cn(g);const z=_(g),ee=(L=(O=u.predicates[z])===null||O===void 0?void 0:O.langStrings)!==null&&L!==void 0?L:{},ke=Object.keys(ee).find(Ve=>Ve.toLowerCase()===w.toLowerCase()&&Array.isArray(ee[Ve])&&ee[Ve].length>0);return typeof ke=="string"?ee[ke][0]:null}function _t(u,g){return ae(u,g,"en")}function ae(u,g,w){var O,L;if(lr(u),!Jt(g))throw new Cn(g);const z=_(g),ee=(L=(O=u.predicates[z])===null||O===void 0?void 0:O.langStrings)!==null&&L!==void 0?L:{},ke=Object.keys(ee).find(Ve=>Ve.toLowerCase()===w.toLowerCase()&&Array.isArray(ee[Ve])&&ee[Ve].length>0);return typeof ke=="string"?[...ee[ke]]:[]}function _e(u,g){var w,O;if(lr(u),!Jt(g))throw new Cn(g);const L=_(g),z=(O=(w=u.predicates[L])===null||w===void 0?void 0:w.langStrings)!==null&&O!==void 0?O:{};return new Map(Object.entries(z).map(([ee,de])=>[ee,[...de]]))}function Pe(u,g){return lr(u),hr(u,g,G.string)}function Fe(u,g){return lr(u),en(u,g,G.string)}function ut(u,g){const w=ci(u,g);return w===null?null:ar.namedNode(w)}function Et(u,g){return y(u,g).map(O=>ar.namedNode(O))}function cr(u,g){var w,O,L,z;if(lr(u),!Jt(g))throw new Cn(g);const ee=_(g),de=(O=(w=u.predicates[ee])===null||w===void 0?void 0:w.langStrings)!==null&&O!==void 0?O:{},ke=Object.keys(de);if(ke.length>0){const Lt=ke.find(Kt=>Array.isArray(de[Kt])&&de[Kt].length>0);if(typeof Lt=="string")return ar.literal(de[Lt][0],Lt)}const Ve=(z=(L=u.predicates[ee])===null||L===void 0?void 0:L.literals)!==null&&z!==void 0?z:{},Ye=Object.keys(Ve);if(Ye.length>0){const Lt=Ye.find(Kt=>Array.isArray(Ve[Kt])&&Ve[Kt].length>0);if(typeof Lt=="string")return ar.literal(Ve[Lt][0],ar.namedNode(Lt))}return null}function Bt(u,g){var w,O,L,z;if(lr(u),!Jt(g))throw new Cn(g);const ee=_(g);let de=[];const ke=(O=(w=u.predicates[ee])===null||w===void 0?void 0:w.langStrings)!==null&&O!==void 0?O:{},Ve=Object.keys(ke);for(const Kt of Ve){const Pr=ke[Kt].map(ln=>ar.literal(ln,Kt));de=de.concat(Pr)}const Ye=(z=(L=u.predicates[ee])===null||L===void 0?void 0:L.literals)!==null&&z!==void 0?z:{},Lt=Object.keys(Ye);for(const Kt of Lt){const rr=Ye[Kt],Pr=ar.namedNode(Kt),ln=rr.map(Wr=>ar.literal(Wr,Pr));de=de.concat(ln)}return de}function $r(u,g){var w,O;lr(u);const L=ut(u,g);if(L!==null)return L;const z=cr(u,g);if(z!==null)return z;const ee=_(g),de=(O=(w=u.predicates[ee])===null||w===void 0?void 0:w.blankNodes)!==null&&O!==void 0?O:[];if(de.length>0){const ke=se(de[0])?M(de[0]):void 0;return ar.blankNode(ke)}return null}function sr(u,g){var w,O;lr(u);const L=Et(u,g),z=Bt(u,g),ee=_(g),ke=((O=(w=u.predicates[ee])===null||w===void 0?void 0:w.blankNodes)!==null&&O!==void 0?O:[]).map(Ye=>{const Lt=se(Ye)?M(Ye):void 0;return ar.blankNode(Lt)});return L.concat(z).concat(ke)}function hr(u,g,w){var O,L,z,ee;if(!Jt(g))throw new Cn(g);const de=_(g);return(ee=(z=(L=(O=u.predicates[de])===null||O===void 0?void 0:O.literals)===null||L===void 0?void 0:L[w])===null||z===void 0?void 0:z[0])!==null&&ee!==void 0?ee:null}function en(u,g,w){var O,L,z;if(!Jt(g))throw new Cn(g);const ee=_(g);return[...(z=(L=(O=u.predicates[ee])===null||O===void 0?void 0:O.literals)===null||L===void 0?void 0:L[w])!==null&&z!==void 0?z:[]]}function fr(u,g,w={}){var O;if(!Jt(g))throw new $a(g);const L=typeof w.scope<"u"?_(w.scope):"default",z=(O=u.graphs[L])!==null&&O!==void 0?O:{},ee=_(g),de=le(ee)&&f(u)?Hr(Te(ee),ve(u)):ee,ke=z[de];return typeof ke>"u"?null:ke}function tn(u,g={acceptBlankNodes:!1}){var w;const O=typeof g.scope<"u"?_(g.scope):"default",L=(w=u.graphs[O])!==null&&w!==void 0?w:{};return Object.values(L).filter(z=>!se(z.url)||g.acceptBlankNodes)}function Xr(u,g){var w;const O=Ei(g)&&f(u)?Hr(Te(g.url),ve(u)):g.url,L=u.graphs.default,z=Me({...L,[O]:Me({...g,url:O})}),ee=Me({...u.graphs,default:z}),de=ar.namedNode(O),ke=(w=u.graphs.default[O])===null||w===void 0?void 0:w.predicates,Ve=typeof ke<"u"?Ht(ke,de,ar.defaultGraph()):[],Ye=Ht(g.predicates,de,ar.defaultGraph());return li(An(Me({...u,graphs:ee}),Ve),Ye)}function Tn(u,g){var w;let O;j(g)?O=g.value:typeof g=="string"?O=le(g)&&f(u)?Hr(Te(g),ve(u)):g:Ei(g)?O=g.url:O=Rr(g);const z={...u.graphs.default};delete z[O];const ee=Me({...u.graphs,default:Me(z)}),de=ar.namedNode(O),ke=(w=u.graphs.default[O])===null||w===void 0?void 0:w.predicates,Ve=typeof ke<"u"?Ht(ke,de,ar.defaultGraph()):[];return An(Me({...u,graphs:ee}),Ve)}function Yr(u={}){var g;if(typeof u.url<"u"){const{url:z}=u;if(!Jt(z))throw new $a(z);return Me({type:"Subject",predicates:Me({}),url:z})}const w=(g=u.name)!==null&&g!==void 0?g:lo(),O=Je(w);return Me({type:"Subject",predicates:Me({}),url:O})}function Zr(u){return typeof u=="object"&&u!==null&&typeof u.type=="string"&&u.type==="Subject"}function vn(u,g){if(Ei(u)){if(typeof g>"u")throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return Hr(Te(u.url),g)}return u.url}const Rr=vn;function jn(u){let g="";Ei(u)?g+=`## Thing (no URL yet — identifier: \`#${Te(u.url)}\`)
`:g+=`## Thing: ${u.url}
`;const w=Object.keys(u.predicates);if(w.length===0)g+=`
<empty>
`;else for(const O of w){g+=`
Property: ${O}
`;const L=sr(u,O);g+=L.reduce((z,ee)=>`${z}- ${Dn(ee)}
`,"")}return g}function Ei(u){return le(u.url)}class Xi extends b{constructor(g){const w=`Expected a Thing, but received: [${g}].`;super(w),this.receivedValue=g}}class Cn extends b{constructor(g){const w=j(g)?g.value:g,O=`Expected a valid URL to identify a property, but received: [${w}].`;super(O),this.receivedProperty=w}}class Vi extends b{constructor(g){const w=j(g)?g.value:g,O=`Expected a valid URL value, but received: [${w}].`;super(O),this.receivedValue=w}}class $a extends b{constructor(g){const w=j(g)?g.value:g,O=`Expected a valid URL to identify a Thing, but received: [${w}].`;super(O),this.receivedValue=w}}const lo=()=>c.v4();function En(u){const g=new URL(u);return g.hash="",g.href}function $n(){return Me({type:"Dataset",graphs:{default:{}}})}async function xa(u,g={}){if(R(u))throw new dt(`Fetching the SolidDataset at [${u.url}] failed: [${u.status}] [${u.statusText}] ${await u.text()}.`,u);const w=et(u),O={"text/turtle":Tt(),...g.parsers},L=gt(w);if(L===null)throw new Error(`Could not determine the content type of the Resource at [${ve(w)}].`);const z=L.split(";")[0],ee=O[z];if(typeof ee>"u")throw new Error(`The Resource at [${ve(w)}] has a MIME type of [${z}], but the only parsers available are for the following MIME types: [${Object.keys(O).join(", ")}].`);const de=await u.text();return new Promise((Ve,Ye)=>{let Lt=Me({graphs:Me({default:Me({})}),type:"Dataset"});const Kt=[],rr=[];ee.onError(Pr=>{Ye(new Error(`Encountered an error parsing the Resource at [${ve(w)}] with content type [${L}]: ${Pr}`))}),ee.onQuad(Pr=>{rr.push(Pr),Pr.subject.termType==="BlankNode"||Pr.object.termType==="BlankNode"?Kt.push(Pr):Lt=Ke(Lt,Pr)}),ee.onComplete(async()=>{const ln=Kt.length<=20?qt(Kt):[];Lt=Kt.filter(Hn=>ln.every(Sr=>!Sr.equals(Hn.subject))).reduce((Hn,Sr)=>Ke(Hn,Sr,{otherQuads:rr,chainBlankNodes:ln}),Lt);const Ha=Me({...Lt,...w});Ve(Ha)}),ee.parse(de,w)})}async function qn(u,g=ge){var w;u=_(u);const O={...ge,...g},L=Object.keys((w=g.parsers)!==null&&w!==void 0?w:{}),z=L.length>0?L.join(", "):"text/turtle",ee=await O.fetch(u,{headers:{Accept:z}});if(R(ee))throw new dt(`Fetching the Resource at [${u}] failed: [${ee.status}] [${ee.statusText}] ${await ee.text()}.`,ee);return await xa(ee,g)}async function Yo(u){const g=u.internal_changeLog.deletions.length>0?`DELETE DATA {${(await Pt(u.internal_changeLog.deletions.map(nr))).trim()}};`:"",w=u.internal_changeLog.additions.length>0?`INSERT DATA {${(await Pt(u.internal_changeLog.additions.map(nr))).trim()}};`:"";return{method:"PATCH",body:`${g} ${w}`,headers:{"Content-Type":"application/sparql-update"}}}async function ua(u,g){return{method:"PUT",body:await Pt(er(u).map(nr),g),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${W.Resource}>; rel="type"`}}}async function U(u,g,w=ge){u=_(u);const O={...ge,...w},L=ji(g),z=Ue(L,u)?await Yo(L):await ua(L,w),ee=await O.fetch(u,z);if(R(ee)){const Ye=Ue(L,u)?`The changes that were sent to the Pod are listed below.

${zt(L)}`:`The SolidDataset that was sent to the Pod is listed below.

${jt(L)}`;throw new dt(`Storing the Resource at [${u}] failed: [${ee.status}] [${ee.statusText}] ${await ee.text()}.

${Ye}`,ee)}const de={...T(ee),isRawData:!1},ke=Me({...g,internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:de});return vr(ke)}async function te(u,g=ge){const w={...ge,...g},O=p(u)?_(ve(u)):_(u),L=await w.fetch(O,{method:"DELETE"});if(R(L))throw new dt(`Deleting the SolidDataset at [${O}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}async function ne(u,g=ge){var w;u=_(u),u=u.endsWith("/")?u:`${u}/`;const O={...ge,...g},L=await O.fetch(u,{method:"PUT",body:O.initialContent?await Pt(er(O.initialContent).map(nr)):void 0,headers:{Accept:"text/turtle","Content-Type":"text/turtle","If-None-Match":"*",Link:`<${W.BasicContainer}>; rel="type"`}});if(R(L)){const de=O.initialContent===void 0?"empty":"non-empty";throw new dt(`Creating the ${de} Container at [${u}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}const z=T(L);return Me({...(w=g.initialContent)!==null&&w!==void 0?w:$n(),internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:z})}function fe(u,g){return En(u.internal_resourceInfo.sourceIri)===En(g)}function Ue(u,g){return m(u)&&p(u)&&typeof u.internal_resourceInfo.sourceIri=="string"&&fe(u,g)}async function ye(u,g,w=ge){const O={...ge,...w};u=_(u);const L=await Pt(er(g).map(nr)),z={"Content-Type":"text/turtle",Link:`<${W.Resource}>; rel="type"`};w.slugSuggestion&&(z.slug=w.slugSuggestion);const ee=await O.fetch(u,{method:"POST",body:L,headers:z});if(R(ee))throw new dt(`Storing the Resource in the Container at [${u}] failed: [${ee.status}] [${ee.statusText}] ${await ee.text()}.

The SolidDataset that was sent to the Pod is listed below.

${jt(g)}`,ee);const de=T(ee);if(!de.location)throw new Error("Could not determine the location of the newly saved SolidDataset.");let ke;try{ke=new URL(de.location).href}catch{ke=new URL(de.location,ee.url).href}const Ye=Me({...g,...{internal_resourceInfo:{isRawData:!1,sourceIri:ke}}});return vr(Ye)}async function He(u,g=ge){u=_(u);const w={...ge,...g},O={"Content-Type":"text/turtle",Link:`<${W.BasicContainer}>; rel="type"`};g.slugSuggestion&&(O.slug=g.slugSuggestion);const L=await w.fetch(u,{method:"POST",headers:O});if(R(L))throw new dt(`Creating an empty Container in the Container at [${u}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const z=T(L);if(!z.location)throw new Error("Could not determine the location of the newly created Container.");try{const ee=new URL(z.location).toString();return Me({...$n(),internal_resourceInfo:{...z,sourceIri:ee}})}catch{}return Me({...$n(),internal_resourceInfo:{...z,sourceIri:new URL(z.location,L.url).href}})}async function Rt(u,g=ge){const w=p(u)?_(ve(u)):_(u);if(!st(u))throw new Error(`You're trying to delete the Container at [${w}], but Container URLs should end in a \`/\`. Are you sure this is a Container?`);const L=await{...ge,...g}.fetch(w,{method:"DELETE"});if(R(L))throw new dt(`Deleting the Container at [${w}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}function bt(u,g){const w=new URL(g),O=new URL(u),L=O.href.startsWith(w.href),z=O.pathname.substring(w.pathname.length,O.pathname.length).replace(/(^\/)|(\/$)/g,"");return L&&z.length>=1&&!z.includes("/")}function Ot(u){const g=ve(u),w=fr(u,g);return w===null?[]:y(w,W.contains).filter(O=>bt(O,g))}function $t(u){const g=ve(u),w=fr(u,g);if(w===null)return{isValid:!0,invalidContainedResources:[]};const O=y(w,W.contains).filter(L=>!bt(L,g));return O.length>0?{isValid:!1,invalidContainedResources:O}:{isValid:!0,invalidContainedResources:[]}}function jt(u){let g="";p(u)?g+=`# SolidDataset: ${ve(u)}
`:g+=`# SolidDataset (no URL yet)
`;const w=tn(u);return w.length===0?g+=`
<empty>
`:w.forEach(O=>{g+=`
${jn(O)}`,m(u)&&(g+=`
${Wt(u,O)}
`)}),g}function zt(u){if(!p(u))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!m(u)||u.internal_changeLog.additions.length===0&&u.internal_changeLog.deletions.length===0)return`## Changes compared to ${ve(u)}

This SolidDataset has not been modified since it was fetched from ${ve(u)}.
`;let g=`## Changes compared to ${ve(u)}
`;const w=Dt(u);return Object.keys(w).forEach(O=>{g+=`
### Thing: ${O}
`;const L=w[O];Object.keys(L).forEach(z=>{g+=`
Property: ${z}
`;const{deleted:ee}=L[z],{added:de}=L[z];ee.length>0&&(g+=`- Removed:
`,g+=ee.reduce((ke,Ve)=>`${ke}  - ${Dn(Ve)}
`,"")),de.length>0&&(g+=`- Added:
`,g+=de.reduce((ke,Ve)=>`${ke}  - ${Dn(Ve)}
`,""))})}),g}function Dt(u){const g=Object.create(null);return u.internal_changeLog.deletions.forEach(w=>{var O,L,z;const ee=ze(w.subject)?kr(w.subject,ve(u)):w.subject;if(!j(ee)||!j(w.predicate))return;const de=_(ee),ke=_(w.predicate);(O=g[de])!==null&&O!==void 0||(g[de]=Object.create(null)),(L=(z=g[de])[ke])!==null&&L!==void 0||(z[ke]={added:[],deleted:[]}),g[de][ke].deleted.push(w.object)}),u.internal_changeLog.additions.forEach(w=>{var O,L,z;const ee=ze(w.subject)?kr(w.subject,ve(u)):w.subject;if(!j(ee)||!j(w.predicate))return;const de=_(ee),ke=_(w.predicate);(O=g[de])!==null&&O!==void 0||(g[de]=Object.create(null)),(L=(z=g[de])[ke])!==null&&L!==void 0||(z[ke]={added:[],deleted:[]}),g[de][ke].added.push(w.object)}),g}function Wt(u,g){const w=ar.namedNode(g.url),O=u.internal_changeLog.additions.reduce((de,ke)=>ke.subject.equals(w)?de+1:de,0),L=u.internal_changeLog.deletions.reduce((de,ke)=>ke.subject.equals(w)?de+1:de,0),z=O===1?"1 new value added":`${O} new values added`,ee=L===1?"1 value removed":`${L} values removed`;return`(${z} / ${ee})`}function nr(u){const g=j(u.subject)?ur(u.subject):u.subject,w=j(u.object)?ur(u.object):u.object;return ar.quad(g,u.predicate,w,u.graph)}function ur(u){return le(u.value)?ar.namedNode(`#${Te(u.value)}`):u}function vr(u){const g=ve(u),w=u.graphs.default,L=Object.keys(w).reduce((ee,de)=>{const ke=Kr(ee[de],g),Ve=le(de)?`${g}#${Te(de)}`:de,Ye={...ee};return delete Ye[de],Ye[Ve]=ke,Me(Ye)},w),z=Me({...u.graphs,default:L});return Me({...u,graphs:z})}function Kr(u,g){const O=Object.keys(u.predicates).reduce((L,z)=>{var ee;const de=(ee=L[z].namedNodes)!==null&&ee!==void 0?ee:[];if(de.every(Ye=>!le(Ye)))return L;const ke=Me(de.map(Ye=>le(Ye)?`${g}#${Te(Ye)}`:Ye)),Ve=Me({...L[z],namedNodes:ke});return Me({...L,[z]:Ve})},u.predicates);return Me({...u,predicates:O,url:le(u.url)?`${g}#${Te(u.url)}`:u.url})}async function br(u,g=ge){const w=_(u);try{const de=new URL("/.well-known/solid",new URL(w).origin).href;return await qn(de,{fetch:A})}catch{}const O=await Se(w,{fetch:g.fetch,ignoreAuthenticationErrors:!0}),z=Xe(O)[ie.storage],ee=z?.length===1?z[0]:null;if(ee!==null){const de=new URL(".well-known/solid",ee.endsWith("/")?ee:`${ee}/`).href;return qn(de,{...g,parsers:{"application/ld+json":It()}})}throw new Error("Could not determine storage root or well-known solid resource.")}function Yt(u){return{...$n(),internal_resourceInfo:{sourceIri:_(u),isRawData:!1,contentType:"text/turtle",linkedResources:{}}}}function Mr(u){const g=_(u);if(!g.endsWith("/"))throw new Error("A Container's URL should end in a slash. Please update your tests.");return Yt(g)}function dr(u,g){const w=new Blob;return Object.assign(w,{internal_resourceInfo:{sourceIri:_(u),isRawData:!0,contentType:g?.contentType,linkedResources:{}}})}function Lr(u,g=404,w="Not Found"){const O=new i.Response(void 0,{status:g,statusText:w});return new dt(`Fetching the Resource at [${u}] failed: [${O.status}] [${O.statusText}].`,O)}const zr=(u,g,w)=>{var O,L;if(lr(u),!Jt(g))throw new Cn(g);if(!Zr(w)&&!Jt(w))throw new Vi(w);const z=_(g),ee=(O=u.predicates[z])!==null&&O!==void 0?O:{},de=(L=ee.namedNodes)!==null&&L!==void 0?L:[];let ke;j(w)?ke=w.value:typeof w=="string"?ke=w:Ei(w)?ke=w.url:ke=Rr(w);const Ve=Me(de.concat(_(ke))),Ye=Me({...ee,namedNodes:Ve}),Lt=Me({...u.predicates,[z]:Ye});return Me({...u,predicates:Lt})},Ft=zr,Or=(u,g,w)=>(lr(u),Un(u,g,re(w),G.boolean)),yn=(u,g,w)=>(lr(u),Un(u,g,Re(w),G.dateTime)),Ur=(u,g,w)=>(lr(u),Un(u,g,Ct(w),G.date)),dn=(u,g,w)=>(lr(u),Un(u,g,Ce(w),G.time)),sn=(u,g,w)=>(lr(u),Un(u,g,Oe(w),G.decimal)),On=(u,g,w)=>(lr(u),Un(u,g,Q(w),G.integer));function wr(u,g,w){return jr(u,g,w,"en")}function jr(u,g,w,O){var L,z,ee;if(lr(u),!Jt(g))throw new Cn(g);const de=_(g),ke=V(O),Ve=(L=u.predicates[de])!==null&&L!==void 0?L:{},Ye=(z=Ve.langStrings)!==null&&z!==void 0?z:{},Lt=(ee=Ye[ke])!==null&&ee!==void 0?ee:[],Kt=Me(Lt.concat(w)),rr=Me({...Ye,[ke]:Kt}),Pr=Me({...Ve,langStrings:rr}),ln=Me({...u.predicates,[de]:Pr});return Me({...u,predicates:ln})}const zn=(u,g,w)=>(lr(u),Un(u,g,w,G.string));function di(u,g,w){return zr(u,g,w.value)}function xr(u,g,w){if(lr(u),!Jt(g))throw new Cn(g);return w.datatype.value===G.langString?jr(u,g,w.value,w.language):Un(u,g,w.value,w.datatype.value)}function kn(u,g,w){var O,L;if(w.termType==="NamedNode")return di(u,g,w);if(w.termType==="Literal")return xr(u,g,w);if(w.termType==="BlankNode"){if(lr(u),!Jt(g))throw new Cn(g);const z=_(g),ee=(O=u.predicates[z])!==null&&O!==void 0?O:{},de=(L=ee.blankNodes)!==null&&L!==void 0?L:[],ke=Me(de.concat(D(w))),Ve=Me({...ee,blankNodes:ke}),Ye=Me({...u.predicates,[z]:Ve});return Me({...u,predicates:Ye})}throw new Error(`Term type [${w.termType}] is not supported by @inrupt/solid-client.`)}function Un(u,g,w,O){var L,z,ee;if(lr(u),!Jt(g))throw new Cn(g);const de=_(g),ke=(L=u.predicates[de])!==null&&L!==void 0?L:{},Ve=(z=ke.literals)!==null&&z!==void 0?z:{},Ye=(ee=Ve[O])!==null&&ee!==void 0?ee:[],Lt=Me(Ye.concat(w)),Kt=Me({...Ve,[O]:Lt}),rr=Me({...ke,literals:Kt}),Pr=Me({...u.predicates,[de]:rr});return Me({...u,predicates:Pr})}function Qr(u,g){if(lr(u),!Jt(g))throw new Cn(g);const w=_(g),O={...u.predicates};return delete O[w],Me({...u,predicates:Me(O)})}const Vn=(u,g,w)=>{var O,L,z;if(lr(u),!Jt(g))throw new Cn(g);const ee=_(g);if(!Zr(w)&&!Jt(w))throw new Vi(w);const de=Zr(w)?Rr(w):_(w),ke=Me((z=(L=(O=u.predicates[ee])===null||O===void 0?void 0:O.namedNodes)===null||L===void 0?void 0:L.filter(Lt=>Lt.toLowerCase()!==de.toLowerCase()))!==null&&z!==void 0?z:[]),Ve=Me({...u.predicates[ee],namedNodes:ke}),Ye=Me({...u.predicates,[ee]:Ve});return Me({...u,predicates:Ye})},rn=Vn,Ta=(u,g,w)=>(lr(u),za(u,g,G.boolean,O=>we(O)===w)),Mu=(u,g,w)=>(lr(u),za(u,g,G.dateTime,O=>{var L;return((L=ht(O))===null||L===void 0?void 0:L.getTime())===w.getTime()})),Ps=(u,g,w)=>(lr(u),za(u,g,G.date,function(O){const L=vt(O);return L?L.getFullYear()===w.getFullYear()&&L.getMonth()===w.getMonth()&&L.getUTCDate()===w.getUTCDate():!1})),ku=(u,g,w)=>(lr(u),za(u,g,G.time,function(O){const L=at(O);return L?L.hour===w.hour&&L.minute===w.minute&&L.second===w.second&&L.millisecond===w.millisecond&&L.timezoneHourOffset===w.timezoneHourOffset&&L.timezoneMinuteOffset===w.timezoneMinuteOffset:!1})),qa=(u,g,w)=>(lr(u),za(u,g,G.decimal,O=>lt(O)===w)),Qo=(u,g,w)=>(lr(u),za(u,g,G.integer,O=>k(O)===w));function ff(u,g,w){return ca(u,g,w,"en")}function ca(u,g,w,O){var L,z;if(lr(u),!Jt(g))throw new Cn(g);const ee=_(g),de=(z=(L=u.predicates[ee])===null||L===void 0?void 0:L.langStrings)!==null&&z!==void 0?z:{},ke=Object.keys(de).find(Pr=>V(Pr)===V(O)&&Array.isArray(de[Pr])&&de[Pr].length>0);if(typeof ke!="string")return u;const Ve=de[ke],Ye=Me(Ve.filter(Pr=>Pr!==w)),Lt=Me({...de,[ke]:Ye}),Kt=Me({...u.predicates[ee],langStrings:Lt}),rr=Me({...u.predicates,[ee]:Kt});return Me({...u,predicates:rr})}const Io=(u,g,w)=>(lr(u),za(u,g,G.string,O=>O===w));function Il(u,g,w){return Vn(u,g,w.value)}function Is(u,g,w){var O,L,z;if(lr(u),!Jt(g))throw new Cn(g);const ee=w.datatype.value;if(ee===G.langString)return ca(u,g,w.value,w.language);const de=_(g),ke=(O=u.predicates[de])!==null&&O!==void 0?O:{},Ve=(L=ke.literals)!==null&&L!==void 0?L:{},Ye=(z=Ve[ee])!==null&&z!==void 0?z:[],Lt=Me(Ye.filter(Wr=>Wr!==w.value)),Kt=Me({...Ve,[ee]:Lt}),rr=Me({...ke,literals:Kt}),Pr=Me({...u.predicates,[de]:rr});return Me({...u,predicates:Pr})}function za(u,g,w,O){var L,z,ee;if(!Jt(g))throw new Cn(g);const de=_(g),ke=(L=u.predicates[de])!==null&&L!==void 0?L:{},Ve=(z=ke.literals)!==null&&z!==void 0?z:{},Ye=(ee=Ve[w])!==null&&ee!==void 0?ee:[],Lt=Me(Ye.filter(Wr=>!O(Wr))),Kt=Me({...Ve,[w]:Lt}),rr=Me({...ke,literals:Kt}),Pr=Me({...u.predicates,[de]:rr});return Me({...u,predicates:Pr})}const Ca=(u,g,w)=>{if(lr(u),!Jt(g))throw new Cn(g);if(!Zr(w)&&!Jt(w))throw new Vi(w);return zr(Qr(u,g),g,w)},hn=Ca,Ns=(u,g,w)=>(lr(u),Or(Qr(u,g),g,w)),df=(u,g,w)=>(lr(u),yn(Qr(u,g),g,w)),Fs=(u,g,w)=>(lr(u),Ur(Qr(u,g),g,w)),ti=(u,g,w)=>(lr(u),dn(Qr(u,g),g,w)),Bu=(u,g,w)=>(lr(u),sn(Qr(u,g),g,w)),hf=(u,g,w)=>(lr(u),On(Qr(u,g),g,w));function xi(u,g,w,O){return lr(u),jr(Qr(u,g),g,w,O)}const Wa=(u,g,w)=>(lr(u),zn(Qr(u,g),g,w));function Ds(u,g,w){return lr(u),di(Qr(u,g),g,w)}function Nl(u,g,w){return lr(u),xr(Qr(u,g),g,w)}function Pd(u,g,w){if(lr(u),!Jt(g))throw new Cn(g);return kn(Qr(u,g),g,w)}function Oa(u=Yr()){let g=Zr(u)?u:Yr(u);function w(ee){return(de,ke)=>(g=ee(g,de,ke),z)}function O(ee){return(de,ke)=>(g=ee(g,de,ke),z)}function L(ee){return(de,ke)=>(g=ee(g,de,ke),z)}const z={build:()=>g,addUrl:w(zr),addIri:w(Ft),addBoolean:w(Or),addDatetime:w(yn),addDate:w(Ur),addTime:w(dn),addDecimal:w(sn),addInteger:w(On),addStringNoLocale:w(zn),addStringEnglish:(ee,de)=>(g=jr(g,ee,de,"en"),z),addStringWithLocale:(ee,de,ke)=>(g=jr(g,ee,de,ke),z),addNamedNode:w(di),addLiteral:w(xr),addTerm:w(kn),setUrl:O(Ca),setIri:O(hn),setBoolean:O(Ns),setDatetime:O(df),setDate:O(Fs),setTime:O(ti),setDecimal:O(Bu),setInteger:O(hf),setStringNoLocale:O(Wa),setStringEnglish:(ee,de)=>(g=xi(g,ee,de,"en"),z),setStringWithLocale:(ee,de,ke)=>(g=xi(g,ee,de,ke),z),setNamedNode:O(Ds),setLiteral:O(Nl),setTerm:O(Pd),removeAll:ee=>(g=Qr(g,ee),z),removeUrl:L(Vn),removeIri:L(rn),removeBoolean:L(Ta),removeDatetime:L(Mu),removeDate:L(Ps),removeTime:L(ku),removeDecimal:L(qa),removeInteger:L(Qo),removeStringNoLocale:L(Io),removeStringEnglish:(ee,de)=>Oa(ca(g,ee,de,"en")),removeStringWithLocale:(ee,de,ke)=>Oa(ca(g,ee,de,ke)),removeNamedNode:L(Il),removeLiteral:L(Is)};return z}function Id(u){const g=_(u);return{type:"Subject",predicates:{},url:g}}function vg(u){const g=Xe(u).type;return Array.isArray(g)&&g.includes(q.AccessControlResource)}async function Ki(u,g=ge){if(!Xn(u))return{resourceAcl:null,fallbackAcl:null};try{const w=await pf(u,g);return w===null?{resourceAcl:null,fallbackAcl:await Fl(u,g)}:{resourceAcl:w,fallbackAcl:null}}catch(w){if(w instanceof Dl)return{resourceAcl:null,fallbackAcl:null};throw w}}async function pf(u,g=ge){if(!Xn(u))return null;try{const w=await qn(u.internal_resourceInfo.aclUrl,g);if(vg(w))throw new Dl(u,w);return Me({...w,internal_accessTo:ve(u)})}catch(w){if(w instanceof Dl)throw w;return null}}async function Fl(u,g=ge){const w=new URL(ve(u)),O=w.pathname;if(O==="/")return null;const L=gf(O),z=new URL(L,w.origin).href,ee=await Se(z,g);if(!Xn(ee))return null;const de=await pf(ee,g);return de===null?Fl(ee,g):de}function gf(u){const g=u.substring(u.length-1)==="/"?u.substring(0,u.length-1):u;return`${u.substring(0,g.lastIndexOf("/"))}/`}function fa(u){return tn(u).filter(Us)}function Us(u){return y(u,$.type).includes(I.Authorization)}function uo(u,g){return u.filter(w=>Nd(w,g))}function Nd(u,g){return y(u,I.accessTo).includes(g)}function Ls(u,g){return u.filter(w=>Ms(w,g))}function Ms(u,g){return y(u,I.default).includes(g)||y(u,I.defaultForNew).includes(g)}function Xo(u){const g=y(u,I.mode);return g.includes(Pn.write)?{read:g.includes(Pn.read),append:!0,write:!0,control:g.includes(Pn.control)}:{read:g.includes(Pn.read),append:g.includes(Pn.append),write:!1,control:g.includes(Pn.control)}}function Zo(u){return u.reduce((g,w)=>g.write||w.write?{read:g.read||w.read,append:!0,write:!0,control:g.control||w.control}:{read:g.read||w.read,append:g.append||w.append,write:!1,control:g.control||w.control},{read:!1,append:!1,write:!1,control:!1})}function bg(u){return fa(u).filter(cm).reduce(Tn,u)}function cm(u){return Ht(u.predicates,ar.namedNode(u.url),ar.defaultGraph()).some(g=>!fm(g))?!1:ci(u,I.accessTo)===null&&ci(u,I.default)===null&&ci(u,I.defaultForNew)===null||ci(u,I.mode)===null||ci(u,I.agent)===null&&ci(u,I.agentGroup)===null&&ci(u,I.agentClass)===null}function fm(u){const{predicate:g}=u,{object:w}=u;return!!(g.equals(ar.namedNode($.type))&&w.equals(ar.namedNode(I.Authorization))||g.equals(ar.namedNode(I.accessTo))||g.equals(ar.namedNode(I.default))||g.equals(ar.namedNode(I.defaultForNew))||g.equals(ar.namedNode(I.mode))&&Object.values(Pn).some(O=>w.equals(ar.namedNode(O)))||g.equals(ar.namedNode(I.agent))||g.equals(ar.namedNode(I.agentGroup))||g.equals(ar.namedNode(I.agentClass))||g.equals(ar.namedNode(I.origin)))}const Pn={read:"http://www.w3.org/ns/auth/acl#Read",append:"http://www.w3.org/ns/auth/acl#Append",write:"http://www.w3.org/ns/auth/acl#Write",control:"http://www.w3.org/ns/auth/acl#Control"};function Fd(u,g,w){return u.filter(O=>y(O,w).includes(g))}function Dd(u,g){const w={};return u.forEach(O=>{const L=y(O,g),z=Xo(O);L.forEach(ee=>{w[ee]=typeof w[ee]>"u"?z:Zo([w[ee],z])})}),w}function yf(u){let g=Yr();return g=hn(g,$.type,I.Authorization),u.read&&(g=Ft(g,I.mode,Pn.read)),u.append&&!u.write&&(g=Ft(g,I.mode,Pn.append)),u.write&&(g=Ft(g,I.mode,Pn.write)),u.control&&(g=Ft(g,I.mode,Pn.control)),g}function Ja(u){let g=Yr();g=hn(g,$.type,I.Authorization);function w(O,L,z){return y(O,z).reduce((ee,de)=>Ft(ee,z,de),L)}return g=w(u,g,I.accessTo),g=w(u,g,I.default),g=w(u,g,I.defaultForNew),g=w(u,g,I.agent),g=w(u,g,I.agentGroup),g=w(u,g,I.agentClass),g=w(u,g,I.origin),g=w(u,g,I.mode),g}function Zi(u,g){return Object.assign(P(u),{internal_acl:g})}const Pa=[I.agent,I.agentClass,I.agentGroup,I.origin];function Ia(u,g,w,O,L){if(!y(u,w).includes(g)){const de=yf({read:!1,append:!1,write:!1,control:!1});return[u,de]}const z=rn(u,w,g);let ee=Ja(u);return ee=rn(ee,L==="resource"?I.accessTo:I.default,O),L==="default"&&(ee=rn(ee,I.defaultForNew,O)),ee=hn(ee,w,g),Pa.filter(de=>de!==w).forEach(de=>{ee=Qr(ee,de)}),[z,ee]}function Ya(u,g,w,O,L){let z=u;tn(u).forEach(ke=>{const[Ve,Ye]=Ia(ke,L,w,u.internal_accessTo,O);z=Xr(z,Ve),z=Xr(z,Ye)});let ee=yf(g);ee=hn(ee,O==="resource"?I.accessTo:I.default,u.internal_accessTo),ee=hn(ee,w,L);const de=Xr(z,ee);return bg(de)}function mf(u,g){return Zi(u,{resourceAcl:g,fallbackAcl:null})}function vf(u){return u.internal_acl.resourceAcl}class Dl extends Error{constructor(g,w){super(`[${tt(g)}] is governed by Access Control Policies in [${tt(w)}] rather than by Web Access Control.`)}}function Ud(u){return typeof u.internal_acl=="object"}function da(u){return u.internal_acl.resourceAcl!==null&&ve(u)===u.internal_acl.resourceAcl.internal_accessTo&&u.internal_resourceInfo.aclUrl===ve(u.internal_acl.resourceAcl)}async function wg(u,g=ge){const w=await qn(u,g),O=await Ki(w,g);return Zi(w,O)}async function bf(u,g=ge){const w=await Gr(u,g),O=await Ki(w,g);return Zi(w,O)}async function Ul(u,g=ge){const w=await Se(u,g),O=await Ki(w,g);return Zi(w,O)}function Hu(u){return da(u)?u.internal_acl.resourceAcl:null}function pi(u){return u.internal_acl.fallbackAcl!==null}function ju(u){return pi(u)?u.internal_acl.fallbackAcl:null}function Na(u){return Me({...$n(),internal_accessTo:ve(u),internal_resourceInfo:{sourceIri:u.internal_resourceInfo.aclUrl,isRawData:!1,linkedResources:{}}})}function Ld(u){const g=Na(u),w=fa(u.internal_acl.fallbackAcl);return Ls(w,u.internal_acl.fallbackAcl.internal_accessTo).map(ee=>(ee=Qr(ee,I.default),ee=Qr(ee,I.defaultForNew),ee=hn(ee,I.accessTo,ve(u)),ee=hn(ee,I.default,ve(u)),ee)).reduce(Xr,g)}async function Vu(u,g,w=ge){if(!Xn(u))throw new Error(`Could not determine the location of the ACL for the Resource at [${ve(u)}]; possibly the current user does not have Control access to that Resource. Try calling \`hasAccessibleAcl()\` before calling \`saveAclFor()\`.`);return{...await U(u.internal_resourceInfo.aclUrl,g,w),internal_accessTo:ve(u)}}async function ks(u,g=ge){const O=await{...ge,...g}.fetch(u.internal_resourceInfo.aclUrl,{method:"DELETE"});if(!O.ok)throw new Error(`Deleting the ACL of the Resource at [${ve(u)}] failed: [${O.status}] [${O.statusText}].`);return Object.assign(P(u),{acl:{resourceAcl:null}})}function Xn(u){return typeof u.internal_resourceInfo.aclUrl=="string"}function Ku(u,g){return da(u)?Hs(u.internal_acl.resourceAcl,g):pi(u)?ha(u.internal_acl.fallbackAcl,g):null}function Bs(u){if(da(u)){const g=Hu(u);return Gu(g)}if(pi(u)){const g=ju(u);return pa(g)}return null}function Hs(u,g){const w=fa(u),O=uo(w,u.internal_accessTo),z=co(O,g).map(Xo);return Zo(z)}function Gu(u){const g=fa(u),w=uo(g,u.internal_accessTo),O=fo(w);return Md(O)}function $u(u,g,w){return Ya(u,w,I.agent,"resource",g)}function ha(u,g){const w=fa(u),O=Ls(w,u.internal_accessTo),z=co(O,g).map(Xo);return Zo(z)}function pa(u){const g=fa(u),w=Ls(g,u.internal_accessTo),O=fo(w);return Md(O)}function js(u,g,w){return Ya(u,w,I.agent,"default",g)}function co(u,g){return Fd(u,g,I.agent)}function fo(u){return u.filter(Vs)}function Vs(u){return ci(u,I.agent)!==null}function Md(u){return Dd(u,I.agent)}function qu(u,g){return da(u)?Pi(u.internal_acl.resourceAcl,g):pi(u)?In(u.internal_acl.fallbackAcl,g):null}function wf(u){if(da(u)){const g=Hu(u);return ri(g)}if(pi(u)){const g=ju(u);return es(g)}return null}function Pi(u,g){const w=fa(u),O=uo(w,u.internal_accessTo),z=Qa(O,g).map(Xo);return Zo(z)}function ri(u){const g=fa(u),w=uo(g,u.internal_accessTo);return _f(w)}function In(u,g){const w=fa(u),O=Ls(w,u.internal_accessTo),z=Qa(O,g).map(Xo);return Zo(z)}function es(u){const g=fa(u),w=Ls(g,u.internal_accessTo);return _f(w)}function Qa(u,g){return Fd(u,g,I.agentGroup)}function _f(u){return Dd(u,I.agentGroup)}function ts(u,g,w){return Ya(u,w,I.agentGroup,"resource",g)}function _g(u,g,w){return Ya(u,w,I.agentGroup,"default",g)}function Sf(u){return da(u)?Ll(u.internal_acl.resourceAcl):pi(u)?Ml(u.internal_acl.fallbackAcl):null}function Ll(u){const g=fa(u),w=uo(g,u.internal_accessTo),L=Ef(w,Y.Agent).map(Xo);return Zo(L)}function Ml(u){const g=fa(u),w=Ls(g,u.internal_accessTo),L=Ef(w,Y.Agent).map(Xo);return Zo(L)}function kd(u,g){return Ya(u,g,I.agentClass,"resource",Y.Agent)}function zu(u,g){return Ya(u,g,I.agentClass,"default",Y.Agent)}function Ef(u,g){return u.filter(w=>Ks(w,g))}function Ks(u,g){return y(u,I.agentClass).includes(g)}function No(u,g){return Object.assign(P(u),{internal_resourceInfo:{...u.internal_resourceInfo,aclUrl:g}})}function rs(u){var g;const w=(g=u.internal_resourceInfo.aclUrl)!==null&&g!==void 0?g:"https://your.pod/mock-acl.ttl",O=Object.assign(P(u),{internal_resourceInfo:{...u.internal_resourceInfo,aclUrl:w}}),L=Na(O);return Zi(O,{resourceAcl:L,fallbackAcl:null})}function Fo(u){const g=gf(tt(u)),w=`${g}.acl`,O=No(Mr(g),w),L=Na(O);return Zi(P(u),{resourceAcl:null,fallbackAcl:L})}function Af(u,g){const w=fr(u,g);if(w===null)throw new Error(`Profile document [${ve(u)}] does not include WebID [${g}]`);return w}function Bd(u,g,w){return Xr(u,hn(Af(u,g),K.publicKey,w))}function kl(u,g){return Qi(Af(u,g),K.publicKey)}const Rf=u=>typeof u.keys<"u";async function ns(u,g,w=ge){const L=await{...ge,...w}.fetch(g);if(!L.ok)throw new Error(`Fetching [${g}] returned an error: ${L.status} ${L.statusText}`);try{const z=await L.json();if(!Rf(z))throw new Error(`[${g}] does not dereference to a valid JWKS: ${JSON.stringify(z)}`);return{keys:[...z.keys,u]}}catch(z){throw new Error(`Parsing the document at [${g}] failed: ${z}`)}}async function Ii(u,g,w=ge){const O=await qn(g,{fetch:w.fetch});if(O===null)throw new Error(`The profile document associated with WebID [${g}] could not be retrieved.`);const L=kl(O,g);if(L===null)throw new Error(`No key set is declared for the property [${K.publicKey}] in the profile of [${g}]`);const z=await ns(u,L,w);return Gt(L,new Blob([JSON.stringify(z)]),{contentType:"application/json",fetch:w.fetch})}function Wu(u,g){const w=fr(g,u),O=tn(g).filter(L=>y(L,Y.primaryTopic).length>0).map(Rr).concat(w?y(w,B.seeAlso):[]).concat(w?y(w,Y.isPrimaryTopicOf):[]).filter(L=>L!==tt(g));return Array.from(new Set(O))}async function Hd(u,g=ge){var w,O;const L=(w=g.fetch)!==null&&w!==void 0?w:A,z=(O=g.webIdProfile)!==null&&O!==void 0?O:await qn(u,{fetch:A}),ee=(await Promise.allSettled(Wu(u,z).map(de=>qn(de,{fetch:L})))).filter(de=>de.status==="fulfilled").map(de=>de.value);return{webIdProfile:z,altProfileAll:ee}}async function dm(u,g=ge){const w=await Hd(u,g);return Sg(w,u)}function Sg(u,g){const w=new Set;return[u.webIdProfile,...u.altProfileAll].forEach(O=>{const L=fr(O,g);L!==null&&y(L,ie.storage).forEach(z=>w.add(z))}),Array.from(w)}async function hm(u){return qn(u,{fetch:A})}function gr(u){if(!bn(u))throw new Error(`An Access Control Resource for [${ve(u)}] is not available. This could be because the current user is not allowed to see it, or because their Pod Server does not support Access Control Resources.`);return u.internal_acp.acr}function bi(u,g){return Object.assign(P(u),{internal_acp:{...u.internal_acp,acr:g}})}function Bl(u){let g=Yr(u);return g=hn(g,$.type,q.AccessControl),g}function Ju(u,g,w){const O=gr(u),L=fr(O,g,w);return L===null||!y(L,$.type).includes(q.AccessControl)?null:L}function Xa(u,g){const w=gr(u),O=tn(w,g),L=O.filter(ee=>y(ee,$.type).includes(q.AccessControl)),z=O.filter(ee=>y(ee,q.accessControl).length>0).map(ee=>{const de=y(ee,q.accessControl)[0];return Yr({url:de})});return L.concat(z)}function Fa(u,g){const w=gr(u),O=Xr(w,g);return bi(u,O)}function Gs(u,g){return Ft(u,q.apply,g)}function Eg(u){return y(u,q.apply)}function jd(u,g){return rn(u,q.apply,g)}function Ag(u){return Qr(u,q.apply)}function Vd(u,g){return Ft(u,q.applyMembers,g)}function Do(u){return y(u,q.applyMembers)}function Kd(u,g){return rn(u,q.applyMembers,g)}function Yu(u){return Qr(u,q.applyMembers)}function Gd(u){const g=Xa(u);return g.length===0?Bl():g[0]}function Za(u){return f(u)&&Array.isArray(u.internal_resourceInfo.linkedResources[q.accessControl])&&u.internal_resourceInfo.linkedResources[q.accessControl].length===1}function Hl(u,g){var w;const O=gr(u),L=ve(O);let z=(w=fr(O,L))!==null&&w!==void 0?w:Yr({url:L});z=Ft(z,q.access,g);const ee=Xr(O,z);return bi(u,ee)}function $s(u,g){var w;const O=gr(u),L=ve(O);let z=(w=fr(O,L))!==null&&w!==void 0?w:Yr({url:L});z=Ft(z,q.accessMembers,g);const ee=Xr(O,z);return bi(u,ee)}function Da(u){const g=gr(u),w=ve(g),O=fr(g,w);return O===null?[]:y(O,q.access)}function qs(u){const g=gr(u),w=ve(g),O=fr(g,w);return O===null?[]:y(O,q.accessMembers)}function ho(u,g){const w=gr(u),O=ve(w),L=fr(w,O);if(L===null)return u;const z=rn(L,q.access,g),ee=Xr(w,z);return bi(u,ee)}function Qu(u,g){const w=gr(u),O=ve(w),L=fr(w,O);if(L===null)return u;const z=rn(L,q.accessMembers,g),ee=Xr(w,z);return bi(u,ee)}function po(u){const g=gr(u),w=ve(g),O=fr(g,w);if(O===null)return u;const L=Qr(O,q.access),z=Xr(g,L);return bi(u,z)}function zs(u){const g=gr(u),w=ve(g),O=fr(g,w);if(O===null)return u;const L=Qr(O,q.accessMembers),z=Xr(g,L);return bi(u,z)}function Xu(u,g){const w=Gd(u),O=Gs(w,g);return Fa(u,O)}function go(u,g){const w=Gd(u),O=Vd(w,g);return Fa(u,O)}function eo(u){const w=Xa(u).map(L=>Eg(L)),O=new Set;return w.forEach(L=>{L.forEach(z=>O.add(z))}),Array.from(O)}function Ws(u){const w=Xa(u).map(L=>Do(L)),O=new Set;return w.forEach(L=>{L.forEach(z=>O.add(z))}),Array.from(O)}function ga(u,g){return Xa(u).map(z=>jd(z,g)).reduce(Fa,u)}function yo(u,g){return Xa(u).map(z=>Kd(z,g)).reduce(Fa,u)}function Uo(u){return Xa(u).map(L=>Ag(L)).reduce(Fa,u)}function Js(u){return Xa(u).map(L=>Yu(L)).reduce(Fa,u)}function Zu(u){let g=`# Access controls for ${ve(u)}
`;const w=eo(u),O=Ws(u),L=Da(u),z=qs(u);return w.length===0&&O.length===0&&L.length===0&&z.length===0&&(g+=`
<no policies specified yet>
`),w.length>0&&(g+=`
The following policies apply to this resource:
- `,g+=`${w.join(`
- `)}
`),L.length>0&&(g+=`
The following policies apply to the access control resource for this resource:
- `,g+=`${L.join(`
- `)}
`),O.length>0&&(g+=`
The following policies apply to the children of this resource:
- `,g+=`${O.join(`
- `)}
`),z.length>0&&(g+=`
The following policies apply to the access control resources for children of this resource:
- `,g+=`${z.join(`
- `)}
`),g}const wi="http://www.w3.org/ns/solid/acp#",Ir={AccessControlResource:wi.concat("AccessControlResource"),Matcher:wi.concat("Matcher"),Policy:wi.concat("Policy"),PublicAgent:wi.concat("PublicAgent"),access:wi.concat("access"),accessControl:wi.concat("accessControl"),agent:wi.concat("agent"),allOf:wi.concat("allOf"),allow:wi.concat("allow"),anyOf:wi.concat("anyOf"),apply:wi.concat("apply"),deny:wi.concat("deny"),memberAccessControl:wi.concat("memberAccessControl"),noneOf:wi.concat("noneOf"),vc:wi.concat("vc")},xf="http://www.w3.org/ns/auth/acl#",Ys={Append:xf.concat("Append"),Read:xf.concat("Read"),Write:xf.concat("Write")},jl="http://www.w3.org/ns/solid/vc#SolidAccessGrant";function is(u){const g=gr(u),w=ve(g);return fr(g,w)}const Qs="defaultAccessControl",Xs="defaultAcrAccessControl",ec="defaultMemberAccessControl",mo="defaultMemberAcrAccessControl";function nn(u,g){const w=gr(u);return ve(w).concat("#").concat(g)}function pn(u,g){const w=gr(u),O=nn(u,g),L=fr(w,O);return L===null||typeof L>"u"?Yr({url:O}):L}function ni(u,g){const w=y(u,g);return{read:w.includes(Ys.Read),append:w.includes(Ys.Append),write:w.includes(Ys.Write),controlRead:!1,controlWrite:!1}}function Tf(u,g){return Object.assign(P(u),{internal_acp:{acr:g}})}function Zs(u,g,w){let O=Qr(u,w);return(g.read||g.controlRead)&&(O=Ft(O,w,Ys.Read)),g.append&&(O=Ft(O,w,Ys.Append)),(g.write||g.controlWrite)&&(O=Ft(O,w,Ys.Write)),O}const as="defaultVcPolicy",tc="defaultVcMatcher";function rc(u,g,w,O){var L;let z=fr(u,g);z===null&&(z=Oa({url:g}).addIri($.type,Ir.Policy).addIri(Ir.anyOf,w).build());const ee=(L=fr(u,w))!==null&&L!==void 0?L:Oa({url:w}).addIri($.type,Ir.Matcher).addIri(Ir.vc,jl).build(),de=ni(z,Ir.allow);return z=Zs(z,{...de,...O},Ir.allow),{matcher:ee,policy:z}}function el(u,g,w={inherit:!1}){var O;let L=gr(u);const z=`${tt(L)}#${as}`,ee=`${tt(L)}#${tc}`,{policy:de,matcher:ke}=rc(L,z,ee,g);let Ve=pn(u,"defaultAccessControl");y(Ve,Ir.apply).includes(Rr(de))||(Ve=Ft(Ve,Ir.apply,de));let Ye=pn(u,"defaultMemberAccessControl"),Lt=(O=is(u))!==null&&O!==void 0?O:Yr({url:tt(L)});return y(Lt,Ir.accessControl).includes(Rr(Ve))||(Lt=Ft(Lt,Ir.accessControl,Ve)),L=[Lt,Ve,de,ke].reduce(Xr,L),w.inherit&&(y(Ye,Ir.apply).includes(Rr(de))||(Ye=Ft(Ye,Ir.apply,de)),y(Lt,Ir.memberAccessControl).includes(Rr(Ye))||(Lt=Ft(Lt,Ir.memberAccessControl,Ye)),L=[Lt,Ye].reduce(Xr,L)),Tf(u,L)}const $d={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},ii=(u,g,w)=>y(u,g).includes(Rr(w));function Cf(u){const g=gr(u),w=pn(u,"defaultAccessControl"),O=is(u);if(O===null||!ii(O,Ir.accessControl,w))return $d;const L=`${tt(g)}#${as}`,z=fr(g,L);if(z===null||!ii(w,Ir.apply,z))return $d;const ee=`${tt(g)}#${tc}`,de=fr(g,ee);return de===null||!ii(z,Ir.anyOf,de)?$d:ni(z,Ir.allow)}async function os(u,g=ge){const w=_(u),O={...ge,...g},L=await qn(w,O),z=await Jn(L,O);return{...L,...z}}async function tl(u,g=ge){const w=_(u),O={...ge,...g},L=await Gr(w,O),z=await Jn(L,O);return Object.assign(L,z)}async function gi(u,g=ge){const w=_(u),O={...ge,...g},L=await Se(w,O),z=await Jn(L,O);return{...L,...z}}async function Vl(u,g=ge){const w=_(u),O={...ge,...g},L=await qn(w,O);if(Xn(L)){const ee=await Ki(L,O);return Zi(L,ee)}const z=await Jn(L,O);return{...L,...z}}async function ss(u,g=ge){const w=_(u),O={...ge,...g},L=await Gr(w,O);if(Xn(L)){const ee=await Ki(L,O);return Zi(L,ee)}const z=await Jn(L,O);return Object.assign(L,z)}async function ls(u,g=ge){const w=_(u),O={...ge,...g},L=await Se(w,O);if(Xn(L)){const ee=await Ki(L,O);return Zi(L,ee)}const z=await Jn(L,O);return{...L,...z}}async function Gi(u,g=ge){const w=gr(u),O={...ge,...g},L=await U(ve(w),w,O);return bi(u,L)}function bn(u){return typeof u.internal_acp=="object"&&u.internal_acp!==null&&typeof u.internal_acp.acr=="object"&&u.internal_acp.acr!==null}async function Jn(u,g){let w;if(Za(u)){const{linkedResources:ee}=u.internal_resourceInfo;[w]=ee[q.accessControl]}else if(Xn(u)){let ee;try{ee=await Se(u.internal_resourceInfo.aclUrl,g)}catch{}ee&&vg(ee)&&(w=ve(ee))}if(typeof w!="string")return{internal_acp:{acr:null}};let O;try{O=await qn(w,g)}catch{return{internal_acp:{acr:null}}}return{internal_acp:{acr:{...O,accessTo:ve(u)}}}}function us(u){const g=eo(u).map(En).concat(Ws(u).map(En)).concat(Da(u).map(En)).concat(qs(u).map(En));return Array.from(new Set(g))}async function cs(u,g=ge){const w=_(u),O={...ge,...g},L=await Se(w,O);return bn(await Jn(L,O))}function Kl(u){return f(u)?[q.accessControl,"acl"].map(w=>{if(Array.isArray(u.internal_resourceInfo.linkedResources[w])&&u.internal_resourceInfo.linkedResources[w].length===1)return u.internal_resourceInfo.linkedResources[w][0]}).find(w=>w!==void 0):void 0}function nc(u){return y(u,$.type).includes(q.Rule)}function Ua(u,g){return Ft(u,q.allOf,g)}function rl(u,g){return rn(u,q.allOf,g)}function Gl(u,g){return hn(u,q.allOf,g)}function Lo(u){return y(u,q.allOf)}function ic(u,g){return Ft(u,q.anyOf,g)}function ac(u,g){return rn(u,q.anyOf,g)}function oc(u,g){return hn(u,q.anyOf,g)}function fs(u){return y(u,q.anyOf)}function sc(u,g){return Ft(u,q.noneOf,g)}function lc(u,g){return rn(u,q.noneOf,g)}function $l(u,g){return hn(u,q.noneOf,g)}function vo(u){return y(u,q.noneOf)}function Of(u){const g=_(u);let w=Yr({url:g});return w=Ca(w,$.type,q.Rule),w}function uc(u,g){const w=gr(u),O=new URL(ve(w));O.hash=`#${g}`;let L=Yr({url:O.href});return L=Ca(L,$.type,q.Rule),L}function cc(u,g){const w=fr(u,g);return w===null||Qi(w,$.type)!==q.Rule?null:w}function Pf(u,g){const w=gr(u),O=ve(w),L=new URL(O);L.hash=`#${g}`;const z=fr(w,L.href);return z===null||!nc(z)?null:z}function ql(u){return tn(u).filter(nc)}function qd(u){const g=gr(u);return tn(g).filter(nc)}function fc(u,g){return Tn(u,g)}function zd(u,g){const w=gr(u);let O;if(typeof g=="string")if(Jt(g))O=g;else{const de=new URL(ve(w));de.hash=`#${g}`,O=de.href}else j(g)?O=_(g):O=vn(g);const L=Pf(u,new URL(O).hash.substring(1));if(L===null)return u;const z=Tn(w,L);return bi(u,z)}function dc(u,g){return Xr(u,g)}function nl(u,g){const w=gr(u),O=Xr(w,g);return bi(u,O)}function hc(u){return y(u,q.agent).filter(g=>g!==q.PublicAgent&&g!==q.AuthenticatedAgent&&g!==q.CreatorAgent)}function pc(u,g){const w=ol(u),O=sl(u),L=ll(u);let z=hn(u,q.agent,g);return w&&(z=yc(z)),O&&(z=mc(z)),L&&(z=bc(z)),z}function Mo(u,g){return Ft(u,q.agent,g)}function il(u,g){return rn(u,q.agent,g)}function zl(u){return y(u,q.group)}function al(u,g){return hn(u,q.group,g)}function ds(u,g){return Ft(u,q.group,g)}function gc(u,g){return rn(u,q.group,g)}function ol(u){return y(u,q.agent).filter(g=>g===q.PublicAgent).length>0}function yc(u){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return Ft(u,q.agent,q.PublicAgent)}function If(u){return rn(u,q.agent,q.PublicAgent)}function sl(u){return y(u,q.agent).filter(g=>g===q.AuthenticatedAgent).length>0}function mc(u){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return Ft(u,q.agent,q.AuthenticatedAgent)}function vc(u){return rn(u,q.agent,q.AuthenticatedAgent)}function ll(u){return y(u,q.agent).filter(g=>g===q.CreatorAgent).length>0}function bc(u){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return Ft(u,q.agent,q.CreatorAgent)}function wc(u){return rn(u,q.agent,q.CreatorAgent)}function Nf(u){return y(u,q.client).filter(g=>g!==Ie.PublicOidcClient)}function Wd(u,g){const w=_c(u);let O=hn(u,q.client,g);return w&&(O=Df(O)),O}function Rg(u,g){return Ft(u,q.client,g)}function Ff(u,g){return rn(u,q.client,g)}function _c(u){return y(u,q.client).filter(g=>g===Ie.PublicOidcClient).length>0}function Df(u){return Ft(u,q.client,Ie.PublicOidcClient)}function Uf(u){return rn(u,q.client,Ie.PublicOidcClient)}function Sc(u){let g=`## Rule: ${vn(u)}

`,w="";ol(u)&&(w+=`- Everyone
`),sl(u)&&(w+=`- All authenticated agents
`),ll(u)&&(w+=`- The creator of this resource
`),_c(u)&&(w+=`- Users of any client application
`);const O=hc(u);O.length>0&&(w+=`- The following agents:
  - `,w+=`${O.join(`
  - `)}
`);const L=zl(u);L.length>0&&(w+=`- Members of the following groups:
  - `,w+=`${L.join(`
  - `)}
`);const z=Nf(u);return z.length>0&&(w+=`- Users of the following client applications:
  - `,w+=`${z.join(`
  - `)}
`),g+=w.length>0?`This rule applies to:
${w}`:`<empty>
`,g}function ul(u){return y(u,$.type).includes(q.Policy)}function Wl(u){const g=_(u);let w=Yr({url:g});return w=Ca(w,$.type,q.Policy),w}function Jl(u,g){const w=fr(u,g);return w===null||!ul(w)?null:w}function cl(u){return tn(u).filter(O=>!Ei(O)&&ul(O))}function bo(u,g){return Tn(u,g)}function hs(u,g){return Xr(u,g)}function fl(u,g){let w=Qr(u,q.allow);return g.read===!0&&(w=Ft(w,q.allow,Pn.read)),g.append===!0&&(w=Ft(w,q.allow,Pn.append)),g.write===!0&&(w=Ft(w,q.allow,Pn.write)),w}function dl(u,g){let w=Qr(u,q.allow);return g.read===!0&&(w=Ft(w,q.allow,q.Read)),g.append===!0&&(w=Ft(w,q.allow,q.Append)),g.write===!0&&(w=Ft(w,q.allow,q.Write)),w}function Ec(u){const g=y(u,q.allow);return{read:g.includes(Pn.read),append:g.includes(Pn.append),write:g.includes(Pn.write)}}function wo(u){const g=y(u,q.allow);return{read:g.includes(q.Read),append:g.includes(q.Append),write:g.includes(q.Write)}}function Jd(u,g){let w=Qr(u,q.deny);return g.read===!0&&(w=Ft(w,q.deny,Pn.read)),g.append===!0&&(w=Ft(w,q.deny,Pn.append)),g.write===!0&&(w=Ft(w,q.deny,Pn.write)),w}function Ac(u,g){let w=Qr(u,q.deny);return g.read===!0&&(w=Ft(w,q.deny,q.Read)),g.append===!0&&(w=Ft(w,q.deny,q.Append)),g.write===!0&&(w=Ft(w,q.deny,q.Write)),w}function Lf(u){const g=y(u,q.deny);return{read:g.includes(Pn.read),append:g.includes(Pn.append),write:g.includes(Pn.write)}}function La(u){const g=y(u,q.deny);return{read:g.includes(q.Read),append:g.includes(q.Append),write:g.includes(q.Write)}}function ea(u,g){const w=gr(u),O=new URL(ve(w));O.hash=`#${g}`;let L=Yr({url:O.href});return L=Ca(L,$.type,q.Policy),L}function ps(u,g){const w=gr(u),O=ve(w),L=new URL(O);L.hash=`#${g}`;const z=fr(w,L.href);return!eo(u).includes(L.href)||z===null||!ul(z)?null:z}function ko(u,g){const w=gr(u),O=ve(w),L=new URL(O);L.hash=`#${g}`;const z=fr(w,L.href);return!Da(u).includes(L.href)||z===null||!ul(z)?null:z}function hl(u){const g=gr(u);return eo(u).map(z=>fr(g,z)).filter(z=>z!==null&&ul(z))}function Rc(u){const g=gr(u);return Da(u).map(z=>fr(g,z)).filter(z=>z!==null&&ul(z))}function xc(u,g){const w=gr(u);let O=g;if(typeof O=="string"&&Jt(O)===!1){const ke=new URL(ve(w));ke.hash=`#${g}`,O=ke.href}let L;if(typeof O=="string"?L=O:j(O)?L=_(O):L=vn(O,ve(w)),ps(u,new URL(L).hash.substring(1))===null)return u;const ee=Tn(w,O),de=bi(u,ee);return ga(de,L)}function Bo(u,g){const w=gr(u);let O=g;if(typeof O=="string"&&Jt(O)===!1){const ke=new URL(ve(w));ke.hash=`#${g}`,O=ke.href}let L;if(typeof O=="string"?L=O:j(O)?L=_(O):L=vn(O,ve(w)),ko(u,new URL(L).hash.substring(1))===null)return u;const ee=Tn(w,O),de=bi(u,ee);return ho(de,L)}function pl(u,g){const w=gr(u),O=Xr(w,g),L=bi(u,O),z=vn(g,ve(w));return Xu(L,z)}function Ti(u,g){const w=gr(u),O=Xr(w,g),L=bi(u,O),z=vn(g,ve(w));return Hl(L,z)}function ya(u){function g(ke,Ve){return Ve?"denied":ke?"allowed":"unspecified"}const w=wo(u),O=La(u);let L=`## Policy: ${vn(u)}

`;L+=`- Read: ${g(w.read,O.read)}
`,L+=`- Append: ${g(w.append,O.append)}
`,L+=`- Write: ${g(w.write,O.write)}
`;const z=Lo(u),ee=fs(u),de=vo(u);return z.length===0&&ee.length===0&&de.length===0&&(L+=`
<no rules specified yet>
`),z.length>0&&(L+=`
All of these rules should match:
`,L+=`- ${z.join(`
- `)}
`),ee.length>0&&(L+=`
At least one of these rules should match:
`,L+=`- ${ee.join(`
- `)}
`),de.length>0&&(L+=`
None of these rules should match:
`,L+=`- ${de.join(`
- `)}
`),L}function ta(u){const g=new URL("access-control-resource",u).href;return{...Yt(g),accessTo:u}}function gl(u,g=ta(ve(u))){return Object.assign(P(u),{internal_acp:{acr:g,aprs:{}}})}const gs={getFileWithAccessDatasets:ss,getFileWithAcr:tl,getReferencedPolicyUrlAll:us,getResourceInfoWithAccessDatasets:ls,getResourceInfoWithAcr:gi,getSolidDatasetWithAccessDatasets:Vl,getSolidDatasetWithAcr:os,hasAccessibleAcr:bn,saveAcrFor:Gi},Ho={acrAsMarkdown:Zu,addAcrPolicyUrl:Hl,addMemberAcrPolicyUrl:$s,addMemberPolicyUrl:go,addPolicyUrl:Xu,getAcrPolicyUrlAll:Da,getMemberAcrPolicyUrlAll:qs,getMemberPolicyUrlAll:Ws,getPolicyUrlAll:eo,hasLinkedAcr:Za,removeAcrPolicyUrl:ho,removeAcrPolicyUrlAll:po,removeMemberAcrPolicyUrl:Qu,removeMemberAcrPolicyUrlAll:zs,removeMemberPolicyUrl:yo,removeMemberPolicyUrlAll:Js,removePolicyUrl:ga,removePolicyUrlAll:Uo},_i={createPolicy:Wl,getAllowModes:wo,getDenyModes:La,getPolicy:Jl,getPolicyAll:cl,policyAsMarkdown:ya,removePolicy:bo,setAllowModes:dl,setDenyModes:Ac,setPolicy:hs},Mf={addAgent:Mo,addForbiddenRuleUrl:sc,addGroup:ds,addOptionalRuleUrl:ic,addRequiredRuleUrl:Ua,createRule:Of,getAgentAll:hc,getForbiddenRuleUrlAll:vo,getGroupAll:zl,getOptionalRuleUrlAll:fs,getRequiredRuleUrlAll:Lo,getRule:cc,getRuleAll:ql,hasAuthenticated:sl,hasCreator:ll,hasPublic:ol,removeAgent:il,removeForbiddenRuleUrl:lc,removeGroup:gc,removeOptionalRuleUrl:ac,removeRequiredRuleUrl:rl,removeRule:fc,ruleAsMarkdown:Sc,setAgent:pc,setForbiddenRuleUrl:$l,setGroup:al,setOptionalRuleUrl:oc,setRequiredRuleUrl:Gl,setRule:dc},Yd={addMockAcrTo:gl,mockAcrFor:ta};function kf(u,g){return g?yc(u):If(u)}function Qd(u,g){return g?mc(u):vc(u)}function Xd(u,g){return g?bc(u):wc(u)}const Bf={...gs,...Ho,..._i,...Mf,...Yd,...{getForbiddenRuleurlAll:vo,setPublic:kf,setAuthenticated:Qd,setCreator:Xd}},Tg={...{getFileWithAccessDatasets:ss,getFileWithAcr:tl,getReferencedPolicyUrlAll:us,getResourceInfoWithAccessDatasets:ls,getResourceInfoWithAcr:gi,getSolidDatasetWithAccessDatasets:Vl,getSolidDatasetWithAcr:os,hasAccessibleAcr:bn,saveAcrFor:Gi},...{createPolicy:Wl,getAllowModes:wo,getDenyModes:La,getPolicy:Jl,getPolicyAll:cl,policyAsMarkdown:ya,removePolicy:bo,setAllowModes:dl,setDenyModes:Ac,setPolicy:hs},...{addAgent:Mo,addForbiddenRuleUrl:sc,addGroup:ds,addOptionalRuleUrl:ic,addRequiredRuleUrl:Ua,createRule:Of,getAgentAll:hc,getForbiddenRuleUrlAll:vo,getGroupAll:zl,getOptionalRuleUrlAll:fs,getRequiredRuleUrlAll:Lo,getRule:cc,getRuleAll:ql,hasAuthenticated:sl,hasCreator:ll,hasPublic:ol,removeAgent:il,removeForbiddenRuleUrl:lc,removeGroup:gc,removeOptionalRuleUrl:ac,removeRequiredRuleUrl:rl,removeRule:fc,ruleAsMarkdown:Sc,setAgent:pc,setForbiddenRuleUrl:$l,setGroup:al,setOptionalRuleUrl:oc,setRequiredRuleUrl:Gl,setRule:dc},...{addMockAcrTo:gl,mockAcrFor:ta},...{hasLinkedAcr:Za,addAcrPolicyUrl:Hl,addMemberAcrPolicyUrl:$s,getAcrPolicyUrlAll:Da,getMemberAcrPolicyUrlAll:qs,removeAcrPolicyUrl:ho,removeAcrPolicyUrlAll:po,removeMemberAcrPolicyUrl:Qu,removeMemberAcrPolicyUrlAll:zs},...{createControl:Bl,getControl:Ju,getAllControl:Xa,getControlAll:Xa,setControl:Fa,removeControl:Cg,addPolicyUrl:Gs,getPolicyUrlAll:Eg,removePolicyUrl:jd,removePolicyUrlAll:Ag,addMemberPolicyUrl:Vd,getMemberPolicyUrlAll:Do,removeMemberPolicyUrl:Do,removeMemberPolicyUrlAll:Yu,getForbiddenRuleurlAll:vo,setPublic:kf,setAuthenticated:Qd,setCreator:Xd}};function Cg(u,g){const w=gr(u),O=Tn(w,g);return bi(u,O)}const Og={...{getFileWithAccessDatasets:ss,getFileWithAcr:tl,getLinkedAcrUrl:Kl,getReferencedPolicyUrlAll:us,getResourceInfoWithAccessDatasets:ls,getResourceInfoWithAcr:gi,getSolidDatasetWithAccessDatasets:Vl,getSolidDatasetWithAcr:os,hasAccessibleAcr:bn,saveAcrFor:Gi,isAcpControlled:cs},...{acrAsMarkdown:Zu,addAcrPolicyUrl:Hl,addMemberAcrPolicyUrl:$s,addMemberPolicyUrl:go,addPolicyUrl:Xu,getAcrPolicyUrlAll:Da,getMemberAcrPolicyUrlAll:qs,getMemberPolicyUrlAll:Ws,getPolicyUrlAll:eo,hasLinkedAcr:Za,removeAcrPolicyUrl:ho,removeAcrPolicyUrlAll:po,removeMemberAcrPolicyUrl:Qu,removeMemberAcrPolicyUrlAll:zs,removeMemberPolicyUrl:yo,removeMemberPolicyUrlAll:Js,removePolicyUrl:ga,removePolicyUrlAll:Uo},...{createPolicy:Wl,getAllowModes:wo,getDenyModes:La,getPolicy:Jl,getPolicyAll:cl,policyAsMarkdown:ya,removePolicy:bo,setAllowModes:dl,setDenyModes:Ac,setPolicy:hs,createResourcePolicyFor:ea,getResourceAcrPolicy:ko,getResourceAcrPolicyAll:Rc,getResourcePolicy:ps,getResourcePolicyAll:hl,removeResourceAcrPolicy:Bo,removeResourcePolicy:xc,setResourceAcrPolicy:Ti,setResourcePolicy:pl},...{addAgent:Mo,addGroup:ds,createRule:Of,getAgentAll:hc,getGroupAll:zl,getRule:cc,getRuleAll:ql,removeAgent:il,removeGroup:gc,removeRule:fc,ruleAsMarkdown:Sc,setAgent:pc,setGroup:al,setRule:dc,addClient:Rg,getClientAll:Nf,hasAnyClient:_c,removeClient:Ff,setAnyClient:Df,setClient:Wd,removeAnyClient:Uf,hasAuthenticated:sl,hasCreator:ll,hasPublic:ol,setAuthenticated:mc,setCreator:bc,setPublic:yc,removeAuthenticated:vc,removeCreator:wc,removePublic:If,getAnyOfRuleUrlAll:fs,addAnyOfRuleUrl:ic,removeAnyOfRuleUrl:ac,setAnyOfRuleUrl:oc,getAllOfRuleUrlAll:Lo,addAllOfRuleUrl:Ua,removeAllOfRuleUrl:rl,setAllOfRuleUrl:Gl,getNoneOfRuleUrlAll:vo,addNoneOfRuleUrl:sc,removeNoneOfRuleUrl:lc,setNoneOfRuleUrl:$l,createResourceRuleFor:uc,getResourceRule:Pf,getResourceRuleAll:qd,removeResourceRule:zd,setResourceRule:nl},...{addMockAcrTo:gl,mockAcrFor:ta}};function ma(u,g){return Object.assign(P(u),{internal_acp:{...u.internal_acp,acr:Xr(u.internal_acp.acr,g)}})}function eh(u){return u.includes("Member")?Ir.memberAccessControl:Ir.accessControl}function Tc(u,g){const w=nn(u,g),O=gr(u);let L=is(u);return(L===null||typeof L>"u")&&(L=Yr({url:ve(O)})),y(L,eh(g)).includes(w)?u:(L=Oa(L).addUrl(eh(g),w).build(),ma(u,L))}function Ql(u,g){const w=Tc(u,Xs),O=pn(w,Xs);return ma(w,Oa(O).addUrl(Ir.access,g).build())}function Hf(u,g){const w=Tc(u,mo),O=pn(w,mo);return ma(w,Oa(O).addUrl(Ir.access,g).build())}function th(u,g){const w=Tc(u,ec),O=pn(w,ec);return ma(w,Oa(O).addUrl(Ir.apply,g).build())}function jf(u,g){const w=Tc(u,Qs),O=pn(w,Qs);return ma(w,Oa(O).addUrl(Ir.apply,g).build())}function rh(u){const g=is(u);return g===null?[]:y(g,Ir.accessControl)}function Xl(u,g,w){const O=gr(u);return Array.from(new Set(g.map(L=>{const z=fr(O,L);return z!==null?y(z,w):[]}).reduce((L,z)=>L.concat(z),[])))}function Cc(u){return Xl(u,rh(u),Ir.access)}function Vf(u){const g=is(u);return g===null?[]:y(g,Ir.memberAccessControl)}function nh(u){return Xl(u,Vf(u),Ir.access)}function Kf(u){return Xl(u,Vf(u),Ir.apply)}function Zl(u){return Xl(u,rh(u),Ir.apply)}function Gf(u,g){const w=pn(u,Xs);return ma(u,rn(w,Ir.access,g))}function ih(u,g){const w=pn(u,mo);return ma(u,rn(w,Ir.access,g))}function $f(u,g){const w=pn(u,ec);return ma(u,rn(w,Ir.apply,g))}function ah(u,g){const w=pn(u,Qs);return ma(u,rn(w,Ir.apply,g))}function _o(u,g){return ma(u,g)}function eu(u){return y(u,$.type).includes(q.Matcher)}function Pg(u,g){return Ft(u,q.allOf,g)}function oh(u,g){return rn(u,q.allOf,g)}function So(u,g){return hn(u,q.allOf,g)}function Oc(u){return y(u,q.allOf)}function Pc(u,g){return Ft(u,q.anyOf,g)}function tu(u,g){return rn(u,q.anyOf,g)}function ei(u,g){return hn(u,q.anyOf,g)}function qf(u){return y(u,q.anyOf)}function Ig(u,g){return Ft(u,q.noneOf,g)}function sh(u,g){return rn(u,q.noneOf,g)}function ru(u,g){return hn(u,q.noneOf,g)}function to(u){return y(u,q.noneOf)}function lh(u){const g=_(u);let w=Yr({url:g});return w=Ca(w,$.type,q.Matcher),w}function Ic(u,g){const w=gr(u),O=new URL(ve(w));O.hash=`#${g}`;let L=Yr({url:O.href});return L=Ca(L,$.type,q.Matcher),L}function nu(u,g){const w=fr(u,g);return w===null||!eu(w)?null:w}function Ma(u,g){const w=gr(u),O=ve(w),L=new URL(O);L.hash=`#${g}`;const z=fr(w,L.href);return z===null||!eu(z)?null:z}function uh(u){return tn(u).filter(eu)}function zf(u){const g=gr(u);return tn(g).filter(eu)}function ch(u,g){return Tn(u,g)}function Wf(u,g){const w=gr(u);let O;if(typeof g=="string")if(Jt(g))O=g;else{const de=new URL(ve(w));de.hash=`#${g}`,O=de.href}else j(g)?O=_(g):O=vn(g);const L=Ma(u,new URL(O).hash.substring(1));if(L===null)return u;const z=Tn(w,L);return bi(u,z)}function Jf(u,g){return Xr(u,g)}function jo(u,g){const w=gr(u),O=Xr(w,g);return bi(u,O)}function fh(u){return y(u,q.agent).filter(g=>g!==q.PublicAgent&&g!==q.AuthenticatedAgent&&g!==q.CreatorAgent)}function Eo(u,g){const w=Yf(u),O=Qf(u),L=Fi(u);let z=hn(u,q.agent,g);return w&&(z=yi(z)),O&&(z=Xf(z)),L&&(z=ro(z)),z}function ai(u,g){return Ft(u,q.agent,g)}function Nc(u,g){return rn(u,q.agent,g)}function Yf(u){return y(u,q.agent).filter(g=>g===q.PublicAgent).length>0}function yi(u){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return Ft(u,q.agent,q.PublicAgent)}function Ng(u){return rn(u,q.agent,q.PublicAgent)}function Qf(u){return y(u,q.agent).filter(g=>g===q.AuthenticatedAgent).length>0}function Xf(u){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return Ft(u,q.agent,q.AuthenticatedAgent)}function Zn(u){return rn(u,q.agent,q.AuthenticatedAgent)}function Fi(u){return y(u,q.agent).filter(g=>g===q.CreatorAgent).length>0}function ro(u){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return Ft(u,q.agent,q.CreatorAgent)}function dh(u){return rn(u,q.agent,q.CreatorAgent)}function hh(u){return y(u,q.client).filter(g=>g!==Ie.PublicOidcClient).concat(Fe(u,q.client))}function wm(u,g){const w=ka(u);let O=hn(u,q.client,g);return w&&(O=ph(O)),O}function Zf(u,g){return Jt(g)?Ft(u,q.client,g):zn(u,q.client,g)}function ra(u,g){return Jt(g)?rn(u,q.client,g):Io(u,q.client,g)}function ka(u){return y(u,q.client).filter(g=>g===Ie.PublicOidcClient).length>0}function ph(u){return Ft(u,q.client,Ie.PublicOidcClient)}function va(u){return rn(u,q.client,Ie.PublicOidcClient)}const gh={...{getFileWithAccessDatasets:ss,getFileWithAcr:tl,getReferencedPolicyUrlAll:us,getResourceInfoWithAccessDatasets:ls,getResourceInfoWithAcr:gi,getSolidDatasetWithAccessDatasets:Vl,getSolidDatasetWithAcr:os,hasAccessibleAcr:bn,saveAcrFor:Gi,isAcpControlled:cs,getVcAccess:Cf,setVcAccess:el},...{addAcrPolicyUrl:Ql,addMemberAcrPolicyUrl:Hf,addMemberPolicyUrl:th,addPolicyUrl:jf,getAcrPolicyUrlAll:Cc,getMemberAcrPolicyUrlAll:nh,getMemberPolicyUrlAll:Kf,getPolicyUrlAll:Zl,hasLinkedAcr:Za,removeAcrPolicyUrl:Gf,removeAcrPolicyUrlAll:po,removeMemberAcrPolicyUrl:ih,removeMemberAcrPolicyUrlAll:zs,removeMemberPolicyUrl:$f,removeMemberPolicyUrlAll:Js,removePolicyUrl:ah,removePolicyUrlAll:Uo},...{createPolicy:Wl,getAllowModes:Ec,getDenyModes:Lf,getPolicy:Jl,getPolicyAll:cl,removePolicy:bo,setAllowModes:fl,setDenyModes:Jd,setPolicy:hs,createResourcePolicyFor:ea,getResourceAcrPolicy:ko,getResourceAcrPolicyAll:Rc,getResourcePolicy:ps,getResourcePolicyAll:hl,removeResourceAcrPolicy:Bo,removeResourcePolicy:xc,setResourcePolicy:_o},...{addAgent:ai,createMatcher:lh,getAgentAll:fh,getMatcher:nu,getMatcherAll:uh,removeAgent:Nc,removeMatcher:ch,setAgent:Eo,setMatcher:Jf,addClient:Zf,getClientAll:hh,hasAnyClient:ka,removeClient:ra,setAnyClient:ph,setClient:wm,removeAnyClient:va,hasAuthenticated:Qf,hasCreator:Fi,hasPublic:Yf,setAuthenticated:Xf,setCreator:ro,setPublic:yi,removeAuthenticated:Zn,removeCreator:dh,removePublic:Ng,getAnyOfMatcherUrlAll:qf,addAnyOfMatcherUrl:Pc,removeAnyOfMatcherUrl:tu,setAnyOfMatcherUrl:ei,getAllOfMatcherUrlAll:Oc,addAllOfMatcherUrl:Pg,removeAllOfMatcherUrl:oh,setAllOfMatcherUrl:So,getNoneOfMatcherUrlAll:to,addNoneOfMatcherUrl:Ig,removeNoneOfMatcherUrl:sh,setNoneOfMatcherUrl:ru,createResourceMatcherFor:Ic,getResourceMatcher:Ma,getResourceMatcherAll:zf,removeResourceMatcher:Wf,setResourceMatcher:jo},...{addMockAcrTo:gl,mockAcrFor:ta}},Ba=[q.agent,q.group];function vl(u,g,w){if(u.inaccessibleUrls.length>0)return null;const O=u.acrPolicies.filter(Ye=>Vo(Ye,g,w,u)),L=u.policies.filter(Ye=>Vo(Ye,g,w,u)),z={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},ee=O.reduce((Ye,Lt)=>{const Kt={...Ye},rr=wo(Lt);return rr.read&&(Kt.controlRead=!0),rr.write&&(Kt.controlWrite=!0),Kt},z),de=L.reduce((Ye,Lt)=>{const Kt={...Ye},rr=wo(Lt);return rr.read&&(Kt.read=!0),rr.append&&(Kt.append=!0),rr.write&&(Kt.write=!0),Kt},ee),ke=O.reduce((Ye,Lt)=>{const Kt={...Ye},rr=La(Lt);return rr.read===!0&&(Kt.controlRead=!1),rr.write===!0&&(Kt.controlWrite=!1),Kt},de);return L.reduce((Ye,Lt)=>{const Kt={...Ye},rr=La(Lt);return rr.read===!0&&(Kt.read=!1),rr.append===!0&&(Kt.append=!1),rr.write===!0&&(Kt.write=!1),Kt},ke)}function au(u,g){return vl(u,q.agent,g)}function Fc(u,g){return vl(u,q.group,g)}function Dc(u){return vl(u,q.agent,q.PublicAgent)}function Vo(u,g,w,O){const L=y(u,q.allow),z=y(u,q.deny);if(L.length+z.length===0)return!1;const ee=Lo(u).map(Ve=>O.rules.find(Ye=>Rr(Ye)===Ve)),de=fs(u).map(Ve=>O.rules.find(Ye=>Rr(Ye)===Ve)),ke=vo(u).map(Ve=>O.rules.find(Ye=>Rr(Ye)===Ve));return ee.every(Ve=>mh(Ve,g,w))&&(de.length===0||de.some(Ve=>mh(Ve,g,w)))&&ke.length===0}function yh(u,g){const w=y(u,q.allow),O=y(u,q.deny);return g.read===!0&&O.includes(q.Read)||g.read===!1&&w.includes(q.Read)&&!O.includes(q.Read)||g.append===!0&&O.includes(q.Append)||g.append===!1&&w.includes(q.Append)&&!O.includes(q.Append)||g.write===!0&&O.includes(q.Write)||g.write===!1&&w.includes(q.Write)&&!O.includes(q.Write)}function mh(u,g,w){let O=!0;return Ba.forEach(L=>{O&&(O=ci(u,L)===null)}),O||y(u,g).includes(w)}function Uc(u,g){const w=new Set;return u.rules.forEach(O=>{y(O,g).filter(L=>![q.PublicAgent,q.CreatorAgent,q.AuthenticatedAgent].includes(L)||g!==q.agent).forEach(L=>w.add(L))}),w}function vh(u,g){if(u.inaccessibleUrls.length>0)return null;const w={};return Uc(u,g).forEach(L=>{const z=vl(u,g,L);w[L]=z}),w}function ed(u){return vh(u,q.group)}function Dg(u){return vh(u,q.agent)}function bh(u,g,w,O,L){var z,ee,de,ke,Ve;if(!bn(u)||g.inaccessibleUrls.length>0)return null;const Ye=vl(g,w,O);if(Ye===null)return null;const Lt=g.acrPolicies.filter(Tr=>Vo(Tr,w,O,g)),Kt=g.policies.filter(Tr=>Vo(Tr,w,O,g)),rr=Lt.filter(Tr=>yh(Tr,{read:L.controlRead,write:L.controlWrite})),Pr=Kt.filter(Tr=>yh(Tr,{read:L.read,append:L.append,write:L.write})),ln=rr.filter(Tr=>gn(Tr,w,O,g)),Wr=Pr.filter(Tr=>gn(Tr,w,O,g)),Ha={...g,acrPolicies:g.acrPolicies.filter(Tr=>!ln.includes(Tr)),policies:g.policies.filter(Tr=>!Wr.includes(Tr))},Hn=vl(Ha,w,O);if(Hn===null)return null;let Sr=u;ln.forEach(Tr=>{const[an,$o]=Ln(Tr,u,g,w,O);Sr=Ti(Sr,an),Sr=$o.reduce(nl,Sr)}),Wr.forEach(Tr=>{const[an,$o]=Ln(Tr,u,g,w,O);Sr=pl(Sr,an),Sr=$o.reduce(nl,Sr)});const Ui=`rule_${encodeURIComponent(`${w}_${O}`)}`;let mi=uc(u,Ui);mi=hn(mi,w,O);const ia=(z=L.controlRead)!==null&&z!==void 0?z:Ye.controlRead,Li=(ee=L.controlWrite)!==null&&ee!==void 0?ee:Ye.controlWrite;let ws=ln;if(ia!==Hn.controlRead||Li!==Hn.controlWrite){const Tr=c.v4();let an=ea(u,Tr);an=dl(an,{read:ia===!0,append:!1,write:Li===!0}),an=Ft(an,q.allOf,mi),Sr=Ti(Sr,an),Sr=nl(Sr,mi),ws=rr}const ao=(de=L.read)!==null&&de!==void 0?de:Ye.read,Wc=(ke=L.append)!==null&&ke!==void 0?ke:Ye.append,Jc=(Ve=L.write)!==null&&Ve!==void 0?Ve:Ye.write;let El=Wr;if(ao!==Hn.read||Wc!==Hn.append||Jc!==Hn.write){const Tr=c.v4();let an=ea(u,Tr);an=dl(an,{read:ao===!0,append:Wc===!0,write:Jc===!0}),an=Ft(an,q.allOf,mi),Sr=pl(Sr,an),Sr=nl(Sr,mi),El=Pr}return ws.forEach(Tr=>{Sr=ho(Sr,Rr(Tr))}),El.forEach(Tr=>{Sr=ga(Sr,Rr(Tr))}),Sr}function Sm(u,g,w,O){return bh(u,g,q.agent,w,O)}function Bn(u,g,w,O){return bh(u,g,q.group,w,O)}function Yn(u,g,w){return bh(u,g,q.agent,q.PublicAgent,w)}function gn(u,g,w,O){const z=y(u,q.allOf).map(Ye=>O.rules.find(Lt=>Rr(Lt)===Ye)).some(Ye=>wn(Ye,g,w)),de=y(u,q.anyOf).map(Ye=>O.rules.find(Lt=>Rr(Lt)===Ye)).some(Ye=>wn(Ye,g,w)),Ve=y(u,q.noneOf).map(Ye=>O.rules.find(Lt=>Rr(Lt)===Ye)).some(Ye=>wn(Ye,g,w));return z||de||Ve}function wn(u,g,w){const O=[];return Ba.forEach(L=>{const z=y(u,L).filter(ee=>ee!==w||L!==g);O.push(...z)}),O.length>0}function Ln(u,g,w,O,L){const z=c.v4(),ee=$i(y(u,q.allOf),g,w,z,O,L),de=$i(y(u,q.anyOf),g,w,z,O,L),ke=$i(y(u,q.noneOf),g,w,z,O,L);let Ve=ea(g,encodeURI(Rr(u))+z);return y(u,q.allow).forEach(Ye=>{Ve=Ft(Ve,q.allow,Ye)}),y(u,q.deny).forEach(Ye=>{Ve=Ft(Ve,q.deny,Ye)}),ee.forEach(Ye=>{Ve=Ft(Ve,q.allOf,Ye)}),de.forEach(Ye=>{Ve=Ft(Ve,q.anyOf,Ye)}),ke.forEach(Ye=>{Ve=Ft(Ve,q.noneOf,Ye)}),[Ve,ee.concat(de).concat(ke)]}function $i(u,g,w,O,L,z){return u.map(ee=>{const de=w.rules.find(Ye=>Rr(Ye)===ee);if(typeof de>"u")return null;let ke=uc(g,encodeURI(Rr(de))+O),Ve=!1;return Ba.forEach(Ye=>{y(de,Ye).forEach(Lt=>{Ye===L&&Lt===z||(Ve=!0,ke=Ft(ke,Ye,Lt))})}),Ve?ke:null}).filter(no)}function no(u){return u!==null}async function ba(u,g=ge){const w=Da(u),O=eo(u),L=Ao(w).concat(Ao(O)),z=await oi(L,g),ee=Ro(w,z).filter(no),de=Ro(O,z).filter(no),ke=new Set;ee.forEach(Wr=>{ys(Wr).forEach(Hn=>{ke.add(Hn)})}),de.forEach(Wr=>{ys(Wr).forEach(Hn=>{ke.add(Hn)})});const Ve=Array.from(ke),Lt=Ve.map(Wr=>Lc(Wr)).filter(Wr=>!L.includes(Wr)),Kt=await oi(Lt,g),rr={...z,...Kt},Pr=Ro(Ve,rr).filter(no);return{inaccessibleUrls:Object.keys(rr).filter(Wr=>rr[Wr]===null),acrPolicies:ee,policies:de,rules:Pr}}function Lc(u){const g=new URL(u);return g.hash="",g.href}function Ao(u){const g=[];return u.forEach(w=>{const O=Lc(w);g.includes(O)||g.push(O)}),g}async function oi(u,g){const w=Array.from(new Set(u)),O={};return await Promise.all(w.map(async L=>{try{const z=await qn(L,g);O[L]=z}catch{O[L]=null}})),O}function Ro(u,g){return u.map(w=>{const O=Lc(w),L=g[O];return L?fr(L,w):null})}function ys(u){return Lo(u).concat(fs(u)).concat(vo(u))}function td(u,g){var w,O,L,z;if(u.controlRead!==u.controlWrite)throw new Error("For Pods using Web Access Control, controlRead and controlWrite must be equal.");return{read:(w=u.read)!==null&&w!==void 0?w:g.read,append:(O=u.append)!==null&&O!==void 0?O:g.append,write:(L=u.write)!==null&&L!==void 0?L:g.write,control:(z=u.controlRead)!==null&&z!==void 0?z:g.control}}function na(u){return{read:u.read,write:u.write,append:u.append,controlRead:u.control,controlWrite:u.control}}async function bl(u,g,w,O){const L=await Ki(u,O),z=w(Zi(u,L),g);return z===null?null:na(z)}async function Mc(u,g,w){const O=await Ki(u,w),L=g(Zi(u,O));return L===null?null:na(L)}async function qi(u,g,w){const O=await Ki(u,w),L=g(Zi(u,O));if(L===null)return null;const z={};for(const[ee,de]of Object.entries(L))z[ee]=na(de);return z}function ms(u,g,w=ge){return bl(u,g,Ku,w)}function rd(u,g,w=ge){return bl(u,g,qu,w)}function Ko(u,g=ge){return Mc(u,Sf,g)}function ou(u,g=ge){return qi(u,Bs,g)}function vs(u,g=ge){return qi(u,wf,g)}async function Ai(u,g){if(!Xn(u))return null;const w=await Ki(u,g),O=Zi(u,w);let L;if(da(O))L=vf(O);else if(pi(O))L=Ld(O);else return null;return mf(O,L)}async function Go(u,g,w){let O=null;try{return O=await Vu(u,g,w),mf(u,O)}catch{return null}}async function su(u,g,w,O,L){const z=await Ai(u,L);if(z===null)return null;const ee=Hu(z),de=w(z),ke=td(g,de),Ve=O(ee,ke);return Go(z,Ve,L)}async function wl(u,g,w,O,L,z){const ee=await Ai(u,z);if(ee===null)return null;const de=O(ee,g),ke=Hu(ee),Ve=td(w,de),Ye=L(ke,g,Ve);return Go(ee,Ye,z)}async function kc(u,g,w,O=ge){return wl(u,g,w,Ku,$u,O)}async function wh(u,g,w,O=ge){return wl(u,g,w,qu,ts,O)}async function nd(u,g,w=ge){return su(u,g,Sf,kd,w)}var Bc=Object.freeze({__proto__:null,getAccessFor:Hc,getAccessForAll:zi,getAgentAccess:Di,getAgentAccessAll:od,getGroupAccess:sd,getGroupAccessAll:xo,getPublicAccess:uu,setAccessFor:id,setAgentAccess:ad,setGroupAccess:lu,setPublicAccess:bs});async function Hc(u,g,w=ge,O=ge){if(g==="agent"){if(typeof w!="string")throw new Error("When reading Agent-specific access, the given agent cannot be left undefined.");return Di(u,w,O)}if(g==="group"){if(typeof w!="string")throw new Error("When reading Group-specific access, the given group cannot be left undefined.");return sd(u,w,O)}if(g==="public"){if(typeof w=="string")throw new Error(`When reading public access, no actor type should be specified (here [${w}]).`);return uu(u,w)}return null}async function zi(u,g,w=ge){return g==="agent"?od(u,w):g==="group"?xo(u,w):null}async function id(u,g,w,O=ge,L=ge){if(g==="agent"){if(typeof O!="string")throw new Error("When writing Agent-specific access, the given agent cannot be left undefined.");return ad(u,O,w,L)}if(g==="group"){if(typeof O!="string")throw new Error("When writing Group-specific access, the given group cannot be left undefined.");return lu(u,O,w,L)}if(g==="public"){if(typeof O=="string")throw new Error(`When writing public access, no actor type should be specified (here [${O}]).`);return bs(u,w,O)}return null}async function Di(u,g,w=ge){const O=await gi(u,w);if(bn(O)){const L=await ba(O,w);return au(L,g)}return Xn(O)?ms(O,g,w):null}async function ad(u,g,w,O=ge){const L=await gi(u,O);if(bn(L)){const z=await ba(L,O),ee=Sm(L,z,g,w);if(ee)try{return await Gi(ee,O),await Di(u,g,O)}catch{return null}return null}if(Xn(L)){if(w.controlRead!==w.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${tt(L)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await kc(L,g,w,O),ms(L,g,O)}return null}async function od(u,g=ge){const w=await gi(u,g);if(bn(w)){const O=await ba(w,g);return Dg(O)}return Xn(w)?ou(w,g):null}async function sd(u,g,w=ge){const O=await gi(u,w);if(bn(O)){const L=await ba(O,w);return Fc(L,g)}return Xn(O)?rd(O,g,w):null}async function xo(u,g=ge){const w=await gi(u,g);if(bn(w)){const O=await ba(w,g);return ed(O)}return Xn(w)?vs(w,g):null}async function lu(u,g,w,O=ge){const L=await gi(u,O);if(bn(L)){const z=await ba(L,O),ee=Bn(L,z,g,w);if(ee)try{return await Gi(ee,O),await sd(u,g,O)}catch{return null}return null}if(Xn(L)){if(w.controlRead!==w.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${tt(L)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await wh(L,g,w,O),rd(L,g,O)}return null}async function uu(u,g=ge){const w=await gi(u,g);if(bn(w)){const O=await ba(w,g);return Dc(O)}return Xn(w)?Ko(w,g):null}async function bs(u,g,w=ge){const O=await gi(u,w);if(bn(O)){const L=await ba(O,w),z=Yn(O,L,g);if(z)try{return await Gi(z,w),await uu(u,w)}catch{return null}return null}if(Xn(O)){if(g.controlRead!==g.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${tt(O)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await nd(O,g,w),Ko(O,w)}return null}var Ug=Object.freeze({__proto__:null,getAccessFor:Hc,getAccessForAll:zi,getAgentAccess:Di,getAgentAccessAll:od,getGroupAccess:sd,getGroupAccessAll:xo,getPublicAccess:uu,setAccessFor:id,setAgentAccess:ad,setGroupAccess:lu,setPublicAccess:bs});const _h=[q.agent];function cu(u,g,w){if(u.inaccessibleUrls.length>0)return null;const O=u.acrPolicies.filter(Ye=>ld(Ye,g,w,u)),L=u.policies.filter(Ye=>ld(Ye,g,w,u)),z={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},ee=O.reduce((Ye,Lt)=>{const Kt={...Ye},rr=Ec(Lt);return rr.read&&(Kt.controlRead=!0),rr.write&&(Kt.controlWrite=!0),Kt},z),de=L.reduce((Ye,Lt)=>{const Kt={...Ye},rr=Ec(Lt);return rr.read&&(Kt.read=!0),rr.append&&(Kt.append=!0),rr.write&&(Kt.write=!0),Kt},ee),ke=O.reduce((Ye,Lt)=>{const Kt={...Ye},rr=Lf(Lt);return rr.read===!0&&(Kt.controlRead=!1),rr.write===!0&&(Kt.controlWrite=!1),Kt},de);return L.reduce((Ye,Lt)=>{const Kt={...Ye},rr=Lf(Lt);return rr.read===!0&&(Kt.read=!1),rr.append===!0&&(Kt.append=!1),rr.write===!0&&(Kt.write=!1),Kt},ke)}function Sh(u,g){return cu(u,q.agent,g)}function Eh(u){return cu(u,q.agent,q.PublicAgent)}function ld(u,g,w,O){const L=y(u,q.allow),z=y(u,q.deny);if(L.length+z.length===0)return!1;const ee=Oc(u).map(Ve=>O.matchers.find(Ye=>Rr(Ye)===Ve)),de=qf(u).map(Ve=>O.matchers.find(Ye=>Rr(Ye)===Ve)),ke=to(u).map(Ve=>O.matchers.find(Ye=>Rr(Ye)===Ve));return ee.every(Ve=>Mg(Ve,g,w))&&(de.length===0||de.some(Ve=>Mg(Ve,g,w)))&&ee.length+de.length>0&&ke.length===0}function Lg(u,g){const w=y(u,q.allow),O=y(u,q.deny);return g.read===!0&&O.includes(Pn.read)||g.read===!1&&w.includes(Pn.read)&&!O.includes(Pn.read)||g.append===!0&&O.includes(Pn.append)||g.append===!1&&w.includes(Pn.append)&&!O.includes(Pn.append)||g.write===!0&&O.includes(Pn.write)||g.write===!1&&w.includes(Pn.write)&&!O.includes(Pn.write)}function Mg(u,g,w){return y(u,g).includes(w)}function kg(u,g){const w=new Set;return u.matchers.forEach(O=>{y(O,g).filter(L=>![q.PublicAgent,q.CreatorAgent,q.AuthenticatedAgent].includes(L)||g!==q.agent).forEach(L=>w.add(L))}),w}function Bg(u,g){if(u.inaccessibleUrls.length>0)return null;const w={};return kg(u,g).forEach(L=>{const z=cu(u,g,L);w[L]=z}),w}function fu(u){return Bg(u,q.agent)}function jc(u,g,w,O,L){var z,ee,de,ke,Ve;if(!bn(u)||g.inaccessibleUrls.length>0)return null;const Ye=cu(g,w,O);if(Ye===null)return null;const Lt=g.acrPolicies.filter(Tr=>ld(Tr,w,O,g)),Kt=g.policies.filter(Tr=>ld(Tr,w,O,g)),rr=Lt.filter(Tr=>Lg(Tr,{read:L.controlRead,write:L.controlWrite})),Pr=Kt.filter(Tr=>Lg(Tr,{read:L.read,append:L.append,write:L.write})),ln=rr.filter(Tr=>Ah(Tr,w,O,g)),Wr=Pr.filter(Tr=>Ah(Tr,w,O,g)),Ha={...g,acrPolicies:g.acrPolicies.filter(Tr=>!ln.includes(Tr)),policies:g.policies.filter(Tr=>!Wr.includes(Tr))},Hn=cu(Ha,w,O);if(Hn===null)return null;let Sr=u;ln.forEach(Tr=>{const[an,$o]=Rh(Tr,u,g,w,O);Sr=Ti(Sr,an),Sr=$o.reduce(jo,Sr)}),Wr.forEach(Tr=>{const[an,$o]=Rh(Tr,u,g,w,O);Sr=pl(Sr,an),Sr=$o.reduce(jo,Sr)});const Ui=`matcher_${encodeURIComponent(`${w}_${O}`)}`;let mi=Ic(u,Ui);mi=hn(mi,w,O);const ia=(z=L.controlRead)!==null&&z!==void 0?z:Ye.controlRead,Li=(ee=L.controlWrite)!==null&&ee!==void 0?ee:Ye.controlWrite;let ws=ln;if(ia!==Hn.controlRead||Li!==Hn.controlWrite){const Tr=c.v4();let an=ea(u,Tr);an=fl(an,{read:ia===!0,append:!1,write:Li===!0}),an=Ft(an,q.allOf,mi),Sr=Ti(Sr,an),Sr=jo(Sr,mi),ws=rr}const ao=(de=L.read)!==null&&de!==void 0?de:Ye.read,Wc=(ke=L.append)!==null&&ke!==void 0?ke:Ye.append,Jc=(Ve=L.write)!==null&&Ve!==void 0?Ve:Ye.write;let El=Wr;if(ao!==Hn.read||Wc!==Hn.append||Jc!==Hn.write){const Tr=c.v4();let an=ea(u,Tr);an=fl(an,{read:ao===!0,append:Wc===!0,write:Jc===!0}),an=Ft(an,q.allOf,mi),Sr=pl(Sr,an),Sr=jo(Sr,mi),El=Pr}return ws.forEach(Tr=>{Sr=ho(Sr,Rr(Tr))}),El.forEach(Tr=>{Sr=ga(Sr,Rr(Tr))}),Sr}function Hg(u,g,w,O){return jc(u,g,q.agent,w,O)}function jg(u,g,w){return jc(u,g,q.agent,q.PublicAgent,w)}function Ah(u,g,w,O){const z=y(u,q.allOf).map(Ye=>O.matchers.find(Lt=>Rr(Lt)===Ye)).some(Ye=>ud(Ye,g,w)),de=y(u,q.anyOf).map(Ye=>O.matchers.find(Lt=>Rr(Lt)===Ye)).some(Ye=>ud(Ye,g,w)),Ve=y(u,q.noneOf).map(Ye=>O.matchers.find(Lt=>Rr(Lt)===Ye)).some(Ye=>ud(Ye,g,w));return z||de||Ve}function ud(u,g,w){const O=[];return _h.forEach(L=>{const z=y(u,L).filter(ee=>ee!==w||L!==g);O.push(...z)}),O.length>0}function Rh(u,g,w,O,L){const z=c.v4(),ee=cd(y(u,q.allOf),g,w,z,O,L),de=cd(y(u,q.anyOf),g,w,z,O,L),ke=cd(y(u,q.noneOf),g,w,z,O,L);let Ve=ea(g,encodeURI(Rr(u))+z);return y(u,q.allow).forEach(Ye=>{Ve=Ft(Ve,q.allow,Ye)}),y(u,q.deny).forEach(Ye=>{Ve=Ft(Ve,q.deny,Ye)}),ee.forEach(Ye=>{Ve=Ft(Ve,q.allOf,Ye)}),de.forEach(Ye=>{Ve=Ft(Ve,q.anyOf,Ye)}),ke.forEach(Ye=>{Ve=Ft(Ve,q.noneOf,Ye)}),[Ve,ee.concat(de).concat(ke)]}function cd(u,g,w,O,L,z){return u.map(ee=>{const de=w.matchers.find(Ye=>Rr(Ye)===ee);if(typeof de>"u")return null;let ke=Ic(g,encodeURI(Rr(de))+O),Ve=!1;return _h.forEach(Ye=>{y(de,Ye).forEach(Lt=>{Ye===L&&Lt===z||(Ve=!0,ke=Ft(ke,Ye,Lt))})}),Ve?ke:null}).filter(_l)}function _l(u){return u!==null}async function du(u,g=ge){const w=Da(u),O=eo(u),L=Kn(w).concat(Kn(O)),z=await dd(L,g),ee=xh(w,z).filter(_l),de=xh(O,z).filter(_l),ke=new Set;ee.forEach(Wr=>{Th(Wr).forEach(Hn=>{ke.add(Hn)})}),de.forEach(Wr=>{Th(Wr).forEach(Hn=>{ke.add(Hn)})});const Ve=Array.from(ke),Lt=Ve.map(Wr=>fd(Wr)).filter(Wr=>!L.includes(Wr)),Kt=await dd(Lt,g),rr={...z,...Kt},Pr=xh(Ve,rr).filter(_l);return{inaccessibleUrls:Object.keys(rr).filter(Wr=>rr[Wr]===null),acrPolicies:ee,policies:de,matchers:Pr}}function fd(u){const g=new URL(u);return g.hash="",g.href}function Kn(u){const g=[];return u.forEach(w=>{const O=fd(w);g.includes(O)||g.push(O)}),g}async function dd(u,g){const w=Array.from(new Set(u)),O={};return await Promise.all(w.map(async L=>{try{const z=await qn(L,g);O[L]=z}catch{O[L]=null}})),O}function xh(u,g){return u.map(w=>{const O=fd(w),L=g[O];return L?fr(L,w):null})}function Th(u){return Oc(u).concat(qf(u)).concat(to(u))}async function Vg(u,g,w=ge){const O=await gi(u,w);if(bn(O)){const L=await du(O,w);return Sh(L,g)}return Xn(O)?ms(O,g,w):null}async function Em(u,g,w,O=ge){const L=await gi(u,O);if(bn(L)){const z=await du(L,O),ee=Hg(L,z,g,w);if(ee)try{return await Gi(ee,O),await Vg(u,g,O)}catch{return null}return null}if(Xn(L)){if(w.controlRead!==w.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${tt(L)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await kc(L,g,w,O),ms(L,g,O)}return null}async function Am(u,g=ge){const w=await gi(u,g);if(bn(w)){const O=await du(w,g);return fu(O)}return Xn(w)?ou(w,g):null}async function Vc(u,g=ge){const w=await gi(u,g);if(bn(w)){const O=await du(w,g);return Eh(O)}return Xn(w)?Ko(w,g):null}async function hu(u,g,w=ge){const O=await gi(u,w);if(bn(O)){const L=await du(O,w),z=jg(O,L,g);if(z)try{return await Gi(z,w),await Vc(u,w)}catch{return null}return null}if(Xn(O)){if(g.controlRead!==g.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${tt(O)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await nd(O,g,w),Ko(O,w)}return null}var Ch=Object.freeze({__proto__:null,getAccessFor:Hc,getAccessForAll:zi,getAgentAccess:Vg,getAgentAccessAll:Am,getPublicAccess:Vc,setAccessFor:id,setAgentAccess:Em,setPublicAccess:hu});async function Kc(u,g){if(typeof u.internal_resourceInfo.aclUrl!="string")return null;try{return await Se(u.internal_resourceInfo.aclUrl,g)}catch{return null}}function Oh(u){return ni(u,Ir.allow)}function Sl(u){return ni(u,Ir.deny)}function io(u,g,w){const O=v(g,Ir.allOf).map(Ve=>fr(gr(u),Ve)).filter(Ve=>Ve!==null),L=O.every(Ve=>v(Ve,Ir.agent).includes(w)),z=v(g,Ir.anyOf).map(Ve=>fr(gr(u),Ve)).filter(Ve=>Ve!==null),ee=z.some(Ve=>v(Ve,Ir.agent).includes(w)),de=v(g,Ir.noneOf).map(Ve=>fr(gr(u),Ve)).filter(Ve=>Ve!==null),ke=de.some(Ve=>v(Ve,Ir.agent).includes(w));return O.length+z.length>0&&(O.length===0||L)&&(z.length===0||ee)&&(de.length===0||!ke)}function pu(u,g,w){const O=Oh(u),L=Sl(u);return w==="control"?{read:g.read,append:g.append,write:g.write,controlRead:(g.controlRead||O.read)&&!L.read,controlWrite:(g.controlWrite||O.write)&&!L.write}:{read:(g.read||O.read)&&!L.read,append:(g.append||O.append)&&!L.append,write:(g.write||O.write)&&!L.write,controlRead:g.controlRead,controlWrite:g.controlWrite}}async function hd(u,g){let w={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1};return Zl(u).map(z=>fr(gr(u),z)).filter(z=>z!==null).forEach(z=>{io(u,z,g)&&(w=pu(z,w,"resource"))}),Cc(u).map(z=>fr(gr(u),z)).filter(z=>z!==null).forEach(z=>{io(u,z,g)&&(w=pu(z,w,"control"))}),w}function Kg(u){const g=u.internal_resourceInfo.linkedResources[Ir.accessControl];return Array.isArray(g)&&g.length===1?g[0]:null}async function Gg(u,g){const w=Kg(u);if(w!==null)return w;const O=await Kc(u,g);if(O===null)return null;const L=Xe(O).type;return Array.isArray(L)&&L.includes(Ir.AccessControlResource)?ve(O):null}async function gu(u,g){const w=await Gg(u,g);if(w===null)return null;let O;try{O=await qn(w,g)}catch{return null}return{...u,internal_acp:{acr:{...O,accessTo:ve(u)}}}}async function Ph(u,g,w){const O=await Se(u,w),L=await gu(O,w);return L===null?ms(O,g,w):hd(L,g)}function Rm(u){return Array.from(new Set(tn(gr(u)).map(g=>v(g,Ir.agent)).reduce((g,w)=>g.concat(w),[])))}async function Ih(u){return(await Promise.all(Rm(u).map(async g=>({[g]:await hd(u,g)})))).reduce((g,w)=>({...g,...w}),{})}async function $g(u,g){const w=await Se(u,g),O=await gu(w,g);return O===null?ou(w,g):Ih(O)}async function qg(u){return hd(u,Ir.PublicAgent)}async function zg(u,g){const w=await Se(u,g),O=await gu(w,g);return O===null?Ko(w,g):qg(O)}function Gc(u,g,w){return nn(u,g).concat("AgentMatcher").concat(w.charAt(0).toUpperCase()+w.slice(1)).concat("Policy")}function Nh(u,g,w){const O=Gc(u,g,w);return O.includes("Acr")?Ql(u,O):jf(u,O)}function Wg(u,g,w){return Gc(u,g,w).concat("Matcher")}const Jg=Ir.anyOf;function $c(u,g,w){const O=Gc(u,g,w),L=Wg(u,g,w);let z=fr(gr(u),O);return z||(u=Nh(u,g,w),z=Yr({url:O}),z=Zs(z,{[w]:!0},Ir.allow)),y(z,Jg).includes(L)?u:(z=Oa(z).addUrl(Jg,L).build(),ma(u,z))}function qc(u,g,w,O,L){var z;const ee=Wg(u,w,O),de=$c(u,w,O),ke=(z=fr(gr(de),ee))!==null&&z!==void 0?z:Yr({url:ee});return ma(de,L==="add"?ai(ke,g):Nc(ke,g))}async function Fh(u,g,w){const O=await hd(u,g);return typeof w.read=="boolean"&&O.read!==w.read&&(u=qc(u,g,Qs,"read",w.read?"add":"remove")),typeof w.append=="boolean"&&O.append!==w.append&&(u=qc(u,g,Qs,"append",w.append?"add":"remove")),typeof w.write=="boolean"&&O.write!==w.write&&(u=qc(u,g,Qs,"write",w.write?"add":"remove")),typeof w.controlRead=="boolean"&&O.controlRead!==w.controlRead&&(u=qc(u,g,Xs,"controlRead",w.controlRead?"add":"remove")),typeof w.controlWrite=="boolean"&&O.controlWrite!==w.controlWrite&&(u=qc(u,g,Xs,"controlWrite",w.controlWrite?"add":"remove")),u}async function mn(u,g,w,O){const L=await Se(u,O),z=await gu(L,O);if(z===null)return await kc(L,g,w,O),ms(L,g,O);try{return await Gi(await Fh(z,g,w),O),await Ph(u,g,O)}catch{return null}}async function Dh(u,g){return Fh(u,Ir.PublicAgent,g)}async function pd(u,g,w){const O=await Se(u,w),L=await gu(O,w);if(L===null)return await nd(O,g,w),Ko(O,w);try{return await Gi(await Dh(L,g),w),await zg(u,w)}catch{return null}}var Uh=Object.freeze({__proto__:null,getAclServerResourceInfo:Kc,getAgentAccess:Ph,getAgentAccessAll:$g,getPublicAccess:zg,setAgentAccess:mn,setPublicAccess:pd}),Yg=Object.freeze({__proto__:null,acrAsMarkdown:Zu,addAcrPolicyUrl:Hl,addAgent:Mo,addAllOfRuleUrl:Ua,addAnyOfRuleUrl:ic,addClient:Rg,addGroup:ds,addMemberAcrPolicyUrl:$s,addMemberPolicyUrl:go,addMockAcrTo:gl,addNoneOfRuleUrl:sc,addPolicyUrl:Xu,createPolicy:Wl,createResourcePolicyFor:ea,createResourceRuleFor:uc,createRule:Of,getAcrPolicyUrlAll:Da,getAgentAll:hc,getAllOfRuleUrlAll:Lo,getAllowModes:wo,getAnyOfRuleUrlAll:fs,getClientAll:Nf,getDenyModes:La,getFileWithAccessDatasets:ss,getFileWithAcr:tl,getGroupAll:zl,getLinkedAcrUrl:Kl,getMemberAcrPolicyUrlAll:qs,getMemberPolicyUrlAll:Ws,getNoneOfRuleUrlAll:vo,getPolicy:Jl,getPolicyAll:cl,getPolicyUrlAll:eo,getReferencedPolicyUrlAll:us,getResourceAcrPolicy:ko,getResourceAcrPolicyAll:Rc,getResourceInfoWithAccessDatasets:ls,getResourceInfoWithAcr:gi,getResourcePolicy:ps,getResourcePolicyAll:hl,getResourceRule:Pf,getResourceRuleAll:qd,getRule:cc,getRuleAll:ql,getSolidDatasetWithAccessDatasets:Vl,getSolidDatasetWithAcr:os,hasAccessibleAcr:bn,hasAnyClient:_c,hasAuthenticated:sl,hasCreator:ll,hasLinkedAcr:Za,hasPublic:ol,isAcpControlled:cs,mockAcrFor:ta,policyAsMarkdown:ya,removeAcrPolicyUrl:ho,removeAcrPolicyUrlAll:po,removeAgent:il,removeAllOfRuleUrl:rl,removeAnyClient:Uf,removeAnyOfRuleUrl:ac,removeAuthenticated:vc,removeClient:Ff,removeCreator:wc,removeGroup:gc,removeMemberAcrPolicyUrl:Qu,removeMemberAcrPolicyUrlAll:zs,removeMemberPolicyUrl:yo,removeMemberPolicyUrlAll:Js,removeNoneOfRuleUrl:lc,removePolicy:bo,removePolicyUrl:ga,removePolicyUrlAll:Uo,removePublic:If,removeResourceAcrPolicy:Bo,removeResourcePolicy:xc,removeResourceRule:zd,removeRule:fc,ruleAsMarkdown:Sc,saveAcrFor:Gi,setAgent:pc,setAllOfRuleUrl:Gl,setAllowModes:dl,setAnyClient:Df,setAnyOfRuleUrl:oc,setAuthenticated:mc,setClient:Wd,setCreator:bc,setDenyModes:Ac,setGroup:al,setNoneOfRuleUrl:$l,setPolicy:hs,setPublic:yc,setResourceAcrPolicy:Ti,setResourcePolicy:pl,setResourceRule:nl,setRule:dc}),Lh=Object.freeze({__proto__:null,addAcrPolicyUrl:Ql,addAgent:ai,addAllOfMatcherUrl:Pg,addAnyOfMatcherUrl:Pc,addClient:Zf,addMemberAcrPolicyUrl:Hf,addMemberPolicyUrl:th,addMockAcrTo:gl,addNoneOfMatcherUrl:Ig,addPolicyUrl:jf,createMatcher:lh,createPolicy:Wl,createResourceMatcherFor:Ic,createResourcePolicyFor:ea,getAcrPolicyUrlAll:Cc,getAgentAll:fh,getAllOfMatcherUrlAll:Oc,getAllowModes:Ec,getAnyOfMatcherUrlAll:qf,getClientAll:hh,getDenyModes:Lf,getFileWithAccessDatasets:ss,getFileWithAcr:tl,getLinkedAcrUrl:Kl,getMatcher:nu,getMatcherAll:uh,getMemberAcrPolicyUrlAll:nh,getMemberPolicyUrlAll:Kf,getNoneOfMatcherUrlAll:to,getPolicy:Jl,getPolicyAll:cl,getPolicyUrlAll:Zl,getReferencedPolicyUrlAll:us,getResourceAcrPolicy:ko,getResourceAcrPolicyAll:Rc,getResourceInfoWithAccessDatasets:ls,getResourceInfoWithAcr:gi,getResourceMatcher:Ma,getResourceMatcherAll:zf,getResourcePolicy:ps,getResourcePolicyAll:hl,getSolidDatasetWithAccessDatasets:Vl,getSolidDatasetWithAcr:os,getVcAccess:Cf,hasAccessibleAcr:bn,hasAuthenticated:Qf,hasCreator:Fi,hasLinkedAcr:Za,hasPublic:Yf,isAcpControlled:cs,mockAcrFor:ta,removeAcrPolicyUrl:Gf,removeAcrPolicyUrlAll:po,removeAgent:Nc,removeAllOfMatcherUrl:oh,removeAnyOfMatcherUrl:tu,removeAuthenticated:Zn,removeClient:ra,removeCreator:dh,removeMatcher:ch,removeMemberAcrPolicyUrl:ih,removeMemberAcrPolicyUrlAll:zs,removeMemberPolicyUrl:$f,removeMemberPolicyUrlAll:Js,removeNoneOfMatcherUrl:sh,removePolicy:bo,removePolicyUrl:ah,removePolicyUrlAll:Uo,removePublic:Ng,removeResourceAcrPolicy:Bo,removeResourceMatcher:Wf,removeResourcePolicy:xc,saveAcrFor:Gi,setAgent:Eo,setAllOfMatcherUrl:So,setAllowModes:fl,setAnyOfMatcherUrl:ei,setAuthenticated:Xf,setCreator:ro,setDenyModes:Jd,setMatcher:Jf,setNoneOfMatcherUrl:ru,setPolicy:hs,setPublic:yi,setResourceMatcher:jo,setResourcePolicy:_o,setVcAccess:el});const{getJsonLdParser:zc,getTurtleParser:gd,solidDatasetAsTurtle:yu}=yr;return rt.FetchError=dt,rt.SolidClientError=b,rt.ThingExpectedError=Xi,rt.access=Bc,rt.access_v1=Ug,rt.access_v2=Ch,rt.acp_ess_1=Yg,rt.acp_ess_2=Lh,rt.acp_v1=Tg,rt.acp_v2=Bf,rt.acp_v3=Og,rt.acp_v4=gh,rt.addBoolean=Or,rt.addDate=Ur,rt.addDatetime=yn,rt.addDecimal=sn,rt.addInteger=On,rt.addIri=Ft,rt.addJwkToJwks=ns,rt.addLiteral=xr,rt.addMockFallbackAclTo=Fo,rt.addMockResourceAclTo=rs,rt.addNamedNode=di,rt.addPublicKeyToProfileJwks=Ii,rt.addStringEnglish=wr,rt.addStringNoLocale=zn,rt.addStringWithLocale=jr,rt.addTerm=kn,rt.addTime=dn,rt.addUrl=zr,rt.asIri=Rr,rt.asUrl=vn,rt.buildThing=Oa,rt.changeLogAsMarkdown=zt,rt.createAcl=Na,rt.createAclFromFallbackAcl=Ld,rt.createContainerAt=ne,rt.createContainerInContainer=He,rt.createSolidDataset=$n,rt.createThing=Yr,rt.deleteAclFor=ks,rt.deleteContainer=Rt,rt.deleteFile=pr,rt.deleteSolidDataset=te,rt.fromRdfJsDataset=Nr,rt.getAgentAccess=Ku,rt.getAgentAccessAll=Bs,rt.getAgentDefaultAccess=ha,rt.getAgentDefaultAccessAll=pa,rt.getAgentResourceAccess=Hs,rt.getAgentResourceAccessAll=Gu,rt.getAltProfileUrlAllFrom=Wu,rt.getBoolean=S,rt.getBooleanAll=C,rt.getContainedResourceUrlAll=Ot,rt.getContentType=gt,rt.getDate=oe,rt.getDateAll=be,rt.getDatetime=H,rt.getDatetimeAll=X,rt.getDecimal=Ee,rt.getDecimalAll=Ae,rt.getEffectiveAccess=je,rt.getFallbackAcl=ju,rt.getFile=Gr,rt.getFileWithAcl=bf,rt.getGroupAccess=qu,rt.getGroupAccessAll=wf,rt.getGroupDefaultAccess=In,rt.getGroupDefaultAccessAll=es,rt.getGroupResourceAccess=Pi,rt.getGroupResourceAccessAll=ri,rt.getInteger=De,rt.getIntegerAll=Ge,rt.getIri=ci,rt.getIriAll=y,rt.getJsonLdParser=zc,rt.getLinkedResourceUrlAll=Xe,rt.getLiteral=cr,rt.getLiteralAll=Bt,rt.getNamedNode=ut,rt.getNamedNodeAll=Et,rt.getPodOwner=J,rt.getPodUrlAll=dm,rt.getPodUrlAllFrom=Sg,rt.getProfileAll=Hd,rt.getProfileJwksIri=kl,rt.getPropertyAll=Ra,rt.getPublicAccess=Sf,rt.getPublicDefaultAccess=Ml,rt.getPublicResourceAccess=Ll,rt.getResourceAcl=Hu,rt.getResourceInfo=Se,rt.getResourceInfoWithAcl=Ul,rt.getSolidDataset=qn,rt.getSolidDatasetWithAcl=wg,rt.getSourceIri=tt,rt.getSourceUrl=ve,rt.getStringByLocaleAll=_e,rt.getStringEnglish=nt,rt.getStringEnglishAll=_t,rt.getStringNoLocale=Pe,rt.getStringNoLocaleAll=Fe,rt.getStringWithLocale=pt,rt.getStringWithLocaleAll=ae,rt.getTerm=$r,rt.getTermAll=sr,rt.getThing=fr,rt.getThingAll=tn,rt.getTime=he,rt.getTimeAll=me,rt.getTurtleParser=gd,rt.getUrl=Qi,rt.getUrlAll=v,rt.getWebIdDataset=hm,rt.getWellKnownSolid=br,rt.hasAccessibleAcl=Xn,rt.hasAcl=Ud,rt.hasFallbackAcl=pi,rt.hasResourceAcl=da,rt.hasResourceInfo=p,rt.hasServerResourceInfo=f,rt.isContainer=st,rt.isPodOwner=xe,rt.isRawData=Ne,rt.isThing=Zr,rt.isThingLocal=Ei,rt.mockContainerFrom=Mr,rt.mockFetchError=Lr,rt.mockFileFrom=dr,rt.mockSolidDatasetFrom=Yt,rt.mockThingFrom=Id,rt.overwriteFile=Gt,rt.removeAll=Qr,rt.removeBoolean=Ta,rt.removeDate=Ps,rt.removeDatetime=Mu,rt.removeDecimal=qa,rt.removeInteger=Qo,rt.removeIri=rn,rt.removeLiteral=Is,rt.removeNamedNode=Il,rt.removeStringEnglish=ff,rt.removeStringNoLocale=Io,rt.removeStringWithLocale=ca,rt.removeThing=Tn,rt.removeTime=ku,rt.removeUrl=Vn,rt.responseToResourceInfo=et,rt.responseToSolidDataset=xa,rt.saveAclFor=Vu,rt.saveFileInContainer=or,rt.saveSolidDatasetAt=U,rt.saveSolidDatasetInContainer=ye,rt.setAgentDefaultAccess=js,rt.setAgentResourceAccess=$u,rt.setBoolean=Ns,rt.setDate=Fs,rt.setDatetime=df,rt.setDecimal=Bu,rt.setGroupDefaultAccess=_g,rt.setGroupResourceAccess=ts,rt.setInteger=hf,rt.setIri=hn,rt.setLiteral=Nl,rt.setNamedNode=Ds,rt.setProfileJwks=Bd,rt.setPublicDefaultAccess=zu,rt.setPublicResourceAccess=kd,rt.setStringNoLocale=Wa,rt.setStringWithLocale=xi,rt.setTerm=Pd,rt.setThing=Xr,rt.setTime=ti,rt.setUrl=Ca,rt.solidDatasetAsMarkdown=jt,rt.solidDatasetAsTurtle=yu,rt.thingAsMarkdown=jn,rt.toRdfJsDataset=Vt,rt.universalAccess=Uh,rt.validateContainedResourceAll=$t,rt}var L0={},on={};const fn=crypto,Ga=t=>t instanceof CryptoKey,LE=async(t,r)=>{const i=`SHA-${t.slice(-3)}`;return new Uint8Array(await fn.subtle.digest(i,r))},Si=new TextEncoder,Co=new TextDecoder,Dy=2**32;function Cs(...t){const r=t.reduce((s,{length:d})=>s+d,0),i=new Uint8Array(r);let a=0;return t.forEach(s=>{i.set(s,a),a+=s.length}),i}function Mx(t,r){return Cs(Si.encode(t),new Uint8Array([0]),r)}function Z0(t,r,i){if(r<0||r>=Dy)throw new RangeError(`value must be >= 0 and <= ${Dy-1}. Received ${r}`);t.set([r>>>24,r>>>16,r>>>8,r&255],i)}function ME(t){const r=Math.floor(t/Dy),i=t%Dy,a=new Uint8Array(8);return Z0(a,r,0),Z0(a,i,4),a}function kv(t){const r=new Uint8Array(4);return Z0(r,t),r}function M0(t){return Cs(kv(t.length),t)}async function kx(t,r,i){const a=Math.ceil((r>>3)/32),s=new Uint8Array(a*32);for(let d=0;d<a;d++){const l=new Uint8Array(4+t.length+i.length);l.set(kv(d+1)),l.set(t,4),l.set(i,4+t.length),s.set(await LE("sha256",l),d*32)}return s.slice(0,r>>3)}const Bv=t=>{let r=t;typeof r=="string"&&(r=Si.encode(r));const i=32768,a=[];for(let s=0;s<r.length;s+=i)a.push(String.fromCharCode.apply(null,r.subarray(s,s+i)));return btoa(a.join(""))},Ri=t=>Bv(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),kE=t=>{const r=atob(t),i=new Uint8Array(r.length);for(let a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return i},Oi=t=>{let r=t;r instanceof Uint8Array&&(r=Co.decode(r)),r=r.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return kE(r)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Hi extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(r){var i;super(r),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(i=Error.captureStackTrace)===null||i===void 0||i.call(Error,this,this.constructor)}}class ja extends Hi{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(r,i="unspecified",a="unspecified"){super(r),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=i,this.reason=a}}class ev extends Hi{static get code(){return"ERR_JWT_EXPIRED"}constructor(r,i="unspecified",a="unspecified"){super(r),this.code="ERR_JWT_EXPIRED",this.claim=i,this.reason=a}}class Uy extends Hi{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class Fn extends Hi{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class eg extends Hi{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class Bx extends Hi{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}class mr extends Hi{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class Wn extends Hi{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Va extends Hi{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class BE extends Hi{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class Zy extends Hi{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class Hv extends Hi{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class HE extends Hi{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class jE extends Hi{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class jv extends Hi{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const Hx=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:Uy,JOSEError:Hi,JOSENotSupported:Fn,JWEDecompressionFailed:Bx,JWEDecryptionFailed:eg,JWEInvalid:mr,JWKInvalid:BE,JWKSInvalid:Zy,JWKSMultipleMatchingKeys:HE,JWKSNoMatchingKey:Hv,JWKSTimeout:jE,JWSInvalid:Wn,JWSSignatureVerificationFailed:jv,JWTClaimValidationFailed:ja,JWTExpired:ev,JWTInvalid:Va},Symbol.toStringTag,{value:"Module"})),em=fn.getRandomValues.bind(fn);function VE(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Fn(`Unsupported JWE Algorithm: ${t}`)}}const KE=t=>em(new Uint8Array(VE(t)>>3)),GE=(t,r)=>{if(r.length<<3!==VE(t))throw new mr("Invalid Initialization Vector length")},Ly=(t,r)=>{const i=t.byteLength<<3;if(i!==r)throw new mr(`Invalid Content Encryption Key length. Expected ${r} bits, got ${i} bits`)},jx=(t,r)=>{if(!(t instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(r instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(t.length!==r.length)throw new TypeError("Input buffers must have the same length");const i=t.length;let a=0,s=-1;for(;++s<i;)a|=t[s]^r[s];return a===0};function Yi(t,r="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${r} must be ${t}`)}function Ou(t,r){return t.name===r}function Ty(t){return parseInt(t.name.slice(4),10)}function Vx(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function $E(t,r){if(r.length&&!r.some(i=>t.usages.includes(i))){let i="CryptoKey does not support this operation, its usages must include ";if(r.length>2){const a=r.pop();i+=`one of ${r.join(", ")}, or ${a}.`}else r.length===2?i+=`one of ${r[0]} or ${r[1]}.`:i+=`${r[0]}.`;throw new TypeError(i)}}function Kx(t,r,...i){switch(r){case"HS256":case"HS384":case"HS512":{if(!Ou(t.algorithm,"HMAC"))throw Yi("HMAC");const a=parseInt(r.slice(2),10);if(Ty(t.algorithm.hash)!==a)throw Yi(`SHA-${a}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Ou(t.algorithm,"RSASSA-PKCS1-v1_5"))throw Yi("RSASSA-PKCS1-v1_5");const a=parseInt(r.slice(2),10);if(Ty(t.algorithm.hash)!==a)throw Yi(`SHA-${a}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Ou(t.algorithm,"RSA-PSS"))throw Yi("RSA-PSS");const a=parseInt(r.slice(2),10);if(Ty(t.algorithm.hash)!==a)throw Yi(`SHA-${a}`,"algorithm.hash");break}case"EdDSA":{if(t.algorithm.name!=="Ed25519"&&t.algorithm.name!=="Ed448")throw Yi("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!Ou(t.algorithm,"ECDSA"))throw Yi("ECDSA");const a=Vx(r);if(t.algorithm.namedCurve!==a)throw Yi(a,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}$E(t,i)}function Nu(t,r,...i){switch(r){case"A128GCM":case"A192GCM":case"A256GCM":{if(!Ou(t.algorithm,"AES-GCM"))throw Yi("AES-GCM");const a=parseInt(r.slice(1,4),10);if(t.algorithm.length!==a)throw Yi(a,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!Ou(t.algorithm,"AES-KW"))throw Yi("AES-KW");const a=parseInt(r.slice(1,4),10);if(t.algorithm.length!==a)throw Yi(a,"algorithm.length");break}case"ECDH":{switch(t.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Yi("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!Ou(t.algorithm,"PBKDF2"))throw Yi("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!Ou(t.algorithm,"RSA-OAEP"))throw Yi("RSA-OAEP");const a=parseInt(r.slice(9),10)||1;if(Ty(t.algorithm.hash)!==a)throw Yi(`SHA-${a}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}$E(t,i)}function qE(t,r,...i){if(i.length>2){const a=i.pop();t+=`one of type ${i.join(", ")}, or ${a}.`}else i.length===2?t+=`one of type ${i[0]} or ${i[1]}.`:t+=`of type ${i[0]}.`;return r==null?t+=` Received ${r}`:typeof r=="function"&&r.name?t+=` Received function ${r.name}`:typeof r=="object"&&r!=null&&r.constructor&&r.constructor.name&&(t+=` Received an instance of ${r.constructor.name}`),t}const la=(t,...r)=>qE("Key must be ",t,...r);function zE(t,r,...i){return qE(`Key for the ${t} algorithm must be `,r,...i)}const WE=t=>Ga(t),vi=["CryptoKey"];async function Gx(t,r,i,a,s,d){if(!(r instanceof Uint8Array))throw new TypeError(la(r,"Uint8Array"));const l=parseInt(t.slice(1,4),10),c=await fn.subtle.importKey("raw",r.subarray(l>>3),"AES-CBC",!1,["decrypt"]),p=await fn.subtle.importKey("raw",r.subarray(0,l>>3),{hash:`SHA-${l<<1}`,name:"HMAC"},!1,["sign"]),f=Cs(d,a,i,ME(d.length<<3)),m=new Uint8Array((await fn.subtle.sign("HMAC",p,f)).slice(0,l>>3));let b;try{b=jx(s,m)}catch{}if(!b)throw new eg;let _;try{_=new Uint8Array(await fn.subtle.decrypt({iv:a,name:"AES-CBC"},c,i))}catch{}if(!_)throw new eg;return _}async function $x(t,r,i,a,s,d){let l;r instanceof Uint8Array?l=await fn.subtle.importKey("raw",r,"AES-GCM",!1,["decrypt"]):(Nu(r,t,"decrypt"),l=r);try{return new Uint8Array(await fn.subtle.decrypt({additionalData:d,iv:a,name:"AES-GCM",tagLength:128},l,Cs(i,s)))}catch{throw new eg}}const JE=async(t,r,i,a,s,d)=>{if(!Ga(r)&&!(r instanceof Uint8Array))throw new TypeError(la(r,...vi,"Uint8Array"));switch(GE(t,a),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&Ly(r,parseInt(t.slice(-3),10)),Gx(t,r,i,a,s,d);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&Ly(r,parseInt(t.slice(1,4),10)),$x(t,r,i,a,s,d);default:throw new Fn("Unsupported JWE Content Encryption Algorithm")}},qx=async()=>{throw new Fn('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},zx=async()=>{throw new Fn('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},cg=(...t)=>{const r=t.filter(Boolean);if(r.length===0||r.length===1)return!0;let i;for(const a of r){const s=Object.keys(a);if(!i||i.size===0){i=new Set(s);continue}for(const d of s){if(i.has(d))return!1;i.add(d)}}return!0};function Wx(t){return typeof t=="object"&&t!==null}function Bi(t){if(!Wx(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}const tm=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function YE(t,r){if(t.algorithm.length!==parseInt(r.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${r}`)}function QE(t,r,i){if(Ga(t))return Nu(t,r,i),t;if(t instanceof Uint8Array)return fn.subtle.importKey("raw",t,"AES-KW",!0,[i]);throw new TypeError(la(t,...vi,"Uint8Array"))}const tv=async(t,r,i)=>{const a=await QE(r,t,"wrapKey");YE(a,t);const s=await fn.subtle.importKey("raw",i,...tm);return new Uint8Array(await fn.subtle.wrapKey("raw",s,a,"AES-KW"))},rv=async(t,r,i)=>{const a=await QE(r,t,"unwrapKey");YE(a,t);const s=await fn.subtle.unwrapKey("raw",i,a,"AES-KW",...tm);return new Uint8Array(await fn.subtle.exportKey("raw",s))};async function XE(t,r,i,a,s=new Uint8Array(0),d=new Uint8Array(0)){if(!Ga(t))throw new TypeError(la(t,...vi));if(Nu(t,"ECDH"),!Ga(r))throw new TypeError(la(r,...vi));Nu(r,"ECDH","deriveBits");const l=Cs(M0(Si.encode(i)),M0(s),M0(d),kv(a));let c;t.algorithm.name==="X25519"?c=256:t.algorithm.name==="X448"?c=448:c=Math.ceil(parseInt(t.algorithm.namedCurve.substr(-3),10)/8)<<3;const p=new Uint8Array(await fn.subtle.deriveBits({name:t.algorithm.name,public:t},r,c));return kx(p,a,l)}async function Jx(t){if(!Ga(t))throw new TypeError(la(t,...vi));return fn.subtle.generateKey(t.algorithm,!0,["deriveBits"])}function ZE(t){if(!Ga(t))throw new TypeError(la(t,...vi));return["P-256","P-384","P-521"].includes(t.algorithm.namedCurve)||t.algorithm.name==="X25519"||t.algorithm.name==="X448"}function Yx(t){if(!(t instanceof Uint8Array)||t.length<8)throw new mr("PBES2 Salt Input must be 8 or more octets")}function Qx(t,r){if(t instanceof Uint8Array)return fn.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]);if(Ga(t))return Nu(t,r,"deriveBits","deriveKey"),t;throw new TypeError(la(t,...vi,"Uint8Array"))}async function e1(t,r,i,a){Yx(t);const s=Mx(r,t),d=parseInt(r.slice(13,16),10),l={hash:`SHA-${r.slice(8,11)}`,iterations:i,name:"PBKDF2",salt:s},c={length:d,name:"AES-KW"},p=await Qx(a,r);if(p.usages.includes("deriveBits"))return new Uint8Array(await fn.subtle.deriveBits(l,p,d));if(p.usages.includes("deriveKey"))return fn.subtle.deriveKey(l,p,c,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const Xx=async(t,r,i,a=2048,s=em(new Uint8Array(16)))=>{const d=await e1(s,t,a,r);return{encryptedKey:await tv(t.slice(-6),d,i),p2c:a,p2s:Ri(s)}},Zx=async(t,r,i,a,s)=>{const d=await e1(s,t,a,r);return rv(t.slice(-6),d,i)};function My(t){switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Fn(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}const rm=(t,r)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:i}=r.algorithm;if(typeof i!="number"||i<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},eT=async(t,r,i)=>{if(!Ga(r))throw new TypeError(la(r,...vi));if(Nu(r,t,"encrypt","wrapKey"),rm(t,r),r.usages.includes("encrypt"))return new Uint8Array(await fn.subtle.encrypt(My(t),r,i));if(r.usages.includes("wrapKey")){const a=await fn.subtle.importKey("raw",i,...tm);return new Uint8Array(await fn.subtle.wrapKey("raw",a,r,My(t)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},tT=async(t,r,i)=>{if(!Ga(r))throw new TypeError(la(r,...vi));if(Nu(r,t,"decrypt","unwrapKey"),rm(t,r),r.usages.includes("decrypt"))return new Uint8Array(await fn.subtle.decrypt(My(t),r,i));if(r.usages.includes("unwrapKey")){const a=await fn.subtle.unwrapKey("raw",i,r,My(t),...tm);return new Uint8Array(await fn.subtle.exportKey("raw",a))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function Vv(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Fn(`Unsupported JWE Algorithm: ${t}`)}}const nf=t=>em(new Uint8Array(Vv(t)>>3)),t1=(t,r)=>{const i=(t.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${r}-----
${i}
-----END ${r}-----`},r1=async(t,r,i)=>{if(!Ga(i))throw new TypeError(la(i,...vi));if(!i.extractable)throw new TypeError("CryptoKey is not extractable");if(i.type!==t)throw new TypeError(`key is not a ${t} key`);return t1(Bv(new Uint8Array(await fn.subtle.exportKey(r,i))),`${t.toUpperCase()} KEY`)},rT=t=>r1("public","spki",t),nT=t=>r1("private","pkcs8",t),xu=(t,r,i=0)=>{i===0&&(r.unshift(r.length),r.unshift(6));let a=t.indexOf(r[0],i);if(a===-1)return!1;const s=t.subarray(a,a+r.length);return s.length!==r.length?!1:s.every((d,l)=>d===r[l])||xu(t,r,a+1)},eS=t=>{switch(!0){case xu(t,[42,134,72,206,61,3,1,7]):return"P-256";case xu(t,[43,129,4,0,34]):return"P-384";case xu(t,[43,129,4,0,35]):return"P-521";case xu(t,[43,101,110]):return"X25519";case xu(t,[43,101,111]):return"X448";case xu(t,[43,101,112]):return"Ed25519";case xu(t,[43,101,113]):return"Ed448";default:throw new Fn("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},n1=async(t,r,i,a,s)=>{var d;let l,c;const p=new Uint8Array(atob(i.replace(t,"")).split("").map(m=>m.charCodeAt(0))),f=r==="spki";switch(a){case"PS256":case"PS384":case"PS512":l={name:"RSA-PSS",hash:`SHA-${a.slice(-3)}`},c=f?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":l={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.slice(-3)}`},c=f?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":l={name:"RSA-OAEP",hash:`SHA-${parseInt(a.slice(-3),10)||1}`},c=f?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":l={name:"ECDSA",namedCurve:"P-256"},c=f?["verify"]:["sign"];break;case"ES384":l={name:"ECDSA",namedCurve:"P-384"},c=f?["verify"]:["sign"];break;case"ES512":l={name:"ECDSA",namedCurve:"P-521"},c=f?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const m=eS(p);l=m.startsWith("P-")?{name:"ECDH",namedCurve:m}:{name:m},c=f?[]:["deriveBits"];break}case"EdDSA":l={name:eS(p)},c=f?["verify"]:["sign"];break;default:throw new Fn('Invalid or unsupported "alg" (Algorithm) value')}return fn.subtle.importKey(r,p,l,(d=s?.extractable)!==null&&d!==void 0?d:!1,c)},iT=(t,r,i)=>n1(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",t,r,i),i1=(t,r,i)=>n1(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",t,r,i);function tS(t){let r=[],i=0;for(;i<t.length;){let a=a1(t.subarray(i));r.push(a),i+=a.byteLength}return r}function a1(t){let r=0,i=t[0]&31;if(r++,i===31){for(i=0;t[r]>=128;)i=i*128+t[r]-128,r++;i=i*128+t[r]-128,r++}let a=0;if(t[r]<128)a=t[r],r++;else if(a===128){for(a=0;t[r+a]!==0||t[r+a+1]!==0;){if(a>t.byteLength)throw new TypeError("invalid indefinite form length");a++}const d=r+a+2;return{byteLength:d,contents:t.subarray(r,r+a),raw:t.subarray(0,d)}}else{let d=t[r]&127;r++,a=0;for(let l=0;l<d;l++)a=a*256+t[r],r++}const s=r+a;return{byteLength:s,contents:t.subarray(r,s),raw:t.subarray(0,s)}}function aT(t){const r=tS(tS(a1(t).contents)[0].contents);return Bv(r[r[0].raw[0]===160?6:5].raw)}function oT(t){const r=t.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),i=kE(r);return t1(aT(i),"PUBLIC KEY")}const sT=(t,r,i)=>{let a;try{a=oT(t)}catch(s){throw new TypeError("Failed to parse the X.509 certificate",{cause:s})}return i1(a,r,i)};function lT(t){let r,i;switch(t.kty){case"oct":{switch(t.alg){case"HS256":case"HS384":case"HS512":r={name:"HMAC",hash:`SHA-${t.alg.slice(-3)}`},i=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new Fn(`${t.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":r={name:"AES-GCM"},i=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":r={name:"AES-KW"},i=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":r={name:"PBKDF2"},i=["deriveBits"];break;default:throw new Fn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(t.alg){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},i=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},i=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},i=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Fn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(t.alg){case"ES256":r={name:"ECDSA",namedCurve:"P-256"},i=t.d?["sign"]:["verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},i=t.d?["sign"]:["verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},i=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:"ECDH",namedCurve:t.crv},i=t.d?["deriveBits"]:[];break;default:throw new Fn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(t.alg){case"EdDSA":r={name:t.crv},i=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:t.crv},i=t.d?["deriveBits"]:[];break;default:throw new Fn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Fn('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:r,keyUsages:i}}const rS=async t=>{var r,i;if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:a,keyUsages:s}=lT(t),d=[a,(r=t.ext)!==null&&r!==void 0?r:!1,(i=t.key_ops)!==null&&i!==void 0?i:s];if(a.name==="PBKDF2")return fn.subtle.importKey("raw",Oi(t.k),...d);const l={...t};return delete l.alg,delete l.use,fn.subtle.importKey("jwk",l,...d)};async function uT(t,r,i){if(typeof t!="string"||t.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return i1(t,r,i)}async function cT(t,r,i){if(typeof t!="string"||t.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return sT(t,r,i)}async function fT(t,r,i){if(typeof t!="string"||t.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return iT(t,r,i)}async function fg(t,r,i){var a;if(!Bi(t))throw new TypeError("JWK must be an object");switch(r||(r=t.alg),t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return i??(i=t.ext!==!0),i?rS({...t,alg:r,ext:(a=t.ext)!==null&&a!==void 0?a:!1}):Oi(t.k);case"RSA":if(t.oth!==void 0)throw new Fn('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return rS({...t,alg:r});default:throw new Fn('Unsupported "kty" (Key Type) Parameter value')}}const dT=(t,r)=>{if(!(r instanceof Uint8Array)){if(!WE(r))throw new TypeError(zE(t,r,...vi,"Uint8Array"));if(r.type!=="secret")throw new TypeError(`${vi.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},hT=(t,r,i)=>{if(!WE(r))throw new TypeError(zE(t,r,...vi));if(r.type==="secret")throw new TypeError(`${vi.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(i==="sign"&&r.type==="public")throw new TypeError(`${vi.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(i==="decrypt"&&r.type==="public")throw new TypeError(`${vi.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(r.algorithm&&i==="verify"&&r.type==="private")throw new TypeError(`${vi.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(r.algorithm&&i==="encrypt"&&r.type==="private")throw new TypeError(`${vi.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},nm=(t,r,i)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?dT(t,r):hT(t,r,i)};async function pT(t,r,i,a,s){if(!(i instanceof Uint8Array))throw new TypeError(la(i,"Uint8Array"));const d=parseInt(t.slice(1,4),10),l=await fn.subtle.importKey("raw",i.subarray(d>>3),"AES-CBC",!1,["encrypt"]),c=await fn.subtle.importKey("raw",i.subarray(0,d>>3),{hash:`SHA-${d<<1}`,name:"HMAC"},!1,["sign"]),p=new Uint8Array(await fn.subtle.encrypt({iv:a,name:"AES-CBC"},l,r)),f=Cs(s,a,p,ME(s.length<<3)),m=new Uint8Array((await fn.subtle.sign("HMAC",c,f)).slice(0,d>>3));return{ciphertext:p,tag:m}}async function gT(t,r,i,a,s){let d;i instanceof Uint8Array?d=await fn.subtle.importKey("raw",i,"AES-GCM",!1,["encrypt"]):(Nu(i,t,"encrypt"),d=i);const l=new Uint8Array(await fn.subtle.encrypt({additionalData:s,iv:a,name:"AES-GCM",tagLength:128},d,r)),c=l.slice(-16);return{ciphertext:l.slice(0,-16),tag:c}}const nv=async(t,r,i,a,s)=>{if(!Ga(i)&&!(i instanceof Uint8Array))throw new TypeError(la(i,...vi,"Uint8Array"));switch(GE(t,a),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return i instanceof Uint8Array&&Ly(i,parseInt(t.slice(-3),10)),pT(t,r,i,a,s);case"A128GCM":case"A192GCM":case"A256GCM":return i instanceof Uint8Array&&Ly(i,parseInt(t.slice(1,4),10)),gT(t,r,i,a,s);default:throw new Fn("Unsupported JWE Content Encryption Algorithm")}};async function yT(t,r,i,a){const s=t.slice(0,7);a||(a=KE(s));const{ciphertext:d,tag:l}=await nv(s,i,r,a,new Uint8Array(0));return{encryptedKey:d,iv:Ri(a),tag:Ri(l)}}async function mT(t,r,i,a,s){const d=t.slice(0,7);return JE(d,r,i,a,s,new Uint8Array(0))}async function vT(t,r,i,a,s){switch(nm(t,r,"decrypt"),t){case"dir":{if(i!==void 0)throw new mr("Encountered unexpected JWE Encrypted Key");return r}case"ECDH-ES":if(i!==void 0)throw new mr("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Bi(a.epk))throw new mr('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!ZE(r))throw new Fn("ECDH with the provided key is not allowed or not supported by your javascript runtime");const d=await fg(a.epk,t);let l,c;if(a.apu!==void 0){if(typeof a.apu!="string")throw new mr('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{l=Oi(a.apu)}catch{throw new mr("Failed to base64url decode the apu")}}if(a.apv!==void 0){if(typeof a.apv!="string")throw new mr('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{c=Oi(a.apv)}catch{throw new mr("Failed to base64url decode the apv")}}const p=await XE(d,r,t==="ECDH-ES"?a.enc:t,t==="ECDH-ES"?Vv(a.enc):parseInt(t.slice(-5,-2),10),l,c);if(t==="ECDH-ES")return p;if(i===void 0)throw new mr("JWE Encrypted Key missing");return rv(t.slice(-6),p,i)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(i===void 0)throw new mr("JWE Encrypted Key missing");return tT(t,r,i)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(i===void 0)throw new mr("JWE Encrypted Key missing");if(typeof a.p2c!="number")throw new mr('JOSE Header "p2c" (PBES2 Count) missing or invalid');const d=s?.maxPBES2Count||1e4;if(a.p2c>d)throw new mr('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof a.p2s!="string")throw new mr('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let l;try{l=Oi(a.p2s)}catch{throw new mr("Failed to base64url decode the p2s")}return Zx(t,r,i,a.p2c,l)}case"A128KW":case"A192KW":case"A256KW":{if(i===void 0)throw new mr("JWE Encrypted Key missing");return rv(t,r,i)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(i===void 0)throw new mr("JWE Encrypted Key missing");if(typeof a.iv!="string")throw new mr('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof a.tag!="string")throw new mr('JOSE Header "tag" (Authentication Tag) missing or invalid');let d;try{d=Oi(a.iv)}catch{throw new mr("Failed to base64url decode the iv")}let l;try{l=Oi(a.tag)}catch{throw new mr("Failed to base64url decode the tag")}return mT(t,r,i,d,l)}default:throw new Fn('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function dg(t,r,i,a,s){if(s.crit!==void 0&&a.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!a||a.crit===void 0)return new Set;if(!Array.isArray(a.crit)||a.crit.length===0||a.crit.some(l=>typeof l!="string"||l.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let d;i!==void 0?d=new Map([...Object.entries(i),...r.entries()]):d=r;for(const l of a.crit){if(!d.has(l))throw new Fn(`Extension Header Parameter "${l}" is not recognized`);if(s[l]===void 0)throw new t(`Extension Header Parameter "${l}" is missing`);if(d.get(l)&&a[l]===void 0)throw new t(`Extension Header Parameter "${l}" MUST be integrity protected`)}return new Set(a.crit)}const iv=(t,r)=>{if(r!==void 0&&(!Array.isArray(r)||r.some(i=>typeof i!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(r)return new Set(r)};async function Kv(t,r,i){var a;if(!Bi(t))throw new mr("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new mr("JOSE Header missing");if(typeof t.iv!="string")throw new mr("JWE Initialization Vector missing or incorrect type");if(typeof t.ciphertext!="string")throw new mr("JWE Ciphertext missing or incorrect type");if(typeof t.tag!="string")throw new mr("JWE Authentication Tag missing or incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new mr("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new mr("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new mr("JWE AAD incorrect type");if(t.header!==void 0&&!Bi(t.header))throw new mr("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!Bi(t.unprotected))throw new mr("JWE Per-Recipient Unprotected Header incorrect type");let s;if(t.protected)try{const $=Oi(t.protected);s=JSON.parse(Co.decode($))}catch{throw new mr("JWE Protected Header is invalid")}if(!cg(s,t.header,t.unprotected))throw new mr("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const d={...s,...t.header,...t.unprotected};if(dg(mr,new Map,i?.crit,s,d),d.zip!==void 0){if(!s||!s.zip)throw new mr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(d.zip!=="DEF")throw new Fn('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:l,enc:c}=d;if(typeof l!="string"||!l)throw new mr("missing JWE Algorithm (alg) in JWE Header");if(typeof c!="string"||!c)throw new mr("missing JWE Encryption Algorithm (enc) in JWE Header");const p=i&&iv("keyManagementAlgorithms",i.keyManagementAlgorithms),f=i&&iv("contentEncryptionAlgorithms",i.contentEncryptionAlgorithms);if(p&&!p.has(l))throw new Uy('"alg" (Algorithm) Header Parameter not allowed');if(f&&!f.has(c))throw new Uy('"enc" (Encryption Algorithm) Header Parameter not allowed');let m;if(t.encrypted_key!==void 0)try{m=Oi(t.encrypted_key)}catch{throw new mr("Failed to base64url decode the encrypted_key")}let b=!1;typeof r=="function"&&(r=await r(s,t),b=!0);let _;try{_=await vT(l,r,m,d,i)}catch($){if($ instanceof TypeError||$ instanceof mr||$ instanceof Fn)throw $;_=nf(c)}let A,T;try{A=Oi(t.iv)}catch{throw new mr("Failed to base64url decode the iv")}try{T=Oi(t.tag)}catch{throw new mr("Failed to base64url decode the tag")}const x=Si.encode((a=t.protected)!==null&&a!==void 0?a:"");let P;t.aad!==void 0?P=Cs(x,Si.encode("."),Si.encode(t.aad)):P=x;let R;try{R=Oi(t.ciphertext)}catch{throw new mr("Failed to base64url decode the ciphertext")}let F=await JE(c,_,R,A,T,P);d.zip==="DEF"&&(F=await(i?.inflateRaw||qx)(F));const I={plaintext:F};if(t.protected!==void 0&&(I.protectedHeader=s),t.aad!==void 0)try{I.additionalAuthenticatedData=Oi(t.aad)}catch{throw new mr("Failed to base64url decode the aad")}return t.unprotected!==void 0&&(I.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(I.unprotectedHeader=t.header),b?{...I,key:r}:I}async function o1(t,r,i){if(t instanceof Uint8Array&&(t=Co.decode(t)),typeof t!="string")throw new mr("Compact JWE must be a string or Uint8Array");const{0:a,1:s,2:d,3:l,4:c,length:p}=t.split(".");if(p!==5)throw new mr("Invalid Compact JWE");const f=await Kv({ciphertext:l,iv:d||void 0,protected:a||void 0,tag:c||void 0,encrypted_key:s||void 0},r,i),m={plaintext:f.plaintext,protectedHeader:f.protectedHeader};return typeof r=="function"?{...m,key:f.key}:m}async function bT(t,r,i){if(!Bi(t))throw new mr("General JWE must be an object");if(!Array.isArray(t.recipients)||!t.recipients.every(Bi))throw new mr("JWE Recipients missing or incorrect type");if(!t.recipients.length)throw new mr("JWE Recipients has no members");for(const a of t.recipients)try{return await Kv({aad:t.aad,ciphertext:t.ciphertext,encrypted_key:a.encrypted_key,header:a.header,iv:t.iv,protected:t.protected,tag:t.tag,unprotected:t.unprotected},r,i)}catch{}throw new eg}const wT=async t=>{if(t instanceof Uint8Array)return{kty:"oct",k:Ri(t)};if(!Ga(t))throw new TypeError(la(t,...vi,"Uint8Array"));if(!t.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:r,key_ops:i,alg:a,use:s,...d}=await fn.subtle.exportKey("jwk",t);return d};async function _T(t){return rT(t)}async function ST(t){return nT(t)}async function Gv(t){return wT(t)}async function s1(t,r,i,a,s={}){let d,l,c;switch(nm(t,i,"encrypt"),t){case"dir":{c=i;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ZE(i))throw new Fn("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:p,apv:f}=s;let{epk:m}=s;m||(m=(await Jx(i)).privateKey);const{x:b,y:_,crv:A,kty:T}=await Gv(m),x=await XE(i,m,t==="ECDH-ES"?r:t,t==="ECDH-ES"?Vv(r):parseInt(t.slice(-5,-2),10),p,f);if(l={epk:{x:b,crv:A,kty:T}},T==="EC"&&(l.epk.y=_),p&&(l.apu=Ri(p)),f&&(l.apv=Ri(f)),t==="ECDH-ES"){c=x;break}c=a||nf(r);const P=t.slice(-6);d=await tv(P,x,c);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{c=a||nf(r),d=await eT(t,i,c);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{c=a||nf(r);const{p2c:p,p2s:f}=s;({encryptedKey:d,...l}=await Xx(t,i,c,p,f));break}case"A128KW":case"A192KW":case"A256KW":{c=a||nf(r),d=await tv(t,i,c);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{c=a||nf(r);const{iv:p}=s;({encryptedKey:d,...l}=await yT(t,i,c,p));break}default:throw new Fn('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:c,encryptedKey:d,parameters:l}}const l1=Symbol();class ky{constructor(r){if(!(r instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=r}setKeyManagementParameters(r){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=r,this}setProtectedHeader(r){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setSharedUnprotectedHeader(r){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=r,this}setUnprotectedHeader(r){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}setAdditionalAuthenticatedData(r){return this._aad=r,this}setContentEncryptionKey(r){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=r,this}setInitializationVector(r){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=r,this}async encrypt(r,i){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new mr("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!cg(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new mr("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const a={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(dg(mr,new Map,i?.crit,this._protectedHeader,a),a.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new mr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(a.zip!=="DEF")throw new Fn('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:s,enc:d}=a;if(typeof s!="string"||!s)throw new mr('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof d!="string"||!d)throw new mr('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let l;if(s==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(s==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let c;{let T;({cek:c,encryptedKey:l,parameters:T}=await s1(s,d,r,this._cek,this._keyManagementParameters)),T&&(i&&l1 in i?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...T}:this.setUnprotectedHeader(T):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...T}:this.setProtectedHeader(T))}this._iv||(this._iv=KE(d));let p,f,m;this._protectedHeader?f=Si.encode(Ri(JSON.stringify(this._protectedHeader))):f=Si.encode(""),this._aad?(m=Ri(this._aad),p=Cs(f,Si.encode("."),Si.encode(m))):p=f;let b,_;if(a.zip==="DEF"){const T=await(i?.deflateRaw||zx)(this._plaintext);({ciphertext:b,tag:_}=await nv(d,T,c,this._iv,p))}else({ciphertext:b,tag:_}=await nv(d,this._plaintext,c,this._iv,p));const A={ciphertext:Ri(b),iv:Ri(this._iv),tag:Ri(_)};return l&&(A.encrypted_key=Ri(l)),m&&(A.aad=m),this._protectedHeader&&(A.protected=Co.decode(f)),this._sharedUnprotectedHeader&&(A.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(A.header=this._unprotectedHeader),A}}class ET{constructor(r,i,a){this.parent=r,this.key=i,this.options=a}setUnprotectedHeader(r){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=r,this}addRecipient(...r){return this.parent.addRecipient(...r)}encrypt(...r){return this.parent.encrypt(...r)}done(){return this.parent}}class AT{constructor(r){this._recipients=[],this._plaintext=r}addRecipient(r,i){const a=new ET(this,r,{crit:i?.crit});return this._recipients.push(a),a}setProtectedHeader(r){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setSharedUnprotectedHeader(r){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}setAdditionalAuthenticatedData(r){return this._aad=r,this}async encrypt(r){var i,a,s;if(!this._recipients.length)throw new mr("at least one recipient must be added");if(r={deflateRaw:r?.deflateRaw},this._recipients.length===1){const[p]=this._recipients,f=await new ky(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(p.unprotectedHeader).encrypt(p.key,{...p.options,...r});let m={ciphertext:f.ciphertext,iv:f.iv,recipients:[{}],tag:f.tag};return f.aad&&(m.aad=f.aad),f.protected&&(m.protected=f.protected),f.unprotected&&(m.unprotected=f.unprotected),f.encrypted_key&&(m.recipients[0].encrypted_key=f.encrypted_key),f.header&&(m.recipients[0].header=f.header),m}let d;for(let p=0;p<this._recipients.length;p++){const f=this._recipients[p];if(!cg(this._protectedHeader,this._unprotectedHeader,f.unprotectedHeader))throw new mr("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const m={...this._protectedHeader,...this._unprotectedHeader,...f.unprotectedHeader},{alg:b}=m;if(typeof b!="string"||!b)throw new mr('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(b==="dir"||b==="ECDH-ES")throw new mr('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof m.enc!="string"||!m.enc)throw new mr('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!d)d=m.enc;else if(d!==m.enc)throw new mr('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(dg(mr,new Map,f.options.crit,this._protectedHeader,m),m.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new mr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const l=nf(d);let c={ciphertext:"",iv:"",recipients:[],tag:""};for(let p=0;p<this._recipients.length;p++){const f=this._recipients[p],m={};c.recipients.push(m);const _={...this._protectedHeader,...this._unprotectedHeader,...f.unprotectedHeader}.alg.startsWith("PBES2")?2048+p:void 0;if(p===0){const x=await new ky(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(l).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(f.unprotectedHeader).setKeyManagementParameters({p2c:_}).encrypt(f.key,{...f.options,...r,[l1]:!0});c.ciphertext=x.ciphertext,c.iv=x.iv,c.tag=x.tag,x.aad&&(c.aad=x.aad),x.protected&&(c.protected=x.protected),x.unprotected&&(c.unprotected=x.unprotected),m.encrypted_key=x.encrypted_key,x.header&&(m.header=x.header);continue}const{encryptedKey:A,parameters:T}=await s1(((i=f.unprotectedHeader)===null||i===void 0?void 0:i.alg)||((a=this._protectedHeader)===null||a===void 0?void 0:a.alg)||((s=this._unprotectedHeader)===null||s===void 0?void 0:s.alg),d,f.key,l,{p2c:_});m.encrypted_key=Ri(A),(f.unprotectedHeader||T)&&(m.header={...f.unprotectedHeader,...T})}return c}}function u1(t,r){const i=`SHA-${t.slice(-3)}`;switch(t){case"HS256":case"HS384":case"HS512":return{hash:i,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:i,name:"RSA-PSS",saltLength:t.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:i,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:i,name:"ECDSA",namedCurve:r.namedCurve};case"EdDSA":return{name:r.name};default:throw new Fn(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}function c1(t,r,i){if(Ga(r))return Kx(r,t,i),r;if(r instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(la(r,...vi));return fn.subtle.importKey("raw",r,{hash:`SHA-${t.slice(-3)}`,name:"HMAC"},!1,[i])}throw new TypeError(la(r,...vi,"Uint8Array"))}const RT=async(t,r,i,a)=>{const s=await c1(t,r,"verify");rm(t,s);const d=u1(t,s.algorithm);try{return await fn.subtle.verify(d,s,i,a)}catch{return!1}};async function $v(t,r,i){var a;if(!Bi(t))throw new Wn("Flattened JWS must be an object");if(t.protected===void 0&&t.header===void 0)throw new Wn('Flattened JWS must have either of the "protected" or "header" members');if(t.protected!==void 0&&typeof t.protected!="string")throw new Wn("JWS Protected Header incorrect type");if(t.payload===void 0)throw new Wn("JWS Payload missing");if(typeof t.signature!="string")throw new Wn("JWS Signature missing or incorrect type");if(t.header!==void 0&&!Bi(t.header))throw new Wn("JWS Unprotected Header incorrect type");let s={};if(t.protected)try{const P=Oi(t.protected);s=JSON.parse(Co.decode(P))}catch{throw new Wn("JWS Protected Header is invalid")}if(!cg(s,t.header))throw new Wn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const d={...s,...t.header},l=dg(Wn,new Map([["b64",!0]]),i?.crit,s,d);let c=!0;if(l.has("b64")&&(c=s.b64,typeof c!="boolean"))throw new Wn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:p}=d;if(typeof p!="string"||!p)throw new Wn('JWS "alg" (Algorithm) Header Parameter missing or invalid');const f=i&&iv("algorithms",i.algorithms);if(f&&!f.has(p))throw new Uy('"alg" (Algorithm) Header Parameter not allowed');if(c){if(typeof t.payload!="string")throw new Wn("JWS Payload must be a string")}else if(typeof t.payload!="string"&&!(t.payload instanceof Uint8Array))throw new Wn("JWS Payload must be a string or an Uint8Array instance");let m=!1;typeof r=="function"&&(r=await r(s,t),m=!0),nm(p,r,"verify");const b=Cs(Si.encode((a=t.protected)!==null&&a!==void 0?a:""),Si.encode("."),typeof t.payload=="string"?Si.encode(t.payload):t.payload);let _;try{_=Oi(t.signature)}catch{throw new Wn("Failed to base64url decode the signature")}if(!await RT(p,r,_,b))throw new jv;let T;if(c)try{T=Oi(t.payload)}catch{throw new Wn("Failed to base64url decode the payload")}else typeof t.payload=="string"?T=Si.encode(t.payload):T=t.payload;const x={payload:T};return t.protected!==void 0&&(x.protectedHeader=s),t.header!==void 0&&(x.unprotectedHeader=t.header),m?{...x,key:r}:x}async function f1(t,r,i){if(t instanceof Uint8Array&&(t=Co.decode(t)),typeof t!="string")throw new Wn("Compact JWS must be a string or Uint8Array");const{0:a,1:s,2:d,length:l}=t.split(".");if(l!==3)throw new Wn("Invalid Compact JWS");const c=await $v({payload:s,protected:a,signature:d},r,i),p={payload:c.payload,protectedHeader:c.protectedHeader};return typeof r=="function"?{...p,key:c.key}:p}async function xT(t,r,i){if(!Bi(t))throw new Wn("General JWS must be an object");if(!Array.isArray(t.signatures)||!t.signatures.every(Bi))throw new Wn("JWS Signatures missing or incorrect type");for(const a of t.signatures)try{return await $v({header:a.header,payload:t.payload,protected:a.protected,signature:a.signature},r,i)}catch{}throw new jv}const Cy=t=>Math.floor(t.getTime()/1e3),d1=60,h1=d1*60,qv=h1*24,TT=qv*7,CT=qv*365.25,OT=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,By=t=>{const r=OT.exec(t);if(!r)throw new TypeError("Invalid time period format");const i=parseFloat(r[1]);switch(r[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(i);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(i*d1);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(i*h1);case"day":case"days":case"d":return Math.round(i*qv);case"week":case"weeks":case"w":return Math.round(i*TT);default:return Math.round(i*CT)}},nS=t=>t.toLowerCase().replace(/^application\//,""),PT=(t,r)=>typeof t=="string"?r.includes(t):Array.isArray(t)?r.some(Set.prototype.has.bind(new Set(t))):!1,zv=(t,r,i={})=>{const{typ:a}=i;if(a&&(typeof t.typ!="string"||nS(t.typ)!==nS(a)))throw new ja('unexpected "typ" JWT header value',"typ","check_failed");let s;try{s=JSON.parse(Co.decode(r))}catch{}if(!Bi(s))throw new Va("JWT Claims Set must be a top-level JSON object");const{requiredClaims:d=[],issuer:l,subject:c,audience:p,maxTokenAge:f}=i;f!==void 0&&d.push("iat"),p!==void 0&&d.push("aud"),c!==void 0&&d.push("sub"),l!==void 0&&d.push("iss");for(const A of new Set(d.reverse()))if(!(A in s))throw new ja(`missing required "${A}" claim`,A,"missing");if(l&&!(Array.isArray(l)?l:[l]).includes(s.iss))throw new ja('unexpected "iss" claim value',"iss","check_failed");if(c&&s.sub!==c)throw new ja('unexpected "sub" claim value',"sub","check_failed");if(p&&!PT(s.aud,typeof p=="string"?[p]:p))throw new ja('unexpected "aud" claim value',"aud","check_failed");let m;switch(typeof i.clockTolerance){case"string":m=By(i.clockTolerance);break;case"number":m=i.clockTolerance;break;case"undefined":m=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:b}=i,_=Cy(b||new Date);if((s.iat!==void 0||f)&&typeof s.iat!="number")throw new ja('"iat" claim must be a number',"iat","invalid");if(s.nbf!==void 0){if(typeof s.nbf!="number")throw new ja('"nbf" claim must be a number',"nbf","invalid");if(s.nbf>_+m)throw new ja('"nbf" claim timestamp check failed',"nbf","check_failed")}if(s.exp!==void 0){if(typeof s.exp!="number")throw new ja('"exp" claim must be a number',"exp","invalid");if(s.exp<=_-m)throw new ev('"exp" claim timestamp check failed',"exp","check_failed")}if(f){const A=_-s.iat,T=typeof f=="number"?f:By(f);if(A-m>T)throw new ev('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(A<0-m)throw new ja('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return s};async function p1(t,r,i){var a;const s=await f1(t,r,i);if(!((a=s.protectedHeader.crit)===null||a===void 0)&&a.includes("b64")&&s.protectedHeader.b64===!1)throw new Va("JWTs MUST NOT use unencoded payload");const l={payload:zv(s.protectedHeader,s.payload,i),protectedHeader:s.protectedHeader};return typeof r=="function"?{...l,key:s.key}:l}async function IT(t,r,i){const a=await o1(t,r,i),s=zv(a.protectedHeader,a.plaintext,i),{protectedHeader:d}=a;if(d.iss!==void 0&&d.iss!==s.iss)throw new ja('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(d.sub!==void 0&&d.sub!==s.sub)throw new ja('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(d.aud!==void 0&&JSON.stringify(d.aud)!==JSON.stringify(s.aud))throw new ja('replicated "aud" claim header parameter mismatch',"aud","mismatch");const l={payload:s,protectedHeader:d};return typeof r=="function"?{...l,key:a.key}:l}class g1{constructor(r){this._flattened=new ky(r)}setContentEncryptionKey(r){return this._flattened.setContentEncryptionKey(r),this}setInitializationVector(r){return this._flattened.setInitializationVector(r),this}setProtectedHeader(r){return this._flattened.setProtectedHeader(r),this}setKeyManagementParameters(r){return this._flattened.setKeyManagementParameters(r),this}async encrypt(r,i){const a=await this._flattened.encrypt(r,i);return[a.protected,a.encrypted_key,a.iv,a.ciphertext,a.tag].join(".")}}const NT=async(t,r,i)=>{const a=await c1(t,r,"sign");rm(t,a);const s=await fn.subtle.sign(u1(t,a.algorithm),a,i);return new Uint8Array(s)};class Wv{constructor(r){if(!(r instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=r}setProtectedHeader(r){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setUnprotectedHeader(r){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}async sign(r,i){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Wn("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!cg(this._protectedHeader,this._unprotectedHeader))throw new Wn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...this._protectedHeader,...this._unprotectedHeader},s=dg(Wn,new Map([["b64",!0]]),i?.crit,this._protectedHeader,a);let d=!0;if(s.has("b64")&&(d=this._protectedHeader.b64,typeof d!="boolean"))throw new Wn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:l}=a;if(typeof l!="string"||!l)throw new Wn('JWS "alg" (Algorithm) Header Parameter missing or invalid');nm(l,r,"sign");let c=this._payload;d&&(c=Si.encode(Ri(c)));let p;this._protectedHeader?p=Si.encode(Ri(JSON.stringify(this._protectedHeader))):p=Si.encode("");const f=Cs(p,Si.encode("."),c),m=await NT(l,r,f),b={signature:Ri(m),payload:""};return d&&(b.payload=Co.decode(c)),this._unprotectedHeader&&(b.header=this._unprotectedHeader),this._protectedHeader&&(b.protected=Co.decode(p)),b}}class y1{constructor(r){this._flattened=new Wv(r)}setProtectedHeader(r){return this._flattened.setProtectedHeader(r),this}async sign(r,i){const a=await this._flattened.sign(r,i);if(a.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${a.protected}.${a.payload}.${a.signature}`}}class FT{constructor(r,i,a){this.parent=r,this.key=i,this.options=a}setProtectedHeader(r){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=r,this}setUnprotectedHeader(r){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=r,this}addSignature(...r){return this.parent.addSignature(...r)}sign(...r){return this.parent.sign(...r)}done(){return this.parent}}class DT{constructor(r){this._signatures=[],this._payload=r}addSignature(r,i){const a=new FT(this,r,i);return this._signatures.push(a),a}async sign(){if(!this._signatures.length)throw new Wn("at least one signature must be added");const r={signatures:[],payload:""};for(let i=0;i<this._signatures.length;i++){const a=this._signatures[i],s=new Wv(this._payload);s.setProtectedHeader(a.protectedHeader),s.setUnprotectedHeader(a.unprotectedHeader);const{payload:d,...l}=await s.sign(a.key,a.options);if(i===0)r.payload=d;else if(r.payload!==d)throw new Wn("inconsistent use of JWS Unencoded Payload (RFC7797)");r.signatures.push(l)}return r}}class Jv{constructor(r){if(!Bi(r))throw new TypeError("JWT Claims Set MUST be an object");this._payload=r}setIssuer(r){return this._payload={...this._payload,iss:r},this}setSubject(r){return this._payload={...this._payload,sub:r},this}setAudience(r){return this._payload={...this._payload,aud:r},this}setJti(r){return this._payload={...this._payload,jti:r},this}setNotBefore(r){return typeof r=="number"?this._payload={...this._payload,nbf:r}:this._payload={...this._payload,nbf:Cy(new Date)+By(r)},this}setExpirationTime(r){return typeof r=="number"?this._payload={...this._payload,exp:r}:this._payload={...this._payload,exp:Cy(new Date)+By(r)},this}setIssuedAt(r){return typeof r>"u"?this._payload={...this._payload,iat:Cy(new Date)}:this._payload={...this._payload,iat:r},this}}class m1 extends Jv{setProtectedHeader(r){return this._protectedHeader=r,this}async sign(r,i){var a;const s=new y1(Si.encode(JSON.stringify(this._payload)));if(s.setProtectedHeader(this._protectedHeader),Array.isArray((a=this._protectedHeader)===null||a===void 0?void 0:a.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Va("JWTs MUST NOT use unencoded payload");return s.sign(r,i)}}class UT extends Jv{setProtectedHeader(r){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setKeyManagementParameters(r){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=r,this}setContentEncryptionKey(r){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=r,this}setInitializationVector(r){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=r,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(r,i){const a=new g1(Si.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),a.setProtectedHeader(this._protectedHeader),this._iv&&a.setInitializationVector(this._iv),this._cek&&a.setContentEncryptionKey(this._cek),this._keyManagementParameters&&a.setKeyManagementParameters(this._keyManagementParameters),a.encrypt(r,i)}}const Au=(t,r)=>{if(typeof t!="string"||!t)throw new BE(`${r} missing or invalid`)};async function v1(t,r){if(!Bi(t))throw new TypeError("JWK must be an object");if(r??(r="sha256"),r!=="sha256"&&r!=="sha384"&&r!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let i;switch(t.kty){case"EC":Au(t.crv,'"crv" (Curve) Parameter'),Au(t.x,'"x" (X Coordinate) Parameter'),Au(t.y,'"y" (Y Coordinate) Parameter'),i={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":Au(t.crv,'"crv" (Subtype of Key Pair) Parameter'),Au(t.x,'"x" (Public Key) Parameter'),i={crv:t.crv,kty:t.kty,x:t.x};break;case"RSA":Au(t.e,'"e" (Exponent) Parameter'),Au(t.n,'"n" (Modulus) Parameter'),i={e:t.e,kty:t.kty,n:t.n};break;case"oct":Au(t.k,'"k" (Key Value) Parameter'),i={k:t.k,kty:t.kty};break;default:throw new Fn('"kty" (Key Type) Parameter missing or unsupported')}const a=Si.encode(JSON.stringify(i));return Ri(await LE(r,a))}async function LT(t,r){r??(r="sha256");const i=await v1(t,r);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${r.slice(-3)}:${i}`}async function MT(t,r){const i={...t,...r?.header};if(!Bi(i.jwk))throw new Wn('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const a=await fg({...i.jwk,ext:!0},i.alg,!0);if(a instanceof Uint8Array||a.type!=="public")throw new Wn('"jwk" (JSON Web Key) Header Parameter must be a public key');return a}function kT(t){switch(typeof t=="string"&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new Fn('Unsupported "alg" value for a JSON Web Key Set')}}function b1(t){return t&&typeof t=="object"&&Array.isArray(t.keys)&&t.keys.every(BT)}function BT(t){return Bi(t)}function HT(t){return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}class w1{constructor(r){if(this._cached=new WeakMap,!b1(r))throw new Zy("JSON Web Key Set malformed");this._jwks=HT(r)}async getKey(r,i){const{alg:a,kid:s}={...r,...i?.header},d=kT(a),l=this._jwks.keys.filter(f=>{let m=d===f.kty;if(m&&typeof s=="string"&&(m=s===f.kid),m&&typeof f.alg=="string"&&(m=a===f.alg),m&&typeof f.use=="string"&&(m=f.use==="sig"),m&&Array.isArray(f.key_ops)&&(m=f.key_ops.includes("verify")),m&&a==="EdDSA"&&(m=f.crv==="Ed25519"||f.crv==="Ed448"),m)switch(a){case"ES256":m=f.crv==="P-256";break;case"ES256K":m=f.crv==="secp256k1";break;case"ES384":m=f.crv==="P-384";break;case"ES512":m=f.crv==="P-521";break}return m}),{0:c,length:p}=l;if(p===0)throw new Hv;if(p!==1){const f=new HE,{_cached:m}=this;throw f[Symbol.asyncIterator]=async function*(){for(const b of l)try{yield await iS(m,b,a)}catch{continue}},f}return iS(this._cached,c,a)}}async function iS(t,r,i){const a=t.get(r)||t.set(r,{}).get(r);if(a[i]===void 0){const s=await fg({...r,ext:!0},i);if(s instanceof Uint8Array||s.type!=="public")throw new Zy("JSON Web Key Set members must be public keys");a[i]=s}return a[i]}function jT(t){const r=new w1(t);return async function(i,a){return r.getKey(i,a)}}const VT=async(t,r,i)=>{let a,s,d=!1;typeof AbortController=="function"&&(a=new AbortController,s=setTimeout(()=>{d=!0,a.abort()},r));const l=await fetch(t.href,{signal:a?a.signal:void 0,redirect:"manual",headers:i.headers}).catch(c=>{throw d?new jE:c});if(s!==void 0&&clearTimeout(s),l.status!==200)throw new Hi("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await l.json()}catch{throw new Hi("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function KT(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}class GT extends w1{constructor(r,i){if(super({keys:[]}),this._jwks=void 0,!(r instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(r.href),this._options={agent:i?.agent,headers:i?.headers},this._timeoutDuration=typeof i?.timeoutDuration=="number"?i?.timeoutDuration:5e3,this._cooldownDuration=typeof i?.cooldownDuration=="number"?i?.cooldownDuration:3e4,this._cacheMaxAge=typeof i?.cacheMaxAge=="number"?i?.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(r,i){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(r,i)}catch(a){if(a instanceof Hv&&this.coolingDown()===!1)return await this.reload(),super.getKey(r,i);throw a}}async reload(){this._pendingFetch&&KT()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=VT(this._url,this._timeoutDuration,this._options).then(r=>{if(!b1(r))throw new Zy("JSON Web Key Set malformed");this._jwks={keys:r.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(r=>{throw this._pendingFetch=void 0,r})),await this._pendingFetch}}function $T(t,r){const i=new GT(t,r);return async function(a,s){return i.getKey(a,s)}}class qT extends Jv{encode(){const r=Ri(JSON.stringify({alg:"none"})),i=Ri(JSON.stringify(this._payload));return`${r}.${i}.`}static decode(r,i){if(typeof r!="string")throw new Va("Unsecured JWT must be a string");const{0:a,1:s,2:d,length:l}=r.split(".");if(l!==3||d!=="")throw new Va("Invalid Unsecured JWT");let c;try{if(c=JSON.parse(Co.decode(Oi(a))),c.alg!=="none")throw new Error}catch{throw new Va("Invalid Unsecured JWT")}return{payload:zv(c,Oi(s),i),header:c}}}const zT=Ri,Yv=Oi,WT=Object.freeze(Object.defineProperty({__proto__:null,decode:Yv,encode:zT},Symbol.toStringTag,{value:"Module"}));function JT(t){let r;if(typeof t=="string"){const i=t.split(".");(i.length===3||i.length===5)&&([r]=i)}else if(typeof t=="object"&&t)if("protected"in t)r=t.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof r!="string"||!r)throw new Error;const i=JSON.parse(Co.decode(Yv(r)));if(!Bi(i))throw new Error;return i}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function YT(t){if(typeof t!="string")throw new Va("JWTs must use Compact JWS serialization, JWT must be a string");const{1:r,length:i}=t.split(".");if(i===5)throw new Va("Only JWTs using Compact JWS serialization can be decoded");if(i!==3)throw new Va("Invalid JWT");if(!r)throw new Va("JWTs must contain a payload");let a;try{a=Yv(r)}catch{throw new Va("Failed to base64url decode the payload")}let s;try{s=JSON.parse(Co.decode(a))}catch{throw new Va("Failed to parse the decoded payload as JSON")}if(!Bi(s))throw new Va("Invalid JWT Claims Set");return s}async function QT(t,r){var i;let a,s,d;switch(t){case"HS256":case"HS384":case"HS512":a=parseInt(t.slice(-3),10),s={name:"HMAC",hash:`SHA-${a}`,length:a},d=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return a=parseInt(t.slice(-3),10),em(new Uint8Array(a>>3));case"A128KW":case"A192KW":case"A256KW":a=parseInt(t.slice(1,4),10),s={name:"AES-KW",length:a},d=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":a=parseInt(t.slice(1,4),10),s={name:"AES-GCM",length:a},d=["encrypt","decrypt"];break;default:throw new Fn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return fn.subtle.generateKey(s,(i=r?.extractable)!==null&&i!==void 0?i:!1,d)}function k0(t){var r;const i=(r=t?.modulusLength)!==null&&r!==void 0?r:2048;if(typeof i!="number"||i<2048)throw new Fn("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return i}async function XT(t,r){var i,a,s;let d,l;switch(t){case"PS256":case"PS384":case"PS512":d={name:"RSA-PSS",hash:`SHA-${t.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:k0(r)},l=["sign","verify"];break;case"RS256":case"RS384":case"RS512":d={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:k0(r)},l=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":d={name:"RSA-OAEP",hash:`SHA-${parseInt(t.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:k0(r)},l=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":d={name:"ECDSA",namedCurve:"P-256"},l=["sign","verify"];break;case"ES384":d={name:"ECDSA",namedCurve:"P-384"},l=["sign","verify"];break;case"ES512":d={name:"ECDSA",namedCurve:"P-521"},l=["sign","verify"];break;case"EdDSA":l=["sign","verify"];const c=(i=r?.crv)!==null&&i!==void 0?i:"Ed25519";switch(c){case"Ed25519":case"Ed448":d={name:c};break;default:throw new Fn("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{l=["deriveKey","deriveBits"];const p=(a=r?.crv)!==null&&a!==void 0?a:"P-256";switch(p){case"P-256":case"P-384":case"P-521":{d={name:"ECDH",namedCurve:p};break}case"X25519":case"X448":d={name:p};break;default:throw new Fn("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new Fn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return fn.subtle.generateKey(d,(s=r?.extractable)!==null&&s!==void 0?s:!1,l)}async function _1(t,r){return XT(t,r)}async function ZT(t,r){return QT(t,r)}const eC="WebCryptoAPI",tC=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:g1,CompactSign:y1,EmbeddedJWK:MT,EncryptJWT:UT,FlattenedEncrypt:ky,FlattenedSign:Wv,GeneralEncrypt:AT,GeneralSign:DT,SignJWT:m1,UnsecuredJWT:qT,base64url:WT,calculateJwkThumbprint:v1,calculateJwkThumbprintUri:LT,compactDecrypt:o1,compactVerify:f1,createLocalJWKSet:jT,createRemoteJWKSet:$T,cryptoRuntime:eC,decodeJwt:YT,decodeProtectedHeader:JT,errors:Hx,exportJWK:Gv,exportPKCS8:ST,exportSPKI:_T,flattenedDecrypt:Kv,flattenedVerify:$v,generalDecrypt:bT,generalVerify:xT,generateKeyPair:_1,generateSecret:ZT,importJWK:fg,importPKCS8:fT,importSPKI:uT,importX509:cT,jwtDecrypt:IT,jwtVerify:p1},Symbol.toStringTag,{value:"Module"})),rC=Ky(tC);var aS;function nC(){if(aS)return on;aS=1;var t=lf(),r=Iv(),i=rC,a=Mv();const s="solidClientAuthn:",d=["ES256","RS256"],l={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},c=5,b=["openid","offline_access","webid"].join(" "),_=(We,$e)=>({get(Oe,lt,Q){if(!Object.getOwnPropertyNames(t.EventEmitter).includes(lt)&&Object.getOwnPropertyNames(We).includes(lt))throw new Error(`${$e}: [${lt}] is not supported`);return Reflect.get(Oe,lt,Q)}});class A{constructor($e){this.handleables=$e,this.handleables=$e}async getProperHandler($e){const Oe=await Promise.all(this.handleables.map(lt=>lt.canHandle(...$e)));for(let lt=0;lt<Oe.length;lt+=1)if(Oe[lt])return this.handleables[lt];return null}async canHandle(...$e){return await this.getProperHandler($e)!==null}async handle(...$e){const Oe=await this.getProperHandler($e);if(Oe)return Oe.handle(...$e);throw new Error(`[${this.constructor.name}] cannot find a suitable handler for: ${$e.map(lt=>{try{return JSON.stringify(lt)}catch{return lt.toString()}}).join(", ")}`)}}async function T(We,$e){const Oe=await r.fetch.call(globalThis,We);if(Oe.status!==200)throw new Error(`Could not fetch JWKS for [${$e}] at [${We}]: ${Oe.status} ${Oe.statusText}`);let lt;try{lt=(await Oe.json()).keys[0]}catch(Q){throw new Error(`Malformed JWKS for [${$e}] at [${We}]: ${Q.message}`)}return lt}async function x(We,$e,Oe,lt){const Q=await T($e,Oe);let k;try{const{payload:V}=await i.jwtVerify(We,await i.importJWK(Q),{issuer:Oe,audience:lt});k=V}catch(V){throw new Error(`Token verification failed: ${V.stack}`)}if(typeof k.webid=="string")return k.webid;if(typeof k.sub!="string")throw new Error(`The token ${JSON.stringify(k)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(k.sub),k.sub}catch(V){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${k.sub}] is invalid as a URL - error [${V}].`)}}function P(We){try{const $e=new URL(We),Oe=!$e.searchParams.has("code")&&!$e.searchParams.has("state"),lt=$e.hash==="";return Oe&&lt}catch{return!1}}function R(We){const $e=new URL(We);return $e.searchParams.delete("state"),$e.searchParams.delete("code"),$e.searchParams.delete("error"),$e.searchParams.delete("error_description"),$e.searchParams.delete("iss"),$e}class F{constructor($e,Oe){this.storageUtility=$e,this.redirector=Oe,this.storageUtility=$e,this.redirector=Oe}async canHandle($e){return!!($e.issuerConfiguration.grantTypesSupported&&$e.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1)}async handleRedirect({oidcLoginOptions:$e,state:Oe,codeVerifier:lt,targetUrl:Q}){await Promise.all([this.storageUtility.setForUser(Oe,{sessionId:$e.sessionId}),this.storageUtility.setForUser($e.sessionId,{codeVerifier:lt,issuer:$e.issuer.toString(),redirectUrl:$e.redirectUrl,dpop:$e.dpop?"true":"false"})]),this.redirector.redirect(Q,{handleRedirect:$e.handleRedirect})}}class I{constructor($e){this.sessionInfoManager=$e,this.sessionInfoManager=$e}async canHandle(){return!0}async handle($e){await this.sessionInfoManager.clear($e)}}class ${constructor($e){this.redirector=$e,this.redirector=$e}async canHandle($e,Oe){return Oe?.logoutType==="idp"}async handle($e,Oe){if(Oe?.logoutType!=="idp")throw new Error("Attempting to call idp logout handler to perform app logout");if(Oe.toLogoutUrl===void 0)throw new Error("Cannot perform IDP logout. Did you log in using the OIDC authentication flow?");this.redirector.redirect(Oe.toLogoutUrl(Oe),{handleRedirect:Oe.handleRedirect})}}class B{constructor($e,Oe){this.handlers=[new I($e),new $(Oe)]}async canHandle(){return!0}async handle($e,Oe){for(const lt of this.handlers)await lt.canHandle($e,Oe)&&await lt.handle($e,Oe)}}function W(){return{isLoggedIn:!1,sessionId:a.v4(),fetch:(...We)=>r.fetch.call(globalThis,...We)}}async function Y(We,$e){await Promise.all([$e.deleteAllUserData(We,{secure:!1}),$e.deleteAllUserData(We,{secure:!0})])}class q{constructor($e){this.storageUtility=$e,this.storageUtility=$e}update($e,Oe){throw new Error("Not Implemented")}get($e){throw new Error("Not implemented")}async getAll(){throw new Error("Not implemented")}async clear($e){return Y($e,this.storageUtility)}async register($e){throw new Error("Not implemented")}async getRegisteredSessionIdAll(){throw new Error("Not implemented")}async clearAll(){throw new Error("Not implemented")}}function Ie({endSessionEndpoint:We,idTokenHint:$e,postLogoutRedirectUri:Oe,state:lt}){const Q=new URL(We);return $e!==void 0&&Q.searchParams.append("id_token_hint",$e),Oe!==void 0&&(Q.searchParams.append("post_logout_redirect_uri",Oe),lt!==void 0&&Q.searchParams.append("state",lt)),Q.toString()}function K({endSessionEndpoint:We,idTokenHint:$e}){if(We!==void 0)return function({state:lt,postLogoutUrl:Q}){return Ie({endSessionEndpoint:We,idTokenHint:$e,state:lt,postLogoutRedirectUri:Q})}}function ie(We){return typeof We=="string"&&["DPoP","Bearer"].includes(We)}const ge="solidClientAuthenticationUser";function Se(We){try{return new URL(We),!0}catch{return!1}}function et(We,$e){var Oe;return(Oe=$e.find(lt=>We.includes(lt)))!==null&&Oe!==void 0?Oe:null}function st(We,$e){return We.clientId!==void 0&&!Se(We.clientId)?"static":$e.scopesSupported.includes("webid")&&We.clientId!==void 0&&Se(We.clientId)?"solid-oidc":"dynamic"}async function Ne(We,$e,Oe,lt){const Q=st(We,$e);return Q==="dynamic"?lt.getClient({sessionId:We.sessionId,clientName:We.clientName,redirectUrl:We.redirectUrl},$e):(await Oe.setForUser(We.sessionId,{clientId:We.clientId}),We.clientSecret&&await Oe.setForUser(We.sessionId,{clientSecret:We.clientSecret}),We.clientName&&await Oe.setForUser(We.sessionId,{clientName:We.clientName}),{clientId:We.clientId,clientSecret:We.clientSecret,clientName:We.clientName,clientType:Q})}const gt=(We,$e)=>r.fetch.call(globalThis,We,$e);class ve{constructor($e,Oe,lt,Q,k){this.loginHandler=$e,this.redirectHandler=Oe,this.logoutHandler=lt,this.sessionInfoManager=Q,this.issuerConfigFetcher=k,this.fetch=gt,this.logout=async(V,j)=>{await this.logoutHandler.handle(V,j?.logoutType==="idp"?{...j,toLogoutUrl:this.boundLogout}:j),this.fetch=gt,delete this.boundLogout},this.getSessionInfo=async V=>this.sessionInfoManager.get(V),this.getAllSessionInfo=async()=>this.sessionInfoManager.getAll(),this.loginHandler=$e,this.redirectHandler=Oe,this.logoutHandler=lt,this.sessionInfoManager=Q,this.issuerConfigFetcher=k}}async function tt(We,$e){return We.getForUser($e,"sessionId")}async function J(We,$e,Oe){try{const[lt,Q,k,V]=await Promise.all([$e.getForUser(We,"issuer",{errorIfNull:!0}),$e.getForUser(We,"codeVerifier"),$e.getForUser(We,"redirectUrl"),$e.getForUser(We,"dpop",{errorIfNull:!0})]);await $e.deleteForUser(We,"codeVerifier");const j=await Oe.fetchConfig(lt);return{codeVerifier:Q,redirectUrl:k,issuerConfig:j,dpop:V==="true"}}catch(lt){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${We}]: ${lt}`)}}async function xe(We,$e,Oe,lt,Q,k,V){Q!==void 0&&await We.setForUser($e,{refreshToken:Q},{secure:k}),Oe!==void 0&&await We.setForUser($e,{webId:Oe},{secure:k}),lt!==void 0&&await We.setForUser($e,{isLoggedIn:lt},{secure:k}),V!==void 0&&await We.setForUser($e,{publicKey:JSON.stringify(V.publicKey),privateKey:JSON.stringify(await i.exportJWK(V.privateKey))},{secure:k})}class Xe{constructor($e,Oe){this.secureStorage=$e,this.insecureStorage=Oe,this.secureStorage=$e,this.insecureStorage=Oe}getKey($e){return`solidClientAuthenticationUser:${$e}`}async getUserData($e,Oe){const lt=await(Oe?this.secureStorage:this.insecureStorage).get(this.getKey($e));if(lt===void 0)return{};try{return JSON.parse(lt)}catch{throw new Error(`Data for user [${$e}] in [${Oe?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${lt}`)}}async setUserData($e,Oe,lt){await(lt?this.secureStorage:this.insecureStorage).set(this.getKey($e),JSON.stringify(Oe))}async get($e,Oe){const lt=await(Oe?.secure?this.secureStorage:this.insecureStorage).get($e);if(lt===void 0&&Oe?.errorIfNull)throw new Error(`[${$e}] is not stored`);return lt}async set($e,Oe,lt){return(lt?.secure?this.secureStorage:this.insecureStorage).set($e,Oe)}async delete($e,Oe){return(Oe?.secure?this.secureStorage:this.insecureStorage).delete($e)}async getForUser($e,Oe,lt){const Q=await this.getUserData($e,lt?.secure);let k;if((!Q||!Q[Oe])&&(k=void 0),k=Q[Oe],k===void 0&&lt?.errorIfNull)throw new Error(`Field [${Oe}] for user [${$e}] is not stored`);return k||void 0}async setForUser($e,Oe,lt){let Q;try{Q=await this.getUserData($e,lt?.secure)}catch{Q={}}await this.setUserData($e,{...Q,...Oe},lt?.secure)}async deleteForUser($e,Oe,lt){const Q=await this.getUserData($e,lt?.secure);delete Q[Oe],await this.setUserData($e,Q,lt?.secure)}async deleteAllUserData($e,Oe){await(Oe?.secure?this.secureStorage:this.insecureStorage).delete(this.getKey($e))}}class je{constructor(){this.map={}}async get($e){return this.map[$e]||void 0}async set($e,Oe){this.map[$e]=Oe}async delete($e){delete this.map[$e]}}class dt extends Error{constructor($e){super($e)}}class It extends Error{constructor($e){super(`[${$e}] is not implemented`)}}class Mt extends Error{constructor($e){super(`Invalid response from OIDC provider: missing fields ${$e}`),this.missingFields=$e}}class Me extends Error{constructor($e,Oe,lt){super($e),this.error=Oe,this.errorDescription=lt}}function le(We){const $e=new URL(We);return new URL($e.pathname,$e.origin).toString()}async function Te(We,$e,Oe){return new i.SignJWT({htu:le(We),htm:$e.toUpperCase(),jti:a.v4()}).setProtectedHeader({alg:d[0],jwk:Oe.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(Oe.privateKey,{})}async function Je(){const{privateKey:We,publicKey:$e}=await i.generateKeyPair(d[0]),Oe={privateKey:We,publicKey:await i.exportJWK($e)};return[Oe.publicKey.alg]=d,Oe}const se=600;function M(We){return[401,403].includes(We)}async function D(We,$e,Oe,lt){var Q;const k=new r.Headers(lt?.headers);return k.set("Authorization",`DPoP ${$e}`),k.set("DPoP",await Te(We,(Q=lt?.method)!==null&&Q!==void 0?Q:"get",Oe)),{...lt,headers:k}}async function G(We,$e,Oe,lt){if(Oe!==void 0)return D(We,$e,Oe,lt);const Q=new r.Headers(lt?.headers);return Q.set("Authorization",`Bearer ${$e}`),{...lt,headers:Q}}async function re(We,$e,Oe,lt,Q){return We(Oe,await G(Oe.toString(),$e,Q,lt))}async function we(We,$e,Oe){var lt;const Q=await We.tokenRefresher.refresh(We.sessionId,We.refreshToken,$e);return Oe?.emit(l.SESSION_EXTENDED,(lt=Q.expiresIn)!==null&&lt!==void 0?lt:se),typeof Q.refreshToken=="string"&&Oe?.emit(l.NEW_REFRESH_TOKEN,Q.refreshToken),{accessToken:Q.accessToken,refreshToken:Q.refreshToken,expiresIn:Q.expiresIn}}const Ce=We=>We!==void 0?We-c>0?We-c:We:se;async function at(We,$e,Oe){var lt;let Q=$e,k;const V=Oe?.refreshOptions;if(V!==void 0){const j=async()=>{var qe,Ze,ze,Jt;try{const{accessToken:kr,refreshToken:Hr,expiresIn:ar}=await we(V,Oe.dpopKey,Oe.eventEmitter);Q=kr,Hr!==void 0&&(V.refreshToken=Hr),clearTimeout(k),k=setTimeout(j,Ce(ar)*1e3),(qe=Oe.eventEmitter)===null||qe===void 0||qe.emit(l.TIMEOUT_SET,k)}catch(kr){kr instanceof Me&&((Ze=Oe?.eventEmitter)===null||Ze===void 0||Ze.emit(l.ERROR,kr.error,kr.errorDescription),(ze=Oe?.eventEmitter)===null||ze===void 0||ze.emit(l.SESSION_EXPIRED)),kr instanceof Mt&&kr.missingFields.includes("access_token")&&((Jt=Oe?.eventEmitter)===null||Jt===void 0||Jt.emit(l.SESSION_EXPIRED))}};k=setTimeout(j,Ce(Oe.expiresIn)*1e3),(lt=Oe.eventEmitter)===null||lt===void 0||lt.emit(l.TIMEOUT_SET,k)}else if(Oe!==void 0&&Oe.eventEmitter!==void 0){const j=setTimeout(()=>{Oe.eventEmitter.emit(l.SESSION_EXPIRED)},Ce(Oe.expiresIn)*1e3);Oe.eventEmitter.emit(l.TIMEOUT_SET,j)}return async(j,qe)=>{let Ze=await re(We,Q,j,qe,Oe?.dpopKey);const ze=!Ze.ok&&!M(Ze.status);return Ze.ok||ze||Ze.url!==j&&Oe?.dpopKey!==void 0&&(Ze=await re(We,Q,Ze.url,qe,Oe.dpopKey)),Ze}}const Re="getResponse",ht={get:async(We,$e)=>Re,set:async(We,$e)=>{},delete:async We=>{},getForUser:async(We,$e,Oe)=>Re,setForUser:async(We,$e,Oe)=>{},deleteForUser:async(We,$e,Oe)=>{},deleteAllUserData:async(We,$e)=>{}},Ct=We=>{const $e=We;return{get:async Oe=>{if($e[Oe]!==void 0)return typeof $e[Oe]=="string"?$e[Oe]:JSON.stringify($e[Oe])},set:async(Oe,lt)=>{$e[Oe]=lt},delete:async Oe=>{delete $e[Oe]}}},vt=(We,$e=!1)=>$e?new Xe(Ct(We),Ct({})):new Xe(Ct({}),Ct(We));return on.AggregateHandler=A,on.AuthorizationCodeWithPkceOidcHandlerBase=F,on.ClientAuthentication=ve,on.ConfigurationError=dt,on.DEFAULT_SCOPES=b,on.EVENTS=l,on.GeneralLogoutHandler=I,on.IRpLogoutHandler=$,on.IWaterfallLogoutHandler=B,on.InMemoryStorage=je,on.InvalidResponseError=Mt,on.NotImplementedError=It,on.OidcProviderError=Me,on.PREFERRED_SIGNING_ALG=d,on.REFRESH_BEFORE_EXPIRATION_SECONDS=c,on.SOLID_CLIENT_AUTHN_KEY_PREFIX=s,on.SessionInfoManagerBase=q,on.StorageUtility=Xe,on.StorageUtilityGetResponse=Re,on.StorageUtilityMock=ht,on.USER_SESSION_PREFIX=ge,on.buildAuthenticatedFetch=at,on.buildProxyHandler=_,on.clear=Y,on.createDpopHeader=Te,on.determineSigningAlg=et,on.fetchJwks=T,on.generateDpopKeyPair=Je,on.getEndSessionUrl=Ie,on.getSessionIdFromOauthState=tt,on.getUnauthenticatedSession=W,on.getWebidFromTokenPayload=x,on.handleRegistration=Ne,on.isSupportedTokenType=ie,on.isValidRedirectUrl=P,on.loadOidcContextFromStorage=J,on.maybeBuildRpInitiatedLogout=K,on.mockStorage=Ct,on.mockStorageUtility=vt,on.removeOpenIdParams=R,on.saveSessionInfoToStorage=xe,on}var Oy={exports:{}},iC=Oy.exports,oS;function aC(){return oS||(oS=1,function(t,r){(function(a,s){t.exports=s()})(iC,function(){return function(i){var a={};function s(d){if(a[d])return a[d].exports;var l=a[d]={i:d,l:!1,exports:{}};return i[d].call(l.exports,l,l.exports,s),l.l=!0,l.exports}return s.m=i,s.c=a,s.d=function(d,l,c){s.o(d,l)||Object.defineProperty(d,l,{enumerable:!0,get:c})},s.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},s.t=function(d,l){if(1&l&&(d=s(d)),8&l||4&l&&typeof d=="object"&&d&&d.__esModule)return d;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:d}),2&l&&typeof d!="string")for(var p in d)s.d(c,p,(function(f){return d[f]}).bind(null,p));return c},s.n=function(d){var l=d&&d.__esModule?function(){return d.default}:function(){return d};return s.d(l,"a",l),l},s.o=function(d,l){return Object.prototype.hasOwnProperty.call(d,l)},s.p="",s(s.s=22)}([function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0});var d=function(){function f(m,b){for(var _=0;_<b.length;_++){var A=b[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,b,_){return b&&f(m.prototype,b),_&&f(m,_),m}}(),l={debug:function(){},info:function(){},warn:function(){},error:function(){}},c=void 0,p=void 0;(a.Log=function(){function f(){(function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")})(this,f)}return f.reset=function(){p=3,c=l},f.debug=function(){if(p>=4){for(var b=arguments.length,_=Array(b),A=0;A<b;A++)_[A]=arguments[A];c.debug.apply(c,Array.from(_))}},f.info=function(){if(p>=3){for(var b=arguments.length,_=Array(b),A=0;A<b;A++)_[A]=arguments[A];c.info.apply(c,Array.from(_))}},f.warn=function(){if(p>=2){for(var b=arguments.length,_=Array(b),A=0;A<b;A++)_[A]=arguments[A];c.warn.apply(c,Array.from(_))}},f.error=function(){if(p>=1){for(var b=arguments.length,_=Array(b),A=0;A<b;A++)_[A]=arguments[A];c.error.apply(c,Array.from(_))}},d(f,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return p},set:function(b){if(!(0<=b&&b<=4))throw new Error("Invalid log level");p=b}},{key:"logger",get:function(){return c},set:function(b){if(!b.debug&&b.info&&(b.debug=b.info),!(b.debug&&b.info&&b.warn&&b.error))throw new Error("Invalid logger");c=b}}]),f}()).reset()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0});var d=function(){function f(m,b){for(var _=0;_<b.length;_++){var A=b[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,b,_){return b&&f(m.prototype,b),_&&f(m,_),m}}(),l={setInterval:function(f){function m(b,_){return f.apply(this,arguments)}return m.toString=function(){return f.toString()},m}(function(f,m){return setInterval(f,m)}),clearInterval:function(f){function m(b){return f.apply(this,arguments)}return m.toString=function(){return f.toString()},m}(function(f){return clearInterval(f)})},c=!1,p=null;a.Global=function(){function f(){(function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")})(this,f)}return f._testing=function(){c=!0},f.setXMLHttpRequest=function(b){p=b},d(f,null,[{key:"location",get:function(){if(!c)return location}},{key:"localStorage",get:function(){if(!c&&typeof window<"u")return localStorage}},{key:"sessionStorage",get:function(){if(!c&&typeof window<"u")return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!c&&typeof window<"u")return p||XMLHttpRequest}},{key:"timer",get:function(){if(!c)return l}}]),f}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.MetadataService=void 0;var d=function(){function m(b,_){for(var A=0;A<_.length;A++){var T=_[A];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(b,T.key,T)}}return function(b,_,A){return _&&m(b.prototype,_),A&&m(b,A),b}}(),l=s(0),c=s(7);function p(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}var f=".well-known/openid-configuration";a.MetadataService=function(){function m(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.JsonService;if(p(this,m),!b)throw l.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=b,this._jsonService=new _(["application/jwk-set+json"])}return m.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},m.prototype.getMetadata=function(){var _=this;return this._settings.metadata?(l.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(l.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(A){l.Log.debug("MetadataService.getMetadata: json received");var T=_._settings.metadataSeed||{};return _._settings.metadata=Object.assign({},T,A),_._settings.metadata})):(l.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},m.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},m.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},m.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},m.prototype.getTokenEndpoint=function(){var _=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this._getMetadataProperty("token_endpoint",_)},m.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},m.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},m.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},m.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},m.prototype._getMetadataProperty=function(_){var A=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return l.Log.debug("MetadataService.getMetadataProperty for: "+_),this.getMetadata().then(function(T){if(l.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),T[_]===void 0){if(A===!0)return void l.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+_);throw l.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+_),new Error("Metadata does not contain property "+_)}return T[_]})},m.prototype.getSigningKeys=function(){var _=this;return this._settings.signingKeys?(l.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(A){return l.Log.debug("MetadataService.getSigningKeys: jwks_uri received",A),_._jsonService.getJson(A).then(function(T){if(l.Log.debug("MetadataService.getSigningKeys: key set received",T),!T.keys)throw l.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return _._settings.signingKeys=T.keys,_._settings.signingKeys})})},d(m,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(f)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=f))),this._metadataUrl}}]),m}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.UrlUtility=void 0;var d=s(0),l=s(1);a.UrlUtility=function(){function c(){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c)}return c.addQueryParam=function(f,m,b){return f.indexOf("?")<0&&(f+="?"),f[f.length-1]!=="?"&&(f+="&"),f+=encodeURIComponent(m),f+="=",f+=encodeURIComponent(b)},c.parseUrlFragment=function(f){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#",b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.Global;typeof f!="string"&&(f=b.location.href);var _=f.lastIndexOf(m);_>=0&&(f=f.substr(_+1)),m==="?"&&(_=f.indexOf("#"))>=0&&(f=f.substr(0,_));for(var A,T={},x=/([^&=]+)=([^&]*)/g,P=0;A=x.exec(f);)if(T[decodeURIComponent(A[1])]=decodeURIComponent(A[2].replace(/\+/g," ")),P++>50)return d.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",f),{error:"Response exceeded expected number of parameters"};for(var R in T)return T;return{}},c}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.JoseUtil=void 0;var d=s(26),l=function(p){return p&&p.__esModule?p:{default:p}}(s(33));a.JoseUtil=(0,l.default)({jws:d.jws,KeyUtil:d.KeyUtil,X509:d.X509,crypto:d.crypto,hextob64u:d.hextob64u,b64tohex:d.b64tohex,AllowedSigningAlgs:d.AllowedSigningAlgs})},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.OidcClientSettings=void 0;var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},l=function(){function R(F,I){for(var $=0;$<I.length;$++){var B=I[$];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(F,B.key,B)}}return function(F,I,$){return I&&R(F.prototype,I),$&&R(F,$),F}}(),c=s(0),p=s(23),f=s(6),m=s(24),b=s(2);function _(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")}var A=".well-known/openid-configuration",T="id_token",x="openid",P="client_secret_post";a.OidcClientSettings=function(){function R(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=F.authority,$=F.metadataUrl,B=F.metadata,W=F.signingKeys,Y=F.metadataSeed,q=F.client_id,Ie=F.client_secret,K=F.response_type,ie=K===void 0?T:K,ge=F.scope,Se=ge===void 0?x:ge,et=F.redirect_uri,st=F.post_logout_redirect_uri,Ne=F.client_authentication,gt=Ne===void 0?P:Ne,ve=F.prompt,tt=F.display,J=F.max_age,xe=F.ui_locales,Xe=F.acr_values,je=F.resource,dt=F.response_mode,It=F.filterProtocolClaims,Mt=It===void 0||It,Me=F.loadUserInfo,le=Me===void 0||Me,Te=F.staleStateAge,Je=Te===void 0?900:Te,se=F.clockSkew,M=se===void 0?300:se,D=F.clockService,G=D===void 0?new p.ClockService:D,re=F.userInfoJwtIssuer,we=re===void 0?"OP":re,Ce=F.mergeClaims,at=Ce!==void 0&&Ce,Re=F.stateStore,ht=Re===void 0?new f.WebStorageStateStore:Re,Ct=F.ResponseValidatorCtor,vt=Ct===void 0?m.ResponseValidator:Ct,We=F.MetadataServiceCtor,$e=We===void 0?b.MetadataService:We,Oe=F.extraQueryParams,lt=Oe===void 0?{}:Oe,Q=F.extraTokenParams,k=Q===void 0?{}:Q;_(this,R),this._authority=I,this._metadataUrl=$,this._metadata=B,this._metadataSeed=Y,this._signingKeys=W,this._client_id=q,this._client_secret=Ie,this._response_type=ie,this._scope=Se,this._redirect_uri=et,this._post_logout_redirect_uri=st,this._client_authentication=gt,this._prompt=ve,this._display=tt,this._max_age=J,this._ui_locales=xe,this._acr_values=Xe,this._resource=je,this._response_mode=dt,this._filterProtocolClaims=!!Mt,this._loadUserInfo=!!le,this._staleStateAge=Je,this._clockSkew=M,this._clockService=G,this._userInfoJwtIssuer=we,this._mergeClaims=!!at,this._stateStore=ht,this._validator=new vt(this),this._metadataService=new $e(this),this._extraQueryParams=(lt===void 0?"undefined":d(lt))==="object"?lt:{},this._extraTokenParams=(k===void 0?"undefined":d(k))==="object"?k:{}}return R.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},l(R,[{key:"client_id",get:function(){return this._client_id},set:function(I){if(this._client_id)throw c.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=I}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(I){if(this._authority)throw c.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=I}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(A)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=A)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(I){this._metadata=I}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(I){this._metadataSeed=I}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(I){this._signingKeys=I}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(I){(I===void 0?"undefined":d(I))==="object"?this._extraQueryParams=I:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(I){(I===void 0?"undefined":d(I))==="object"?this._extraTokenParams=I:this._extraTokenParams={}}}]),R}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.WebStorageStateStore=void 0;var d=s(0),l=s(1);function c(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}a.WebStorageStateStore=function(){function p(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=f.prefix,b=m===void 0?"oidc.":m,_=f.store,A=_===void 0?l.Global.localStorage:_;c(this,p),this._store=A,this._prefix=b}return p.prototype.set=function(m,b){return d.Log.debug("WebStorageStateStore.set",m),m=this._prefix+m,this._store.setItem(m,b),Promise.resolve()},p.prototype.get=function(m){d.Log.debug("WebStorageStateStore.get",m),m=this._prefix+m;var b=this._store.getItem(m);return Promise.resolve(b)},p.prototype.remove=function(m){d.Log.debug("WebStorageStateStore.remove",m),m=this._prefix+m;var b=this._store.getItem(m);return this._store.removeItem(m),Promise.resolve(b)},p.prototype.getAllKeys=function(){d.Log.debug("WebStorageStateStore.getAllKeys");for(var m=[],b=0;b<this._store.length;b++){var _=this._store.key(b);_.indexOf(this._prefix)===0&&m.push(_.substr(this._prefix.length))}return Promise.resolve(m)},p}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.JsonService=void 0;var d=s(0),l=s(1);function c(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}a.JsonService=function(){function p(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.Global.XMLHttpRequest,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;c(this,p),f&&Array.isArray(f)?this._contentTypes=f.slice():this._contentTypes=[],this._contentTypes.push("application/json"),b&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=m,this._jwtHandler=b}return p.prototype.getJson=function(m,b){var _=this;if(!m)throw d.Log.error("JsonService.getJson: No url passed"),new Error("url");return d.Log.debug("JsonService.getJson, url: ",m),new Promise(function(A,T){var x=new _._XMLHttpRequest;x.open("GET",m);var P=_._contentTypes,R=_._jwtHandler;x.onload=function(){if(d.Log.debug("JsonService.getJson: HTTP response received, status",x.status),x.status===200){var F=x.getResponseHeader("Content-Type");if(F){var I=P.find(function($){if(F.startsWith($))return!0});if(I=="application/jwt")return void R(x).then(A,T);if(I)try{return void A(JSON.parse(x.responseText))}catch($){return d.Log.error("JsonService.getJson: Error parsing JSON response",$.message),void T($)}}T(Error("Invalid response Content-Type: "+F+", from URL: "+m))}else T(Error(x.statusText+" ("+x.status+")"))},x.onerror=function(){d.Log.error("JsonService.getJson: network error"),T(Error("Network Error"))},b&&(d.Log.debug("JsonService.getJson: token passed, setting Authorization header"),x.setRequestHeader("Authorization","Bearer "+b)),x.send()})},p.prototype.postForm=function(m,b,_){var A=this;if(!m)throw d.Log.error("JsonService.postForm: No url passed"),new Error("url");return d.Log.debug("JsonService.postForm, url: ",m),new Promise(function(T,x){var P=new A._XMLHttpRequest;P.open("POST",m);var R=A._contentTypes;P.onload=function(){if(d.Log.debug("JsonService.postForm: HTTP response received, status",P.status),P.status!==200){if(P.status===400&&(W=P.getResponseHeader("Content-Type"))&&R.find(function(Y){if(W.startsWith(Y))return!0}))try{var B=JSON.parse(P.responseText);if(B&&B.error)return d.Log.error("JsonService.postForm: Error from server: ",B.error),void x(new Error(B.error))}catch(Y){return d.Log.error("JsonService.postForm: Error parsing JSON response",Y.message),void x(Y)}x(Error(P.statusText+" ("+P.status+")"))}else{var W;if((W=P.getResponseHeader("Content-Type"))&&R.find(function(Y){if(W.startsWith(Y))return!0}))try{return void T(JSON.parse(P.responseText))}catch(Y){return d.Log.error("JsonService.postForm: Error parsing JSON response",Y.message),void x(Y)}x(Error("Invalid response Content-Type: "+W+", from URL: "+m))}},P.onerror=function(){d.Log.error("JsonService.postForm: network error"),x(Error("Network Error"))};var F="";for(var I in b){var $=b[I];$&&(F.length>0&&(F+="&"),F+=encodeURIComponent(I),F+="=",F+=encodeURIComponent($))}P.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),_!==void 0&&P.setRequestHeader("Authorization","Basic "+btoa(_)),P.send(F)})},p}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SigninRequest=void 0;var d=s(0),l=s(3),c=s(13);a.SigninRequest=function(){function p(f){var m=f.url,b=f.client_id,_=f.redirect_uri,A=f.response_type,T=f.scope,x=f.authority,P=f.data,R=f.prompt,F=f.display,I=f.max_age,$=f.ui_locales,B=f.id_token_hint,W=f.login_hint,Y=f.acr_values,q=f.resource,Ie=f.response_mode,K=f.request,ie=f.request_uri,ge=f.extraQueryParams,Se=f.request_type,et=f.client_secret,st=f.extraTokenParams,Ne=f.skipUserInfo;if(function(je,dt){if(!(je instanceof dt))throw new TypeError("Cannot call a class as a function")}(this,p),!m)throw d.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!b)throw d.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!_)throw d.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!A)throw d.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!T)throw d.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!x)throw d.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var gt=p.isOidc(A),ve=p.isCode(A);Ie||(Ie=p.isCode(A)?"query":null),this.state=new c.SigninState({nonce:gt,data:P,client_id:b,authority:x,redirect_uri:_,code_verifier:ve,request_type:Se,response_mode:Ie,client_secret:et,scope:T,extraTokenParams:st,skipUserInfo:Ne}),m=l.UrlUtility.addQueryParam(m,"client_id",b),m=l.UrlUtility.addQueryParam(m,"redirect_uri",_),m=l.UrlUtility.addQueryParam(m,"response_type",A),m=l.UrlUtility.addQueryParam(m,"scope",T),m=l.UrlUtility.addQueryParam(m,"state",this.state.id),gt&&(m=l.UrlUtility.addQueryParam(m,"nonce",this.state.nonce)),ve&&(m=l.UrlUtility.addQueryParam(m,"code_challenge",this.state.code_challenge),m=l.UrlUtility.addQueryParam(m,"code_challenge_method","S256"));var tt={prompt:R,display:F,max_age:I,ui_locales:$,id_token_hint:B,login_hint:W,acr_values:Y,resource:q,request:K,request_uri:ie,response_mode:Ie};for(var J in tt)tt[J]&&(m=l.UrlUtility.addQueryParam(m,J,tt[J]));for(var xe in ge)m=l.UrlUtility.addQueryParam(m,xe,ge[xe]);this.url=m}return p.isOidc=function(m){return!!m.split(/\s+/g).filter(function(b){return b==="id_token"})[0]},p.isOAuth=function(m){return!!m.split(/\s+/g).filter(function(b){return b==="token"})[0]},p.isCode=function(m){return!!m.split(/\s+/g).filter(function(b){return b==="code"})[0]},p}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.State=void 0;var d=function(){function f(m,b){for(var _=0;_<b.length;_++){var A=b[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(m,A.key,A)}}return function(m,b,_){return b&&f(m.prototype,b),_&&f(m,_),m}}(),l=s(0),c=function(m){return m&&m.__esModule?m:{default:m}}(s(14));function p(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}a.State=function(){function f(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=m.id,_=m.data,A=m.created,T=m.request_type;p(this,f),this._id=b||(0,c.default)(),this._data=_,this._created=typeof A=="number"&&A>0?A:parseInt(Date.now()/1e3),this._request_type=T}return f.prototype.toStorageString=function(){return l.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},f.fromStorageString=function(b){return l.Log.debug("State.fromStorageString"),new f(JSON.parse(b))},f.clearStaleState=function(b,_){var A=Date.now()/1e3-_;return b.getAllKeys().then(function(T){l.Log.debug("State.clearStaleState: got keys",T);for(var x=[],P=function($){var B=T[$];F=b.get(B).then(function(W){var Y=!1;if(W)try{var q=f.fromStorageString(W);l.Log.debug("State.clearStaleState: got item from key: ",B,q.created),q.created<=A&&(Y=!0)}catch(Ie){l.Log.error("State.clearStaleState: Error parsing state for key",B,Ie.message),Y=!0}else l.Log.debug("State.clearStaleState: no item in storage for key: ",B),Y=!0;if(Y)return l.Log.debug("State.clearStaleState: removed item for key: ",B),b.remove(B)}),x.push(F)},R=0;R<T.length;R++){var F;P(R)}return l.Log.debug("State.clearStaleState: waiting on promise count:",x.length),Promise.all(x)})},d(f,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),f}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.OidcClient=void 0;var d=function(){function P(R,F){for(var I=0;I<F.length;I++){var $=F[I];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(R,$.key,$)}}return function(R,F,I){return F&&P(R.prototype,F),I&&P(R,I),R}}(),l=s(0),c=s(5),p=s(12),f=s(8),m=s(34),b=s(35),_=s(36),A=s(13),T=s(9);function x(P,R){if(!(P instanceof R))throw new TypeError("Cannot call a class as a function")}a.OidcClient=function(){function P(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};x(this,P),R instanceof c.OidcClientSettings?this._settings=R:this._settings=new c.OidcClientSettings(R)}return P.prototype.createSigninRequest=function(){var F=this,I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=I.response_type,B=I.scope,W=I.redirect_uri,Y=I.data,q=I.state,Ie=I.prompt,K=I.display,ie=I.max_age,ge=I.ui_locales,Se=I.id_token_hint,et=I.login_hint,st=I.acr_values,Ne=I.resource,gt=I.request,ve=I.request_uri,tt=I.response_mode,J=I.extraQueryParams,xe=I.extraTokenParams,Xe=I.request_type,je=I.skipUserInfo,dt=arguments[1];l.Log.debug("OidcClient.createSigninRequest");var It=this._settings.client_id;$=$||this._settings.response_type,B=B||this._settings.scope,W=W||this._settings.redirect_uri,Ie=Ie||this._settings.prompt,K=K||this._settings.display,ie=ie||this._settings.max_age,ge=ge||this._settings.ui_locales,st=st||this._settings.acr_values,Ne=Ne||this._settings.resource,tt=tt||this._settings.response_mode,J=J||this._settings.extraQueryParams,xe=xe||this._settings.extraTokenParams;var Mt=this._settings.authority;return f.SigninRequest.isCode($)&&$!=="code"?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(Me){l.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",Me);var le=new f.SigninRequest({url:Me,client_id:It,redirect_uri:W,response_type:$,scope:B,data:Y||q,authority:Mt,prompt:Ie,display:K,max_age:ie,ui_locales:ge,id_token_hint:Se,login_hint:et,acr_values:st,resource:Ne,request:gt,request_uri:ve,extraQueryParams:J,extraTokenParams:xe,request_type:Xe,response_mode:tt,client_secret:F._settings.client_secret,skipUserInfo:je}),Te=le.state;return(dt=dt||F._stateStore).set(Te.id,Te.toStorageString()).then(function(){return le})})},P.prototype.readSigninResponseState=function(F,I){var $=arguments.length>2&&arguments[2]!==void 0&&arguments[2];l.Log.debug("OidcClient.readSigninResponseState");var B=this._settings.response_mode==="query"||!this._settings.response_mode&&f.SigninRequest.isCode(this._settings.response_type),W=B?"?":"#",Y=new m.SigninResponse(F,W);if(!Y.state)return l.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));I=I||this._stateStore;var q=$?I.remove.bind(I):I.get.bind(I);return q(Y.state).then(function(Ie){if(!Ie)throw l.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:A.SigninState.fromStorageString(Ie),response:Y}})},P.prototype.processSigninResponse=function(F,I){var $=this;return l.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(F,I,!0).then(function(B){var W=B.state,Y=B.response;return l.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),$._validator.validateSigninResponse(W,Y)})},P.prototype.createSignoutRequest=function(){var F=this,I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=I.id_token_hint,B=I.data,W=I.state,Y=I.post_logout_redirect_uri,q=I.extraQueryParams,Ie=I.request_type,K=arguments[1];return l.Log.debug("OidcClient.createSignoutRequest"),Y=Y||this._settings.post_logout_redirect_uri,q=q||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(ie){if(!ie)throw l.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");l.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",ie);var ge=new b.SignoutRequest({url:ie,id_token_hint:$,post_logout_redirect_uri:Y,data:B||W,extraQueryParams:q,request_type:Ie}),Se=ge.state;return Se&&(l.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(K=K||F._stateStore).set(Se.id,Se.toStorageString())),ge})},P.prototype.readSignoutResponseState=function(F,I){var $=arguments.length>2&&arguments[2]!==void 0&&arguments[2];l.Log.debug("OidcClient.readSignoutResponseState");var B=new _.SignoutResponse(F);if(!B.state)return l.Log.debug("OidcClient.readSignoutResponseState: No state in response"),B.error?(l.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",B.error),Promise.reject(new p.ErrorResponse(B))):Promise.resolve({state:void 0,response:B});var W=B.state;I=I||this._stateStore;var Y=$?I.remove.bind(I):I.get.bind(I);return Y(W).then(function(q){if(!q)throw l.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:T.State.fromStorageString(q),response:B}})},P.prototype.processSignoutResponse=function(F,I){var $=this;return l.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(F,I,!0).then(function(B){var W=B.state,Y=B.response;return W?(l.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),$._validator.validateSignoutResponse(W,Y)):(l.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),Y)})},P.prototype.clearStaleState=function(F){return l.Log.debug("OidcClient.clearStaleState"),F=F||this._stateStore,T.State.clearStaleState(F,this.settings.staleStateAge)},d(P,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),P}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.TokenClient=void 0;var d=s(7),l=s(2),c=s(0);function p(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}a.TokenClient=function(){function f(m){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.JsonService,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.MetadataService;if(p(this,f),!m)throw c.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=m,this._jsonService=new b,this._metadataService=new _(this._settings)}return f.prototype.exchangeCode=function(){var b=this,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(_=Object.assign({},_)).grant_type=_.grant_type||"authorization_code",_.client_id=_.client_id||this._settings.client_id,_.client_secret=_.client_secret||this._settings.client_secret,_.redirect_uri=_.redirect_uri||this._settings.redirect_uri;var A=void 0,T=_._client_authentication||this._settings._client_authentication;return delete _._client_authentication,_.code?_.redirect_uri?_.code_verifier?_.client_id?_.client_secret||T!="client_secret_basic"?(T=="client_secret_basic"&&(A=_.client_id+":"+_.client_secret,delete _.client_id,delete _.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(x){return c.Log.debug("TokenClient.exchangeCode: Received token endpoint"),b._jsonService.postForm(x,_,A).then(function(P){return c.Log.debug("TokenClient.exchangeCode: response received"),P})})):(c.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(c.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(c.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(c.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(c.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},f.prototype.exchangeRefreshToken=function(){var b=this,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(_=Object.assign({},_)).grant_type=_.grant_type||"refresh_token",_.client_id=_.client_id||this._settings.client_id,_.client_secret=_.client_secret||this._settings.client_secret;var A=void 0,T=_._client_authentication||this._settings._client_authentication;return delete _._client_authentication,_.refresh_token?_.client_id?(T=="client_secret_basic"&&(A=_.client_id+":"+_.client_secret,delete _.client_id,delete _.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(x){return c.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),b._jsonService.postForm(x,_,A).then(function(P){return c.Log.debug("TokenClient.exchangeRefreshToken: response received"),P})})):(c.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(c.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},f}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.ErrorResponse=void 0;var d=s(0);function l(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}function c(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?p:f}a.ErrorResponse=function(p){function f(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=m.error,_=m.error_description,A=m.error_uri,T=m.state,x=m.session_state;if(l(this,f),!b)throw d.Log.error("No error passed to ErrorResponse"),new Error("error");var P=c(this,p.call(this,_||b));return P.name="ErrorResponse",P.error=b,P.error_description=_,P.error_uri=A,P.state=T,P.session_state=x,P}return function(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}(f,p),f}(Error)},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SigninState=void 0;var d=function(){function _(A,T){for(var x=0;x<T.length;x++){var P=T[x];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(A,P.key,P)}}return function(A,T,x){return T&&_(A.prototype,T),x&&_(A,x),A}}(),l=s(0),c=s(9),p=s(4),f=function(A){return A&&A.__esModule?A:{default:A}}(s(14));function m(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function b(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||typeof A!="object"&&typeof A!="function"?_:A}a.SigninState=function(_){function A(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=T.nonce,P=T.authority,R=T.client_id,F=T.redirect_uri,I=T.code_verifier,$=T.response_mode,B=T.client_secret,W=T.scope,Y=T.extraTokenParams,q=T.skipUserInfo;m(this,A);var Ie=b(this,_.call(this,arguments[0]));if(x===!0?Ie._nonce=(0,f.default)():x&&(Ie._nonce=x),I===!0?Ie._code_verifier=(0,f.default)()+(0,f.default)()+(0,f.default)():I&&(Ie._code_verifier=I),Ie.code_verifier){var K=p.JoseUtil.hashString(Ie.code_verifier,"SHA256");Ie._code_challenge=p.JoseUtil.hexToBase64Url(K)}return Ie._redirect_uri=F,Ie._authority=P,Ie._client_id=R,Ie._response_mode=$,Ie._client_secret=B,Ie._scope=W,Ie._extraTokenParams=Y,Ie._skipUserInfo=q,Ie}return function(x,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);x.prototype=Object.create(P&&P.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(x,P):x.__proto__=P)}(A,_),A.prototype.toStorageString=function(){return l.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},A.fromStorageString=function(x){return l.Log.debug("SigninState.fromStorageString"),new A(JSON.parse(x))},d(A,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),A}(c.State)},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return(d!="undefined"&&d!==null&&d.getRandomValues!==void 0?l:c)().replace(/-/g,"")};var d=typeof window<"u"?window.crypto||window.msCrypto:null;function l(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(p){return(p^d.getRandomValues(new Uint8Array(1))[0]&15>>p/4).toString(16)})}function c(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(p){return(p^16*Math.random()>>p/4).toString(16)})}i.exports=a.default},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.User=void 0;var d=function(){function c(p,f){for(var m=0;m<f.length;m++){var b=f[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}return function(p,f,m){return f&&c(p.prototype,f),m&&c(p,m),p}}(),l=s(0);a.User=function(){function c(p){var f=p.id_token,m=p.session_state,b=p.access_token,_=p.refresh_token,A=p.token_type,T=p.scope,x=p.profile,P=p.expires_at,R=p.state;(function(I,$){if(!(I instanceof $))throw new TypeError("Cannot call a class as a function")})(this,c),this.id_token=f,this.session_state=m,this.access_token=b,this.refresh_token=_,this.token_type=A,this.scope=T,this.profile=x,this.expires_at=P,this.state=R}return c.prototype.toStorageString=function(){return l.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},c.fromStorageString=function(f){return l.Log.debug("User.fromStorageString"),new c(JSON.parse(f))},d(c,[{key:"expires_in",get:function(){if(this.expires_at){var f=parseInt(Date.now()/1e3);return this.expires_at-f}},set:function(f){var m=parseInt(f);if(typeof m=="number"&&m>0){var b=parseInt(Date.now()/1e3);this.expires_at=b+m}}},{key:"expired",get:function(){var f=this.expires_in;if(f!==void 0)return f<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),c}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.AccessTokenEvents=void 0;var d=s(0),l=s(46);function c(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}a.AccessTokenEvents=function(){function p(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=f.accessTokenExpiringNotificationTime,b=m===void 0?60:m,_=f.accessTokenExpiringTimer,A=_===void 0?new l.Timer("Access token expiring"):_,T=f.accessTokenExpiredTimer,x=T===void 0?new l.Timer("Access token expired"):T;c(this,p),this._accessTokenExpiringNotificationTime=b,this._accessTokenExpiring=A,this._accessTokenExpired=x}return p.prototype.load=function(m){if(m.access_token&&m.expires_in!==void 0){var b=m.expires_in;if(d.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",b),b>0){var _=b-this._accessTokenExpiringNotificationTime;_<=0&&(_=1),d.Log.debug("AccessTokenEvents.load: registering expiring timer in:",_),this._accessTokenExpiring.init(_)}else d.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var A=b+1;d.Log.debug("AccessTokenEvents.load: registering expired timer in:",A),this._accessTokenExpired.init(A)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},p.prototype.unload=function(){d.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},p.prototype.addAccessTokenExpiring=function(m){this._accessTokenExpiring.addHandler(m)},p.prototype.removeAccessTokenExpiring=function(m){this._accessTokenExpiring.removeHandler(m)},p.prototype.addAccessTokenExpired=function(m){this._accessTokenExpired.addHandler(m)},p.prototype.removeAccessTokenExpired=function(m){this._accessTokenExpired.removeHandler(m)},p}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.Event=void 0;var d=s(0);a.Event=function(){function l(c){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,l),this._name=c,this._callbacks=[]}return l.prototype.addHandler=function(p){this._callbacks.push(p)},l.prototype.removeHandler=function(p){var f=this._callbacks.findIndex(function(m){return m===p});f>=0&&this._callbacks.splice(f,1)},l.prototype.raise=function(){d.Log.debug("Event: Raising event: "+this._name);for(var p=0;p<this._callbacks.length;p++){var f;(f=this._callbacks)[p].apply(f,arguments)}},l}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SessionMonitor=void 0;var d=function(){function m(b,_){for(var A=0;A<_.length;A++){var T=_[A];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(b,T.key,T)}}return function(b,_,A){return _&&m(b.prototype,_),A&&m(b,A),b}}(),l=s(0),c=s(19),p=s(1);function f(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}a.SessionMonitor=function(){function m(b){var _=this,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.CheckSessionIFrame,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.Global.timer;if(f(this,m),!b)throw l.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=b,this._CheckSessionIFrameCtor=A,this._timer=T,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(x){x?_._start(x):_._settings.monitorAnonymousSession&&_._userManager.querySessionStatus().then(function(P){var R={session_state:P.session_state};P.sub&&P.sid&&(R.profile={sub:P.sub,sid:P.sid}),_._start(R)}).catch(function(P){l.Log.error("SessionMonitor ctor: error from querySessionStatus:",P.message)})}).catch(function(x){l.Log.error("SessionMonitor ctor: error from getUser:",x.message)}))}return m.prototype._start=function(_){var A=this,T=_.session_state;T&&(_.profile?(this._sub=_.profile.sub,this._sid=_.profile.sid,l.Log.debug("SessionMonitor._start: session_state:",T,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,l.Log.debug("SessionMonitor._start: session_state:",T,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(T):this._metadataService.getCheckSessionIframe().then(function(x){if(x){l.Log.debug("SessionMonitor._start: Initializing check session iframe");var P=A._client_id,R=A._checkSessionInterval,F=A._stopCheckSessionOnError;A._checkSessionIFrame=new A._CheckSessionIFrameCtor(A._callback.bind(A),P,x,R,F),A._checkSessionIFrame.load().then(function(){A._checkSessionIFrame.start(T)})}else l.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(x){l.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",x.message)}))},m.prototype._stop=function(){var _=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(l.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var A=this._timer.setInterval(function(){_._timer.clearInterval(A),_._userManager.querySessionStatus().then(function(T){var x={session_state:T.session_state};T.sub&&T.sid&&(x.profile={sub:T.sub,sid:T.sid}),_._start(x)}).catch(function(T){l.Log.error("SessionMonitor: error from querySessionStatus:",T.message)})},1e3)},m.prototype._callback=function(){var _=this;this._userManager.querySessionStatus().then(function(A){var T=!0;A?A.sub===_._sub?(T=!1,_._checkSessionIFrame.start(A.session_state),A.sid===_._sid?l.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",A.session_state):(l.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",A.session_state),_._userManager.events._raiseUserSessionChanged())):l.Log.debug("SessionMonitor._callback: Different subject signed into OP:",A.sub):l.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),T&&(_._sub?(l.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),_._userManager.events._raiseUserSignedOut()):(l.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),_._userManager.events._raiseUserSignedIn()))}).catch(function(A){_._sub&&(l.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",A.message),_._userManager.events._raiseUserSignedOut())})},d(m,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),m}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.CheckSessionIFrame=void 0;var d=s(0);function l(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}a.CheckSessionIFrame=function(){function c(p,f,m,b){var _=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];l(this,c),this._callback=p,this._client_id=f,this._url=m,this._interval=b||2e3,this._stopOnError=_;var A=m.indexOf("/",m.indexOf("//")+2);this._frame_origin=m.substr(0,A),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=m}return c.prototype.load=function(){var f=this;return new Promise(function(m){f._frame.onload=function(){m()},window.document.body.appendChild(f._frame),f._boundMessageEvent=f._message.bind(f),window.addEventListener("message",f._boundMessageEvent,!1)})},c.prototype._message=function(f){f.origin===this._frame_origin&&f.source===this._frame.contentWindow&&(f.data==="error"?(d.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):f.data==="changed"?(d.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):d.Log.debug("CheckSessionIFrame: "+f.data+" message from check session op iframe"))},c.prototype.start=function(f){var m=this;if(this._session_state!==f){d.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=f;var b=function(){m._frame.contentWindow.postMessage(m._client_id+" "+m._session_state,m._frame_origin)};b(),this._timer=window.setInterval(b,this._interval)}},c.prototype.stop=function(){this._session_state=null,this._timer&&(d.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},c}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.TokenRevocationClient=void 0;var d=s(0),l=s(2),c=s(1);function p(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}var f="access_token",m="refresh_token";a.TokenRevocationClient=function(){function b(_){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.Global.XMLHttpRequest,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.MetadataService;if(p(this,b),!_)throw d.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=_,this._XMLHttpRequestCtor=A,this._metadataService=new T(this._settings)}return b.prototype.revoke=function(A,T){var x=this,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"access_token";if(!A)throw d.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(P!==f&&P!=m)throw d.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(R){if(R){d.Log.debug("TokenRevocationClient.revoke: Revoking "+P);var F=x._settings.client_id,I=x._settings.client_secret;return x._revoke(R,F,I,A,P)}if(T)throw d.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},b.prototype._revoke=function(A,T,x,P,R){var F=this;return new Promise(function(I,$){var B=new F._XMLHttpRequestCtor;B.open("POST",A),B.onload=function(){d.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",B.status),B.status===200?I():$(Error(B.statusText+" ("+B.status+")"))},B.onerror=function(){d.Log.debug("TokenRevocationClient.revoke: Network Error."),$("Network Error")};var W="client_id="+encodeURIComponent(T);x&&(W+="&client_secret="+encodeURIComponent(x)),W+="&token_type_hint="+encodeURIComponent(R),W+="&token="+encodeURIComponent(P),B.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),B.send(W)})},b}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.CordovaPopupWindow=void 0;var d=function(){function c(p,f){for(var m=0;m<f.length;m++){var b=f[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}return function(p,f,m){return f&&c(p.prototype,f),m&&c(p,m),p}}(),l=s(0);a.CordovaPopupWindow=function(){function c(p){var f=this;(function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")})(this,c),this._promise=new Promise(function(m,b){f._resolve=m,f._reject=b}),this.features=p.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=p.popupWindowTarget||"_blank",this.redirect_uri=p.startUrl,l.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return c.prototype._isInAppBrowserInstalled=function(f){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(m){return f.hasOwnProperty(m)})},c.prototype.navigate=function(f){if(f&&f.url){if(!window.cordova)return this._error("cordova is undefined");var m=window.cordova.require("cordova/plugin_list").metadata;if(this._isInAppBrowserInstalled(m)===!1)return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(f.url,this.target,this.features),this._popup?(l.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},c.prototype._loadStartCallback=function(f){f.url.indexOf(this.redirect_uri)===0&&this._success({url:f.url})},c.prototype._exitCallback=function(f){this._error(f)},c.prototype._success=function(f){this._cleanup(),l.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(f)},c.prototype._error=function(f){this._cleanup(),l.Log.error(f),this._reject(new Error(f))},c.prototype.close=function(){this._cleanup()},c.prototype._cleanup=function(){this._popup&&(l.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},d(c,[{key:"promise",get:function(){return this._promise}}]),c}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0});var d=s(0),l=s(10),c=s(5),p=s(6),f=s(37),m=s(38),b=s(16),_=s(2),A=s(48),T=s(49),x=s(19),P=s(20),R=s(18),F=s(1),I=s(15),$=s(50);a.default={Version:$.Version,Log:d.Log,OidcClient:l.OidcClient,OidcClientSettings:c.OidcClientSettings,WebStorageStateStore:p.WebStorageStateStore,InMemoryWebStorage:f.InMemoryWebStorage,UserManager:m.UserManager,AccessTokenEvents:b.AccessTokenEvents,MetadataService:_.MetadataService,CordovaPopupNavigator:A.CordovaPopupNavigator,CordovaIFrameNavigator:T.CordovaIFrameNavigator,CheckSessionIFrame:x.CheckSessionIFrame,TokenRevocationClient:P.TokenRevocationClient,SessionMonitor:R.SessionMonitor,Global:F.Global,User:I.User},i.exports=a.default},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.ClockService=function(){function d(){(function(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")})(this,d)}return d.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},d}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.ResponseValidator=void 0;var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},l=s(0),c=s(2),p=s(25),f=s(11),m=s(12),b=s(4);function _(T,x){if(!(T instanceof x))throw new TypeError("Cannot call a class as a function")}var A=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];a.ResponseValidator=function(){function T(x){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.MetadataService,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.UserInfoService,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:b.JoseUtil,I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:f.TokenClient;if(_(this,T),!x)throw l.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=x,this._metadataService=new P(this._settings),this._userInfoService=new R(this._settings),this._joseUtil=F,this._tokenClient=new I(this._settings)}return T.prototype.validateSigninResponse=function(P,R){var F=this;return l.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(P,R).then(function(I){return l.Log.debug("ResponseValidator.validateSigninResponse: state processed"),F._validateTokens(P,I).then(function($){return l.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),F._processClaims(P,$).then(function(B){return l.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),B})})})},T.prototype.validateSignoutResponse=function(P,R){return P.id!==R.state?(l.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(l.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),R.state=P.data,R.error?(l.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",R.error),Promise.reject(new m.ErrorResponse(R))):Promise.resolve(R))},T.prototype._processSigninParams=function(P,R){if(P.id!==R.state)return l.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!P.client_id)return l.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!P.authority)return l.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==P.authority)return l.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=P.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==P.client_id)return l.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=P.client_id;return l.Log.debug("ResponseValidator._processSigninParams: state validated"),R.state=P.data,R.error?(l.Log.warn("ResponseValidator._processSigninParams: Response was error",R.error),Promise.reject(new m.ErrorResponse(R))):P.nonce&&!R.id_token?(l.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!P.nonce&&R.id_token?(l.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):P.code_verifier&&!R.code?(l.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!P.code_verifier&&R.code?(l.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(R.scope||(R.scope=P.scope),Promise.resolve(R))},T.prototype._processClaims=function(P,R){var F=this;if(R.isOpenIdConnect){if(l.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),R.profile=this._filterProtocolClaims(R.profile),P.skipUserInfo!==!0&&this._settings.loadUserInfo&&R.access_token)return l.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(R.access_token).then(function(I){return l.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),I.sub!==R.profile.sub?(l.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(R.profile=F._mergeClaims(R.profile,I),l.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",R.profile),R)});l.Log.debug("ResponseValidator._processClaims: not loading user info")}else l.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(R)},T.prototype._mergeClaims=function(P,R){var F=Object.assign({},P);for(var I in R){var $=R[I];Array.isArray($)||($=[$]);for(var B=0;B<$.length;B++){var W=$[B];F[I]?Array.isArray(F[I])?F[I].indexOf(W)<0&&F[I].push(W):F[I]!==W&&((W===void 0?"undefined":d(W))==="object"&&this._settings.mergeClaims?F[I]=this._mergeClaims(F[I],W):F[I]=[F[I],W]):F[I]=W}}return F},T.prototype._filterProtocolClaims=function(P){l.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",P);var R=Object.assign({},P);return this._settings._filterProtocolClaims?(A.forEach(function(F){delete R[F]}),l.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",R)):l.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),R},T.prototype._validateTokens=function(P,R){return R.code?(l.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(P,R)):R.id_token?R.access_token?(l.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(P,R)):(l.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(P,R)):(l.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(R))},T.prototype._processCode=function(P,R){var F=this,I={client_id:P.client_id,client_secret:P.client_secret,code:R.code,redirect_uri:P.redirect_uri,code_verifier:P.code_verifier};return P.extraTokenParams&&d(P.extraTokenParams)==="object"&&Object.assign(I,P.extraTokenParams),this._tokenClient.exchangeCode(I).then(function($){for(var B in $)R[B]=$[B];return R.id_token?(l.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),F._validateIdTokenAttributes(P,R)):(l.Log.debug("ResponseValidator._processCode: token response successful, returning response"),R)})},T.prototype._validateIdTokenAttributes=function(P,R){var F=this;return this._metadataService.getIssuer().then(function(I){var $=P.client_id,B=F._settings.clockSkew;return l.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",B),F._settings.getEpochTime().then(function(W){return F._joseUtil.validateJwtAttributes(R.id_token,I,$,B,W).then(function(Y){return P.nonce&&P.nonce!==Y.nonce?(l.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):Y.sub?(R.profile=Y,R):(l.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},T.prototype._validateIdTokenAndAccessToken=function(P,R){var F=this;return this._validateIdToken(P,R).then(function(I){return F._validateAccessToken(I)})},T.prototype._getSigningKeyForJwt=function(P){var R=this;return this._metadataService.getSigningKeys().then(function(F){var I=P.header.kid;if(!F)return l.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));l.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var $=void 0;if(I)$=F.filter(function(B){return B.kid===I})[0];else{if((F=R._filterByAlg(F,P.header.alg)).length>1)return l.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));$=F[0]}return Promise.resolve($)})},T.prototype._getSigningKeyForJwtWithSingleRetry=function(P){var R=this;return this._getSigningKeyForJwt(P).then(function(F){return F?Promise.resolve(F):(R._metadataService.resetSigningKeys(),R._getSigningKeyForJwt(P))})},T.prototype._validateIdToken=function(P,R){var F=this;if(!P.nonce)return l.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var I=this._joseUtil.parseJwt(R.id_token);return I&&I.header&&I.payload?P.nonce!==I.payload.nonce?(l.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function($){return l.Log.debug("ResponseValidator._validateIdToken: Received issuer"),F._getSigningKeyForJwtWithSingleRetry(I).then(function(B){if(!B)return l.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var W=P.client_id,Y=F._settings.clockSkew;return l.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",Y),F._joseUtil.validateJwt(R.id_token,B,$,W,Y).then(function(){return l.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),I.payload.sub?(R.profile=I.payload,R):(l.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(l.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",I),Promise.reject(new Error("Failed to parse id_token")))},T.prototype._filterByAlg=function(P,R){var F=null;if(R.startsWith("RS"))F="RSA";else if(R.startsWith("PS"))F="PS";else{if(!R.startsWith("ES"))return l.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",R),[];F="EC"}return l.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",F),P=P.filter(function(I){return I.kty===F}),l.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",F,P.length),P},T.prototype._validateAccessToken=function(P){if(!P.profile)return l.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!P.profile.at_hash)return l.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!P.id_token)return l.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var R=this._joseUtil.parseJwt(P.id_token);if(!R||!R.header)return l.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",R),Promise.reject(new Error("Failed to parse id_token"));var F=R.header.alg;if(!F||F.length!==5)return l.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",F),Promise.reject(new Error("Unsupported alg: "+F));var I=F.substr(2,3);if(!I)return l.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",F,I),Promise.reject(new Error("Unsupported alg: "+F));if((I=parseInt(I))!==256&&I!==384&&I!==512)return l.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",F,I),Promise.reject(new Error("Unsupported alg: "+F));var $="sha"+I,B=this._joseUtil.hashString(P.access_token,$);if(!B)return l.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",$),Promise.reject(new Error("Failed to validate at_hash"));var W=B.substr(0,B.length/2),Y=this._joseUtil.hexToBase64Url(W);return Y!==P.profile.at_hash?(l.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",Y,P.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(l.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(P))},T}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.UserInfoService=void 0;var d=s(7),l=s(2),c=s(0),p=s(4);function f(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}a.UserInfoService=function(){function m(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.JsonService,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.MetadataService,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:p.JoseUtil;if(f(this,m),!b)throw c.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=b,this._jsonService=new _(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new A(this._settings),this._joseUtil=T}return m.prototype.getClaims=function(_){var A=this;return _?this._metadataService.getUserInfoEndpoint().then(function(T){return c.Log.debug("UserInfoService.getClaims: received userinfo url",T),A._jsonService.getJson(T,_).then(function(x){return c.Log.debug("UserInfoService.getClaims: claims received",x),x})}):(c.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},m.prototype._getClaimsFromJwt=function(_){var A=this;try{var T=this._joseUtil.parseJwt(_.responseText);if(!T||!T.header||!T.payload)return c.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",T),Promise.reject(new Error("Failed to parse id_token"));var x=T.header.kid,P=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":P=this._metadataService.getIssuer();break;case"ANY":P=Promise.resolve(T.payload.iss);break;default:P=Promise.resolve(this._settings.userInfoJwtIssuer)}return P.then(function(R){return c.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+R),A._metadataService.getSigningKeys().then(function(F){if(!F)return c.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));c.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var I=void 0;if(x)I=F.filter(function(W){return W.kid===x})[0];else{if((F=A._filterByAlg(F,T.header.alg)).length>1)return c.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));I=F[0]}if(!I)return c.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var $=A._settings.client_id,B=A._settings.clockSkew;return c.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",B),A._joseUtil.validateJwt(_.responseText,I,R,$,B,void 0,!0).then(function(){return c.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),T.payload})})})}catch(R){return c.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",R.message),void reject(R)}},m.prototype._filterByAlg=function(_,A){var T=null;if(A.startsWith("RS"))T="RSA";else if(A.startsWith("PS"))T="PS";else{if(!A.startsWith("ES"))return c.Log.debug("UserInfoService._filterByAlg: alg not supported: ",A),[];T="EC"}return c.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",T),_=_.filter(function(x){return x.kty===T}),c.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",T,_.length),_},m}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.AllowedSigningAlgs=a.b64tohex=a.hextob64u=a.crypto=a.X509=a.KeyUtil=a.jws=void 0;var d=s(27);a.jws=d.jws,a.KeyUtil=d.KEYUTIL,a.X509=d.X509,a.crypto=d.crypto,a.hextob64u=d.hextob64u,a.b64tohex=d.b64tohex,a.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(i,a,s){(function(d){Object.defineProperty(a,"__esModule",{value:!0});var l,c,p,f,m,b,_,A,T,x,P,R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},F={},I={},$=$||(l=Math,p=(c={}).lib={},f=p.Base=function(){function v(){}return{extend:function(S){v.prototype=this;var C=new v;return S&&C.mixIn(S),C.hasOwnProperty("init")||(C.init=function(){C.$super.init.apply(this,arguments)}),C.init.prototype=C,C.$super=this,C},create:function(){var S=this.extend();return S.init.apply(S,arguments),S},init:function(){},mixIn:function(S){for(var C in S)S.hasOwnProperty(C)&&(this[C]=S[C]);S.hasOwnProperty("toString")&&(this.toString=S.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),m=p.WordArray=f.extend({init:function(y,S){y=this.words=y||[],this.sigBytes=S??4*y.length},toString:function(y){return(y||_).stringify(this)},concat:function(y){var S=this.words,C=y.words,H=this.sigBytes,X=y.sigBytes;if(this.clamp(),H%4)for(var oe=0;oe<X;oe++){var be=C[oe>>>2]>>>24-oe%4*8&255;S[H+oe>>>2]|=be<<24-(H+oe)%4*8}else for(oe=0;oe<X;oe+=4)S[H+oe>>>2]=C[oe>>>2];return this.sigBytes+=X,this},clamp:function(){var y=this.words,S=this.sigBytes;y[S>>>2]&=4294967295<<32-S%4*8,y.length=l.ceil(S/4)},clone:function(){var y=f.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var S=[],C=0;C<y;C+=4)S.push(4294967296*l.random()|0);return new m.init(S,y)}}),b=c.enc={},_=b.Hex={stringify:function(y){for(var S=y.words,C=y.sigBytes,H=[],X=0;X<C;X++){var oe=S[X>>>2]>>>24-X%4*8&255;H.push((oe>>>4).toString(16)),H.push((15&oe).toString(16))}return H.join("")},parse:function(y){for(var S=y.length,C=[],H=0;H<S;H+=2)C[H>>>3]|=parseInt(y.substr(H,2),16)<<24-H%8*4;return new m.init(C,S/2)}},A=b.Latin1={stringify:function(y){for(var S=y.words,C=y.sigBytes,H=[],X=0;X<C;X++){var oe=S[X>>>2]>>>24-X%4*8&255;H.push(String.fromCharCode(oe))}return H.join("")},parse:function(y){for(var S=y.length,C=[],H=0;H<S;H++)C[H>>>2]|=(255&y.charCodeAt(H))<<24-H%4*8;return new m.init(C,S)}},T=b.Utf8={stringify:function(y){try{return decodeURIComponent(escape(A.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return A.parse(unescape(encodeURIComponent(y)))}},x=p.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new m.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=T.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var S=this._data,C=S.words,H=S.sigBytes,X=this.blockSize,oe=H/(4*X),be=(oe=y?l.ceil(oe):l.max((0|oe)-this._minBufferSize,0))*X,he=l.min(4*be,H);if(be){for(var me=0;me<be;me+=X)this._doProcessBlock(C,me);var Ee=C.splice(0,be);S.sigBytes-=he}return new m.init(Ee,he)},clone:function(){var y=f.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0}),p.Hasher=x.extend({cfg:f.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){x.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){return y&&this._append(y),this._doFinalize()},blockSize:16,_createHelper:function(y){return function(S,C){return new y.init(C).finalize(S)}},_createHmacHelper:function(y){return function(S,C){return new P.HMAC.init(y,C).finalize(S)}}}),P=c.algo={},c);(function(v){var y,S=(y=$).lib,C=S.Base,H=S.WordArray;(y=y.x64={}).Word=C.extend({init:function(oe,be){this.high=oe,this.low=be}}),y.WordArray=C.extend({init:function(oe,be){oe=this.words=oe||[],this.sigBytes=be??8*oe.length},toX32:function(){for(var oe=this.words,be=oe.length,he=[],me=0;me<be;me++){var Ee=oe[me];he.push(Ee.high),he.push(Ee.low)}return H.create(he,this.sigBytes)},clone:function(){for(var oe=C.clone.call(this),be=oe.words=this.words.slice(0),he=be.length,me=0;me<he;me++)be[me]=be[me].clone();return oe}})})(),function(){var v=$,y=v.lib.WordArray;v.enc.Base64={stringify:function(C){var H=C.words,X=C.sigBytes,oe=this._map;C.clamp(),C=[];for(var be=0;be<X;be+=3)for(var he=(H[be>>>2]>>>24-be%4*8&255)<<16|(H[be+1>>>2]>>>24-(be+1)%4*8&255)<<8|H[be+2>>>2]>>>24-(be+2)%4*8&255,me=0;4>me&&be+.75*me<X;me++)C.push(oe.charAt(he>>>6*(3-me)&63));if(H=oe.charAt(64))for(;C.length%4;)C.push(H);return C.join("")},parse:function(C){var H=C.length,X=this._map;(oe=X.charAt(64))&&(oe=C.indexOf(oe))!=-1&&(H=oe);for(var oe=[],be=0,he=0;he<H;he++)if(he%4){var me=X.indexOf(C.charAt(he-1))<<he%4*2,Ee=X.indexOf(C.charAt(he))>>>6-he%4*2;oe[be>>>2]|=(me|Ee)<<24-be%4*8,be++}return y.create(oe,be)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(v){for(var y=$,S=(H=y.lib).WordArray,C=H.Hasher,H=y.algo,X=[],oe=[],be=function(pt){return 4294967296*(pt-(0|pt))|0},he=2,me=0;64>me;){var Ee;e:{Ee=he;for(var Ae=v.sqrt(Ee),De=2;De<=Ae;De++)if(!(Ee%De)){Ee=!1;break e}Ee=!0}Ee&&(8>me&&(X[me]=be(v.pow(he,.5))),oe[me]=be(v.pow(he,1/3)),me++),he++}var Ge=[];H=H.SHA256=C.extend({_doReset:function(){this._hash=new S.init(X.slice(0))},_doProcessBlock:function(pt,_t){for(var ae=this._hash.words,_e=ae[0],Pe=ae[1],Fe=ae[2],ut=ae[3],Et=ae[4],cr=ae[5],Bt=ae[6],$r=ae[7],sr=0;64>sr;sr++){if(16>sr)Ge[sr]=0|pt[_t+sr];else{var hr=Ge[sr-15],en=Ge[sr-2];Ge[sr]=((hr<<25|hr>>>7)^(hr<<14|hr>>>18)^hr>>>3)+Ge[sr-7]+((en<<15|en>>>17)^(en<<13|en>>>19)^en>>>10)+Ge[sr-16]}hr=$r+((Et<<26|Et>>>6)^(Et<<21|Et>>>11)^(Et<<7|Et>>>25))+(Et&cr^~Et&Bt)+oe[sr]+Ge[sr],en=((_e<<30|_e>>>2)^(_e<<19|_e>>>13)^(_e<<10|_e>>>22))+(_e&Pe^_e&Fe^Pe&Fe),$r=Bt,Bt=cr,cr=Et,Et=ut+hr|0,ut=Fe,Fe=Pe,Pe=_e,_e=hr+en|0}ae[0]=ae[0]+_e|0,ae[1]=ae[1]+Pe|0,ae[2]=ae[2]+Fe|0,ae[3]=ae[3]+ut|0,ae[4]=ae[4]+Et|0,ae[5]=ae[5]+cr|0,ae[6]=ae[6]+Bt|0,ae[7]=ae[7]+$r|0},_doFinalize:function(){var pt=this._data,_t=pt.words,ae=8*this._nDataBytes,_e=8*pt.sigBytes;return _t[_e>>>5]|=128<<24-_e%32,_t[14+(_e+64>>>9<<4)]=v.floor(ae/4294967296),_t[15+(_e+64>>>9<<4)]=ae,pt.sigBytes=4*_t.length,this._process(),this._hash},clone:function(){var pt=C.clone.call(this);return pt._hash=this._hash.clone(),pt}}),y.SHA256=C._createHelper(H),y.HmacSHA256=C._createHmacHelper(H)}(Math),function(){function v(){return C.create.apply(C,arguments)}for(var y=$,S=y.lib.Hasher,C=(X=y.x64).Word,H=X.WordArray,X=y.algo,oe=[v(1116352408,3609767458),v(1899447441,602891725),v(3049323471,3964484399),v(3921009573,2173295548),v(961987163,4081628472),v(1508970993,3053834265),v(2453635748,2937671579),v(2870763221,3664609560),v(3624381080,2734883394),v(310598401,1164996542),v(607225278,1323610764),v(1426881987,3590304994),v(1925078388,4068182383),v(2162078206,991336113),v(2614888103,633803317),v(3248222580,3479774868),v(3835390401,2666613458),v(4022224774,944711139),v(264347078,2341262773),v(604807628,2007800933),v(770255983,1495990901),v(1249150122,1856431235),v(1555081692,3175218132),v(1996064986,2198950837),v(2554220882,3999719339),v(2821834349,766784016),v(2952996808,2566594879),v(3210313671,3203337956),v(3336571891,1034457026),v(3584528711,2466948901),v(113926993,3758326383),v(338241895,168717936),v(666307205,1188179964),v(773529912,1546045734),v(1294757372,1522805485),v(1396182291,2643833823),v(1695183700,2343527390),v(1986661051,1014477480),v(2177026350,1206759142),v(2456956037,344077627),v(2730485921,1290863460),v(2820302411,3158454273),v(3259730800,3505952657),v(3345764771,106217008),v(3516065817,3606008344),v(3600352804,1432725776),v(4094571909,1467031594),v(275423344,851169720),v(430227734,3100823752),v(506948616,1363258195),v(659060556,3750685593),v(883997877,3785050280),v(958139571,3318307427),v(1322822218,3812723403),v(1537002063,2003034995),v(1747873779,3602036899),v(1955562222,1575990012),v(2024104815,1125592928),v(2227730452,2716904306),v(2361852424,442776044),v(2428436474,593698344),v(2756734187,3733110249),v(3204031479,2999351573),v(3329325298,3815920427),v(3391569614,3928383900),v(3515267271,566280711),v(3940187606,3454069534),v(4118630271,4000239992),v(116418474,1914138554),v(174292421,2731055270),v(289380356,3203993006),v(460393269,320620315),v(685471733,587496836),v(852142971,1086792851),v(1017036298,365543100),v(1126000580,2618297676),v(1288033470,3409855158),v(1501505948,4234509866),v(1607167915,987167468),v(1816402316,1246189591)],be=[],he=0;80>he;he++)be[he]=v();X=X.SHA512=S.extend({_doReset:function(){this._hash=new H.init([new C.init(1779033703,4089235720),new C.init(3144134277,2227873595),new C.init(1013904242,4271175723),new C.init(2773480762,1595750129),new C.init(1359893119,2917565137),new C.init(2600822924,725511199),new C.init(528734635,4215389547),new C.init(1541459225,327033209)])},_doProcessBlock:function(Ee,Ae){for(var De=(Pe=this._hash.words)[0],Ge=Pe[1],nt=Pe[2],pt=Pe[3],_t=Pe[4],ae=Pe[5],_e=Pe[6],Pe=Pe[7],Fe=De.high,ut=De.low,Et=Ge.high,cr=Ge.low,Bt=nt.high,$r=nt.low,sr=pt.high,hr=pt.low,en=_t.high,fr=_t.low,tn=ae.high,Xr=ae.low,Tn=_e.high,Yr=_e.low,Zr=Pe.high,vn=Pe.low,Rr=Fe,jn=ut,Ei=Et,Xi=cr,Cn=Bt,Vi=$r,$a=sr,lo=hr,En=en,$n=fr,xa=tn,qn=Xr,Yo=Tn,ua=Yr,U=Zr,te=vn,ne=0;80>ne;ne++){var fe=be[ne];if(16>ne)var Ue=fe.high=0|Ee[Ae+2*ne],ye=fe.low=0|Ee[Ae+2*ne+1];else{Ue=((ye=(Ue=be[ne-15]).high)>>>1|(He=Ue.low)<<31)^(ye>>>8|He<<24)^ye>>>7;var He=(He>>>1|ye<<31)^(He>>>8|ye<<24)^(He>>>7|ye<<25),Rt=((ye=(Rt=be[ne-2]).high)>>>19|(bt=Rt.low)<<13)^(ye<<3|bt>>>29)^ye>>>6,bt=(bt>>>19|ye<<13)^(bt<<3|ye>>>29)^(bt>>>6|ye<<26),Ot=(ye=be[ne-7]).high,$t=(jt=be[ne-16]).high,jt=jt.low;Ue=(Ue=(Ue=Ue+Ot+((ye=He+ye.low)>>>0<He>>>0?1:0))+Rt+((ye=ye+bt)>>>0<bt>>>0?1:0))+$t+((ye=ye+jt)>>>0<jt>>>0?1:0),fe.high=Ue,fe.low=ye}Ot=En&xa^~En&Yo,jt=$n&qn^~$n&ua,fe=Rr&Ei^Rr&Cn^Ei&Cn;var zt=jn&Xi^jn&Vi^Xi&Vi,Dt=(He=(Rr>>>28|jn<<4)^(Rr<<30|jn>>>2)^(Rr<<25|jn>>>7),Rt=(jn>>>28|Rr<<4)^(jn<<30|Rr>>>2)^(jn<<25|Rr>>>7),(bt=oe[ne]).high),Wt=bt.low;$t=U+((En>>>14|$n<<18)^(En>>>18|$n<<14)^(En<<23|$n>>>9))+((bt=te+(($n>>>14|En<<18)^($n>>>18|En<<14)^($n<<23|En>>>9)))>>>0<te>>>0?1:0),U=Yo,te=ua,Yo=xa,ua=qn,xa=En,qn=$n,En=$a+($t=($t=($t=$t+Ot+((bt=bt+jt)>>>0<jt>>>0?1:0))+Dt+((bt=bt+Wt)>>>0<Wt>>>0?1:0))+Ue+((bt=bt+ye)>>>0<ye>>>0?1:0))+(($n=lo+bt|0)>>>0<lo>>>0?1:0)|0,$a=Cn,lo=Vi,Cn=Ei,Vi=Xi,Ei=Rr,Xi=jn,Rr=$t+(fe=He+fe+((ye=Rt+zt)>>>0<Rt>>>0?1:0))+((jn=bt+ye|0)>>>0<bt>>>0?1:0)|0}ut=De.low=ut+jn,De.high=Fe+Rr+(ut>>>0<jn>>>0?1:0),cr=Ge.low=cr+Xi,Ge.high=Et+Ei+(cr>>>0<Xi>>>0?1:0),$r=nt.low=$r+Vi,nt.high=Bt+Cn+($r>>>0<Vi>>>0?1:0),hr=pt.low=hr+lo,pt.high=sr+$a+(hr>>>0<lo>>>0?1:0),fr=_t.low=fr+$n,_t.high=en+En+(fr>>>0<$n>>>0?1:0),Xr=ae.low=Xr+qn,ae.high=tn+xa+(Xr>>>0<qn>>>0?1:0),Yr=_e.low=Yr+ua,_e.high=Tn+Yo+(Yr>>>0<ua>>>0?1:0),vn=Pe.low=vn+te,Pe.high=Zr+U+(vn>>>0<te>>>0?1:0)},_doFinalize:function(){var Ee=this._data,Ae=Ee.words,De=8*this._nDataBytes,Ge=8*Ee.sigBytes;return Ae[Ge>>>5]|=128<<24-Ge%32,Ae[30+(Ge+128>>>10<<5)]=Math.floor(De/4294967296),Ae[31+(Ge+128>>>10<<5)]=De,Ee.sigBytes=4*Ae.length,this._process(),this._hash.toX32()},clone:function(){var Ee=S.clone.call(this);return Ee._hash=this._hash.clone(),Ee},blockSize:32}),y.SHA512=S._createHelper(X),y.HmacSHA512=S._createHmacHelper(X)}(),function(){var v=$,y=(H=v.x64).Word,S=H.WordArray,C=(H=v.algo).SHA512,H=H.SHA384=C.extend({_doReset:function(){this._hash=new S.init([new y.init(3418070365,3238371032),new y.init(1654270250,914150663),new y.init(2438529370,812702999),new y.init(355462360,4144912697),new y.init(1731405415,4290775857),new y.init(2394180231,1750603025),new y.init(3675008525,1694076839),new y.init(1203062813,3204075428)])},_doFinalize:function(){var oe=C._doFinalize.call(this);return oe.sigBytes-=16,oe}});v.SHA384=C._createHelper(H),v.HmacSHA384=C._createHmacHelper(H)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var B,W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Y(v){var y,S,C="";for(y=0;y+3<=v.length;y+=3)S=parseInt(v.substring(y,y+3),16),C+=W.charAt(S>>6)+W.charAt(63&S);for(y+1==v.length?(S=parseInt(v.substring(y,y+1),16),C+=W.charAt(S<<2)):y+2==v.length&&(S=parseInt(v.substring(y,y+2),16),C+=W.charAt(S>>2)+W.charAt((3&S)<<4)),"=";(3&C.length)>0;)C+="=";return C}function q(v){var y,S,C,H="",X=0;for(y=0;y<v.length&&v.charAt(y)!="=";++y)(C=W.indexOf(v.charAt(y)))<0||(X==0?(H+=st(C>>2),S=3&C,X=1):X==1?(H+=st(S<<2|C>>4),S=15&C,X=2):X==2?(H+=st(S),H+=st(C>>2),S=3&C,X=3):(H+=st(S<<2|C>>4),H+=st(15&C),X=0));return X==1&&(H+=st(S<<2)),H}function Ie(v){var y,S=q(v),C=new Array;for(y=0;2*y<S.length;++y)C[y]=parseInt(S.substring(2*y,2*y+2),16);return C}function K(v,y,S){v!=null&&(typeof v=="number"?this.fromNumber(v,y,S):y==null&&typeof v!="string"?this.fromString(v,256):this.fromString(v,y))}function ie(){return new K(null)}F.appName=="Microsoft Internet Explorer"?(K.prototype.am=function(y,S,C,H,X,oe){for(var be=32767&S,he=S>>15;--oe>=0;){var me=32767&this[y],Ee=this[y++]>>15,Ae=he*me+Ee*be;X=((me=be*me+((32767&Ae)<<15)+C[H]+(1073741823&X))>>>30)+(Ae>>>15)+he*Ee+(X>>>30),C[H++]=1073741823&me}return X},B=30):F.appName!="Netscape"?(K.prototype.am=function(y,S,C,H,X,oe){for(;--oe>=0;){var be=S*this[y++]+C[H]+X;X=Math.floor(be/67108864),C[H++]=67108863&be}return X},B=26):(K.prototype.am=function(y,S,C,H,X,oe){for(var be=16383&S,he=S>>14;--oe>=0;){var me=16383&this[y],Ee=this[y++]>>14,Ae=he*me+Ee*be;X=((me=be*me+((16383&Ae)<<14)+C[H]+X)>>28)+(Ae>>14)+he*Ee,C[H++]=268435455&me}return X},B=28),K.prototype.DB=B,K.prototype.DM=(1<<B)-1,K.prototype.DV=1<<B,K.prototype.FV=Math.pow(2,52),K.prototype.F1=52-B,K.prototype.F2=2*B-52;var ge,Se,et=new Array;for(ge=48,Se=0;Se<=9;++Se)et[ge++]=Se;for(ge=97,Se=10;Se<36;++Se)et[ge++]=Se;for(ge=65,Se=10;Se<36;++Se)et[ge++]=Se;function st(v){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(v)}function Ne(v,y){var S=et[v.charCodeAt(y)];return S??-1}function gt(v){var y=ie();return y.fromInt(v),y}function ve(v){var y,S=1;return(y=v>>>16)!=0&&(v=y,S+=16),(y=v>>8)!=0&&(v=y,S+=8),(y=v>>4)!=0&&(v=y,S+=4),(y=v>>2)!=0&&(v=y,S+=2),(y=v>>1)!=0&&(v=y,S+=1),S}function tt(v){this.m=v}function J(v){this.m=v,this.mp=v.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<v.DB-15)-1,this.mt2=2*v.t}function xe(v,y){return v&y}function Xe(v,y){return v|y}function je(v,y){return v^y}function dt(v,y){return v&~y}function It(v){if(v==0)return-1;var y=0;return(65535&v)==0&&(v>>=16,y+=16),(255&v)==0&&(v>>=8,y+=8),(15&v)==0&&(v>>=4,y+=4),(3&v)==0&&(v>>=2,y+=2),(1&v)==0&&++y,y}function Mt(v){for(var y=0;v!=0;)v&=v-1,++y;return y}function Me(){}function le(v){return v}function Te(v){this.r2=ie(),this.q3=ie(),K.ONE.dlShiftTo(2*v.t,this.r2),this.mu=this.r2.divide(v),this.m=v}tt.prototype.convert=function(y){return y.s<0||y.compareTo(this.m)>=0?y.mod(this.m):y},tt.prototype.revert=function(y){return y},tt.prototype.reduce=function(y){y.divRemTo(this.m,null,y)},tt.prototype.mulTo=function(y,S,C){y.multiplyTo(S,C),this.reduce(C)},tt.prototype.sqrTo=function(y,S){y.squareTo(S),this.reduce(S)},J.prototype.convert=function(y){var S=ie();return y.abs().dlShiftTo(this.m.t,S),S.divRemTo(this.m,null,S),y.s<0&&S.compareTo(K.ZERO)>0&&this.m.subTo(S,S),S},J.prototype.revert=function(y){var S=ie();return y.copyTo(S),this.reduce(S),S},J.prototype.reduce=function(y){for(;y.t<=this.mt2;)y[y.t++]=0;for(var S=0;S<this.m.t;++S){var C=32767&y[S],H=C*this.mpl+((C*this.mph+(y[S]>>15)*this.mpl&this.um)<<15)&y.DM;for(y[C=S+this.m.t]+=this.m.am(0,H,y,S,0,this.m.t);y[C]>=y.DV;)y[C]-=y.DV,y[++C]++}y.clamp(),y.drShiftTo(this.m.t,y),y.compareTo(this.m)>=0&&y.subTo(this.m,y)},J.prototype.mulTo=function(y,S,C){y.multiplyTo(S,C),this.reduce(C)},J.prototype.sqrTo=function(y,S){y.squareTo(S),this.reduce(S)},K.prototype.copyTo=function(y){for(var S=this.t-1;S>=0;--S)y[S]=this[S];y.t=this.t,y.s=this.s},K.prototype.fromInt=function(y){this.t=1,this.s=y<0?-1:0,y>0?this[0]=y:y<-1?this[0]=y+this.DV:this.t=0},K.prototype.fromString=function(y,S){var C;if(S==16)C=4;else if(S==8)C=3;else if(S==256)C=8;else if(S==2)C=1;else if(S==32)C=5;else{if(S!=4)return void this.fromRadix(y,S);C=2}this.t=0,this.s=0;for(var H=y.length,X=!1,oe=0;--H>=0;){var be=C==8?255&y[H]:Ne(y,H);be<0?y.charAt(H)=="-"&&(X=!0):(X=!1,oe==0?this[this.t++]=be:oe+C>this.DB?(this[this.t-1]|=(be&(1<<this.DB-oe)-1)<<oe,this[this.t++]=be>>this.DB-oe):this[this.t-1]|=be<<oe,(oe+=C)>=this.DB&&(oe-=this.DB))}C==8&&(128&y[0])!=0&&(this.s=-1,oe>0&&(this[this.t-1]|=(1<<this.DB-oe)-1<<oe)),this.clamp(),X&&K.ZERO.subTo(this,this)},K.prototype.clamp=function(){for(var y=this.s&this.DM;this.t>0&&this[this.t-1]==y;)--this.t},K.prototype.dlShiftTo=function(y,S){var C;for(C=this.t-1;C>=0;--C)S[C+y]=this[C];for(C=y-1;C>=0;--C)S[C]=0;S.t=this.t+y,S.s=this.s},K.prototype.drShiftTo=function(y,S){for(var C=y;C<this.t;++C)S[C-y]=this[C];S.t=Math.max(this.t-y,0),S.s=this.s},K.prototype.lShiftTo=function(y,S){var C,H=y%this.DB,X=this.DB-H,oe=(1<<X)-1,be=Math.floor(y/this.DB),he=this.s<<H&this.DM;for(C=this.t-1;C>=0;--C)S[C+be+1]=this[C]>>X|he,he=(this[C]&oe)<<H;for(C=be-1;C>=0;--C)S[C]=0;S[be]=he,S.t=this.t+be+1,S.s=this.s,S.clamp()},K.prototype.rShiftTo=function(y,S){S.s=this.s;var C=Math.floor(y/this.DB);if(C>=this.t)S.t=0;else{var H=y%this.DB,X=this.DB-H,oe=(1<<H)-1;S[0]=this[C]>>H;for(var be=C+1;be<this.t;++be)S[be-C-1]|=(this[be]&oe)<<X,S[be-C]=this[be]>>H;H>0&&(S[this.t-C-1]|=(this.s&oe)<<X),S.t=this.t-C,S.clamp()}},K.prototype.subTo=function(y,S){for(var C=0,H=0,X=Math.min(y.t,this.t);C<X;)H+=this[C]-y[C],S[C++]=H&this.DM,H>>=this.DB;if(y.t<this.t){for(H-=y.s;C<this.t;)H+=this[C],S[C++]=H&this.DM,H>>=this.DB;H+=this.s}else{for(H+=this.s;C<y.t;)H-=y[C],S[C++]=H&this.DM,H>>=this.DB;H-=y.s}S.s=H<0?-1:0,H<-1?S[C++]=this.DV+H:H>0&&(S[C++]=H),S.t=C,S.clamp()},K.prototype.multiplyTo=function(y,S){var C=this.abs(),H=y.abs(),X=C.t;for(S.t=X+H.t;--X>=0;)S[X]=0;for(X=0;X<H.t;++X)S[X+C.t]=C.am(0,H[X],S,X,0,C.t);S.s=0,S.clamp(),this.s!=y.s&&K.ZERO.subTo(S,S)},K.prototype.squareTo=function(y){for(var S=this.abs(),C=y.t=2*S.t;--C>=0;)y[C]=0;for(C=0;C<S.t-1;++C){var H=S.am(C,S[C],y,2*C,0,1);(y[C+S.t]+=S.am(C+1,2*S[C],y,2*C+1,H,S.t-C-1))>=S.DV&&(y[C+S.t]-=S.DV,y[C+S.t+1]=1)}y.t>0&&(y[y.t-1]+=S.am(C,S[C],y,2*C,0,1)),y.s=0,y.clamp()},K.prototype.divRemTo=function(y,S,C){var H=y.abs();if(!(H.t<=0)){var X=this.abs();if(X.t<H.t)return S?.fromInt(0),void(C!=null&&this.copyTo(C));C==null&&(C=ie());var oe=ie(),be=this.s,he=y.s,me=this.DB-ve(H[H.t-1]);me>0?(H.lShiftTo(me,oe),X.lShiftTo(me,C)):(H.copyTo(oe),X.copyTo(C));var Ee=oe.t,Ae=oe[Ee-1];if(Ae!=0){var De=Ae*(1<<this.F1)+(Ee>1?oe[Ee-2]>>this.F2:0),Ge=this.FV/De,nt=(1<<this.F1)/De,pt=1<<this.F2,_t=C.t,ae=_t-Ee,_e=S??ie();for(oe.dlShiftTo(ae,_e),C.compareTo(_e)>=0&&(C[C.t++]=1,C.subTo(_e,C)),K.ONE.dlShiftTo(Ee,_e),_e.subTo(oe,oe);oe.t<Ee;)oe[oe.t++]=0;for(;--ae>=0;){var Pe=C[--_t]==Ae?this.DM:Math.floor(C[_t]*Ge+(C[_t-1]+pt)*nt);if((C[_t]+=oe.am(0,Pe,C,ae,0,Ee))<Pe)for(oe.dlShiftTo(ae,_e),C.subTo(_e,C);C[_t]<--Pe;)C.subTo(_e,C)}S!=null&&(C.drShiftTo(Ee,S),be!=he&&K.ZERO.subTo(S,S)),C.t=Ee,C.clamp(),me>0&&C.rShiftTo(me,C),be<0&&K.ZERO.subTo(C,C)}}},K.prototype.invDigit=function(){if(this.t<1)return 0;var y=this[0];if((1&y)==0)return 0;var S=3&y;return(S=(S=(S=(S=S*(2-(15&y)*S)&15)*(2-(255&y)*S)&255)*(2-((65535&y)*S&65535))&65535)*(2-y*S%this.DV)%this.DV)>0?this.DV-S:-S},K.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},K.prototype.exp=function(y,S){if(y>4294967295||y<1)return K.ONE;var C=ie(),H=ie(),X=S.convert(this),oe=ve(y)-1;for(X.copyTo(C);--oe>=0;)if(S.sqrTo(C,H),(y&1<<oe)>0)S.mulTo(H,X,C);else{var be=C;C=H,H=be}return S.revert(C)},K.prototype.toString=function(y){if(this.s<0)return"-"+this.negate().toString(y);var S;if(y==16)S=4;else if(y==8)S=3;else if(y==2)S=1;else if(y==32)S=5;else{if(y!=4)return this.toRadix(y);S=2}var C,H=(1<<S)-1,X=!1,oe="",be=this.t,he=this.DB-be*this.DB%S;if(be-- >0)for(he<this.DB&&(C=this[be]>>he)>0&&(X=!0,oe=st(C));be>=0;)he<S?(C=(this[be]&(1<<he)-1)<<S-he,C|=this[--be]>>(he+=this.DB-S)):(C=this[be]>>(he-=S)&H,he<=0&&(he+=this.DB,--be)),C>0&&(X=!0),X&&(oe+=st(C));return X?oe:"0"},K.prototype.negate=function(){var y=ie();return K.ZERO.subTo(this,y),y},K.prototype.abs=function(){return this.s<0?this.negate():this},K.prototype.compareTo=function(y){var S=this.s-y.s;if(S!=0)return S;var C=this.t;if((S=C-y.t)!=0)return this.s<0?-S:S;for(;--C>=0;)if((S=this[C]-y[C])!=0)return S;return 0},K.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+ve(this[this.t-1]^this.s&this.DM)},K.prototype.mod=function(y){var S=ie();return this.abs().divRemTo(y,null,S),this.s<0&&S.compareTo(K.ZERO)>0&&y.subTo(S,S),S},K.prototype.modPowInt=function(y,S){var C;return C=y<256||S.isEven()?new tt(S):new J(S),this.exp(y,C)},K.ZERO=gt(0),K.ONE=gt(1),Me.prototype.convert=le,Me.prototype.revert=le,Me.prototype.mulTo=function(y,S,C){y.multiplyTo(S,C)},Me.prototype.sqrTo=function(y,S){y.squareTo(S)},Te.prototype.convert=function(y){if(y.s<0||y.t>2*this.m.t)return y.mod(this.m);if(y.compareTo(this.m)<0)return y;var S=ie();return y.copyTo(S),this.reduce(S),S},Te.prototype.revert=function(y){return y},Te.prototype.reduce=function(y){for(y.drShiftTo(this.m.t-1,this.r2),y.t>this.m.t+1&&(y.t=this.m.t+1,y.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);y.compareTo(this.r2)<0;)y.dAddOffset(1,this.m.t+1);for(y.subTo(this.r2,y);y.compareTo(this.m)>=0;)y.subTo(this.m,y)},Te.prototype.mulTo=function(y,S,C){y.multiplyTo(S,C),this.reduce(C)},Te.prototype.sqrTo=function(y,S){y.squareTo(S),this.reduce(S)};var Je=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],se=(1<<26)/Je[Je.length-1];/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function M(){this.i=0,this.j=0,this.S=new Array}K.prototype.chunkSize=function(y){return Math.floor(Math.LN2*this.DB/Math.log(y))},K.prototype.toRadix=function(y){if(y==null&&(y=10),this.signum()==0||y<2||y>36)return"0";var S=this.chunkSize(y),C=Math.pow(y,S),H=gt(C),X=ie(),oe=ie(),be="";for(this.divRemTo(H,X,oe);X.signum()>0;)be=(C+oe.intValue()).toString(y).substr(1)+be,X.divRemTo(H,X,oe);return oe.intValue().toString(y)+be},K.prototype.fromRadix=function(y,S){this.fromInt(0),S==null&&(S=10);for(var C=this.chunkSize(S),H=Math.pow(S,C),X=!1,oe=0,be=0,he=0;he<y.length;++he){var me=Ne(y,he);me<0?y.charAt(he)=="-"&&this.signum()==0&&(X=!0):(be=S*be+me,++oe>=C&&(this.dMultiply(H),this.dAddOffset(be,0),oe=0,be=0))}oe>0&&(this.dMultiply(Math.pow(S,oe)),this.dAddOffset(be,0)),X&&K.ZERO.subTo(this,this)},K.prototype.fromNumber=function(y,S,C){if(typeof S=="number")if(y<2)this.fromInt(1);else for(this.fromNumber(y,C),this.testBit(y-1)||this.bitwiseTo(K.ONE.shiftLeft(y-1),Xe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(S);)this.dAddOffset(2,0),this.bitLength()>y&&this.subTo(K.ONE.shiftLeft(y-1),this);else{var H=new Array,X=7&y;H.length=1+(y>>3),S.nextBytes(H),X>0?H[0]&=(1<<X)-1:H[0]=0,this.fromString(H,256)}},K.prototype.bitwiseTo=function(y,S,C){var H,X,oe=Math.min(y.t,this.t);for(H=0;H<oe;++H)C[H]=S(this[H],y[H]);if(y.t<this.t){for(X=y.s&this.DM,H=oe;H<this.t;++H)C[H]=S(this[H],X);C.t=this.t}else{for(X=this.s&this.DM,H=oe;H<y.t;++H)C[H]=S(X,y[H]);C.t=y.t}C.s=S(this.s,y.s),C.clamp()},K.prototype.changeBit=function(y,S){var C=K.ONE.shiftLeft(y);return this.bitwiseTo(C,S,C),C},K.prototype.addTo=function(y,S){for(var C=0,H=0,X=Math.min(y.t,this.t);C<X;)H+=this[C]+y[C],S[C++]=H&this.DM,H>>=this.DB;if(y.t<this.t){for(H+=y.s;C<this.t;)H+=this[C],S[C++]=H&this.DM,H>>=this.DB;H+=this.s}else{for(H+=this.s;C<y.t;)H+=y[C],S[C++]=H&this.DM,H>>=this.DB;H+=y.s}S.s=H<0?-1:0,H>0?S[C++]=H:H<-1&&(S[C++]=this.DV+H),S.t=C,S.clamp()},K.prototype.dMultiply=function(y){this[this.t]=this.am(0,y-1,this,0,0,this.t),++this.t,this.clamp()},K.prototype.dAddOffset=function(y,S){if(y!=0){for(;this.t<=S;)this[this.t++]=0;for(this[S]+=y;this[S]>=this.DV;)this[S]-=this.DV,++S>=this.t&&(this[this.t++]=0),++this[S]}},K.prototype.multiplyLowerTo=function(y,S,C){var H,X=Math.min(this.t+y.t,S);for(C.s=0,C.t=X;X>0;)C[--X]=0;for(H=C.t-this.t;X<H;++X)C[X+this.t]=this.am(0,y[X],C,X,0,this.t);for(H=Math.min(y.t,S);X<H;++X)this.am(0,y[X],C,X,0,S-X);C.clamp()},K.prototype.multiplyUpperTo=function(y,S,C){--S;var H=C.t=this.t+y.t-S;for(C.s=0;--H>=0;)C[H]=0;for(H=Math.max(S-this.t,0);H<y.t;++H)C[this.t+H-S]=this.am(S-H,y[H],C,0,0,this.t+H-S);C.clamp(),C.drShiftTo(1,C)},K.prototype.modInt=function(y){if(y<=0)return 0;var S=this.DV%y,C=this.s<0?y-1:0;if(this.t>0)if(S==0)C=this[0]%y;else for(var H=this.t-1;H>=0;--H)C=(S*C+this[H])%y;return C},K.prototype.millerRabin=function(y){var S=this.subtract(K.ONE),C=S.getLowestSetBit();if(C<=0)return!1;var H=S.shiftRight(C);(y=y+1>>1)>Je.length&&(y=Je.length);for(var X=ie(),oe=0;oe<y;++oe){X.fromInt(Je[Math.floor(Math.random()*Je.length)]);var be=X.modPow(H,this);if(be.compareTo(K.ONE)!=0&&be.compareTo(S)!=0){for(var he=1;he++<C&&be.compareTo(S)!=0;)if((be=be.modPowInt(2,this)).compareTo(K.ONE)==0)return!1;if(be.compareTo(S)!=0)return!1}}return!0},K.prototype.clone=function(){var y=ie();return this.copyTo(y),y},K.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},K.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},K.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},K.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},K.prototype.toByteArray=function(){var y=this.t,S=new Array;S[0]=this.s;var C,H=this.DB-y*this.DB%8,X=0;if(y-- >0)for(H<this.DB&&(C=this[y]>>H)!=(this.s&this.DM)>>H&&(S[X++]=C|this.s<<this.DB-H);y>=0;)H<8?(C=(this[y]&(1<<H)-1)<<8-H,C|=this[--y]>>(H+=this.DB-8)):(C=this[y]>>(H-=8)&255,H<=0&&(H+=this.DB,--y)),(128&C)!=0&&(C|=-256),X==0&&(128&this.s)!=(128&C)&&++X,(X>0||C!=this.s)&&(S[X++]=C);return S},K.prototype.equals=function(y){return this.compareTo(y)==0},K.prototype.min=function(y){return this.compareTo(y)<0?this:y},K.prototype.max=function(y){return this.compareTo(y)>0?this:y},K.prototype.and=function(y){var S=ie();return this.bitwiseTo(y,xe,S),S},K.prototype.or=function(y){var S=ie();return this.bitwiseTo(y,Xe,S),S},K.prototype.xor=function(y){var S=ie();return this.bitwiseTo(y,je,S),S},K.prototype.andNot=function(y){var S=ie();return this.bitwiseTo(y,dt,S),S},K.prototype.not=function(){for(var y=ie(),S=0;S<this.t;++S)y[S]=this.DM&~this[S];return y.t=this.t,y.s=~this.s,y},K.prototype.shiftLeft=function(y){var S=ie();return y<0?this.rShiftTo(-y,S):this.lShiftTo(y,S),S},K.prototype.shiftRight=function(y){var S=ie();return y<0?this.lShiftTo(-y,S):this.rShiftTo(y,S),S},K.prototype.getLowestSetBit=function(){for(var y=0;y<this.t;++y)if(this[y]!=0)return y*this.DB+It(this[y]);return this.s<0?this.t*this.DB:-1},K.prototype.bitCount=function(){for(var y=0,S=this.s&this.DM,C=0;C<this.t;++C)y+=Mt(this[C]^S);return y},K.prototype.testBit=function(y){var S=Math.floor(y/this.DB);return S>=this.t?this.s!=0:(this[S]&1<<y%this.DB)!=0},K.prototype.setBit=function(y){return this.changeBit(y,Xe)},K.prototype.clearBit=function(y){return this.changeBit(y,dt)},K.prototype.flipBit=function(y){return this.changeBit(y,je)},K.prototype.add=function(y){var S=ie();return this.addTo(y,S),S},K.prototype.subtract=function(y){var S=ie();return this.subTo(y,S),S},K.prototype.multiply=function(y){var S=ie();return this.multiplyTo(y,S),S},K.prototype.divide=function(y){var S=ie();return this.divRemTo(y,S,null),S},K.prototype.remainder=function(y){var S=ie();return this.divRemTo(y,null,S),S},K.prototype.divideAndRemainder=function(y){var S=ie(),C=ie();return this.divRemTo(y,S,C),new Array(S,C)},K.prototype.modPow=function(y,S){var C,H,X=y.bitLength(),oe=gt(1);if(X<=0)return oe;C=X<18?1:X<48?3:X<144?4:X<768?5:6,H=X<8?new tt(S):S.isEven()?new Te(S):new J(S);var be=new Array,he=3,me=C-1,Ee=(1<<C)-1;if(be[1]=H.convert(this),C>1){var Ae=ie();for(H.sqrTo(be[1],Ae);he<=Ee;)be[he]=ie(),H.mulTo(Ae,be[he-2],be[he]),he+=2}var De,Ge,nt=y.t-1,pt=!0,_t=ie();for(X=ve(y[nt])-1;nt>=0;){for(X>=me?De=y[nt]>>X-me&Ee:(De=(y[nt]&(1<<X+1)-1)<<me-X,nt>0&&(De|=y[nt-1]>>this.DB+X-me)),he=C;(1&De)==0;)De>>=1,--he;if((X-=he)<0&&(X+=this.DB,--nt),pt)be[De].copyTo(oe),pt=!1;else{for(;he>1;)H.sqrTo(oe,_t),H.sqrTo(_t,oe),he-=2;he>0?H.sqrTo(oe,_t):(Ge=oe,oe=_t,_t=Ge),H.mulTo(_t,be[De],oe)}for(;nt>=0&&(y[nt]&1<<X)==0;)H.sqrTo(oe,_t),Ge=oe,oe=_t,_t=Ge,--X<0&&(X=this.DB-1,--nt)}return H.revert(oe)},K.prototype.modInverse=function(y){var S=y.isEven();if(this.isEven()&&S||y.signum()==0)return K.ZERO;for(var C=y.clone(),H=this.clone(),X=gt(1),oe=gt(0),be=gt(0),he=gt(1);C.signum()!=0;){for(;C.isEven();)C.rShiftTo(1,C),S?(X.isEven()&&oe.isEven()||(X.addTo(this,X),oe.subTo(y,oe)),X.rShiftTo(1,X)):oe.isEven()||oe.subTo(y,oe),oe.rShiftTo(1,oe);for(;H.isEven();)H.rShiftTo(1,H),S?(be.isEven()&&he.isEven()||(be.addTo(this,be),he.subTo(y,he)),be.rShiftTo(1,be)):he.isEven()||he.subTo(y,he),he.rShiftTo(1,he);C.compareTo(H)>=0?(C.subTo(H,C),S&&X.subTo(be,X),oe.subTo(he,oe)):(H.subTo(C,H),S&&be.subTo(X,be),he.subTo(oe,he))}return H.compareTo(K.ONE)!=0?K.ZERO:he.compareTo(y)>=0?he.subtract(y):he.signum()<0?(he.addTo(y,he),he.signum()<0?he.add(y):he):he},K.prototype.pow=function(y){return this.exp(y,new Me)},K.prototype.gcd=function(y){var S=this.s<0?this.negate():this.clone(),C=y.s<0?y.negate():y.clone();if(S.compareTo(C)<0){var H=S;S=C,C=H}var X=S.getLowestSetBit(),oe=C.getLowestSetBit();if(oe<0)return S;for(X<oe&&(oe=X),oe>0&&(S.rShiftTo(oe,S),C.rShiftTo(oe,C));S.signum()>0;)(X=S.getLowestSetBit())>0&&S.rShiftTo(X,S),(X=C.getLowestSetBit())>0&&C.rShiftTo(X,C),S.compareTo(C)>=0?(S.subTo(C,S),S.rShiftTo(1,S)):(C.subTo(S,C),C.rShiftTo(1,C));return oe>0&&C.lShiftTo(oe,C),C},K.prototype.isProbablePrime=function(y){var S,C=this.abs();if(C.t==1&&C[0]<=Je[Je.length-1]){for(S=0;S<Je.length;++S)if(C[0]==Je[S])return!0;return!1}if(C.isEven())return!1;for(S=1;S<Je.length;){for(var H=Je[S],X=S+1;X<Je.length&&H<se;)H*=Je[X++];for(H=C.modInt(H);S<X;)if(H%Je[S++]==0)return!1}return C.millerRabin(y)},K.prototype.square=function(){var y=ie();return this.squareTo(y),y},M.prototype.init=function(y){var S,C,H;for(S=0;S<256;++S)this.S[S]=S;for(C=0,S=0;S<256;++S)C=C+this.S[S]+y[S%y.length]&255,H=this.S[S],this.S[S]=this.S[C],this.S[C]=H;this.i=0,this.j=0},M.prototype.next=function(){var y;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,y=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=y,this.S[y+this.S[this.i]&255]};var D,G,re;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function we(){(function(y){G[re++]^=255&y,G[re++]^=y>>8&255,G[re++]^=y>>16&255,G[re++]^=y>>24&255,re>=256&&(re-=256)})(new Date().getTime())}if(G==null){var Ce;if(G=new Array,re=0,I!==void 0&&(I.crypto!==void 0||I.msCrypto!==void 0)){var at=I.crypto||I.msCrypto;if(at.getRandomValues){var Re=new Uint8Array(32);for(at.getRandomValues(Re),Ce=0;Ce<32;++Ce)G[re++]=Re[Ce]}else if(F.appName=="Netscape"&&F.appVersion<"5"){var ht=I.crypto.random(32);for(Ce=0;Ce<ht.length;++Ce)G[re++]=255&ht.charCodeAt(Ce)}}for(;re<256;)Ce=Math.floor(65536*Math.random()),G[re++]=Ce>>>8,G[re++]=255&Ce;re=0,we()}function Ct(){if(D==null){for(we(),(D=function(){return new M}()).init(G),re=0;re<G.length;++re)G[re]=0;re=0}return D.next()}function vt(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function We(v,y){return new K(v,y)}function $e(v,y,S){for(var C="",H=0;C.length<y;)C+=S(String.fromCharCode.apply(String,v.concat([(4278190080&H)>>24,(16711680&H)>>16,(65280&H)>>8,255&H]))),H+=1;return C}function Oe(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function lt(v,y){this.x=y,this.q=v}function Q(v,y,S,C){this.curve=v,this.x=y,this.y=S,this.z=C??K.ONE,this.zinv=null}function k(v,y,S){this.q=v,this.a=this.fromBigInteger(y),this.b=this.fromBigInteger(S),this.infinity=new Q(this,null,null)}vt.prototype.nextBytes=function(y){var S;for(S=0;S<y.length;++S)y[S]=Ct()},Oe.prototype.doPublic=function(y){return y.modPowInt(this.e,this.n)},Oe.prototype.setPublic=function(y,S){if(this.isPublic=!0,this.isPrivate=!1,typeof y!="string")this.n=y,this.e=S;else{if(!(y!=null&&S!=null&&y.length>0&&S.length>0))throw"Invalid RSA public key";this.n=We(y,16),this.e=parseInt(S,16)}},Oe.prototype.encrypt=function(y){var S=function(oe,be){if(be<oe.length+11)throw"Message too long for RSA";for(var he=new Array,me=oe.length-1;me>=0&&be>0;){var Ee=oe.charCodeAt(me--);Ee<128?he[--be]=Ee:Ee>127&&Ee<2048?(he[--be]=63&Ee|128,he[--be]=Ee>>6|192):(he[--be]=63&Ee|128,he[--be]=Ee>>6&63|128,he[--be]=Ee>>12|224)}he[--be]=0;for(var Ae=new vt,De=new Array;be>2;){for(De[0]=0;De[0]==0;)Ae.nextBytes(De);he[--be]=De[0]}return he[--be]=2,he[--be]=0,new K(he)}(y,this.n.bitLength()+7>>3);if(S==null)return null;var C=this.doPublic(S);if(C==null)return null;var H=C.toString(16);return(1&H.length)==0?H:"0"+H},Oe.prototype.encryptOAEP=function(y,S,C){var H=function(he,me,Ee,Ae){var De=j.crypto.MessageDigest,Ge=j.crypto.Util,nt=null;if(Ee||(Ee="sha1"),typeof Ee=="string"&&(nt=De.getCanonicalAlgName(Ee),Ae=De.getHashLength(nt),Ee=function(Bt){return qt(Ge.hashHex(er(Bt),nt))}),he.length+2*Ae+2>me)throw"Message too long for RSA";var pt,_t="";for(pt=0;pt<me-he.length-2*Ae-2;pt+=1)_t+="\0";var ae=Ee("")+_t+""+he,_e=new Array(Ae);new vt().nextBytes(_e);var Pe=$e(_e,ae.length,Ee),Fe=[];for(pt=0;pt<ae.length;pt+=1)Fe[pt]=ae.charCodeAt(pt)^Pe.charCodeAt(pt);var ut=$e(Fe,_e.length,Ee),Et=[0];for(pt=0;pt<_e.length;pt+=1)Et[pt+1]=_e[pt]^ut.charCodeAt(pt);return new K(Et.concat(Fe))}(y,this.n.bitLength()+7>>3,S,C);if(H==null)return null;var X=this.doPublic(H);if(X==null)return null;var oe=X.toString(16);return(1&oe.length)==0?oe:"0"+oe},Oe.prototype.type="RSA",lt.prototype.equals=function(y){return y==this||this.q.equals(y.q)&&this.x.equals(y.x)},lt.prototype.toBigInteger=function(){return this.x},lt.prototype.negate=function(){return new lt(this.q,this.x.negate().mod(this.q))},lt.prototype.add=function(y){return new lt(this.q,this.x.add(y.toBigInteger()).mod(this.q))},lt.prototype.subtract=function(y){return new lt(this.q,this.x.subtract(y.toBigInteger()).mod(this.q))},lt.prototype.multiply=function(y){return new lt(this.q,this.x.multiply(y.toBigInteger()).mod(this.q))},lt.prototype.square=function(){return new lt(this.q,this.x.square().mod(this.q))},lt.prototype.divide=function(y){return new lt(this.q,this.x.multiply(y.toBigInteger().modInverse(this.q)).mod(this.q))},Q.prototype.getX=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Q.prototype.getY=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Q.prototype.equals=function(y){return y==this||(this.isInfinity()?y.isInfinity():y.isInfinity()?this.isInfinity():!!y.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(y.z)).mod(this.curve.q).equals(K.ZERO)&&y.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(y.z)).mod(this.curve.q).equals(K.ZERO))},Q.prototype.isInfinity=function(){return this.x==null&&this.y==null||this.z.equals(K.ZERO)&&!this.y.toBigInteger().equals(K.ZERO)},Q.prototype.negate=function(){return new Q(this.curve,this.x,this.y.negate(),this.z)},Q.prototype.add=function(y){if(this.isInfinity())return y;if(y.isInfinity())return this;var S=y.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(y.z)).mod(this.curve.q),C=y.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(y.z)).mod(this.curve.q);if(K.ZERO.equals(C))return K.ZERO.equals(S)?this.twice():this.curve.getInfinity();var H=new K("3"),X=this.x.toBigInteger(),oe=this.y.toBigInteger(),be=(y.x.toBigInteger(),y.y.toBigInteger(),C.square()),he=be.multiply(C),me=X.multiply(be),Ee=S.square().multiply(this.z),Ae=Ee.subtract(me.shiftLeft(1)).multiply(y.z).subtract(he).multiply(C).mod(this.curve.q),De=me.multiply(H).multiply(S).subtract(oe.multiply(he)).subtract(Ee.multiply(S)).multiply(y.z).add(S.multiply(he)).mod(this.curve.q),Ge=he.multiply(this.z).multiply(y.z).mod(this.curve.q);return new Q(this.curve,this.curve.fromBigInteger(Ae),this.curve.fromBigInteger(De),Ge)},Q.prototype.twice=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var y=new K("3"),S=this.x.toBigInteger(),C=this.y.toBigInteger(),H=C.multiply(this.z),X=H.multiply(C).mod(this.curve.q),oe=this.curve.a.toBigInteger(),be=S.square().multiply(y);K.ZERO.equals(oe)||(be=be.add(this.z.square().multiply(oe)));var he=(be=be.mod(this.curve.q)).square().subtract(S.shiftLeft(3).multiply(X)).shiftLeft(1).multiply(H).mod(this.curve.q),me=be.multiply(y).multiply(S).subtract(X.shiftLeft(1)).shiftLeft(2).multiply(X).subtract(be.square().multiply(be)).mod(this.curve.q),Ee=H.square().multiply(H).shiftLeft(3).mod(this.curve.q);return new Q(this.curve,this.curve.fromBigInteger(he),this.curve.fromBigInteger(me),Ee)},Q.prototype.multiply=function(y){if(this.isInfinity())return this;if(y.signum()==0)return this.curve.getInfinity();var S,C=y,H=C.multiply(new K("3")),X=this.negate(),oe=this,be=this.curve.q.subtract(y),he=be.multiply(new K("3")),me=new Q(this.curve,this.x,this.y),Ee=me.negate();for(S=H.bitLength()-2;S>0;--S){oe=oe.twice();var Ae=H.testBit(S);Ae!=C.testBit(S)&&(oe=oe.add(Ae?this:X))}for(S=he.bitLength()-2;S>0;--S){me=me.twice();var De=he.testBit(S);De!=be.testBit(S)&&(me=me.add(De?me:Ee))}return oe},Q.prototype.multiplyTwo=function(y,S,C){var H;H=y.bitLength()>C.bitLength()?y.bitLength()-1:C.bitLength()-1;for(var X=this.curve.getInfinity(),oe=this.add(S);H>=0;)X=X.twice(),y.testBit(H)?X=C.testBit(H)?X.add(oe):X.add(this):C.testBit(H)&&(X=X.add(S)),--H;return X},k.prototype.getQ=function(){return this.q},k.prototype.getA=function(){return this.a},k.prototype.getB=function(){return this.b},k.prototype.equals=function(y){return y==this||this.q.equals(y.q)&&this.a.equals(y.a)&&this.b.equals(y.b)},k.prototype.getInfinity=function(){return this.infinity},k.prototype.fromBigInteger=function(y){return new lt(this.q,y)},k.prototype.decodePointHex=function(y){switch(parseInt(y.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var S=(y.length-2)/2,C=y.substr(2,S),H=y.substr(S+2,S);return new Q(this,this.fromBigInteger(new K(C,16)),this.fromBigInteger(new K(H,16)));default:return null}},lt.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Q.prototype.getEncoded=function(v){var y=function(oe,be){var he=oe.toByteArrayUnsigned();if(be<he.length)he=he.slice(he.length-be);else for(;be>he.length;)he.unshift(0);return he},S=this.getX().toBigInteger(),C=this.getY().toBigInteger(),H=y(S,32);return v?C.isEven()?H.unshift(2):H.unshift(3):(H.unshift(4),H=H.concat(y(C,32))),H},Q.decodeFrom=function(v,y){y[0];var S=y.length-1,C=y.slice(1,1+S/2),H=y.slice(1+S/2,1+S);C.unshift(0),H.unshift(0);var X=new K(C),oe=new K(H);return new Q(v,v.fromBigInteger(X),v.fromBigInteger(oe))},Q.decodeFromHex=function(v,y){y.substr(0,2);var S=y.length-2,C=y.substr(2,S/2),H=y.substr(2+S/2,S/2),X=new K(C,16),oe=new K(H,16);return new Q(v,v.fromBigInteger(X),v.fromBigInteger(oe))},Q.prototype.add2D=function(v){if(this.isInfinity())return v;if(v.isInfinity())return this;if(this.x.equals(v.x))return this.y.equals(v.y)?this.twice():this.curve.getInfinity();var y=v.x.subtract(this.x),S=v.y.subtract(this.y).divide(y),C=S.square().subtract(this.x).subtract(v.x),H=S.multiply(this.x.subtract(C)).subtract(this.y);return new Q(this.curve,C,H)},Q.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var v=this.curve.fromBigInteger(K.valueOf(2)),y=this.curve.fromBigInteger(K.valueOf(3)),S=this.x.square().multiply(y).add(this.curve.a).divide(this.y.multiply(v)),C=S.square().subtract(this.x.multiply(v)),H=S.multiply(this.x.subtract(C)).subtract(this.y);return new Q(this.curve,C,H)},Q.prototype.multiply2D=function(v){if(this.isInfinity())return this;if(v.signum()==0)return this.curve.getInfinity();var y,S=v,C=S.multiply(new K("3")),H=this.negate(),X=this;for(y=C.bitLength()-2;y>0;--y){X=X.twice();var oe=C.testBit(y);oe!=S.testBit(y)&&(X=X.add2D(oe?this:H))}return X},Q.prototype.isOnCurve=function(){var v=this.getX().toBigInteger(),y=this.getY().toBigInteger(),S=this.curve.getA().toBigInteger(),C=this.curve.getB().toBigInteger(),H=this.curve.getQ(),X=y.multiply(y).mod(H),oe=v.multiply(v).multiply(v).add(S.multiply(v)).add(C).mod(H);return X.equals(oe)},Q.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Q.prototype.validate=function(){var v=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var y=this.getX().toBigInteger(),S=this.getY().toBigInteger();if(y.compareTo(K.ONE)<0||y.compareTo(v.subtract(K.ONE))>0)throw new Error("x coordinate out of bounds");if(S.compareTo(K.ONE)<0||S.compareTo(v.subtract(K.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(v).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var V=function(){var v=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),y=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),S={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function C(oe,be,he){return be?S[be]:String.fromCharCode(parseInt(he,16))}var H=new String(""),X=Object.hasOwnProperty;return function(oe,be){var he,me,Ee=oe.match(v),Ae=Ee[0],De=!1;Ae==="{"?he={}:Ae==="["?he=[]:(he=[],De=!0);for(var Ge=[he],nt=1-De,pt=Ee.length;nt<pt;++nt){var _t;switch((Ae=Ee[nt]).charCodeAt(0)){default:(_t=Ge[0])[me||_t.length]=+Ae,me=void 0;break;case 34:if((Ae=Ae.substring(1,Ae.length-1)).indexOf("\\")!==-1&&(Ae=Ae.replace(y,C)),_t=Ge[0],!me){if(!(_t instanceof Array)){me=Ae||H;break}me=_t.length}_t[me]=Ae,me=void 0;break;case 91:_t=Ge[0],Ge.unshift(_t[me||_t.length]=[]),me=void 0;break;case 93:Ge.shift();break;case 102:(_t=Ge[0])[me||_t.length]=!1,me=void 0;break;case 110:(_t=Ge[0])[me||_t.length]=null,me=void 0;break;case 116:(_t=Ge[0])[me||_t.length]=!0,me=void 0;break;case 123:_t=Ge[0],Ge.unshift(_t[me||_t.length]={}),me=void 0;break;case 125:Ge.shift()}}if(De){if(Ge.length!==1)throw new Error;he=he[0]}else if(Ge.length)throw new Error;return be&&(he=function ae(_e,Pe){var Fe=_e[Pe];if(Fe&&(Fe===void 0?"undefined":R(Fe))==="object"){var ut=null;for(var Et in Fe)if(X.call(Fe,Et)&&Fe!==_e){var cr=ae(Fe,Et);cr!==void 0?Fe[Et]=cr:(ut||(ut=[]),ut.push(Et))}if(ut)for(var Bt=ut.length;--Bt>=0;)delete Fe[ut[Bt]]}return be.call(_e,Pe,Fe)}({"":he},"")),he}}();j!==void 0&&j||(a.KJUR=j={}),j.asn1!==void 0&&j.asn1||(j.asn1={}),j.asn1.ASN1Util=new function(){this.integerToByteHex=function(v){var y=v.toString(16);return y.length%2==1&&(y="0"+y),y},this.bigIntToMinTwosComplementsHex=function(v){var y=v.toString(16);if(y.substr(0,1)!="-")y.length%2==1?y="0"+y:y.match(/^[0-7]/)||(y="00"+y);else{var S=y.substr(1).length;S%2==1?S+=1:y.match(/^[0-7]/)||(S+=2);for(var C="",H=0;H<S;H++)C+="f";y=new K(C,16).xor(v).add(K.ONE).toString(16).replace(/^-/,"")}return y},this.getPEMStringFromHex=function(v,y){return Tt(v,y)},this.newObject=function(v){var y=j.asn1,S=y.ASN1Object,C=y.DERBoolean,H=y.DERInteger,X=y.DERBitString,oe=y.DEROctetString,be=y.DERNull,he=y.DERObjectIdentifier,me=y.DEREnumerated,Ee=y.DERUTF8String,Ae=y.DERNumericString,De=y.DERPrintableString,Ge=y.DERTeletexString,nt=y.DERIA5String,pt=y.DERUTCTime,_t=y.DERGeneralizedTime,ae=y.DERVisibleString,_e=y.DERBMPString,Pe=y.DERSequence,Fe=y.DERSet,ut=y.DERTaggedObject,Et=y.ASN1Util.newObject;if(v instanceof y.ASN1Object)return v;var cr=Object.keys(v);if(cr.length!=1)throw new Error("key of param shall be only one.");var Bt=cr[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+Bt+":")==-1)throw new Error("undefined key: "+Bt);if(Bt=="bool")return new C(v[Bt]);if(Bt=="int")return new H(v[Bt]);if(Bt=="bitstr")return new X(v[Bt]);if(Bt=="octstr")return new oe(v[Bt]);if(Bt=="null")return new be(v[Bt]);if(Bt=="oid")return new he(v[Bt]);if(Bt=="enum")return new me(v[Bt]);if(Bt=="utf8str")return new Ee(v[Bt]);if(Bt=="numstr")return new Ae(v[Bt]);if(Bt=="prnstr")return new De(v[Bt]);if(Bt=="telstr")return new Ge(v[Bt]);if(Bt=="ia5str")return new nt(v[Bt]);if(Bt=="utctime")return new pt(v[Bt]);if(Bt=="gentime")return new _t(v[Bt]);if(Bt=="visstr")return new ae(v[Bt]);if(Bt=="bmpstr")return new _e(v[Bt]);if(Bt=="asn1")return new S(v[Bt]);if(Bt=="seq"){for(var $r=v[Bt],sr=[],hr=0;hr<$r.length;hr++){var en=Et($r[hr]);sr.push(en)}return new Pe({array:sr})}if(Bt=="set"){for($r=v[Bt],sr=[],hr=0;hr<$r.length;hr++)en=Et($r[hr]),sr.push(en);return new Fe({array:sr})}if(Bt=="tag"){var fr=v[Bt];if(Object.prototype.toString.call(fr)==="[object Array]"&&fr.length==3){var tn=Et(fr[2]);return new ut({tag:fr[0],explicit:fr[1],obj:tn})}return new ut(fr)}},this.jsonToASN1HEX=function(v){return this.newObject(v).getEncodedHex()}},j.asn1.ASN1Util.oidHexToInt=function(v){for(var y="",S=parseInt(v.substr(0,2),16),C=(y=Math.floor(S/40)+"."+S%40,""),H=2;H<v.length;H+=2){var X=("00000000"+parseInt(v.substr(H,2),16).toString(2)).slice(-8);C+=X.substr(1,7),X.substr(0,1)=="0"&&(y=y+"."+new K(C,2).toString(10),C="")}return y},j.asn1.ASN1Util.oidIntToHex=function(v){var y=function(he){var me=he.toString(16);return me.length==1&&(me="0"+me),me},S=function(he){var me="",Ee=new K(he,10).toString(2),Ae=7-Ee.length%7;Ae==7&&(Ae=0);for(var De="",Ge=0;Ge<Ae;Ge++)De+="0";for(Ee=De+Ee,Ge=0;Ge<Ee.length-1;Ge+=7){var nt=Ee.substr(Ge,7);Ge!=Ee.length-7&&(nt="1"+nt),me+=y(parseInt(nt,2))}return me};if(!v.match(/^[0-9.]+$/))throw"malformed oid string: "+v;var C="",H=v.split("."),X=40*parseInt(H[0])+parseInt(H[1]);C+=y(X),H.splice(0,2);for(var oe=0;oe<H.length;oe++)C+=S(H[oe]);return C},j.asn1.ASN1Object=function(v){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var y=this.hV.length/2,S=y.toString(16);if(S.length%2==1&&(S="0"+S),y<128)return S;var C=S.length/2;if(C>15)throw"ASN.1 length too long to represent by 8x: n = "+y.toString(16);return(128+C).toString(16)+S},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(y){this.params=y},v!=null&&v.tlv!=null&&(this.hTLV=v.tlv,this.isModified=!1)},j.asn1.DERAbstractString=function(v){j.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(y){this.hTLV=null,this.isModified=!0,this.s=y,this.hV=ct(this.s).toLowerCase()},this.setStringHex=function(y){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=y},this.getFreshValueHex=function(){return this.hV},v!==void 0&&(typeof v=="string"?this.setString(v):v.str!==void 0?this.setString(v.str):v.hex!==void 0&&this.setStringHex(v.hex))},or(j.asn1.DERAbstractString,j.asn1.ASN1Object),j.asn1.DERAbstractTime=function(v){j.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(y){var S=y.getTime()+6e4*y.getTimezoneOffset();return new Date(S)},this.formatDate=function(y,S,C){var H=this.zeroPadding,X=this.localDateToUTC(y),oe=String(X.getFullYear());S=="utc"&&(oe=oe.substr(2,2));var be=oe+H(String(X.getMonth()+1),2)+H(String(X.getDate()),2)+H(String(X.getHours()),2)+H(String(X.getMinutes()),2)+H(String(X.getSeconds()),2);if(C===!0){var he=X.getMilliseconds();if(he!=0){var me=H(String(he),3);be=be+"."+(me=me.replace(/[0]+$/,""))}}return be+"Z"},this.zeroPadding=function(y,S){return y.length>=S?y:new Array(S-y.length+1).join("0")+y},this.getString=function(){return this.s},this.setString=function(y){this.hTLV=null,this.isModified=!0,this.s=y,this.hV=ar(y)},this.setByDateValue=function(y,S,C,H,X,oe){var be=new Date(Date.UTC(y,S-1,C,H,X,oe,0));this.setByDate(be)},this.getFreshValueHex=function(){return this.hV}},or(j.asn1.DERAbstractTime,j.asn1.ASN1Object),j.asn1.DERAbstractStructured=function(v){j.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(y){this.hTLV=null,this.isModified=!0,this.asn1Array=y},this.appendASN1Object=function(y){this.hTLV=null,this.isModified=!0,this.asn1Array.push(y)},this.asn1Array=new Array,v!==void 0&&v.array!==void 0&&(this.asn1Array=v.array)},or(j.asn1.DERAbstractStructured,j.asn1.ASN1Object),j.asn1.DERBoolean=function(v){j.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=v==0?"010100":"0101ff"},or(j.asn1.DERBoolean,j.asn1.ASN1Object),j.asn1.DERInteger=function(v){j.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(y){this.hTLV=null,this.isModified=!0,this.hV=j.asn1.ASN1Util.bigIntToMinTwosComplementsHex(y)},this.setByInteger=function(y){var S=new K(String(y),10);this.setByBigInteger(S)},this.setValueHex=function(y){this.hV=y},this.getFreshValueHex=function(){return this.hV},v!==void 0&&(v.bigint!==void 0?this.setByBigInteger(v.bigint):v.int!==void 0?this.setByInteger(v.int):typeof v=="number"?this.setByInteger(v):v.hex!==void 0&&this.setValueHex(v.hex))},or(j.asn1.DERInteger,j.asn1.ASN1Object),j.asn1.DERBitString=function(v){if(v!==void 0&&v.obj!==void 0){var y=j.asn1.ASN1Util.newObject(v.obj);v.hex="00"+y.getEncodedHex()}j.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(S){this.hTLV=null,this.isModified=!0,this.hV=S},this.setUnusedBitsAndHexValue=function(S,C){if(S<0||7<S)throw"unused bits shall be from 0 to 7: u = "+S;var H="0"+S;this.hTLV=null,this.isModified=!0,this.hV=H+C},this.setByBinaryString=function(S){var C=8-(S=S.replace(/0+$/,"")).length%8;C==8&&(C=0);for(var H=0;H<=C;H++)S+="0";var X="";for(H=0;H<S.length-1;H+=8){var oe=S.substr(H,8),be=parseInt(oe,2).toString(16);be.length==1&&(be="0"+be),X+=be}this.hTLV=null,this.isModified=!0,this.hV="0"+C+X},this.setByBooleanArray=function(S){for(var C="",H=0;H<S.length;H++)S[H]==1?C+="1":C+="0";this.setByBinaryString(C)},this.newFalseArray=function(S){for(var C=new Array(S),H=0;H<S;H++)C[H]=!1;return C},this.getFreshValueHex=function(){return this.hV},v!==void 0&&(typeof v=="string"&&v.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(v):v.hex!==void 0?this.setHexValueIncludingUnusedBits(v.hex):v.bin!==void 0?this.setByBinaryString(v.bin):v.array!==void 0&&this.setByBooleanArray(v.array))},or(j.asn1.DERBitString,j.asn1.ASN1Object),j.asn1.DEROctetString=function(v){if(v!==void 0&&v.obj!==void 0){var y=j.asn1.ASN1Util.newObject(v.obj);v.hex=y.getEncodedHex()}j.asn1.DEROctetString.superclass.constructor.call(this,v),this.hT="04"},or(j.asn1.DEROctetString,j.asn1.DERAbstractString),j.asn1.DERNull=function(){j.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},or(j.asn1.DERNull,j.asn1.ASN1Object),j.asn1.DERObjectIdentifier=function(v){j.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(y){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=y},this.setValueOidString=function(y){var S=function(H){var X=function(De){var Ge=De.toString(16);return Ge.length==1&&(Ge="0"+Ge),Ge},oe=function(De){var Ge="",nt=parseInt(De,10).toString(2),pt=7-nt.length%7;pt==7&&(pt=0);for(var _t="",ae=0;ae<pt;ae++)_t+="0";for(nt=_t+nt,ae=0;ae<nt.length-1;ae+=7){var _e=nt.substr(ae,7);ae!=nt.length-7&&(_e="1"+_e),Ge+=X(parseInt(_e,2))}return Ge};try{if(!H.match(/^[0-9.]+$/))return null;var be="",he=H.split("."),me=40*parseInt(he[0],10)+parseInt(he[1],10);be+=X(me),he.splice(0,2);for(var Ee=0;Ee<he.length;Ee++)be+=oe(he[Ee]);return be}catch{return null}}(y);if(S==null)throw new Error("malformed oid string: "+y);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=S},this.setValueName=function(y){var S=j.asn1.x509.OID.name2oid(y);if(S==="")throw new Error("DERObjectIdentifier oidName undefined: "+y);this.setValueOidString(S)},this.setValueNameOrOid=function(y){y.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(y):this.setValueName(y)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(y){typeof y=="string"?this.setValueNameOrOid(y):y.oid!==void 0?this.setValueNameOrOid(y.oid):y.name!==void 0?this.setValueNameOrOid(y.name):y.hex!==void 0&&this.setValueHex(y.hex)},v!==void 0&&this.setByParam(v)},or(j.asn1.DERObjectIdentifier,j.asn1.ASN1Object),j.asn1.DEREnumerated=function(v){j.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(y){this.hTLV=null,this.isModified=!0,this.hV=j.asn1.ASN1Util.bigIntToMinTwosComplementsHex(y)},this.setByInteger=function(y){var S=new K(String(y),10);this.setByBigInteger(S)},this.setValueHex=function(y){this.hV=y},this.getFreshValueHex=function(){return this.hV},v!==void 0&&(v.int!==void 0?this.setByInteger(v.int):typeof v=="number"?this.setByInteger(v):v.hex!==void 0&&this.setValueHex(v.hex))},or(j.asn1.DEREnumerated,j.asn1.ASN1Object),j.asn1.DERUTF8String=function(v){j.asn1.DERUTF8String.superclass.constructor.call(this,v),this.hT="0c"},or(j.asn1.DERUTF8String,j.asn1.DERAbstractString),j.asn1.DERNumericString=function(v){j.asn1.DERNumericString.superclass.constructor.call(this,v),this.hT="12"},or(j.asn1.DERNumericString,j.asn1.DERAbstractString),j.asn1.DERPrintableString=function(v){j.asn1.DERPrintableString.superclass.constructor.call(this,v),this.hT="13"},or(j.asn1.DERPrintableString,j.asn1.DERAbstractString),j.asn1.DERTeletexString=function(v){j.asn1.DERTeletexString.superclass.constructor.call(this,v),this.hT="14"},or(j.asn1.DERTeletexString,j.asn1.DERAbstractString),j.asn1.DERIA5String=function(v){j.asn1.DERIA5String.superclass.constructor.call(this,v),this.hT="16"},or(j.asn1.DERIA5String,j.asn1.DERAbstractString),j.asn1.DERVisibleString=function(v){j.asn1.DERIA5String.superclass.constructor.call(this,v),this.hT="1a"},or(j.asn1.DERVisibleString,j.asn1.DERAbstractString),j.asn1.DERBMPString=function(v){j.asn1.DERBMPString.superclass.constructor.call(this,v),this.hT="1e"},or(j.asn1.DERBMPString,j.asn1.DERAbstractString),j.asn1.DERUTCTime=function(v){j.asn1.DERUTCTime.superclass.constructor.call(this,v),this.hT="17",this.setByDate=function(y){this.hTLV=null,this.isModified=!0,this.date=y,this.s=this.formatDate(this.date,"utc"),this.hV=ar(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=ar(this.s)),this.hV},v!==void 0&&(v.str!==void 0?this.setString(v.str):typeof v=="string"&&v.match(/^[0-9]{12}Z$/)?this.setString(v):v.hex!==void 0?this.setStringHex(v.hex):v.date!==void 0&&this.setByDate(v.date))},or(j.asn1.DERUTCTime,j.asn1.DERAbstractTime),j.asn1.DERGeneralizedTime=function(v){j.asn1.DERGeneralizedTime.superclass.constructor.call(this,v),this.hT="18",this.withMillis=!1,this.setByDate=function(y){this.hTLV=null,this.isModified=!0,this.date=y,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ar(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ar(this.s)),this.hV},v!==void 0&&(v.str!==void 0?this.setString(v.str):typeof v=="string"&&v.match(/^[0-9]{14}Z$/)?this.setString(v):v.hex!==void 0?this.setStringHex(v.hex):v.date!==void 0&&this.setByDate(v.date),v.millis===!0&&(this.withMillis=!0))},or(j.asn1.DERGeneralizedTime,j.asn1.DERAbstractTime),j.asn1.DERSequence=function(v){j.asn1.DERSequence.superclass.constructor.call(this,v),this.hT="30",this.getFreshValueHex=function(){for(var y="",S=0;S<this.asn1Array.length;S++)y+=this.asn1Array[S].getEncodedHex();return this.hV=y,this.hV}},or(j.asn1.DERSequence,j.asn1.DERAbstractStructured),j.asn1.DERSet=function(v){j.asn1.DERSet.superclass.constructor.call(this,v),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var y=new Array,S=0;S<this.asn1Array.length;S++){var C=this.asn1Array[S];y.push(C.getEncodedHex())}return this.sortFlag==1&&y.sort(),this.hV=y.join(""),this.hV},v!==void 0&&v.sortflag!==void 0&&v.sortflag==0&&(this.sortFlag=!1)},or(j.asn1.DERSet,j.asn1.DERAbstractStructured),j.asn1.DERTaggedObject=function(v){j.asn1.DERTaggedObject.superclass.constructor.call(this);var y=j.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(S,C,H){this.hT=C,this.isExplicit=S,this.asn1Object=H,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=H.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,C),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(S){S.tag!=null&&(this.hT=S.tag),S.explicit!=null&&(this.isExplicit=S.explicit),S.tage!=null&&(this.hT=S.tage,this.isExplicit=!0),S.tagi!=null&&(this.hT=S.tagi,this.isExplicit=!1),S.obj!=null&&(S.obj instanceof y.ASN1Object?(this.asn1Object=S.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):R(S.obj)=="object"&&(this.asn1Object=y.ASN1Util.newObject(S.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},v!=null&&this.setByParam(v)},or(j.asn1.DERTaggedObject,j.asn1.ASN1Object);var j,qe,Ze,ze=new function(){};function Jt(v){for(var y=new Array,S=0;S<v.length;S++)y[S]=v.charCodeAt(S);return y}function kr(v){for(var y="",S=0;S<v.length;S++)y+=String.fromCharCode(v[S]);return y}function Hr(v){for(var y="",S=0;S<v.length;S++){var C=v[S].toString(16);C.length==1&&(C="0"+C),y+=C}return y}function ar(v){return Hr(Jt(v))}function Ke(v){return v=(v=(v=v.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function mt(v){return v.length%4==2?v+="==":v.length%4==3&&(v+="="),v=(v=v.replace(/-/g,"+")).replace(/_/g,"/")}function ot(v){return v.length%2==1&&(v="0"+v),Ke(Y(v))}function Le(v){return q(mt(v))}function ct(v){return tr(Fr(v))}function Qt(v){return decodeURIComponent(Nr(v))}function qt(v){for(var y="",S=0;S<v.length-1;S+=2)y+=String.fromCharCode(parseInt(v.substr(S,2),16));return y}function er(v){for(var y="",S=0;S<v.length;S++)y+=("0"+v.charCodeAt(S).toString(16)).slice(-2);return y}function Ht(v){return Y(v)}function ue(v){var y=Ht(v).replace(/(.{64})/g,`$1\r
`);return y=y.replace(/\r\n$/,"")}function pe(v){return q(v.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Tt(v,y){return"-----BEGIN "+y+`-----\r
`+ue(v)+`\r
-----END `+y+`-----\r
`}function xt(v,y){if(v.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+y;return pe(v=y!==void 0?(v=v.replace(new RegExp("^[^]*-----BEGIN "+y+"-----"),"")).replace(new RegExp("-----END "+y+"-----[^]*$"),""):(v=v.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Pt(v){var y,S,C,H,X,oe,be,he,me,Ee,Ae;if(Ae=v.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return he=Ae[1],y=parseInt(he),he.length===2&&(50<=y&&y<100?y=1900+y:0<=y&&y<50&&(y=2e3+y)),S=parseInt(Ae[2])-1,C=parseInt(Ae[3]),H=parseInt(Ae[4]),X=parseInt(Ae[5]),oe=parseInt(Ae[6]),be=0,(me=Ae[7])!==""&&(Ee=(me.substr(1)+"00").substr(0,3),be=parseInt(Ee)),Date.UTC(y,S,C,H,X,oe,be);throw"unsupported zulu format: "+v}function Xt(v){return~~(Pt(v)/1e3)}function tr(v){return v.replace(/%/g,"")}function Nr(v){return v.replace(/(..)/g,"%$1")}function Vt(v){var y="malformed IPv6 address";if(!v.match(/^[0-9A-Fa-f:]+$/))throw y;var S=(v=v.toLowerCase()).split(":").length-1;if(S<2)throw y;var C=":".repeat(7-S+2),H=(v=v.replace("::",C)).split(":");if(H.length!=8)throw y;for(var X=0;X<8;X++)H[X]=("0000"+H[X]).slice(-4);return H.join("")}function Zt(v){if(!v.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var y=(v=v.toLowerCase()).match(/.{1,4}/g),S=0;S<8;S++)y[S]=y[S].replace(/^0+/,""),y[S]==""&&(y[S]="0");var C=(v=":"+y.join(":")+":").match(/:(0:){2,}/g);if(C===null)return v.slice(1,-1);var H="";for(S=0;S<C.length;S++)C[S].length>H.length&&(H=C[S]);return(v=v.replace(H,"::")).slice(1,-1)}function yr(v){var y="malformed hex value";if(!v.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw y;if(v.length!=8)return v.length==32?Zt(v):v;try{return parseInt(v.substr(0,2),16)+"."+parseInt(v.substr(2,2),16)+"."+parseInt(v.substr(4,2),16)+"."+parseInt(v.substr(6,2),16)}catch{throw y}}function ir(v){return v.match(/.{4}/g).map(function(S){var C=parseInt(S.substr(0,2),16),H=parseInt(S.substr(2),16);if(C==0&H<128)return String.fromCharCode(H);if(C<8){var X=128|63&H;return Qt((192|(7&C)<<3|(192&H)>>6).toString(16)+X.toString(16))}X=128|(15&C)<<2|(192&H)>>6;var oe=128|63&H;return Qt((224|(240&C)>>4).toString(16)+X.toString(16)+oe.toString(16))}).join("")}function Fr(v){for(var y=encodeURIComponent(v),S="",C=0;C<y.length;C++)y[C]=="%"?(S+=y.substr(C,3),C+=2):S=S+"%"+ar(y[C]);return S}function Er(v){return!(v.length%2!=0||!v.match(/^[0-9a-f]+$/)&&!v.match(/^[0-9A-F]+$/))}function Gr(v){return v.length%2==1?"0"+v:v.substr(0,1)>"7"?"00"+v:v}ze.getLblen=function(v,y){if(v.substr(y+2,1)!="8")return 1;var S=parseInt(v.substr(y+3,1));return S==0?-1:0<S&&S<10?S+1:-2},ze.getL=function(v,y){var S=ze.getLblen(v,y);return S<1?"":v.substr(y+2,2*S)},ze.getVblen=function(v,y){var S;return(S=ze.getL(v,y))==""?-1:(S.substr(0,1)==="8"?new K(S.substr(2),16):new K(S,16)).intValue()},ze.getVidx=function(v,y){var S=ze.getLblen(v,y);return S<0?S:y+2*(S+1)},ze.getV=function(v,y){var S=ze.getVidx(v,y),C=ze.getVblen(v,y);return v.substr(S,2*C)},ze.getTLV=function(v,y){return v.substr(y,2)+ze.getL(v,y)+ze.getV(v,y)},ze.getTLVblen=function(v,y){return 2+2*ze.getLblen(v,y)+2*ze.getVblen(v,y)},ze.getNextSiblingIdx=function(v,y){return ze.getVidx(v,y)+2*ze.getVblen(v,y)},ze.getChildIdx=function(v,y){var S,C,H,X=ze,oe=[];S=X.getVidx(v,y),C=2*X.getVblen(v,y),v.substr(y,2)=="03"&&(S+=2,C-=2),H=0;for(var be=S;H<=C;){var he=X.getTLVblen(v,be);if((H+=he)<=C&&oe.push(be),be+=he,H>=C)break}return oe},ze.getNthChildIdx=function(v,y,S){return ze.getChildIdx(v,y)[S]},ze.getIdxbyList=function(v,y,S,C){var H,X,oe=ze;return S.length==0?C!==void 0&&v.substr(y,2)!==C?-1:y:(H=S.shift())>=(X=oe.getChildIdx(v,y)).length?-1:oe.getIdxbyList(v,X[H],S,C)},ze.getIdxbyListEx=function(v,y,S,C){var H,X,oe=ze;if(S.length==0)return C!==void 0&&v.substr(y,2)!==C?-1:y;H=S.shift(),X=oe.getChildIdx(v,y);for(var be=0,he=0;he<X.length;he++){var me=v.substr(X[he],2);if(typeof H=="number"&&!oe.isContextTag(me)&&be==H||typeof H=="string"&&oe.isContextTag(me,H))return oe.getIdxbyListEx(v,X[he],S,C);oe.isContextTag(me)||be++}return-1},ze.getTLVbyList=function(v,y,S,C){var H=ze,X=H.getIdxbyList(v,y,S,C);return X==-1||X>=v.length?null:H.getTLV(v,X)},ze.getTLVbyListEx=function(v,y,S,C){var H=ze,X=H.getIdxbyListEx(v,y,S,C);return X==-1?null:H.getTLV(v,X)},ze.getVbyList=function(v,y,S,C,H){var X,oe,be=ze;return(X=be.getIdxbyList(v,y,S,C))==-1||X>=v.length?null:(oe=be.getV(v,X),H===!0&&(oe=oe.substr(2)),oe)},ze.getVbyListEx=function(v,y,S,C,H){var X,oe,be=ze;return(X=be.getIdxbyListEx(v,y,S,C))==-1?null:(oe=be.getV(v,X),v.substr(X,2)=="03"&&H!==!1&&(oe=oe.substr(2)),oe)},ze.getInt=function(v,y,S){S==null&&(S=-1);try{var C=v.substr(y,2);if(C!="02"&&C!="03")return S;var H=ze.getV(v,y);return C=="02"?parseInt(H,16):function(oe){try{var be=oe.substr(0,2);if(be=="00")return parseInt(oe.substr(2),16);var he=parseInt(be,16),me=oe.substr(2),Ee=parseInt(me,16).toString(2);return Ee=="0"&&(Ee="00000000"),Ee=Ee.slice(0,0-he),parseInt(Ee,2)}catch{return-1}}(H)}catch{return S}},ze.getOID=function(v,y,S){S==null&&(S=null);try{return v.substr(y,2)!="06"?S:function(H){if(!Er(H))return null;try{var X=[],oe=H.substr(0,2),be=parseInt(oe,16);X[0]=new String(Math.floor(be/40)),X[1]=new String(be%40);for(var he=H.substr(2),me=[],Ee=0;Ee<he.length/2;Ee++)me.push(parseInt(he.substr(2*Ee,2),16));var Ae=[],De="";for(Ee=0;Ee<me.length;Ee++)128&me[Ee]?De+=pr((127&me[Ee]).toString(2),7):(De+=pr((127&me[Ee]).toString(2),7),Ae.push(new String(parseInt(De,2))),De="");var Ge=X.join(".");return Ae.length>0&&(Ge=Ge+"."+Ae.join(".")),Ge}catch{return null}}(ze.getV(v,y))}catch{return S}},ze.getOIDName=function(v,y,S){S==null&&(S=null);try{var C=ze.getOID(v,y,S);if(C==S)return S;var H=j.asn1.x509.OID.oid2name(C);return H==""?C:H}catch{return S}},ze.getString=function(v,y,S){S==null&&(S=null);try{return qt(ze.getV(v,y))}catch{return S}},ze.hextooidstr=function(v){var y=function(De,Ge){return De.length>=Ge?De:new Array(Ge-De.length+1).join("0")+De},S=[],C=v.substr(0,2),H=parseInt(C,16);S[0]=new String(Math.floor(H/40)),S[1]=new String(H%40);for(var X=v.substr(2),oe=[],be=0;be<X.length/2;be++)oe.push(parseInt(X.substr(2*be,2),16));var he=[],me="";for(be=0;be<oe.length;be++)128&oe[be]?me+=y((127&oe[be]).toString(2),7):(me+=y((127&oe[be]).toString(2),7),he.push(new String(parseInt(me,2))),me="");var Ee=S.join(".");return he.length>0&&(Ee=Ee+"."+he.join(".")),Ee},ze.dump=function(v,y,S,C){var H=ze,X=H.getV,oe=H.dump,be=H.getChildIdx,he=v;v instanceof j.asn1.ASN1Object&&(he=v.getEncodedHex());var me=function(Bt,$r){return Bt.length<=2*$r?Bt:Bt.substr(0,$r)+"..(total "+Bt.length/2+"bytes).."+Bt.substr(Bt.length-$r,$r)};y===void 0&&(y={ommit_long_octet:32}),S===void 0&&(S=0),C===void 0&&(C="");var Ee,Ae=y.ommit_long_octet;if((Ee=he.substr(S,2))=="01")return(De=X(he,S))=="00"?C+`BOOLEAN FALSE
`:C+`BOOLEAN TRUE
`;if(Ee=="02")return C+"INTEGER "+me(De=X(he,S),Ae)+`
`;if(Ee=="03"){var De=X(he,S);if(H.isASN1HEX(De.substr(2))){var Ge=C+`BITSTRING, encapsulates
`;return Ge+=oe(De.substr(2),y,0,C+"  ")}return C+"BITSTRING "+me(De,Ae)+`
`}if(Ee=="04")return De=X(he,S),H.isASN1HEX(De)?(Ge=C+`OCTETSTRING, encapsulates
`,Ge+=oe(De,y,0,C+"  ")):C+"OCTETSTRING "+me(De,Ae)+`
`;if(Ee=="05")return C+`NULL
`;if(Ee=="06"){var nt=X(he,S),pt=j.asn1.ASN1Util.oidHexToInt(nt),_t=j.asn1.x509.OID.oid2name(pt),ae=pt.replace(/\./g," ");return _t!=""?C+"ObjectIdentifier "+_t+" ("+ae+`)
`:C+"ObjectIdentifier ("+ae+`)
`}if(Ee=="0a")return C+"ENUMERATED "+parseInt(X(he,S))+`
`;if(Ee=="0c")return C+"UTF8String '"+Qt(X(he,S))+`'
`;if(Ee=="13")return C+"PrintableString '"+Qt(X(he,S))+`'
`;if(Ee=="14")return C+"TeletexString '"+Qt(X(he,S))+`'
`;if(Ee=="16")return C+"IA5String '"+Qt(X(he,S))+`'
`;if(Ee=="17")return C+"UTCTime "+Qt(X(he,S))+`
`;if(Ee=="18")return C+"GeneralizedTime "+Qt(X(he,S))+`
`;if(Ee=="1a")return C+"VisualString '"+Qt(X(he,S))+`'
`;if(Ee=="1e")return C+"BMPString '"+ir(X(he,S))+`'
`;if(Ee=="30"){if(he.substr(S,4)=="3000")return C+`SEQUENCE {}
`;Ge=C+`SEQUENCE
`;var _e=y;if(((ut=be(he,S)).length==2||ut.length==3)&&he.substr(ut[0],2)=="06"&&he.substr(ut[ut.length-1],2)=="04"){_t=H.oidname(X(he,ut[0]));var Pe=JSON.parse(JSON.stringify(y));Pe.x509ExtName=_t,_e=Pe}for(var Fe=0;Fe<ut.length;Fe++)Ge+=oe(he,_e,ut[Fe],C+"  ");return Ge}if(Ee=="31"){Ge=C+`SET
`;var ut=be(he,S);for(Fe=0;Fe<ut.length;Fe++)Ge+=oe(he,y,ut[Fe],C+"  ");return Ge}if((128&(Ee=parseInt(Ee,16)))!=0){var Et=31&Ee;if((32&Ee)!=0){for(Ge=C+"["+Et+`]
`,ut=be(he,S),Fe=0;Fe<ut.length;Fe++)Ge+=oe(he,y,ut[Fe],C+"  ");return Ge}if(De=X(he,S),ze.isASN1HEX(De)){var Ge=C+"["+Et+`]
`;return Ge+=oe(De,y,0,C+"  ")}return(De.substr(0,8)=="68747470"||y.x509ExtName==="subjectAltName"&&Et==2)&&(De=Qt(De)),Ge=C+"["+Et+"] "+De+`
`}return C+"UNKNOWN("+Ee+") "+X(he,S)+`
`},ze.isContextTag=function(v,y){var S,C;v=v.toLowerCase();try{S=parseInt(v,16)}catch{return-1}if(y===void 0)return(192&S)==128;try{return y.match(/^\[[0-9]+\]$/)!=null&&!((C=parseInt(y.substr(1,y.length-1),10))>31)&&(192&S)==128&&(31&S)==C}catch{return!1}},ze.isASN1HEX=function(v){var y=ze;if(v.length%2==1)return!1;var S=y.getVblen(v,0),C=v.substr(0,2),H=y.getL(v,0);return v.length-C.length-H.length==2*S},ze.checkStrictDER=function(v,y,S,C,H){var X=ze;if(S===void 0){if(typeof v!="string")throw new Error("not hex string");if(v=v.toLowerCase(),!j.lang.String.isHex(v))throw new Error("not hex string");S=v.length,H=(C=v.length/2)<128?1:Math.ceil(C.toString(16))+1}if(X.getL(v,y).length>2*H)throw new Error("L of TLV too long: idx="+y);var oe=X.getVblen(v,y);if(oe>C)throw new Error("value of L too long than hex: idx="+y);var be=X.getTLV(v,y),he=be.length-2-X.getL(v,y).length;if(he!==2*oe)throw new Error("V string length and L's value not the same:"+he+"/"+2*oe);if(y===0&&v.length!=be.length)throw new Error("total length and TLV length unmatch:"+v.length+"!="+be.length);var me=v.substr(y,2);if(me==="02"){var Ee=X.getVidx(v,y);if(v.substr(Ee,2)=="00"&&v.charCodeAt(Ee+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(me,16)){for(var Ae=X.getVblen(v,y),De=0,Ge=X.getChildIdx(v,y),nt=0;nt<Ge.length;nt++)De+=X.getTLV(v,Ge[nt]).length,X.checkStrictDER(v,Ge[nt],S,C,H);if(2*Ae!=De)throw new Error("sum of children's TLV length and L unmatch: "+2*Ae+"!="+De)}},ze.oidname=function(v){var y=j.asn1;j.lang.String.isHex(v)&&(v=y.ASN1Util.oidHexToInt(v));var S=y.x509.OID.oid2name(v);return S===""&&(S=v),S},j!==void 0&&j||(a.KJUR=j={}),j.lang!==void 0&&j.lang||(j.lang={}),j.lang.String=function(){},typeof d=="function"?(a.utf8tob64u=qe=function(y){return Ke(d.from(y,"utf8").toString("base64"))},a.b64utoutf8=Ze=function(y){return d.from(mt(y),"base64").toString("utf8")}):(a.utf8tob64u=qe=function(y){return ot(tr(Fr(y)))},a.b64utoutf8=Ze=function(y){return decodeURIComponent(Nr(Le(y)))}),j.lang.String.isInteger=function(v){return!!v.match(/^[0-9]+$/)||!!v.match(/^-[0-9]+$/)},j.lang.String.isHex=function(v){return Er(v)},j.lang.String.isBase64=function(v){return!(!(v=v.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||v.length%4!=0)},j.lang.String.isBase64URL=function(v){return!v.match(/[+/=]/)&&(v=mt(v),j.lang.String.isBase64(v))},j.lang.String.isIntegerArray=function(v){return!!(v=v.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},j.lang.String.isPrintable=function(v){return v.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},j.lang.String.isIA5=function(v){return v.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},j.lang.String.isMail=function(v){return v.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var pr=function(y,S,C){return C==null&&(C="0"),y.length>=S?y:new Array(S-y.length+1).join(C)+y};function or(v,y){var S=function(){};S.prototype=y.prototype,v.prototype=new S,v.prototype.constructor=v,v.superclass=y.prototype,y.prototype.constructor==Object.prototype.constructor&&(y.prototype.constructor=y)}j!==void 0&&j||(a.KJUR=j={}),j.crypto!==void 0&&j.crypto||(j.crypto={}),j.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:$.algo.MD5,sha1:$.algo.SHA1,sha224:$.algo.SHA224,sha256:$.algo.SHA256,sha384:$.algo.SHA384,sha512:$.algo.SHA512,ripemd160:$.algo.RIPEMD160},this.getDigestInfoHex=function(v,y){if(this.DIGESTINFOHEAD[y]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+y;return this.DIGESTINFOHEAD[y]+v},this.getPaddedDigestInfoHex=function(v,y,S){var C=this.getDigestInfoHex(v,y),H=S/4;if(C.length+22>H)throw"key is too short for SigAlg: keylen="+S+","+y;for(var X="0001",oe="00"+C,be="",he=H-X.length-oe.length,me=0;me<he;me+=2)be+="ff";return X+be+oe},this.hashString=function(v,y){return new j.crypto.MessageDigest({alg:y}).digestString(v)},this.hashHex=function(v,y){return new j.crypto.MessageDigest({alg:y}).digestHex(v)},this.sha1=function(v){return this.hashString(v,"sha1")},this.sha256=function(v){return this.hashString(v,"sha256")},this.sha256Hex=function(v){return this.hashHex(v,"sha256")},this.sha512=function(v){return this.hashString(v,"sha512")},this.sha512Hex=function(v){return this.hashHex(v,"sha512")},this.isKey=function(v){return v instanceof Oe||v instanceof j.crypto.DSA||v instanceof j.crypto.ECDSA}},j.crypto.Util.md5=function(v){return new j.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(v)},j.crypto.Util.ripemd160=function(v){return new j.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(v)},j.crypto.Util.SECURERANDOMGEN=new vt,j.crypto.Util.getRandomHexOfNbytes=function(v){var y=new Array(v);return j.crypto.Util.SECURERANDOMGEN.nextBytes(y),Hr(y)},j.crypto.Util.getRandomBigIntegerOfNbytes=function(v){return new K(j.crypto.Util.getRandomHexOfNbytes(v),16)},j.crypto.Util.getRandomHexOfNbits=function(v){var y=v%8,S=new Array((v-y)/8+1);return j.crypto.Util.SECURERANDOMGEN.nextBytes(S),S[0]=(255<<y&255^255)&S[0],Hr(S)},j.crypto.Util.getRandomBigIntegerOfNbits=function(v){return new K(j.crypto.Util.getRandomHexOfNbits(v),16)},j.crypto.Util.getRandomBigIntegerZeroToMax=function(v){for(var y=v.bitLength();;){var S=j.crypto.Util.getRandomBigIntegerOfNbits(y);if(v.compareTo(S)!=-1)return S}},j.crypto.Util.getRandomBigIntegerMinToMax=function(v,y){var S=v.compareTo(y);if(S==1)throw"biMin is greater than biMax";if(S==0)return v;var C=y.subtract(v);return j.crypto.Util.getRandomBigIntegerZeroToMax(C).add(v)},j.crypto.MessageDigest=function(v){this.setAlgAndProvider=function(y,S){if((y=j.crypto.MessageDigest.getCanonicalAlgName(y))!==null&&S===void 0&&(S=j.crypto.Util.DEFAULTPROVIDER[y]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(y)!=-1&&S=="cryptojs"){try{this.md=j.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[y].create()}catch(C){throw"setAlgAndProvider hash alg set fail alg="+y+"/"+C}this.updateString=function(C){this.md.update(C)},this.updateHex=function(C){var H=$.enc.Hex.parse(C);this.md.update(H)},this.digest=function(){return this.md.finalize().toString($.enc.Hex)},this.digestString=function(C){return this.updateString(C),this.digest()},this.digestHex=function(C){return this.updateHex(C),this.digest()}}if(":sha256:".indexOf(y)!=-1&&S=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(C){throw"setAlgAndProvider hash alg set fail alg="+y+"/"+C}this.updateString=function(C){this.md.update(C)},this.updateHex=function(C){var H=sjcl.codec.hex.toBits(C);this.md.update(H)},this.digest=function(){var C=this.md.finalize();return sjcl.codec.hex.fromBits(C)},this.digestString=function(C){return this.updateString(C),this.digest()},this.digestHex=function(C){return this.updateHex(C),this.digest()}}},this.updateString=function(y){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(y){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(y){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(y){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},v!==void 0&&v.alg!==void 0&&(this.algName=v.alg,v.prov===void 0&&(this.provName=j.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},j.crypto.MessageDigest.getCanonicalAlgName=function(v){return typeof v=="string"&&(v=(v=v.toLowerCase()).replace(/-/,"")),v},j.crypto.MessageDigest.getHashLength=function(v){var y=j.crypto.MessageDigest,S=y.getCanonicalAlgName(v);if(y.HASHLENGTH[S]===void 0)throw"not supported algorithm: "+v;return y.HASHLENGTH[S]},j.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},j.crypto.Mac=function(v){this.setAlgAndProvider=function(y,S){if((y=y.toLowerCase())==null&&(y="hmacsha1"),(y=y.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+y;S===void 0&&(S=j.crypto.Util.DEFAULTPROVIDER[y]),this.algProv=y+"/"+S;var C=y.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(C)!=-1&&S=="cryptojs"){try{var H=j.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[C];this.mac=$.algo.HMAC.create(H,this.pass)}catch(X){throw"setAlgAndProvider hash alg set fail hashAlg="+C+"/"+X}this.updateString=function(X){this.mac.update(X)},this.updateHex=function(X){var oe=$.enc.Hex.parse(X);this.mac.update(oe)},this.doFinal=function(){return this.mac.finalize().toString($.enc.Hex)},this.doFinalString=function(X){return this.updateString(X),this.doFinal()},this.doFinalHex=function(X){return this.updateHex(X),this.doFinal()}}},this.updateString=function(y){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(y){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(y){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(y){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(y){if(typeof y=="string"){var S=y;return y.length%2!=1&&y.match(/^[0-9A-Fa-f]+$/)||(S=er(y)),void(this.pass=$.enc.Hex.parse(S))}if((y===void 0?"undefined":R(y))!="object")throw"KJUR.crypto.Mac unsupported password type: "+y;if(S=null,y.hex!==void 0){if(y.hex.length%2!=0||!y.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+y.hex;S=y.hex}if(y.utf8!==void 0&&(S=ct(y.utf8)),y.rstr!==void 0&&(S=er(y.rstr)),y.b64!==void 0&&(S=q(y.b64)),y.b64u!==void 0&&(S=Le(y.b64u)),S==null)throw"KJUR.crypto.Mac unsupported password type: "+y;this.pass=$.enc.Hex.parse(S)},v!==void 0&&(v.pass!==void 0&&this.setPassword(v.pass),v.alg!==void 0&&(this.algName=v.alg,v.prov===void 0&&(this.provName=j.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},j.crypto.Signature=function(v){var y=null;if(this._setAlgNames=function(){var S=this.algName.match(/^(.+)with(.+)$/);S&&(this.mdAlgName=S[1].toLowerCase(),this.pubkeyAlgName=S[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(S,C){for(var H="",X=C/4-S.length,oe=0;oe<X;oe++)H+="0";return H+S},this.setAlgAndProvider=function(S,C){if(this._setAlgNames(),C!="cryptojs/jsrsa")throw new Error("provider not supported: "+C);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new j.crypto.MessageDigest({alg:this.mdAlgName})}catch(H){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+H)}this.init=function(H,X){var oe=null;try{oe=X===void 0?Gt.getKey(H):Gt.getKey(H,X)}catch(be){throw"init failed:"+be}if(oe.isPrivate===!0)this.prvKey=oe,this.state="SIGN";else{if(oe.isPublic!==!0)throw"init failed.:"+oe;this.pubKey=oe,this.state="VERIFY"}},this.updateString=function(H){this.md.updateString(H)},this.updateHex=function(H){this.md.updateHex(H)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&j.crypto.ECDSA!==void 0&&(this.prvKey=new j.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Oe&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Oe&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof j.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof j.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(H){return this.updateString(H),this.sign()},this.signHex=function(H){return this.updateHex(H),this.sign()},this.verify=function(H){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&j.crypto.ECDSA!==void 0&&(this.pubKey=new j.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Oe&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,H,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Oe&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,H);if(j.crypto.ECDSA!==void 0&&this.pubKey instanceof j.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,H);if(j.crypto.DSA!==void 0&&this.pubKey instanceof j.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,H);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(S,C){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(S){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(S){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(S){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(S){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(S){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=v,v!==void 0&&(v.alg!==void 0&&(this.algName=v.alg,v.prov===void 0?this.provName=j.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=v.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),v.psssaltlen!==void 0&&(this.pssSaltLen=v.psssaltlen),v.prvkeypem!==void 0)){if(v.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{y=Gt.getKey(v.prvkeypem),this.init(y)}catch(S){throw"fatal error to load pem private key: "+S}}},j.crypto.Cipher=function(v){},j.crypto.Cipher.encrypt=function(v,y,S){if(y instanceof Oe&&y.isPublic){var C=j.crypto.Cipher.getAlgByKeyAndName(y,S);if(C==="RSA")return y.encrypt(v);if(C==="RSAOAEP")return y.encryptOAEP(v,"sha1");var H=C.match(/^RSAOAEP(\d+)$/);if(H!==null)return y.encryptOAEP(v,"sha"+H[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+S}throw"Cipher.encrypt: unsupported key or algorithm"},j.crypto.Cipher.decrypt=function(v,y,S){if(y instanceof Oe&&y.isPrivate){var C=j.crypto.Cipher.getAlgByKeyAndName(y,S);if(C==="RSA")return y.decrypt(v);if(C==="RSAOAEP")return y.decryptOAEP(v,"sha1");var H=C.match(/^RSAOAEP(\d+)$/);if(H!==null)return y.decryptOAEP(v,"sha"+H[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+S}throw"Cipher.decrypt: unsupported key or algorithm"},j.crypto.Cipher.getAlgByKeyAndName=function(v,y){if(v instanceof Oe){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(y)!=-1)return y;if(y==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+y}throw"getAlgByKeyAndName: not supported algorithm name: "+y},j.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},j!==void 0&&j||(a.KJUR=j={}),j.crypto!==void 0&&j.crypto||(j.crypto={}),j.crypto.ECDSA=function(v){var y=Error,S=K,C=Q,H=j.crypto.ECDSA,X=j.crypto.ECParameterDB,oe=H.getName,be=ze,he=be.getVbyListEx,me=be.isASN1HEX,Ee=new vt;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(Ae){return new S(Ae.bitLength(),Ee).mod(Ae.subtract(S.ONE)).add(S.ONE)},this.setNamedCurve=function(Ae){this.ecparams=X.getByName(Ae),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=Ae},this.setPrivateKeyHex=function(Ae){this.isPrivate=!0,this.prvKeyHex=Ae},this.setPublicKeyHex=function(Ae){this.isPublic=!0,this.pubKeyHex=Ae},this.getPublicKeyXYHex=function(){var Ae=this.pubKeyHex;if(Ae.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var De=this.ecparams.keylen/4;if(Ae.length!==2+2*De)throw"malformed public key hex length";var Ge={};return Ge.x=Ae.substr(2,De),Ge.y=Ae.substr(2+De),Ge},this.getShortNISTPCurveName=function(){var Ae=this.curveName;return Ae==="secp256r1"||Ae==="NIST P-256"||Ae==="P-256"||Ae==="prime256v1"?"P-256":Ae==="secp384r1"||Ae==="NIST P-384"||Ae==="P-384"?"P-384":null},this.generateKeyPairHex=function(){var Ae=this.ecparams.n,De=this.getBigRandom(Ae),Ge=this.ecparams.G.multiply(De),nt=Ge.getX().toBigInteger(),pt=Ge.getY().toBigInteger(),_t=this.ecparams.keylen/4,ae=("0000000000"+De.toString(16)).slice(-_t),_e="04"+("0000000000"+nt.toString(16)).slice(-_t)+("0000000000"+pt.toString(16)).slice(-_t);return this.setPrivateKeyHex(ae),this.setPublicKeyHex(_e),{ecprvhex:ae,ecpubhex:_e}},this.signWithMessageHash=function(Ae){return this.signHex(Ae,this.prvKeyHex)},this.signHex=function(Ae,De){var Ge=new S(De,16),nt=this.ecparams.n,pt=new S(Ae.substring(0,this.ecparams.keylen/4),16);do var _t=this.getBigRandom(nt),ae=this.ecparams.G.multiply(_t).getX().toBigInteger().mod(nt);while(ae.compareTo(S.ZERO)<=0);var _e=_t.modInverse(nt).multiply(pt.add(Ge.multiply(ae))).mod(nt);return H.biRSSigToASN1Sig(ae,_e)},this.sign=function(Ae,De){var Ge=De,nt=this.ecparams.n,pt=S.fromByteArrayUnsigned(Ae);do var _t=this.getBigRandom(nt),ae=this.ecparams.G.multiply(_t).getX().toBigInteger().mod(nt);while(ae.compareTo(K.ZERO)<=0);var _e=_t.modInverse(nt).multiply(pt.add(Ge.multiply(ae))).mod(nt);return this.serializeSig(ae,_e)},this.verifyWithMessageHash=function(Ae,De){return this.verifyHex(Ae,De,this.pubKeyHex)},this.verifyHex=function(Ae,De,Ge){try{var nt,pt,_t=H.parseSigHex(De);nt=_t.r,pt=_t.s;var ae=C.decodeFromHex(this.ecparams.curve,Ge),_e=new S(Ae.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(_e,nt,pt,ae)}catch{return!1}},this.verify=function(Ae,De,Ge){var nt,pt,_t;if(Bitcoin.Util.isArray(De)){var ae=this.parseSig(De);nt=ae.r,pt=ae.s}else{if((De===void 0?"undefined":R(De))!=="object"||!De.r||!De.s)throw"Invalid value for signature";nt=De.r,pt=De.s}if(Ge instanceof Q)_t=Ge;else{if(!Bitcoin.Util.isArray(Ge))throw"Invalid format for pubkey value, must be byte array or ECPointFp";_t=C.decodeFrom(this.ecparams.curve,Ge)}var _e=S.fromByteArrayUnsigned(Ae);return this.verifyRaw(_e,nt,pt,_t)},this.verifyRaw=function(Ae,De,Ge,nt){var pt=this.ecparams.n,_t=this.ecparams.G;if(De.compareTo(S.ONE)<0||De.compareTo(pt)>=0||Ge.compareTo(S.ONE)<0||Ge.compareTo(pt)>=0)return!1;var ae=Ge.modInverse(pt),_e=Ae.multiply(ae).mod(pt),Pe=De.multiply(ae).mod(pt);return _t.multiply(_e).add(nt.multiply(Pe)).getX().toBigInteger().mod(pt).equals(De)},this.serializeSig=function(Ae,De){var Ge=Ae.toByteArraySigned(),nt=De.toByteArraySigned(),pt=[];return pt.push(2),pt.push(Ge.length),(pt=pt.concat(Ge)).push(2),pt.push(nt.length),(pt=pt.concat(nt)).unshift(pt.length),pt.unshift(48),pt},this.parseSig=function(Ae){var De;if(Ae[0]!=48)throw new Error("Signature not a valid DERSequence");if(Ae[De=2]!=2)throw new Error("First element in signature must be a DERInteger");var Ge=Ae.slice(De+2,De+2+Ae[De+1]);if(Ae[De+=2+Ae[De+1]]!=2)throw new Error("Second element in signature must be a DERInteger");var nt=Ae.slice(De+2,De+2+Ae[De+1]);return De+=2+Ae[De+1],{r:S.fromByteArrayUnsigned(Ge),s:S.fromByteArrayUnsigned(nt)}},this.parseSigCompact=function(Ae){if(Ae.length!==65)throw"Signature has the wrong length";var De=Ae[0]-27;if(De<0||De>7)throw"Invalid signature type";var Ge=this.ecparams.n;return{r:S.fromByteArrayUnsigned(Ae.slice(1,33)).mod(Ge),s:S.fromByteArrayUnsigned(Ae.slice(33,65)).mod(Ge),i:De}},this.readPKCS5PrvKeyHex=function(Ae){if(me(Ae)===!1)throw new Error("not ASN.1 hex string");var De,Ge,nt;try{De=he(Ae,0,["[0]",0],"06"),Ge=he(Ae,0,[1],"04");try{nt=he(Ae,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=oe(De),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(nt),this.setPrivateKeyHex(Ge),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(Ae){if(me(Ae)===!1)throw new y("not ASN.1 hex string");var De,Ge,nt;try{he(Ae,0,[1,0],"06"),De=he(Ae,0,[1,1],"06"),Ge=he(Ae,0,[2,0,1],"04");try{nt=he(Ae,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new y("malformed PKCS#8 plain ECC private key")}if(this.curveName=oe(De),this.curveName===void 0)throw new y("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(nt),this.setPrivateKeyHex(Ge),this.isPublic=!1},this.readPKCS8PubKeyHex=function(Ae){if(me(Ae)===!1)throw new y("not ASN.1 hex string");var De,Ge;try{he(Ae,0,[0,0],"06"),De=he(Ae,0,[0,1],"06"),Ge=he(Ae,0,[1],"03")}catch{throw new y("malformed PKCS#8 ECC public key")}if(this.curveName=oe(De),this.curveName===null)throw new y("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ge)},this.readCertPubKeyHex=function(Ae,De){if(me(Ae)===!1)throw new y("not ASN.1 hex string");var Ge,nt;try{Ge=he(Ae,0,[0,5,0,1],"06"),nt=he(Ae,0,[0,5,1],"03")}catch{throw new y("malformed X.509 certificate ECC public key")}if(this.curveName=oe(Ge),this.curveName===null)throw new y("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(nt)},v!==void 0&&v.curve!==void 0&&(this.curveName=v.curve),this.curveName===void 0&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),v!==void 0&&(v.prv!==void 0&&this.setPrivateKeyHex(v.prv),v.pub!==void 0&&this.setPublicKeyHex(v.pub))},j.crypto.ECDSA.parseSigHex=function(v){var y=j.crypto.ECDSA.parseSigHexInHexRS(v);return{r:new K(y.r,16),s:new K(y.s,16)}},j.crypto.ECDSA.parseSigHexInHexRS=function(v){var y=ze,S=y.getChildIdx,C=y.getV;if(y.checkStrictDER(v,0),v.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var H=S(v,0);if(H.length!=2)throw new Error("signature shall have two elements");var X=H[0],oe=H[1];if(v.substr(X,2)!="02")throw new Error("1st item not ASN.1 integer");if(v.substr(oe,2)!="02")throw new Error("2nd item not ASN.1 integer");return{r:C(v,X),s:C(v,oe)}},j.crypto.ECDSA.asn1SigToConcatSig=function(v){var y=j.crypto.ECDSA.parseSigHexInHexRS(v),S=y.r,C=y.s;if(S.substr(0,2)=="00"&&S.length%32==2&&(S=S.substr(2)),C.substr(0,2)=="00"&&C.length%32==2&&(C=C.substr(2)),S.length%32==30&&(S="00"+S),C.length%32==30&&(C="00"+C),S.length%32!=0)throw"unknown ECDSA sig r length error";if(C.length%32!=0)throw"unknown ECDSA sig s length error";return S+C},j.crypto.ECDSA.concatSigToASN1Sig=function(v){if(v.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var y=v.substr(0,v.length/2),S=v.substr(v.length/2);return j.crypto.ECDSA.hexRSSigToASN1Sig(y,S)},j.crypto.ECDSA.hexRSSigToASN1Sig=function(v,y){var S=new K(v,16),C=new K(y,16);return j.crypto.ECDSA.biRSSigToASN1Sig(S,C)},j.crypto.ECDSA.biRSSigToASN1Sig=function(v,y){var S=j.asn1,C=new S.DERInteger({bigint:v}),H=new S.DERInteger({bigint:y});return new S.DERSequence({array:[C,H]}).getEncodedHex()},j.crypto.ECDSA.getName=function(v){return v==="2b8104001f"?"secp192k1":v==="2a8648ce3d030107"?"secp256r1":v==="2b8104000a"?"secp256k1":v==="2b81040021"?"secp224r1":v==="2b81040022"?"secp384r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(v)!==-1?"secp256r1":"|secp256k1|".indexOf(v)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(v)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(v)!==-1?"secp384r1":null},j!==void 0&&j||(a.KJUR=j={}),j.crypto!==void 0&&j.crypto||(j.crypto={}),j.crypto.ECParameterDB=new function(){var v={},y={};function S(C){return new K(C,16)}this.getByName=function(C){var H=C;if(y[H]!==void 0&&(H=y[C]),v[H]!==void 0)return v[H];throw"unregistered EC curve name: "+H},this.regist=function(C,H,X,oe,be,he,me,Ee,Ae,De,Ge,nt){v[C]={};var pt=S(X),_t=S(oe),ae=S(be),_e=S(he),Pe=S(me),Fe=new k(pt,_t,ae),ut=Fe.decodePointHex("04"+Ee+Ae);v[C].name=C,v[C].keylen=H,v[C].curve=Fe,v[C].G=ut,v[C].n=_e,v[C].h=Pe,v[C].oid=Ge,v[C].info=nt;for(var Et=0;Et<De.length;Et++)y[De[Et]]=C}},j.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),j.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),j.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),j.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),j.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),j.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),j.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),j.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),j.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),j.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Gt=function(){var v=function(me,Ee,Ae){return y($.AES,me,Ee,Ae)},y=function(me,Ee,Ae,De){var Ge=$.enc.Hex.parse(Ee),nt=$.enc.Hex.parse(Ae),pt=$.enc.Hex.parse(De),_t={};_t.key=nt,_t.iv=pt,_t.ciphertext=Ge;var ae=me.decrypt(_t,nt,{iv:pt});return $.enc.Hex.stringify(ae)},S=function(me,Ee,Ae){return C($.AES,me,Ee,Ae)},C=function(me,Ee,Ae,De){var Ge=$.enc.Hex.parse(Ee),nt=$.enc.Hex.parse(Ae),pt=$.enc.Hex.parse(De),_t=me.encrypt(Ge,nt,{iv:pt}),ae=$.enc.Hex.parse(_t.toString());return $.enc.Base64.stringify(ae)},H={"AES-256-CBC":{proc:v,eproc:S,keylen:32,ivlen:16},"AES-192-CBC":{proc:v,eproc:S,keylen:24,ivlen:16},"AES-128-CBC":{proc:v,eproc:S,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(me,Ee,Ae){return y($.TripleDES,me,Ee,Ae)},eproc:function(me,Ee,Ae){return C($.TripleDES,me,Ee,Ae)},keylen:24,ivlen:8},"DES-CBC":{proc:function(me,Ee,Ae){return y($.DES,me,Ee,Ae)},eproc:function(me,Ee,Ae){return C($.DES,me,Ee,Ae)},keylen:8,ivlen:8}},X=function(me){var Ee={},Ae=me.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Ae&&(Ee.cipher=Ae[1],Ee.ivsalt=Ae[2]);var De=me.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));De&&(Ee.type=De[1]);var Ge=-1,nt=0;me.indexOf(`\r
\r
`)!=-1&&(Ge=me.indexOf(`\r
\r
`),nt=2),me.indexOf(`

`)!=-1&&(Ge=me.indexOf(`

`),nt=1);var pt=me.indexOf("-----END");if(Ge!=-1&&pt!=-1){var _t=me.substring(Ge+2*nt,pt-nt);_t=_t.replace(/\s+/g,""),Ee.data=_t}return Ee},oe=function(me,Ee,Ae){for(var De=Ae.substring(0,16),Ge=$.enc.Hex.parse(De),nt=$.enc.Utf8.parse(Ee),pt=H[me].keylen+H[me].ivlen,_t="",ae=null;;){var _e=$.algo.MD5.create();if(ae!=null&&_e.update(ae),_e.update(nt),_e.update(Ge),ae=_e.finalize(),(_t+=$.enc.Hex.stringify(ae)).length>=2*pt)break}var Pe={};return Pe.keyhex=_t.substr(0,2*H[me].keylen),Pe.ivhex=_t.substr(2*H[me].keylen,2*H[me].ivlen),Pe},be=function(me,Ee,Ae,De){var Ge=$.enc.Base64.parse(me),nt=$.enc.Hex.stringify(Ge);return(0,H[Ee].proc)(nt,Ae,De)};return{version:"1.0.0",parsePKCS5PEM:function(me){return X(me)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(me,Ee,Ae){return oe(me,Ee,Ae)},decryptKeyB64:function(me,Ee,Ae,De){return be(me,Ee,Ae,De)},getDecryptedKeyHex:function(me,Ee){var Ae=X(me),De=(Ae.type,Ae.cipher),Ge=Ae.ivsalt,nt=Ae.data,pt=oe(De,Ee,Ge).keyhex;return be(nt,De,pt,Ge)},getEncryptedPKCS5PEMFromPrvKeyHex:function(me,Ee,Ae,De,Ge){var nt="";if(De!==void 0&&De!=null||(De="AES-256-CBC"),H[De]===void 0)throw new Error("KEYUTIL unsupported algorithm: "+De);Ge!==void 0&&Ge!=null||(Ge=function(ae){var _e=$.lib.WordArray.random(ae);return $.enc.Hex.stringify(_e)}(H[De].ivlen).toUpperCase());var pt=function(ae,_e,Pe,Fe){return(0,H[_e].eproc)(ae,Pe,Fe)}(Ee,De,oe(De,Ae,Ge).keyhex,Ge);return nt="-----BEGIN "+me+` PRIVATE KEY-----\r
`,nt+=`Proc-Type: 4,ENCRYPTED\r
`,nt+="DEK-Info: "+De+","+Ge+`\r
`,nt+=`\r
`,nt+=pt.replace(/(.{64})/g,`$1\r
`),nt+=`\r
-----END `+me+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(me){var Ee=ze,Ae=Ee.getChildIdx,De=Ee.getV,Ge={},nt=Ae(me,0);if(nt.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+nt.length);Ge.ciphertext=De(me,nt[1]);var pt=Ae(me,nt[0]);if(pt.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+pt.length);if(De(me,pt[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var _t=Ae(me,pt[1]);if(pt.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+_t.length);var ae=Ae(me,_t[1]);if(ae.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+ae.length);if(De(me,ae[0])!="2a864886f70d0307")throw"this only supports TripleDES";Ge.encryptionSchemeAlg="TripleDES",Ge.encryptionSchemeIV=De(me,ae[1]);var _e=Ae(me,_t[0]);if(_e.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+_e.length);if(De(me,_e[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var Pe=Ae(me,_e[1]);if(Pe.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Pe.length);Ge.pbkdf2Salt=De(me,Pe[0]);var Fe=De(me,Pe[1]);try{Ge.pbkdf2Iter=parseInt(Fe,16)}catch{throw new Error("malformed format pbkdf2Iter: "+Fe)}return Ge},getPBKDF2KeyHexFromParam:function(me,Ee){var Ae=$.enc.Hex.parse(me.pbkdf2Salt),De=me.pbkdf2Iter,Ge=$.PBKDF2(Ee,Ae,{keySize:6,iterations:De});return $.enc.Hex.stringify(Ge)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(me,Ee){var Ae=xt(me,"ENCRYPTED PRIVATE KEY"),De=this.parseHexOfEncryptedPKCS8(Ae),Ge=Gt.getPBKDF2KeyHexFromParam(De,Ee),nt={};nt.ciphertext=$.enc.Hex.parse(De.ciphertext);var pt=$.enc.Hex.parse(Ge),_t=$.enc.Hex.parse(De.encryptionSchemeIV),ae=$.TripleDES.decrypt(nt,pt,{iv:_t});return $.enc.Hex.stringify(ae)},getKeyFromEncryptedPKCS8PEM:function(me,Ee){var Ae=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(me,Ee);return this.getKeyFromPlainPrivatePKCS8Hex(Ae)},parsePlainPrivatePKCS8Hex:function(me){var Ee=ze,Ae=Ee.getChildIdx,De=Ee.getV,Ge={algparam:null};if(me.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var nt=Ae(me,0);if(nt.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(me.substr(nt[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var pt=Ae(me,nt[1]);if(pt.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(me.substr(pt[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Ge.algoid=De(me,pt[0]),me.substr(pt[1],2)=="06"&&(Ge.algparam=De(me,pt[1])),me.substr(nt[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Ge.keyidx=Ee.getVidx(me,nt[2]),Ge},getKeyFromPlainPrivatePKCS8PEM:function(me){var Ee=xt(me,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(Ee)},getKeyFromPlainPrivatePKCS8Hex:function(me){var Ee,Ae=this.parsePlainPrivatePKCS8Hex(me);if(Ae.algoid=="2a864886f70d010101")Ee=new Oe;else if(Ae.algoid=="2a8648ce380401")Ee=new j.crypto.DSA;else{if(Ae.algoid!="2a8648ce3d0201")throw new Error("unsupported private key algorithm");Ee=new j.crypto.ECDSA}return Ee.readPKCS8PrvKeyHex(me),Ee},_getKeyFromPublicPKCS8Hex:function(me){var Ee,Ae=ze.getVbyList(me,0,[0,0],"06");if(Ae==="2a864886f70d010101")Ee=new Oe;else if(Ae==="2a8648ce380401")Ee=new j.crypto.DSA;else{if(Ae!=="2a8648ce3d0201")throw new Error("unsupported PKCS#8 public key hex");Ee=new j.crypto.ECDSA}return Ee.readPKCS8PubKeyHex(me),Ee},parsePublicRawRSAKeyHex:function(me){var Ee=ze,Ae=Ee.getChildIdx,De=Ee.getV,Ge={};if(me.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var nt=Ae(me,0);if(nt.length!=2)throw new Error("malformed RSA key(code:002)");if(me.substr(nt[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(Ge.n=De(me,nt[0]),me.substr(nt[1],2)!="02")throw new Error("malformed RSA key(code:004)");return Ge.e=De(me,nt[1]),Ge},parsePublicPKCS8Hex:function(me){var Ee=ze,Ae=Ee.getChildIdx,De=Ee.getV,Ge={algparam:null},nt=Ae(me,0);if(nt.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+nt.length);var pt=nt[0];if(me.substr(pt,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var _t=Ae(me,pt);if(_t.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(me.substr(_t[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(Ge.algoid=De(me,_t[0]),me.substr(_t[1],2)=="06"?Ge.algparam=De(me,_t[1]):me.substr(_t[1],2)=="30"&&(Ge.algparam={},Ge.algparam.p=Ee.getVbyList(me,_t[1],[0],"02"),Ge.algparam.q=Ee.getVbyList(me,_t[1],[1],"02"),Ge.algparam.g=Ee.getVbyList(me,_t[1],[2],"02")),me.substr(nt[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return Ge.key=De(me,nt[1]).substr(2),Ge}}}();Gt.getKey=function(v,y,S){var C=(_t=ze).getChildIdx,H=(_t.getV,_t.getVbyList),X=j.crypto,oe=X.ECDSA,be=X.DSA,he=Oe,me=xt,Ee=Gt;if(he!==void 0&&v instanceof he||oe!==void 0&&v instanceof oe||be!==void 0&&v instanceof be)return v;if(v.curve!==void 0&&v.xy!==void 0&&v.d===void 0)return new oe({pub:v.xy,curve:v.curve});if(v.curve!==void 0&&v.d!==void 0)return new oe({prv:v.d,curve:v.curve});if(v.kty===void 0&&v.n!==void 0&&v.e!==void 0&&v.d===void 0)return(hr=new he).setPublic(v.n,v.e),hr;if(v.kty===void 0&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0&&v.p!==void 0&&v.q!==void 0&&v.dp!==void 0&&v.dq!==void 0&&v.co!==void 0&&v.qi===void 0)return(hr=new he).setPrivateEx(v.n,v.e,v.d,v.p,v.q,v.dp,v.dq,v.co),hr;if(v.kty===void 0&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0&&v.p===void 0)return(hr=new he).setPrivate(v.n,v.e,v.d),hr;if(v.p!==void 0&&v.q!==void 0&&v.g!==void 0&&v.y!==void 0&&v.x===void 0)return(hr=new be).setPublic(v.p,v.q,v.g,v.y),hr;if(v.p!==void 0&&v.q!==void 0&&v.g!==void 0&&v.y!==void 0&&v.x!==void 0)return(hr=new be).setPrivate(v.p,v.q,v.g,v.y,v.x),hr;if(v.kty==="RSA"&&v.n!==void 0&&v.e!==void 0&&v.d===void 0)return(hr=new he).setPublic(Le(v.n),Le(v.e)),hr;if(v.kty==="RSA"&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0&&v.p!==void 0&&v.q!==void 0&&v.dp!==void 0&&v.dq!==void 0&&v.qi!==void 0)return(hr=new he).setPrivateEx(Le(v.n),Le(v.e),Le(v.d),Le(v.p),Le(v.q),Le(v.dp),Le(v.dq),Le(v.qi)),hr;if(v.kty==="RSA"&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0)return(hr=new he).setPrivate(Le(v.n),Le(v.e),Le(v.d)),hr;if(v.kty==="EC"&&v.crv!==void 0&&v.x!==void 0&&v.y!==void 0&&v.d===void 0){var Ae=(sr=new oe({curve:v.crv})).ecparams.keylen/4,De="04"+("0000000000"+Le(v.x)).slice(-Ae)+("0000000000"+Le(v.y)).slice(-Ae);return sr.setPublicKeyHex(De),sr}if(v.kty==="EC"&&v.crv!==void 0&&v.x!==void 0&&v.y!==void 0&&v.d!==void 0){Ae=(sr=new oe({curve:v.crv})).ecparams.keylen/4,De="04"+("0000000000"+Le(v.x)).slice(-Ae)+("0000000000"+Le(v.y)).slice(-Ae);var Ge=("0000000000"+Le(v.d)).slice(-Ae);return sr.setPublicKeyHex(De),sr.setPrivateKeyHex(Ge),sr}if(S==="pkcs5prv"){var nt,pt=v,_t=ze;if((nt=C(pt,0)).length===9)(hr=new he).readPKCS5PrvKeyHex(pt);else if(nt.length===6)(hr=new be).readPKCS5PrvKeyHex(pt);else{if(!(nt.length>2&&pt.substr(nt[1],2)==="04"))throw new Error("unsupported PKCS#1/5 hexadecimal key");(hr=new oe).readPKCS5PrvKeyHex(pt)}return hr}if(S==="pkcs8prv")return hr=Ee.getKeyFromPlainPrivatePKCS8Hex(v);if(S==="pkcs8pub")return Ee._getKeyFromPublicPKCS8Hex(v);if(S==="x509pub")return Dr.getPublicKeyFromCertHex(v);if(v.indexOf("-END CERTIFICATE-",0)!=-1||v.indexOf("-END X509 CERTIFICATE-",0)!=-1||v.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Dr.getPublicKeyFromCertPEM(v);if(v.indexOf("-END PUBLIC KEY-")!=-1){var ae=xt(v,"PUBLIC KEY");return Ee._getKeyFromPublicPKCS8Hex(ae)}if(v.indexOf("-END RSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")==-1){var _e=me(v,"RSA PRIVATE KEY");return Ee.getKey(_e,null,"pkcs5prv")}if(v.indexOf("-END DSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")==-1){var Pe=H(tn=me(v,"DSA PRIVATE KEY"),0,[1],"02"),Fe=H(tn,0,[2],"02"),ut=H(tn,0,[3],"02"),Et=H(tn,0,[4],"02"),cr=H(tn,0,[5],"02");return(hr=new be).setPrivate(new K(Pe,16),new K(Fe,16),new K(ut,16),new K(Et,16),new K(cr,16)),hr}if(v.indexOf("-END EC PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")==-1)return _e=me(v,"EC PRIVATE KEY"),Ee.getKey(_e,null,"pkcs5prv");if(v.indexOf("-END PRIVATE KEY-")!=-1)return Ee.getKeyFromPlainPrivatePKCS8PEM(v);if(v.indexOf("-END RSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")!=-1){var Bt=Ee.getDecryptedKeyHex(v,y),$r=new Oe;return $r.readPKCS5PrvKeyHex(Bt),$r}if(v.indexOf("-END EC PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")!=-1){var sr,hr=H(tn=Ee.getDecryptedKeyHex(v,y),0,[1],"04"),en=H(tn,0,[2,0],"06"),fr=H(tn,0,[3,0],"03").substr(2);if(j.crypto.OID.oidhex2name[en]===void 0)throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+en);return(sr=new oe({curve:j.crypto.OID.oidhex2name[en]})).setPublicKeyHex(fr),sr.setPrivateKeyHex(hr),sr.isPublic=!1,sr}if(v.indexOf("-END DSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")!=-1){var tn;return Pe=H(tn=Ee.getDecryptedKeyHex(v,y),0,[1],"02"),Fe=H(tn,0,[2],"02"),ut=H(tn,0,[3],"02"),Et=H(tn,0,[4],"02"),cr=H(tn,0,[5],"02"),(hr=new be).setPrivate(new K(Pe,16),new K(Fe,16),new K(ut,16),new K(Et,16),new K(cr,16)),hr}if(v.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Ee.getKeyFromEncryptedPKCS8PEM(v,y);throw new Error("not supported argument")},Gt.generateKeypair=function(v,y){if(v=="RSA"){var S=y;(oe=new Oe).generate(S,"10001"),oe.isPrivate=!0,oe.isPublic=!0;var C=new Oe,H=oe.n.toString(16),X=oe.e.toString(16);return C.setPublic(H,X),C.isPrivate=!1,C.isPublic=!0,(be={}).prvKeyObj=oe,be.pubKeyObj=C,be}if(v=="EC"){var oe,be,he=y,me=new j.crypto.ECDSA({curve:he}).generateKeyPairHex();return(oe=new j.crypto.ECDSA({curve:he})).setPublicKeyHex(me.ecpubhex),oe.setPrivateKeyHex(me.ecprvhex),oe.isPrivate=!0,oe.isPublic=!1,(C=new j.crypto.ECDSA({curve:he})).setPublicKeyHex(me.ecpubhex),C.isPrivate=!1,C.isPublic=!0,(be={}).prvKeyObj=oe,be.pubKeyObj=C,be}throw new Error("unknown algorithm: "+v)},Gt.getPEM=function(v,y,S,C,H,X){var oe=j,be=oe.asn1,he=be.DERObjectIdentifier,me=be.DERInteger,Ee=be.ASN1Util.newObject,Ae=be.x509.SubjectPublicKeyInfo,De=oe.crypto,Ge=De.DSA,nt=De.ECDSA,pt=Oe;function _t(sr){return Ee({seq:[{int:0},{int:{bigint:sr.n}},{int:sr.e},{int:{bigint:sr.d}},{int:{bigint:sr.p}},{int:{bigint:sr.q}},{int:{bigint:sr.dmp1}},{int:{bigint:sr.dmq1}},{int:{bigint:sr.coeff}}]})}function ae(sr){return Ee({seq:[{int:1},{octstr:{hex:sr.prvKeyHex}},{tag:["a0",!0,{oid:{name:sr.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+sr.pubKeyHex}}]}]})}function _e(sr){return Ee({seq:[{int:0},{int:{bigint:sr.p}},{int:{bigint:sr.q}},{int:{bigint:sr.g}},{int:{bigint:sr.y}},{int:{bigint:sr.x}}]})}if((pt!==void 0&&v instanceof pt||Ge!==void 0&&v instanceof Ge||nt!==void 0&&v instanceof nt)&&v.isPublic==1&&(y===void 0||y=="PKCS8PUB"))return Tt(Et=new Ae(v).getEncodedHex(),"PUBLIC KEY");if(y=="PKCS1PRV"&&pt!==void 0&&v instanceof pt&&(S===void 0||S==null)&&v.isPrivate==1)return Tt(Et=_t(v).getEncodedHex(),"RSA PRIVATE KEY");if(y=="PKCS1PRV"&&nt!==void 0&&v instanceof nt&&(S===void 0||S==null)&&v.isPrivate==1){var Pe=new he({name:v.curveName}).getEncodedHex(),Fe=ae(v).getEncodedHex(),ut="";return ut+=Tt(Pe,"EC PARAMETERS"),ut+=Tt(Fe,"EC PRIVATE KEY")}if(y=="PKCS1PRV"&&Ge!==void 0&&v instanceof Ge&&(S===void 0||S==null)&&v.isPrivate==1)return Tt(Et=_e(v).getEncodedHex(),"DSA PRIVATE KEY");if(y=="PKCS5PRV"&&pt!==void 0&&v instanceof pt&&S!==void 0&&S!=null&&v.isPrivate==1){var Et=_t(v).getEncodedHex();return C===void 0&&(C="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Et,S,C,X)}if(y=="PKCS5PRV"&&nt!==void 0&&v instanceof nt&&S!==void 0&&S!=null&&v.isPrivate==1)return Et=ae(v).getEncodedHex(),C===void 0&&(C="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Et,S,C,X);if(y=="PKCS5PRV"&&Ge!==void 0&&v instanceof Ge&&S!==void 0&&S!=null&&v.isPrivate==1)return Et=_e(v).getEncodedHex(),C===void 0&&(C="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Et,S,C,X);var cr=function(hr,en){var fr=Bt(hr,en);return new Ee({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:fr.pbkdf2Salt}},{int:fr.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:fr.encryptionSchemeIV}}]}]}]},{octstr:{hex:fr.ciphertext}}]}).getEncodedHex()},Bt=function(hr,en){var fr=$.lib.WordArray.random(8),tn=$.lib.WordArray.random(8),Xr=$.PBKDF2(en,fr,{keySize:6,iterations:100}),Tn=$.enc.Hex.parse(hr),Yr=$.TripleDES.encrypt(Tn,Xr,{iv:tn})+"",Zr={};return Zr.ciphertext=Yr,Zr.pbkdf2Salt=$.enc.Hex.stringify(fr),Zr.pbkdf2Iter=100,Zr.encryptionSchemeAlg="DES-EDE3-CBC",Zr.encryptionSchemeIV=$.enc.Hex.stringify(tn),Zr};if(y=="PKCS8PRV"&&pt!=null&&v instanceof pt&&v.isPrivate==1){var $r=_t(v).getEncodedHex();return Et=Ee({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:$r}}]}).getEncodedHex(),S===void 0||S==null?Tt(Et,"PRIVATE KEY"):Tt(Fe=cr(Et,S),"ENCRYPTED PRIVATE KEY")}if(y=="PKCS8PRV"&&nt!==void 0&&v instanceof nt&&v.isPrivate==1)return $r=new Ee({seq:[{int:1},{octstr:{hex:v.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+v.pubKeyHex}}]}]}).getEncodedHex(),Et=Ee({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:v.curveName}}]},{octstr:{hex:$r}}]}).getEncodedHex(),S===void 0||S==null?Tt(Et,"PRIVATE KEY"):Tt(Fe=cr(Et,S),"ENCRYPTED PRIVATE KEY");if(y=="PKCS8PRV"&&Ge!==void 0&&v instanceof Ge&&v.isPrivate==1)return $r=new me({bigint:v.x}).getEncodedHex(),Et=Ee({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:v.p}},{int:{bigint:v.q}},{int:{bigint:v.g}}]}]},{octstr:{hex:$r}}]}).getEncodedHex(),S===void 0||S==null?Tt(Et,"PRIVATE KEY"):Tt(Fe=cr(Et,S),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Gt.getKeyFromCSRPEM=function(v){var y=xt(v,"CERTIFICATE REQUEST");return Gt.getKeyFromCSRHex(y)},Gt.getKeyFromCSRHex=function(v){var y=Gt.parseCSRHex(v);return Gt.getKey(y.p8pubkeyhex,null,"pkcs8pub")},Gt.parseCSRHex=function(v){var y=ze,S=y.getChildIdx,C=y.getTLV,H={},X=v;if(X.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var oe=S(X,0);if(oe.length<1)throw new Error("malformed CSR(code:002)");if(X.substr(oe[0],2)!="30")throw new Error("malformed CSR(code:003)");var be=S(X,oe[0]);if(be.length<3)throw new Error("malformed CSR(code:004)");return H.p8pubkeyhex=C(X,be[2]),H},Gt.getKeyID=function(v){var y=Gt,S=ze;typeof v=="string"&&v.indexOf("BEGIN ")!=-1&&(v=y.getKey(v));var C=xt(y.getPEM(v)),H=S.getIdxbyList(C,0,[1]),X=S.getV(C,H).substring(2);return j.crypto.Util.hashHex(X,"sha1")},Gt.getJWKFromKey=function(v){var y={};if(v instanceof Oe&&v.isPrivate)return y.kty="RSA",y.n=ot(v.n.toString(16)),y.e=ot(v.e.toString(16)),y.d=ot(v.d.toString(16)),y.p=ot(v.p.toString(16)),y.q=ot(v.q.toString(16)),y.dp=ot(v.dmp1.toString(16)),y.dq=ot(v.dmq1.toString(16)),y.qi=ot(v.coeff.toString(16)),y;if(v instanceof Oe&&v.isPublic)return y.kty="RSA",y.n=ot(v.n.toString(16)),y.e=ot(v.e.toString(16)),y;if(v instanceof j.crypto.ECDSA&&v.isPrivate){if((C=v.getShortNISTPCurveName())!=="P-256"&&C!=="P-384")throw new Error("unsupported curve name for JWT: "+C);var S=v.getPublicKeyXYHex();return y.kty="EC",y.crv=C,y.x=ot(S.x),y.y=ot(S.y),y.d=ot(v.prvKeyHex),y}if(v instanceof j.crypto.ECDSA&&v.isPublic){var C;if((C=v.getShortNISTPCurveName())!=="P-256"&&C!=="P-384")throw new Error("unsupported curve name for JWT: "+C);return S=v.getPublicKeyXYHex(),y.kty="EC",y.crv=C,y.x=ot(S.x),y.y=ot(S.y),y}throw new Error("not supported key object")},Oe.getPosArrayOfChildrenFromHex=function(v){return ze.getChildIdx(v,0)},Oe.getHexValueArrayOfChildrenFromHex=function(v){var y,S=ze.getV,C=S(v,(y=Oe.getPosArrayOfChildrenFromHex(v))[0]),H=S(v,y[1]),X=S(v,y[2]),oe=S(v,y[3]),be=S(v,y[4]),he=S(v,y[5]),me=S(v,y[6]),Ee=S(v,y[7]),Ae=S(v,y[8]);return(y=new Array).push(C,H,X,oe,be,he,me,Ee,Ae),y},Oe.prototype.readPrivateKeyFromPEMString=function(v){var y=xt(v),S=Oe.getHexValueArrayOfChildrenFromHex(y);this.setPrivateEx(S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8])},Oe.prototype.readPKCS5PrvKeyHex=function(v){var y=Oe.getHexValueArrayOfChildrenFromHex(v);this.setPrivateEx(y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8])},Oe.prototype.readPKCS8PrvKeyHex=function(v){var y,S,C,H,X,oe,be,he,me=ze,Ee=me.getVbyListEx;if(me.isASN1HEX(v)===!1)throw new Error("not ASN.1 hex string");try{y=Ee(v,0,[2,0,1],"02"),S=Ee(v,0,[2,0,2],"02"),C=Ee(v,0,[2,0,3],"02"),H=Ee(v,0,[2,0,4],"02"),X=Ee(v,0,[2,0,5],"02"),oe=Ee(v,0,[2,0,6],"02"),be=Ee(v,0,[2,0,7],"02"),he=Ee(v,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(y,S,C,H,X,oe,be,he)},Oe.prototype.readPKCS5PubKeyHex=function(v){var y=ze,S=y.getV;if(y.isASN1HEX(v)===!1)throw new Error("keyHex is not ASN.1 hex string");var C=y.getChildIdx(v,0);if(C.length!==2||v.substr(C[0],2)!=="02"||v.substr(C[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var H=S(v,C[0]),X=S(v,C[1]);this.setPublic(H,X)},Oe.prototype.readPKCS8PubKeyHex=function(v){var y=ze;if(y.isASN1HEX(v)===!1)throw new Error("not ASN.1 hex string");if(y.getTLVbyListEx(v,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var S=y.getTLVbyListEx(v,0,[1,0]);this.readPKCS5PubKeyHex(S)},Oe.prototype.readCertPubKeyHex=function(v,y){var S,C;(S=new Dr).readCertHex(v),C=S.getPublicKeyHex(),this.readPKCS8PubKeyHex(C)};function Jr(v,y){for(var S="",C=y/4-v.length,H=0;H<C;H++)S+="0";return S+v}function xn(v,y,S){for(var C="",H=0;C.length<y;)C+=qt(S(er(v+String.fromCharCode.apply(String,[(4278190080&H)>>24,(16711680&H)>>16,(65280&H)>>8,255&H])))),H+=1;return C}function un(v){for(var y in j.crypto.Util.DIGESTINFOHEAD){var S=j.crypto.Util.DIGESTINFOHEAD[y],C=S.length;if(v.substring(0,C)==S)return[y,v.substring(C)]}return[]}function Dr(v){var y,S=ze,C=S.getChildIdx,H=S.getV,X=S.getTLV,oe=S.getVbyList,be=S.getVbyListEx,he=S.getTLVbyList,me=S.getTLVbyListEx,Ee=S.getIdxbyList,Ae=S.getIdxbyListEx,De=S.getVidx,Ge=S.getInt,nt=S.oidname,pt=S.hextooidstr,_t=xt;try{y=j.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var ae=he(this.hex,0,[0,0]);if(ae.substr(0,2)=="a0"){var _e=he(ae,0,[0]),Pe=Ge(_e,0);if(Pe<0||2<Pe)throw new Error("malformed version field");return this.version=Pe+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return be(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var ae=me(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(ae)},this.getAlgorithmIdentifierName=function(ae){for(var _e in y)if(ae===y[_e])return _e;return nt(be(ae,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return he(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return he(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var ae=oe(this.hex,0,[0,4+this.foffset,0]);return ae=ae.replace(/(..)/g,"%$1"),ae=decodeURIComponent(ae)},this.getNotAfter=function(){var ae=oe(this.hex,0,[0,4+this.foffset,1]);return ae=ae.replace(/(..)/g,"%$1"),ae=decodeURIComponent(ae)},this.getPublicKeyHex=function(){return S.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Ee(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var ae=this.getPublicKeyIdx();return Ee(this.hex,ae,[1,0],"30")},this.getPublicKey=function(){return Gt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var ae=he(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(ae)},this.getSignatureValueHex=function(){return oe(this.hex,0,[2],"03",!0)},this.verifySignature=function(ae){var _e=this.getSignatureAlgorithmField(),Pe=this.getSignatureValueHex(),Fe=he(this.hex,0,[0],"30"),ut=new j.crypto.Signature({alg:_e});return ut.init(ae),ut.updateHex(Fe),ut.verify(Pe)},this.parseExt=function(ae){var _e,Pe,Fe;if(ae===void 0){if(Fe=this.hex,this.version!==3)return-1;_e=Ee(Fe,0,[0,7,0],"30"),Pe=C(Fe,_e)}else{Fe=xt(ae);var ut=Ee(Fe,0,[0,3,0,0],"06");if(H(Fe,ut)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);_e=Ee(Fe,0,[0,3,0,1,0],"30"),Pe=C(Fe,_e),this.hex=Fe}this.aExtInfo=new Array;for(var Et=0;Et<Pe.length;Et++){var cr={critical:!1},Bt=0;C(Fe,Pe[Et]).length===3&&(cr.critical=!0,Bt=1),cr.oid=S.hextooidstr(oe(Fe,Pe[Et],[0],"06"));var $r=Ee(Fe,Pe[Et],[1+Bt]);cr.vidx=De(Fe,$r),this.aExtInfo.push(cr)}},this.getExtInfo=function(ae){var _e=this.aExtInfo,Pe=ae;if(ae.match(/^[0-9.]+$/)||(Pe=j.asn1.x509.OID.name2oid(ae)),Pe!==""){for(var Fe=0;Fe<_e.length;Fe++)if(_e[Fe].oid===Pe)return _e[Fe]}},this.getExtBasicConstraints=function(ae,_e){if(ae===void 0&&_e===void 0){var Pe=this.getExtInfo("basicConstraints");if(Pe===void 0)return;ae=X(this.hex,Pe.vidx),_e=Pe.critical}var Fe={extname:"basicConstraints"};if(_e&&(Fe.critical=!0),ae==="3000")return Fe;if(ae==="30030101ff")return Fe.cA=!0,Fe;if(ae.substr(0,12)==="30060101ff02"){var ut=H(ae,10),Et=parseInt(ut,16);return Fe.cA=!0,Fe.pathLen=Et,Fe}throw new Error("hExtV parse error: "+ae)},this.getExtKeyUsage=function(ae,_e){if(ae===void 0&&_e===void 0){var Pe=this.getExtInfo("keyUsage");if(Pe===void 0)return;ae=X(this.hex,Pe.vidx),_e=Pe.critical}var Fe={extname:"keyUsage"};return _e&&(Fe.critical=!0),Fe.names=this.getExtKeyUsageString(ae).split(","),Fe},this.getExtKeyUsageBin=function(ae){if(ae===void 0){var _e=this.getExtInfo("keyUsage");if(_e===void 0)return"";ae=X(this.hex,_e.vidx)}if(ae.length!=8&&ae.length!=10)throw new Error("malformed key usage value: "+ae);var Pe="000000000000000"+parseInt(ae.substr(6),16).toString(2);return ae.length==8&&(Pe=Pe.slice(-8)),ae.length==10&&(Pe=Pe.slice(-16)),(Pe=Pe.replace(/0+$/,""))==""&&(Pe="0"),Pe},this.getExtKeyUsageString=function(ae){for(var _e=this.getExtKeyUsageBin(ae),Pe=new Array,Fe=0;Fe<_e.length;Fe++)_e.substr(Fe,1)=="1"&&Pe.push(Dr.KEYUSAGE_NAME[Fe]);return Pe.join(",")},this.getExtSubjectKeyIdentifier=function(ae,_e){if(ae===void 0&&_e===void 0){var Pe=this.getExtInfo("subjectKeyIdentifier");if(Pe===void 0)return;ae=X(this.hex,Pe.vidx),_e=Pe.critical}var Fe={extname:"subjectKeyIdentifier"};_e&&(Fe.critical=!0);var ut=H(ae,0);return Fe.kid={hex:ut},Fe},this.getExtAuthorityKeyIdentifier=function(ae,_e){if(ae===void 0&&_e===void 0){var Pe=this.getExtInfo("authorityKeyIdentifier");if(Pe===void 0)return;ae=X(this.hex,Pe.vidx),_e=Pe.critical}var Fe={extname:"authorityKeyIdentifier"};_e&&(Fe.critical=!0);for(var ut=C(ae,0),Et=0;Et<ut.length;Et++){var cr=ae.substr(ut[Et],2);if(cr==="80"&&(Fe.kid={hex:H(ae,ut[Et])}),cr==="a1"){var Bt=X(ae,ut[Et]),$r=this.getGeneralNames(Bt);Fe.issuer=$r[0].dn}cr==="82"&&(Fe.sn={hex:H(ae,ut[Et])})}return Fe},this.getExtExtKeyUsage=function(ae,_e){if(ae===void 0&&_e===void 0){var Pe=this.getExtInfo("extKeyUsage");if(Pe===void 0)return;ae=X(this.hex,Pe.vidx),_e=Pe.critical}var Fe={extname:"extKeyUsage",array:[]};_e&&(Fe.critical=!0);for(var ut=C(ae,0),Et=0;Et<ut.length;Et++)Fe.array.push(nt(H(ae,ut[Et])));return Fe},this.getExtExtKeyUsageName=function(){var ae=this.getExtInfo("extKeyUsage");if(ae===void 0)return ae;var _e=new Array,Pe=X(this.hex,ae.vidx);if(Pe==="")return _e;for(var Fe=C(Pe,0),ut=0;ut<Fe.length;ut++)_e.push(nt(H(Pe,Fe[ut])));return _e},this.getExtSubjectAltName=function(ae,_e){if(ae===void 0&&_e===void 0){var Pe=this.getExtInfo("subjectAltName");if(Pe===void 0)return;ae=X(this.hex,Pe.vidx),_e=Pe.critical}var Fe={extname:"subjectAltName",array:[]};return _e&&(Fe.critical=!0),Fe.array=this.getGeneralNames(ae),Fe},this.getExtIssuerAltName=function(ae,_e){if(ae===void 0&&_e===void 0){var Pe=this.getExtInfo("issuerAltName");if(Pe===void 0)return;ae=X(this.hex,Pe.vidx),_e=Pe.critical}var Fe={extname:"issuerAltName",array:[]};return _e&&(Fe.critical=!0),Fe.array=this.getGeneralNames(ae),Fe},this.getGeneralNames=function(ae){for(var _e=C(ae,0),Pe=[],Fe=0;Fe<_e.length;Fe++){var ut=this.getGeneralName(X(ae,_e[Fe]));ut!==void 0&&Pe.push(ut)}return Pe},this.getGeneralName=function(ae){var _e=ae.substr(0,2),Pe=H(ae,0),Fe=qt(Pe);return _e=="81"?{rfc822:Fe}:_e=="82"?{dns:Fe}:_e=="86"?{uri:Fe}:_e=="87"?{ip:yr(Pe)}:_e=="a4"?{dn:this.getX500Name(Pe)}:void 0},this.getExtSubjectAltName2=function(){var ae,_e,Pe,Fe=this.getExtInfo("subjectAltName");if(Fe===void 0)return Fe;for(var ut=new Array,Et=X(this.hex,Fe.vidx),cr=C(Et,0),Bt=0;Bt<cr.length;Bt++)Pe=Et.substr(cr[Bt],2),ae=H(Et,cr[Bt]),Pe==="81"&&(_e=Qt(ae),ut.push(["MAIL",_e])),Pe==="82"&&(_e=Qt(ae),ut.push(["DNS",_e])),Pe==="84"&&(_e=Dr.hex2dn(ae,0),ut.push(["DN",_e])),Pe==="86"&&(_e=Qt(ae),ut.push(["URI",_e])),Pe==="87"&&(_e=yr(ae),ut.push(["IP",_e]));return ut},this.getExtCRLDistributionPoints=function(ae,_e){if(ae===void 0&&_e===void 0){var Pe=this.getExtInfo("cRLDistributionPoints");if(Pe===void 0)return;ae=X(this.hex,Pe.vidx),_e=Pe.critical}var Fe={extname:"cRLDistributionPoints",array:[]};_e&&(Fe.critical=!0);for(var ut=C(ae,0),Et=0;Et<ut.length;Et++){var cr=X(ae,ut[Et]);Fe.array.push(this.getDistributionPoint(cr))}return Fe},this.getDistributionPoint=function(ae){for(var _e={},Pe=C(ae,0),Fe=0;Fe<Pe.length;Fe++){var ut=ae.substr(Pe[Fe],2),Et=X(ae,Pe[Fe]);ut=="a0"&&(_e.dpname=this.getDistributionPointName(Et))}return _e},this.getDistributionPointName=function(ae){for(var _e={},Pe=C(ae,0),Fe=0;Fe<Pe.length;Fe++){var ut=ae.substr(Pe[Fe],2),Et=X(ae,Pe[Fe]);ut=="a0"&&(_e.full=this.getGeneralNames(Et))}return _e},this.getExtCRLDistributionPointsURI=function(){var ae=this.getExtInfo("cRLDistributionPoints");if(ae===void 0)return ae;for(var _e=new Array,Pe=C(this.hex,ae.vidx),Fe=0;Fe<Pe.length;Fe++)try{var ut=Qt(oe(this.hex,Pe[Fe],[0,0,0],"86"));_e.push(ut)}catch{}return _e},this.getExtAIAInfo=function(){var ae=this.getExtInfo("authorityInfoAccess");if(ae===void 0)return ae;for(var _e={ocsp:[],caissuer:[]},Pe=C(this.hex,ae.vidx),Fe=0;Fe<Pe.length;Fe++){var ut=oe(this.hex,Pe[Fe],[0],"06"),Et=oe(this.hex,Pe[Fe],[1],"86");ut==="2b06010505073001"&&_e.ocsp.push(Qt(Et)),ut==="2b06010505073002"&&_e.caissuer.push(Qt(Et))}return _e},this.getExtAuthorityInfoAccess=function(ae,_e){if(ae===void 0&&_e===void 0){var Pe=this.getExtInfo("authorityInfoAccess");if(Pe===void 0)return;ae=X(this.hex,Pe.vidx),_e=Pe.critical}var Fe={extname:"authorityInfoAccess",array:[]};_e&&(Fe.critical=!0);for(var ut=C(ae,0),Et=0;Et<ut.length;Et++){var cr=be(ae,ut[Et],[0],"06"),Bt=Qt(oe(ae,ut[Et],[1],"86"));if(cr=="2b06010505073001")Fe.array.push({ocsp:Bt});else{if(cr!="2b06010505073002")throw new Error("unknown method: "+cr);Fe.array.push({caissuer:Bt})}}return Fe},this.getExtCertificatePolicies=function(ae,_e){if(ae===void 0&&_e===void 0){var Pe=this.getExtInfo("certificatePolicies");if(Pe===void 0)return;ae=X(this.hex,Pe.vidx),_e=Pe.critical}var Fe={extname:"certificatePolicies",array:[]};_e&&(Fe.critical=!0);for(var ut=C(ae,0),Et=0;Et<ut.length;Et++){var cr=X(ae,ut[Et]),Bt=this.getPolicyInformation(cr);Fe.array.push(Bt)}return Fe},this.getPolicyInformation=function(ae){var _e={},Pe=oe(ae,0,[0],"06");_e.policyoid=nt(Pe);var Fe=Ae(ae,0,[1],"30");if(Fe!=-1){_e.array=[];for(var ut=C(ae,Fe),Et=0;Et<ut.length;Et++){var cr=X(ae,ut[Et]),Bt=this.getPolicyQualifierInfo(cr);_e.array.push(Bt)}}return _e},this.getPolicyQualifierInfo=function(ae){var _e={},Pe=oe(ae,0,[0],"06");if(Pe==="2b06010505070201"){var Fe=be(ae,0,[1],"16");_e.cps=qt(Fe)}else if(Pe==="2b06010505070202"){var ut=he(ae,0,[1],"30");_e.unotice=this.getUserNotice(ut)}return _e},this.getUserNotice=function(ae){for(var _e={},Pe=C(ae,0),Fe=0;Fe<Pe.length;Fe++){var ut=X(ae,Pe[Fe]);ut.substr(0,2)!="30"&&(_e.exptext=this.getDisplayText(ut))}return _e},this.getDisplayText=function(ae){var _e={};return _e.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[ae.substr(0,2)],_e.str=qt(H(ae,0)),_e},this.getExtCRLNumber=function(ae,_e){var Pe={extname:"cRLNumber"};if(_e&&(Pe.critical=!0),ae.substr(0,2)=="02")return Pe.num={hex:H(ae,0)},Pe;throw new Error("hExtV parse error: "+ae)},this.getExtCRLReason=function(ae,_e){var Pe={extname:"cRLReason"};if(_e&&(Pe.critical=!0),ae.substr(0,2)=="0a")return Pe.code=parseInt(H(ae,0),16),Pe;throw new Error("hExtV parse error: "+ae)},this.getExtOcspNonce=function(ae,_e){var Pe={extname:"ocspNonce"};_e&&(Pe.critical=!0);var Fe=H(ae,0);return Pe.hex=Fe,Pe},this.getExtOcspNoCheck=function(ae,_e){var Pe={extname:"ocspNoCheck"};return _e&&(Pe.critical=!0),Pe},this.getExtAdobeTimeStamp=function(ae,_e){if(ae===void 0&&_e===void 0){var Pe=this.getExtInfo("adobeTimeStamp");if(Pe===void 0)return;ae=X(this.hex,Pe.vidx),_e=Pe.critical}var Fe={extname:"adobeTimeStamp"};_e&&(Fe.critical=!0);var ut=C(ae,0);if(ut.length>1){var Et=X(ae,ut[1]),cr=this.getGeneralName(Et);cr.uri!=null&&(Fe.uri=cr.uri)}if(ut.length>2){var Bt=X(ae,ut[2]);Bt=="0101ff"&&(Fe.reqauth=!0),Bt=="010100"&&(Fe.reqauth=!1)}return Fe},this.getX500NameRule=function(ae){for(var _e=null,Pe=[],Fe=0;Fe<ae.length;Fe++)for(var ut=ae[Fe],Et=0;Et<ut.length;Et++)Pe.push(ut[Et]);for(Fe=0;Fe<Pe.length;Fe++){var cr=Pe[Fe],Bt=cr.ds,$r=cr.value,sr=cr.type;if(Bt!="prn"&&Bt!="utf8"&&Bt!="ia5")return"mixed";if(Bt=="ia5"){if(sr!="CN")return"mixed";if(j.lang.String.isMail($r))continue;return"mixed"}if(sr=="C"){if(Bt=="prn")continue;return"mixed"}if(_e==null)_e=Bt;else if(_e!==Bt)return"mixed"}return _e??"prn"},this.getX500Name=function(ae){var _e=this.getX500NameArray(ae);return{array:_e,str:this.dnarraytostr(_e)}},this.getX500NameArray=function(ae){for(var _e=[],Pe=C(ae,0),Fe=0;Fe<Pe.length;Fe++)_e.push(this.getRDN(X(ae,Pe[Fe])));return _e},this.getRDN=function(ae){for(var _e=[],Pe=C(ae,0),Fe=0;Fe<Pe.length;Fe++)_e.push(this.getAttrTypeAndValue(X(ae,Pe[Fe])));return _e},this.getAttrTypeAndValue=function(ae){var _e={type:null,value:null,ds:null},Pe=C(ae,0),Fe=oe(ae,Pe[0],[],"06"),ut=oe(ae,Pe[1],[]),Et=j.asn1.ASN1Util.oidHexToInt(Fe);return _e.type=j.asn1.x509.OID.oid2atype(Et),_e.ds=this.HEX2STAG[ae.substr(Pe[1],2)],_e.ds!="bmp"?_e.value=Qt(ut):_e.value=ir(ut),_e},this.readCertPEM=function(ae){this.readCertHex(_t(ae))},this.readCertHex=function(ae){this.hex=ae,this.getVersion();try{Ee(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var ae={};return ae.version=this.getVersion(),ae.serial={hex:this.getSerialNumberHex()},ae.sigalg=this.getSignatureAlgorithmField(),ae.issuer=this.getIssuer(),ae.notbefore=this.getNotBefore(),ae.notafter=this.getNotAfter(),ae.subject=this.getSubject(),ae.sbjpubkey=Tt(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(ae.ext=this.getExtParamArray()),ae.sighex=this.getSignatureValueHex(),ae},this.getExtParamArray=function(ae){ae==null&&Ae(this.hex,0,[0,"[3]"])!=-1&&(ae=me(this.hex,0,[0,"[3]",0],"30"));for(var _e=[],Pe=C(ae,0),Fe=0;Fe<Pe.length;Fe++){var ut=X(ae,Pe[Fe]),Et=this.getExtParam(ut);Et!=null&&_e.push(Et)}return _e},this.getExtParam=function(ae){var _e=C(ae,0).length;if(_e!=2&&_e!=3)throw new Error("wrong number elements in Extension: "+_e+" "+ae);var Pe=pt(oe(ae,0,[0],"06")),Fe=!1;_e==3&&he(ae,0,[1])=="0101ff"&&(Fe=!0);var ut=he(ae,0,[_e-1,0]),Et=void 0;if(Pe=="2.5.29.14"?Et=this.getExtSubjectKeyIdentifier(ut,Fe):Pe=="2.5.29.15"?Et=this.getExtKeyUsage(ut,Fe):Pe=="2.5.29.17"?Et=this.getExtSubjectAltName(ut,Fe):Pe=="2.5.29.18"?Et=this.getExtIssuerAltName(ut,Fe):Pe=="2.5.29.19"?Et=this.getExtBasicConstraints(ut,Fe):Pe=="2.5.29.31"?Et=this.getExtCRLDistributionPoints(ut,Fe):Pe=="2.5.29.32"?Et=this.getExtCertificatePolicies(ut,Fe):Pe=="2.5.29.35"?Et=this.getExtAuthorityKeyIdentifier(ut,Fe):Pe=="2.5.29.37"?Et=this.getExtExtKeyUsage(ut,Fe):Pe=="1.3.6.1.5.5.7.1.1"?Et=this.getExtAuthorityInfoAccess(ut,Fe):Pe=="2.5.29.20"?Et=this.getExtCRLNumber(ut,Fe):Pe=="2.5.29.21"?Et=this.getExtCRLReason(ut,Fe):Pe=="1.3.6.1.5.5.7.48.1.2"?Et=this.getExtOcspNonce(ut,Fe):Pe=="1.3.6.1.5.5.7.48.1.5"?Et=this.getExtOcspNoCheck(ut,Fe):Pe=="1.2.840.113583.1.1.9.1"&&(Et=this.getExtAdobeTimeStamp(ut,Fe)),Et!=null)return Et;var cr={extname:Pe,extn:ut};return Fe&&(cr.critical=!0),cr},this.findExt=function(ae,_e){for(var Pe=0;Pe<ae.length;Pe++)if(ae[Pe].extname==_e)return ae[Pe];return null},this.updateExtCDPFullURI=function(ae,_e){var Pe=this.findExt(ae,"cRLDistributionPoints");if(Pe!=null&&Pe.array!=null){for(var Fe=Pe.array,ut=0;ut<Fe.length;ut++)if(Fe[ut].dpname!=null&&Fe[ut].dpname.full!=null)for(var Et=Fe[ut].dpname.full,cr=0;cr<Et.length;cr++){var Bt=Et[ut];Bt.uri!=null&&(Bt.uri=_e)}}},this.updateExtAIAOCSP=function(ae,_e){var Pe=this.findExt(ae,"authorityInfoAccess");if(Pe!=null&&Pe.array!=null)for(var Fe=Pe.array,ut=0;ut<Fe.length;ut++)Fe[ut].ocsp!=null&&(Fe[ut].ocsp=_e)},this.updateExtAIACAIssuer=function(ae,_e){var Pe=this.findExt(ae,"authorityInfoAccess");if(Pe!=null&&Pe.array!=null)for(var Fe=Pe.array,ut=0;ut<Fe.length;ut++)Fe[ut].caissuer!=null&&(Fe[ut].caissuer=_e)},this.dnarraytostr=function(ae){return"/"+ae.map(function(_e){return function(Fe){return Fe.map(function(ut){return function(cr){return cr.type+"="+cr.value}(ut).replace(/\+/,"\\+")}).join("+")}(_e).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var ae,_e,Pe,Fe=function(Xr){return JSON.stringify(Xr.array).replace(/[\[\]\{\}\"]/g,"")},ut=function(Xr){for(var Tn="",Yr=Xr.array,Zr=0;Zr<Yr.length;Zr++){var vn=Yr[Zr];if(Tn+="    policy oid: "+vn.policyoid+`
`,vn.array!==void 0)for(var Rr=0;Rr<vn.array.length;Rr++){var jn=vn.array[Rr];jn.cps!==void 0&&(Tn+="    cps: "+jn.cps+`
`)}}return Tn},Et=function(Xr){for(var Tn="",Yr=Xr.array,Zr=0;Zr<Yr.length;Zr++){var vn=Yr[Zr];try{vn.dpname.full[0].uri!==void 0&&(Tn+="    "+vn.dpname.full[0].uri+`
`)}catch{}try{vn.dname.full[0].dn.hex!==void 0&&(Tn+="    "+Dr.hex2dn(vn.dpname.full[0].dn.hex)+`
`)}catch{}}return Tn},cr=function(Xr){for(var Tn="",Yr=Xr.array,Zr=0;Zr<Yr.length;Zr++){var vn=Yr[Zr];vn.caissuer!==void 0&&(Tn+="    caissuer: "+vn.caissuer+`
`),vn.ocsp!==void 0&&(Tn+="    ocsp: "+vn.ocsp+`
`)}return Tn};if(ae=`Basic Fields
`,ae+="  serial number: "+this.getSerialNumberHex()+`
`,ae+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,ae+="  issuer: "+this.getIssuerString()+`
`,ae+="  notBefore: "+this.getNotBefore()+`
`,ae+="  notAfter: "+this.getNotAfter()+`
`,ae+="  subject: "+this.getSubjectString()+`
`,ae+=`  subject public key info: 
`,ae+="    key algorithm: "+(_e=this.getPublicKey()).type+`
`,_e.type==="RSA"&&(ae+="    n="+Gr(_e.n.toString(16)).substr(0,16)+`...
`,ae+="    e="+Gr(_e.e.toString(16))+`
`),(Pe=this.aExtInfo)!=null){ae+=`X509v3 Extensions:
`;for(var Bt=0;Bt<Pe.length;Bt++){var $r=Pe[Bt],sr=j.asn1.x509.OID.oid2name($r.oid);sr===""&&(sr=$r.oid);var hr="";if($r.critical===!0&&(hr="CRITICAL"),ae+="  "+sr+" "+hr+`:
`,sr==="basicConstraints"){var en=this.getExtBasicConstraints();en.cA===void 0?ae+=`    {}
`:(ae+="    cA=true",en.pathLen!==void 0&&(ae+=", pathLen="+en.pathLen),ae+=`
`)}else if(sr==="keyUsage")ae+="    "+this.getExtKeyUsageString()+`
`;else if(sr==="subjectKeyIdentifier")ae+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(sr==="authorityKeyIdentifier"){var fr=this.getExtAuthorityKeyIdentifier();fr.kid!==void 0&&(ae+="    kid="+fr.kid.hex+`
`)}else sr==="extKeyUsage"?ae+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:sr==="subjectAltName"?ae+="    "+Fe(this.getExtSubjectAltName())+`
`:sr==="cRLDistributionPoints"?ae+=Et(this.getExtCRLDistributionPoints()):sr==="authorityInfoAccess"?ae+=cr(this.getExtAuthorityInfoAccess()):sr==="certificatePolicies"&&(ae+=ut(this.getExtCertificatePolicies()))}}return ae+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,ae+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof v=="string"&&(v.indexOf("-----BEGIN")!=-1?this.readCertPEM(v):j.lang.String.isHex(v)&&this.readCertHex(v))}Oe.prototype.sign=function(v,y){var S=function(H){return j.crypto.Util.hashString(H,y)}(v);return this.signWithMessageHash(S,y)},Oe.prototype.signWithMessageHash=function(v,y){var S=We(j.crypto.Util.getPaddedDigestInfoHex(v,y,this.n.bitLength()),16);return Jr(this.doPrivate(S).toString(16),this.n.bitLength())},Oe.prototype.signPSS=function(v,y,S){var C=function(X){return j.crypto.Util.hashHex(X,y)}(er(v));return S===void 0&&(S=-1),this.signWithMessageHashPSS(C,y,S)},Oe.prototype.signWithMessageHashPSS=function(v,y,S){var C,H=qt(v),X=H.length,oe=this.n.bitLength()-1,be=Math.ceil(oe/8),he=function(ae){return j.crypto.Util.hashHex(ae,y)};if(S===-1||S===void 0)S=X;else if(S===-2)S=be-X-2;else if(S<-2)throw new Error("invalid salt length");if(be<X+S+2)throw new Error("data too long");var me="";S>0&&(me=new Array(S),new vt().nextBytes(me),me=String.fromCharCode.apply(String,me));var Ee=qt(he(er("\0\0\0\0\0\0\0\0"+H+me))),Ae=[];for(C=0;C<be-S-X-2;C+=1)Ae[C]=0;var De=String.fromCharCode.apply(String,Ae)+""+me,Ge=xn(Ee,De.length,he),nt=[];for(C=0;C<De.length;C+=1)nt[C]=De.charCodeAt(C)^Ge.charCodeAt(C);var pt=65280>>8*be-oe&255;for(nt[0]&=~pt,C=0;C<X;C++)nt.push(Ee.charCodeAt(C));return nt.push(188),Jr(this.doPrivate(new K(nt)).toString(16),this.n.bitLength())},Oe.prototype.verify=function(v,y){if((y=y.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var S=We(y,16),C=this.n.bitLength();if(S.bitLength()>C)return!1;var H=this.doPublic(S).toString(16);if(H.length+3!=C/4)return!1;var X=un(H.replace(/^1f+00/,""));if(X.length==0)return!1;var oe=X[0];return X[1]==function(he){return j.crypto.Util.hashString(he,oe)}(v)},Oe.prototype.verifyWithMessageHash=function(v,y){if(y.length!=Math.ceil(this.n.bitLength()/4))return!1;var S=We(y,16);if(S.bitLength()>this.n.bitLength())return 0;var C=un(this.doPublic(S).toString(16).replace(/^1f+00/,""));return C.length==0?!1:(C[0],C[1]==v)},Oe.prototype.verifyPSS=function(v,y,S,C){var H=function(oe){return j.crypto.Util.hashHex(oe,S)}(er(v));return C===void 0&&(C=-1),this.verifyWithMessageHashPSS(H,y,S,C)},Oe.prototype.verifyWithMessageHashPSS=function(v,y,S,C){if(y.length!=Math.ceil(this.n.bitLength()/4))return!1;var H,X=new K(y,16),oe=function(Pe){return j.crypto.Util.hashHex(Pe,S)},be=qt(v),he=be.length,me=this.n.bitLength()-1,Ee=Math.ceil(me/8);if(C===-1||C===void 0)C=he;else if(C===-2)C=Ee-he-2;else if(C<-2)throw new Error("invalid salt length");if(Ee<he+C+2)throw new Error("data too long");var Ae=this.doPublic(X).toByteArray();for(H=0;H<Ae.length;H+=1)Ae[H]&=255;for(;Ae.length<Ee;)Ae.unshift(0);if(Ae[Ee-1]!==188)throw new Error("encoded message does not end in 0xbc");var De=(Ae=String.fromCharCode.apply(String,Ae)).substr(0,Ee-he-1),Ge=Ae.substr(De.length,he),nt=65280>>8*Ee-me&255;if((De.charCodeAt(0)&nt)!=0)throw new Error("bits beyond keysize not zero");var pt=xn(Ge,De.length,oe),_t=[];for(H=0;H<De.length;H+=1)_t[H]=De.charCodeAt(H)^pt.charCodeAt(H);_t[0]&=~nt;var ae=Ee-he-C-2;for(H=0;H<ae;H+=1)if(_t[H]!==0)throw new Error("leftmost octets not zero");if(_t[ae]!==1)throw new Error("0x01 marker not found");return Ge===qt(oe(er("\0\0\0\0\0\0\0\0"+be+String.fromCharCode.apply(String,_t.slice(-C)))))},Oe.SALT_LEN_HLEN=-1,Oe.SALT_LEN_MAX=-2,Oe.SALT_LEN_RECOVER=-2,Dr.hex2dn=function(v,y){y===void 0&&(y=0);var S=new Dr;return ze.getTLV(v,y),S.getX500Name(v).str},Dr.hex2rdn=function(v,y){if(y===void 0&&(y=0),v.substr(y,2)!=="31")throw new Error("malformed RDN");for(var S=new Array,C=ze.getChildIdx(v,y),H=0;H<C.length;H++)S.push(Dr.hex2attrTypeValue(v,C[H]));return(S=S.map(function(X){return X.replace("+","\\+")})).join("+")},Dr.hex2attrTypeValue=function(v,y){var S=ze,C=S.getV;if(y===void 0&&(y=0),v.substr(y,2)!=="30")throw new Error("malformed attribute type and value");var H=S.getChildIdx(v,y);H.length!==2||v.substr(H[0],2);var X=C(v,H[0]),oe=j.asn1.ASN1Util.oidHexToInt(X);return j.asn1.x509.OID.oid2atype(oe)+"="+qt(C(v,H[1]))},Dr.getPublicKeyFromCertHex=function(v){var y=new Dr;return y.readCertHex(v),y.getPublicKey()},Dr.getPublicKeyFromCertPEM=function(v){var y=new Dr;return y.readCertPEM(v),y.getPublicKey()},Dr.getPublicKeyInfoPropOfCertPEM=function(v){var y,S,C=ze.getVbyList,H={};return H.algparam=null,(y=new Dr).readCertPEM(v),S=y.getPublicKeyHex(),H.keyhex=C(S,0,[1],"03").substr(2),H.algoid=C(S,0,[0,0],"06"),H.algoid==="2a8648ce3d0201"&&(H.algparam=C(S,0,[0,1],"06")),H},Dr.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],j!==void 0&&j||(a.KJUR=j={}),j.jws!==void 0&&j.jws||(j.jws={}),j.jws.JWS=function(){var v=j.jws.JWS.isSafeJSONString;this.parseJWS=function(y,S){if(this.parsedJWS===void 0||!S&&this.parsedJWS.sigvalH===void 0){var C=y.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(C==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var H=C[1],X=C[2],oe=C[3],be=H+"."+X;if(this.parsedJWS={},this.parsedJWS.headB64U=H,this.parsedJWS.payloadB64U=X,this.parsedJWS.sigvalB64U=oe,this.parsedJWS.si=be,!S){var he=Le(oe),me=We(he,16);this.parsedJWS.sigvalH=he,this.parsedJWS.sigvalBI=me}var Ee=Ze(H),Ae=Ze(X);if(this.parsedJWS.headS=Ee,this.parsedJWS.payloadS=Ae,!v(Ee,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+Ee}}},j.jws.JWS.sign=function(v,y,S,C,H){var X,oe,be,he=j,me=he.jws.JWS,Ee=me.readSafeJSONString,Ae=me.isSafeJSONString,De=he.crypto,Ge=(De.ECDSA,De.Mac),nt=De.Signature,pt=JSON;if(typeof y!="string"&&(y===void 0?"undefined":R(y))!="object")throw"spHeader must be JSON string or object: "+y;if((y===void 0?"undefined":R(y))=="object"&&(oe=y,X=pt.stringify(oe)),typeof y=="string"){if(!Ae(X=y))throw"JWS Head is not safe JSON string: "+X;oe=Ee(X)}if(be=S,(S===void 0?"undefined":R(S))=="object"&&(be=pt.stringify(S)),v!=""&&v!=null||oe.alg===void 0||(v=oe.alg),v!=""&&v!=null&&oe.alg===void 0&&(oe.alg=v,X=pt.stringify(oe)),v!==oe.alg)throw"alg and sHeader.alg doesn't match: "+v+"!="+oe.alg;var _t=null;if(me.jwsalg2sigalg[v]===void 0)throw"unsupported alg name: "+v;_t=me.jwsalg2sigalg[v];var ae=qe(X)+"."+qe(be),_e="";if(_t.substr(0,4)=="Hmac"){if(C===void 0)throw"mac key shall be specified for HS* alg";var Pe=new Ge({alg:_t,prov:"cryptojs",pass:C});Pe.updateString(ae),_e=Pe.doFinal()}else if(_t.indexOf("withECDSA")!=-1){(ut=new nt({alg:_t})).init(C,H),ut.updateString(ae);var Fe=ut.sign();_e=j.crypto.ECDSA.asn1SigToConcatSig(Fe)}else{var ut;_t!="none"&&((ut=new nt({alg:_t})).init(C,H),ut.updateString(ae),_e=ut.sign())}return ae+"."+ot(_e)},j.jws.JWS.verify=function(v,y,S){var C,H=j,X=H.jws.JWS,oe=X.readSafeJSONString,be=H.crypto,he=be.ECDSA,me=be.Mac,Ee=be.Signature;R(Oe)!==void 0&&(C=Oe);var Ae=v.split(".");if(Ae.length!==3)return!1;var De=Ae[0]+"."+Ae[1],Ge=Le(Ae[2]),nt=oe(Ze(Ae[0])),pt=null,_t=null;if(nt.alg===void 0)throw"algorithm not specified in header";if(_t=(pt=nt.alg).substr(0,2),S!=null&&Object.prototype.toString.call(S)==="[object Array]"&&S.length>0&&(":"+S.join(":")+":").indexOf(":"+pt+":")==-1)throw"algorithm '"+pt+"' not accepted in the list";if(pt!="none"&&y===null)throw"key shall be specified to verify.";if(typeof y=="string"&&y.indexOf("-----BEGIN ")!=-1&&(y=Gt.getKey(y)),!(_t!="RS"&&_t!="PS"||y instanceof C))throw"key shall be a RSAKey obj for RS* and PS* algs";if(_t=="ES"&&!(y instanceof he))throw"key shall be a ECDSA obj for ES* algs";var ae=null;if(X.jwsalg2sigalg[nt.alg]===void 0)throw"unsupported alg name: "+pt;if((ae=X.jwsalg2sigalg[pt])=="none")throw"not supported";if(ae.substr(0,4)=="Hmac"){if(y===void 0)throw"hexadecimal key shall be specified for HMAC";var _e=new me({alg:ae,pass:y});return _e.updateString(De),Ge==_e.doFinal()}if(ae.indexOf("withECDSA")!=-1){var Pe,Fe=null;try{Fe=he.concatSigToASN1Sig(Ge)}catch{return!1}return(Pe=new Ee({alg:ae})).init(y),Pe.updateString(De),Pe.verify(Fe)}return(Pe=new Ee({alg:ae})).init(y),Pe.updateString(De),Pe.verify(Ge)},j.jws.JWS.parse=function(v){var y,S,C,H=v.split("."),X={};if(H.length!=2&&H.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return y=H[0],S=H[1],H.length==3&&(C=H[2]),X.headerObj=j.jws.JWS.readSafeJSONString(Ze(y)),X.payloadObj=j.jws.JWS.readSafeJSONString(Ze(S)),X.headerPP=JSON.stringify(X.headerObj,null,"  "),X.payloadObj==null?X.payloadPP=Ze(S):X.payloadPP=JSON.stringify(X.payloadObj,null,"  "),C!==void 0&&(X.sigHex=Le(C)),X},j.jws.JWS.verifyJWT=function(v,y,S){var C=j.jws,H=C.JWS,X=H.readSafeJSONString,oe=H.inArray,be=H.includedArray,he=v.split("."),me=he[0],Ee=he[1],Ae=(Le(he[2]),X(Ze(me))),De=X(Ze(Ee));if(Ae.alg===void 0)return!1;if(S.alg===void 0)throw"acceptField.alg shall be specified";if(!oe(Ae.alg,S.alg)||De.iss!==void 0&&R(S.iss)==="object"&&!oe(De.iss,S.iss)||De.sub!==void 0&&R(S.sub)==="object"&&!oe(De.sub,S.sub))return!1;if(De.aud!==void 0&&R(S.aud)==="object"){if(typeof De.aud=="string"){if(!oe(De.aud,S.aud))return!1}else if(R(De.aud)=="object"&&!be(De.aud,S.aud))return!1}var Ge=C.IntDate.getNow();return S.verifyAt!==void 0&&typeof S.verifyAt=="number"&&(Ge=S.verifyAt),S.gracePeriod!==void 0&&typeof S.gracePeriod=="number"||(S.gracePeriod=0),!(De.exp!==void 0&&typeof De.exp=="number"&&De.exp+S.gracePeriod<Ge)&&!(De.nbf!==void 0&&typeof De.nbf=="number"&&Ge<De.nbf-S.gracePeriod)&&!(De.iat!==void 0&&typeof De.iat=="number"&&Ge<De.iat-S.gracePeriod)&&(De.jti===void 0||S.jti===void 0||De.jti===S.jti)&&!!H.verify(v,y,S.alg)},j.jws.JWS.includedArray=function(v,y){var S=j.jws.JWS.inArray;if(v===null||(v===void 0?"undefined":R(v))!=="object"||typeof v.length!="number")return!1;for(var C=0;C<v.length;C++)if(!S(v[C],y))return!1;return!0},j.jws.JWS.inArray=function(v,y){if(y===null||(y===void 0?"undefined":R(y))!=="object"||typeof y.length!="number")return!1;for(var S=0;S<y.length;S++)if(y[S]==v)return!0;return!1},j.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},j.jws.JWS.isSafeJSONString=function(v,y,S){var C=null;try{return((C=V(v))===void 0?"undefined":R(C))!="object"||C.constructor===Array?0:(y&&(y[S]=C),1)}catch{return 0}},j.jws.JWS.readSafeJSONString=function(v){var y=null;try{return((y=V(v))===void 0?"undefined":R(y))!="object"||y.constructor===Array?null:y}catch{return null}},j.jws.JWS.getEncodedSignatureValueFromJWS=function(v){var y=v.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(y==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return y[1]},j.jws.JWS.getJWKthumbprint=function(v){if(v.kty!=="RSA"&&v.kty!=="EC"&&v.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var y="{";if(v.kty==="RSA"){if(typeof v.n!="string"||typeof v.e!="string")throw"wrong n and e value for RSA key";y+='"e":"'+v.e+'",',y+='"kty":"'+v.kty+'",',y+='"n":"'+v.n+'"}'}else if(v.kty==="EC"){if(typeof v.crv!="string"||typeof v.x!="string"||typeof v.y!="string")throw"wrong crv, x and y value for EC key";y+='"crv":"'+v.crv+'",',y+='"kty":"'+v.kty+'",',y+='"x":"'+v.x+'",',y+='"y":"'+v.y+'"}'}else if(v.kty==="oct"){if(typeof v.k!="string")throw"wrong k value for oct(symmetric) key";y+='"kty":"'+v.kty+'",',y+='"k":"'+v.k+'"}'}var S=er(y);return ot(j.crypto.Util.hashHex(S,"sha256"))},j.jws.IntDate={},j.jws.IntDate.get=function(v){var y=j.jws.IntDate,S=y.getNow,C=y.getZulu;if(v=="now")return S();if(v=="now + 1hour")return S()+3600;if(v=="now + 1day")return S()+86400;if(v=="now + 1month")return S()+2592e3;if(v=="now + 1year")return S()+31536e3;if(v.match(/Z$/))return C(v);if(v.match(/^[0-9]+$/))return parseInt(v);throw"unsupported format: "+v},j.jws.IntDate.getZulu=function(v){return Xt(v)},j.jws.IntDate.getNow=function(){return~~(new Date/1e3)},j.jws.IntDate.intDate2UTCString=function(v){return new Date(1e3*v).toUTCString()},j.jws.IntDate.intDate2Zulu=function(v){var y=new Date(1e3*v);return("0000"+y.getUTCFullYear()).slice(-4)+("00"+(y.getUTCMonth()+1)).slice(-2)+("00"+y.getUTCDate()).slice(-2)+("00"+y.getUTCHours()).slice(-2)+("00"+y.getUTCMinutes()).slice(-2)+("00"+y.getUTCSeconds()).slice(-2)+"Z"},a.SecureRandom=vt,a.rng_seed_time=we,a.BigInteger=K,a.RSAKey=Oe;var Sn=j.crypto.EDSA;a.EDSA=Sn;var Dn=j.crypto.DSA;a.DSA=Dn;var lr=j.crypto.Signature;a.Signature=lr;var li=j.crypto.MessageDigest;a.MessageDigest=li;var An=j.crypto.Mac;a.Mac=An;var ji=j.crypto.Cipher;a.Cipher=ji,a.KEYUTIL=Gt,a.ASN1HEX=ze,a.X509=Dr,a.CryptoJS=$,a.b64tohex=q,a.b64toBA=Ie,a.stoBA=Jt,a.BAtos=kr,a.BAtohex=Hr,a.stohex=ar,a.stob64=function(y){return Y(ar(y))},a.stob64u=function(y){return Ke(Y(ar(y)))},a.b64utos=function(y){return kr(Ie(mt(y)))},a.b64tob64u=Ke,a.b64utob64=mt,a.hex2b64=Y,a.hextob64u=ot,a.b64utohex=Le,a.utf8tob64u=qe,a.b64utoutf8=Ze,a.utf8tob64=function(y){return Y(tr(Fr(y)))},a.b64toutf8=function(y){return decodeURIComponent(Nr(q(y)))},a.utf8tohex=ct,a.hextoutf8=Qt,a.hextorstr=qt,a.rstrtohex=er,a.hextob64=Ht,a.hextob64nl=ue,a.b64nltohex=pe,a.hextopem=Tt,a.pemtohex=xt,a.hextoArrayBuffer=function(y){if(y.length%2!=0)throw"input is not even length";if(y.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var S=new ArrayBuffer(y.length/2),C=new DataView(S),H=0;H<y.length/2;H++)C.setUint8(H,parseInt(y.substr(2*H,2),16));return S},a.ArrayBuffertohex=function(y){for(var S="",C=new DataView(y),H=0;H<y.byteLength;H++)S+=("00"+C.getUint8(H).toString(16)).slice(-2);return S},a.zulutomsec=Pt,a.zulutosec=Xt,a.zulutodate=function(y){return new Date(Pt(y))},a.datetozulu=function(y,S,C){var H,X=y.getUTCFullYear();if(S){if(X<1950||2049<X)throw"not proper year for UTCTime: "+X;H=(""+X).slice(-2)}else H=("000"+X).slice(-4);if(H+=("0"+(y.getUTCMonth()+1)).slice(-2),H+=("0"+y.getUTCDate()).slice(-2),H+=("0"+y.getUTCHours()).slice(-2),H+=("0"+y.getUTCMinutes()).slice(-2),H+=("0"+y.getUTCSeconds()).slice(-2),C){var oe=y.getUTCMilliseconds();oe!==0&&(H+="."+(oe=(oe=("00"+oe).slice(-3)).replace(/0+$/g,"")))}return H+="Z"},a.uricmptohex=tr,a.hextouricmp=Nr,a.ipv6tohex=Vt,a.hextoipv6=Zt,a.hextoip=yr,a.iptohex=function(y){var S="malformed IP address";if(!(y=y.toLowerCase(y)).match(/^[0-9.]+$/)){if(y.match(/^[0-9a-f:]+$/)&&y.indexOf(":")!==-1)return Vt(y);throw S}var C=y.split(".");if(C.length!==4)throw S;var H="";try{for(var X=0;X<4;X++)H+=("0"+parseInt(C[X]).toString(16)).slice(-2);return H}catch{throw S}},a.encodeURIComponentAll=Fr,a.newline_toUnix=function(y){return y=y.replace(/\r\n/gm,`
`)},a.newline_toDos=function(y){return y=(y=y.replace(/\r\n/gm,`
`)).replace(/\n/gm,`\r
`)},a.hextoposhex=Gr,a.intarystrtohex=function(y){y=(y=(y=y.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return y.split(/,/).map(function(S,C,H){var X=parseInt(S);if(X<0||255<X)throw"integer not in range 0-255";return("00"+X.toString(16)).slice(-2)}).join("")}catch(S){throw"malformed integer array string: "+S}},a.strdiffidx=function(y,S){var C=y.length;y.length>S.length&&(C=S.length);for(var H=0;H<C;H++)if(y.charCodeAt(H)!=S.charCodeAt(H))return H;return y.length!=S.length?C:-1},a.KJUR=j;var ui=j.crypto;a.crypto=ui;var Ra=j.asn1;a.asn1=Ra;var Qi=j.jws;a.jws=Qi;var ci=j.lang;a.lang=ci}).call(this,s(28).Buffer)},function(i,a,s){(function(d){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var l=s(30),c=s(31),p=s(32);function f(){return b.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function m(se,M){if(f()<M)throw new RangeError("Invalid typed array length");return b.TYPED_ARRAY_SUPPORT?(se=new Uint8Array(M)).__proto__=b.prototype:(se===null&&(se=new b(M)),se.length=M),se}function b(se,M,D){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(se,M,D);if(typeof se=="number"){if(typeof M=="string")throw new Error("If encoding is specified then the first argument must be a string");return T(this,se)}return _(this,se,M,D)}function _(se,M,D,G){if(typeof M=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&M instanceof ArrayBuffer?function(we,Ce,at,Re){if(Ce.byteLength,at<0||Ce.byteLength<at)throw new RangeError("'offset' is out of bounds");if(Ce.byteLength<at+(Re||0))throw new RangeError("'length' is out of bounds");return Ce=at===void 0&&Re===void 0?new Uint8Array(Ce):Re===void 0?new Uint8Array(Ce,at):new Uint8Array(Ce,at,Re),b.TYPED_ARRAY_SUPPORT?(we=Ce).__proto__=b.prototype:we=x(we,Ce),we}(se,M,D,G):typeof M=="string"?function(we,Ce,at){if(typeof at=="string"&&at!==""||(at="utf8"),!b.isEncoding(at))throw new TypeError('"encoding" must be a valid string encoding');var Re=0|R(Ce,at),ht=(we=m(we,Re)).write(Ce,at);return ht!==Re&&(we=we.slice(0,ht)),we}(se,M,D):function(we,Ce){if(b.isBuffer(Ce)){var at=0|P(Ce.length);return(we=m(we,at)).length===0||Ce.copy(we,0,0,at),we}if(Ce){if(typeof ArrayBuffer<"u"&&Ce.buffer instanceof ArrayBuffer||"length"in Ce)return typeof Ce.length!="number"||function(ht){return ht!=ht}(Ce.length)?m(we,0):x(we,Ce);if(Ce.type==="Buffer"&&p(Ce.data))return x(we,Ce.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(se,M)}function A(se){if(typeof se!="number")throw new TypeError('"size" argument must be a number');if(se<0)throw new RangeError('"size" argument must not be negative')}function T(se,M){if(A(M),se=m(se,M<0?0:0|P(M)),!b.TYPED_ARRAY_SUPPORT)for(var D=0;D<M;++D)se[D]=0;return se}function x(se,M){var D=M.length<0?0:0|P(M.length);se=m(se,D);for(var G=0;G<D;G+=1)se[G]=255&M[G];return se}function P(se){if(se>=f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f().toString(16)+" bytes");return 0|se}function R(se,M){if(b.isBuffer(se))return se.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(se)||se instanceof ArrayBuffer))return se.byteLength;typeof se!="string"&&(se=""+se);var D=se.length;if(D===0)return 0;for(var G=!1;;)switch(M){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":case void 0:return le(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*D;case"hex":return D>>>1;case"base64":return Te(se).length;default:if(G)return le(se).length;M=(""+M).toLowerCase(),G=!0}}function F(se,M,D){var G=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0)<=(M>>>=0))return"";for(se||(se="utf8");;)switch(se){case"hex":return gt(this,M,D);case"utf8":case"utf-8":return Se(this,M,D);case"ascii":return st(this,M,D);case"latin1":case"binary":return Ne(this,M,D);case"base64":return ge(this,M,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,M,D);default:if(G)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),G=!0}}function I(se,M,D){var G=se[M];se[M]=se[D],se[D]=G}function $(se,M,D,G,re){if(se.length===0)return-1;if(typeof D=="string"?(G=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,isNaN(D)&&(D=re?0:se.length-1),D<0&&(D=se.length+D),D>=se.length){if(re)return-1;D=se.length-1}else if(D<0){if(!re)return-1;D=0}if(typeof M=="string"&&(M=b.from(M,G)),b.isBuffer(M))return M.length===0?-1:B(se,M,D,G,re);if(typeof M=="number")return M&=255,b.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?re?Uint8Array.prototype.indexOf.call(se,M,D):Uint8Array.prototype.lastIndexOf.call(se,M,D):B(se,[M],D,G,re);throw new TypeError("val must be string, number or Buffer")}function B(se,M,D,G,re){var we,Ce=1,at=se.length,Re=M.length;if(G!==void 0&&((G=String(G).toLowerCase())==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(se.length<2||M.length<2)return-1;Ce=2,at/=2,Re/=2,D/=2}function ht($e,Oe){return Ce===1?$e[Oe]:$e.readUInt16BE(Oe*Ce)}if(re){var Ct=-1;for(we=D;we<at;we++)if(ht(se,we)===ht(M,Ct===-1?0:we-Ct)){if(Ct===-1&&(Ct=we),we-Ct+1===Re)return Ct*Ce}else Ct!==-1&&(we-=we-Ct),Ct=-1}else for(D+Re>at&&(D=at-Re),we=D;we>=0;we--){for(var vt=!0,We=0;We<Re;We++)if(ht(se,we+We)!==ht(M,We)){vt=!1;break}if(vt)return we}return-1}function W(se,M,D,G){D=Number(D)||0;var re=se.length-D;G?(G=Number(G))>re&&(G=re):G=re;var we=M.length;if(we%2!=0)throw new TypeError("Invalid hex string");G>we/2&&(G=we/2);for(var Ce=0;Ce<G;++Ce){var at=parseInt(M.substr(2*Ce,2),16);if(isNaN(at))return Ce;se[D+Ce]=at}return Ce}function Y(se,M,D,G){return Je(le(M,se.length-D),se,D,G)}function q(se,M,D,G){return Je(function(we){for(var Ce=[],at=0;at<we.length;++at)Ce.push(255&we.charCodeAt(at));return Ce}(M),se,D,G)}function Ie(se,M,D,G){return q(se,M,D,G)}function K(se,M,D,G){return Je(Te(M),se,D,G)}function ie(se,M,D,G){return Je(function(we,Ce){for(var at,Re,ht,Ct=[],vt=0;vt<we.length&&!((Ce-=2)<0);++vt)Re=(at=we.charCodeAt(vt))>>8,ht=at%256,Ct.push(ht),Ct.push(Re);return Ct}(M,se.length-D),se,D,G)}function ge(se,M,D){return M===0&&D===se.length?l.fromByteArray(se):l.fromByteArray(se.slice(M,D))}function Se(se,M,D){D=Math.min(se.length,D);for(var G=[],re=M;re<D;){var we,Ce,at,Re,ht=se[re],Ct=null,vt=ht>239?4:ht>223?3:ht>191?2:1;if(re+vt<=D)switch(vt){case 1:ht<128&&(Ct=ht);break;case 2:(192&(we=se[re+1]))==128&&(Re=(31&ht)<<6|63&we)>127&&(Ct=Re);break;case 3:we=se[re+1],Ce=se[re+2],(192&we)==128&&(192&Ce)==128&&(Re=(15&ht)<<12|(63&we)<<6|63&Ce)>2047&&(Re<55296||Re>57343)&&(Ct=Re);break;case 4:we=se[re+1],Ce=se[re+2],at=se[re+3],(192&we)==128&&(192&Ce)==128&&(192&at)==128&&(Re=(15&ht)<<18|(63&we)<<12|(63&Ce)<<6|63&at)>65535&&Re<1114112&&(Ct=Re)}Ct===null?(Ct=65533,vt=1):Ct>65535&&(Ct-=65536,G.push(Ct>>>10&1023|55296),Ct=56320|1023&Ct),G.push(Ct),re+=vt}return function($e){var Oe=$e.length;if(Oe<=et)return String.fromCharCode.apply(String,$e);for(var lt="",Q=0;Q<Oe;)lt+=String.fromCharCode.apply(String,$e.slice(Q,Q+=et));return lt}(G)}a.Buffer=b,a.SlowBuffer=function(M){return+M!=M&&(M=0),b.alloc(+M)},a.INSPECT_MAX_BYTES=50,b.TYPED_ARRAY_SUPPORT=d.TYPED_ARRAY_SUPPORT!==void 0?d.TYPED_ARRAY_SUPPORT:function(){try{var M=new Uint8Array(1);return M.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},M.foo()===42&&typeof M.subarray=="function"&&M.subarray(1,1).byteLength===0}catch{return!1}}(),a.kMaxLength=f(),b.poolSize=8192,b._augment=function(se){return se.__proto__=b.prototype,se},b.from=function(se,M,D){return _(null,se,M,D)},b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0})),b.alloc=function(se,M,D){return function(re,we,Ce,at){return A(we),we<=0?m(re,we):Ce!==void 0?typeof at=="string"?m(re,we).fill(Ce,at):m(re,we).fill(Ce):m(re,we)}(null,se,M,D)},b.allocUnsafe=function(se){return T(null,se)},b.allocUnsafeSlow=function(se){return T(null,se)},b.isBuffer=function(M){return!(M==null||!M._isBuffer)},b.compare=function(M,D){if(!b.isBuffer(M)||!b.isBuffer(D))throw new TypeError("Arguments must be Buffers");if(M===D)return 0;for(var G=M.length,re=D.length,we=0,Ce=Math.min(G,re);we<Ce;++we)if(M[we]!==D[we]){G=M[we],re=D[we];break}return G<re?-1:re<G?1:0},b.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(M,D){if(!p(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return b.alloc(0);var G;if(D===void 0)for(D=0,G=0;G<M.length;++G)D+=M[G].length;var re=b.allocUnsafe(D),we=0;for(G=0;G<M.length;++G){var Ce=M[G];if(!b.isBuffer(Ce))throw new TypeError('"list" argument must be an Array of Buffers');Ce.copy(re,we),we+=Ce.length}return re},b.byteLength=R,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<M;D+=2)I(this,D,D+1);return this},b.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<M;D+=4)I(this,D,D+3),I(this,D+1,D+2);return this},b.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<M;D+=8)I(this,D,D+7),I(this,D+1,D+6),I(this,D+2,D+5),I(this,D+3,D+4);return this},b.prototype.toString=function(){var M=0|this.length;return M===0?"":arguments.length===0?Se(this,0,M):F.apply(this,arguments)},b.prototype.equals=function(M){if(!b.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M||b.compare(this,M)===0},b.prototype.inspect=function(){var M="",D=a.INSPECT_MAX_BYTES;return this.length>0&&(M=this.toString("hex",0,D).match(/.{2}/g).join(" "),this.length>D&&(M+=" ... ")),"<Buffer "+M+">"},b.prototype.compare=function(M,D,G,re,we){if(!b.isBuffer(M))throw new TypeError("Argument must be a Buffer");if(D===void 0&&(D=0),G===void 0&&(G=M?M.length:0),re===void 0&&(re=0),we===void 0&&(we=this.length),D<0||G>M.length||re<0||we>this.length)throw new RangeError("out of range index");if(re>=we&&D>=G)return 0;if(re>=we)return-1;if(D>=G)return 1;if(this===M)return 0;for(var Ce=(we>>>=0)-(re>>>=0),at=(G>>>=0)-(D>>>=0),Re=Math.min(Ce,at),ht=this.slice(re,we),Ct=M.slice(D,G),vt=0;vt<Re;++vt)if(ht[vt]!==Ct[vt]){Ce=ht[vt],at=Ct[vt];break}return Ce<at?-1:at<Ce?1:0},b.prototype.includes=function(M,D,G){return this.indexOf(M,D,G)!==-1},b.prototype.indexOf=function(M,D,G){return $(this,M,D,G,!0)},b.prototype.lastIndexOf=function(M,D,G){return $(this,M,D,G,!1)},b.prototype.write=function(M,D,G,re){if(D===void 0)re="utf8",G=this.length,D=0;else if(G===void 0&&typeof D=="string")re=D,G=this.length,D=0;else{if(!isFinite(D))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");D|=0,isFinite(G)?(G|=0,re===void 0&&(re="utf8")):(re=G,G=void 0)}var we=this.length-D;if((G===void 0||G>we)&&(G=we),M.length>0&&(G<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var Ce=!1;;)switch(re){case"hex":return W(this,M,D,G);case"utf8":case"utf-8":return Y(this,M,D,G);case"ascii":return q(this,M,D,G);case"latin1":case"binary":return Ie(this,M,D,G);case"base64":return K(this,M,D,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,M,D,G);default:if(Ce)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),Ce=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var et=4096;function st(se,M,D){var G="";D=Math.min(se.length,D);for(var re=M;re<D;++re)G+=String.fromCharCode(127&se[re]);return G}function Ne(se,M,D){var G="";D=Math.min(se.length,D);for(var re=M;re<D;++re)G+=String.fromCharCode(se[re]);return G}function gt(se,M,D){var G=se.length;(!M||M<0)&&(M=0),(!D||D<0||D>G)&&(D=G);for(var re="",we=M;we<D;++we)re+=Me(se[we]);return re}function ve(se,M,D){for(var G=se.slice(M,D),re="",we=0;we<G.length;we+=2)re+=String.fromCharCode(G[we]+256*G[we+1]);return re}function tt(se,M,D){if(se%1!=0||se<0)throw new RangeError("offset is not uint");if(se+M>D)throw new RangeError("Trying to access beyond buffer length")}function J(se,M,D,G,re,we){if(!b.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>re||M<we)throw new RangeError('"value" argument is out of bounds');if(D+G>se.length)throw new RangeError("Index out of range")}function xe(se,M,D,G){M<0&&(M=65535+M+1);for(var re=0,we=Math.min(se.length-D,2);re<we;++re)se[D+re]=(M&255<<8*(G?re:1-re))>>>8*(G?re:1-re)}function Xe(se,M,D,G){M<0&&(M=4294967295+M+1);for(var re=0,we=Math.min(se.length-D,4);re<we;++re)se[D+re]=M>>>8*(G?re:3-re)&255}function je(se,M,D,G,re,we){if(D+G>se.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function dt(se,M,D,G,re){return re||je(se,0,D,4),c.write(se,M,D,G,23,4),D+4}function It(se,M,D,G,re){return re||je(se,0,D,8),c.write(se,M,D,G,52,8),D+8}b.prototype.slice=function(M,D){var G,re=this.length;if((M=~~M)<0?(M+=re)<0&&(M=0):M>re&&(M=re),(D=D===void 0?re:~~D)<0?(D+=re)<0&&(D=0):D>re&&(D=re),D<M&&(D=M),b.TYPED_ARRAY_SUPPORT)(G=this.subarray(M,D)).__proto__=b.prototype;else{var we=D-M;G=new b(we,void 0);for(var Ce=0;Ce<we;++Ce)G[Ce]=this[Ce+M]}return G},b.prototype.readUIntLE=function(M,D,G){M|=0,D|=0,G||tt(M,D,this.length);for(var re=this[M],we=1,Ce=0;++Ce<D&&(we*=256);)re+=this[M+Ce]*we;return re},b.prototype.readUIntBE=function(M,D,G){M|=0,D|=0,G||tt(M,D,this.length);for(var re=this[M+--D],we=1;D>0&&(we*=256);)re+=this[M+--D]*we;return re},b.prototype.readUInt8=function(M,D){return D||tt(M,1,this.length),this[M]},b.prototype.readUInt16LE=function(M,D){return D||tt(M,2,this.length),this[M]|this[M+1]<<8},b.prototype.readUInt16BE=function(M,D){return D||tt(M,2,this.length),this[M]<<8|this[M+1]},b.prototype.readUInt32LE=function(M,D){return D||tt(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},b.prototype.readUInt32BE=function(M,D){return D||tt(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},b.prototype.readIntLE=function(M,D,G){M|=0,D|=0,G||tt(M,D,this.length);for(var re=this[M],we=1,Ce=0;++Ce<D&&(we*=256);)re+=this[M+Ce]*we;return re>=(we*=128)&&(re-=Math.pow(2,8*D)),re},b.prototype.readIntBE=function(M,D,G){M|=0,D|=0,G||tt(M,D,this.length);for(var re=D,we=1,Ce=this[M+--re];re>0&&(we*=256);)Ce+=this[M+--re]*we;return Ce>=(we*=128)&&(Ce-=Math.pow(2,8*D)),Ce},b.prototype.readInt8=function(M,D){return D||tt(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},b.prototype.readInt16LE=function(M,D){D||tt(M,2,this.length);var G=this[M]|this[M+1]<<8;return 32768&G?4294901760|G:G},b.prototype.readInt16BE=function(M,D){D||tt(M,2,this.length);var G=this[M+1]|this[M]<<8;return 32768&G?4294901760|G:G},b.prototype.readInt32LE=function(M,D){return D||tt(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},b.prototype.readInt32BE=function(M,D){return D||tt(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},b.prototype.readFloatLE=function(M,D){return D||tt(M,4,this.length),c.read(this,M,!0,23,4)},b.prototype.readFloatBE=function(M,D){return D||tt(M,4,this.length),c.read(this,M,!1,23,4)},b.prototype.readDoubleLE=function(M,D){return D||tt(M,8,this.length),c.read(this,M,!0,52,8)},b.prototype.readDoubleBE=function(M,D){return D||tt(M,8,this.length),c.read(this,M,!1,52,8)},b.prototype.writeUIntLE=function(M,D,G,re){M=+M,D|=0,G|=0,re||J(this,M,D,G,Math.pow(2,8*G)-1,0);var we=1,Ce=0;for(this[D]=255&M;++Ce<G&&(we*=256);)this[D+Ce]=M/we&255;return D+G},b.prototype.writeUIntBE=function(M,D,G,re){M=+M,D|=0,G|=0,re||J(this,M,D,G,Math.pow(2,8*G)-1,0);var we=G-1,Ce=1;for(this[D+we]=255&M;--we>=0&&(Ce*=256);)this[D+we]=M/Ce&255;return D+G},b.prototype.writeUInt8=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,1,255,0),b.TYPED_ARRAY_SUPPORT||(M=Math.floor(M)),this[D]=255&M,D+1},b.prototype.writeUInt16LE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[D]=255&M,this[D+1]=M>>>8):xe(this,M,D,!0),D+2},b.prototype.writeUInt16BE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[D]=M>>>8,this[D+1]=255&M):xe(this,M,D,!1),D+2},b.prototype.writeUInt32LE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[D+3]=M>>>24,this[D+2]=M>>>16,this[D+1]=M>>>8,this[D]=255&M):Xe(this,M,D,!0),D+4},b.prototype.writeUInt32BE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[D]=M>>>24,this[D+1]=M>>>16,this[D+2]=M>>>8,this[D+3]=255&M):Xe(this,M,D,!1),D+4},b.prototype.writeIntLE=function(M,D,G,re){if(M=+M,D|=0,!re){var we=Math.pow(2,8*G-1);J(this,M,D,G,we-1,-we)}var Ce=0,at=1,Re=0;for(this[D]=255&M;++Ce<G&&(at*=256);)M<0&&Re===0&&this[D+Ce-1]!==0&&(Re=1),this[D+Ce]=(M/at>>0)-Re&255;return D+G},b.prototype.writeIntBE=function(M,D,G,re){if(M=+M,D|=0,!re){var we=Math.pow(2,8*G-1);J(this,M,D,G,we-1,-we)}var Ce=G-1,at=1,Re=0;for(this[D+Ce]=255&M;--Ce>=0&&(at*=256);)M<0&&Re===0&&this[D+Ce+1]!==0&&(Re=1),this[D+Ce]=(M/at>>0)-Re&255;return D+G},b.prototype.writeInt8=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,1,127,-128),b.TYPED_ARRAY_SUPPORT||(M=Math.floor(M)),M<0&&(M=255+M+1),this[D]=255&M,D+1},b.prototype.writeInt16LE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[D]=255&M,this[D+1]=M>>>8):xe(this,M,D,!0),D+2},b.prototype.writeInt16BE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[D]=M>>>8,this[D+1]=255&M):xe(this,M,D,!1),D+2},b.prototype.writeInt32LE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,4,2147483647,-2147483648),b.TYPED_ARRAY_SUPPORT?(this[D]=255&M,this[D+1]=M>>>8,this[D+2]=M>>>16,this[D+3]=M>>>24):Xe(this,M,D,!0),D+4},b.prototype.writeInt32BE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),b.TYPED_ARRAY_SUPPORT?(this[D]=M>>>24,this[D+1]=M>>>16,this[D+2]=M>>>8,this[D+3]=255&M):Xe(this,M,D,!1),D+4},b.prototype.writeFloatLE=function(M,D,G){return dt(this,M,D,!0,G)},b.prototype.writeFloatBE=function(M,D,G){return dt(this,M,D,!1,G)},b.prototype.writeDoubleLE=function(M,D,G){return It(this,M,D,!0,G)},b.prototype.writeDoubleBE=function(M,D,G){return It(this,M,D,!1,G)},b.prototype.copy=function(M,D,G,re){if(G||(G=0),re||re===0||(re=this.length),D>=M.length&&(D=M.length),D||(D=0),re>0&&re<G&&(re=G),re===G||M.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("sourceStart out of bounds");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),M.length-D<re-G&&(re=M.length-D+G);var we,Ce=re-G;if(this===M&&G<D&&D<re)for(we=Ce-1;we>=0;--we)M[we+D]=this[we+G];else if(Ce<1e3||!b.TYPED_ARRAY_SUPPORT)for(we=0;we<Ce;++we)M[we+D]=this[we+G];else Uint8Array.prototype.set.call(M,this.subarray(G,G+Ce),D);return Ce},b.prototype.fill=function(M,D,G,re){if(typeof M=="string"){if(typeof D=="string"?(re=D,D=0,G=this.length):typeof G=="string"&&(re=G,G=this.length),M.length===1){var we=M.charCodeAt(0);we<256&&(M=we)}if(re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!b.isEncoding(re))throw new TypeError("Unknown encoding: "+re)}else typeof M=="number"&&(M&=255);if(D<0||this.length<D||this.length<G)throw new RangeError("Out of range index");if(G<=D)return this;var Ce;if(D>>>=0,G=G===void 0?this.length:G>>>0,M||(M=0),typeof M=="number")for(Ce=D;Ce<G;++Ce)this[Ce]=M;else{var at=b.isBuffer(M)?M:le(new b(M,re).toString()),Re=at.length;for(Ce=0;Ce<G-D;++Ce)this[Ce+D]=at[Ce%Re]}return this};var Mt=/[^+\/0-9A-Za-z-_]/g;function Me(se){return se<16?"0"+se.toString(16):se.toString(16)}function le(se,M){var D;M=M||1/0;for(var G=se.length,re=null,we=[],Ce=0;Ce<G;++Ce){if((D=se.charCodeAt(Ce))>55295&&D<57344){if(!re){if(D>56319){(M-=3)>-1&&we.push(239,191,189);continue}if(Ce+1===G){(M-=3)>-1&&we.push(239,191,189);continue}re=D;continue}if(D<56320){(M-=3)>-1&&we.push(239,191,189),re=D;continue}D=65536+(re-55296<<10|D-56320)}else re&&(M-=3)>-1&&we.push(239,191,189);if(re=null,D<128){if((M-=1)<0)break;we.push(D)}else if(D<2048){if((M-=2)<0)break;we.push(D>>6|192,63&D|128)}else if(D<65536){if((M-=3)<0)break;we.push(D>>12|224,D>>6&63|128,63&D|128)}else{if(!(D<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;we.push(D>>18|240,D>>12&63|128,D>>6&63|128,63&D|128)}}return we}function Te(se){return l.toByteArray(function(D){if((D=function(re){return re.trim?re.trim():re.replace(/^\s+|\s+$/g,"")}(D).replace(Mt,"")).length<2)return"";for(;D.length%4!=0;)D+="=";return D}(se))}function Je(se,M,D,G){for(var re=0;re<G&&!(re+D>=M.length||re>=se.length);++re)M[re+D]=se[re];return re}}).call(this,s(29))},function(i,a){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}i.exports=s},function(i,a,s){a.byteLength=function(T){var x=b(T),P=x[0],R=x[1];return 3*(P+R)/4-R},a.toByteArray=function(T){var x,P,R=b(T),F=R[0],I=R[1],$=new c(function(q,Ie,K){return 3*(Ie+K)/4-K}(0,F,I)),B=0,W=I>0?F-4:F;for(P=0;P<W;P+=4)x=l[T.charCodeAt(P)]<<18|l[T.charCodeAt(P+1)]<<12|l[T.charCodeAt(P+2)]<<6|l[T.charCodeAt(P+3)],$[B++]=x>>16&255,$[B++]=x>>8&255,$[B++]=255&x;return I===2&&(x=l[T.charCodeAt(P)]<<2|l[T.charCodeAt(P+1)]>>4,$[B++]=255&x),I===1&&(x=l[T.charCodeAt(P)]<<10|l[T.charCodeAt(P+1)]<<4|l[T.charCodeAt(P+2)]>>2,$[B++]=x>>8&255,$[B++]=255&x),$},a.fromByteArray=function(T){for(var x,P=T.length,R=P%3,F=[],I=16383,$=0,B=P-R;$<B;$+=I)F.push(_(T,$,$+I>B?B:$+I));return R===1?(x=T[P-1],F.push(d[x>>2]+d[x<<4&63]+"==")):R===2&&(x=(T[P-2]<<8)+T[P-1],F.push(d[x>>10]+d[x>>4&63]+d[x<<2&63]+"=")),F.join("")};for(var d=[],l=[],c=typeof Uint8Array<"u"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,m=p.length;f<m;++f)d[f]=p[f],l[p.charCodeAt(f)]=f;function b(A){var T=A.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=A.indexOf("=");return x===-1&&(x=T),[x,x===T?0:4-x%4]}function _(A,T,x){for(var P,R,F=[],I=T;I<x;I+=3)P=(A[I]<<16&16711680)+(A[I+1]<<8&65280)+(255&A[I+2]),F.push(d[(R=P)>>18&63]+d[R>>12&63]+d[R>>6&63]+d[63&R]);return F.join("")}l[45]=62,l[95]=63},function(i,a){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */a.read=function(s,d,l,c,p){var f,m,b=8*p-c-1,_=(1<<b)-1,A=_>>1,T=-7,x=l?p-1:0,P=l?-1:1,R=s[d+x];for(x+=P,f=R&(1<<-T)-1,R>>=-T,T+=b;T>0;f=256*f+s[d+x],x+=P,T-=8);for(m=f&(1<<-T)-1,f>>=-T,T+=c;T>0;m=256*m+s[d+x],x+=P,T-=8);if(f===0)f=1-A;else{if(f===_)return m?NaN:1/0*(R?-1:1);m+=Math.pow(2,c),f-=A}return(R?-1:1)*m*Math.pow(2,f-c)},a.write=function(s,d,l,c,p,f){var m,b,_,A=8*f-p-1,T=(1<<A)-1,x=T>>1,P=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=c?0:f-1,F=c?1:-1,I=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(b=isNaN(d)?1:0,m=T):(m=Math.floor(Math.log(d)/Math.LN2),d*(_=Math.pow(2,-m))<1&&(m--,_*=2),(d+=m+x>=1?P/_:P*Math.pow(2,1-x))*_>=2&&(m++,_/=2),m+x>=T?(b=0,m=T):m+x>=1?(b=(d*_-1)*Math.pow(2,p),m+=x):(b=d*Math.pow(2,x-1)*Math.pow(2,p),m=0));p>=8;s[l+R]=255&b,R+=F,b/=256,p-=8);for(m=m<<p|b,A+=p;A>0;s[l+R]=255&m,R+=F,m/=256,A-=8);s[l+R-F]|=128*I}},function(i,a){var s={}.toString;i.exports=Array.isArray||function(d){return s.call(d)=="[object Array]"}},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(c){var p=c.jws,f=c.KeyUtil,m=c.X509,b=c.crypto,_=c.hextob64u,A=c.b64tohex,T=c.AllowedSigningAlgs;return function(){function x(){(function(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")})(this,x)}return x.parseJwt=function(R){d.Log.debug("JoseUtil.parseJwt");try{var F=p.JWS.parse(R);return{header:F.headerObj,payload:F.payloadObj}}catch(I){d.Log.error(I)}},x.validateJwt=function(R,F,I,$,B,W,Y){d.Log.debug("JoseUtil.validateJwt");try{if(F.kty==="RSA")if(F.e&&F.n)F=f.getKey(F);else{if(!F.x5c||!F.x5c.length)return d.Log.error("JoseUtil.validateJwt: RSA key missing key material",F),Promise.reject(new Error("RSA key missing key material"));var q=A(F.x5c[0]);F=m.getPublicKeyFromCertHex(q)}else{if(F.kty!=="EC")return d.Log.error("JoseUtil.validateJwt: Unsupported key type",F&&F.kty),Promise.reject(new Error(F.kty));if(!(F.crv&&F.x&&F.y))return d.Log.error("JoseUtil.validateJwt: EC key missing key material",F),Promise.reject(new Error("EC key missing key material"));F=f.getKey(F)}return x._validateJwt(R,F,I,$,B,W,Y)}catch(Ie){return d.Log.error(Ie&&Ie.message||Ie),Promise.reject("JWT validation failed")}},x.validateJwtAttributes=function(R,F,I,$,B,W){$||($=0),B||(B=parseInt(Date.now()/1e3));var Y=x.parseJwt(R).payload;if(!Y.iss)return d.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(Y.iss!==F)return d.Log.error("JoseUtil._validateJwt: Invalid issuer in token",Y.iss),Promise.reject(new Error("Invalid issuer in token: "+Y.iss));if(!Y.aud)return d.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(Y.aud===I||Array.isArray(Y.aud)&&Y.aud.indexOf(I)>=0))return d.Log.error("JoseUtil._validateJwt: Invalid audience in token",Y.aud),Promise.reject(new Error("Invalid audience in token: "+Y.aud));if(Y.azp&&Y.azp!==I)return d.Log.error("JoseUtil._validateJwt: Invalid azp in token",Y.azp),Promise.reject(new Error("Invalid azp in token: "+Y.azp));if(!W){var q=B+$,Ie=B-$;if(!Y.iat)return d.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(q<Y.iat)return d.Log.error("JoseUtil._validateJwt: iat is in the future",Y.iat),Promise.reject(new Error("iat is in the future: "+Y.iat));if(Y.nbf&&q<Y.nbf)return d.Log.error("JoseUtil._validateJwt: nbf is in the future",Y.nbf),Promise.reject(new Error("nbf is in the future: "+Y.nbf));if(!Y.exp)return d.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(Y.exp<Ie)return d.Log.error("JoseUtil._validateJwt: exp is in the past",Y.exp),Promise.reject(new Error("exp is in the past:"+Y.exp))}return Promise.resolve(Y)},x._validateJwt=function(R,F,I,$,B,W,Y){return x.validateJwtAttributes(R,I,$,B,W,Y).then(function(q){try{return p.JWS.verify(R,F,T)?q:(d.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(Ie){return d.Log.error(Ie&&Ie.message||Ie),Promise.reject(new Error("signature validation failed"))}})},x.hashString=function(R,F){try{return b.Util.hashString(R,F)}catch(I){d.Log.error(I)}},x.hexToBase64Url=function(R){try{return _(R)}catch(F){d.Log.error(F)}},x}()};var d=s(0);i.exports=a.default},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SigninResponse=void 0;var d=function(){function p(f,m){for(var b=0;b<m.length;b++){var _=m[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}return function(f,m,b){return m&&p(f.prototype,m),b&&p(f,b),f}}(),l=s(3);function c(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}a.SigninResponse=function(){function p(f){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#";c(this,p);var b=l.UrlUtility.parseUrlFragment(f,m);this.error=b.error,this.error_description=b.error_description,this.error_uri=b.error_uri,this.code=b.code,this.state=b.state,this.id_token=b.id_token,this.session_state=b.session_state,this.access_token=b.access_token,this.token_type=b.token_type,this.scope=b.scope,this.profile=void 0,this.expires_in=b.expires_in}return d(p,[{key:"expires_in",get:function(){if(this.expires_at){var m=parseInt(Date.now()/1e3);return this.expires_at-m}},set:function(m){var b=parseInt(m);if(typeof b=="number"&&b>0){var _=parseInt(Date.now()/1e3);this.expires_at=_+b}}},{key:"expired",get:function(){var m=this.expires_in;if(m!==void 0)return m<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),p}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SignoutRequest=void 0;var d=s(0),l=s(3),c=s(9);a.SignoutRequest=function p(f){var m=f.url,b=f.id_token_hint,_=f.post_logout_redirect_uri,A=f.data,T=f.extraQueryParams,x=f.request_type;if(function(F,I){if(!(F instanceof I))throw new TypeError("Cannot call a class as a function")}(this,p),!m)throw d.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var P in b&&(m=l.UrlUtility.addQueryParam(m,"id_token_hint",b)),_&&(m=l.UrlUtility.addQueryParam(m,"post_logout_redirect_uri",_),A&&(this.state=new c.State({data:A,request_type:x}),m=l.UrlUtility.addQueryParam(m,"state",this.state.id))),T)m=l.UrlUtility.addQueryParam(m,P,T[P]);this.url=m}},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SignoutResponse=void 0;var d=s(3);a.SignoutResponse=function l(c){(function(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")})(this,l);var p=d.UrlUtility.parseUrlFragment(c,"?");this.error=p.error,this.error_description=p.error_description,this.error_uri=p.error_uri,this.state=p.state}},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.InMemoryWebStorage=void 0;var d=function(){function c(p,f){for(var m=0;m<f.length;m++){var b=f[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}return function(p,f,m){return f&&c(p.prototype,f),m&&c(p,m),p}}(),l=s(0);a.InMemoryWebStorage=function(){function c(){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c),this._data={}}return c.prototype.getItem=function(f){return l.Log.debug("InMemoryWebStorage.getItem",f),this._data[f]},c.prototype.setItem=function(f,m){l.Log.debug("InMemoryWebStorage.setItem",f),this._data[f]=m},c.prototype.removeItem=function(f){l.Log.debug("InMemoryWebStorage.removeItem",f),delete this._data[f]},c.prototype.key=function(f){return Object.getOwnPropertyNames(this._data)[f]},d(c,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),c}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.UserManager=void 0;var d=function(){function I($,B){for(var W=0;W<B.length;W++){var Y=B[W];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty($,Y.key,Y)}}return function($,B,W){return B&&I($.prototype,B),W&&I($,W),$}}(),l=s(0),c=s(10),p=s(39),f=s(15),m=s(45),b=s(47),_=s(18),A=s(8),T=s(20),x=s(11),P=s(4);function R(I,$){if(!(I instanceof $))throw new TypeError("Cannot call a class as a function")}function F(I,$){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!$||typeof $!="object"&&typeof $!="function"?I:$}a.UserManager=function(I){function $(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.SilentRenewService,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.SessionMonitor,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T.TokenRevocationClient,Ie=arguments.length>4&&arguments[4]!==void 0?arguments[4]:x.TokenClient,K=arguments.length>5&&arguments[5]!==void 0?arguments[5]:P.JoseUtil;R(this,$),B instanceof p.UserManagerSettings||(B=new p.UserManagerSettings(B));var ie=F(this,I.call(this,B));return ie._events=new m.UserManagerEvents(B),ie._silentRenewService=new W(ie),ie.settings.automaticSilentRenew&&(l.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),ie.startSilentRenew()),ie.settings.monitorSession&&(l.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),ie._sessionMonitor=new Y(ie)),ie._tokenRevocationClient=new q(ie._settings),ie._tokenClient=new Ie(ie._settings),ie._joseUtil=K,ie}return function(W,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);W.prototype=Object.create(Y&&Y.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(W,Y):W.__proto__=Y)}($,I),$.prototype.getUser=function(){var W=this;return this._loadUser().then(function(Y){return Y?(l.Log.info("UserManager.getUser: user loaded"),W._events.load(Y,!1),Y):(l.Log.info("UserManager.getUser: user not found in storage"),null)})},$.prototype.removeUser=function(){var W=this;return this.storeUser(null).then(function(){l.Log.info("UserManager.removeUser: user removed from storage"),W._events.unload()})},$.prototype.signinRedirect=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(W=Object.assign({},W)).request_type="si:r";var Y={useReplaceToNavigate:W.useReplaceToNavigate};return this._signinStart(W,this._redirectNavigator,Y).then(function(){l.Log.info("UserManager.signinRedirect: successful")})},$.prototype.signinRedirectCallback=function(W){return this._signinEnd(W||this._redirectNavigator.url).then(function(Y){return Y.profile&&Y.profile.sub?l.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",Y.profile.sub):l.Log.info("UserManager.signinRedirectCallback: no sub"),Y})},$.prototype.signinPopup=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(W=Object.assign({},W)).request_type="si:p";var Y=W.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return Y?(W.redirect_uri=Y,W.display="popup",this._signin(W,this._popupNavigator,{startUrl:Y,popupWindowFeatures:W.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:W.popupWindowTarget||this.settings.popupWindowTarget}).then(function(q){return q&&(q.profile&&q.profile.sub?l.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",q.profile.sub):l.Log.info("UserManager.signinPopup: no sub")),q})):(l.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},$.prototype.signinPopupCallback=function(W){return this._signinCallback(W,this._popupNavigator).then(function(Y){return Y&&(Y.profile&&Y.profile.sub?l.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",Y.profile.sub):l.Log.info("UserManager.signinPopupCallback: no sub")),Y}).catch(function(Y){l.Log.error(Y.message)})},$.prototype.signinSilent=function(){var W=this,Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Y=Object.assign({},Y),this._loadUser().then(function(q){return q&&q.refresh_token?(Y.refresh_token=q.refresh_token,W._useRefreshToken(Y)):(Y.request_type="si:s",Y.id_token_hint=Y.id_token_hint||W.settings.includeIdTokenInSilentRenew&&q&&q.id_token,q&&W._settings.validateSubOnSilentRenew&&(l.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",q.profile.sub),Y.current_sub=q.profile.sub),W._signinSilentIframe(Y))})},$.prototype._useRefreshToken=function(){var W=this,Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(Y).then(function(q){return q?q.access_token?W._loadUser().then(function(Ie){if(Ie){var K=Promise.resolve();return q.id_token&&(K=W._validateIdTokenFromTokenRefreshToken(Ie.profile,q.id_token)),K.then(function(){return l.Log.debug("UserManager._useRefreshToken: refresh token response success"),Ie.id_token=q.id_token||Ie.id_token,Ie.access_token=q.access_token,Ie.refresh_token=q.refresh_token||Ie.refresh_token,Ie.expires_in=q.expires_in,W.storeUser(Ie).then(function(){return W._events.load(Ie),Ie})})}return null}):(l.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(l.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},$.prototype._validateIdTokenFromTokenRefreshToken=function(W,Y){var q=this;return this._metadataService.getIssuer().then(function(Ie){return q.settings.getEpochTime().then(function(K){return q._joseUtil.validateJwtAttributes(Y,Ie,q._settings.client_id,q._settings.clockSkew,K).then(function(ie){return ie?ie.sub!==W.sub?(l.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):ie.auth_time&&ie.auth_time!==W.auth_time?(l.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):ie.azp&&ie.azp!==W.azp?(l.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!ie.azp&&W.azp?(l.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(l.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},$.prototype._signinSilentIframe=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=W.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return Y?(W.redirect_uri=Y,W.prompt=W.prompt||"none",this._signin(W,this._iframeNavigator,{startUrl:Y,silentRequestTimeout:W.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(q){return q&&(q.profile&&q.profile.sub?l.Log.info("UserManager.signinSilent: successful, signed in sub: ",q.profile.sub):l.Log.info("UserManager.signinSilent: no sub")),q})):(l.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},$.prototype.signinSilentCallback=function(W){return this._signinCallback(W,this._iframeNavigator).then(function(Y){return Y&&(Y.profile&&Y.profile.sub?l.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",Y.profile.sub):l.Log.info("UserManager.signinSilentCallback: no sub")),Y})},$.prototype.signinCallback=function(W){var Y=this;return this.readSigninResponseState(W).then(function(q){var Ie=q.state;return q.response,Ie.request_type==="si:r"?Y.signinRedirectCallback(W):Ie.request_type==="si:p"?Y.signinPopupCallback(W):Ie.request_type==="si:s"?Y.signinSilentCallback(W):Promise.reject(new Error("invalid response_type in state"))})},$.prototype.signoutCallback=function(W,Y){var q=this;return this.readSignoutResponseState(W).then(function(Ie){var K=Ie.state,ie=Ie.response;return K?K.request_type==="so:r"?q.signoutRedirectCallback(W):K.request_type==="so:p"?q.signoutPopupCallback(W,Y):Promise.reject(new Error("invalid response_type in state")):ie})},$.prototype.querySessionStatus=function(){var W=this,Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(Y=Object.assign({},Y)).request_type="si:s";var q=Y.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return q?(Y.redirect_uri=q,Y.prompt="none",Y.response_type=Y.response_type||this.settings.query_status_response_type,Y.scope=Y.scope||"openid",Y.skipUserInfo=!0,this._signinStart(Y,this._iframeNavigator,{startUrl:q,silentRequestTimeout:Y.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Ie){return W.processSigninResponse(Ie.url).then(function(K){if(l.Log.debug("UserManager.querySessionStatus: got signin response"),K.session_state&&K.profile.sub)return l.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",K.profile.sub),{session_state:K.session_state,sub:K.profile.sub,sid:K.profile.sid};l.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(K){if(K.session_state&&W.settings.monitorAnonymousSession&&(K.message=="login_required"||K.message=="consent_required"||K.message=="interaction_required"||K.message=="account_selection_required"))return l.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:K.session_state};throw K})})):(l.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},$.prototype._signin=function(W,Y){var q=this,Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signinStart(W,Y,Ie).then(function(K){return q._signinEnd(K.url,W)})},$.prototype._signinStart=function(W,Y){var q=this,Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Y.prepare(Ie).then(function(K){return l.Log.debug("UserManager._signinStart: got navigator window handle"),q.createSigninRequest(W).then(function(ie){return l.Log.debug("UserManager._signinStart: got signin request"),Ie.url=ie.url,Ie.id=ie.state.id,K.navigate(Ie)}).catch(function(ie){throw K.close&&(l.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),K.close()),ie})})},$.prototype._signinEnd=function(W){var Y=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.processSigninResponse(W).then(function(Ie){l.Log.debug("UserManager._signinEnd: got signin response");var K=new f.User(Ie);if(q.current_sub){if(q.current_sub!==K.profile.sub)return l.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",K.profile.sub),Promise.reject(new Error("login_required"));l.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return Y.storeUser(K).then(function(){return l.Log.debug("UserManager._signinEnd: user stored"),Y._events.load(K),K})})},$.prototype._signinCallback=function(W,Y){l.Log.debug("UserManager._signinCallback");var q=this._settings.response_mode==="query"||!this._settings.response_mode&&A.SigninRequest.isCode(this._settings.response_type)?"?":"#";return Y.callback(W,void 0,q)},$.prototype.signoutRedirect=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(W=Object.assign({},W)).request_type="so:r";var Y=W.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;Y&&(W.post_logout_redirect_uri=Y);var q={useReplaceToNavigate:W.useReplaceToNavigate};return this._signoutStart(W,this._redirectNavigator,q).then(function(){l.Log.info("UserManager.signoutRedirect: successful")})},$.prototype.signoutRedirectCallback=function(W){return this._signoutEnd(W||this._redirectNavigator.url).then(function(Y){return l.Log.info("UserManager.signoutRedirectCallback: successful"),Y})},$.prototype.signoutPopup=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(W=Object.assign({},W)).request_type="so:p";var Y=W.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return W.post_logout_redirect_uri=Y,W.display="popup",W.post_logout_redirect_uri&&(W.state=W.state||{}),this._signout(W,this._popupNavigator,{startUrl:Y,popupWindowFeatures:W.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:W.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){l.Log.info("UserManager.signoutPopup: successful")})},$.prototype.signoutPopupCallback=function(W,Y){return Y===void 0&&typeof W=="boolean"&&(Y=W,W=null),this._popupNavigator.callback(W,Y,"?").then(function(){l.Log.info("UserManager.signoutPopupCallback: successful")})},$.prototype._signout=function(W,Y){var q=this,Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signoutStart(W,Y,Ie).then(function(K){return q._signoutEnd(K.url)})},$.prototype._signoutStart=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=this,q=arguments[1],Ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return q.prepare(Ie).then(function(K){return l.Log.debug("UserManager._signoutStart: got navigator window handle"),Y._loadUser().then(function(ie){return l.Log.debug("UserManager._signoutStart: loaded current user from storage"),(Y._settings.revokeAccessTokenOnSignout?Y._revokeInternal(ie):Promise.resolve()).then(function(){var ge=W.id_token_hint||ie&&ie.id_token;return ge&&(l.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),W.id_token_hint=ge),Y.removeUser().then(function(){return l.Log.debug("UserManager._signoutStart: user removed, creating signout request"),Y.createSignoutRequest(W).then(function(Se){return l.Log.debug("UserManager._signoutStart: got signout request"),Ie.url=Se.url,Se.state&&(Ie.id=Se.state.id),K.navigate(Ie)})})})}).catch(function(ie){throw K.close&&(l.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),K.close()),ie})})},$.prototype._signoutEnd=function(W){return this.processSignoutResponse(W).then(function(Y){return l.Log.debug("UserManager._signoutEnd: got signout response"),Y})},$.prototype.revokeAccessToken=function(){var W=this;return this._loadUser().then(function(Y){return W._revokeInternal(Y,!0).then(function(q){if(q)return l.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),Y.access_token=null,Y.refresh_token=null,Y.expires_at=null,Y.token_type=null,W.storeUser(Y).then(function(){l.Log.debug("UserManager.revokeAccessToken: user stored"),W._events.load(Y)})})}).then(function(){l.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},$.prototype._revokeInternal=function(W,Y){var q=this;if(W){var Ie=W.access_token,K=W.refresh_token;return this._revokeAccessTokenInternal(Ie,Y).then(function(ie){return q._revokeRefreshTokenInternal(K,Y).then(function(ge){return ie||ge||l.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),ie||ge})})}return Promise.resolve(!1)},$.prototype._revokeAccessTokenInternal=function(W,Y){return!W||W.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(W,Y).then(function(){return!0})},$.prototype._revokeRefreshTokenInternal=function(W,Y){return W?this._tokenRevocationClient.revoke(W,Y,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},$.prototype.startSilentRenew=function(){this._silentRenewService.start()},$.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},$.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(W){return W?(l.Log.debug("UserManager._loadUser: user storageString loaded"),f.User.fromStorageString(W)):(l.Log.debug("UserManager._loadUser: no user storageString"),null)})},$.prototype.storeUser=function(W){if(W){l.Log.debug("UserManager.storeUser: storing user");var Y=W.toStorageString();return this._userStore.set(this._userStoreKey,Y)}return l.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},d($,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),$}(c.OidcClient)},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.UserManagerSettings=void 0;var d=function(){function x(P,R){for(var F=0;F<R.length;F++){var I=R[F];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(P,I.key,I)}}return function(P,R,F){return R&&x(P.prototype,R),F&&x(P,F),P}}(),l=(s(0),s(5)),c=s(40),p=s(41),f=s(43),m=s(6),b=s(1),_=s(8);function A(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")}function T(x,P){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||typeof P!="object"&&typeof P!="function"?x:P}a.UserManagerSettings=function(x){function P(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=R.popup_redirect_uri,I=R.popup_post_logout_redirect_uri,$=R.popupWindowFeatures,B=R.popupWindowTarget,W=R.silent_redirect_uri,Y=R.silentRequestTimeout,q=R.automaticSilentRenew,Ie=q!==void 0&&q,K=R.validateSubOnSilentRenew,ie=K!==void 0&&K,ge=R.includeIdTokenInSilentRenew,Se=ge===void 0||ge,et=R.monitorSession,st=et===void 0||et,Ne=R.monitorAnonymousSession,gt=Ne!==void 0&&Ne,ve=R.checkSessionInterval,tt=ve===void 0?2e3:ve,J=R.stopCheckSessionOnError,xe=J===void 0||J,Xe=R.query_status_response_type,je=R.revokeAccessTokenOnSignout,dt=je!==void 0&&je,It=R.accessTokenExpiringNotificationTime,Mt=It===void 0?60:It,Me=R.redirectNavigator,le=Me===void 0?new c.RedirectNavigator:Me,Te=R.popupNavigator,Je=Te===void 0?new p.PopupNavigator:Te,se=R.iframeNavigator,M=se===void 0?new f.IFrameNavigator:se,D=R.userStore,G=D===void 0?new m.WebStorageStateStore({store:b.Global.sessionStorage}):D;A(this,P);var re=T(this,x.call(this,arguments[0]));return re._popup_redirect_uri=F,re._popup_post_logout_redirect_uri=I,re._popupWindowFeatures=$,re._popupWindowTarget=B,re._silent_redirect_uri=W,re._silentRequestTimeout=Y,re._automaticSilentRenew=Ie,re._validateSubOnSilentRenew=ie,re._includeIdTokenInSilentRenew=Se,re._accessTokenExpiringNotificationTime=Mt,re._monitorSession=st,re._monitorAnonymousSession=gt,re._checkSessionInterval=tt,re._stopCheckSessionOnError=xe,Xe?re._query_status_response_type=Xe:arguments[0]&&arguments[0].response_type?re._query_status_response_type=_.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":re._query_status_response_type="id_token",re._revokeAccessTokenOnSignout=dt,re._redirectNavigator=le,re._popupNavigator=Je,re._iframeNavigator=M,re._userStore=G,re}return function(F,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);F.prototype=Object.create(I&&I.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(F,I):F.__proto__=I)}(P,x),d(P,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),P}(l.OidcClientSettings)},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.RedirectNavigator=void 0;var d=function(){function c(p,f){for(var m=0;m<f.length;m++){var b=f[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}return function(p,f,m){return f&&c(p.prototype,f),m&&c(p,m),p}}(),l=s(0);a.RedirectNavigator=function(){function c(){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c)}return c.prototype.prepare=function(){return Promise.resolve(this)},c.prototype.navigate=function(f){return f&&f.url?(f.useReplaceToNavigate?window.location.replace(f.url):window.location=f.url,Promise.resolve()):(l.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},d(c,[{key:"url",get:function(){return window.location.href}}]),c}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.PopupNavigator=void 0;var d=s(0),l=s(42);a.PopupNavigator=function(){function c(){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c)}return c.prototype.prepare=function(f){var m=new l.PopupWindow(f);return Promise.resolve(m)},c.prototype.callback=function(f,m,b){d.Log.debug("PopupNavigator.callback");try{return l.PopupWindow.notifyOpener(f,m,b),Promise.resolve()}catch(_){return Promise.reject(_)}},c}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.PopupWindow=void 0;var d=function(){function p(f,m){for(var b=0;b<m.length;b++){var _=m[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}return function(f,m,b){return m&&p(f.prototype,m),b&&p(f,b),f}}(),l=s(0),c=s(3);a.PopupWindow=function(){function p(f){var m=this;(function(T,x){if(!(T instanceof x))throw new TypeError("Cannot call a class as a function")})(this,p),this._promise=new Promise(function(A,T){m._resolve=A,m._reject=T});var b=f.popupWindowTarget||"_blank",_=f.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",b,_),this._popup&&(l.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return p.prototype.navigate=function(m){return this._popup?m&&m.url?(l.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=m.id,this._id&&(window["popupCallback_"+m.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=m.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},p.prototype._success=function(m){l.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(m)},p.prototype._error=function(m){l.Log.error("PopupWindow.error: ",m),this._cleanup(),this._reject(new Error(m))},p.prototype.close=function(){this._cleanup(!1)},p.prototype._cleanup=function(m){l.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!m&&this._popup.close(),this._popup=null},p.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},p.prototype._callback=function(m,b){this._cleanup(b),m?(l.Log.debug("PopupWindow.callback success"),this._success({url:m})):(l.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},p.notifyOpener=function(m,b,_){if(window.opener){if(m=m||window.location.href){var A=c.UrlUtility.parseUrlFragment(m,_);if(A.state){var T="popupCallback_"+A.state,x=window.opener[T];x?(l.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),x(m,b)):l.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else l.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else l.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},d(p,[{key:"promise",get:function(){return this._promise}}]),p}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.IFrameNavigator=void 0;var d=s(0),l=s(44);a.IFrameNavigator=function(){function c(){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,c)}return c.prototype.prepare=function(f){var m=new l.IFrameWindow(f);return Promise.resolve(m)},c.prototype.callback=function(f){d.Log.debug("IFrameNavigator.callback");try{return l.IFrameWindow.notifyParent(f),Promise.resolve()}catch(m){return Promise.reject(m)}},c}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.IFrameWindow=void 0;var d=function(){function c(p,f){for(var m=0;m<f.length;m++){var b=f[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}return function(p,f,m){return f&&c(p.prototype,f),m&&c(p,m),p}}(),l=s(0);a.IFrameWindow=function(){function c(p){var f=this;(function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")})(this,c),this._promise=new Promise(function(m,b){f._resolve=m,f._reject=b}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return c.prototype.navigate=function(f){if(f&&f.url){var m=f.silentRequestTimeout||1e4;l.Log.debug("IFrameWindow.navigate: Using timeout of:",m),this._timer=window.setTimeout(this._timeout.bind(this),m),this._frame.src=f.url}else this._error("No url provided");return this.promise},c.prototype._success=function(f){this._cleanup(),l.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(f)},c.prototype._error=function(f){this._cleanup(),l.Log.error(f),this._reject(new Error(f))},c.prototype.close=function(){this._cleanup()},c.prototype._cleanup=function(){this._frame&&(l.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},c.prototype._timeout=function(){l.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},c.prototype._message=function(f){if(l.Log.debug("IFrameWindow.message"),this._timer&&f.origin===this._origin&&f.source===this._frame.contentWindow&&typeof f.data=="string"&&(f.data.startsWith("http://")||f.data.startsWith("https://"))){var m=f.data;m?this._success({url:m}):this._error("Invalid response from frame")}},c.notifyParent=function(f){l.Log.debug("IFrameWindow.notifyParent"),(f=f||window.location.href)&&(l.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(f,location.protocol+"//"+location.host))},d(c,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),c}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.UserManagerEvents=void 0;var d=s(0),l=s(16),c=s(17);a.UserManagerEvents=function(p){function f(m){(function(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")})(this,f);var b=function(A,T){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!T||typeof T!="object"&&typeof T!="function"?A:T}(this,p.call(this,m));return b._userLoaded=new c.Event("User loaded"),b._userUnloaded=new c.Event("User unloaded"),b._silentRenewError=new c.Event("Silent renew error"),b._userSignedIn=new c.Event("User signed in"),b._userSignedOut=new c.Event("User signed out"),b._userSessionChanged=new c.Event("User session changed"),b}return function(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}(f,p),f.prototype.load=function(b){var _=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];d.Log.debug("UserManagerEvents.load"),p.prototype.load.call(this,b),_&&this._userLoaded.raise(b)},f.prototype.unload=function(){d.Log.debug("UserManagerEvents.unload"),p.prototype.unload.call(this),this._userUnloaded.raise()},f.prototype.addUserLoaded=function(b){this._userLoaded.addHandler(b)},f.prototype.removeUserLoaded=function(b){this._userLoaded.removeHandler(b)},f.prototype.addUserUnloaded=function(b){this._userUnloaded.addHandler(b)},f.prototype.removeUserUnloaded=function(b){this._userUnloaded.removeHandler(b)},f.prototype.addSilentRenewError=function(b){this._silentRenewError.addHandler(b)},f.prototype.removeSilentRenewError=function(b){this._silentRenewError.removeHandler(b)},f.prototype._raiseSilentRenewError=function(b){d.Log.debug("UserManagerEvents._raiseSilentRenewError",b.message),this._silentRenewError.raise(b)},f.prototype.addUserSignedIn=function(b){this._userSignedIn.addHandler(b)},f.prototype.removeUserSignedIn=function(b){this._userSignedIn.removeHandler(b)},f.prototype._raiseUserSignedIn=function(){d.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},f.prototype.addUserSignedOut=function(b){this._userSignedOut.addHandler(b)},f.prototype.removeUserSignedOut=function(b){this._userSignedOut.removeHandler(b)},f.prototype._raiseUserSignedOut=function(){d.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},f.prototype.addUserSessionChanged=function(b){this._userSessionChanged.addHandler(b)},f.prototype.removeUserSessionChanged=function(b){this._userSessionChanged.removeHandler(b)},f.prototype._raiseUserSessionChanged=function(){d.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},f}(l.AccessTokenEvents)},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.Timer=void 0;var d=function(){function b(_,A){for(var T=0;T<A.length;T++){var x=A[T];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(_,x.key,x)}}return function(_,A,T){return A&&b(_.prototype,A),T&&b(_,T),_}}(),l=s(0),c=s(1),p=s(17);function f(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function m(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?b:_}a.Timer=function(b){function _(A){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.Global.timer,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;f(this,_);var P=m(this,b.call(this,A));return P._timer=T,P._nowFunc=x||function(){return Date.now()/1e3},P}return function(T,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);T.prototype=Object.create(x&&x.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(T,x):T.__proto__=x)}(_,b),_.prototype.init=function(T){T<=0&&(T=1),T=parseInt(T);var x=this.now+T;if(this.expiration===x&&this._timerHandle)l.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),l.Log.debug("Timer.init timer "+this._name+" for duration:",T),this._expiration=x;var P=5;T<P&&(P=T),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*P)}},_.prototype.cancel=function(){this._timerHandle&&(l.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},_.prototype._callback=function(){var T=this._expiration-this.now;l.Log.debug("Timer.callback; "+this._name+" timer expires in:",T),this._expiration<=this.now&&(this.cancel(),b.prototype.raise.call(this))},d(_,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),_}(p.Event)},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SilentRenewService=void 0;var d=s(0);a.SilentRenewService=function(){function l(c){(function(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")})(this,l),this._userManager=c}return l.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(p){}).catch(function(p){d.Log.error("SilentRenewService.start: Error from getUser:",p.message)}))},l.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},l.prototype._tokenExpiring=function(){var p=this;this._userManager.signinSilent().then(function(f){d.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(f){d.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",f.message),p._userManager.events._raiseSilentRenewError(f)})},l}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.CordovaPopupNavigator=void 0;var d=s(21);a.CordovaPopupNavigator=function(){function l(){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,l)}return l.prototype.prepare=function(p){var f=new d.CordovaPopupWindow(p);return Promise.resolve(f)},l}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.CordovaIFrameNavigator=void 0;var d=s(21);a.CordovaIFrameNavigator=function(){function l(){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,l)}return l.prototype.prepare=function(p){p.popupWindowFeatures="hidden=yes";var f=new d.CordovaPopupWindow(p);return Promise.resolve(f)},l}()},function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.Version="1.11.6"}])})}(Oy)),Oy.exports}var oo=aC();lf();const{fetch:Qv}=globalThis;let vy;const oC=new Uint8Array(16);function sC(){if(!vy&&(vy=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vy))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vy(oC)}const Wi=[];for(let t=0;t<256;++t)Wi.push((t+256).toString(16).slice(1));function lC(t,r=0){return Wi[t[r+0]]+Wi[t[r+1]]+Wi[t[r+2]]+Wi[t[r+3]]+"-"+Wi[t[r+4]]+Wi[t[r+5]]+"-"+Wi[t[r+6]]+Wi[t[r+7]]+"-"+Wi[t[r+8]]+Wi[t[r+9]]+"-"+Wi[t[r+10]]+Wi[t[r+11]]+Wi[t[r+12]]+Wi[t[r+13]]+Wi[t[r+14]]+Wi[t[r+15]]}const uC=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sS={randomUUID:uC};function cC(t,r,i){if(sS.randomUUID&&!t)return sS.randomUUID();t=t||{};const a=t.random||(t.rng||sC)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,lC(a)}const Hy=["ES256","RS256"],fC="openid",dC="offline_access",hC="webid",pC=[fC,dC,hC].join(" ");async function gC(t,r){const i=await Qv.call(globalThis,t);if(i.status!==200)throw new Error(`Could not fetch JWKS for [${r}] at [${t}]: ${i.status} ${i.statusText}`);let a;try{a=(await i.json()).keys[0]}catch(s){throw new Error(`Malformed JWKS for [${r}] at [${t}]: ${s.message}`)}return a}async function Xv(t,r,i,a){const s=await gC(r,i);let d;try{const{payload:l}=await p1(t,await fg(s),{issuer:i,audience:a});d=l}catch(l){throw new Error(`Token verification failed: ${l.stack}`)}if(typeof d.webid=="string")return d.webid;if(typeof d.sub!="string")throw new Error(`The token ${JSON.stringify(d)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(d.sub),d.sub}catch(l){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${d.sub}] is invalid as a URL - error [${l}].`)}}function yC(t){const r=new URL(t);return r.searchParams.delete("state"),r.searchParams.delete("code"),r.searchParams.delete("error"),r.searchParams.delete("error_description"),r.searchParams.delete("iss"),r}function mC(t,r){var i;return(i=r.find(a=>t.includes(a)))!==null&&i!==void 0?i:null}class by extends Error{constructor(r){super(`Invalid response from OIDC provider: missing fields ${r}`),this.missingFields=r}}class vC extends Error{constructor(r,i,a){super(r),this.error=i,this.errorDescription=a}}function bC(t){const r=new URL(t);return new URL(r.pathname,r.origin).toString()}async function S1(t,r,i){return new m1({htu:bC(t),htm:r.toUpperCase(),jti:cC()}).setProtectedHeader({alg:Hy[0],jwk:i.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(i.privateKey,{})}async function wC(){const{privateKey:t,publicKey:r}=await _1(Hy[0]),i={privateKey:t,publicKey:await Gv(r)};return[i.publicKey.alg]=Hy,i}function _C(t,r){var i,a,s,d;throw t.error==="invalid_redirect_uri"?new Error(`Dynamic client registration failed: the provided redirect uri [${(i=r.redirectUrl)===null||i===void 0?void 0:i.toString()}] is invalid - ${(a=t.error_description)!==null&&a!==void 0?a:""}`):t.error==="invalid_client_metadata"?new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(r)} is invalid - ${(s=t.error_description)!==null&&s!==void 0?s:""}`):new Error(`Dynamic client registration failed: ${t.error} - ${(d=t.error_description)!==null&&d!==void 0?d:""}`)}function SC(t,r){if(t.client_id===void 0)throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(t)}`);if(r.redirectUrl&&(t.redirect_uris===void 0||t.redirect_uris[0]!==r.redirectUrl.toString()))throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(t.redirect_uris)} don't match the provided ${JSON.stringify([r.redirectUrl.toString()])}`)}async function EC(t,r){var i;if(!r.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(r.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const a=mC(r.idTokenSigningAlgValuesSupported,Hy),s={client_name:t.clientName,application_type:"web",redirect_uris:[(i=t.redirectUrl)===null||i===void 0?void 0:i.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:a,grant_types:["authorization_code","refresh_token"]},d={"Content-Type":"application/json"},l=await fetch(r.registrationEndpoint.toString(),{method:"POST",headers:d,body:JSON.stringify(s)});if(l.ok){const c=await l.json();return SC(c,t),{clientId:c.client_id,clientSecret:c.client_secret,idTokenSignedResponseAlg:c.id_token_signed_response_alg,clientType:"dynamic"}}throw l.status===400&&_C(await l.json(),t),new Error(`Dynamic client registration failed: the server returned ${l.status} ${l.statusText} - ${await l.text()}`)}function AC(t){return t.error!==void 0&&typeof t.error=="string"}function lS(t){return t.error_description!==void 0&&typeof t.error_description=="string"}function RC(t){return t.error_uri!==void 0&&typeof t.error_uri=="string"}function xC(t){return t.access_token!==void 0&&typeof t.access_token=="string"}function TC(t){return t.id_token!==void 0&&typeof t.id_token=="string"}function CC(t){return t.refresh_token!==void 0&&typeof t.refresh_token=="string"}function OC(t){return t.token_type!==void 0&&typeof t.token_type=="string"}function PC(t){return t.expires_in===void 0||typeof t.expires_in=="number"}function IC(t,r){if(r.grantType&&(!t.grantTypesSupported||!t.grantTypesSupported.includes(r.grantType)))throw new Error(`The issuer [${t.issuer}] does not support the [${r.grantType}] grant`);if(!t.tokenEndpoint)throw new Error(`This issuer [${t.issuer}] does not have a token endpoint`)}function E1(t,r){if(AC(t))throw new vC(`Token endpoint returned error [${t.error}]${lS(t)?`: ${t.error_description}`:""}${RC(t)?` (see ${t.error_uri})`:""}`,t.error,lS(t)?t.error_description:void 0);if(!xC(t))throw new by(["access_token"]);if(!TC(t))throw new by(["id_token"]);if(!OC(t))throw new by(["token_type"]);if(!PC(t))throw new by(["expires_in"]);if(!r&&t.token_type.toLowerCase()!=="bearer")throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${t.token_type}].`);return t}async function NC(t,r,i,a){IC(t,i);const s={"content-type":"application/x-www-form-urlencoded"};let d;d=await wC(),s.DPoP=await S1(t.tokenEndpoint,"POST",d),r.clientSecret&&(s.Authorization=`Basic ${btoa(`${r.clientId}:${r.clientSecret}`)}`);const l={grant_type:i.grantType,redirect_uri:i.redirectUrl,code:i.code,code_verifier:i.codeVerifier,client_id:r.clientId},c={method:"POST",headers:s,body:new URLSearchParams(l).toString()},f=await(await Qv(t.tokenEndpoint,c)).json(),m=E1(f,a),b=await Xv(m.id_token,t.jwksUri,t.issuer,r.clientId);return{accessToken:m.access_token,idToken:m.id_token,refreshToken:CC(m)?m.refresh_token:void 0,webId:b,dpopKey:d,expiresIn:m.expires_in}}async function FC(t){let r;try{const i=new oo.OidcClient({response_mode:"query",loadUserInfo:!1});if(r=await i.processSigninResponse(t),i.settings.metadata===void 0)throw new Error("Cannot retrieve issuer metadata from client information in storage.");if(i.settings.metadata.jwks_uri===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'jwks_uri' is undefined");if(i.settings.metadata.issuer===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'issuer' is undefined");if(i.settings.client_id===void 0)throw new Error("Missing some client information in storage: 'client_id' is undefined");const a=await Xv(r.id_token,i.settings.metadata.jwks_uri,i.settings.metadata.issuer,i.settings.client_id);return{accessToken:r.access_token,idToken:r.id_token,webId:a,refreshToken:r.refresh_token}}catch(i){throw new Error(`Problem handling Auth Code Grant (Flow) redirect - URL [${t}]: ${i}`)}}async function DC(t,r,i){return NC(t,r,i,!0)}const UC=t=>{try{return new URL(t),!0}catch{return!1}};async function LC(t,r,i,a){if(i.clientId===void 0)throw new Error("No client ID available when trying to refresh the access token.");const s={grant_type:"refresh_token",refresh_token:t,scope:pC};let d={};a!==void 0&&(d={DPoP:await S1(r.tokenEndpoint,"POST",a)});let l={};i.clientSecret!==void 0?l={Authorization:`Basic ${btoa(`${i.clientId}:${i.clientSecret}`)}`}:UC(i.clientId)&&(s.client_id=i.clientId);const c=await Qv(r.tokenEndpoint,{method:"POST",body:new URLSearchParams(s).toString(),headers:{...d,...l,"Content-Type":"application/x-www-form-urlencoded"}});let p;try{p=await c.json()}catch{throw new Error(`The token endpoint of issuer ${r.issuer} returned a malformed response.`)}const f=E1(p,a!==void 0),m=await Xv(f.id_token,r.jwksUri,r.issuer,i.clientId);return{accessToken:f.access_token,idToken:f.id_token,refreshToken:typeof f.refresh_token=="string"?f.refresh_token:void 0,webId:m,dpopKey:a,expiresIn:f.expires_in}}function MC(t){const r=yC(t);return r.hash="",t.includes(`${r.origin}/`)?r.href:`${r.origin}${r.href.substring(r.origin.length+1)}`}async function kC(){await new oo.OidcClient({response_mode:"query"}).clearStaleState(new oo.WebStorageStateStore({}));const r=window.localStorage,i=[];for(let a=0;a<=r.length;a+=1){const s=r.key(a);s&&(s.match(/^oidc\..+$/)||s.match(/^solidClientAuthenticationUser:.+$/))&&i.push(s)}i.forEach(a=>r.removeItem(a))}const BC=Object.freeze(Object.defineProperty({__proto__:null,CordovaIFrameNavigator:oo.CordovaIFrameNavigator,CordovaPopupNavigator:oo.CordovaPopupNavigator,InMemoryWebStorage:oo.InMemoryWebStorage,Log:oo.Log,OidcClient:oo.OidcClient,SessionMonitor:oo.SessionMonitor,User:oo.User,UserManager:oo.UserManager,Version:oo.Version,WebStorageStateStore:oo.WebStorageStateStore,clearOidcPersistentStorage:kC,getBearerToken:FC,getDpopToken:DC,normalizeCallbackUrl:MC,refresh:LC,registerClient:EC},Symbol.toStringTag,{value:"Module"})),HC=Ky(BC);var uS;function jC(){return uS||(uS=1,function(t){var r=nC(),i=Mv(),a=lf(),s=HC,d=Iv();class l extends r.StorageUtility{constructor(le,Te){super(le,Te)}}class c extends r.ClientAuthentication{constructor(){super(...arguments),this.login=async(le,Te)=>{var Je,se;await this.sessionInfoManager.clear(le.sessionId);const M=(Je=le.redirectUrl)!==null&&Je!==void 0?Je:s.normalizeCallbackUrl(window.location.href);if(!r.isValidRedirectUrl(M))throw new Error(`${M} is not a valid redirect URL, it is either a malformed IRI, includes a hash fragment, or reserved query parameters ('code' or 'state').`);await this.loginHandler.handle({...le,redirectUrl:M,clientName:(se=le.clientName)!==null&&se!==void 0?se:le.clientId,eventEmitter:Te})},this.validateCurrentSession=async le=>{const Te=await this.sessionInfoManager.get(le);return Te===void 0||Te.clientAppId===void 0||Te.issuer===void 0?null:Te},this.handleIncomingRedirect=async(le,Te)=>{try{const Je=await this.redirectHandler.handle(le,Te);return this.fetch=Je.fetch.bind(window),this.boundLogout=Je.getLogoutUrl,await this.cleanUrlAfterRedirect(le),{isLoggedIn:Je.isLoggedIn,webId:Je.webId,sessionId:Je.sessionId,expirationDate:Je.expirationDate}}catch(Je){await this.cleanUrlAfterRedirect(le),Te.emit(r.EVENTS.ERROR,"redirect",Je);return}}}async cleanUrlAfterRedirect(le){const Te=r.removeOpenIdParams(le).href;for(window.history.replaceState(null,"",Te);window.location.href!==Te;)await new Promise(Je=>{setTimeout(()=>Je(),1)})}}function p(Me){return typeof Me.oidcIssuer=="string"}function f(Me){return typeof Me.redirectUrl=="string"}class m{constructor(le,Te,Je,se){this.storageUtility=le,this.oidcHandler=Te,this.issuerConfigFetcher=Je,this.clientRegistrar=se,this.storageUtility=le,this.oidcHandler=Te,this.issuerConfigFetcher=Je,this.clientRegistrar=se}async canHandle(le){return p(le)&&f(le)}async handle(le){if(!p(le))throw new r.ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(le)}`);if(!f(le))throw new r.ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(le)}`);const Te=await this.issuerConfigFetcher.fetchConfig(le.oidcIssuer),Je=await r.handleRegistration(le,Te,this.storageUtility,this.clientRegistrar),se={issuer:Te.issuer,dpop:le.tokenType.toLowerCase()==="dpop",...le,issuerConfiguration:Te,client:Je};return this.oidcHandler.handle(se)}}class b extends r.AuthorizationCodeWithPkceOidcHandlerBase{async handle(le){var Te;const Je={authority:le.issuer.toString(),client_id:le.client.clientId,client_secret:le.client.clientSecret,redirect_uri:le.redirectUrl.toString(),post_logout_redirect_uri:le.redirectUrl.toString(),response_type:"code",scope:r.DEFAULT_SCOPES,filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:(Te=le.prompt)!==null&&Te!==void 0?Te:"consent"},se=new s.OidcClient(Je);try{const M=await se.createSigninRequest();return await this.handleRedirect({oidcLoginOptions:le,state:M.state._id,codeVerifier:M.state._code_verifier,targetUrl:M.url.toString()})}catch(M){console.error(M)}}}const _=".well-known/openid-configuration",A={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},end_session_endpoint:{toKey:"endSessionEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};function T(Me){const le={};return Object.keys(Me).forEach(Te=>{A[Te]&&(le[A[Te].toKey]=Me[Te])}),Array.isArray(le.scopesSupported)||(le.scopesSupported=["openid"]),le}class x{constructor(le){this.storageUtility=le,this.storageUtility=le}static getLocalStorageKey(le){return`issuerConfig:${le}`}async fetchConfig(le){let Te;const Je=new URL(_,le.endsWith("/")?le:`${le}/`).href,se=await d.fetch.call(globalThis,Je);try{Te=T(await se.json())}catch(M){throw new r.ConfigurationError(`[${le.toString()}] has an invalid configuration: ${M.message}`)}return await this.storageUtility.set(x.getLocalStorageKey(le),JSON.stringify(Te)),Te}}async function P(Me,le){await r.clear(Me,le),await s.clearOidcPersistentStorage()}class R extends r.SessionInfoManagerBase{async get(le){const[Te,Je,se,M,D,G,re,we]=await Promise.all([this.storageUtility.getForUser(le,"isLoggedIn",{secure:!0}),this.storageUtility.getForUser(le,"webId",{secure:!0}),this.storageUtility.getForUser(le,"clientId",{secure:!1}),this.storageUtility.getForUser(le,"clientSecret",{secure:!1}),this.storageUtility.getForUser(le,"redirectUrl",{secure:!1}),this.storageUtility.getForUser(le,"refreshToken",{secure:!0}),this.storageUtility.getForUser(le,"issuer",{secure:!1}),this.storageUtility.getForUser(le,"tokenType",{secure:!1})]);if(typeof D=="string"&&!r.isValidRedirectUrl(D)){await Promise.all([this.storageUtility.deleteAllUserData(le,{secure:!1}),this.storageUtility.deleteAllUserData(le,{secure:!0})]);return}if(we!==void 0&&!r.isSupportedTokenType(we))throw new Error(`Tokens of type [${we}] are not supported.`);if(!(se===void 0&&Te===void 0&&Je===void 0&&G===void 0))return{sessionId:le,webId:Je,isLoggedIn:Te==="true",redirectUrl:D,refreshToken:G,issuer:re,clientAppId:se,clientAppSecret:M,tokenType:we??"DPoP"}}async clear(le){return P(le,this.storageUtility)}}class F{async canHandle(le){try{return new URL(le),!0}catch(Te){throw new Error(`[${le}] is not a valid URL, and cannot be used as a redirect URL: ${Te}`)}}async handle(le){return r.getUnauthenticatedSession()}}const I=(...Me)=>d.fetch.call(globalThis,...Me);class ${constructor(le,Te,Je,se,M){this.storageUtility=le,this.sessionInfoManager=Te,this.issuerConfigFetcher=Je,this.clientRegistrar=se,this.tokerRefresher=M,this.storageUtility=le,this.sessionInfoManager=Te,this.issuerConfigFetcher=Je,this.clientRegistrar=se,this.tokerRefresher=M}async canHandle(le){try{const Te=new URL(le);return Te.searchParams.get("code")!==null&&Te.searchParams.get("state")!==null}catch(Te){throw new Error(`[${le}] is not a valid URL, and cannot be used as a redirect URL: ${Te}`)}}async handle(le,Te){if(!await this.canHandle(le))throw new Error(`AuthCodeRedirectHandler cannot handle [${le}]: it is missing one of [code, state].`);const Je=new URL(le),se=Je.searchParams.get("state"),M=await this.storageUtility.getForUser(se,"sessionId",{errorIfNull:!0}),{issuerConfig:D,codeVerifier:G,redirectUrl:re,dpop:we}=await r.loadOidcContextFromStorage(M,this.storageUtility,this.issuerConfigFetcher),Ce=Je.searchParams.get("iss");if(typeof Ce=="string"&&Ce!==D.issuer)throw new Error(`The value of the iss parameter (${Ce}) does not match the issuer identifier of the authorization server (${D.issuer}). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)`);if(G===void 0)throw new Error(`The code verifier for session ${M} is missing from storage.`);if(re===void 0)throw new Error(`The redirect URL for session ${M} is missing from storage.`);const at=await this.clientRegistrar.getClient({sessionId:M},D);let Re;const ht=Date.now();we?(Re=await s.getDpopToken(D,at,{grantType:"authorization_code",code:Je.searchParams.get("code"),codeVerifier:G,redirectUrl:re}),window.localStorage.removeItem(`oidc.${se}`)):Re=await s.getBearerToken(Je.toString());let Ct;Re.refreshToken!==void 0&&(Ct={sessionId:M,refreshToken:Re.refreshToken,tokenRefresher:this.tokerRefresher});const vt=await r.buildAuthenticatedFetch(I,Re.accessToken,{dpopKey:Re.dpopKey,refreshOptions:Ct,eventEmitter:Te,expiresIn:Re.expiresIn});await this.storageUtility.setForUser(M,{webId:Re.webId,isLoggedIn:"true"},{secure:!0});const We=await this.sessionInfoManager.get(M);if(!We)throw new Error(`Could not retrieve session: [${M}].`);return Object.assign(We,{fetch:vt,getLogoutUrl:r.maybeBuildRpInitiatedLogout({idTokenHint:Re.idToken,endSessionEndpoint:D.endSessionEndpoint}),expirationDate:typeof Re.expiresIn=="number"?ht+Re.expiresIn*1e3:void 0})}}class B extends r.AggregateHandler{constructor(le){super(le)}}class W{get storage(){return window.localStorage}async get(le){return this.storage.getItem(le)||void 0}async set(le,Te){this.storage.setItem(le,Te)}async delete(le){this.storage.removeItem(le)}}class Y{redirect(le,Te){Te&&Te.handleRedirect?Te.handleRedirect(le):Te&&Te.redirectByReplacingState?window.history.replaceState({},"",le):window.location.href=le}}class q{constructor(le){this.storageUtility=le,this.storageUtility=le}async getClient(le,Te){const[Je,se]=await Promise.all([this.storageUtility.getForUser(le.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(le.sessionId,"clientSecret",{secure:!1})]);if(Je)return{clientId:Je,clientSecret:se,clientType:"dynamic"};try{const M=await s.registerClient(le,Te),D={clientId:M.clientId};return M.clientSecret&&(D.clientSecret=M.clientSecret),M.idTokenSignedResponseAlg&&(D.idTokenSignedResponseAlg=M.idTokenSignedResponseAlg),await this.storageUtility.setForUser(le.sessionId,D,{secure:!1}),M}catch(M){throw new Error(`Client registration failed: [${M}]`)}}}class Ie{async canHandle(le){try{return new URL(le).searchParams.has("error")}catch(Te){throw new Error(`[${le}] is not a valid URL, and cannot be used as a redirect URL: ${Te}`)}}async handle(le,Te){if(Te!==void 0){const Je=new URL(le),se=Je.searchParams.get("error"),M=Je.searchParams.get("error_description");Te.emit(r.EVENTS.ERROR,se,M)}return r.getUnauthenticatedSession()}}class K{constructor(le,Te,Je){this.storageUtility=le,this.issuerConfigFetcher=Te,this.clientRegistrar=Je,this.storageUtility=le,this.issuerConfigFetcher=Te,this.clientRegistrar=Je}async refresh(le,Te,Je,se){const M=await r.loadOidcContextFromStorage(le,this.storageUtility,this.issuerConfigFetcher),D=await this.clientRegistrar.getClient({sessionId:le},M.issuerConfig);if(Te===void 0)throw new Error(`Session [${le}] has no refresh token to allow it to refresh its access token.`);if(M.dpop&&Je===void 0)throw new Error(`For session [${le}], the key bound to the DPoP access token must be provided to refresh said access token.`);const G=await s.refresh(Te,M.issuerConfig,D,Je);return G.refreshToken!==void 0&&(se?.emit(r.EVENTS.NEW_REFRESH_TOKEN,G.refreshToken),await this.storageUtility.setForUser(le,{refreshToken:G.refreshToken})),G}}function ie(Me){const le=new r.InMemoryStorage,Te=Me.secureStorage||le,Je=Me.insecureStorage||new W,se=new l(Te,Je),M=new x(se),D=new q(se),G=new R(se),re=new K(se,M,D),we=new Y,Ce=new m(se,new b(se,we),M,D),at=new B([new Ie,new $(se,G,M,D,re),new F]);return new c(Ce,at,new r.IWaterfallLogoutHandler(G,we),G,M)}const ge=`${r.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentSession`,Se=`${r.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentUrl`;async function et(Me,le,Te){var Je;const se=await le.validateCurrentSession(Me);return se!==null?(window.localStorage.setItem(Se,window.location.href),await le.login({sessionId:Me,prompt:"none",oidcIssuer:se.issuer,redirectUrl:se.redirectUrl,clientId:se.clientAppId,clientSecret:se.clientAppSecret,tokenType:(Je=se.tokenType)!==null&&Je!==void 0?Je:"DPoP"},Te.events),!0):!1}function st(Me){return!!Me?.isLoggedIn}class Ne extends a{constructor(le={},Te=void 0){super(),this.tokenRequestInProgress=!1,this.login=async Je=>{var se;return await this.clientAuthentication.login({sessionId:this.info.sessionId,...Je,tokenType:(se=Je.tokenType)!==null&&se!==void 0?se:"DPoP"},this.events),new Promise(()=>{})},this.fetch=(Je,se)=>this.clientAuthentication.fetch(Je,se),this.internalLogout=async(Je,se)=>{window.localStorage.removeItem(ge),await this.clientAuthentication.logout(this.info.sessionId,se),this.info.isLoggedIn=!1,Je&&this.events.emit(r.EVENTS.LOGOUT)},this.logout=async Je=>this.internalLogout(!0,Je),this.handleIncomingRedirect=async(Je={})=>{var se;if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;const M=typeof Je=="string"?{url:Je}:Je,D=(se=M.url)!==null&&se!==void 0?se:window.location.href;this.tokenRequestInProgress=!0;const G=await this.clientAuthentication.handleIncomingRedirect(D,this.events);if(st(G)){this.setSessionInfo(G);const re=window.localStorage.getItem(Se);re===null?this.events.emit(r.EVENTS.LOGIN):(window.localStorage.removeItem(Se),this.events.emit(r.EVENTS.SESSION_RESTORED,re))}else if(M.restorePreviousSession===!0){const re=window.localStorage.getItem(ge);if(re!==null&&await et(re,this.clientAuthentication,this))return new Promise(()=>{})}return this.tokenRequestInProgress=!1,G},this.events=new Proxy(this,r.buildProxyHandler(Ne.prototype,"events only implements ISessionEventListener")),le.clientAuthentication?this.clientAuthentication=le.clientAuthentication:le.secureStorage&&le.insecureStorage?this.clientAuthentication=ie({secureStorage:le.secureStorage,insecureStorage:le.insecureStorage}):this.clientAuthentication=ie({}),le.sessionInfo?this.info={sessionId:le.sessionInfo.sessionId,isLoggedIn:!1,webId:le.sessionInfo.webId}:this.info={sessionId:Te??i.v4(),isLoggedIn:!1},this.events.on(r.EVENTS.LOGIN,()=>window.localStorage.setItem(ge,this.info.sessionId)),this.events.on(r.EVENTS.SESSION_EXPIRED,()=>this.internalLogout(!1)),this.events.on(r.EVENTS.ERROR,()=>this.internalLogout(!1))}onLogin(le){this.events.on(r.EVENTS.LOGIN,le)}onLogout(le){this.events.on(r.EVENTS.LOGOUT,le)}onError(le){this.events.on(r.EVENTS.ERROR,le)}onSessionRestore(le){this.events.on(r.EVENTS.SESSION_RESTORED,le)}onSessionExpiration(le){this.events.on(r.EVENTS.SESSION_EXPIRED,le)}setSessionInfo(le){this.info.isLoggedIn=le.isLoggedIn,this.info.webId=le.webId,this.info.sessionId=le.sessionId,this.info.expirationDate=le.expirationDate,this.events.on(r.EVENTS.SESSION_EXTENDED,Te=>{this.info.expirationDate=Date.now()+Te*1e3})}}let gt;function ve(){return typeof gt>"u"&&(gt=new Ne),gt}const tt=(...Me)=>ve().fetch(...Me),J=(...Me)=>ve().login(...Me),xe=(...Me)=>ve().logout(...Me),Xe=(...Me)=>ve().handleIncomingRedirect(...Me),je=(...Me)=>ve().onLogin(...Me),dt=(...Me)=>ve().onLogout(...Me),It=(...Me)=>ve().onSessionRestore(...Me),Mt=()=>ve().events;Object.defineProperty(t,"ConfigurationError",{enumerable:!0,get:function(){return r.ConfigurationError}}),Object.defineProperty(t,"EVENTS",{enumerable:!0,get:function(){return r.EVENTS}}),Object.defineProperty(t,"InMemoryStorage",{enumerable:!0,get:function(){return r.InMemoryStorage}}),Object.defineProperty(t,"NotImplementedError",{enumerable:!0,get:function(){return r.NotImplementedError}}),t.Session=Ne,t.events=Mt,t.fetch=tt,t.getClientAuthenticationWithDependencies=ie,t.getDefaultSession=ve,t.handleIncomingRedirect=Xe,t.login=J,t.logout=xe,t.onLogin=je,t.onLogout=dt,t.onSessionRestore=It}(L0)),L0}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function A1(t,r,i,a){function s(d){return d instanceof i?d:new i(function(l){l(d)})}return new(i||(i=Promise))(function(d,l){function c(m){try{f(a.next(m))}catch(b){l(b)}}function p(m){try{f(a.throw(m))}catch(b){l(b)}}function f(m){m.done?d(m.value):s(m.value).then(c,p)}f((a=a.apply(t,[])).next())})}function R1(t,r){var i={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},a,s,d,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(m){return p([f,m])}}function p(f){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,s&&(d=f[0]&2?s.return:f[0]?s.throw||((d=s.return)&&d.call(s),0):s.next)&&!(d=d.call(s,f[1])).done)return d;switch(s=0,d&&(f=[f[0]&2,d.value]),f[0]){case 0:case 1:d=f;break;case 4:return i.label++,{value:f[1],done:!1};case 5:i.label++,s=f[1],f=[0];continue;case 7:f=i.ops.pop(),i.trys.pop();continue;default:if(d=i.trys,!(d=d.length>0&&d[d.length-1])&&(f[0]===6||f[0]===2)){i=0;continue}if(f[0]===3&&(!d||f[1]>d[0]&&f[1]<d[3])){i.label=f[1];break}if(f[0]===6&&i.label<d[1]){i.label=d[1],d=f;break}if(d&&i.label<d[2]){i.label=d[2],i.ops.push(f);break}d[2]&&i.ops.pop(),i.trys.pop();continue}f=r.call(t,i)}catch(m){f=[6,m],s=0}finally{a=d=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Rs=function(){},sa=Rs(),Jp=Object,_a=function(t){return t===sa},Pu=function(t){return typeof t=="function"},Cl=function(t,r){return Jp.assign({},t,r)},Zv="undefined",eb=function(){return typeof window!=Zv},VC=function(){return typeof document!=Zv},KC=function(){return eb()&&typeof window.requestAnimationFrame!=Zv},wy=new WeakMap,GC=0,tg=function(t){var r=typeof t,i=t&&t.constructor,a=i==Date,s,d;if(Jp(t)===t&&!a&&i!=RegExp){if(s=wy.get(t),s)return s;if(s=++GC+"~",wy.set(t,s),i==Array){for(s="@",d=0;d<t.length;d++)s+=tg(t[d])+",";wy.set(t,s)}if(i==Jp){s="#";for(var l=Jp.keys(t).sort();!_a(d=l.pop());)_a(t[d])||(s+=d+":"+tg(t[d])+",");wy.set(t,s)}}else s=a?t.toJSON():r=="symbol"?t.toString():r=="string"?JSON.stringify(t):""+t;return s},av=!0,$C=function(){return av},x1=eb(),tb=VC(),ov=x1&&window.addEventListener?window.addEventListener.bind(window):Rs,qC=tb?document.addEventListener.bind(document):Rs,sv=x1&&window.removeEventListener?window.removeEventListener.bind(window):Rs,zC=tb?document.removeEventListener.bind(document):Rs,WC=function(){var t=tb&&document.visibilityState;return _a(t)||t!=="hidden"},JC=function(t){return qC("visibilitychange",t),ov("focus",t),function(){zC("visibilitychange",t),sv("focus",t)}},YC=function(t){var r=function(){av=!0,t()},i=function(){av=!1};return ov("online",r),ov("offline",i),function(){sv("online",r),sv("offline",i)}},QC={isOnline:$C,isVisible:WC},XC={initFocus:JC,initReconnect:YC},im=!eb()||"Deno"in window,ZC=function(t){return KC()?window.requestAnimationFrame(t):setTimeout(t,1)},Yp=im?St.useEffect:St.useLayoutEffect,B0=typeof navigator<"u"&&navigator.connection,cS=!im&&B0&&(["slow-2g","2g"].includes(B0.effectiveType)||B0.saveData),rb=function(t){if(Pu(t))try{t=t()}catch{t=""}var r=[].concat(t);t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?tg(t):"";var i=t?"$swr$"+t:"";return[t,r,i]},of=new WeakMap,T1=0,C1=1,O1=2,Qp=function(t,r,i,a,s,d,l){l===void 0&&(l=!0);var c=of.get(t),p=c[0],f=c[1],m=c[3],b=p[r],_=f[r];if(l&&_)for(var A=0;A<_.length;++A)_[A](i,a,s);return d&&(delete m[r],b&&b[0])?b[0](O1).then(function(){return t.get(r)}):t.get(r)},e2=0,lv=function(){return++e2},P1=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return A1(void 0,void 0,void 0,function(){var i,a,s,d,l,c,p,f,m,b,_,A,T,x,P,R,F,I,$,B,W;return R1(this,function(Y){switch(Y.label){case 0:if(i=t[0],a=t[1],s=t[2],d=t[3],l=typeof d=="boolean"?{revalidate:d}:d||{},c=_a(l.populateCache)?!0:l.populateCache,p=l.revalidate!==!1,f=l.rollbackOnError!==!1,m=l.optimisticData,b=rb(a),_=b[0],A=b[2],!_)return[2];if(T=of.get(i),x=T[2],t.length<3)return[2,Qp(i,_,i.get(_),sa,sa,p,!0)];if(P=s,F=lv(),x[_]=[F,0],I=!_a(m),$=i.get(_),I&&(B=Pu(m)?m($):m,i.set(_,B),Qp(i,_,B)),Pu(P))try{P=P(i.get(_))}catch(q){R=q}return P&&Pu(P.then)?[4,P.catch(function(q){R=q})]:[3,2];case 1:if(P=Y.sent(),F!==x[_][0]){if(R)throw R;return[2,P]}else R&&I&&f&&(c=!0,P=$,i.set(_,$));Y.label=2;case 2:return c&&(R||(Pu(c)&&(P=c(P,$)),i.set(_,P)),i.set(A,Cl(i.get(A),{error:R}))),x[_][1]=lv(),[4,Qp(i,_,P,R,sa,p,!!c)];case 3:if(W=Y.sent(),R)throw R;return[2,c?W:P]}})})},fS=function(t,r){for(var i in t)t[i][0]&&t[i][0](r)},I1=function(t,r){if(!of.has(t)){var i=Cl(XC,r),a={},s=P1.bind(sa,t),d=Rs;if(of.set(t,[a,{},{},{},s]),!im){var l=i.initFocus(setTimeout.bind(sa,fS.bind(sa,a,T1))),c=i.initReconnect(setTimeout.bind(sa,fS.bind(sa,a,C1)));d=function(){l&&l(),c&&c(),of.delete(t)}}return[t,s,d]}return[t,of.get(t)[4]]},t2=function(t,r,i,a,s){var d=i.errorRetryCount,l=s.retryCount,c=~~((Math.random()+.5)*(1<<(l<8?l:8)))*i.errorRetryInterval;!_a(d)&&l>d||setTimeout(a,c,s)},N1=I1(new Map),F1=N1[0],D1=N1[1],U1=Cl({onLoadingSlow:Rs,onSuccess:Rs,onError:Rs,onErrorRetry:t2,onDiscarded:Rs,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:cS?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:cS?5e3:3e3,compare:function(t,r){return tg(t)==tg(r)},isPaused:function(){return!1},cache:F1,mutate:D1,fallback:{}},QC),L1=function(t,r){var i=Cl(t,r);if(r){var a=t.use,s=t.fallback,d=r.use,l=r.fallback;a&&d&&(i.use=a.concat(d)),s&&l&&(i.fallback=Cl(s,l))}return i},uv=St.createContext({}),r2=function(t){var r=t.value,i=L1(St.useContext(uv),r),a=r&&r.provider,s=St.useState(function(){return a?I1(a(i.cache||F1),r):sa})[0];return s&&(i.cache=s[0],i.mutate=s[1]),Yp(function(){return s?s[2]:sa},[]),St.createElement(uv.Provider,Cl(t,{value:i}))},n2=function(t,r){var i=St.useState({})[1],a=St.useRef(t),s=St.useRef({data:!1,error:!1,isValidating:!1}),d=St.useCallback(function(l){var c=!1,p=a.current;for(var f in l){var m=f;p[m]!==l[m]&&(p[m]=l[m],s.current[m]&&(c=!0))}c&&!r.current&&i({})},[]);return Yp(function(){a.current=t}),[a,s.current,d]},i2=function(t){return Pu(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}]},M1=function(){return Cl(U1,St.useContext(uv))},a2=function(t){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=M1(),d=i2(i),l=d[0],c=d[1],p=d[2],f=L1(s,p),m=t,b=f.use;if(b)for(var _=b.length;_-- >0;)m=b[_](m);return m(l,c||f.fetcher,f)}},dS=function(t,r,i){var a=r[t]||(r[t]=[]);return a.push(i),function(){var s=a.indexOf(i);s>=0&&(a[s]=a[a.length-1],a.pop())}},H0={dedupe:!0},o2=function(t,r,i){var a=i.cache,s=i.compare,d=i.fallbackData,l=i.suspense,c=i.revalidateOnMount,p=i.refreshInterval,f=i.refreshWhenHidden,m=i.refreshWhenOffline,b=of.get(a),_=b[0],A=b[1],T=b[2],x=b[3],P=rb(t),R=P[0],F=P[1],I=P[2],$=St.useRef(!1),B=St.useRef(!1),W=St.useRef(R),Y=St.useRef(r),q=St.useRef(i),Ie=function(){return q.current},K=function(){return Ie().isVisible()&&Ie().isOnline()},ie=function(Me){return a.set(I,Cl(a.get(I),Me))},ge=a.get(R),Se=_a(d)?i.fallback[R]:d,et=_a(ge)?Se:ge,st=a.get(I)||{},Ne=st.error,gt=!$.current,ve=function(){return gt&&!_a(c)?c:Ie().isPaused()?!1:l?_a(et)?!1:i.revalidateIfStale:_a(et)||i.revalidateIfStale},tt=function(){return!R||!r?!1:st.isValidating?!0:gt&&ve()},J=tt(),xe=n2({data:et,error:Ne,isValidating:J},B),Xe=xe[0],je=xe[1],dt=xe[2],It=St.useCallback(function(Me){return A1(void 0,void 0,void 0,function(){var le,Te,Je,se,M,D,G,re,we,Ce,at,Re,ht;return R1(this,function(Ct){switch(Ct.label){case 0:if(le=Y.current,!R||!le||B.current||Ie().isPaused())return[2,!1];se=!0,M=Me||{},D=!x[R]||!M.dedupe,G=function(){return!B.current&&R===W.current&&$.current},re=function(){var vt=x[R];vt&&vt[1]===Je&&delete x[R]},we={isValidating:!1},Ce=function(){ie({isValidating:!1}),G()&&dt(we)},ie({isValidating:!0}),dt({isValidating:!0}),Ct.label=1;case 1:return Ct.trys.push([1,3,,4]),D&&(Qp(a,R,Xe.current.data,Xe.current.error,!0),i.loadingTimeout&&!a.get(R)&&setTimeout(function(){se&&G()&&Ie().onLoadingSlow(R,i)},i.loadingTimeout),x[R]=[le.apply(void 0,F),lv()]),ht=x[R],Te=ht[0],Je=ht[1],[4,Te];case 2:return Te=Ct.sent(),D&&setTimeout(re,i.dedupingInterval),!x[R]||x[R][1]!==Je?(D&&G()&&Ie().onDiscarded(R),[2,!1]):(ie({error:sa}),we.error=sa,at=T[R],!_a(at)&&(Je<=at[0]||Je<=at[1]||at[1]===0)?(Ce(),D&&G()&&Ie().onDiscarded(R),[2,!1]):(s(Xe.current.data,Te)?we.data=Xe.current.data:we.data=Te,s(a.get(R),Te)||a.set(R,Te),D&&G()&&Ie().onSuccess(Te,R,i),[3,4]));case 3:return Re=Ct.sent(),re(),Ie().isPaused()||(ie({error:Re}),we.error=Re,D&&G()&&(Ie().onError(Re,R,i),(typeof i.shouldRetryOnError=="boolean"&&i.shouldRetryOnError||Pu(i.shouldRetryOnError)&&i.shouldRetryOnError(Re))&&K()&&Ie().onErrorRetry(Re,R,i,It,{retryCount:(M.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return se=!1,Ce(),G()&&D&&Qp(a,R,we.data,we.error,!1),[2,!0]}})})},[R]),Mt=St.useCallback(P1.bind(sa,a,function(){return W.current}),[]);if(Yp(function(){Y.current=r,q.current=i}),Yp(function(){if(R){var Me=R!==W.current,le=It.bind(sa,H0),Te=function(G,re,we){dt(Cl({error:re,isValidating:we},s(Xe.current.data,G)?sa:{data:G}))},Je=0,se=function(G){if(G==T1){var re=Date.now();Ie().revalidateOnFocus&&re>Je&&K()&&(Je=re+Ie().focusThrottleInterval,le())}else if(G==C1)Ie().revalidateOnReconnect&&K()&&le();else if(G==O1)return It()},M=dS(R,A,Te),D=dS(R,_,se);return B.current=!1,W.current=R,$.current=!0,Me&&dt({data:et,error:Ne,isValidating:J}),ve()&&(_a(et)||im?le():ZC(le)),function(){B.current=!0,M(),D()}}},[R,It]),Yp(function(){var Me;function le(){var Je=Pu(p)?p(et):p;Je&&Me!==-1&&(Me=setTimeout(Te,Je))}function Te(){!Xe.current.error&&(f||Ie().isVisible())&&(m||Ie().isOnline())?It(H0).then(le):le()}return le(),function(){Me&&(clearTimeout(Me),Me=-1)}},[p,f,m,It]),St.useDebugValue(et),l&&_a(et)&&R)throw Y.current=r,q.current=i,B.current=!1,_a(Ne)?It(H0):Ne;return{mutate:Mt,get data(){return je.data=!0,et},get error(){return je.error=!0,Ne},get isValidating(){return je.isValidating=!0,J}}},s2=Jp.defineProperty(r2,"default",{value:U1}),l2=function(t){return rb(t)[0]},u2=a2(o2);const c2=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:s2,default:u2,mutate:D1,unstable_serialize:l2,useSWRConfig:M1},Symbol.toStringTag,{value:"Module"})),f2=Ky(c2);var j0={exports:{}},zp={exports:{}},d2=zp.exports,hS;function h2(){return hS||(hS=1,function(t,r){(function(i,a){a(r,ag())})(d2,function(i,a){function s(U,te,ne,fe,Ue,ye,He){try{var Rt=U[ye](He),bt=Rt.value}catch(Ot){return void ne(Ot)}Rt.done?te(bt):Promise.resolve(bt).then(fe,Ue)}function d(U){return function(){var te=this,ne=arguments;return new Promise(function(fe,Ue){var ye=U.apply(te,ne);function He(bt){s(ye,fe,Ue,He,Rt,"next",bt)}function Rt(bt){s(ye,fe,Ue,He,Rt,"throw",bt)}He(void 0)})}}function l(){return(l=Object.assign||function(U){for(var te=1;te<arguments.length;te++){var ne=arguments[te];for(var fe in ne)Object.prototype.hasOwnProperty.call(ne,fe)&&(U[fe]=ne[fe])}return U}).apply(this,arguments)}function c(U,te){if(U==null)return{};var ne,fe,Ue={},ye=Object.keys(U);for(fe=0;fe<ye.length;fe++)ne=ye[fe],te.indexOf(ne)>=0||(Ue[ne]=U[ne]);return Ue}function p(U){var te=function(ne,fe){if(typeof ne!="object"||ne===null)return ne;var Ue=ne[Symbol.toPrimitive];if(Ue!==void 0){var ye=Ue.call(ne,fe);if(typeof ye!="object")return ye;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ne)}(U,"string");return typeof te=="symbol"?te:String(te)}a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var f={init:"init"},m=function(U){var te=U.value;return te===void 0?"":te},b=function(){return a.createElement(a.Fragment,null," ")},_={Cell:m,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function A(){for(var U=arguments.length,te=new Array(U),ne=0;ne<U;ne++)te[ne]=arguments[ne];return te.reduce(function(fe,Ue){var ye=Ue.style,He=Ue.className;return fe=l({},fe,{},c(Ue,["style","className"])),ye&&(fe.style=fe.style?l({},fe.style||{},{},ye||{}):ye),He&&(fe.className=fe.className?fe.className+" "+He:He),fe.className===""&&delete fe.className,fe},{})}var T=function(U,te){return te===void 0&&(te={}),function(ne){return ne===void 0&&(ne={}),[].concat(U,[ne]).reduce(function(fe,Ue){return function ye(He,Rt,bt){return typeof Rt=="function"?ye({},Rt(He,bt)):Array.isArray(Rt)?A.apply(void 0,[He].concat(Rt)):A(He,Rt)}(fe,Ue,l({},te,{userProps:ne}))},{})}},x=function(U,te,ne,fe){return ne===void 0&&(ne={}),U.reduce(function(Ue,ye){return ye(Ue,ne)},te)},P=function(U,te,ne){return ne===void 0&&(ne={}),U.forEach(function(fe){fe(te,ne)})};function R(U,te,ne,fe){U.findIndex(function(Ue){return Ue.pluginName===ne}),te.forEach(function(Ue){U.findIndex(function(ye){return ye.pluginName===Ue})})}function F(U,te){return typeof U=="function"?U(te):U}function I(U){var te=a.useRef();return te.current=U,a.useCallback(function(){return te.current},[])}var $=typeof document<"u"?a.useLayoutEffect:a.useEffect;function B(U,te){var ne=a.useRef(!1);$(function(){ne.current&&U(),ne.current=!0},te)}function W(U,te,ne){return ne===void 0&&(ne={}),function(fe,Ue){Ue===void 0&&(Ue={});var ye=typeof fe=="string"?te[fe]:fe;if(ye===void 0)throw console.info(te),new Error("Renderer Error ☝️");return Y(ye,l({},U,{column:te},ne,{},Ue))}}function Y(U,te){return function(fe){return typeof fe=="function"&&(Ue=Object.getPrototypeOf(fe)).prototype&&Ue.prototype.isReactComponent;var Ue}(ne=U)||typeof ne=="function"||function(fe){return typeof fe=="object"&&typeof fe.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(fe.$$typeof.description)}(ne)?a.createElement(U,te):U;var ne}function q(U,te,ne){return ne===void 0&&(ne=0),U.map(function(fe){return K(fe=l({},fe,{parent:te,depth:ne})),fe.columns&&(fe.columns=q(fe.columns,fe,ne+1)),fe})}function Ie(U){return Ne(U,"columns")}function K(U){var te=U.id,ne=U.accessor,fe=U.Header;if(typeof ne=="string"){te=te||ne;var Ue=ne.split(".");ne=function(ye){return function(He,Rt,bt){if(!Rt)return He;var Ot,$t=typeof Rt=="function"?Rt:JSON.stringify(Rt),jt=Se.get($t)||function(){var zt=function(Dt){return function Wt(nr,ur){if(ur===void 0&&(ur=[]),Array.isArray(nr))for(var vr=0;vr<nr.length;vr+=1)Wt(nr[vr],ur);else ur.push(nr);return ur}(Dt).map(function(Wt){return String(Wt).replace(".","_")}).join(".").replace(Xe,".").replace(je,"").split(".")}(Rt);return Se.set($t,zt),zt}();try{Ot=jt.reduce(function(zt,Dt){return zt[Dt]},He)}catch{}return Ot!==void 0?Ot:bt}(ye,Ue)}}if(!te&&typeof fe=="string"&&fe&&(te=fe),!te&&U.columns)throw console.error(U),new Error('A column ID (or unique "Header" value) is required!');if(!te)throw console.error(U),new Error("A column ID (or string accessor) is required!");return Object.assign(U,{id:te,accessor:ne}),U}function ie(U,te){if(!te)throw new Error;return Object.assign(U,l({Header:b,Footer:b},_,{},te,{},U)),Object.assign(U,{originalWidth:U.width}),U}function ge(U,te,ne){ne===void 0&&(ne=function(){return{}});for(var fe=[],Ue=U,ye=0,He=function(){return ye++},Rt=function(){var bt={headers:[]},Ot=[],$t=Ue.some(function(jt){return jt.parent});Ue.forEach(function(jt){var zt,Dt=[].concat(Ot).reverse()[0];$t&&(jt.parent?zt=l({},jt.parent,{originalId:jt.parent.id,id:jt.parent.id+"_"+He(),headers:[jt]},ne(jt)):zt=ie(l({originalId:jt.id+"_placeholder",id:jt.id+"_placeholder_"+He(),placeholderOf:jt,headers:[jt]},ne(jt)),te),Dt&&Dt.originalId===zt.originalId?Dt.headers.push(jt):Ot.push(zt)),bt.headers.push(jt)}),fe.push(bt),Ue=Ot};Ue.length;)Rt();return fe.reverse()}var Se=new Map;function et(){for(var U=arguments.length,te=new Array(U),ne=0;ne<U;ne++)te[ne]=arguments[ne];for(var fe=0;fe<te.length;fe+=1)if(te[fe]!==void 0)return te[fe]}function st(U){if(typeof U=="function")return U}function Ne(U,te){var ne=[];return function fe(Ue){Ue.forEach(function(ye){ye[te]?fe(ye[te]):ne.push(ye)})}(U),ne}function gt(U,te){var ne=te.manualExpandedKey,fe=te.expanded,Ue=te.expandSubRows,ye=Ue===void 0||Ue,He=[];return U.forEach(function(Rt){return function bt(Ot,$t){$t===void 0&&($t=!0),Ot.isExpanded=Ot.original&&Ot.original[ne]||fe[Ot.id],Ot.canExpand=Ot.subRows&&!!Ot.subRows.length,$t&&He.push(Ot),Ot.subRows&&Ot.subRows.length&&Ot.isExpanded&&Ot.subRows.forEach(function(jt){return bt(jt,ye)})}(Rt)}),He}function ve(U,te,ne){return st(U)||te[U]||ne[U]||ne.text}function tt(U,te,ne){return U?U(te,ne):te===void 0}function J(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var xe=null,Xe=/\[/g,je=/\]/g,dt=function(U){return l({role:"table"},U)},It=function(U){return l({role:"rowgroup"},U)},Mt=function(U,te){var ne=te.column;return l({key:"header_"+ne.id,colSpan:ne.totalVisibleHeaderCount,role:"columnheader"},U)},Me=function(U,te){var ne=te.column;return l({key:"footer_"+ne.id,colSpan:ne.totalVisibleHeaderCount},U)},le=function(U,te){return l({key:"headerGroup_"+te.index,role:"row"},U)},Te=function(U,te){return l({key:"footerGroup_"+te.index},U)},Je=function(U,te){return l({key:"row_"+te.row.id,role:"row"},U)},se=function(U,te){var ne=te.cell;return l({key:"cell_"+ne.row.id+"_"+ne.column.id,role:"cell"},U)};function M(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[dt],getTableBodyProps:[It],getHeaderGroupProps:[le],getFooterGroupProps:[Te],getHeaderProps:[Mt],getFooterProps:[Me],getRowProps:[Je],getCellProps:[se],useFinalInstance:[]}}f.resetHiddenColumns="resetHiddenColumns",f.toggleHideColumn="toggleHideColumn",f.setHiddenColumns="setHiddenColumns",f.toggleHideAllColumns="toggleHideAllColumns";var D=function(U){U.getToggleHiddenProps=[G],U.getToggleHideAllColumnsProps=[re],U.stateReducers.push(we),U.useInstanceBeforeDimensions.push(Ce),U.headerGroupsDeps.push(function(te,ne){var fe=ne.instance;return[].concat(te,[fe.state.hiddenColumns])}),U.useInstance.push(at)};D.pluginName="useColumnVisibility";var G=function(U,te){var ne=te.column;return[U,{onChange:function(fe){ne.toggleHidden(!fe.target.checked)},style:{cursor:"pointer"},checked:ne.isVisible,title:"Toggle Column Visible"}]},re=function(U,te){var ne=te.instance;return[U,{onChange:function(fe){ne.toggleHideAllColumns(!fe.target.checked)},style:{cursor:"pointer"},checked:!ne.allColumnsHidden&&!ne.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!ne.allColumnsHidden&&ne.state.hiddenColumns.length}]};function we(U,te,ne,fe){if(te.type===f.init)return l({hiddenColumns:[]},U);if(te.type===f.resetHiddenColumns)return l({},U,{hiddenColumns:fe.initialState.hiddenColumns||[]});if(te.type===f.toggleHideColumn){var Ue=(te.value!==void 0?te.value:!U.hiddenColumns.includes(te.columnId))?[].concat(U.hiddenColumns,[te.columnId]):U.hiddenColumns.filter(function(ye){return ye!==te.columnId});return l({},U,{hiddenColumns:Ue})}return te.type===f.setHiddenColumns?l({},U,{hiddenColumns:F(te.value,U.hiddenColumns)}):te.type===f.toggleHideAllColumns?l({},U,{hiddenColumns:(te.value!==void 0?te.value:!U.hiddenColumns.length)?fe.allColumns.map(function(ye){return ye.id}):[]}):void 0}function Ce(U){var te=U.headers,ne=U.state.hiddenColumns;a.useRef(!1).current;var fe=0;te.forEach(function(Ue){return fe+=function ye(He,Rt){He.isVisible=Rt&&!ne.includes(He.id);var bt=0;return He.headers&&He.headers.length?He.headers.forEach(function(Ot){return bt+=ye(Ot,He.isVisible)}):bt=He.isVisible?1:0,He.totalVisibleHeaderCount=bt,bt}(Ue,!0)})}function at(U){var te=U.columns,ne=U.flatHeaders,fe=U.dispatch,Ue=U.allColumns,ye=U.getHooks,He=U.state.hiddenColumns,Rt=U.autoResetHiddenColumns,bt=Rt===void 0||Rt,Ot=I(U),$t=Ue.length===He.length,jt=a.useCallback(function(ur,vr){return fe({type:f.toggleHideColumn,columnId:ur,value:vr})},[fe]),zt=a.useCallback(function(ur){return fe({type:f.setHiddenColumns,value:ur})},[fe]),Dt=a.useCallback(function(ur){return fe({type:f.toggleHideAllColumns,value:ur})},[fe]),Wt=T(ye().getToggleHideAllColumnsProps,{instance:Ot()});ne.forEach(function(ur){ur.toggleHidden=function(vr){fe({type:f.toggleHideColumn,columnId:ur.id,value:vr})},ur.getToggleHiddenProps=T(ye().getToggleHiddenProps,{instance:Ot(),column:ur})});var nr=I(bt);B(function(){nr()&&fe({type:f.resetHiddenColumns})},[fe,te]),Object.assign(U,{allColumnsHidden:$t,toggleHideColumn:jt,setHiddenColumns:zt,toggleHideAllColumns:Dt,getToggleHideAllColumnsProps:Wt})}var Re={},ht={},Ct=function(U,te,ne){return U},vt=function(U,te){return U.subRows||[]},We=function(U,te,ne){return""+(ne?[ne.id,te].join("."):te)},$e=function(U){return U};function Oe(U){var te=U.initialState,ne=te===void 0?Re:te,fe=U.defaultColumn,Ue=fe===void 0?ht:fe,ye=U.getSubRows,He=ye===void 0?vt:ye,Rt=U.getRowId,bt=Rt===void 0?We:Rt,Ot=U.stateReducer,$t=Ot===void 0?Ct:Ot,jt=U.useControlledState,zt=jt===void 0?$e:jt;return l({},c(U,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:ne,defaultColumn:Ue,getSubRows:He,getRowId:bt,stateReducer:$t,useControlledState:zt})}function lt(U,te){te===void 0&&(te=0);var ne=0,fe=0,Ue=0,ye=0;return U.forEach(function(He){var Rt=He.headers;if(He.totalLeft=te,Rt&&Rt.length){var bt=lt(Rt,te),Ot=bt[0],$t=bt[1],jt=bt[2],zt=bt[3];He.totalMinWidth=Ot,He.totalWidth=$t,He.totalMaxWidth=jt,He.totalFlexWidth=zt}else He.totalMinWidth=He.minWidth,He.totalWidth=Math.min(Math.max(He.minWidth,He.width),He.maxWidth),He.totalMaxWidth=He.maxWidth,He.totalFlexWidth=He.canResize?He.totalWidth:0;He.isVisible&&(te+=He.totalWidth,ne+=He.totalMinWidth,fe+=He.totalWidth,Ue+=He.totalMaxWidth,ye+=He.totalFlexWidth)}),[ne,fe,Ue,ye]}function Q(U){var te=U.data,ne=U.rows,fe=U.flatRows,Ue=U.rowsById,ye=U.column,He=U.getRowId,Rt=U.getSubRows,bt=U.accessValueHooks,Ot=U.getInstance;te.forEach(function($t,jt){return function zt(Dt,Wt,nr,ur,vr){nr===void 0&&(nr=0);var Kr=Dt,br=He(Dt,Wt,ur),Yt=Ue[br];if(Yt)Yt.subRows&&Yt.originalSubRows.forEach(function(dr,Lr){return zt(dr,Lr,nr+1,Yt)});else if((Yt={id:br,original:Kr,index:Wt,depth:nr,cells:[{}]}).cells.map=J,Yt.cells.filter=J,Yt.cells.forEach=J,Yt.cells[0].getCellProps=J,Yt.values={},vr.push(Yt),fe.push(Yt),Ue[br]=Yt,Yt.originalSubRows=Rt(Dt,Wt),Yt.originalSubRows){var Mr=[];Yt.originalSubRows.forEach(function(dr,Lr){return zt(dr,Lr,nr+1,Yt,Mr)}),Yt.subRows=Mr}ye.accessor&&(Yt.values[ye.id]=ye.accessor(Dt,Wt,Yt,vr,te)),Yt.values[ye.id]=x(bt,Yt.values[ye.id],{row:Yt,column:ye,instance:Ot()})}($t,jt,0,void 0,ne)})}f.resetExpanded="resetExpanded",f.toggleRowExpanded="toggleRowExpanded",f.toggleAllRowsExpanded="toggleAllRowsExpanded";var k=function(U){U.getToggleAllRowsExpandedProps=[V],U.getToggleRowExpandedProps=[j],U.stateReducers.push(qe),U.useInstance.push(Ze),U.prepareRow.push(ze)};k.pluginName="useExpanded";var V=function(U,te){var ne=te.instance;return[U,{onClick:function(fe){ne.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},j=function(U,te){var ne=te.row;return[U,{onClick:function(){ne.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function qe(U,te,ne,fe){if(te.type===f.init)return l({expanded:{}},U);if(te.type===f.resetExpanded)return l({},U,{expanded:fe.initialState.expanded||{}});if(te.type===f.toggleAllRowsExpanded){var Ue=te.value,ye=fe.rowsById,He=Object.keys(ye).length===Object.keys(U.expanded).length;if(Ue!==void 0?Ue:!He){var Rt={};return Object.keys(ye).forEach(function(Wt){Rt[Wt]=!0}),l({},U,{expanded:Rt})}return l({},U,{expanded:{}})}if(te.type===f.toggleRowExpanded){var bt,Ot=te.id,$t=te.value,jt=U.expanded[Ot],zt=$t!==void 0?$t:!jt;if(!jt&&zt)return l({},U,{expanded:l({},U.expanded,(bt={},bt[Ot]=!0,bt))});if(jt&&!zt){var Dt=U.expanded;return Dt[Ot],l({},U,{expanded:c(Dt,[Ot].map(p))})}return U}}function Ze(U){var te=U.data,ne=U.rows,fe=U.rowsById,Ue=U.manualExpandedKey,ye=Ue===void 0?"expanded":Ue,He=U.paginateExpandedRows,Rt=He===void 0||He,bt=U.expandSubRows,Ot=bt===void 0||bt,$t=U.autoResetExpanded,jt=$t===void 0||$t,zt=U.getHooks,Dt=U.plugins,Wt=U.state.expanded,nr=U.dispatch;R(Dt,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var ur=I(jt),vr=!!(Object.keys(fe).length&&Object.keys(Wt).length);vr&&Object.keys(fe).some(function(zr){return!Wt[zr]})&&(vr=!1),B(function(){ur()&&nr({type:f.resetExpanded})},[nr,te]);var Kr=a.useCallback(function(zr,Ft){nr({type:f.toggleRowExpanded,id:zr,value:Ft})},[nr]),br=a.useCallback(function(zr){return nr({type:f.toggleAllRowsExpanded,value:zr})},[nr]),Yt=a.useMemo(function(){return Rt?gt(ne,{manualExpandedKey:ye,expanded:Wt,expandSubRows:Ot}):ne},[Rt,ne,ye,Wt,Ot]),Mr=a.useMemo(function(){return function(zr){var Ft=0;return Object.keys(zr).forEach(function(Or){var yn=Or.split(".");Ft=Math.max(Ft,yn.length)}),Ft}(Wt)},[Wt]),dr=I(U),Lr=T(zt().getToggleAllRowsExpandedProps,{instance:dr()});Object.assign(U,{preExpandedRows:ne,expandedRows:Yt,rows:Yt,expandedDepth:Mr,isAllRowsExpanded:vr,toggleRowExpanded:Kr,toggleAllRowsExpanded:br,getToggleAllRowsExpandedProps:Lr})}function ze(U,te){var ne=te.instance.getHooks,fe=te.instance;U.toggleRowExpanded=function(Ue){return fe.toggleRowExpanded(U.id,Ue)},U.getToggleRowExpandedProps=T(ne().getToggleRowExpandedProps,{instance:fe,row:U})}var Jt=function(U,te,ne){return U=U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return String(ye).toLowerCase().includes(String(ne).toLowerCase())})})};Jt.autoRemove=function(U){return!U};var kr=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return ye===void 0||String(ye).toLowerCase()===String(ne).toLowerCase()})})};kr.autoRemove=function(U){return!U};var Hr=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return ye===void 0||String(ye)===String(ne)})})};Hr.autoRemove=function(U){return!U};var ar=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){return fe.values[Ue].includes(ne)})})};ar.autoRemove=function(U){return!U||!U.length};var Ke=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return ye&&ye.length&&ne.every(function(He){return ye.includes(He)})})})};Ke.autoRemove=function(U){return!U||!U.length};var mt=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return ye&&ye.length&&ne.some(function(He){return ye.includes(He)})})})};mt.autoRemove=function(U){return!U||!U.length};var ot=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return ne.includes(ye)})})};ot.autoRemove=function(U){return!U||!U.length};var Le=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){return fe.values[Ue]===ne})})};Le.autoRemove=function(U){return U===void 0};var ct=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){return fe.values[Ue]==ne})})};ct.autoRemove=function(U){return U==null};var Qt=function(U,te,ne){var fe=ne||[],Ue=fe[0],ye=fe[1];if((Ue=typeof Ue=="number"?Ue:-1/0)>(ye=typeof ye=="number"?ye:1/0)){var He=Ue;Ue=ye,ye=He}return U.filter(function(Rt){return te.some(function(bt){var Ot=Rt.values[bt];return Ot>=Ue&&Ot<=ye})})};Qt.autoRemove=function(U){return!U||typeof U[0]!="number"&&typeof U[1]!="number"};var qt=Object.freeze({__proto__:null,text:Jt,exactText:kr,exactTextCase:Hr,includes:ar,includesAll:Ke,includesSome:mt,includesValue:ot,exact:Le,equals:ct,between:Qt});f.resetFilters="resetFilters",f.setFilter="setFilter",f.setAllFilters="setAllFilters";var er=function(U){U.stateReducers.push(Ht),U.useInstance.push(ue)};function Ht(U,te,ne,fe){if(te.type===f.init)return l({filters:[]},U);if(te.type===f.resetFilters)return l({},U,{filters:fe.initialState.filters||[]});if(te.type===f.setFilter){var Ue=te.columnId,ye=te.filterValue,He=fe.allColumns,Rt=fe.filterTypes,bt=He.find(function(nr){return nr.id===Ue});if(!bt)throw new Error("React-Table: Could not find a column with id: "+Ue);var Ot=ve(bt.filter,Rt||{},qt),$t=U.filters.find(function(nr){return nr.id===Ue}),jt=F(ye,$t&&$t.value);return tt(Ot.autoRemove,jt,bt)?l({},U,{filters:U.filters.filter(function(nr){return nr.id!==Ue})}):l({},U,$t?{filters:U.filters.map(function(nr){return nr.id===Ue?{id:Ue,value:jt}:nr})}:{filters:[].concat(U.filters,[{id:Ue,value:jt}])})}if(te.type===f.setAllFilters){var zt=te.filters,Dt=fe.allColumns,Wt=fe.filterTypes;return l({},U,{filters:F(zt,U.filters).filter(function(nr){var ur=Dt.find(function(vr){return vr.id===nr.id});return!tt(ve(ur.filter,Wt||{},qt).autoRemove,nr.value,ur)})})}}function ue(U){var te=U.data,ne=U.rows,fe=U.flatRows,Ue=U.rowsById,ye=U.allColumns,He=U.filterTypes,Rt=U.manualFilters,bt=U.defaultCanFilter,Ot=bt!==void 0&&bt,$t=U.disableFilters,jt=U.state.filters,zt=U.dispatch,Dt=U.autoResetFilters,Wt=Dt===void 0||Dt,nr=a.useCallback(function(dr,Lr){zt({type:f.setFilter,columnId:dr,filterValue:Lr})},[zt]),ur=a.useCallback(function(dr){zt({type:f.setAllFilters,filters:dr})},[zt]);ye.forEach(function(dr){var Lr=dr.id,zr=dr.accessor,Ft=dr.defaultCanFilter,Or=dr.disableFilters;dr.canFilter=zr?et(Or!==!0&&void 0,$t!==!0&&void 0,!0):et(Ft,Ot,!1),dr.setFilter=function(Ur){return nr(dr.id,Ur)};var yn=jt.find(function(Ur){return Ur.id===Lr});dr.filterValue=yn&&yn.value});var vr=a.useMemo(function(){if(Rt||!jt.length)return[ne,fe,Ue];var dr=[],Lr={};return[function zr(Ft,Or){Or===void 0&&(Or=0);var yn=Ft;return(yn=jt.reduce(function(Ur,dn){var sn=dn.id,On=dn.value,wr=ye.find(function(zn){return zn.id===sn});if(!wr)return Ur;Or===0&&(wr.preFilteredRows=Ur);var jr=ve(wr.filter,He||{},qt);return jr?(wr.filteredRows=jr(Ur,[sn],On),wr.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+wr.id+"."),Ur)},Ft)).forEach(function(Ur){dr.push(Ur),Lr[Ur.id]=Ur,Ur.subRows&&(Ur.subRows=Ur.subRows&&Ur.subRows.length>0?zr(Ur.subRows,Or+1):Ur.subRows)}),yn}(ne),dr,Lr]},[Rt,jt,ne,fe,Ue,ye,He]),Kr=vr[0],br=vr[1],Yt=vr[2];a.useMemo(function(){ye.filter(function(dr){return!jt.find(function(Lr){return Lr.id===dr.id})}).forEach(function(dr){dr.preFilteredRows=Kr,dr.filteredRows=Kr})},[Kr,jt,ye]);var Mr=I(Wt);B(function(){Mr()&&zt({type:f.resetFilters})},[zt,Rt?null:te]),Object.assign(U,{preFilteredRows:ne,preFilteredFlatRows:fe,preFilteredRowsById:Ue,filteredRows:Kr,filteredFlatRows:br,filteredRowsById:Yt,rows:Kr,flatRows:br,rowsById:Yt,setFilter:nr,setAllFilters:ur})}er.pluginName="useFilters",f.resetGlobalFilter="resetGlobalFilter",f.setGlobalFilter="setGlobalFilter";var pe=function(U){U.stateReducers.push(Tt),U.useInstance.push(xt)};function Tt(U,te,ne,fe){if(te.type===f.resetGlobalFilter)return l({},U,{globalFilter:fe.initialState.globalFilter||void 0});if(te.type===f.setGlobalFilter){var Ue=te.filterValue,ye=fe.userFilterTypes,He=ve(fe.globalFilter,ye||{},qt),Rt=F(Ue,U.globalFilter);return tt(He.autoRemove,Rt)?(U.globalFilter,c(U,["globalFilter"])):l({},U,{globalFilter:Rt})}}function xt(U){var te=U.data,ne=U.rows,fe=U.flatRows,Ue=U.rowsById,ye=U.allColumns,He=U.filterTypes,Rt=U.globalFilter,bt=U.manualGlobalFilter,Ot=U.state.globalFilter,$t=U.dispatch,jt=U.autoResetGlobalFilter,zt=jt===void 0||jt,Dt=U.disableGlobalFilter,Wt=a.useCallback(function(Yt){$t({type:f.setGlobalFilter,filterValue:Yt})},[$t]),nr=a.useMemo(function(){if(bt||Ot===void 0)return[ne,fe,Ue];var Yt=[],Mr={},dr=ve(Rt,He||{},qt);if(!dr)return console.warn("Could not find a valid 'globalFilter' option."),ne;ye.forEach(function(zr){var Ft=zr.disableGlobalFilter;zr.canFilter=et(Ft!==!0&&void 0,Dt!==!0&&void 0,!0)});var Lr=ye.filter(function(zr){return zr.canFilter===!0});return[function zr(Ft){return(Ft=dr(Ft,Lr.map(function(Or){return Or.id}),Ot)).forEach(function(Or){Yt.push(Or),Mr[Or.id]=Or,Or.subRows=Or.subRows&&Or.subRows.length?zr(Or.subRows):Or.subRows}),Ft}(ne),Yt,Mr]},[bt,Ot,Rt,He,ye,ne,fe,Ue,Dt]),ur=nr[0],vr=nr[1],Kr=nr[2],br=I(zt);B(function(){br()&&$t({type:f.resetGlobalFilter})},[$t,bt?null:te]),Object.assign(U,{preGlobalFilteredRows:ne,preGlobalFilteredFlatRows:fe,preGlobalFilteredRowsById:Ue,globalFilteredRows:ur,globalFilteredFlatRows:vr,globalFilteredRowsById:Kr,rows:ur,flatRows:vr,rowsById:Kr,setGlobalFilter:Wt,disableGlobalFilter:Dt})}function Pt(U,te){return te.reduce(function(ne,fe){return ne+(typeof fe=="number"?fe:0)},0)}pe.pluginName="useGlobalFilter";var Xt=Object.freeze({__proto__:null,sum:Pt,min:function(U){var te=U[0]||0;return U.forEach(function(ne){typeof ne=="number"&&(te=Math.min(te,ne))}),te},max:function(U){var te=U[0]||0;return U.forEach(function(ne){typeof ne=="number"&&(te=Math.max(te,ne))}),te},minMax:function(U){var te=U[0]||0,ne=U[0]||0;return U.forEach(function(fe){typeof fe=="number"&&(te=Math.min(te,fe),ne=Math.max(ne,fe))}),te+".."+ne},average:function(U){return Pt(0,U)/U.length},median:function(U){if(!U.length)return null;var te=Math.floor(U.length/2),ne=[].concat(U).sort(function(fe,Ue){return fe-Ue});return U.length%2!=0?ne[te]:(ne[te-1]+ne[te])/2},unique:function(U){return Array.from(new Set(U).values())},uniqueCount:function(U){return new Set(U).size},count:function(U){return U.length}}),tr=[],Nr={};f.resetGroupBy="resetGroupBy",f.setGroupBy="setGroupBy",f.toggleGroupBy="toggleGroupBy";var Vt=function(U){U.getGroupByToggleProps=[Zt],U.stateReducers.push(yr),U.visibleColumnsDeps.push(function(te,ne){var fe=ne.instance;return[].concat(te,[fe.state.groupBy])}),U.visibleColumns.push(ir),U.useInstance.push(Er),U.prepareRow.push(Gr)};Vt.pluginName="useGroupBy";var Zt=function(U,te){var ne=te.header;return[U,{onClick:ne.canGroupBy?function(fe){fe.persist(),ne.toggleGroupBy()}:void 0,style:{cursor:ne.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function yr(U,te,ne,fe){if(te.type===f.init)return l({groupBy:[]},U);if(te.type===f.resetGroupBy)return l({},U,{groupBy:fe.initialState.groupBy||[]});if(te.type===f.setGroupBy)return l({},U,{groupBy:te.value});if(te.type===f.toggleGroupBy){var Ue=te.columnId,ye=te.value,He=ye!==void 0?ye:!U.groupBy.includes(Ue);return l({},U,He?{groupBy:[].concat(U.groupBy,[Ue])}:{groupBy:U.groupBy.filter(function(Rt){return Rt!==Ue})})}}function ir(U,te){var ne=te.instance.state.groupBy,fe=ne.map(function(ye){return U.find(function(He){return He.id===ye})}).filter(Boolean),Ue=U.filter(function(ye){return!ne.includes(ye.id)});return(U=[].concat(fe,Ue)).forEach(function(ye){ye.isGrouped=ne.includes(ye.id),ye.groupedIndex=ne.indexOf(ye.id)}),U}var Fr={};function Er(U){var te=U.data,ne=U.rows,fe=U.flatRows,Ue=U.rowsById,ye=U.allColumns,He=U.flatHeaders,Rt=U.groupByFn,bt=Rt===void 0?pr:Rt,Ot=U.manualGroupBy,$t=U.aggregations,jt=$t===void 0?Fr:$t,zt=U.plugins,Dt=U.state.groupBy,Wt=U.dispatch,nr=U.autoResetGroupBy,ur=nr===void 0||nr,vr=U.disableGroupBy,Kr=U.defaultCanGroupBy,br=U.getHooks;R(zt,["useColumnOrder","useFilters"],"useGroupBy");var Yt=I(U);ye.forEach(function(wr){var jr=wr.accessor,zn=wr.defaultGroupBy,di=wr.disableGroupBy;wr.canGroupBy=jr?et(wr.canGroupBy,di!==!0&&void 0,vr!==!0&&void 0,!0):et(wr.canGroupBy,zn,Kr,!1),wr.canGroupBy&&(wr.toggleGroupBy=function(){return U.toggleGroupBy(wr.id)}),wr.Aggregated=wr.Aggregated||wr.Cell});var Mr=a.useCallback(function(wr,jr){Wt({type:f.toggleGroupBy,columnId:wr,value:jr})},[Wt]),dr=a.useCallback(function(wr){Wt({type:f.setGroupBy,value:wr})},[Wt]);He.forEach(function(wr){wr.getGroupByToggleProps=T(br().getGroupByToggleProps,{instance:Yt(),header:wr})});var Lr=a.useMemo(function(){if(Ot||!Dt.length)return[ne,fe,Ue,tr,Nr,fe,Ue];var wr=Dt.filter(function(Vn){return ye.find(function(rn){return rn.id===Vn})}),jr=[],zn={},di=[],xr={},kn=[],Un={},Qr=function Vn(rn,Ta,Mu){if(Ta===void 0&&(Ta=0),Ta===wr.length)return rn.map(function(qa){return l({},qa,{depth:Ta})});var Ps=wr[Ta],ku=bt(rn,Ps);return Object.entries(ku).map(function(qa,Qo){var ff=qa[0],ca=qa[1],Io=Ps+":"+ff,Il=Vn(ca,Ta+1,Io=Mu?Mu+">"+Io:Io),Is=Ta?Ne(ca,"leafRows"):ca,za=function(hn,Ns,df){var Fs={};return ye.forEach(function(ti){if(wr.includes(ti.id))Fs[ti.id]=Ns[0]?Ns[0].values[ti.id]:null;else{var Bu=typeof ti.aggregate=="function"?ti.aggregate:jt[ti.aggregate]||Xt[ti.aggregate];if(Bu){var hf=Ns.map(function(Wa){return Wa.values[ti.id]}),xi=hn.map(function(Wa){var Ds=Wa.values[ti.id];if(!df&&ti.aggregateValue){var Nl=typeof ti.aggregateValue=="function"?ti.aggregateValue:jt[ti.aggregateValue]||Xt[ti.aggregateValue];if(!Nl)throw console.info({column:ti}),new Error("React Table: Invalid column.aggregateValue option for column listed above");Ds=Nl(Ds,Wa,ti)}return Ds});Fs[ti.id]=Bu(xi,hf)}else{if(ti.aggregate)throw console.info({column:ti}),new Error("React Table: Invalid column.aggregate option for column listed above");Fs[ti.id]=null}}}),Fs}(Is,ca,Ta),Ca={id:Io,isGrouped:!0,groupByID:Ps,groupByVal:ff,values:za,subRows:Il,leafRows:Is,depth:Ta,index:Qo};return Il.forEach(function(hn){jr.push(hn),zn[hn.id]=hn,hn.isGrouped?(di.push(hn),xr[hn.id]=hn):(kn.push(hn),Un[hn.id]=hn)}),Ca})}(ne);return Qr.forEach(function(Vn){jr.push(Vn),zn[Vn.id]=Vn,Vn.isGrouped?(di.push(Vn),xr[Vn.id]=Vn):(kn.push(Vn),Un[Vn.id]=Vn)}),[Qr,jr,zn,di,xr,kn,Un]},[Ot,Dt,ne,fe,Ue,ye,jt,bt]),zr=Lr[0],Ft=Lr[1],Or=Lr[2],yn=Lr[3],Ur=Lr[4],dn=Lr[5],sn=Lr[6],On=I(ur);B(function(){On()&&Wt({type:f.resetGroupBy})},[Wt,Ot?null:te]),Object.assign(U,{preGroupedRows:ne,preGroupedFlatRow:fe,preGroupedRowsById:Ue,groupedRows:zr,groupedFlatRows:Ft,groupedRowsById:Or,onlyGroupedFlatRows:yn,onlyGroupedRowsById:Ur,nonGroupedFlatRows:dn,nonGroupedRowsById:sn,rows:zr,flatRows:Ft,rowsById:Or,toggleGroupBy:Mr,setGroupBy:dr})}function Gr(U){U.allCells.forEach(function(te){var ne;te.isGrouped=te.column.isGrouped&&te.column.id===U.groupByID,te.isPlaceholder=!te.isGrouped&&te.column.isGrouped,te.isAggregated=!te.isGrouped&&!te.isPlaceholder&&((ne=U.subRows)==null?void 0:ne.length)})}function pr(U,te){return U.reduce(function(ne,fe,Ue){var ye=""+fe.values[te];return ne[ye]=Array.isArray(ne[ye])?ne[ye]:[],ne[ye].push(fe),ne},{})}var or=/([0-9]+)/gm;function Gt(U,te){return U===te?0:U>te?1:-1}function Jr(U,te,ne){return[U.values[ne],te.values[ne]]}function xn(U){return typeof U=="number"?isNaN(U)||U===1/0||U===-1/0?"":String(U):typeof U=="string"?U:""}var un=Object.freeze({__proto__:null,alphanumeric:function(U,te,ne){var fe=Jr(U,te,ne),Ue=fe[0],ye=fe[1];for(Ue=xn(Ue),ye=xn(ye),Ue=Ue.split(or).filter(Boolean),ye=ye.split(or).filter(Boolean);Ue.length&&ye.length;){var He=Ue.shift(),Rt=ye.shift(),bt=parseInt(He,10),Ot=parseInt(Rt,10),$t=[bt,Ot].sort();if(isNaN($t[0])){if(He>Rt)return 1;if(Rt>He)return-1}else{if(isNaN($t[1]))return isNaN(bt)?-1:1;if(bt>Ot)return 1;if(Ot>bt)return-1}}return Ue.length-ye.length},datetime:function(U,te,ne){var fe=Jr(U,te,ne),Ue=fe[0],ye=fe[1];return Gt(Ue=Ue.getTime(),ye=ye.getTime())},basic:function(U,te,ne){var fe=Jr(U,te,ne);return Gt(fe[0],fe[1])},string:function(U,te,ne){var fe=Jr(U,te,ne),Ue=fe[0],ye=fe[1];for(Ue=Ue.split("").filter(Boolean),ye=ye.split("").filter(Boolean);Ue.length&&ye.length;){var He=Ue.shift(),Rt=ye.shift(),bt=He.toLowerCase(),Ot=Rt.toLowerCase();if(bt>Ot)return 1;if(Ot>bt)return-1;if(He>Rt)return 1;if(Rt>He)return-1}return Ue.length-ye.length},number:function(U,te,ne){var fe=Jr(U,te,ne),Ue=fe[0],ye=fe[1],He=/[^0-9.]/gi;return Gt(Ue=Number(String(Ue).replace(He,"")),ye=Number(String(ye).replace(He,"")))}});f.resetSortBy="resetSortBy",f.setSortBy="setSortBy",f.toggleSortBy="toggleSortBy",f.clearSortBy="clearSortBy",_.sortType="alphanumeric",_.sortDescFirst=!1;var Dr=function(U){U.getSortByToggleProps=[Sn],U.stateReducers.push(Dn),U.useInstance.push(lr)};Dr.pluginName="useSortBy";var Sn=function(U,te){var ne=te.instance,fe=te.column,Ue=ne.isMultiSortEvent,ye=Ue===void 0?function(He){return He.shiftKey}:Ue;return[U,{onClick:fe.canSort?function(He){He.persist(),fe.toggleSortBy(void 0,!ne.disableMultiSort&&ye(He))}:void 0,style:{cursor:fe.canSort?"pointer":void 0},title:fe.canSort?"Toggle SortBy":void 0}]};function Dn(U,te,ne,fe){if(te.type===f.init)return l({sortBy:[]},U);if(te.type===f.resetSortBy)return l({},U,{sortBy:fe.initialState.sortBy||[]});if(te.type===f.clearSortBy)return l({},U,{sortBy:U.sortBy.filter(function(Yt){return Yt.id!==te.columnId})});if(te.type===f.setSortBy)return l({},U,{sortBy:te.sortBy});if(te.type===f.toggleSortBy){var Ue,ye=te.columnId,He=te.desc,Rt=te.multi,bt=fe.allColumns,Ot=fe.disableMultiSort,$t=fe.disableSortRemove,jt=fe.disableMultiRemove,zt=fe.maxMultiSortColCount,Dt=zt===void 0?Number.MAX_SAFE_INTEGER:zt,Wt=U.sortBy,nr=bt.find(function(Yt){return Yt.id===ye}).sortDescFirst,ur=Wt.find(function(Yt){return Yt.id===ye}),vr=Wt.findIndex(function(Yt){return Yt.id===ye}),Kr=He!=null,br=[];return(Ue=!Ot&&Rt?ur?"toggle":"add":vr!==Wt.length-1||Wt.length!==1?"replace":ur?"toggle":"replace")!="toggle"||$t||Kr||Rt&&jt||!(ur&&ur.desc&&!nr||!ur.desc&&nr)||(Ue="remove"),Ue==="replace"?br=[{id:ye,desc:Kr?He:nr}]:Ue==="add"?(br=[].concat(Wt,[{id:ye,desc:Kr?He:nr}])).splice(0,br.length-Dt):Ue==="toggle"?br=Wt.map(function(Yt){return Yt.id===ye?l({},Yt,{desc:Kr?He:!ur.desc}):Yt}):Ue==="remove"&&(br=Wt.filter(function(Yt){return Yt.id!==ye})),l({},U,{sortBy:br})}}function lr(U){var te=U.data,ne=U.rows,fe=U.flatRows,Ue=U.allColumns,ye=U.orderByFn,He=ye===void 0?li:ye,Rt=U.sortTypes,bt=U.manualSortBy,Ot=U.defaultCanSort,$t=U.disableSortBy,jt=U.flatHeaders,zt=U.state.sortBy,Dt=U.dispatch,Wt=U.plugins,nr=U.getHooks,ur=U.autoResetSortBy,vr=ur===void 0||ur;R(Wt,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var Kr=a.useCallback(function(Ft){Dt({type:f.setSortBy,sortBy:Ft})},[Dt]),br=a.useCallback(function(Ft,Or,yn){Dt({type:f.toggleSortBy,columnId:Ft,desc:Or,multi:yn})},[Dt]),Yt=I(U);jt.forEach(function(Ft){var Or=Ft.accessor,yn=Ft.canSort,Ur=Ft.disableSortBy,dn=Ft.id,sn=Or?et(Ur!==!0&&void 0,$t!==!0&&void 0,!0):et(Ot,yn,!1);Ft.canSort=sn,Ft.canSort&&(Ft.toggleSortBy=function(wr,jr){return br(Ft.id,wr,jr)},Ft.clearSortBy=function(){Dt({type:f.clearSortBy,columnId:Ft.id})}),Ft.getSortByToggleProps=T(nr().getSortByToggleProps,{instance:Yt(),column:Ft});var On=zt.find(function(wr){return wr.id===dn});Ft.isSorted=!!On,Ft.sortedIndex=zt.findIndex(function(wr){return wr.id===dn}),Ft.isSortedDesc=Ft.isSorted?On.desc:void 0});var Mr=a.useMemo(function(){if(bt||!zt.length)return[ne,fe];var Ft=[],Or=zt.filter(function(yn){return Ue.find(function(Ur){return Ur.id===yn.id})});return[function yn(Ur){var dn=He(Ur,Or.map(function(sn){var On=Ue.find(function(zn){return zn.id===sn.id});if(!On)throw new Error("React-Table: Could not find a column with id: "+sn.id+" while sorting");var wr=On.sortType,jr=st(wr)||(Rt||{})[wr]||un[wr];if(!jr)throw new Error("React-Table: Could not find a valid sortType of '"+wr+"' for column '"+sn.id+"'.");return function(zn,di){return jr(zn,di,sn.id,sn.desc)}}),Or.map(function(sn){var On=Ue.find(function(wr){return wr.id===sn.id});return On&&On.sortInverted?sn.desc:!sn.desc}));return dn.forEach(function(sn){Ft.push(sn),sn.subRows&&sn.subRows.length!==0&&(sn.subRows=yn(sn.subRows))}),dn}(ne),Ft]},[bt,zt,ne,fe,Ue,He,Rt]),dr=Mr[0],Lr=Mr[1],zr=I(vr);B(function(){zr()&&Dt({type:f.resetSortBy})},[bt?null:te]),Object.assign(U,{preSortedRows:ne,preSortedFlatRows:fe,sortedRows:dr,sortedFlatRows:Lr,rows:dr,flatRows:Lr,setSortBy:Kr,toggleSortBy:br})}function li(U,te,ne){return[].concat(U).sort(function(fe,Ue){for(var ye=0;ye<te.length;ye+=1){var He=te[ye],Rt=ne[ye]===!1||ne[ye]==="desc",bt=He(fe,Ue);if(bt!==0)return Rt?-bt:bt}return ne[0]?fe.index-Ue.index:Ue.index-fe.index})}f.resetPage="resetPage",f.gotoPage="gotoPage",f.setPageSize="setPageSize";var An=function(U){U.stateReducers.push(ji),U.useInstance.push(ui)};function ji(U,te,ne,fe){if(te.type===f.init)return l({pageSize:10,pageIndex:0},U);if(te.type===f.resetPage)return l({},U,{pageIndex:fe.initialState.pageIndex||0});if(te.type===f.gotoPage){var Ue=fe.pageCount,ye=fe.page,He=F(te.pageIndex,U.pageIndex),Rt=!1;return He>U.pageIndex?Rt=Ue===-1?ye.length>=U.pageSize:He<Ue:He<U.pageIndex&&(Rt=He>-1),Rt?l({},U,{pageIndex:He}):U}if(te.type===f.setPageSize){var bt=te.pageSize,Ot=U.pageSize*U.pageIndex;return l({},U,{pageIndex:Math.floor(Ot/bt),pageSize:bt})}}function ui(U){var te=U.rows,ne=U.autoResetPage,fe=ne===void 0||ne,Ue=U.manualExpandedKey,ye=Ue===void 0?"expanded":Ue,He=U.plugins,Rt=U.pageCount,bt=U.paginateExpandedRows,Ot=bt===void 0||bt,$t=U.expandSubRows,jt=$t===void 0||$t,zt=U.state,Dt=zt.pageSize,Wt=zt.pageIndex,nr=zt.expanded,ur=zt.globalFilter,vr=zt.filters,Kr=zt.groupBy,br=zt.sortBy,Yt=U.dispatch,Mr=U.data,dr=U.manualPagination;R(He,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var Lr=I(fe);B(function(){Lr()&&Yt({type:f.resetPage})},[Yt,dr?null:Mr,ur,vr,Kr,br]);var zr=dr?Rt:Math.ceil(te.length/Dt),Ft=a.useMemo(function(){return zr>0?[].concat(new Array(zr)).fill(null).map(function(jr,zn){return zn}):[]},[zr]),Or=a.useMemo(function(){var jr;if(dr)jr=te;else{var zn=Dt*Wt,di=zn+Dt;jr=te.slice(zn,di)}return Ot?jr:gt(jr,{manualExpandedKey:ye,expanded:nr,expandSubRows:jt})},[jt,nr,ye,dr,Wt,Dt,Ot,te]),yn=Wt>0,Ur=zr===-1?Or.length>=Dt:Wt<zr-1,dn=a.useCallback(function(jr){Yt({type:f.gotoPage,pageIndex:jr})},[Yt]),sn=a.useCallback(function(){return dn(function(jr){return jr-1})},[dn]),On=a.useCallback(function(){return dn(function(jr){return jr+1})},[dn]),wr=a.useCallback(function(jr){Yt({type:f.setPageSize,pageSize:jr})},[Yt]);Object.assign(U,{pageOptions:Ft,pageCount:zr,page:Or,canPreviousPage:yn,canNextPage:Ur,gotoPage:dn,previousPage:sn,nextPage:On,setPageSize:wr})}An.pluginName="usePagination",f.resetPivot="resetPivot",f.togglePivot="togglePivot";var Ra=function(U){U.getPivotToggleProps=[ci],U.stateReducers.push(v),U.useInstanceAfterData.push(y),U.allColumns.push(S),U.accessValue.push(C),U.materializedColumns.push(H),U.materializedColumnsDeps.push(X),U.visibleColumns.push(oe),U.visibleColumnsDeps.push(be),U.useInstance.push(he),U.prepareRow.push(me)};Ra.pluginName="usePivotColumns";var Qi=[],ci=function(U,te){var ne=te.header;return[U,{onClick:ne.canPivot?function(fe){fe.persist(),ne.togglePivot()}:void 0,style:{cursor:ne.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function v(U,te,ne,fe){if(te.type===f.init)return l({pivotColumns:Qi},U);if(te.type===f.resetPivot)return l({},U,{pivotColumns:fe.initialState.pivotColumns||Qi});if(te.type===f.togglePivot){var Ue=te.columnId,ye=te.value,He=ye!==void 0?ye:!U.pivotColumns.includes(Ue);return l({},U,He?{pivotColumns:[].concat(U.pivotColumns,[Ue])}:{pivotColumns:U.pivotColumns.filter(function(Rt){return Rt!==Ue})})}}function y(U){U.allColumns.forEach(function(te){te.isPivotSource=U.state.pivotColumns.includes(te.id)})}function S(U,te){var ne=te.instance;return U.forEach(function(fe){fe.isPivotSource=ne.state.pivotColumns.includes(fe.id),fe.uniqueValues=new Set}),U}function C(U,te){var ne=te.column;return ne.uniqueValues&&U!==void 0&&ne.uniqueValues.add(U),U}function H(U,te){var ne=te.instance,fe=ne.allColumns,Ue=ne.state;if(!Ue.pivotColumns.length||!Ue.groupBy||!Ue.groupBy.length)return U;var ye=Ue.pivotColumns.map(function(bt){return fe.find(function(Ot){return Ot.id===bt})}).filter(Boolean),He=fe.filter(function(bt){return!bt.isPivotSource&&!Ue.groupBy.includes(bt.id)&&!Ue.pivotColumns.includes(bt.id)}),Rt=Ie(function bt(Ot,$t,jt){Ot===void 0&&(Ot=0),jt===void 0&&(jt=[]);var zt=ye[Ot];return zt?Array.from(zt.uniqueValues).sort().map(function(Dt){var Wt=l({},zt,{Header:zt.PivotHeader||typeof zt.header=="string"?zt.Header+": "+Dt:Dt,isPivotGroup:!0,parent:$t,depth:Ot,id:$t?$t.id+"."+zt.id+"."+Dt:zt.id+"."+Dt,pivotValue:Dt});return Wt.columns=bt(Ot+1,Wt,[].concat(jt,[function(nr){return nr.values[zt.id]===Dt}])),Wt}):He.map(function(Dt){return l({},Dt,{canPivot:!1,isPivoted:!0,parent:$t,depth:Ot,id:""+($t?$t.id+"."+Dt.id:Dt.id),accessor:function(Wt,nr,ur){if(jt.every(function(vr){return vr(ur)}))return ur.values[Dt.id]}})})}());return[].concat(U,Rt)}function X(U,te){var ne=te.instance.state,fe=ne.pivotColumns,Ue=ne.groupBy;return[].concat(U,[fe,Ue])}function oe(U,te){var ne=te.instance.state;return U=U.filter(function(fe){return!fe.isPivotSource}),ne.pivotColumns.length&&ne.groupBy&&ne.groupBy.length&&(U=U.filter(function(fe){return fe.isGrouped||fe.isPivoted})),U}function be(U,te){var ne=te.instance;return[].concat(U,[ne.state.pivotColumns,ne.state.groupBy])}function he(U){var te=U.columns,ne=U.allColumns,fe=U.flatHeaders,Ue=U.getHooks,ye=U.plugins,He=U.dispatch,Rt=U.autoResetPivot,bt=Rt===void 0||Rt,Ot=U.manaulPivot,$t=U.disablePivot,jt=U.defaultCanPivot;R(ye,["useGroupBy"],"usePivotColumns");var zt=I(U);ne.forEach(function(Wt){var nr=Wt.accessor,ur=Wt.defaultPivot,vr=Wt.disablePivot;Wt.canPivot=nr?et(Wt.canPivot,vr!==!0&&void 0,$t!==!0&&void 0,!0):et(Wt.canPivot,ur,jt,!1),Wt.canPivot&&(Wt.togglePivot=function(){return U.togglePivot(Wt.id)}),Wt.Aggregated=Wt.Aggregated||Wt.Cell}),fe.forEach(function(Wt){Wt.getPivotToggleProps=T(Ue().getPivotToggleProps,{instance:zt(),header:Wt})});var Dt=I(bt);B(function(){Dt()&&He({type:f.resetPivot})},[He,Ot?null:te]),Object.assign(U,{togglePivot:function(Wt,nr){He({type:f.togglePivot,columnId:Wt,value:nr})}})}function me(U){U.allCells.forEach(function(te){te.isPivoted=te.column.isPivoted})}f.resetSelectedRows="resetSelectedRows",f.toggleAllRowsSelected="toggleAllRowsSelected",f.toggleRowSelected="toggleRowSelected",f.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var Ee=function(U){U.getToggleRowSelectedProps=[Ae],U.getToggleAllRowsSelectedProps=[De],U.getToggleAllPageRowsSelectedProps=[Ge],U.stateReducers.push(nt),U.useInstance.push(pt),U.prepareRow.push(_t)};Ee.pluginName="useRowSelect";var Ae=function(U,te){var ne=te.instance,fe=te.row,Ue=ne.manualRowSelectedKey,ye=Ue===void 0?"isSelected":Ue;return[U,{onChange:function(He){fe.toggleRowSelected(He.target.checked)},style:{cursor:"pointer"},checked:!(!fe.original||!fe.original[ye])||fe.isSelected,title:"Toggle Row Selected",indeterminate:fe.isSomeSelected}]},De=function(U,te){var ne=te.instance;return[U,{onChange:function(fe){ne.toggleAllRowsSelected(fe.target.checked)},style:{cursor:"pointer"},checked:ne.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:!!(!ne.isAllRowsSelected&&Object.keys(ne.state.selectedRowIds).length)}]},Ge=function(U,te){var ne=te.instance;return[U,{onChange:function(fe){ne.toggleAllPageRowsSelected(fe.target.checked)},style:{cursor:"pointer"},checked:ne.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:!!(!ne.isAllPageRowsSelected&&ne.page.some(function(fe){var Ue=fe.id;return ne.state.selectedRowIds[Ue]}))}]};function nt(U,te,ne,fe){if(te.type===f.init)return l({selectedRowIds:{}},U);if(te.type===f.resetSelectedRows)return l({},U,{selectedRowIds:fe.initialState.selectedRowIds||{}});if(te.type===f.toggleAllRowsSelected){var Ue=te.value,ye=fe.isAllRowsSelected,He=fe.rowsById,Rt=fe.nonGroupedRowsById,bt=Rt===void 0?He:Rt,Ot=Ue!==void 0?Ue:!ye,$t=Object.assign({},U.selectedRowIds);return Ot?Object.keys(bt).forEach(function(dn){$t[dn]=!0}):Object.keys(bt).forEach(function(dn){delete $t[dn]}),l({},U,{selectedRowIds:$t})}if(te.type===f.toggleRowSelected){var jt=te.id,zt=te.value,Dt=fe.rowsById,Wt=fe.selectSubRows,nr=Wt===void 0||Wt,ur=fe.getSubRows,vr=U.selectedRowIds[jt],Kr=zt!==void 0?zt:!vr;if(vr===Kr)return U;var br=l({},U.selectedRowIds);return function dn(sn){var On=Dt[sn];if(On&&(On.isGrouped||(Kr?br[sn]=!0:delete br[sn]),nr&&ur(On)))return ur(On).forEach(function(wr){return dn(wr.id)})}(jt),l({},U,{selectedRowIds:br})}if(te.type===f.toggleAllPageRowsSelected){var Yt=te.value,Mr=fe.page,dr=fe.rowsById,Lr=fe.selectSubRows,zr=Lr===void 0||Lr,Ft=fe.isAllPageRowsSelected,Or=fe.getSubRows,yn=Yt!==void 0?Yt:!Ft,Ur=l({},U.selectedRowIds);return Mr.forEach(function(dn){return function sn(On){var wr=dr[On];if(wr.isGrouped||(yn?Ur[On]=!0:delete Ur[On]),zr&&Or(wr))return Or(wr).forEach(function(jr){return sn(jr.id)})}(dn.id)}),l({},U,{selectedRowIds:Ur})}return U}function pt(U){var te=U.data,ne=U.rows,fe=U.getHooks,Ue=U.plugins,ye=U.rowsById,He=U.nonGroupedRowsById,Rt=He===void 0?ye:He,bt=U.autoResetSelectedRows,Ot=bt===void 0||bt,$t=U.state.selectedRowIds,jt=U.selectSubRows,zt=jt===void 0||jt,Dt=U.dispatch,Wt=U.page,nr=U.getSubRows;R(Ue,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var ur=a.useMemo(function(){var Or=[];return ne.forEach(function(yn){var Ur=zt?function dn(sn,On,wr){if(On[sn.id])return!0;var jr=wr(sn);if(jr&&jr.length){var zn=!0,di=!1;return jr.forEach(function(xr){di&&!zn||(dn(xr,On,wr)?di=!0:zn=!1)}),!!zn||!!di&&null}return!1}(yn,$t,nr):!!$t[yn.id];yn.isSelected=!!Ur,yn.isSomeSelected=Ur===null,Ur&&Or.push(yn)}),Or},[ne,zt,$t,nr]),vr=!!(Object.keys(Rt).length&&Object.keys($t).length),Kr=vr;vr&&Object.keys(Rt).some(function(Or){return!$t[Or]})&&(vr=!1),vr||Wt&&Wt.length&&Wt.some(function(Or){var yn=Or.id;return!$t[yn]})&&(Kr=!1);var br=I(Ot);B(function(){br()&&Dt({type:f.resetSelectedRows})},[Dt,te]);var Yt=a.useCallback(function(Or){return Dt({type:f.toggleAllRowsSelected,value:Or})},[Dt]),Mr=a.useCallback(function(Or){return Dt({type:f.toggleAllPageRowsSelected,value:Or})},[Dt]),dr=a.useCallback(function(Or,yn){return Dt({type:f.toggleRowSelected,id:Or,value:yn})},[Dt]),Lr=I(U),zr=T(fe().getToggleAllRowsSelectedProps,{instance:Lr()}),Ft=T(fe().getToggleAllPageRowsSelectedProps,{instance:Lr()});Object.assign(U,{selectedFlatRows:ur,isAllRowsSelected:vr,isAllPageRowsSelected:Kr,toggleRowSelected:dr,toggleAllRowsSelected:Yt,getToggleAllRowsSelectedProps:zr,getToggleAllPageRowsSelectedProps:Ft,toggleAllPageRowsSelected:Mr})}function _t(U,te){var ne=te.instance;U.toggleRowSelected=function(fe){return ne.toggleRowSelected(U.id,fe)},U.getToggleRowSelectedProps=T(ne.getHooks().getToggleRowSelectedProps,{instance:ne,row:U})}var ae=function(U){return{}},_e=function(U){return{}};f.setRowState="setRowState",f.setCellState="setCellState",f.resetRowState="resetRowState";var Pe=function(U){U.stateReducers.push(Fe),U.useInstance.push(ut),U.prepareRow.push(Et)};function Fe(U,te,ne,fe){var Ue=fe.initialRowStateAccessor,ye=Ue===void 0?ae:Ue,He=fe.initialCellStateAccessor,Rt=He===void 0?_e:He,bt=fe.rowsById;if(te.type===f.init)return l({rowState:{}},U);if(te.type===f.resetRowState)return l({},U,{rowState:fe.initialState.rowState||{}});if(te.type===f.setRowState){var Ot,$t=te.rowId,jt=te.value,zt=U.rowState[$t]!==void 0?U.rowState[$t]:ye(bt[$t]);return l({},U,{rowState:l({},U.rowState,(Ot={},Ot[$t]=F(jt,zt),Ot))})}if(te.type===f.setCellState){var Dt,Wt,nr,ur,vr,Kr=te.rowId,br=te.columnId,Yt=te.value,Mr=U.rowState[Kr]!==void 0?U.rowState[Kr]:ye(bt[Kr]),dr=(Mr==null||(Dt=Mr.cellState)==null?void 0:Dt[br])!==void 0?Mr.cellState[br]:Rt((Wt=bt[Kr])==null||(nr=Wt.cells)==null?void 0:nr.find(function(Lr){return Lr.column.id===br}));return l({},U,{rowState:l({},U.rowState,(vr={},vr[Kr]=l({},Mr,{cellState:l({},Mr.cellState||{},(ur={},ur[br]=F(Yt,dr),ur))}),vr))})}}function ut(U){var te=U.autoResetRowState,ne=te===void 0||te,fe=U.data,Ue=U.dispatch,ye=a.useCallback(function(bt,Ot){return Ue({type:f.setRowState,rowId:bt,value:Ot})},[Ue]),He=a.useCallback(function(bt,Ot,$t){return Ue({type:f.setCellState,rowId:bt,columnId:Ot,value:$t})},[Ue]),Rt=I(ne);B(function(){Rt()&&Ue({type:f.resetRowState})},[fe]),Object.assign(U,{setRowState:ye,setCellState:He})}function Et(U,te){var ne=te.instance,fe=ne.initialRowStateAccessor,Ue=fe===void 0?ae:fe,ye=ne.initialCellStateAccessor,He=ye===void 0?_e:ye,Rt=ne.state.rowState;U&&(U.state=Rt[U.id]!==void 0?Rt[U.id]:Ue(U),U.setState=function(bt){return ne.setRowState(U.id,bt)},U.cells.forEach(function(bt){U.state.cellState||(U.state.cellState={}),bt.state=U.state.cellState[bt.column.id]!==void 0?U.state.cellState[bt.column.id]:He(bt),bt.setState=function(Ot){return ne.setCellState(U.id,bt.column.id,Ot)}}))}Pe.pluginName="useRowState",f.resetColumnOrder="resetColumnOrder",f.setColumnOrder="setColumnOrder";var cr=function(U){U.stateReducers.push(Bt),U.visibleColumnsDeps.push(function(te,ne){var fe=ne.instance;return[].concat(te,[fe.state.columnOrder])}),U.visibleColumns.push($r),U.useInstance.push(sr)};function Bt(U,te,ne,fe){return te.type===f.init?l({columnOrder:[]},U):te.type===f.resetColumnOrder?l({},U,{columnOrder:fe.initialState.columnOrder||[]}):te.type===f.setColumnOrder?l({},U,{columnOrder:F(te.columnOrder,U.columnOrder)}):void 0}function $r(U,te){var ne=te.instance.state.columnOrder;if(!ne||!ne.length)return U;for(var fe=[].concat(ne),Ue=[].concat(U),ye=[],He=function(){var Rt=fe.shift(),bt=Ue.findIndex(function(Ot){return Ot.id===Rt});bt>-1&&ye.push(Ue.splice(bt,1)[0])};Ue.length&&fe.length;)He();return[].concat(ye,Ue)}function sr(U){var te=U.dispatch;U.setColumnOrder=a.useCallback(function(ne){return te({type:f.setColumnOrder,columnOrder:ne})},[te])}cr.pluginName="useColumnOrder",_.canResize=!0,f.columnStartResizing="columnStartResizing",f.columnResizing="columnResizing",f.columnDoneResizing="columnDoneResizing",f.resetResize="resetResize";var hr=function(U){U.getResizerProps=[en],U.getHeaderProps.push({style:{position:"relative"}}),U.stateReducers.push(fr),U.useInstance.push(Xr),U.useInstanceBeforeDimensions.push(tn)},en=function(U,te){var ne=te.instance,fe=te.header,Ue=ne.dispatch,ye=function(He,Rt){var bt=!1;if(He.type==="touchstart"){if(He.touches&&He.touches.length>1)return;bt=!0}var Ot,$t,jt=function(br){var Yt=[];return function Mr(dr){dr.columns&&dr.columns.length&&dr.columns.map(Mr),Yt.push(dr)}(br),Yt}(Rt).map(function(br){return[br.id,br.totalWidth]}),zt=bt?Math.round(He.touches[0].clientX):He.clientX,Dt=function(){window.cancelAnimationFrame(Ot),Ot=null,Ue({type:f.columnDoneResizing})},Wt=function(){window.cancelAnimationFrame(Ot),Ot=null,Ue({type:f.columnResizing,clientX:$t})},nr=function(br){$t=br,Ot||(Ot=window.requestAnimationFrame(Wt))},ur={mouse:{moveEvent:"mousemove",moveHandler:function(br){return nr(br.clientX)},upEvent:"mouseup",upHandler:function(br){document.removeEventListener("mousemove",ur.mouse.moveHandler),document.removeEventListener("mouseup",ur.mouse.upHandler),Dt()}},touch:{moveEvent:"touchmove",moveHandler:function(br){return br.cancelable&&(br.preventDefault(),br.stopPropagation()),nr(br.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(br){document.removeEventListener(ur.touch.moveEvent,ur.touch.moveHandler),document.removeEventListener(ur.touch.upEvent,ur.touch.moveHandler),Dt()}}},vr=bt?ur.touch:ur.mouse,Kr=!!function(){if(typeof xe=="boolean")return xe;var br=!1;try{var Yt={get passive(){return br=!0,!1}};window.addEventListener("test",null,Yt),window.removeEventListener("test",null,Yt)}catch{br=!1}return xe=br}()&&{passive:!1};document.addEventListener(vr.moveEvent,vr.moveHandler,Kr),document.addEventListener(vr.upEvent,vr.upHandler,Kr),Ue({type:f.columnStartResizing,columnId:Rt.id,columnWidth:Rt.totalWidth,headerIdWidths:jt,clientX:zt})};return[U,{onMouseDown:function(He){return He.persist()||ye(He,fe)},onTouchStart:function(He){return He.persist()||ye(He,fe)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function fr(U,te){if(te.type===f.init)return l({columnResizing:{columnWidths:{}}},U);if(te.type===f.resetResize)return l({},U,{columnResizing:{columnWidths:{}}});if(te.type===f.columnStartResizing){var ne=te.clientX,fe=te.columnId,Ue=te.columnWidth,ye=te.headerIdWidths;return l({},U,{columnResizing:l({},U.columnResizing,{startX:ne,headerIdWidths:ye,columnWidth:Ue,isResizingColumn:fe})})}if(te.type===f.columnResizing){var He=te.clientX,Rt=U.columnResizing,bt=Rt.startX,Ot=Rt.columnWidth,$t=Rt.headerIdWidths,jt=(He-bt)/Ot,zt={};return($t===void 0?[]:$t).forEach(function(Dt){var Wt=Dt[0],nr=Dt[1];zt[Wt]=Math.max(nr+nr*jt,0)}),l({},U,{columnResizing:l({},U.columnResizing,{columnWidths:l({},U.columnResizing.columnWidths,{},zt)})})}return te.type===f.columnDoneResizing?l({},U,{columnResizing:l({},U.columnResizing,{startX:null,isResizingColumn:null})}):void 0}hr.pluginName="useResizeColumns";var tn=function(U){var te=U.flatHeaders,ne=U.disableResizing,fe=U.getHooks,Ue=U.state.columnResizing,ye=I(U);te.forEach(function(He){var Rt=et(He.disableResizing!==!0&&void 0,ne!==!0&&void 0,!0);He.canResize=Rt,He.width=Ue.columnWidths[He.id]||He.originalWidth||He.width,He.isResizing=Ue.isResizingColumn===He.id,Rt&&(He.getResizerProps=T(fe().getResizerProps,{instance:ye(),header:He}))})};function Xr(U){var te=U.plugins,ne=U.dispatch,fe=U.autoResetResize,Ue=fe===void 0||fe,ye=U.columns;R(te,["useAbsoluteLayout"],"useResizeColumns");var He=I(Ue);B(function(){He()&&ne({type:f.resetResize})},[ye]);var Rt=a.useCallback(function(){return ne({type:f.resetResize})},[ne]);Object.assign(U,{resetResizing:Rt})}var Tn={position:"absolute",top:0},Yr=function(U){U.getTableBodyProps.push(Zr),U.getRowProps.push(Zr),U.getHeaderGroupProps.push(Zr),U.getFooterGroupProps.push(Zr),U.getHeaderProps.push(function(te,ne){var fe=ne.column;return[te,{style:l({},Tn,{left:fe.totalLeft+"px",width:fe.totalWidth+"px"})}]}),U.getCellProps.push(function(te,ne){var fe=ne.cell;return[te,{style:l({},Tn,{left:fe.column.totalLeft+"px",width:fe.column.totalWidth+"px"})}]}),U.getFooterProps.push(function(te,ne){var fe=ne.column;return[te,{style:l({},Tn,{left:fe.totalLeft+"px",width:fe.totalWidth+"px"})}]})};Yr.pluginName="useAbsoluteLayout";var Zr=function(U,te){return[U,{style:{position:"relative",width:te.instance.totalColumnsWidth+"px"}}]},vn={display:"inline-block",boxSizing:"border-box"},Rr=function(U,te){return[U,{style:{display:"flex",width:te.instance.totalColumnsWidth+"px"}}]},jn=function(U){U.getRowProps.push(Rr),U.getHeaderGroupProps.push(Rr),U.getFooterGroupProps.push(Rr),U.getHeaderProps.push(function(te,ne){var fe=ne.column;return[te,{style:l({},vn,{width:fe.totalWidth+"px"})}]}),U.getCellProps.push(function(te,ne){var fe=ne.cell;return[te,{style:l({},vn,{width:fe.column.totalWidth+"px"})}]}),U.getFooterProps.push(function(te,ne){var fe=ne.column;return[te,{style:l({},vn,{width:fe.totalWidth+"px"})}]})};function Ei(U){U.getTableProps.push(Xi),U.getRowProps.push(Cn),U.getHeaderGroupProps.push(Cn),U.getFooterGroupProps.push(Cn),U.getHeaderProps.push(Vi),U.getCellProps.push($a),U.getFooterProps.push(lo)}jn.pluginName="useBlockLayout",Ei.pluginName="useFlexLayout";var Xi=function(U,te){return[U,{style:{minWidth:te.instance.totalColumnsMinWidth+"px"}}]},Cn=function(U,te){return[U,{style:{display:"flex",flex:"1 0 auto",minWidth:te.instance.totalColumnsMinWidth+"px"}}]},Vi=function(U,te){var ne=te.column;return[U,{style:{boxSizing:"border-box",flex:ne.totalFlexWidth?ne.totalFlexWidth+" 0 auto":void 0,minWidth:ne.totalMinWidth+"px",width:ne.totalWidth+"px"}}]},$a=function(U,te){var ne=te.cell;return[U,{style:{boxSizing:"border-box",flex:ne.column.totalFlexWidth+" 0 auto",minWidth:ne.column.totalMinWidth+"px",width:ne.column.totalWidth+"px"}}]},lo=function(U,te){var ne=te.column;return[U,{style:{boxSizing:"border-box",flex:ne.totalFlexWidth?ne.totalFlexWidth+" 0 auto":void 0,minWidth:ne.totalMinWidth+"px",width:ne.totalWidth+"px"}}]};function En(U){U.stateReducers.push(Yo),U.getTableProps.push($n),U.getHeaderProps.push(xa),U.getRowProps.push(qn)}f.columnStartResizing="columnStartResizing",f.columnResizing="columnResizing",f.columnDoneResizing="columnDoneResizing",f.resetResize="resetResize",En.pluginName="useGridLayout";var $n=function(U,te){var ne=te.instance;return[U,{style:{display:"grid",gridTemplateColumns:ne.visibleColumns.map(function(fe){var Ue;return ne.state.gridLayout.columnWidths[fe.id]?ne.state.gridLayout.columnWidths[fe.id]+"px":(Ue=ne.state.columnResizing)!=null&&Ue.isResizingColumn?ne.state.gridLayout.startWidths[fe.id]+"px":typeof fe.width=="number"?fe.width+"px":fe.width}).join(" ")}}]},xa=function(U,te){var ne=te.column;return[U,{id:"header-cell-"+ne.id,style:{position:"sticky",gridColumn:"span "+ne.totalVisibleHeaderCount}}]},qn=function(U,te){var ne=te.row;return ne.isExpanded?[U,{style:{gridColumn:"1 / "+(ne.cells.length+1)}}]:[U,{}]};function Yo(U,te,ne,fe){if(te.type===f.init)return l({gridLayout:{columnWidths:{}}},U);if(te.type===f.resetResize)return l({},U,{gridLayout:{columnWidths:{}}});if(te.type===f.columnStartResizing){var Ue=te.columnId,ye=te.headerIdWidths,He=ua(Ue);if(He!==void 0){var Rt=fe.visibleColumns.reduce(function(Yt,Mr){var dr;return l({},Yt,((dr={})[Mr.id]=ua(Mr.id),dr))},{}),bt=fe.visibleColumns.reduce(function(Yt,Mr){var dr;return l({},Yt,((dr={})[Mr.id]=Mr.minWidth,dr))},{}),Ot=fe.visibleColumns.reduce(function(Yt,Mr){var dr;return l({},Yt,((dr={})[Mr.id]=Mr.maxWidth,dr))},{}),$t=ye.map(function(Yt){var Mr=Yt[0];return[Mr,ua(Mr)]});return l({},U,{gridLayout:l({},U.gridLayout,{startWidths:Rt,minWidths:bt,maxWidths:Ot,headerIdGridWidths:$t,columnWidth:He})})}return U}if(te.type===f.columnResizing){var jt=te.clientX,zt=U.columnResizing.startX,Dt=U.gridLayout,Wt=Dt.columnWidth,nr=Dt.minWidths,ur=Dt.maxWidths,vr=Dt.headerIdGridWidths,Kr=(jt-zt)/Wt,br={};return(vr===void 0?[]:vr).forEach(function(Yt){var Mr=Yt[0],dr=Yt[1];br[Mr]=Math.min(Math.max(nr[Mr],dr+dr*Kr),ur[Mr])}),l({},U,{gridLayout:l({},U.gridLayout,{columnWidths:l({},U.gridLayout.columnWidths,{},br)})})}return te.type===f.columnDoneResizing?l({},U,{gridLayout:l({},U.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function ua(U){var te,ne=(te=document.getElementById("header-cell-"+U))==null?void 0:te.offsetWidth;if(ne!==void 0)return ne}i._UNSTABLE_usePivotColumns=Ra,i.actions=f,i.defaultColumn=_,i.defaultGroupByFn=pr,i.defaultOrderByFn=li,i.defaultRenderer=m,i.emptyRenderer=b,i.ensurePluginOrder=R,i.flexRender=Y,i.functionalUpdate=F,i.loopHooks=P,i.makePropGetter=T,i.makeRenderer=W,i.reduceHooks=x,i.safeUseLayoutEffect=$,i.useAbsoluteLayout=Yr,i.useAsyncDebounce=function(U,te){te===void 0&&(te=0);var ne=a.useRef({}),fe=I(U),Ue=I(te);return a.useCallback(function(){var ye=d(regeneratorRuntime.mark(function He(){var Rt,bt,Ot,$t=arguments;return regeneratorRuntime.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:for(Rt=$t.length,bt=new Array(Rt),Ot=0;Ot<Rt;Ot++)bt[Ot]=$t[Ot];return ne.current.promise||(ne.current.promise=new Promise(function(zt,Dt){ne.current.resolve=zt,ne.current.reject=Dt})),ne.current.timeout&&clearTimeout(ne.current.timeout),ne.current.timeout=setTimeout(d(regeneratorRuntime.mark(function zt(){return regeneratorRuntime.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return delete ne.current.timeout,Dt.prev=1,Dt.t0=ne.current,Dt.next=5,fe().apply(void 0,bt);case 5:Dt.t1=Dt.sent,Dt.t0.resolve.call(Dt.t0,Dt.t1),Dt.next=12;break;case 9:Dt.prev=9,Dt.t2=Dt.catch(1),ne.current.reject(Dt.t2);case 12:return Dt.prev=12,delete ne.current.promise,Dt.finish(12);case 15:case"end":return Dt.stop()}},zt,null,[[1,9,12,15]])})),Ue()),jt.abrupt("return",ne.current.promise);case 5:case"end":return jt.stop()}},He)}));return function(){return ye.apply(this,arguments)}}(),[fe,Ue])},i.useBlockLayout=jn,i.useColumnOrder=cr,i.useExpanded=k,i.useFilters=er,i.useFlexLayout=Ei,i.useGetLatest=I,i.useGlobalFilter=pe,i.useGridLayout=En,i.useGroupBy=Vt,i.useMountedLayoutEffect=B,i.usePagination=An,i.useResizeColumns=hr,i.useRowSelect=Ee,i.useRowState=Pe,i.useSortBy=Dr,i.useTable=function(U){for(var te=arguments.length,ne=new Array(te>1?te-1:0),fe=1;fe<te;fe++)ne[fe-1]=arguments[fe];U=Oe(U),ne=[D].concat(ne);var Ue=a.useRef({}),ye=I(Ue.current);Object.assign(ye(),l({},U,{plugins:ne,hooks:M()})),ne.filter(Boolean).forEach(function(xr){xr(ye().hooks)});var He=I(ye().hooks);ye().getHooks=He,delete ye().hooks,Object.assign(ye(),x(He().useOptions,Oe(U)));var Rt=ye(),bt=Rt.data,Ot=Rt.columns,$t=Rt.initialState,jt=Rt.defaultColumn,zt=Rt.getSubRows,Dt=Rt.getRowId,Wt=Rt.stateReducer,nr=Rt.useControlledState,ur=I(Wt),vr=a.useCallback(function(xr,kn){if(!kn.type)throw console.info({action:kn}),new Error("Unknown Action 👆");return[].concat(He().stateReducers,Array.isArray(ur())?ur():[ur()]).reduce(function(Un,Qr){return Qr(Un,kn,xr,ye())||Un},xr)},[He,ur,ye]),Kr=a.useReducer(vr,void 0,function(){return vr($t,{type:f.init})}),br=Kr[0],Yt=Kr[1],Mr=x([].concat(He().useControlledState,[nr]),br,{instance:ye()});Object.assign(ye(),{state:Mr,dispatch:Yt});var dr=a.useMemo(function(){return q(x(He().columns,Ot,{instance:ye()}))},[He,ye,Ot].concat(x(He().columnsDeps,[],{instance:ye()})));ye().columns=dr;var Lr=a.useMemo(function(){return x(He().allColumns,Ie(dr),{instance:ye()}).map(K)},[dr,He,ye].concat(x(He().allColumnsDeps,[],{instance:ye()})));ye().allColumns=Lr;var zr=a.useMemo(function(){for(var xr=[],kn=[],Un={},Qr=[].concat(Lr);Qr.length;){var Vn=Qr.shift();Q({data:bt,rows:xr,flatRows:kn,rowsById:Un,column:Vn,getRowId:Dt,getSubRows:zt,accessValueHooks:He().accessValue,getInstance:ye})}return[xr,kn,Un]},[Lr,bt,Dt,zt,He,ye]),Ft=zr[0],Or=zr[1],yn=zr[2];Object.assign(ye(),{rows:Ft,initialRows:[].concat(Ft),flatRows:Or,rowsById:yn}),P(He().useInstanceAfterData,ye());var Ur=a.useMemo(function(){return x(He().visibleColumns,Lr,{instance:ye()}).map(function(xr){return ie(xr,jt)})},[He,Lr,ye,jt].concat(x(He().visibleColumnsDeps,[],{instance:ye()})));Lr=a.useMemo(function(){var xr=[].concat(Ur);return Lr.forEach(function(kn){xr.find(function(Un){return Un.id===kn.id})||xr.push(kn)}),xr},[Lr,Ur]),ye().allColumns=Lr;var dn=a.useMemo(function(){return x(He().headerGroups,ge(Ur,jt),ye())},[He,Ur,jt,ye].concat(x(He().headerGroupsDeps,[],{instance:ye()})));ye().headerGroups=dn;var sn=a.useMemo(function(){return dn.length?dn[0].headers:[]},[dn]);ye().headers=sn,ye().flatHeaders=dn.reduce(function(xr,kn){return[].concat(xr,kn.headers)},[]),P(He().useInstanceBeforeDimensions,ye());var On=Ur.filter(function(xr){return xr.isVisible}).map(function(xr){return xr.id}).sort().join("_");Ur=a.useMemo(function(){return Ur.filter(function(xr){return xr.isVisible})},[Ur,On]),ye().visibleColumns=Ur;var wr=lt(sn),jr=wr[0],zn=wr[1],di=wr[2];return ye().totalColumnsMinWidth=jr,ye().totalColumnsWidth=zn,ye().totalColumnsMaxWidth=di,P(He().useInstance,ye()),[].concat(ye().flatHeaders,ye().allColumns).forEach(function(xr){xr.render=W(ye(),xr),xr.getHeaderProps=T(He().getHeaderProps,{instance:ye(),column:xr}),xr.getFooterProps=T(He().getFooterProps,{instance:ye(),column:xr})}),ye().headerGroups=a.useMemo(function(){return dn.filter(function(xr,kn){return xr.headers=xr.headers.filter(function(Un){return Un.headers?function Qr(Vn){return Vn.filter(function(rn){return rn.headers?Qr(rn.headers):rn.isVisible}).length}(Un.headers):Un.isVisible}),!!xr.headers.length&&(xr.getHeaderGroupProps=T(He().getHeaderGroupProps,{instance:ye(),headerGroup:xr,index:kn}),xr.getFooterGroupProps=T(He().getFooterGroupProps,{instance:ye(),headerGroup:xr,index:kn}),!0)})},[dn,ye,He]),ye().footerGroups=[].concat(ye().headerGroups).reverse(),ye().prepareRow=a.useCallback(function(xr){xr.getRowProps=T(He().getRowProps,{instance:ye(),row:xr}),xr.allCells=Lr.map(function(kn){var Un=xr.values[kn.id],Qr={column:kn,row:xr,value:Un};return Qr.getCellProps=T(He().getCellProps,{instance:ye(),cell:Qr}),Qr.render=W(ye(),kn,{row:xr,cell:Qr,value:Un}),Qr}),xr.cells=Ur.map(function(kn){return xr.allCells.find(function(Un){return Un.column.id===kn.id})}),P(He().prepareRow,xr,{instance:ye()})},[He,ye,Lr,Ur]),ye().getTableProps=T(He().getTableProps,{instance:ye()}),ye().getTableBodyProps=T(He().getTableBodyProps,{instance:ye()}),P(He().useFinalInstance,ye()),ye()},Object.defineProperty(i,"__esModule",{value:!0})})}(zp,zp.exports)),zp.exports}var pS;function p2(){return pS||(pS=1,j0.exports=h2()),j0.exports}var g2=Ry.exports,gS;function y2(){return gS||(gS=1,function(t,r){(function(a,s){t.exports=s(ag(),Lx(),jC(),f2,p2())})(g2,(i,a,s,d,l)=>(()=>{var c={577:b=>{b.exports=a},606:b=>{b.exports=s},156:b=>{b.exports=i},767:b=>{b.exports=l},928:b=>{b.exports=d}},p={};function f(b){var _=p[b];if(_!==void 0)return _.exports;var A=p[b]={exports:{}};return c[b](A,A.exports,f),A.exports}f.n=b=>{var _=b&&b.__esModule?()=>b.default:()=>b;return f.d(_,{a:_}),_},f.d=(b,_)=>{for(var A in _)f.o(_,A)&&!f.o(b,A)&&Object.defineProperty(b,A,{enumerable:!0,get:_[A]})},f.o=(b,_)=>Object.prototype.hasOwnProperty.call(b,_),f.r=b=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var m={};return(()=>{f.r(m),f.d(m,{CombinedDataProvider:()=>k,DatasetContext:()=>W,DatasetProvider:()=>Y,FileUpload:()=>R,Image:()=>xe,Link:()=>We,LoginButton:()=>$e,LogoutButton:()=>Oe,SessionContext:()=>x,SessionProvider:()=>P,Table:()=>qe,TableColumn:()=>j,Text:()=>ze,ThingContext:()=>Ie,ThingProvider:()=>K,Value:()=>Ct,Video:()=>kr,useDataset:()=>$,useFile:()=>tt,useSession:()=>Hr,useThing:()=>ar});var b=f(156),_=f.n(b),A=f(577),T=f(606);const x=(0,b.createContext)({login:T.login,logout:T.logout,fetch:T.fetch,session:(0,T.getDefaultSession)(),sessionRequestInProgress:!0,profile:void 0}),P=({sessionId:Ke,children:mt,onError:ot,sessionRequestInProgress:Le,restorePreviousSession:ct,skipLoadingProfile:Qt,onSessionRestore:qt})=>{const er=ct||typeof qt<"u",[Ht,ue]=(0,b.useState)((0,T.getDefaultSession)()),[pe,Tt]=(0,b.useState)();(0,b.useEffect)(()=>{qt!==void 0&&(0,T.onSessionRestore)(qt)},[qt]);const xt=typeof Le>"u"?!Ht.info.isLoggedIn:Le,[Pt,Xt]=(0,b.useState)(xt);let tr;typeof window<"u"&&(tr=window.location),(0,b.useEffect)(()=>{(0,T.handleIncomingRedirect)({url:window.location.href,restorePreviousSession:er}).then(async Zt=>{if(Qt!==!0&&Zt?.webId!==void 0){const yr=await(0,A.getProfileAll)(Zt?.webId,{fetch:Ht.fetch});Tt(yr)}}).catch(Zt=>{if(ot)ot(Zt);else throw Zt}).finally(()=>{Xt(!1)}),(0,T.getDefaultSession)().on("logout",()=>{ue((0,T.getDefaultSession)())})},[Ht,Ke,ot,tr,er,Qt]);const Nr=async Zt=>{Xt(!0);try{await(0,T.login)(Zt)}catch(yr){if(ot)ot(yr);else throw yr}finally{Xt(!1)}},Vt=async()=>{try{await(0,T.logout)(),Tt(void 0)}catch(Zt){if(ot)ot(Zt);else throw Zt}};return _().createElement(x.Provider,{value:{session:Ht,login:Nr,logout:Vt,sessionRequestInProgress:Pt,setSessionRequestInProgress:Xt,fetch:T.fetch,profile:pe}},mt)};function R({saveLocation:Ke,onError:mt,onSave:ot,inputProps:Le,autosave:ct}){const{fetch:Qt}=(0,b.useContext)(x),qt=async er=>{const Ht=er.target;if(Ht.files&&ct)try{const ue=await(0,A.saveFileInContainer)(Ke,Ht.files[0],{slug:Ht.files[0].name?Ht.files[0].name:void 0,fetch:Qt});ot&&ot(ue)}catch(ue){mt&&mt(ue)}};return _().createElement(_().Fragment,null,_().createElement("input",Object.assign({type:"file"},Le,{onChange:er=>qt(er),"data-testid":"form-input"})))}var F=f(928),I=f.n(F);function $(Ke,mt){const{fetch:ot}=(0,b.useContext)(x),{solidDataset:Le}=(0,b.useContext)(W),{data:ct,error:Qt}=I()(Ke?[Ke,mt,ot]:null,()=>{const er=Object.assign({fetch:ot},mt);return(0,A.getSolidDataset)(Ke,er)});return{dataset:Ke?ct:Le,error:Qt}}const B=(0,b.createContext)({solidDataset:void 0,setDataset:()=>{}}),W=B,Y=({children:Ke,onError:mt,solidDataset:ot,datasetUrl:Le,loading:ct,loadingComponent:Qt})=>{const{dataset:qt,error:er}=$(Le);er&&mt&&mt(er);const Ht=ot??qt,[ue,pe]=(0,b.useState)(Ht);(0,b.useEffect)(()=>{pe(Ht)},[Ht]);let Tt=Qt&&_().createElement(Qt,null)||ct||_().createElement("span",null,"Fetching data...");return Qt===null&&(Tt=null),_().createElement(B.Provider,{value:{solidDataset:ue,setDataset:pe}},ue?Ke:Tt)},q=(0,b.createContext)({thing:null,setThing:()=>{}}),Ie=q,K=({children:Ke,thing:mt,thingUrl:ot})=>{const{solidDataset:Le}=(0,b.useContext)(W);let ct=mt;Le&&ot&&(ct=(0,A.getThing)(Le,ot));const[Qt,qt]=(0,b.useState)(ct||null);return(0,b.useEffect)(()=>{Le&&ot?qt((0,A.getThing)(Le,ot)):mt&&qt(mt)},[Le,ot,mt]),_().createElement(q.Provider,{value:{thing:Qt,setThing:qt}},Ke)},ie=async(Ke,mt,ot,Le,ct,Qt,qt)=>{try{return ct!==void 0&&mt.size>ct*1024?(ot.setCustomValidity(`The selected file must not be larger than ${ct}kB`),ot.reportValidity(),null):(ot.setCustomValidity(""),await(0,A.overwriteFile)(Ke,mt,{fetch:Le}),Qt&&Qt(),URL.createObjectURL(mt))}catch(er){return qt&&qt(er),null}},ge=async(Ke,mt)=>await(0,A.getFile)(Ke,{fetch:mt});function Se(Ke,mt,ot,Le){switch(Ke){case"boolean":return(0,A.getBoolean)(mt,ot);case"datetime":return(0,A.getDatetime)(mt,ot);case"decimal":return(0,A.getDecimal)(mt,ot);case"integer":return(0,A.getInteger)(mt,ot);case"url":return(0,A.getUrl)(mt,ot);default:return Le?(0,A.getStringWithLocale)(mt,ot,Le):(0,A.getStringNoLocale)(mt,ot)}}function et(Ke,mt,ot,Le){switch(Ke){case"boolean":return(0,A.getBooleanAll)(mt,ot);case"datetime":return(0,A.getDatetimeAll)(mt,ot);case"decimal":return(0,A.getDecimalAll)(mt,ot);case"integer":return(0,A.getIntegerAll)(mt,ot);case"url":return(0,A.getUrlAll)(mt,ot);default:return Le?(0,A.getStringWithLocaleAll)(mt,ot,Le):(0,A.getStringNoLocaleAll)(mt,ot)}}function st(Ke,mt,ot,Le,ct){return Le.find(Qt=>Ke(mt,ot,Qt,ct))||Le[0]}function Ne(Ke){const{dataset:mt,thing:ot,properties:Le,property:ct,type:Qt,locale:qt}=Ke,{solidDataset:er,setDataset:Ht=()=>{}}=(0,b.useContext)(W),ue=mt||er,{thing:pe,setThing:Tt=()=>{}}=(0,b.useContext)(Ie),xt=ot||pe||void 0;let Pt;xt||(Pt=new Error("Thing not found as property or in context"));const Xt=xt&&Le?st(Se,Qt,xt,Le,qt)||Le[0]:ct;if(!Xt)throw new Error("No property provided");const tr=xt&&Xt?Se(Qt,xt,Xt,qt):null;return{dataset:ue,thing:xt,property:Xt,error:Pt,value:tr,setDataset:Ht,setThing:Tt}}function gt(){const[Ke,mt]=(0,b.useState)(null);return(0,b.useEffect)(()=>{const ot=document.createElement("input");ot.type="datetime-local",mt(ot.type!=="text")},[]),Ke}async function ve(Ke,mt){const ot=await(0,A.getSolidDataset)(Ke);mt(ot)}function tt(Ke){const[mt,ot]=(0,b.useState)(),[Le,ct]=(0,b.useState)(!1),[Qt,qt]=(0,b.useState)(),{fetch:er}=(0,b.useContext)(x);return(0,b.useEffect)(()=>{Ke&&(ct(!0),ge(Ke,er).then(Ht=>{qt(Ht),ct(!1)}).catch(Ht=>{ot(Ht),ct(!1)}))},[Ke,er]),{error:mt,inProgress:Le,data:Qt}}var J=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};function xe(Ke){var{thing:mt,property:ot,properties:Le,edit:ct,autosave:Qt,allowDelete:qt,onSave:er,onError:Ht,maxSize:ue,alt:pe,inputProps:Tt,errorComponent:xt,loadingComponent:Pt,deleteComponent:Xt,saveLocation:tr,solidDataset:Nr}=Ke,Vt=J(Ke,["thing","property","properties","edit","autosave","allowDelete","onSave","onError","maxSize","alt","inputProps","errorComponent","loadingComponent","deleteComponent","saveLocation","solidDataset"]);const{fetch:Zt}=(0,b.useContext)(x),yr=Ne({thing:mt,property:ot,properties:Le,type:"url"}),{value:ir,thing:Fr,error:Er}=yr;let Gr;ir||(Gr=new Error("No value found for property."));const pr=!Fr&&!Er,[or,Gt]=(0,b.useState)(Er??Gr);(0,b.useEffect)(()=>{or&&Ht&&Ht(or)},[or,Ht,xt]);const[Jr,xn]=(0,b.useState)(),{data:un,error:Dr,inProgress:Sn}=tt(ir);(0,b.useEffect)(()=>{if(Sn)return;if(Dr){Gt(Dr);return}const An=un&&URL.createObjectURL(un);An&&xn(An)},[un,Sn,Dr]);const Dn=async()=>{if(!(!mt||!Nr||!ot||typeof ir!="string"||!Qt))try{const An=(0,A.removeUrl)(mt,ot,ir),ji=(0,A.setThing)(Nr,An),ui=(0,A.getSourceUrl)(Nr);if(!ui)return;await(0,A.saveSolidDatasetAt)(ui,ji,{fetch:Zt})}catch(An){Gt(An)}},lr=async An=>{const ji=An.files;if(Qt&&ji&&ji.length>0){if(ir){const ui=await ie(ir,ji[0],An,Zt,ue,er,Ht);ui&&xn(ui)}else if(!ir&&tr){const ui=await(0,A.saveFileInContainer)(tr,ji[0],{fetch:Zt}),Ra=(0,A.getSourceUrl)(ui);if(Ra&&mt&&ot&&Nr){xn(Ra);try{const Qi=(0,A.addUrl)(mt,ot,Ra),ci=(0,A.setThing)(Nr,Qi),v=(0,A.getSourceUrl)(Nr);if(!v)return;await(0,A.saveSolidDatasetAt)(v,ci,{fetch:Zt})}catch(Qi){Gt(Qi)}}}}};let li=null;if(pr||Sn){let An=Pt&&_().createElement(Pt,null)||_().createElement("span",null,"fetching data in progress");return Pt===null&&(An=null),An}return or?li=xt?_().createElement(xt,{error:or}):_().createElement("span",null,or.toString()):ir&&(li=_().createElement("img",Object.assign({src:Jr,alt:pe??""},Vt))),_().createElement(_().Fragment,null,li,ct&&_().createElement("input",Object.assign({},Tt,{type:"file",accept:"image/*",onChange:An=>lr(An.target)})),qt&&(Xt?_().createElement(Xt,{onClick:Dn}):_().createElement("button",{type:"button",onClick:Dn},"Delete")))}var Xe=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};const je=Ke=>{var mt;const{thing:ot,solidDataset:Le,property:ct,properties:Qt,saveDatasetTo:qt,onSave:er,onError:Ht,edit:ue,autosave:pe,inputProps:Tt}=Ke,xt=Xe(Ke,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:Pt}=(0,b.useContext)(x),{value:Xt,thing:tr,property:Nr,dataset:Vt,setDataset:Zt,error:yr}=Ne({dataset:Le,thing:ot,type:"datetime",property:ct,properties:Qt}),ir=gt();(0,b.useEffect)(()=>{yr&&Ht&&Ht(yr)},[yr,Ht]);const Fr=Xt?Xt.toISOString().substring(0,Xt.toISOString().length-5):null,[Er,Gr]=(0,b.useState)(Fr);let pr="";ir||(pr=Er?.split(/T(.+)/)[0].toString());let or="00:00";ir||(or=(mt=Er?.split(/T(.+)/)[1])===null||mt===void 0?void 0:mt.toString());const[Gt,Jr]=(0,b.useState)(or),[xn,un]=(0,b.useState)(pr);(0,b.useEffect)(()=>{!Gt&&!xn||ir||Gr(`${xn??""}T${Gt??"00:00"}`)},[Gt,xn,ir]);const Dr=async Dn=>{if(Fr!==Er&&tr&&Vt&&Dn.target.reportValidity()){const lr=Er,li=(0,A.setDatetime)(tr,Nr,new Date(`${lr}Z`));try{let An;qt?(An=await(0,A.saveSolidDatasetAt)(qt,(0,A.setThing)(Vt,li),{fetch:Pt}),await ve(qt,Zt)):(0,A.hasResourceInfo)(Vt)?(An=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)(Vt),(0,A.setThing)(Vt,li),{fetch:Pt}),await ve((0,A.getSourceUrl)(Vt),Zt)):Ht&&Ht(new Error("Please provide saveDatasetTo location for new data")),!yr&&er&&er(An,li)}catch(An){Ht&&Ht(An)}}};let Sn;return ir?Sn="datetime-local":Sn="datetime-workaround",_().createElement(_().Fragment,null,!ue&&Vt&&tr&&_().createElement("span",Object.assign({},xt),`${Er}`),ue&&Vt&&tr&&Sn==="datetime-local"&&_().createElement("input",Object.assign({type:Sn,"aria-label":"Date and Time",step:"any"},Tt,{onChange:Dn=>{Gr(Dn.target.value)},onBlur:Dn=>pe&&Dr(Dn),value:Er,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}",placeholder:"yyyy-mm-ddThh:mm"})),ue&&Vt&&tr&&Sn==="datetime-workaround"&&_().createElement(_().Fragment,null,_().createElement("input",Object.assign({type:"date","aria-label":"Date",step:"any"},Tt,{onChange:Dn=>{un(Dn.target.value)},onBlur:Dn=>pe&&Dr(Dn),value:xn,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",placeholder:"yyyy-mm-dd"})),_().createElement("input",{type:"time","aria-label":"Time",value:Gt,onChange:Dn=>Jr(Dn.target.value),onBlur:Dn=>pe&&Dr(Dn),pattern:"[0-9]{2}:[0-9]{2}"})))};je.defaultProps={autosave:!1,edit:!1};const dt=je;var It=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};const Mt=Ke=>{var mt;const{thing:ot,solidDataset:Le,property:ct,properties:Qt,saveDatasetTo:qt,locale:er,onSave:Ht,onError:ue,edit:pe,autosave:Tt,inputProps:xt}=Ke,Pt=It(Ke,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","edit","autosave","inputProps"]),{fetch:Xt}=(0,b.useContext)(x),{value:tr,thing:Nr,property:Vt,dataset:Zt,setDataset:yr,error:ir}=Ne({dataset:Le,thing:ot,type:"string",property:ct,properties:Qt,locale:er});(0,b.useEffect)(()=>{ir&&ue&&ue(ir)},[ir,ue]);const Fr=(mt=tr?.toString())!==null&&mt!==void 0?mt:"",[Er,Gr]=(0,b.useState)(Fr),pr=async or=>{if(Fr!==Er&&Nr&&Zt&&or.target.reportValidity()){let Gt;er?Gt=(0,A.setStringWithLocale)(Nr,Vt,Er,er):Gt=(0,A.setStringNoLocale)(Nr,Vt,Er);try{let Jr;qt?(Jr=await(0,A.saveSolidDatasetAt)(qt,(0,A.setThing)(Zt,Gt),{fetch:Xt}),await ve(qt,yr)):(0,A.hasResourceInfo)(Zt)?(Jr=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)(Zt),(0,A.setThing)(Zt,Gt),{fetch:Xt}),await ve((0,A.getSourceUrl)(Zt),yr)):ue&&ue(new Error("Please provide saveDatasetTo location for new data")),!ir&&Ht&&Ht(Jr,Gt)}catch(Jr){ue&&ue(Jr)}}};return _().createElement(_().Fragment,null,!pe&&Zt&&Nr&&_().createElement("span",Object.assign({},Pt),Er),pe&&Zt&&Nr&&_().createElement("input",Object.assign({type:"text"},xt,{onChange:or=>{Gr(or.target.value)},onBlur:or=>Tt&&pr(or),value:Er})))};Mt.defaultProps={autosave:!1,edit:!1};const Me=Mt;var le=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};const Te=Ke=>{var mt;const{thing:ot,solidDataset:Le,property:ct,properties:Qt,saveDatasetTo:qt,onSave:er,onError:Ht,edit:ue,autosave:pe,inputProps:Tt}=Ke,xt=le(Ke,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:Pt}=(0,b.useContext)(x),{value:Xt,thing:tr,property:Nr,dataset:Vt,setDataset:Zt,error:yr}=Ne({dataset:Le,thing:ot,type:"boolean",property:ct,properties:Qt});(0,b.useEffect)(()=>{yr&&Ht&&Ht(yr)},[yr,Ht]);let ir=Xt,Fr=!1;Fr=(mt=Xt)!==null&&mt!==void 0?mt:!1,ir=Fr.toString();const[Er,Gr]=(0,b.useState)(ir),[pr,or]=(0,b.useState)(Fr);(0,b.useEffect)(()=>{Gr(pr.toString())},[pr]);const Gt=async Jr=>{if(ir!==Er&&tr&&Vt&&Jr.target.reportValidity()){const xn=(0,A.setBoolean)(tr,Nr,pr);try{let un;qt?(un=await(0,A.saveSolidDatasetAt)(qt,(0,A.setThing)(Vt,xn),{fetch:Pt}),await ve(qt,Zt)):(0,A.hasResourceInfo)(Vt)?(un=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)(Vt),(0,A.setThing)(Vt,xn),{fetch:Pt}),await ve((0,A.getSourceUrl)(Vt),Zt)):Ht&&Ht(new Error("Please provide saveDatasetTo location for new data")),!yr&&er&&er(un,xn)}catch(un){Ht&&Ht(un)}}};return _().createElement(_().Fragment,null,!ue&&Vt&&tr&&_().createElement("span",Object.assign({},xt),`${Er}`),ue&&Vt&&tr&&_().createElement("input",Object.assign({type:"checkbox",checked:pr},Tt,{onChange:Jr=>{or(Jr.target.checked)},onBlur:Jr=>pe&&Gt(Jr),value:Er})))};Te.defaultProps={autosave:!1,edit:!1};const Je=Te;var se=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};const M=Ke=>{var mt;const{thing:ot,solidDataset:Le,property:ct,properties:Qt,saveDatasetTo:qt,onSave:er,onError:Ht,edit:ue,autosave:pe,inputProps:Tt}=Ke,xt=se(Ke,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:Pt}=(0,b.useContext)(x),{value:Xt,thing:tr,property:Nr,dataset:Vt,setDataset:Zt,error:yr}=Ne({dataset:Le,thing:ot,type:"url",property:ct,properties:Qt});(0,b.useEffect)(()=>{yr&&Ht&&Ht(yr)},[yr,Ht]);const ir=(mt=Xt?.toString())!==null&&mt!==void 0?mt:"",[Fr,Er]=(0,b.useState)(ir),Gr=async pr=>{if(ir!==Fr&&tr&&Vt&&pr.target.reportValidity()){const or=(0,A.setUrl)(tr,Nr,Fr);try{let Gt;qt?(Gt=await(0,A.saveSolidDatasetAt)(qt,(0,A.setThing)(Vt,or),{fetch:Pt}),await ve(qt,Zt)):(0,A.hasResourceInfo)(Vt)?(Gt=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)(Vt),(0,A.setThing)(Vt,or),{fetch:Pt}),await ve((0,A.getSourceUrl)(Vt),Zt)):Ht&&Ht(new Error("Please provide saveDatasetTo location for new data")),!yr&&er&&er(Gt,or)}catch(Gt){Ht&&Ht(Gt)}}};return _().createElement(_().Fragment,null,!ue&&Vt&&tr&&_().createElement("span",Object.assign({},xt),`${Fr}`),ue&&Vt&&tr&&_().createElement("input",Object.assign({type:"url"},Tt,{onChange:pr=>{Er(pr.target.value)},onBlur:pr=>pe&&Gr(pr),value:Fr})))};M.defaultProps={autosave:!1,edit:!1};const D=M;var G=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};const re=Ke=>{var mt;const{thing:ot,solidDataset:Le,property:ct,properties:Qt,saveDatasetTo:qt,onSave:er,onError:Ht,edit:ue,autosave:pe,inputProps:Tt}=Ke,xt=G(Ke,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:Pt}=(0,b.useContext)(x),{value:Xt,thing:tr,property:Nr,dataset:Vt,setDataset:Zt,error:yr}=Ne({dataset:Le,thing:ot,type:"integer",property:ct,properties:Qt});(0,b.useEffect)(()=>{yr&&Ht&&Ht(yr)},[yr,Ht]);const ir=(mt=Xt?.toString())!==null&&mt!==void 0?mt:"",[Fr,Er]=(0,b.useState)(ir),Gr=async pr=>{if(ir!==Fr&&tr&&Vt&&pr.target.reportValidity()){const or=(0,A.setInteger)(tr,Nr,parseInt(Fr,10));try{let Gt;qt?(Gt=await(0,A.saveSolidDatasetAt)(qt,(0,A.setThing)(Vt,or),{fetch:Pt}),await ve(qt,Zt)):(0,A.hasResourceInfo)(Vt)?(Gt=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)(Vt),(0,A.setThing)(Vt,or),{fetch:Pt}),await ve((0,A.getSourceUrl)(Vt),Zt)):Ht&&Ht(new Error("Please provide saveDatasetTo location for new data")),!yr&&er&&er(Gt,or)}catch(Gt){Ht&&Ht(Gt)}}};return _().createElement(_().Fragment,null,!ue&&Vt&&tr&&_().createElement("span",Object.assign({},xt),`${Fr}`),ue&&Vt&&tr&&_().createElement("input",Object.assign({type:"number",step:"any"},Tt,{onChange:pr=>{Er(pr.target.value)},onBlur:pr=>pe&&Gr(pr),value:Fr})))};re.defaultProps={autosave:!1,edit:!1};const we=re;var Ce=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};const at=Ke=>{var mt;const{thing:ot,solidDataset:Le,property:ct,properties:Qt,saveDatasetTo:qt,onSave:er,onError:Ht,edit:ue,autosave:pe,inputProps:Tt}=Ke,xt=Ce(Ke,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:Pt}=(0,b.useContext)(x),{value:Xt,thing:tr,property:Nr,dataset:Vt,setDataset:Zt,error:yr}=Ne({dataset:Le,thing:ot,type:"decimal",property:ct,properties:Qt});(0,b.useEffect)(()=>{yr&&Ht&&Ht(yr)},[yr,Ht]);const ir=(mt=Xt?.toString())!==null&&mt!==void 0?mt:"",[Fr,Er]=(0,b.useState)(ir),Gr=async pr=>{if(ir!==Fr&&tr&&Vt&&pr.target.reportValidity()){const or=(0,A.setDecimal)(tr,Nr,parseFloat(Fr));try{let Gt;qt?(Gt=await(0,A.saveSolidDatasetAt)(qt,(0,A.setThing)(Vt,or),{fetch:Pt}),await ve(qt,Zt)):(0,A.hasResourceInfo)(Vt)?(Gt=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)(Vt),(0,A.setThing)(Vt,or),{fetch:Pt}),await ve((0,A.getSourceUrl)(Vt),Zt)):Ht&&Ht(new Error("Please provide saveDatasetTo location for new data")),!yr&&er&&er(Gt,or)}catch(Gt){Ht&&Ht(Gt)}}};return _().createElement(_().Fragment,null,!ue&&Vt&&tr&&_().createElement("span",Object.assign({},xt),`${Fr}`),ue&&Vt&&tr&&_().createElement("input",Object.assign({type:"number",step:"any"},Tt,{onChange:pr=>{Er(pr.target.value)},onBlur:pr=>pe&&Gr(pr),value:Fr})))};at.defaultProps={autosave:!1,edit:!1};const Re=at;var ht=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};function Ct(Ke){const mt=Ke,{dataType:ot}=mt,Le=ht(mt,["dataType"]),{thing:ct,solidDataset:Qt,property:qt,properties:er,edit:Ht,loadingComponent:ue,errorComponent:pe,locale:Tt}=Le,{thing:xt,value:Pt,error:Xt}=Ne({dataset:Qt,thing:ct,property:qt,properties:er,type:ot,locale:Tt});let tr;!Ht&&!Pt&&ot!=="boolean"&&(tr=new Error("No value found for property."));const Nr=!xt&&!Xt,[Vt]=(0,b.useState)(Xt??tr);if(Nr){let yr=ue&&_().createElement(ue,null)||_().createElement("span",null,"fetching data in progress");return ue===null&&(yr=null),yr}if(Vt)return pe?_().createElement(pe,{error:Vt}):_().createElement("span",null,Vt.toString());let Zt=Me;switch(ot){case"boolean":Zt=Je;break;case"datetime":Zt=dt;break;case"decimal":Zt=Re;break;case"integer":Zt=we;break;case"url":Zt=D;break;default:Zt=Me}return _().createElement(Zt,Object.assign({},Le))}Ct.defaultProps={autosave:!1,edit:!1};var vt=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};function We(Ke){var{children:mt,property:ot,properties:Le,thing:ct,solidDataset:Qt,autosave:qt,rel:er,target:Ht,edit:ue,loadingComponent:pe,errorComponent:Tt,onSave:xt,onError:Pt}=Ke,Xt=vt(Ke,["children","property","properties","thing","solidDataset","autosave","rel","target","edit","loadingComponent","errorComponent","onSave","onError"]);const{value:tr,thing:Nr,property:Vt,dataset:Zt,error:yr}=Ne({dataset:Qt,thing:ct,property:ot,properties:Le,type:"url"});let ir;!ue&&!tr&&(ir=new Error("URL not found for given property"));const Fr=!Nr&&!yr,[Er]=(0,b.useState)(yr??ir);if(Fr){let pr=pe&&_().createElement(pe,null)||_().createElement("span",null,"fetching data in progress");return pe===null&&(pr=null),pr}if(Er)return Tt?_().createElement(Tt,{error:Er}):_().createElement("span",null,Er.toString());const Gr=er||(Ht==="_blank"?"noopener noreferrer":"nofollow");return ue?_().createElement(Ct,{dataType:"url",solidDataset:Zt,thing:Nr,property:Vt,autosave:qt,onSave:xt,onError:Pt,edit:!0}):_().createElement("a",Object.assign({href:tr,rel:Gr,target:Ht},Xt),mt??tr)}const $e=({oidcIssuer:Ke,redirectUrl:mt,children:ot,authOptions:Le,onError:ct})=>{const Qt=Object.assign({redirectUrl:mt,oidcIssuer:Ke},Le),{login:qt,setSessionRequestInProgress:er}=(0,b.useContext)(x);async function Ht(){er(!0);try{await qt(Qt),er(!1)}catch(pe){er(!1),ct&&ct(pe)}}function ue(pe){return pe.preventDefault(),pe.key==="Enter"?Ht():Promise.resolve()}return ot?_().createElement("div",{role:"button",tabIndex:0,onClick:Ht,onKeyDown:ue},ot):_().createElement("button",{type:"button",onClick:Ht,onKeyDown:ue},"Log In")},Oe=({children:Ke,onLogout:mt,onError:ot})=>{const{logout:Le}=(0,b.useContext)(x);async function ct(){try{await Le(),mt&&mt()}catch(qt){ot&&ot(qt)}}function Qt(qt){return qt.preventDefault(),qt.key==="Enter"?ct():Promise.resolve()}return Ke?_().createElement("div",{role:"button",tabIndex:0,onClick:ct,onKeyDown:Qt},Ke):_().createElement("button",{type:"button",onClick:ct,onKeyDown:Qt},"Log Out")};var lt=f(767);function Q(Ke){const{children:mt,solidDataset:ot,datasetUrl:Le,thing:ct,thingUrl:Qt,onError:qt,loadingComponent:er}=Ke;return _().createElement(Y,{onError:qt,solidDataset:ot,datasetUrl:Le,loadingComponent:er},_().createElement(K,{thing:ct,thingUrl:Qt},mt))}const k=Q;var V=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};function j(Ke){throw new Error("Can't use TableColumn outside a Table.")}function qe(Ke){var{children:mt,emptyStateComponent:ot,things:Le,filter:ct,ascIndicator:Qt,descIndicator:qt,getRowProps:er}=Ke,Ht=V(Ke,["children","emptyStateComponent","things","filter","ascIndicator","descIndicator","getRowProps"]);const{columns:ue,data:pe}=(0,b.useMemo)(()=>{const Vt=[],Zt=Le.map(()=>({}));return b.Children.forEach(mt,(yr,ir)=>{if(yr){const{property:Fr,header:Er,body:Gr,dataType:pr="string",locale:or,multiple:Gt=!1,sortable:Jr,sortFn:xn,filterable:un}=yr.props;if(Vt.push({Header:Er??`${Fr}`,accessor:`col${ir}`,disableGlobalFilter:!un,disableSortBy:!Jr,Cell:Gr??(({value:Dr})=>Dr!=null?`${Dr}`:"")}),xn){const Dr=(Sn,Dn,lr)=>{const li=Sn.values[lr],An=Dn.values[lr];return xn(li,An)};Vt[ir].sortType=Dr}else pr==="string"&&(Vt[ir].sortType=pr),(pr==="integer"||pr==="decimal")&&(Vt[ir].sortType="number");Le.forEach((Dr,Sn)=>{Zt[Sn][`col${ir}`]=Gt?et(pr,Dr.thing,Fr,or):Se(pr,Dr.thing,Fr,or)})}}),{columns:Vt,data:Zt}},[mt,Le]),Tt=(0,lt.useTable)({columns:ue,data:pe,initialState:{globalFilter:ct||void 0}},lt.useGlobalFilter,lt.useSortBy),{getTableProps:xt,getTableBodyProps:Pt,headerGroups:Xt,rows:tr,prepareRow:Nr}=Tt;return tr.length?_().createElement("table",Object.assign({},xt(),Ht),_().createElement("thead",null,Xt.map(Vt=>_().createElement("tr",Object.assign({},Vt.getHeaderGroupProps()),Vt.headers.map(Zt=>_().createElement("th",Object.assign({},Zt.getHeaderProps(Zt.getSortByToggleProps())),Zt.render("Header"),Zt.isSorted&&(Zt.isSortedDesc?qt:Qt)))))),_().createElement("tbody",Object.assign({},Pt()),tr.map(Vt=>{Nr(Vt);const Zt=Le[Vt.index].dataset,yr=Le[Vt.index].thing;return _().createElement("tr",Object.assign({},Vt.getRowProps(er(Vt,yr,Zt))),_().createElement(k,{solidDataset:Zt,thing:yr},Vt.cells.map(ir=>_().createElement("td",Object.assign({},ir.getCellProps()),ir.render("Cell")))))}))):ot?_().createElement(ot,null):null}qe.defaultProps={filter:void 0,ascIndicator:_().createElement("span",{role:"img","aria-label":"Sorted in ascending order"}," ","🔼"),descIndicator:_().createElement("span",{role:"img","aria-label":"Sorted in descending order"}," ","🔽"),getRowProps:()=>({})};var Ze=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};function ze(Ke){var{thing:mt,solidDataset:ot,property:Le,properties:ct,saveDatasetTo:Qt,locale:qt,onSave:er,onError:Ht,inputProps:ue,errorComponent:pe,loadingComponent:Tt,edit:xt=!1,autosave:Pt=!1}=Ke,Xt=Ze(Ke,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","inputProps","errorComponent","loadingComponent","edit","autosave"]);const{fetch:tr}=(0,b.useContext)(x),{error:Nr,value:Vt,thing:Zt,property:yr,dataset:ir,setDataset:Fr}=Ne({dataset:ot,thing:mt,property:Le,properties:ct,type:"string",locale:qt});let Er;!xt&&!Vt&&(Er=new Error("No value found for property."));const Gr=!Zt&&!Nr,[pr]=(0,b.useState)(Nr??Er);(0,b.useEffect)(()=>{pr&&Ht&&Ht(pr)},[pr,Ht]);const[or,Gt]=(0,b.useState)(Vt),[,Jr]=(0,b.useState)(),[xn,un]=(0,b.useState)(Vt),Dr=async Sn=>{if(xn!==Sn.target.value&&Zt&&ir){const Dn=Sn.target.value;let lr;qt?lr=(0,A.setStringWithLocale)(Zt,yr,Dn,qt):lr=(0,A.setStringNoLocale)(Zt,yr,Dn);try{let li;Qt?(li=await(0,A.saveSolidDatasetAt)(Qt,(0,A.setThing)(ir,lr),{fetch:tr}),await ve(Qt,Fr)):(0,A.hasResourceInfo)(ir)?(li=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)(ir),(0,A.setThing)(ir,lr),{fetch:tr}),await ve((0,A.getSourceUrl)(ir),Fr)):Jr(()=>{throw new Error("Please provide saveDatasetTo location for new data")}),er&&er(li,lr)}catch(li){Ht&&Ht(li)}}};if(Gr){let Sn=Tt&&_().createElement(Tt,null)||_().createElement("span",null,"fetching data in progress");return Tt===null&&(Sn=null),Sn}return pr?pe?_().createElement(pe,{error:pr}):_().createElement("span",null,pr.toString()):_().createElement(_().Fragment,null,!xt&&ir&&Zt&&_().createElement("span",Object.assign({},Xt),or),xt&&ir&&Zt&&_().createElement("input",Object.assign({type:ue&&ue.type?ue.type:"text"},ue,{onFocus:Sn=>un(Sn.target.value),onChange:Sn=>Gt(Sn.target.value),onBlur:Sn=>Pt&&Dr(Sn),value:or||""})))}var Jt=function(Ke,mt){var ot={};for(var Le in Ke)Object.prototype.hasOwnProperty.call(Ke,Le)&&mt.indexOf(Le)<0&&(ot[Le]=Ke[Le]);if(Ke!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Le=Object.getOwnPropertySymbols(Ke);ct<Le.length;ct++)mt.indexOf(Le[ct])<0&&Object.prototype.propertyIsEnumerable.call(Ke,Le[ct])&&(ot[Le[ct]]=Ke[Le[ct]]);return ot};function kr(Ke){var{property:mt,properties:ot,thing:Le,edit:ct,autosave:Qt,onSave:qt,onError:er,maxSize:Ht,inputProps:ue,errorComponent:pe,loadingComponent:Tt}=Ke,xt=Jt(Ke,["property","properties","thing","edit","autosave","onSave","onError","maxSize","inputProps","errorComponent","loadingComponent"]);const{fetch:Pt}=(0,b.useContext)(x),Xt=Ne({thing:Le,property:mt,properties:ot,type:"url"}),{value:tr,thing:Nr,error:Vt}=Xt;let Zt;!ct&&!tr&&(Zt=new Error("No value found for property."));const yr=!Nr&&!Vt,[ir,Fr]=(0,b.useState)(Vt??Zt);(0,b.useEffect)(()=>{ir&&er&&er(ir)},[ir,er,pe]);const[Er,Gr]=(0,b.useState)(""),{data:pr,error:or,inProgress:Gt}=tt(tr);(0,b.useEffect)(()=>{if(Gt)return;if(or){Fr(or);return}const un=pr&&URL.createObjectURL(pr);un&&Gr(un)},[pr,Gt,or]);const Jr=async un=>{const Dr=un.files;if(Qt&&Dr&&Dr.length>0&&tr){const Sn=await ie(tr,Dr[0],un,Pt,Ht,qt,er);Sn&&Gr(Sn)}};let xn=null;if(yr||Gt){let un=Tt&&_().createElement(Tt,null)||_().createElement("span",null,"fetching data in progress");return Tt===null&&(un=null),un}return ir?xn=pe?_().createElement(pe,{error:ir}):_().createElement("span",null,ir.toString()):tr&&(xn=_().createElement("video",Object.assign({src:Er||tr,controls:!0},xt))),_().createElement(_().Fragment,null,xn,ct&&_().createElement("input",Object.assign({},ue,{type:"file",accept:"video/*",onChange:un=>Jr(un.target)})))}function Hr(){const{session:Ke,sessionRequestInProgress:mt,fetch:ot,login:Le,logout:ct}=(0,b.useContext)(x);return{session:Ke,sessionRequestInProgress:mt,fetch:ot,login:Le,logout:ct}}function ar(Ke,mt,ot){const{dataset:Le,error:ct}=$(Ke,ot),{thing:Qt}=(0,b.useContext)(Ie);return mt?Le?{thing:(0,A.getThing)(Le,mt),error:ct}:{thing:null,error:ct}:{thing:Qt||void 0,error:ct}}})(),m})())}(Ry)),Ry.exports}var m2=y2(),cv=function(t,r){return cv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},cv(t,r)};function Oo(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");cv(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var Ar=function(){return Ar=Object.assign||function(r){for(var i,a=1,s=arguments.length;a<s;a++){i=arguments[a];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(r[d]=i[d])}return r},Ar.apply(this,arguments)};function am(t,r){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&r.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(t);s<a.length;s++)r.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(t,a[s])&&(i[a[s]]=t[a[s]]);return i}function As(t,r,i){if(i||arguments.length===2)for(var a=0,s=r.length,d;a<s;a++)(d||!(a in r))&&(d||(d=Array.prototype.slice.call(r,0,a)),d[a]=r[a]);return t.concat(d||Array.prototype.slice.call(r))}function Ss(t,r){var i=r&&r.cache?r.cache:A2,a=r&&r.serializer?r.serializer:S2,s=r&&r.strategy?r.strategy:w2;return s(t,{cache:i,serializer:a})}function v2(t){return t==null||typeof t=="number"||typeof t=="boolean"}function b2(t,r,i,a){var s=v2(a)?a:i(a),d=r.get(s);return typeof d>"u"&&(d=t.call(this,a),r.set(s,d)),d}function k1(t,r,i){var a=Array.prototype.slice.call(arguments,3),s=i(a),d=r.get(s);return typeof d>"u"&&(d=t.apply(this,a),r.set(s,d)),d}function B1(t,r,i,a,s){return i.bind(r,t,a,s)}function w2(t,r){var i=t.length===1?b2:k1;return B1(t,this,i,r.cache.create(),r.serializer)}function _2(t,r){return B1(t,this,k1,r.cache.create(),r.serializer)}var S2=function(){return JSON.stringify(arguments)},E2=function(){function t(){this.cache=Object.create(null)}return t.prototype.get=function(r){return this.cache[r]},t.prototype.set=function(r,i){this.cache[r]=i},t}(),A2={create:function(){return new E2}},Es={variadic:_2},Rn;(function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(Rn||(Rn={}));var si;(function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"})(si||(si={}));var Ed;(function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"})(Ed||(Ed={}));function yS(t){return t.type===si.literal}function R2(t){return t.type===si.argument}function H1(t){return t.type===si.number}function j1(t){return t.type===si.date}function V1(t){return t.type===si.time}function K1(t){return t.type===si.select}function G1(t){return t.type===si.plural}function x2(t){return t.type===si.pound}function $1(t){return t.type===si.tag}function q1(t){return!!(t&&typeof t=="object"&&t.type===Ed.number)}function fv(t){return!!(t&&typeof t=="object"&&t.type===Ed.dateTime)}var z1=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,T2=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function C2(t){var r={};return t.replace(T2,function(i){var a=i.length;switch(i[0]){case"G":r.era=a===4?"long":a===5?"narrow":"short";break;case"y":r.year=a===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":r.month=["numeric","2-digit","short","long","narrow"][a-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":r.day=["numeric","2-digit"][a-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":r.weekday=a===4?"long":a===5?"narrow":"short";break;case"e":if(a<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");r.weekday=["short","long","narrow","short"][a-4];break;case"c":if(a<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");r.weekday=["short","long","narrow","short"][a-4];break;case"a":r.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":r.hourCycle="h12",r.hour=["numeric","2-digit"][a-1];break;case"H":r.hourCycle="h23",r.hour=["numeric","2-digit"][a-1];break;case"K":r.hourCycle="h11",r.hour=["numeric","2-digit"][a-1];break;case"k":r.hourCycle="h24",r.hour=["numeric","2-digit"][a-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":r.minute=["numeric","2-digit"][a-1];break;case"s":r.second=["numeric","2-digit"][a-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":r.timeZoneName=a<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),r}var O2=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function P2(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");for(var r=t.split(O2).filter(function(_){return _.length>0}),i=[],a=0,s=r;a<s.length;a++){var d=s[a],l=d.split("/");if(l.length===0)throw new Error("Invalid number skeleton");for(var c=l[0],p=l.slice(1),f=0,m=p;f<m.length;f++){var b=m[f];if(b.length===0)throw new Error("Invalid number skeleton")}i.push({stem:c,options:p})}return i}function I2(t){return t.replace(/^(.*?)-/,"")}var mS=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,W1=/^(@+)?(\+|#+)?[rs]?$/g,N2=/(\*)(0+)|(#+)(0+)|(0+)/g,J1=/^(0+)$/;function vS(t){var r={};return t[t.length-1]==="r"?r.roundingPriority="morePrecision":t[t.length-1]==="s"&&(r.roundingPriority="lessPrecision"),t.replace(W1,function(i,a,s){return typeof s!="string"?(r.minimumSignificantDigits=a.length,r.maximumSignificantDigits=a.length):s==="+"?r.minimumSignificantDigits=a.length:a[0]==="#"?r.maximumSignificantDigits=a.length:(r.minimumSignificantDigits=a.length,r.maximumSignificantDigits=a.length+(typeof s=="string"?s.length:0)),""}),r}function Y1(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function F2(t){var r;if(t[0]==="E"&&t[1]==="E"?(r={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(r={notation:"scientific"},t=t.slice(1)),r){var i=t.slice(0,2);if(i==="+!"?(r.signDisplay="always",t=t.slice(2)):i==="+?"&&(r.signDisplay="exceptZero",t=t.slice(2)),!J1.test(t))throw new Error("Malformed concise eng/scientific notation");r.minimumIntegerDigits=t.length}return r}function bS(t){var r={},i=Y1(t);return i||r}function D2(t){for(var r={},i=0,a=t;i<a.length;i++){var s=a[i];switch(s.stem){case"percent":case"%":r.style="percent";continue;case"%x100":r.style="percent",r.scale=100;continue;case"currency":r.style="currency",r.currency=s.options[0];continue;case"group-off":case",_":r.useGrouping=!1;continue;case"precision-integer":case".":r.maximumFractionDigits=0;continue;case"measure-unit":case"unit":r.style="unit",r.unit=I2(s.options[0]);continue;case"compact-short":case"K":r.notation="compact",r.compactDisplay="short";continue;case"compact-long":case"KK":r.notation="compact",r.compactDisplay="long";continue;case"scientific":r=Ar(Ar(Ar({},r),{notation:"scientific"}),s.options.reduce(function(p,f){return Ar(Ar({},p),bS(f))},{}));continue;case"engineering":r=Ar(Ar(Ar({},r),{notation:"engineering"}),s.options.reduce(function(p,f){return Ar(Ar({},p),bS(f))},{}));continue;case"notation-simple":r.notation="standard";continue;case"unit-width-narrow":r.currencyDisplay="narrowSymbol",r.unitDisplay="narrow";continue;case"unit-width-short":r.currencyDisplay="code",r.unitDisplay="short";continue;case"unit-width-full-name":r.currencyDisplay="name",r.unitDisplay="long";continue;case"unit-width-iso-code":r.currencyDisplay="symbol";continue;case"scale":r.scale=parseFloat(s.options[0]);continue;case"rounding-mode-floor":r.roundingMode="floor";continue;case"rounding-mode-ceiling":r.roundingMode="ceil";continue;case"rounding-mode-down":r.roundingMode="trunc";continue;case"rounding-mode-up":r.roundingMode="expand";continue;case"rounding-mode-half-even":r.roundingMode="halfEven";continue;case"rounding-mode-half-down":r.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":r.roundingMode="halfExpand";continue;case"integer-width":if(s.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");s.options[0].replace(N2,function(p,f,m,b,_,A){if(f)r.minimumIntegerDigits=m.length;else{if(b&&_)throw new Error("We currently do not support maximum integer digits");if(A)throw new Error("We currently do not support exact integer digits")}return""});continue}if(J1.test(s.stem)){r.minimumIntegerDigits=s.stem.length;continue}if(mS.test(s.stem)){if(s.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");s.stem.replace(mS,function(p,f,m,b,_,A){return m==="*"?r.minimumFractionDigits=f.length:b&&b[0]==="#"?r.maximumFractionDigits=b.length:_&&A?(r.minimumFractionDigits=_.length,r.maximumFractionDigits=_.length+A.length):(r.minimumFractionDigits=f.length,r.maximumFractionDigits=f.length),""});var d=s.options[0];d==="w"?r=Ar(Ar({},r),{trailingZeroDisplay:"stripIfInteger"}):d&&(r=Ar(Ar({},r),vS(d)));continue}if(W1.test(s.stem)){r=Ar(Ar({},r),vS(s.stem));continue}var l=Y1(s.stem);l&&(r=Ar(Ar({},r),l));var c=F2(s.stem);c&&(r=Ar(Ar({},r),c))}return r}var _y={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function U2(t,r){for(var i="",a=0;a<t.length;a++){var s=t.charAt(a);if(s==="j"){for(var d=0;a+1<t.length&&t.charAt(a+1)===s;)d++,a++;var l=1+(d&1),c=d<2?1:3+(d>>1),p="a",f=L2(r);for((f=="H"||f=="k")&&(c=0);c-- >0;)i+=p;for(;l-- >0;)i=f+i}else s==="J"?i+="H":i+=s}return i}function L2(t){var r=t.hourCycle;if(r===void 0&&t.hourCycles&&t.hourCycles.length&&(r=t.hourCycles[0]),r)switch(r){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var i=t.language,a;i!=="root"&&(a=t.maximize().region);var s=_y[a||""]||_y[i||""]||_y["".concat(i,"-001")]||_y["001"];return s[0]}var V0,M2=new RegExp("^".concat(z1.source,"*")),k2=new RegExp("".concat(z1.source,"*$"));function Nn(t,r){return{start:t,end:r}}var B2=!!String.prototype.startsWith&&"_a".startsWith("a",1),H2=!!String.fromCodePoint,j2=!!Object.fromEntries,V2=!!String.prototype.codePointAt,K2=!!String.prototype.trimStart,G2=!!String.prototype.trimEnd,$2=!!Number.isSafeInteger,q2=$2?Number.isSafeInteger:function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},dv=!0;try{var z2=X1("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");dv=((V0=z2.exec("a"))===null||V0===void 0?void 0:V0[0])==="a"}catch{dv=!1}var wS=B2?function(r,i,a){return r.startsWith(i,a)}:function(r,i,a){return r.slice(a,a+i.length)===i},hv=H2?String.fromCodePoint:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var a="",s=r.length,d=0,l;s>d;){if(l=r[d++],l>1114111)throw RangeError(l+" is not a valid code point");a+=l<65536?String.fromCharCode(l):String.fromCharCode(((l-=65536)>>10)+55296,l%1024+56320)}return a},_S=j2?Object.fromEntries:function(r){for(var i={},a=0,s=r;a<s.length;a++){var d=s[a],l=d[0],c=d[1];i[l]=c}return i},Q1=V2?function(r,i){return r.codePointAt(i)}:function(r,i){var a=r.length;if(!(i<0||i>=a)){var s=r.charCodeAt(i),d;return s<55296||s>56319||i+1===a||(d=r.charCodeAt(i+1))<56320||d>57343?s:(s-55296<<10)+(d-56320)+65536}},W2=K2?function(r){return r.trimStart()}:function(r){return r.replace(M2,"")},J2=G2?function(r){return r.trimEnd()}:function(r){return r.replace(k2,"")};function X1(t,r){return new RegExp(t,r)}var pv;if(dv){var SS=X1("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");pv=function(r,i){var a;SS.lastIndex=i;var s=SS.exec(r);return(a=s[1])!==null&&a!==void 0?a:""}}else pv=function(r,i){for(var a=[];;){var s=Q1(r,i);if(s===void 0||Z1(s)||Z2(s))break;a.push(s),i+=s>=65536?2:1}return hv.apply(void 0,a)};var Y2=function(){function t(r,i){i===void 0&&(i={}),this.message=r,this.position={offset:0,line:1,column:1},this.ignoreTag=!!i.ignoreTag,this.locale=i.locale,this.requiresOtherClause=!!i.requiresOtherClause,this.shouldParseSkeletons=!!i.shouldParseSkeletons}return t.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(r,i,a){for(var s=[];!this.isEOF();){var d=this.char();if(d===123){var l=this.parseArgument(r,a);if(l.err)return l;s.push(l.val)}else{if(d===125&&r>0)break;if(d===35&&(i==="plural"||i==="selectordinal")){var c=this.clonePosition();this.bump(),s.push({type:si.pound,location:Nn(c,this.clonePosition())})}else if(d===60&&!this.ignoreTag&&this.peek()===47){if(a)break;return this.error(Rn.UNMATCHED_CLOSING_TAG,Nn(this.clonePosition(),this.clonePosition()))}else if(d===60&&!this.ignoreTag&&gv(this.peek()||0)){var l=this.parseTag(r,i);if(l.err)return l;s.push(l.val)}else{var l=this.parseLiteral(r,i);if(l.err)return l;s.push(l.val)}}}return{val:s,err:null}},t.prototype.parseTag=function(r,i){var a=this.clonePosition();this.bump();var s=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:si.literal,value:"<".concat(s,"/>"),location:Nn(a,this.clonePosition())},err:null};if(this.bumpIf(">")){var d=this.parseMessage(r+1,i,!0);if(d.err)return d;var l=d.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!gv(this.char()))return this.error(Rn.INVALID_TAG,Nn(c,this.clonePosition()));var p=this.clonePosition(),f=this.parseTagName();return s!==f?this.error(Rn.UNMATCHED_CLOSING_TAG,Nn(p,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:si.tag,value:s,children:l,location:Nn(a,this.clonePosition())},err:null}:this.error(Rn.INVALID_TAG,Nn(c,this.clonePosition())))}else return this.error(Rn.UNCLOSED_TAG,Nn(a,this.clonePosition()))}else return this.error(Rn.INVALID_TAG,Nn(a,this.clonePosition()))},t.prototype.parseTagName=function(){var r=this.offset();for(this.bump();!this.isEOF()&&X2(this.char());)this.bump();return this.message.slice(r,this.offset())},t.prototype.parseLiteral=function(r,i){for(var a=this.clonePosition(),s="";;){var d=this.tryParseQuote(i);if(d){s+=d;continue}var l=this.tryParseUnquoted(r,i);if(l){s+=l;continue}var c=this.tryParseLeftAngleBracket();if(c){s+=c;continue}break}var p=Nn(a,this.clonePosition());return{val:{type:si.literal,value:s,location:p},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!Q2(this.peek()||0))?(this.bump(),"<"):null},t.prototype.tryParseQuote=function(r){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(r==="plural"||r==="selectordinal")break;return null;default:return null}this.bump();var i=[this.char()];for(this.bump();!this.isEOF();){var a=this.char();if(a===39)if(this.peek()===39)i.push(39),this.bump();else{this.bump();break}else i.push(a);this.bump()}return hv.apply(void 0,i)},t.prototype.tryParseUnquoted=function(r,i){if(this.isEOF())return null;var a=this.char();return a===60||a===123||a===35&&(i==="plural"||i==="selectordinal")||a===125&&r>0?null:(this.bump(),hv(a))},t.prototype.parseArgument=function(r,i){var a=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Rn.EXPECT_ARGUMENT_CLOSING_BRACE,Nn(a,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(Rn.EMPTY_ARGUMENT,Nn(a,this.clonePosition()));var s=this.parseIdentifierIfPossible().value;if(!s)return this.error(Rn.MALFORMED_ARGUMENT,Nn(a,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Rn.EXPECT_ARGUMENT_CLOSING_BRACE,Nn(a,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:si.argument,value:s,location:Nn(a,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Rn.EXPECT_ARGUMENT_CLOSING_BRACE,Nn(a,this.clonePosition())):this.parseArgumentOptions(r,i,s,a);default:return this.error(Rn.MALFORMED_ARGUMENT,Nn(a,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var r=this.clonePosition(),i=this.offset(),a=pv(this.message,i),s=i+a.length;this.bumpTo(s);var d=this.clonePosition(),l=Nn(r,d);return{value:a,location:l}},t.prototype.parseArgumentOptions=function(r,i,a,s){var d,l=this.clonePosition(),c=this.parseIdentifierIfPossible().value,p=this.clonePosition();switch(c){case"":return this.error(Rn.EXPECT_ARGUMENT_TYPE,Nn(l,p));case"number":case"date":case"time":{this.bumpSpace();var f=null;if(this.bumpIf(",")){this.bumpSpace();var m=this.clonePosition(),b=this.parseSimpleArgStyleIfPossible();if(b.err)return b;var _=J2(b.val);if(_.length===0)return this.error(Rn.EXPECT_ARGUMENT_STYLE,Nn(this.clonePosition(),this.clonePosition()));var A=Nn(m,this.clonePosition());f={style:_,styleLocation:A}}var T=this.tryParseArgumentClose(s);if(T.err)return T;var x=Nn(s,this.clonePosition());if(f&&wS(f?.style,"::",0)){var P=W2(f.style.slice(2));if(c==="number"){var b=this.parseNumberSkeletonFromString(P,f.styleLocation);return b.err?b:{val:{type:si.number,value:a,location:x,style:b.val},err:null}}else{if(P.length===0)return this.error(Rn.EXPECT_DATE_TIME_SKELETON,x);var R=P;this.locale&&(R=U2(P,this.locale));var _={type:Ed.dateTime,pattern:R,location:f.styleLocation,parsedOptions:this.shouldParseSkeletons?C2(R):{}},F=c==="date"?si.date:si.time;return{val:{type:F,value:a,location:x,style:_},err:null}}}return{val:{type:c==="number"?si.number:c==="date"?si.date:si.time,value:a,location:x,style:(d=f?.style)!==null&&d!==void 0?d:null},err:null}}case"plural":case"selectordinal":case"select":{var I=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Rn.EXPECT_SELECT_ARGUMENT_OPTIONS,Nn(I,Ar({},I)));this.bumpSpace();var $=this.parseIdentifierIfPossible(),B=0;if(c!=="select"&&$.value==="offset"){if(!this.bumpIf(":"))return this.error(Rn.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Nn(this.clonePosition(),this.clonePosition()));this.bumpSpace();var b=this.tryParseDecimalInteger(Rn.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Rn.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(b.err)return b;this.bumpSpace(),$=this.parseIdentifierIfPossible(),B=b.val}var W=this.tryParsePluralOrSelectOptions(r,c,i,$);if(W.err)return W;var T=this.tryParseArgumentClose(s);if(T.err)return T;var Y=Nn(s,this.clonePosition());return c==="select"?{val:{type:si.select,value:a,options:_S(W.val),location:Y},err:null}:{val:{type:si.plural,value:a,options:_S(W.val),offset:B,pluralType:c==="plural"?"cardinal":"ordinal",location:Y},err:null}}default:return this.error(Rn.INVALID_ARGUMENT_TYPE,Nn(l,p))}},t.prototype.tryParseArgumentClose=function(r){return this.isEOF()||this.char()!==125?this.error(Rn.EXPECT_ARGUMENT_CLOSING_BRACE,Nn(r,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var r=0,i=this.clonePosition();!this.isEOF();){var a=this.char();switch(a){case 39:{this.bump();var s=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Rn.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Nn(s,this.clonePosition()));this.bump();break}case 123:{r+=1,this.bump();break}case 125:{if(r>0)r-=1;else return{val:this.message.slice(i.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(i.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(r,i){var a=[];try{a=P2(r)}catch{return this.error(Rn.INVALID_NUMBER_SKELETON,i)}return{val:{type:Ed.number,tokens:a,location:i,parsedOptions:this.shouldParseSkeletons?D2(a):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(r,i,a,s){for(var d,l=!1,c=[],p=new Set,f=s.value,m=s.location;;){if(f.length===0){var b=this.clonePosition();if(i!=="select"&&this.bumpIf("=")){var _=this.tryParseDecimalInteger(Rn.EXPECT_PLURAL_ARGUMENT_SELECTOR,Rn.INVALID_PLURAL_ARGUMENT_SELECTOR);if(_.err)return _;m=Nn(b,this.clonePosition()),f=this.message.slice(b.offset,this.offset())}else break}if(p.has(f))return this.error(i==="select"?Rn.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Rn.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,m);f==="other"&&(l=!0),this.bumpSpace();var A=this.clonePosition();if(!this.bumpIf("{"))return this.error(i==="select"?Rn.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Rn.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Nn(this.clonePosition(),this.clonePosition()));var T=this.parseMessage(r+1,i,a);if(T.err)return T;var x=this.tryParseArgumentClose(A);if(x.err)return x;c.push([f,{value:T.val,location:Nn(A,this.clonePosition())}]),p.add(f),this.bumpSpace(),d=this.parseIdentifierIfPossible(),f=d.value,m=d.location}return c.length===0?this.error(i==="select"?Rn.EXPECT_SELECT_ARGUMENT_SELECTOR:Rn.EXPECT_PLURAL_ARGUMENT_SELECTOR,Nn(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!l?this.error(Rn.MISSING_OTHER_CLAUSE,Nn(this.clonePosition(),this.clonePosition())):{val:c,err:null}},t.prototype.tryParseDecimalInteger=function(r,i){var a=1,s=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(a=-1);for(var d=!1,l=0;!this.isEOF();){var c=this.char();if(c>=48&&c<=57)d=!0,l=l*10+(c-48),this.bump();else break}var p=Nn(s,this.clonePosition());return d?(l*=a,q2(l)?{val:l,err:null}:this.error(i,p)):this.error(r,p)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var r=this.position.offset;if(r>=this.message.length)throw Error("out of bound");var i=Q1(this.message,r);if(i===void 0)throw Error("Offset ".concat(r," is at invalid UTF-16 code unit boundary"));return i},t.prototype.error=function(r,i){return{val:null,err:{kind:r,message:this.message,location:i}}},t.prototype.bump=function(){if(!this.isEOF()){var r=this.char();r===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=r<65536?1:2)}},t.prototype.bumpIf=function(r){if(wS(this.message,r,this.offset())){for(var i=0;i<r.length;i++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(r){var i=this.offset(),a=this.message.indexOf(r,i);return a>=0?(this.bumpTo(a),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(r){if(this.offset()>r)throw Error("targetOffset ".concat(r," must be greater than or equal to the current offset ").concat(this.offset()));for(r=Math.min(r,this.message.length);;){var i=this.offset();if(i===r)break;if(i>r)throw Error("targetOffset ".concat(r," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&Z1(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var r=this.char(),i=this.offset(),a=this.message.charCodeAt(i+(r>=65536?2:1));return a??null},t}();function gv(t){return t>=97&&t<=122||t>=65&&t<=90}function Q2(t){return gv(t)||t===47}function X2(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function Z1(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function Z2(t){return t>=33&&t<=35||t===36||t>=37&&t<=39||t===40||t===41||t===42||t===43||t===44||t===45||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||t===91||t===92||t===93||t===94||t===96||t===123||t===124||t===125||t===126||t===161||t>=162&&t<=165||t===166||t===167||t===169||t===171||t===172||t===174||t===176||t===177||t===182||t===187||t===191||t===215||t===247||t>=8208&&t<=8213||t>=8214&&t<=8215||t===8216||t===8217||t===8218||t>=8219&&t<=8220||t===8221||t===8222||t===8223||t>=8224&&t<=8231||t>=8240&&t<=8248||t===8249||t===8250||t>=8251&&t<=8254||t>=8257&&t<=8259||t===8260||t===8261||t===8262||t>=8263&&t<=8273||t===8274||t===8275||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||t===8608||t>=8609&&t<=8610||t===8611||t>=8612&&t<=8613||t===8614||t>=8615&&t<=8621||t===8622||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||t===8658||t===8659||t===8660||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||t===8968||t===8969||t===8970||t===8971||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||t===9001||t===9002||t>=9003&&t<=9083||t===9084||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||t===9655||t>=9656&&t<=9664||t===9665||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||t===9839||t>=9840&&t<=10087||t===10088||t===10089||t===10090||t===10091||t===10092||t===10093||t===10094||t===10095||t===10096||t===10097||t===10098||t===10099||t===10100||t===10101||t>=10132&&t<=10175||t>=10176&&t<=10180||t===10181||t===10182||t>=10183&&t<=10213||t===10214||t===10215||t===10216||t===10217||t===10218||t===10219||t===10220||t===10221||t===10222||t===10223||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||t===10627||t===10628||t===10629||t===10630||t===10631||t===10632||t===10633||t===10634||t===10635||t===10636||t===10637||t===10638||t===10639||t===10640||t===10641||t===10642||t===10643||t===10644||t===10645||t===10646||t===10647||t===10648||t>=10649&&t<=10711||t===10712||t===10713||t===10714||t===10715||t>=10716&&t<=10747||t===10748||t===10749||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||t===11158||t>=11159&&t<=11263||t>=11776&&t<=11777||t===11778||t===11779||t===11780||t===11781||t>=11782&&t<=11784||t===11785||t===11786||t===11787||t===11788||t===11789||t>=11790&&t<=11798||t===11799||t>=11800&&t<=11801||t===11802||t===11803||t===11804||t===11805||t>=11806&&t<=11807||t===11808||t===11809||t===11810||t===11811||t===11812||t===11813||t===11814||t===11815||t===11816||t===11817||t>=11818&&t<=11822||t===11823||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||t===11840||t===11841||t===11842||t>=11843&&t<=11855||t>=11856&&t<=11857||t===11858||t>=11859&&t<=11903||t>=12289&&t<=12291||t===12296||t===12297||t===12298||t===12299||t===12300||t===12301||t===12302||t===12303||t===12304||t===12305||t>=12306&&t<=12307||t===12308||t===12309||t===12310||t===12311||t===12312||t===12313||t===12314||t===12315||t===12316||t===12317||t>=12318&&t<=12319||t===12320||t===12336||t===64830||t===64831||t>=65093&&t<=65094}function yv(t){t.forEach(function(r){if(delete r.location,K1(r)||G1(r))for(var i in r.options)delete r.options[i].location,yv(r.options[i].value);else H1(r)&&q1(r.style)||(j1(r)||V1(r))&&fv(r.style)?delete r.style.location:$1(r)&&yv(r.children)})}function eO(t,r){r===void 0&&(r={}),r=Ar({shouldParseSkeletons:!0,requiresOtherClause:!0},r);var i=new Y2(t,r).parse();if(i.err){var a=SyntaxError(Rn[i.err.kind]);throw a.location=i.err.location,a.originalMessage=i.err.message,a}return r?.captureLocation||yv(i.val),i.val}var xs;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(xs||(xs={}));var Uu=function(t){Oo(r,t);function r(i,a,s){var d=t.call(this,i)||this;return d.code=a,d.originalMessage=s,d}return r.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},r}(Error),ES=function(t){Oo(r,t);function r(i,a,s,d){return t.call(this,'Invalid values for "'.concat(i,'": "').concat(a,'". Options are "').concat(Object.keys(s).join('", "'),'"'),xs.INVALID_VALUE,d)||this}return r}(Uu),tO=function(t){Oo(r,t);function r(i,a,s){return t.call(this,'Value for "'.concat(i,'" must be of type ').concat(a),xs.INVALID_VALUE,s)||this}return r}(Uu),rO=function(t){Oo(r,t);function r(i,a){return t.call(this,'The intl string context variable "'.concat(i,'" was not provided to the string "').concat(a,'"'),xs.MISSING_VALUE,a)||this}return r}(Uu),wa;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(wa||(wa={}));function nO(t){return t.length<2?t:t.reduce(function(r,i){var a=r[r.length-1];return!a||a.type!==wa.literal||i.type!==wa.literal?r.push(i):a.value+=i.value,r},[])}function eA(t){return typeof t=="function"}function Py(t,r,i,a,s,d,l){if(t.length===1&&yS(t[0]))return[{type:wa.literal,value:t[0].value}];for(var c=[],p=0,f=t;p<f.length;p++){var m=f[p];if(yS(m)){c.push({type:wa.literal,value:m.value});continue}if(x2(m)){typeof d=="number"&&c.push({type:wa.literal,value:i.getNumberFormat(r).format(d)});continue}var b=m.value;if(!(s&&b in s))throw new rO(b,l);var _=s[b];if(R2(m)){(!_||typeof _=="string"||typeof _=="number")&&(_=typeof _=="string"||typeof _=="number"?String(_):""),c.push({type:typeof _=="string"?wa.literal:wa.object,value:_});continue}if(j1(m)){var A=typeof m.style=="string"?a.date[m.style]:fv(m.style)?m.style.parsedOptions:void 0;c.push({type:wa.literal,value:i.getDateTimeFormat(r,A).format(_)});continue}if(V1(m)){var A=typeof m.style=="string"?a.time[m.style]:fv(m.style)?m.style.parsedOptions:a.time.medium;c.push({type:wa.literal,value:i.getDateTimeFormat(r,A).format(_)});continue}if(H1(m)){var A=typeof m.style=="string"?a.number[m.style]:q1(m.style)?m.style.parsedOptions:void 0;A&&A.scale&&(_=_*(A.scale||1)),c.push({type:wa.literal,value:i.getNumberFormat(r,A).format(_)});continue}if($1(m)){var T=m.children,x=m.value,P=s[x];if(!eA(P))throw new tO(x,"function",l);var R=Py(T,r,i,a,s,d),F=P(R.map(function(B){return B.value}));Array.isArray(F)||(F=[F]),c.push.apply(c,F.map(function(B){return{type:typeof B=="string"?wa.literal:wa.object,value:B}}))}if(K1(m)){var I=m.options[_]||m.options.other;if(!I)throw new ES(m.value,_,Object.keys(m.options),l);c.push.apply(c,Py(I.value,r,i,a,s));continue}if(G1(m)){var I=m.options["=".concat(_)];if(!I){if(!Intl.PluralRules)throw new Uu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,xs.MISSING_INTL_API,l);var $=i.getPluralRules(r,{type:m.pluralType}).select(_-(m.offset||0));I=m.options[$]||m.options.other}if(!I)throw new ES(m.value,_,Object.keys(m.options),l);c.push.apply(c,Py(I.value,r,i,a,s,_-(m.offset||0)));continue}}return nO(c)}function iO(t,r){return r?Ar(Ar(Ar({},t||{}),r||{}),Object.keys(t).reduce(function(i,a){return i[a]=Ar(Ar({},t[a]),r[a]||{}),i},{})):t}function aO(t,r){return r?Object.keys(t).reduce(function(i,a){return i[a]=iO(t[a],r[a]),i},Ar({},t)):t}function K0(t){return{create:function(){return{get:function(r){return t[r]},set:function(r,i){t[r]=i}}}}}function oO(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Ss(function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return new((r=Intl.NumberFormat).bind.apply(r,As([void 0],i,!1)))},{cache:K0(t.number),strategy:Es.variadic}),getDateTimeFormat:Ss(function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return new((r=Intl.DateTimeFormat).bind.apply(r,As([void 0],i,!1)))},{cache:K0(t.dateTime),strategy:Es.variadic}),getPluralRules:Ss(function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return new((r=Intl.PluralRules).bind.apply(r,As([void 0],i,!1)))},{cache:K0(t.pluralRules),strategy:Es.variadic})}}var tA=function(){function t(r,i,a,s){i===void 0&&(i=t.defaultLocale);var d=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(p){var f=d.formatToParts(p);if(f.length===1)return f[0].value;var m=f.reduce(function(b,_){return!b.length||_.type!==wa.literal||typeof b[b.length-1]!="string"?b.push(_.value):b[b.length-1]+=_.value,b},[]);return m.length<=1?m[0]||"":m},this.formatToParts=function(p){return Py(d.ast,d.locales,d.formatters,d.formats,p,void 0,d.message)},this.resolvedOptions=function(){var p;return{locale:((p=d.resolvedLocale)===null||p===void 0?void 0:p.toString())||Intl.NumberFormat.supportedLocalesOf(d.locales)[0]}},this.getAst=function(){return d.ast},this.locales=i,this.resolvedLocale=t.resolveLocale(i),typeof r=="string"){if(this.message=r,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var l=s||{};l.formatters;var c=am(l,["formatters"]);this.ast=t.__parse(r,Ar(Ar({},c),{locale:this.resolvedLocale}))}else this.ast=r;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=aO(t.formats,a),this.formatters=s&&s.formatters||oO(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(r){if(!(typeof Intl.Locale>"u")){var i=Intl.NumberFormat.supportedLocalesOf(r);return i.length>0?new Intl.Locale(i[0]):new Intl.Locale(typeof r=="string"?r:r[0])}},t.__parse=eO,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}(),sf;(function(t){t.FORMAT_ERROR="FORMAT_ERROR",t.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",t.INVALID_CONFIG="INVALID_CONFIG",t.MISSING_DATA="MISSING_DATA",t.MISSING_TRANSLATION="MISSING_TRANSLATION"})(sf||(sf={}));var hg=function(t){Oo(r,t);function r(i,a,s){var d=this,l=s?s instanceof Error?s:new Error(String(s)):void 0;return d=t.call(this,"[@formatjs/intl Error ".concat(i,"] ").concat(a,`
`).concat(l?`
`.concat(l.message,`
`).concat(l.stack):""))||this,d.code=i,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(d,r),d}return r}(Error),sO=function(t){Oo(r,t);function r(i,a){return t.call(this,sf.UNSUPPORTED_FORMATTER,i,a)||this}return r}(hg),lO=function(t){Oo(r,t);function r(i,a){return t.call(this,sf.INVALID_CONFIG,i,a)||this}return r}(hg),AS=function(t){Oo(r,t);function r(i,a){return t.call(this,sf.MISSING_DATA,i,a)||this}return r}(hg),Po=function(t){Oo(r,t);function r(i,a,s){var d=t.call(this,sf.FORMAT_ERROR,"".concat(i,`
Locale: `).concat(a,`
`),s)||this;return d.locale=a,d}return r}(hg),G0=function(t){Oo(r,t);function r(i,a,s,d){var l=t.call(this,"".concat(i,`
MessageID: `).concat(s?.id,`
Default Message: `).concat(s?.defaultMessage,`
Description: `).concat(s?.description,`
`),a,d)||this;return l.descriptor=s,l.locale=a,l}return r}(Po),uO=function(t){Oo(r,t);function r(i,a){var s=t.call(this,sf.MISSING_TRANSLATION,'Missing message: "'.concat(i.id,'" for locale "').concat(a,'", using ').concat(i.defaultMessage?"default message (".concat(typeof i.defaultMessage=="string"?i.defaultMessage:i.defaultMessage.map(function(d){var l;return(l=d.value)!==null&&l!==void 0?l:JSON.stringify(d)}).join(),")"):"id"," as fallback."))||this;return s.descriptor=i,s}return r}(hg);function cO(t,r,i){if(i===void 0&&(i=Error),!t)throw new i(r)}function xd(t,r,i){return i===void 0&&(i={}),r.reduce(function(a,s){return s in t?a[s]=t[s]:s in i&&(a[s]=i[s]),a},{})}var fO=function(t){},dO=function(t){},rA={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:fO,onWarn:dO};function nA(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function ef(t){return{create:function(){return{get:function(r){return t[r]},set:function(r,i){t[r]=i}}}}}function hO(t){t===void 0&&(t=nA());var r=Intl.RelativeTimeFormat,i=Intl.ListFormat,a=Intl.DisplayNames,s=Ss(function(){for(var c,p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];return new((c=Intl.DateTimeFormat).bind.apply(c,As([void 0],p,!1)))},{cache:ef(t.dateTime),strategy:Es.variadic}),d=Ss(function(){for(var c,p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];return new((c=Intl.NumberFormat).bind.apply(c,As([void 0],p,!1)))},{cache:ef(t.number),strategy:Es.variadic}),l=Ss(function(){for(var c,p=[],f=0;f<arguments.length;f++)p[f]=arguments[f];return new((c=Intl.PluralRules).bind.apply(c,As([void 0],p,!1)))},{cache:ef(t.pluralRules),strategy:Es.variadic});return{getDateTimeFormat:s,getNumberFormat:d,getMessageFormat:Ss(function(c,p,f,m){return new tA(c,p,f,Ar({formatters:{getNumberFormat:d,getDateTimeFormat:s,getPluralRules:l}},m||{}))},{cache:ef(t.message),strategy:Es.variadic}),getRelativeTimeFormat:Ss(function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];return new(r.bind.apply(r,As([void 0],c,!1)))},{cache:ef(t.relativeTime),strategy:Es.variadic}),getPluralRules:l,getListFormat:Ss(function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];return new(i.bind.apply(i,As([void 0],c,!1)))},{cache:ef(t.list),strategy:Es.variadic}),getDisplayNames:Ss(function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];return new(a.bind.apply(a,As([void 0],c,!1)))},{cache:ef(t.displayNames),strategy:Es.variadic})}}function nb(t,r,i,a){var s=t&&t[r],d;if(s&&(d=s[i]),d)return d;a(new sO("No ".concat(r," format named: ").concat(i)))}function Sy(t,r){return Object.keys(t).reduce(function(i,a){return i[a]=Ar({timeZone:r},t[a]),i},{})}function RS(t,r){var i=Object.keys(Ar(Ar({},t),r));return i.reduce(function(a,s){return a[s]=Ar(Ar({},t[s]||{}),r[s]||{}),a},{})}function xS(t,r){if(!r)return t;var i=tA.formats;return Ar(Ar(Ar({},i),t),{date:RS(Sy(i.date,r),Sy(t.date||{},r)),time:RS(Sy(i.time,r),Sy(t.time||{},r))})}var mv=function(t,r,i,a,s){var d=t.locale,l=t.formats,c=t.messages,p=t.defaultLocale,f=t.defaultFormats,m=t.fallbackOnEmptyString,b=t.onError,_=t.timeZone,A=t.defaultRichTextElements;i===void 0&&(i={id:""});var T=i.id,x=i.defaultMessage;cO(!!T,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var P=String(T),R=c&&Object.prototype.hasOwnProperty.call(c,P)&&c[P];if(Array.isArray(R)&&R.length===1&&R[0].type===si.literal)return R[0].value;if(!a&&R&&typeof R=="string"&&!A)return R.replace(/'\{(.*?)\}'/gi,"{$1}");if(a=Ar(Ar({},A),a||{}),l=xS(l,_),f=xS(f,_),!R){if(m===!1&&R==="")return R;if((!x||d&&d.toLowerCase()!==p.toLowerCase())&&b(new uO(i,d)),x)try{var F=r.getMessageFormat(x,p,f,s);return F.format(a)}catch(I){return b(new G0('Error formatting default message for: "'.concat(P,'", rendering default message verbatim'),d,i,I)),typeof x=="string"?x:P}return P}try{var F=r.getMessageFormat(R,d,l,Ar({formatters:r},s||{}));return F.format(a)}catch(I){b(new G0('Error formatting message: "'.concat(P,'", using ').concat(x?"default message":"id"," as fallback."),d,i,I))}if(x)try{var F=r.getMessageFormat(x,p,f,s);return F.format(a)}catch(I){b(new G0('Error formatting the default message for: "'.concat(P,'", rendering message verbatim'),d,i,I))}return typeof R=="string"?R:typeof x=="string"?x:P},pO=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function pg(t,r,i,a){var s=t.locale,d=t.formats,l=t.onError,c=t.timeZone;a===void 0&&(a={});var p=a.format,f=Ar(Ar({},c&&{timeZone:c}),p&&nb(d,r,p,l)),m=xd(a,pO,f);return r==="time"&&!m.hour&&!m.minute&&!m.second&&!m.timeStyle&&!m.dateStyle&&(m=Ar(Ar({},m),{hour:"numeric",minute:"numeric"})),i(s,m)}function gO(t,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i[0],d=i[1],l=d===void 0?{}:d,c=typeof s=="string"?new Date(s||0):s;try{return pg(t,"date",r,l).format(c)}catch(p){t.onError(new Po("Error formatting date.",t.locale,p))}return String(c)}function yO(t,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i[0],d=i[1],l=d===void 0?{}:d,c=typeof s=="string"?new Date(s||0):s;try{return pg(t,"time",r,l).format(c)}catch(p){t.onError(new Po("Error formatting time.",t.locale,p))}return String(c)}function mO(t,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i[0],d=i[1],l=i[2],c=l===void 0?{}:l,p=typeof s=="string"?new Date(s||0):s,f=typeof d=="string"?new Date(d||0):d;try{return pg(t,"dateTimeRange",r,c).formatRange(p,f)}catch(m){t.onError(new Po("Error formatting date time range.",t.locale,m))}return String(p)}function vO(t,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i[0],d=i[1],l=d===void 0?{}:d,c=typeof s=="string"?new Date(s||0):s;try{return pg(t,"date",r,l).formatToParts(c)}catch(p){t.onError(new Po("Error formatting date.",t.locale,p))}return[]}function bO(t,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i[0],d=i[1],l=d===void 0?{}:d,c=typeof s=="string"?new Date(s||0):s;try{return pg(t,"time",r,l).formatToParts(c)}catch(p){t.onError(new Po("Error formatting time.",t.locale,p))}return[]}var wO=["style","type","fallback","languageDisplay"];function _O(t,r,i,a){var s=t.locale,d=t.onError,l=Intl.DisplayNames;l||d(new Uu(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,xs.MISSING_INTL_API));var c=xd(a,wO);try{return r(s,c).of(i)}catch(p){d(new Po("Error formatting display name.",s,p))}}var SO=["type","style"],TS=Date.now();function EO(t){return"".concat(TS,"_").concat(t,"_").concat(TS)}function AO(t,r,i,a){a===void 0&&(a={});var s=iA(t,r,i,a).reduce(function(d,l){var c=l.value;return typeof c!="string"?d.push(c):typeof d[d.length-1]=="string"?d[d.length-1]+=c:d.push(c),d},[]);return s.length===1?s[0]:s.length===0?"":s}function iA(t,r,i,a){var s=t.locale,d=t.onError;a===void 0&&(a={});var l=Intl.ListFormat;l||d(new Uu(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,xs.MISSING_INTL_API));var c=xd(a,SO);try{var p={},f=i.map(function(m,b){if(typeof m=="object"){var _=EO(b);return p[_]=m,_}return String(m)});return r(s,c).formatToParts(f).map(function(m){return m.type==="literal"?m:Ar(Ar({},m),{value:p[m.value]||m.value})})}catch(m){d(new Po("Error formatting list.",s,m))}return i}var RO=["type"];function xO(t,r,i,a){var s=t.locale,d=t.onError;a===void 0&&(a={}),Intl.PluralRules||d(new Uu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,xs.MISSING_INTL_API));var l=xd(a,RO);try{return r(s,l).select(i)}catch(c){d(new Po("Error formatting plural.",s,c))}return"other"}var TO=["numeric","style"];function CO(t,r,i){var a=t.locale,s=t.formats,d=t.onError;i===void 0&&(i={});var l=i.format,c=!!l&&nb(s,"relative",l,d)||{},p=xd(i,TO,c);return r(a,p)}function OO(t,r,i,a,s){s===void 0&&(s={}),a||(a="second");var d=Intl.RelativeTimeFormat;d||t.onError(new Uu(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,xs.MISSING_INTL_API));try{return CO(t,r,s).format(i,a)}catch(l){t.onError(new Po("Error formatting relative time.",t.locale,l))}return String(i)}var PO=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function aA(t,r,i){var a=t.locale,s=t.formats,d=t.onError;i===void 0&&(i={});var l=i.format,c=l&&nb(s,"number",l,d)||{},p=xd(i,PO,c);return r(a,p)}function IO(t,r,i,a){a===void 0&&(a={});try{return aA(t,r,a).format(i)}catch(s){t.onError(new Po("Error formatting number.",t.locale,s))}return String(i)}function NO(t,r,i,a){a===void 0&&(a={});try{return aA(t,r,a).formatToParts(i)}catch(s){t.onError(new Po("Error formatting number.",t.locale,s))}return[]}function FO(t){var r=t?t[Object.keys(t)[0]]:void 0;return typeof r=="string"}function DO(t){t.onWarn&&t.defaultRichTextElements&&FO(t.messages||{})&&t.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function UO(t,r){var i=hO(r),a=Ar(Ar({},rA),t),s=a.locale,d=a.defaultLocale,l=a.onError;return s?!Intl.NumberFormat.supportedLocalesOf(s).length&&l?l(new AS('Missing locale data for locale: "'.concat(s,'" in Intl.NumberFormat. Using default locale: "').concat(d,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(s).length&&l&&l(new AS('Missing locale data for locale: "'.concat(s,'" in Intl.DateTimeFormat. Using default locale: "').concat(d,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):(l&&l(new lO('"locale" was not configured, using "'.concat(d,'" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details'))),a.locale=a.defaultLocale||"en"),DO(a),Ar(Ar({},a),{formatters:i,formatNumber:IO.bind(null,a,i.getNumberFormat),formatNumberToParts:NO.bind(null,a,i.getNumberFormat),formatRelativeTime:OO.bind(null,a,i.getRelativeTimeFormat),formatDate:gO.bind(null,a,i.getDateTimeFormat),formatDateToParts:vO.bind(null,a,i.getDateTimeFormat),formatTime:yO.bind(null,a,i.getDateTimeFormat),formatDateTimeRange:mO.bind(null,a,i.getDateTimeFormat),formatTimeToParts:bO.bind(null,a,i.getDateTimeFormat),formatPlural:xO.bind(null,a,i.getPluralRules),formatMessage:mv.bind(null,a,i),$t:mv.bind(null,a,i),formatList:AO.bind(null,a,i.getListFormat),formatListToParts:iA.bind(null,a,i.getListFormat),formatDisplayName:_O.bind(null,a,i.getDisplayNames)})}function LO(t,r,i){if(i===void 0&&(i=Error),!t)throw new i(r)}function oA(t){LO(t,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var sA=Ar(Ar({},rA),{textComponent:St.Fragment}),MO={key:42},kO=function(t){return St.isValidElement(t)?St.createElement(St.Fragment,MO,t):t},BO=function(t){var r;return(r=St.Children.map(t,kO))!==null&&r!==void 0?r:[]};function HO(t){return function(r){return t(St.Children.toArray(r))}}function jO(t,r){if(t===r)return!0;if(!t||!r)return!1;var i=Object.keys(t),a=Object.keys(r),s=i.length;if(a.length!==s)return!1;for(var d=0;d<s;d++){var l=i[d];if(t[l]!==r[l]||!Object.prototype.hasOwnProperty.call(r,l))return!1}return!0}var $0={exports:{}},Gn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS;function VO(){if(CS)return Gn;CS=1;var t=typeof Symbol=="function"&&Symbol.for,r=t?Symbol.for("react.element"):60103,i=t?Symbol.for("react.portal"):60106,a=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,d=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,p=t?Symbol.for("react.async_mode"):60111,f=t?Symbol.for("react.concurrent_mode"):60111,m=t?Symbol.for("react.forward_ref"):60112,b=t?Symbol.for("react.suspense"):60113,_=t?Symbol.for("react.suspense_list"):60120,A=t?Symbol.for("react.memo"):60115,T=t?Symbol.for("react.lazy"):60116,x=t?Symbol.for("react.block"):60121,P=t?Symbol.for("react.fundamental"):60117,R=t?Symbol.for("react.responder"):60118,F=t?Symbol.for("react.scope"):60119;function I(B){if(typeof B=="object"&&B!==null){var W=B.$$typeof;switch(W){case r:switch(B=B.type,B){case p:case f:case a:case d:case s:case b:return B;default:switch(B=B&&B.$$typeof,B){case c:case m:case T:case A:case l:return B;default:return W}}case i:return W}}}function $(B){return I(B)===f}return Gn.AsyncMode=p,Gn.ConcurrentMode=f,Gn.ContextConsumer=c,Gn.ContextProvider=l,Gn.Element=r,Gn.ForwardRef=m,Gn.Fragment=a,Gn.Lazy=T,Gn.Memo=A,Gn.Portal=i,Gn.Profiler=d,Gn.StrictMode=s,Gn.Suspense=b,Gn.isAsyncMode=function(B){return $(B)||I(B)===p},Gn.isConcurrentMode=$,Gn.isContextConsumer=function(B){return I(B)===c},Gn.isContextProvider=function(B){return I(B)===l},Gn.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===r},Gn.isForwardRef=function(B){return I(B)===m},Gn.isFragment=function(B){return I(B)===a},Gn.isLazy=function(B){return I(B)===T},Gn.isMemo=function(B){return I(B)===A},Gn.isPortal=function(B){return I(B)===i},Gn.isProfiler=function(B){return I(B)===d},Gn.isStrictMode=function(B){return I(B)===s},Gn.isSuspense=function(B){return I(B)===b},Gn.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===a||B===f||B===d||B===s||B===b||B===_||typeof B=="object"&&B!==null&&(B.$$typeof===T||B.$$typeof===A||B.$$typeof===l||B.$$typeof===c||B.$$typeof===m||B.$$typeof===P||B.$$typeof===R||B.$$typeof===F||B.$$typeof===x)},Gn.typeOf=I,Gn}var OS;function KO(){return OS||(OS=1,$0.exports=VO()),$0.exports}var q0,PS;function GO(){if(PS)return q0;PS=1;var t=KO(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},d={};d[t.ForwardRef]=a,d[t.Memo]=s;function l(T){return t.isMemo(T)?s:d[T.$$typeof]||r}var c=Object.defineProperty,p=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,b=Object.getPrototypeOf,_=Object.prototype;function A(T,x,P){if(typeof x!="string"){if(_){var R=b(x);R&&R!==_&&A(T,R,P)}var F=p(x);f&&(F=F.concat(f(x)));for(var I=l(T),$=l(x),B=0;B<F.length;++B){var W=F[B];if(!i[W]&&!(P&&P[W])&&!($&&$[W])&&!(I&&I[W])){var Y=m(x,W);try{c(T,W,Y)}catch{}}}}return T}return q0=A,q0}GO();var ib=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=St.createContext(null)):St.createContext(null);ib.Consumer;var $O=ib.Provider,qO=$O,zO=ib;function lA(){var t=St.useContext(zO);return oA(t),t}var vv;(function(t){t.formatDate="FormattedDate",t.formatTime="FormattedTime",t.formatNumber="FormattedNumber",t.formatList="FormattedList",t.formatDisplayName="FormattedDisplayName"})(vv||(vv={}));var bv;(function(t){t.formatDate="FormattedDateParts",t.formatTime="FormattedTimeParts",t.formatNumber="FormattedNumberParts",t.formatList="FormattedListParts"})(bv||(bv={}));function uA(t){var r=function(i){var a=lA(),s=i.value,d=i.children,l=am(i,["value","children"]),c=typeof s=="string"?new Date(s||0):s,p=t==="formatDate"?a.formatDateToParts(c,l):a.formatTimeToParts(c,l);return d(p)};return r.displayName=bv[t],r}function gg(t){var r=function(i){var a=lA(),s=i.value,d=i.children,l=am(i,["value","children"]),c=a[t](s,l);if(typeof d=="function")return d(c);var p=a.textComponent||St.Fragment;return St.createElement(p,null,c)};return r.displayName=vv[t],r}function cA(t){return t&&Object.keys(t).reduce(function(r,i){var a=t[i];return r[i]=eA(a)?HO(a):a,r},{})}var IS=function(t,r,i,a){for(var s=[],d=4;d<arguments.length;d++)s[d-4]=arguments[d];var l=cA(a),c=mv.apply(void 0,As([t,r,i,l],s,!1));return Array.isArray(c)?BO(c):c},NS=function(t,r){var i=t.defaultRichTextElements,a=am(t,["defaultRichTextElements"]),s=cA(i),d=UO(Ar(Ar(Ar({},sA),a),{defaultRichTextElements:s}),r),l={locale:d.locale,timeZone:d.timeZone,fallbackOnEmptyString:d.fallbackOnEmptyString,formats:d.formats,defaultLocale:d.defaultLocale,defaultFormats:d.defaultFormats,messages:d.messages,onError:d.onError,defaultRichTextElements:s};return Ar(Ar({},d),{formatMessage:IS.bind(null,l,d.formatters),$t:IS.bind(null,l,d.formatters)})};function z0(t){return{locale:t.locale,timeZone:t.timeZone,fallbackOnEmptyString:t.fallbackOnEmptyString,formats:t.formats,textComponent:t.textComponent,messages:t.messages,defaultLocale:t.defaultLocale,defaultFormats:t.defaultFormats,onError:t.onError,onWarn:t.onWarn,wrapRichTextChunksInFragment:t.wrapRichTextChunksInFragment,defaultRichTextElements:t.defaultRichTextElements}}var WO=function(t){Oo(r,t);function r(){var i=t!==null&&t.apply(this,arguments)||this;return i.cache=nA(),i.state={cache:i.cache,intl:NS(z0(i.props),i.cache),prevConfig:z0(i.props)},i}return r.getDerivedStateFromProps=function(i,a){var s=a.prevConfig,d=a.cache,l=z0(i);return jO(s,l)?null:{intl:NS(l,d),prevConfig:l}},r.prototype.render=function(){return oA(this.state.intl),St.createElement(qO,{value:this.state.intl},this.props.children)},r.displayName="IntlProvider",r.defaultProps=sA,r}(St.PureComponent);gg("formatDate");gg("formatTime");gg("formatNumber");gg("formatList");gg("formatDisplayName");uA("formatDate");uA("formatTime");const JO=lR.createContext({selectedLanguage:"",setSelectedLanguage:()=>{}}),YO={manageYourProfileLoginScreenHeading:"Spravujte svoje jedálne preferencie",selectSignInMethod:"Vyberte spôsob prihlásenia",signInWithSolid:"Solid",whatIsSolid:"Čo je to Solid?",signInDivider:"alebo",signInWithFacebook:"Facebook",signInWithGoogle:"Google",redirectToProvider:"Prejsť na poskytovateľa",welcomeToTheApplication:"Vitajte v editore vášho diétneho profilu!",aboutTheApplication:"O aplikácii",sourceCode:"Zdrojový kód",createdBy:"Vytvoril",editProfile:"Upraviť profil",importProfile:"Importovať profil",downloadProfile:"Stiahnuť profil",userManual:"Používateľská príručka",signOut:"Odhlásiť sa",allergicTo:"Ste alergickí na: ",diets:"Diéty",onDiets:"Vaše diéty sú: ",tastePreferencesHeading:"Preferencie chutí",worldCuisines:"Obľúbené svetové kuchyne",tasteOfDesserts:"Preferovaná chuť zákuskov",tasteSpiciness:"Úroveň štipľavosti",whatAreYouAllergicTo:"Na čo máte alergiu?",nextStep:"Ďalší krok: ",saveProfile:"Uložiť profil",whichDietsAreYouOn:"Ktoré diéty dodržiavate?",showLessDietOptions:"Zobraziť menej možností",showMoreDietOptions:"Zobraziť viac možností",isYourDietNotListed:"Chýba vaša diéta v zozname?",searchForMoreDiets:"Hľadať ďalšie diéty...",specifyYourTastePreferences:"Špecifikujte vaše chuťové preferencie",whichWorldCuisinesDoYouLike:"Ktoré svetové kuchyne máte radi?",loadingData:"Načítavam dáta",searchForMoreWorldCuisines:"Hľadať ďalšie svetové kuchyne...",whichTasteOfDessertsDoYouPrefer:"Aké zákusky máte radšej?",doesNotMatter:"Nezáleží",sweet:"Sladké",savory:"Slané",yes:"Áno",no:"Nie",howSpicyShouldItBe:"Ako veľmi pálivé by malo byť?",mild:"Jemne",medium:"Stredne",hot:"Veľmi",selectASolidProvider:"Vyberte poskytovateľa Solid",typeInProviderUrlHeading:"Alebo vložte poskytovateľovu URL",providerUrlPlaceholder:"Zadajte URL poskytovateľa",chooseSolidProvider:"Zvoľte Solid poskytovateľa",goBack:"Späť",loginSolidErrorMessage:`Možné dôvody sú:
      1. Nie ste pripojení na internet.
      2. Zadaná URL poskytovateľa je nesprávna.
      3. Problém je na strane zvoleného Solid poskytovateľa.
    `,emptyUrlAlert:"Vyberte poskytovateľa alebo zadajte poskytovateľovu URL.",solidDescription:`
    <b>Solid</b> vám umožňuje mať kontrolu nad tým kde sú vaše dáta uložené a kto k nim má prístup. Na začiatok si budete musieť u poskytovateľa Solid zaobstarať vaše WebID. Taktiež sa môžete prihlásiť pod vaším Google alebo Facebook účtom, pričom vaše dáta budú uložené na serveroch týchto poskytovateľov. Solid môžete začať používať aj neskôr a vaše dáta si v rámci aplikácie preniesť. Viac sa dozviete na <a>oficiálnej stránke</a> projektu Solid.
  `,closeModal:"Zavrieť",firebaseLoginErrorMessageFacebook:"Prihlásenie zlyhalo z dôvodu chyby v prihlasovacej službe.",firebaseLoginErrorMessageGoogle:"Prihlásenie zlyhalo pretože buď nemáte prístup na internet alebo z dôvodu chyby v prihlasovacej službe.",loginFailed:"Prihlásenie bolo neúspešné",aboutApplicationTitle:"O aplikácii",aboutApplicationBody:"<b>Editor diétneho profilu</b> slúži pre ľudí ktorí radi jedia v reštauráciách a sú obmedzovaní alergiami alebo majú iné jedálne preferencie. Aplikácia vám umožňuje uložiť a spravovať váš diétny profil. Výnimočná je v tom, že umožňuje použiť technológiu <b>Solid</b>, a tým pádom budú vaše dáta uložené decentralizovaným spôsobom a budete mať kontrolu nad tým kto ich môže vidieť, čo zaručí vyššiu mieru súkromia.",emailAndPassword:"Email a heslo",loginWithEmail:"Prihláste sa pomocou emailu",password:"Heslo",signIn:"Prihlásiť sa",newAccount:"Ak ste noví, je taktiež možné",createAccount:"Vytvoriť účet",createYourAccount:"Založte si účet",signUp:"Zaregistrovať sa",provideValidEmail:"Zadajte platnú emailovú adresu",passwordMustContain:"Heslo musí obsahovať",atLeastEightChars:"Aspoň 8 znakov",lowerCaseLetter:"Malé písmeno",upperCaseLetter:"Veľké písmeno",number:"Číslo",close:"Zatvoriť",signUpFailed:"Chyba pri vytváraní účtu",singUpDefaultErrorMessage:"Účet sa nepodarilo vytvoriť. Skontrolujte prosím vaše internetové pripojenie a skúste to znovu.",signUpEmailInUse:"Pre zadanú emailovú adresu už existuje účet. Zvoľte prosím inú adresu alebo sa prihláste.",emailOrPasswordInvalid:"Zadaný email alebo heslo sú nesprávne. Skontrolujte si prosím údaje a skúste to znovu.",loginCredentialsNotValid:"Buďto je zadaný email v nesprávnom formáte alebo ste nezadali heslo. Skontrolujte prosím vaše prihlasovacie údaje a skúste to znovu.",emailLoginErrorMessage:"Prihlásenie bolo neúspešné kvôli nesprávnym prihlasovacím údajom.",profileOverviewHeading:"Vaše jedálne preferencie",gluten:"Lepok",crustaceans:"Kôrovce",eggs:"Vajcia",fish:"Ryby",peanuts:"Arašidy",soya:"Sója",milk:"Mlieko",nuts:"Orechy",celery:"Zeler",mustard:"Horčica",sesame:"Sezam",sulphites:"Siričitany",lupin:"Vlčí bôb",molluscs:"Mäkkýše",dietPreferencesHeading:"Diéty",whichDietsDoYouFollow:"Ktoré diéty dodržiavate?",calorieTrackingGoal:"V prípade že si počítate kalórie, aký je váš denný príjem?",tastesAndFoodPreparation:"Preferencie chutí",favoriteWorldCuisines:"Aké sú vaše obľúbené svetové kuchyne?",foodIngredientsLikeOrDislike:"Ktoré ingrediencie máte radi a ktoré naopak nie?",doYouLikeSpicyFood:"Máte radi pálivé jedlá?",notSpecified:"Nešpecifikované",notAtAll:"Vôbec",yesIDo:"Áno, mám",howSpicyShouldFoodBe:"Zvoľte úroveň ostrosti",whichCookingMethodsDoYouPrefer:"Ktoré spôsoby prípravy jedla uprednostňujete?",dailyCalorieIntakeGoal:"Váš denný príjem kalórií je: ",yourFavoriteCuisines:"Vaše obľúbené svetové kuchyne sú: ",likedIngredients:"Obľúbené ingrediencie: ",dislikedIngredients:"Neobľúbené ingrediencie: ",howSpicyYouLikeYourFood:"Preferovaná úroveň pálivosti jedla: ",preferredCookingMethods:"Uprednostňované spôsoby prípravy jedla",finish:"Uložiť",allergenPreferencesHeading:"Alergény",deleteProfile:"Zmazať profil",searchMoreDiets:"Vyhľadajte ďalšie diéty",next:"Ďalej",vegetarianDiet:"Vegetariánstvo",mediterraneanDiet:"Stredomorská strava",lowCarbDiet:"Nízkosacharidová diéta",veganDiet:"Veganstvo",ketoDiet:"Ketogénna diéta",atkinsDiet:"Atkinsonova diéta",paleoDiet:"Paleo diéta",error:"Chyba",fetchingDietsFailed:"Načítanie diét bolo neúspešné",italianCuisine:"Talianska",greekCuisine:"Grécka",mexicanCuisine:"Mexická",chineseCuisine:"Čínska",turkishCuisine:"Turecká",spanishCuisine:"Španielska",japaneseCuisine:"Japonská",frenchCuisine:"Francúzska",searchMoreCuisines:"Vyhľadajte ďalšie svetové kuchyne",fetchingCuisinesFailed:"Načítanie svetových kuchýň bolo neúspešné",fetchingIngredientsFailed:"Načítanie ingrediencií bolo neúspešné",whatILike:"Mám rád",searchIngredients:"Vyhľadajte ingrediencie",whatIDontLike:"Nemám rád",extraHot:"Extra",bakingMethod:"Pečenie",grillingMethod:"Grilovanie",boilingMethod:"Varenie",deepFryingMethod:"Vyprážanie",steamingMethod:"Naparovanie",sauteingMethod:"Restovanie",fetchingCookingMethodsFailed:"Načítanie spôsobov prípravy jedla bolo neúspešné",searchMoreCookingMethods:"Vyhľadajte spôsoby prípravy",emptyProfileText:"Profil je prázdny, kliknite na tlačidlo editácie profilu.",preferredCookingMethodsOverview:"Preferované spôsoby prípravy jedla: ",profileSavedSuccessfully:"Profil bol úspešne uložený",profileDeletion:"Zmazanie profilu",profileDeletionConfirm:"Naozaj chcete zmazať váš diétny profil?",delete:"Zmazať",profileDeletionSuccessMessage:"Profil bol úspešne zmazaný",profileDeletionNotFoundMessage:"Profil nebol nájdený",profileDeletionErrorMessage:"Profil sa nepodarilo zmazať",saveProfileModalTitle:"Uloženie profilu",profileSaveError:"Profil sa nepodarilo uložiť",profileLoading:"Načítanie profilu",loadingProfileError:"Načítanie profilu sa skončilo chybou"},QO=t=>{const[r,i]=St.useState("en"),a={selectedLanguage:r,setSelectedLanguage:i};function s(d){return d==="sk"?YO:{}}return ki.jsx(JO.Provider,{value:a,children:ki.jsx(WO,{messages:s(r),locale:r,children:t.children})})};var Gp={},FS;function XO(){if(FS)return Gp;FS=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.parse=l,Gp.serialize=f;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,d=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function l(_,A){const T=new d,x=_.length;if(x<2)return T;const P=A?.decode||m;let R=0;do{const F=_.indexOf("=",R);if(F===-1)break;const I=_.indexOf(";",R),$=I===-1?x:I;if(F>$){R=_.lastIndexOf(";",F-1)+1;continue}const B=c(_,R,F),W=p(_,F,B),Y=_.slice(B,W);if(T[Y]===void 0){let q=c(_,F+1,$),Ie=p(_,$,q);const K=P(_.slice(q,Ie));T[Y]=K}R=$+1}while(R<x);return T}function c(_,A,T){do{const x=_.charCodeAt(A);if(x!==32&&x!==9)return A}while(++A<T);return T}function p(_,A,T){for(;A>T;){const x=_.charCodeAt(--A);if(x!==32&&x!==9)return A+1}return T}function f(_,A,T){const x=T?.encode||encodeURIComponent;if(!t.test(_))throw new TypeError(`argument name is invalid: ${_}`);const P=x(A);if(!r.test(P))throw new TypeError(`argument val is invalid: ${A}`);let R=_+"="+P;if(!T)return R;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);R+="; Max-Age="+T.maxAge}if(T.domain){if(!i.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);R+="; Domain="+T.domain}if(T.path){if(!a.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);R+="; Path="+T.path}if(T.expires){if(!b(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);R+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(R+="; HttpOnly"),T.secure&&(R+="; Secure"),T.partitioned&&(R+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":R+="; Priority=Low";break;case"medium":R+="; Priority=Medium";break;case"high":R+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":R+="; SameSite=Strict";break;case"lax":R+="; SameSite=Lax";break;case"none":R+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return R}function m(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function b(_){return s.call(_)==="[object Date]"}return Gp}XO();var DS="popstate";function ZO(t={}){function r(a,s){let{pathname:d,search:l,hash:c}=a.location;return wv("",{pathname:d,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function i(a,s){return typeof s=="string"?s:rg(s)}return tP(r,i,null,t)}function fi(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function Wo(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function eP(){return Math.random().toString(36).substring(2,10)}function US(t,r){return{usr:t.state,key:t.key,idx:r}}function wv(t,r,i=null,a){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof r=="string"?Td(r):r,state:i,key:r&&r.key||a||eP()}}function rg({pathname:t="/",search:r="",hash:i=""}){return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Td(t){let r={};if(t){let i=t.indexOf("#");i>=0&&(r.hash=t.substring(i),t=t.substring(0,i));let a=t.indexOf("?");a>=0&&(r.search=t.substring(a),t=t.substring(0,a)),t&&(r.pathname=t)}return r}function tP(t,r,i,a={}){let{window:s=document.defaultView,v5Compat:d=!1}=a,l=s.history,c="POP",p=null,f=m();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function m(){return(l.state||{idx:null}).idx}function b(){c="POP";let P=m(),R=P==null?null:P-f;f=P,p&&p({action:c,location:x.location,delta:R})}function _(P,R){c="PUSH";let F=wv(x.location,P,R);f=m()+1;let I=US(F,f),$=x.createHref(F);try{l.pushState(I,"",$)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign($)}d&&p&&p({action:c,location:x.location,delta:1})}function A(P,R){c="REPLACE";let F=wv(x.location,P,R);f=m();let I=US(F,f),$=x.createHref(F);l.replaceState(I,"",$),d&&p&&p({action:c,location:x.location,delta:0})}function T(P){return rP(P)}let x={get action(){return c},get location(){return t(s,l)},listen(P){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(DS,b),p=P,()=>{s.removeEventListener(DS,b),p=null}},createHref(P){return r(s,P)},createURL:T,encodeLocation(P){let R=T(P);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:_,replace:A,go(P){return l.go(P)}};return x}function rP(t,r=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),fi(i,"No window.location.(origin|href) available to create URL");let a=typeof t=="string"?t:rg(t);return a=a.replace(/ $/,"%20"),!r&&a.startsWith("//")&&(a=i+a),new URL(a,i)}function fA(t,r,i="/"){return nP(t,r,i,!1)}function nP(t,r,i,a){let s=typeof r=="string"?Td(r):r,d=Ol(s.pathname||"/",i);if(d==null)return null;let l=dA(t);iP(l);let c=null;for(let p=0;c==null&&p<l.length;++p){let f=gP(d);c=hP(l[p],f,a)}return c}function dA(t,r=[],i=[],a=""){let s=(d,l,c)=>{let p={relativePath:c===void 0?d.path||"":c,caseSensitive:d.caseSensitive===!0,childrenIndex:l,route:d};p.relativePath.startsWith("/")&&(fi(p.relativePath.startsWith(a),`Absolute route path "${p.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(a.length));let f=xl([a,p.relativePath]),m=i.concat(p);d.children&&d.children.length>0&&(fi(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),dA(d.children,r,m,f)),!(d.path==null&&!d.index)&&r.push({path:f,score:fP(f,d.index),routesMeta:m})};return t.forEach((d,l)=>{if(d.path===""||!d.path?.includes("?"))s(d,l);else for(let c of hA(d.path))s(d,l,c)}),r}function hA(t){let r=t.split("/");if(r.length===0)return[];let[i,...a]=r,s=i.endsWith("?"),d=i.replace(/\?$/,"");if(a.length===0)return s?[d,""]:[d];let l=hA(a.join("/")),c=[];return c.push(...l.map(p=>p===""?d:[d,p].join("/"))),s&&c.push(...l),c.map(p=>t.startsWith("/")&&p===""?"/":p)}function iP(t){t.sort((r,i)=>r.score!==i.score?i.score-r.score:dP(r.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var aP=/^:[\w-]+$/,oP=3,sP=2,lP=1,uP=10,cP=-2,LS=t=>t==="*";function fP(t,r){let i=t.split("/"),a=i.length;return i.some(LS)&&(a+=cP),r&&(a+=sP),i.filter(s=>!LS(s)).reduce((s,d)=>s+(aP.test(d)?oP:d===""?lP:uP),a)}function dP(t,r){return t.length===r.length&&t.slice(0,-1).every((a,s)=>a===r[s])?t[t.length-1]-r[r.length-1]:0}function hP(t,r,i=!1){let{routesMeta:a}=t,s={},d="/",l=[];for(let c=0;c<a.length;++c){let p=a[c],f=c===a.length-1,m=d==="/"?r:r.slice(d.length)||"/",b=jy({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},m),_=p.route;if(!b&&f&&i&&!a[a.length-1].route.index&&(b=jy({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},m)),!b)return null;Object.assign(s,b.params),l.push({params:s,pathname:xl([d,b.pathname]),pathnameBase:bP(xl([d,b.pathnameBase])),route:_}),b.pathnameBase!=="/"&&(d=xl([d,b.pathnameBase]))}return l}function jy(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,a]=pP(t.path,t.caseSensitive,t.end),s=r.match(i);if(!s)return null;let d=s[0],l=d.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:a.reduce((f,{paramName:m,isOptional:b},_)=>{if(m==="*"){let T=c[_]||"";l=d.slice(0,d.length-T.length).replace(/(.)\/+$/,"$1")}const A=c[_];return b&&!A?f[m]=void 0:f[m]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:d,pathnameBase:l,pattern:t}}function pP(t,r=!1,i=!0){Wo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let a=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,p)=>(a.push({paramName:c,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,r?void 0:"i"),a]}function gP(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Wo(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),t}}function Ol(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,a=t.charAt(i);return a&&a!=="/"?null:t.slice(i)||"/"}function yP(t,r="/"){let{pathname:i,search:a="",hash:s=""}=typeof t=="string"?Td(t):t;return{pathname:i?i.startsWith("/")?i:mP(i,r):r,search:wP(a),hash:_P(s)}}function mP(t,r){let i=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?i.length>1&&i.pop():s!=="."&&i.push(s)}),i.length>1?i.join("/"):"/"}function W0(t,r,i,a){return`Cannot include a '${t}' character in a manually specified \`to.${r}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vP(t){return t.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function ab(t){let r=vP(t);return r.map((i,a)=>a===r.length-1?i.pathname:i.pathnameBase)}function ob(t,r,i,a=!1){let s;typeof t=="string"?s=Td(t):(s={...t},fi(!s.pathname||!s.pathname.includes("?"),W0("?","pathname","search",s)),fi(!s.pathname||!s.pathname.includes("#"),W0("#","pathname","hash",s)),fi(!s.search||!s.search.includes("#"),W0("#","search","hash",s)));let d=t===""||s.pathname==="",l=d?"/":s.pathname,c;if(l==null)c=i;else{let b=r.length-1;if(!a&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),b-=1;s.pathname=_.join("/")}c=b>=0?r[b]:"/"}let p=yP(s,c),f=l&&l!=="/"&&l.endsWith("/"),m=(d||l===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(f||m)&&(p.pathname+="/"),p}var xl=t=>t.join("/").replace(/\/\/+/g,"/"),bP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_P=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var pA=["POST","PUT","PATCH","DELETE"];new Set(pA);var EP=["GET",...pA];new Set(EP);var Cd=St.createContext(null);Cd.displayName="DataRouter";var om=St.createContext(null);om.displayName="DataRouterState";var gA=St.createContext({isTransitioning:!1});gA.displayName="ViewTransition";var AP=St.createContext(new Map);AP.displayName="Fetchers";var RP=St.createContext(null);RP.displayName="Await";var Jo=St.createContext(null);Jo.displayName="Navigation";var yg=St.createContext(null);yg.displayName="Location";var Os=St.createContext({outlet:null,matches:[],isDataRoute:!1});Os.displayName="Route";var sb=St.createContext(null);sb.displayName="RouteError";function xP(t,{relative:r}={}){fi(Od(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=St.useContext(Jo),{hash:s,pathname:d,search:l}=mg(t,{relative:r}),c=d;return i!=="/"&&(c=d==="/"?i:xl([i,d])),a.createHref({pathname:c,search:l,hash:s})}function Od(){return St.useContext(yg)!=null}function Lu(){return fi(Od(),"useLocation() may be used only in the context of a <Router> component."),St.useContext(yg).location}var yA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mA(t){St.useContext(Jo).static||St.useLayoutEffect(t)}function vA(){let{isDataRoute:t}=St.useContext(Os);return t?BP():TP()}function TP(){fi(Od(),"useNavigate() may be used only in the context of a <Router> component.");let t=St.useContext(Cd),{basename:r,navigator:i}=St.useContext(Jo),{matches:a}=St.useContext(Os),{pathname:s}=Lu(),d=JSON.stringify(ab(a)),l=St.useRef(!1);return mA(()=>{l.current=!0}),St.useCallback((p,f={})=>{if(Wo(l.current,yA),!l.current)return;if(typeof p=="number"){i.go(p);return}let m=ob(p,JSON.parse(d),s,f.relative==="path");t==null&&r!=="/"&&(m.pathname=m.pathname==="/"?r:xl([r,m.pathname])),(f.replace?i.replace:i.push)(m,f.state,f)},[r,i,d,s,t])}St.createContext(null);function mg(t,{relative:r}={}){let{matches:i}=St.useContext(Os),{pathname:a}=Lu(),s=JSON.stringify(ab(i));return St.useMemo(()=>ob(t,JSON.parse(s),a,r==="path"),[t,s,a,r])}function CP(t,r){return bA(t,r)}function bA(t,r,i,a){fi(Od(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=St.useContext(Jo),{matches:d}=St.useContext(Os),l=d[d.length-1],c=l?l.params:{},p=l?l.pathname:"/",f=l?l.pathnameBase:"/",m=l&&l.route;{let R=m&&m.path||"";wA(p,!m||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let b=Lu(),_;if(r){let R=typeof r=="string"?Td(r):r;fi(f==="/"||R.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${R.pathname}" was given in the \`location\` prop.`),_=R}else _=b;let A=_.pathname||"/",T=A;if(f!=="/"){let R=f.replace(/^\//,"").split("/");T="/"+A.replace(/^\//,"").split("/").slice(R.length).join("/")}let x=fA(t,{pathname:T});Wo(m||x!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Wo(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=FP(x&&x.map(R=>Object.assign({},R,{params:Object.assign({},c,R.params),pathname:xl([f,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:xl([f,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),d,i,a);return r&&P?St.createElement(yg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},P):P}function OP(){let t=kP(),r=SP(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},d={padding:"2px 4px",backgroundColor:a},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=St.createElement(St.Fragment,null,St.createElement("p",null,"💿 Hey developer 👋"),St.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",St.createElement("code",{style:d},"ErrorBoundary")," or"," ",St.createElement("code",{style:d},"errorElement")," prop on your route.")),St.createElement(St.Fragment,null,St.createElement("h2",null,"Unexpected Application Error!"),St.createElement("h3",{style:{fontStyle:"italic"}},r),i?St.createElement("pre",{style:s},i):null,l)}var PP=St.createElement(OP,null),IP=class extends St.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?St.createElement(Os.Provider,{value:this.props.routeContext},St.createElement(sb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NP({routeContext:t,match:r,children:i}){let a=St.useContext(Cd);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),St.createElement(Os.Provider,{value:t},i)}function FP(t,r=[],i=null,a=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(r.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let s=t,d=i?.errors;if(d!=null){let p=s.findIndex(f=>f.route.id&&d?.[f.route.id]!==void 0);fi(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let l=!1,c=-1;if(i)for(let p=0;p<s.length;p++){let f=s[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=p),f.route.id){let{loaderData:m,errors:b}=i,_=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!b||b[f.route.id]===void 0);if(f.route.lazy||_){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((p,f,m)=>{let b,_=!1,A=null,T=null;i&&(b=d&&f.route.id?d[f.route.id]:void 0,A=f.route.errorElement||PP,l&&(c<0&&m===0?(wA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,T=null):c===m&&(_=!0,T=f.route.hydrateFallbackElement||null)));let x=r.concat(s.slice(0,m+1)),P=()=>{let R;return b?R=A:_?R=T:f.route.Component?R=St.createElement(f.route.Component,null):f.route.element?R=f.route.element:R=p,St.createElement(NP,{match:f,routeContext:{outlet:p,matches:x,isDataRoute:i!=null},children:R})};return i&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?St.createElement(IP,{location:i.location,revalidation:i.revalidation,component:A,error:b,children:P(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):P()},null)}function lb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DP(t){let r=St.useContext(Cd);return fi(r,lb(t)),r}function UP(t){let r=St.useContext(om);return fi(r,lb(t)),r}function LP(t){let r=St.useContext(Os);return fi(r,lb(t)),r}function ub(t){let r=LP(t),i=r.matches[r.matches.length-1];return fi(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function MP(){return ub("useRouteId")}function kP(){let t=St.useContext(sb),r=UP("useRouteError"),i=ub("useRouteError");return t!==void 0?t:r.errors?.[i]}function BP(){let{router:t}=DP("useNavigate"),r=ub("useNavigate"),i=St.useRef(!1);return mA(()=>{i.current=!0}),St.useCallback(async(s,d={})=>{Wo(i.current,yA),i.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:r,...d}))},[t,r])}var MS={};function wA(t,r,i){!r&&!MS[t]&&(MS[t]=!0,Wo(!1,i))}St.memo(HP);function HP({routes:t,future:r,state:i}){return bA(t,void 0,i,r)}function jP({to:t,replace:r,state:i,relative:a}){fi(Od(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=St.useContext(Jo);Wo(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=St.useContext(Os),{pathname:l}=Lu(),c=vA(),p=ob(t,ab(d),l,a==="path"),f=JSON.stringify(p);return St.useEffect(()=>{c(JSON.parse(f),{replace:r,state:i,relative:a})},[c,f,a,r,i]),null}function Iy(t){fi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VP({basename:t="/",children:r=null,location:i,navigationType:a="POP",navigator:s,static:d=!1}){fi(!Od(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=St.useMemo(()=>({basename:l,navigator:s,static:d,future:{}}),[l,s,d]);typeof i=="string"&&(i=Td(i));let{pathname:p="/",search:f="",hash:m="",state:b=null,key:_="default"}=i,A=St.useMemo(()=>{let T=Ol(p,l);return T==null?null:{location:{pathname:T,search:f,hash:m,state:b,key:_},navigationType:a}},[l,p,f,m,b,_,a]);return Wo(A!=null,`<Router basename="${l}"> is not able to match the URL "${p}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:St.createElement(Jo.Provider,{value:c},St.createElement(yg.Provider,{children:r,value:A}))}function KP({children:t,location:r}){return CP(_v(t),r)}function _v(t,r=[]){let i=[];return St.Children.forEach(t,(a,s)=>{if(!St.isValidElement(a))return;let d=[...r,s];if(a.type===St.Fragment){i.push.apply(i,_v(a.props.children,d));return}fi(a.type===Iy,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),fi(!a.props.index||!a.props.children,"An index route cannot have child routes.");let l={id:a.props.id||d.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=_v(a.props.children,d)),i.push(l)}),i}var Ny="get",Fy="application/x-www-form-urlencoded";function sm(t){return t!=null&&typeof t.tagName=="string"}function GP(t){return sm(t)&&t.tagName.toLowerCase()==="button"}function $P(t){return sm(t)&&t.tagName.toLowerCase()==="form"}function qP(t){return sm(t)&&t.tagName.toLowerCase()==="input"}function zP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function WP(t,r){return t.button===0&&(!r||r==="_self")&&!zP(t)}var Ey=null;function JP(){if(Ey===null)try{new FormData(document.createElement("form"),0),Ey=!1}catch{Ey=!0}return Ey}var YP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function J0(t){return t!=null&&!YP.has(t)?(Wo(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fy}"`),null):t}function QP(t,r){let i,a,s,d,l;if($P(t)){let c=t.getAttribute("action");a=c?Ol(c,r):null,i=t.getAttribute("method")||Ny,s=J0(t.getAttribute("enctype"))||Fy,d=new FormData(t)}else if(GP(t)||qP(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||c.getAttribute("action");if(a=p?Ol(p,r):null,i=t.getAttribute("formmethod")||c.getAttribute("method")||Ny,s=J0(t.getAttribute("formenctype"))||J0(c.getAttribute("enctype"))||Fy,d=new FormData(c,t),!JP()){let{name:f,type:m,value:b}=t;if(m==="image"){let _=f?`${f}.`:"";d.append(`${_}x`,"0"),d.append(`${_}y`,"0")}else f&&d.append(f,b)}}else{if(sm(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Ny,a=null,s=Fy,l=t}return d&&s==="text/plain"&&(l=d,d=void 0),{action:a,method:i.toLowerCase(),encType:s,formData:d,body:l}}function cb(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}async function XP(t,r){if(t.id in r)return r[t.id];try{let i=await import(t.module);return r[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZP(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function eI(t,r,i){let a=await Promise.all(t.map(async s=>{let d=r.routes[s.route.id];if(d){let l=await XP(d,i);return l.links?l.links():[]}return[]}));return iI(a.flat(1).filter(ZP).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function kS(t,r,i,a,s,d){let l=(p,f)=>i[f]?p.route.id!==i[f].route.id:!0,c=(p,f)=>i[f].pathname!==p.pathname||i[f].route.path?.endsWith("*")&&i[f].params["*"]!==p.params["*"];return d==="assets"?r.filter((p,f)=>l(p,f)||c(p,f)):d==="data"?r.filter((p,f)=>{let m=a.routes[p.route.id];if(!m||!m.hasLoader)return!1;if(l(p,f)||c(p,f))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function tI(t,r,{includeHydrateFallback:i}={}){return rI(t.map(a=>{let s=r.routes[a.route.id];if(!s)return[];let d=[s.module];return s.clientActionModule&&(d=d.concat(s.clientActionModule)),s.clientLoaderModule&&(d=d.concat(s.clientLoaderModule)),i&&s.hydrateFallbackModule&&(d=d.concat(s.hydrateFallbackModule)),s.imports&&(d=d.concat(s.imports)),d}).flat(1))}function rI(t){return[...new Set(t)]}function nI(t){let r={},i=Object.keys(t).sort();for(let a of i)r[a]=t[a];return r}function iI(t,r){let i=new Set;return new Set(r),t.reduce((a,s)=>{let d=JSON.stringify(nI(s));return i.has(d)||(i.add(d),a.push({key:d,link:s})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var aI=new Set([100,101,204,205]);function oI(t,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname="_root.data":r&&Ol(i.pathname,r)==="/"?i.pathname=`${r.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function _A(){let t=St.useContext(Cd);return cb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function sI(){let t=St.useContext(om);return cb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var fb=St.createContext(void 0);fb.displayName="FrameworkContext";function SA(){let t=St.useContext(fb);return cb(t,"You must render this element inside a <HydratedRouter> element"),t}function lI(t,r){let i=St.useContext(fb),[a,s]=St.useState(!1),[d,l]=St.useState(!1),{onFocus:c,onBlur:p,onMouseEnter:f,onMouseLeave:m,onTouchStart:b}=r,_=St.useRef(null);St.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let x=R=>{R.forEach(F=>{l(F.isIntersecting)})},P=new IntersectionObserver(x,{threshold:.5});return _.current&&P.observe(_.current),()=>{P.disconnect()}}},[t]),St.useEffect(()=>{if(a){let x=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(x)}}},[a]);let A=()=>{s(!0)},T=()=>{s(!1),l(!1)};return i?t!=="intent"?[d,_,{}]:[d,_,{onFocus:$p(c,A),onBlur:$p(p,T),onMouseEnter:$p(f,A),onMouseLeave:$p(m,T),onTouchStart:$p(b,A)}]:[!1,_,{}]}function $p(t,r){return i=>{t&&t(i),i.defaultPrevented||r(i)}}function uI({page:t,...r}){let{router:i}=_A(),a=St.useMemo(()=>fA(i.routes,t,i.basename),[i.routes,t,i.basename]);return a?St.createElement(fI,{page:t,matches:a,...r}):null}function cI(t){let{manifest:r,routeModules:i}=SA(),[a,s]=St.useState([]);return St.useEffect(()=>{let d=!1;return eI(t,r,i).then(l=>{d||s(l)}),()=>{d=!0}},[t,r,i]),a}function fI({page:t,matches:r,...i}){let a=Lu(),{manifest:s,routeModules:d}=SA(),{basename:l}=_A(),{loaderData:c,matches:p}=sI(),f=St.useMemo(()=>kS(t,r,p,s,a,"data"),[t,r,p,s,a]),m=St.useMemo(()=>kS(t,r,p,s,a,"assets"),[t,r,p,s,a]),b=St.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let T=new Set,x=!1;if(r.forEach(R=>{let F=s.routes[R.route.id];!F||!F.hasLoader||(!f.some(I=>I.route.id===R.route.id)&&R.route.id in c&&d[R.route.id]?.shouldRevalidate||F.hasClientLoader?x=!0:T.add(R.route.id))}),T.size===0)return[];let P=oI(t,l);return x&&T.size>0&&P.searchParams.set("_routes",r.filter(R=>T.has(R.route.id)).map(R=>R.route.id).join(",")),[P.pathname+P.search]},[l,c,a,s,f,r,t,d]),_=St.useMemo(()=>tI(m,s),[m,s]),A=cI(m);return St.createElement(St.Fragment,null,b.map(T=>St.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...i})),_.map(T=>St.createElement("link",{key:T,rel:"modulepreload",href:T,...i})),A.map(({key:T,link:x})=>St.createElement("link",{key:T,...x})))}function dI(...t){return r=>{t.forEach(i=>{typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var EA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{EA&&(window.__reactRouterVersion="7.6.3")}catch{}function hI({basename:t,children:r,window:i}){let a=St.useRef();a.current==null&&(a.current=ZO({window:i,v5Compat:!0}));let s=a.current,[d,l]=St.useState({action:s.action,location:s.location}),c=St.useCallback(p=>{St.startTransition(()=>l(p))},[l]);return St.useLayoutEffect(()=>s.listen(c),[s,c]),St.createElement(VP,{basename:t,children:r,location:d.location,navigationType:d.action,navigator:s})}var AA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RA=St.forwardRef(function({onClick:r,discover:i="render",prefetch:a="none",relative:s,reloadDocument:d,replace:l,state:c,target:p,to:f,preventScrollReset:m,viewTransition:b,..._},A){let{basename:T}=St.useContext(Jo),x=typeof f=="string"&&AA.test(f),P,R=!1;if(typeof f=="string"&&x&&(P=f,EA))try{let Ie=new URL(window.location.href),K=f.startsWith("//")?new URL(Ie.protocol+f):new URL(f),ie=Ol(K.pathname,T);K.origin===Ie.origin&&ie!=null?f=ie+K.search+K.hash:R=!0}catch{Wo(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=xP(f,{relative:s}),[I,$,B]=lI(a,_),W=mI(f,{replace:l,state:c,target:p,preventScrollReset:m,relative:s,viewTransition:b});function Y(Ie){r&&r(Ie),Ie.defaultPrevented||W(Ie)}let q=St.createElement("a",{..._,...B,href:P||F,onClick:R||d?r:Y,ref:dI(A,$),target:p,"data-discover":!x&&i==="render"?"true":void 0});return I&&!x?St.createElement(St.Fragment,null,q,St.createElement(uI,{page:F})):q});RA.displayName="Link";var pI=St.forwardRef(function({"aria-current":r="page",caseSensitive:i=!1,className:a="",end:s=!1,style:d,to:l,viewTransition:c,children:p,...f},m){let b=mg(l,{relative:f.relative}),_=Lu(),A=St.useContext(om),{navigator:T,basename:x}=St.useContext(Jo),P=A!=null&&SI(b)&&c===!0,R=T.encodeLocation?T.encodeLocation(b).pathname:b.pathname,F=_.pathname,I=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(F=F.toLowerCase(),I=I?I.toLowerCase():null,R=R.toLowerCase()),I&&x&&(I=Ol(I,x)||I);const $=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let B=F===R||!s&&F.startsWith(R)&&F.charAt($)==="/",W=I!=null&&(I===R||!s&&I.startsWith(R)&&I.charAt(R.length)==="/"),Y={isActive:B,isPending:W,isTransitioning:P},q=B?r:void 0,Ie;typeof a=="function"?Ie=a(Y):Ie=[a,B?"active":null,W?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let K=typeof d=="function"?d(Y):d;return St.createElement(RA,{...f,"aria-current":q,className:Ie,ref:m,style:K,to:l,viewTransition:c},typeof p=="function"?p(Y):p)});pI.displayName="NavLink";var gI=St.forwardRef(({discover:t="render",fetcherKey:r,navigate:i,reloadDocument:a,replace:s,state:d,method:l=Ny,action:c,onSubmit:p,relative:f,preventScrollReset:m,viewTransition:b,..._},A)=>{let T=wI(),x=_I(c,{relative:f}),P=l.toLowerCase()==="get"?"get":"post",R=typeof c=="string"&&AA.test(c),F=I=>{if(p&&p(I),I.defaultPrevented)return;I.preventDefault();let $=I.nativeEvent.submitter,B=$?.getAttribute("formmethod")||l;T($||I.currentTarget,{fetcherKey:r,method:B,navigate:i,replace:s,state:d,relative:f,preventScrollReset:m,viewTransition:b})};return St.createElement("form",{ref:A,method:P,action:x,onSubmit:a?p:F,..._,"data-discover":!R&&t==="render"?"true":void 0})});gI.displayName="Form";function yI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xA(t){let r=St.useContext(Cd);return fi(r,yI(t)),r}function mI(t,{target:r,replace:i,state:a,preventScrollReset:s,relative:d,viewTransition:l}={}){let c=vA(),p=Lu(),f=mg(t,{relative:d});return St.useCallback(m=>{if(WP(m,r)){m.preventDefault();let b=i!==void 0?i:rg(p)===rg(f);c(t,{replace:b,state:a,preventScrollReset:s,relative:d,viewTransition:l})}},[p,c,f,i,a,r,t,s,d,l])}var vI=0,bI=()=>`__${String(++vI)}__`;function wI(){let{router:t}=xA("useSubmit"),{basename:r}=St.useContext(Jo),i=MP();return St.useCallback(async(a,s={})=>{let{action:d,method:l,encType:c,formData:p,body:f}=QP(a,r);if(s.navigate===!1){let m=s.fetcherKey||bI();await t.fetch(m,i,s.action||d,{preventScrollReset:s.preventScrollReset,formData:p,body:f,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||d,{preventScrollReset:s.preventScrollReset,formData:p,body:f,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:i,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,r,i])}function _I(t,{relative:r}={}){let{basename:i}=St.useContext(Jo),a=St.useContext(Os);fi(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),d={...mg(t||".",{relative:r})},l=Lu();if(t==null){d.search=l.search;let c=new URLSearchParams(d.search),p=c.getAll("index");if(p.some(m=>m==="")){c.delete("index"),p.filter(b=>b).forEach(b=>c.append("index",b));let m=c.toString();d.search=m?`?${m}`:""}}return(!t||t===".")&&s.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(d.pathname=d.pathname==="/"?i:xl([i,d.pathname])),rg(d)}function SI(t,r={}){let i=St.useContext(gA);fi(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=xA("useViewTransitionState"),s=mg(t,{relative:r.relative});if(!i.isTransitioning)return!1;let d=Ol(i.currentLocation.pathname,a)||i.currentLocation.pathname,l=Ol(i.nextLocation.pathname,a)||i.nextLocation.pathname;return jy(s.pathname,l)!=null||jy(s.pathname,d)!=null}[...aI];var Y0={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var BS;function EI(){return BS||(BS=1,function(t){(function(){var r={}.hasOwnProperty;function i(){for(var d="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(d=s(d,a(c)))}return d}function a(d){if(typeof d=="string"||typeof d=="number")return d;if(typeof d!="object")return"";if(Array.isArray(d))return i.apply(null,d);if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]"))return d.toString();var l="";for(var c in d)r.call(d,c)&&d[c]&&(l=s(l,c));return l}function s(d,l){return l?d?d+" "+l:d+l:d}t.exports?(i.default=i,t.exports=i):window.classNames=i})()}(Y0)),Y0.exports}var AI=EI();const RI=qS(AI),xI=["xxl","xl","lg","md","sm","xs"],TI="xs",TA=St.createContext({prefixes:{},breakpoints:xI,minBreakpoint:TI}),{Consumer:bN,Provider:wN}=TA;function CI(t,r){const{prefixes:i}=St.useContext(TA);return t||i[r]||r}const CA=St.forwardRef(({bsPrefix:t,fluid:r=!1,as:i="div",className:a,...s},d)=>{const l=CI(t,"container"),c=typeof r=="string"?`-${r}`:"-fluid";return ki.jsx(i,{ref:d,...s,className:RI(a,r?`${l}${c}`:l)})});CA.displayName="Container";var lm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},um=typeof window>"u"||"Deno"in globalThis;function qo(){}function OI(t,r){return typeof t=="function"?t(r):t}function PI(t){return typeof t=="number"&&t>=0&&t!==1/0}function II(t,r){return Math.max(t+(r||0)-Date.now(),0)}function Sv(t,r){return typeof t=="function"?t(r):t}function NI(t,r){return typeof t=="function"?t(r):t}function HS(t,r){const{type:i="all",exact:a,fetchStatus:s,predicate:d,queryKey:l,stale:c}=t;if(l){if(a){if(r.queryHash!==db(l,r.options))return!1}else if(!ig(r.queryKey,l))return!1}if(i!=="all"){const p=r.isActive();if(i==="active"&&!p||i==="inactive"&&p)return!1}return!(typeof c=="boolean"&&r.isStale()!==c||s&&s!==r.state.fetchStatus||d&&!d(r))}function jS(t,r){const{exact:i,status:a,predicate:s,mutationKey:d}=t;if(d){if(!r.options.mutationKey)return!1;if(i){if(ng(r.options.mutationKey)!==ng(d))return!1}else if(!ig(r.options.mutationKey,d))return!1}return!(a&&r.state.status!==a||s&&!s(r))}function db(t,r){return(r?.queryKeyHashFn||ng)(t)}function ng(t){return JSON.stringify(t,(r,i)=>Ev(i)?Object.keys(i).sort().reduce((a,s)=>(a[s]=i[s],a),{}):i)}function ig(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?Object.keys(r).every(i=>ig(t[i],r[i])):!1}function OA(t,r){if(t===r)return t;const i=VS(t)&&VS(r);if(i||Ev(t)&&Ev(r)){const a=i?t:Object.keys(t),s=a.length,d=i?r:Object.keys(r),l=d.length,c=i?[]:{},p=new Set(a);let f=0;for(let m=0;m<l;m++){const b=i?m:d[m];(!i&&p.has(b)||i)&&t[b]===void 0&&r[b]===void 0?(c[b]=void 0,f++):(c[b]=OA(t[b],r[b]),c[b]===t[b]&&t[b]!==void 0&&f++)}return s===l&&f===s?t:c}return r}function VS(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ev(t){if(!KS(t))return!1;const r=t.constructor;if(r===void 0)return!0;const i=r.prototype;return!(!KS(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function KS(t){return Object.prototype.toString.call(t)==="[object Object]"}function FI(t){return new Promise(r=>{setTimeout(r,t)})}function DI(t,r,i){return typeof i.structuralSharing=="function"?i.structuralSharing(t,r):i.structuralSharing!==!1?OA(t,r):r}function UI(t,r,i=0){const a=[...t,r];return i&&a.length>i?a.slice(1):a}function LI(t,r,i=0){const a=[r,...t];return i&&a.length>i?a.slice(0,-1):a}var hb=Symbol();function PA(t,r){return!t.queryFn&&r?.initialPromise?()=>r.initialPromise:!t.queryFn||t.queryFn===hb?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var MI=class extends lm{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!um&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},IA=new MI,kI=class extends lm{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!um&&window.addEventListener){const r=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(i=>{i(t)}))}isOnline(){return this.#e}},Vy=new kI;function BI(){let t,r;const i=new Promise((s,d)=>{t=s,r=d});i.status="pending",i.catch(()=>{});function a(s){Object.assign(i,s),delete i.resolve,delete i.reject}return i.resolve=s=>{a({status:"fulfilled",value:s}),t(s)},i.reject=s=>{a({status:"rejected",reason:s}),r(s)},i}function HI(t){return Math.min(1e3*2**t,3e4)}function NA(t){return(t??"online")==="online"?Vy.isOnline():!0}var FA=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Q0(t){return t instanceof FA}function DA(t){let r=!1,i=0,a=!1,s;const d=BI(),l=x=>{a||(_(new FA(x)),t.abort?.())},c=()=>{r=!0},p=()=>{r=!1},f=()=>IA.isFocused()&&(t.networkMode==="always"||Vy.isOnline())&&t.canRun(),m=()=>NA(t.networkMode)&&t.canRun(),b=x=>{a||(a=!0,t.onSuccess?.(x),s?.(),d.resolve(x))},_=x=>{a||(a=!0,t.onError?.(x),s?.(),d.reject(x))},A=()=>new Promise(x=>{s=P=>{(a||f())&&x(P)},t.onPause?.()}).then(()=>{s=void 0,a||t.onContinue?.()}),T=()=>{if(a)return;let x;const P=i===0?t.initialPromise:void 0;try{x=P??t.fn()}catch(R){x=Promise.reject(R)}Promise.resolve(x).then(b).catch(R=>{if(a)return;const F=t.retry??(um?0:3),I=t.retryDelay??HI,$=typeof I=="function"?I(i,R):I,B=F===!0||typeof F=="number"&&i<F||typeof F=="function"&&F(i,R);if(r||!B){_(R);return}i++,t.onFail?.(i,R),FI($).then(()=>f()?void 0:A()).then(()=>{r?_(R):T()})})};return{promise:d,cancel:l,continue:()=>(s?.(),d),cancelRetry:c,continueRetry:p,canStart:m,start:()=>(m()?T():A().then(T),d)}}var jI=t=>setTimeout(t,0);function VI(){let t=[],r=0,i=c=>{c()},a=c=>{c()},s=jI;const d=c=>{r?t.push(c):s(()=>{i(c)})},l=()=>{const c=t;t=[],c.length&&s(()=>{a(()=>{c.forEach(p=>{i(p)})})})};return{batch:c=>{let p;r++;try{p=c()}finally{r--,r||l()}return p},batchCalls:c=>(...p)=>{d(()=>{c(...p)})},schedule:d,setNotifyFunction:c=>{i=c},setBatchNotifyFunction:c=>{a=c},setScheduler:c=>{s=c}}}var Sa=VI(),UA=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),PI(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(um?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},KI=class extends UA{#e;#t;#r;#i;#n;#o;#s;constructor(t){super(),this.#s=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#r=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=$I(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,r){const i=DI(this.state.data,t,this.options);return this.#a({data:i,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),i}setState(t,r){this.#a({type:"setState",state:t,setStateOptions:r})}cancel(t){const r=this.#n?.promise;return this.#n?.cancel(t),r?r.then(qo).catch(qo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>NI(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===hb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Sv(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!II(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(this.#n&&(this.#s?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(t,r){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(f=>f.options.queryFn);p&&this.setOptions(p.options)}const i=new AbortController,a=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(this.#s=!0,i.signal)})},s=()=>{const p=PA(this.options,r),m=(()=>{const b={client:this.#i,queryKey:this.queryKey,meta:this.meta};return a(b),b})();return this.#s=!1,this.options.persister?this.options.persister(p,m,this):p(m)},l=(()=>{const p={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:s};return a(p),p})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta});const c=p=>{Q0(p)&&p.silent||this.#a({type:"error",error:p}),Q0(p)||(this.#r.config.onError?.(p,this),this.#r.config.onSettled?.(this.state.data,p,this)),this.scheduleGc()};return this.#n=DA({initialPromise:r?.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:p=>{if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(f){c(f);return}this.#r.config.onSuccess?.(p,this),this.#r.config.onSettled?.(p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,f)=>{this.#a({type:"failed",failureCount:p,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}),this.#n.start()}#a(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...GI(i.data,this.options),fetchMeta:t.meta??null};case"success":return this.#t=void 0,{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Q0(a)&&a.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),Sa.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function GI(t,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:NA(r.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function $I(t){const r=typeof t.initialData=="function"?t.initialData():t.initialData,i=r!==void 0,a=i?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:i?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var qI=class extends lm{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,r,i){const a=r.queryKey,s=r.queryHash??db(a,r);let d=this.get(s);return d||(d=new KI({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(r),state:i,defaultOptions:t.getQueryDefaults(a)}),this.add(d)),d}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=this.#e.get(t.queryHash);r&&(t.destroy(),r===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Sa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const r={exact:!0,...t};return this.getAll().find(i=>HS(r,i))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(i=>HS(t,i)):r}notify(t){Sa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Sa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Sa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},zI=class extends UA{#e;#t;#r;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||WI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(r=>r!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const r=()=>{this.#i({type:"continue"})};this.#r=DA({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(s,d)=>{this.#i({type:"failed",failureCount:s,error:d})},onPause:()=>{this.#i({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const i=this.state.status==="pending",a=!this.#r.canStart();try{if(i)r();else{this.#i({type:"pending",variables:t,isPaused:a}),await this.#t.config.onMutate?.(t,this);const d=await this.options.onMutate?.(t);d!==this.state.context&&this.#i({type:"pending",context:d,variables:t,isPaused:a})}const s=await this.#r.start();return await this.#t.config.onSuccess?.(s,t,this.state.context,this),await this.options.onSuccess?.(s,t,this.state.context),await this.#t.config.onSettled?.(s,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(s,null,t,this.state.context),this.#i({type:"success",data:s}),s}catch(s){try{throw await this.#t.config.onError?.(s,t,this.state.context,this),await this.options.onError?.(s,t,this.state.context),await this.#t.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,s,t,this.state.context),s}finally{this.#i({type:"error",error:s})}}finally{this.#t.runNext(this)}}#i(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Sa.batch(()=>{this.#e.forEach(i=>{i.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function WI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var JI=class extends lm{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,r,i){const a=new zI({mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(r),state:i});return this.add(a),a}add(t){this.#e.add(t);const r=Ay(t);if(typeof r=="string"){const i=this.#t.get(r);i?i.push(t):this.#t.set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const r=Ay(t);if(typeof r=="string"){const i=this.#t.get(r);if(i)if(i.length>1){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}else i[0]===t&&this.#t.delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Ay(t);if(typeof r=="string"){const a=this.#t.get(r)?.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){const r=Ay(t);return typeof r=="string"?this.#t.get(r)?.find(a=>a!==t&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Sa.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const r={exact:!0,...t};return this.getAll().find(i=>jS(r,i))}findAll(t={}){return this.getAll().filter(r=>jS(t,r))}notify(t){Sa.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Sa.batch(()=>Promise.all(t.map(r=>r.continue().catch(qo))))}};function Ay(t){return t.options.scope?.id}function GS(t){return{onFetch:(r,i)=>{const a=r.options,s=r.fetchOptions?.meta?.fetchMore?.direction,d=r.state.data?.pages||[],l=r.state.data?.pageParams||[];let c={pages:[],pageParams:[]},p=0;const f=async()=>{let m=!1;const b=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(r.signal.aborted?m=!0:r.signal.addEventListener("abort",()=>{m=!0}),r.signal)})},_=PA(r.options,r.fetchOptions),A=async(T,x,P)=>{if(m)return Promise.reject();if(x==null&&T.pages.length)return Promise.resolve(T);const F=(()=>{const W={client:r.client,queryKey:r.queryKey,pageParam:x,direction:P?"backward":"forward",meta:r.options.meta};return b(W),W})(),I=await _(F),{maxPages:$}=r.options,B=P?LI:UI;return{pages:B(T.pages,I,$),pageParams:B(T.pageParams,x,$)}};if(s&&d.length){const T=s==="backward",x=T?YI:$S,P={pages:d,pageParams:l},R=x(a,P);c=await A(P,R,T)}else{const T=t??d.length;do{const x=p===0?l[0]??a.initialPageParam:$S(a,c);if(p>0&&x==null)break;c=await A(c,x),p++}while(p<T)}return c};r.options.persister?r.fetchFn=()=>r.options.persister?.(f,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},i):r.fetchFn=f}}}function $S(t,{pages:r,pageParams:i}){const a=r.length-1;return r.length>0?t.getNextPageParam(r[a],r,i[a],i):void 0}function YI(t,{pages:r,pageParams:i}){return r.length>0?t.getPreviousPageParam?.(r[0],r,i[0],i):void 0}var QI=class{#e;#t;#r;#i;#n;#o;#s;#a;constructor(t={}){this.#e=t.queryCache||new qI,this.#t=t.mutationCache||new JI,this.#r=t.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#s=IA.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Vy.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(t){const r=this.defaultQueryOptions(t),i=this.#e.build(this,r),a=i.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&i.isStaleByTime(Sv(r.staleTime,i))&&this.prefetchQuery(r),Promise.resolve(a))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:r,state:i})=>{const a=i.data;return[r,a]})}setQueryData(t,r,i){const a=this.defaultQueryOptions({queryKey:t}),d=this.#e.get(a.queryHash)?.state.data,l=OI(r,d);if(l!==void 0)return this.#e.build(this,a).setData(l,{...i,manual:!0})}setQueriesData(t,r,i){return Sa.batch(()=>this.#e.findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,r,i)]))}getQueryState(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state}removeQueries(t){const r=this.#e;Sa.batch(()=>{r.findAll(t).forEach(i=>{r.remove(i)})})}resetQueries(t,r){const i=this.#e;return Sa.batch(()=>(i.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},r)))}cancelQueries(t,r={}){const i={revert:!0,...r},a=Sa.batch(()=>this.#e.findAll(t).map(s=>s.cancel(i)));return Promise.all(a).then(qo).catch(qo)}invalidateQueries(t,r={}){return Sa.batch(()=>(this.#e.findAll(t).forEach(i=>{i.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},r)))}refetchQueries(t,r={}){const i={...r,cancelRefetch:r.cancelRefetch??!0},a=Sa.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let d=s.fetch(void 0,i);return i.throwOnError||(d=d.catch(qo)),s.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(a).then(qo)}fetchQuery(t){const r=this.defaultQueryOptions(t);r.retry===void 0&&(r.retry=!1);const i=this.#e.build(this,r);return i.isStaleByTime(Sv(r.staleTime,i))?i.fetch(r):Promise.resolve(i.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(qo).catch(qo)}fetchInfiniteQuery(t){return t.behavior=GS(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(qo).catch(qo)}ensureInfiniteQueryData(t){return t.behavior=GS(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Vy.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,r){this.#i.set(ng(t),{queryKey:t,defaultOptions:r})}getQueryDefaults(t){const r=[...this.#i.values()],i={};return r.forEach(a=>{ig(t,a.queryKey)&&Object.assign(i,a.defaultOptions)}),i}setMutationDefaults(t,r){this.#n.set(ng(t),{mutationKey:t,defaultOptions:r})}getMutationDefaults(t){const r=[...this.#n.values()],i={};return r.forEach(a=>{ig(t,a.mutationKey)&&Object.assign(i,a.defaultOptions)}),i}defaultQueryOptions(t){if(t._defaulted)return t;const r={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return r.queryHash||(r.queryHash=db(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===hb&&(r.enabled=!1),r}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},XI=St.createContext(void 0),ZI=({client:t,children:r})=>(St.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),ki.jsx(XI.Provider,{value:t,children:r}));const eN=()=>{const t=new QI;return ki.jsx(m2.SessionProvider,{restorePreviousSession:!0,children:ki.jsx(QO,{children:ki.jsx(ZI,{client:t,children:ki.jsx(CA,{fluid:!0,children:ki.jsx(hI,{basename:"/solid-menu-manager/",children:ki.jsxs(KP,{children:[ki.jsx(Iy,{path:"/",element:ki.jsx("h1",{children:"Base path"})}),ki.jsx(Iy,{path:"/login",element:ki.jsx("h1",{children:"Login path"})}),ki.jsx(Iy,{path:"*",element:ki.jsx(jP,{to:"/",replace:!0})})]})})})})})})};gR.createRoot(document.getElementById("root")).render(ki.jsx(St.StrictMode,{children:ki.jsx(eN,{})}));
