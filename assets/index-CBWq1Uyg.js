(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function i(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(o){if(o.ep)return;o.ep=!0;const d=i(o);fetch(o.href,d)}})();var uw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nm(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var r=e.default;if(typeof r=="function"){var i=function a(){var o=!1;try{o=this instanceof a}catch{}return o?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};i.prototype=r.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var o=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,o.get?o:{enumerable:!0,get:function(){return e[a]}})}),i}var Ym={exports:{}},rp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cw;function rx(){if(cw)return rp;cw=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(a,o,d){var l=null;if(d!==void 0&&(l=""+d),o.key!==void 0&&(l=""+o.key),"key"in o){d={};for(var u in o)u!=="key"&&(d[u]=o[u])}else d=o;return o=d.ref,{$$typeof:e,type:a,key:l,ref:o!==void 0?o:null,props:d}}return rp.Fragment=r,rp.jsx=i,rp.jsxs=i,rp}var fw;function nx(){return fw||(fw=1,Ym.exports=rx()),Ym.exports}var Ot=nx(),Qm={exports:{}},fn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw;function ix(){if(dw)return fn;dw=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator;function _(J){return J===null||typeof J!="object"?null:(J=b&&J[b]||J["@@iterator"],typeof J=="function"?J:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,x={};function O(J,xe,Ze){this.props=J,this.context=xe,this.refs=x,this.updater=Ze||A}O.prototype.isReactComponent={},O.prototype.setState=function(J,xe){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,xe,"setState")},O.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function R(){}R.prototype=O.prototype;function F(J,xe,Ze){this.props=J,this.context=xe,this.refs=x,this.updater=Ze||A}var P=F.prototype=new R;P.constructor=F,T(P,O.prototype),P.isPureReactComponent=!0;var K=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function Y(J,xe,Ze,je,ht,Nt){return Ze=Nt.ref,{$$typeof:e,type:J,key:xe,ref:Ze!==void 0?Ze:null,props:Nt}}function q(J,xe){return Y(J.type,xe,void 0,void 0,void 0,J.props)}function Pe(J){return typeof J=="object"&&J!==null&&J.$$typeof===e}function $(J){var xe={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Ze){return xe[Ze]})}var ie=/\/+/g;function ge(J,xe){return typeof J=="object"&&J!==null&&J.key!=null?$(""+J.key):xe.toString(36)}function Se(){}function tt(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(Se,Se):(J.status="pending",J.then(function(xe){J.status==="pending"&&(J.status="fulfilled",J.value=xe)},function(xe){J.status==="pending"&&(J.status="rejected",J.reason=xe)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function lt(J,xe,Ze,je,ht){var Nt=typeof J;(Nt==="undefined"||Nt==="boolean")&&(J=null);var kt=!1;if(J===null)kt=!0;else switch(Nt){case"bigint":case"string":case"number":kt=!0;break;case"object":switch(J.$$typeof){case e:case r:kt=!0;break;case y:return kt=J._init,lt(kt(J._payload),xe,Ze,je,ht)}}if(kt)return ht=ht(J),kt=je===""?"."+ge(J,0):je,K(ht)?(Ze="",kt!=null&&(Ze=kt.replace(ie,"$&/")+"/"),lt(ht,xe,Ze,"",function(Te){return Te})):ht!=null&&(Pe(ht)&&(ht=q(ht,Ze+(ht.key==null||J&&J.key===ht.key?"":(""+ht.key).replace(ie,"$&/")+"/")+kt)),xe.push(ht)),1;kt=0;var Me=je===""?".":je+":";if(K(J))for(var le=0;le<J.length;le++)je=J[le],Nt=Me+ge(je,le),kt+=lt(je,xe,Ze,Nt,ht);else if(le=_(J),typeof le=="function")for(J=le.call(J),le=0;!(je=J.next()).done;)je=je.value,Nt=Me+ge(je,le++),kt+=lt(je,xe,Ze,Nt,ht);else if(Nt==="object"){if(typeof J.then=="function")return lt(tt(J),xe,Ze,je,ht);throw xe=String(J),Error("Objects are not valid as a React child (found: "+(xe==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":xe)+"). If you meant to render a collection of children, use an array instead.")}return kt}function Ne(J,xe,Ze){if(J==null)return J;var je=[],ht=0;return lt(J,je,"","",function(Nt){return xe.call(Ze,Nt,ht++)}),je}function yt(J){if(J._status===-1){var xe=J._result;xe=xe(),xe.then(function(Ze){(J._status===0||J._status===-1)&&(J._status=1,J._result=Ze)},function(Ze){(J._status===0||J._status===-1)&&(J._status=2,J._result=Ze)}),J._status===-1&&(J._status=0,J._result=xe)}if(J._status===1)return J._result.default;throw J._result}var ve=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)};function rt(){}return fn.Children={map:Ne,forEach:function(J,xe,Ze){Ne(J,function(){xe.apply(this,arguments)},Ze)},count:function(J){var xe=0;return Ne(J,function(){xe++}),xe},toArray:function(J){return Ne(J,function(xe){return xe})||[]},only:function(J){if(!Pe(J))throw Error("React.Children.only expected to receive a single React element child.");return J}},fn.Component=O,fn.Fragment=i,fn.Profiler=o,fn.PureComponent=F,fn.StrictMode=a,fn.Suspense=h,fn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,fn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return B.H.useMemoCache(J)}},fn.cache=function(J){return function(){return J.apply(null,arguments)}},fn.cloneElement=function(J,xe,Ze){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var je=T({},J.props),ht=J.key,Nt=void 0;if(xe!=null)for(kt in xe.ref!==void 0&&(Nt=void 0),xe.key!==void 0&&(ht=""+xe.key),xe)!W.call(xe,kt)||kt==="key"||kt==="__self"||kt==="__source"||kt==="ref"&&xe.ref===void 0||(je[kt]=xe[kt]);var kt=arguments.length-2;if(kt===1)je.children=Ze;else if(1<kt){for(var Me=Array(kt),le=0;le<kt;le++)Me[le]=arguments[le+2];je.children=Me}return Y(J.type,ht,void 0,void 0,Nt,je)},fn.createContext=function(J){return J={$$typeof:l,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:d,_context:J},J},fn.createElement=function(J,xe,Ze){var je,ht={},Nt=null;if(xe!=null)for(je in xe.key!==void 0&&(Nt=""+xe.key),xe)W.call(xe,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(ht[je]=xe[je]);var kt=arguments.length-2;if(kt===1)ht.children=Ze;else if(1<kt){for(var Me=Array(kt),le=0;le<kt;le++)Me[le]=arguments[le+2];ht.children=Me}if(J&&J.defaultProps)for(je in kt=J.defaultProps,kt)ht[je]===void 0&&(ht[je]=kt[je]);return Y(J,Nt,void 0,void 0,null,ht)},fn.createRef=function(){return{current:null}},fn.forwardRef=function(J){return{$$typeof:u,render:J}},fn.isValidElement=Pe,fn.lazy=function(J){return{$$typeof:y,_payload:{_status:-1,_result:J},_init:yt}},fn.memo=function(J,xe){return{$$typeof:f,type:J,compare:xe===void 0?null:xe}},fn.startTransition=function(J){var xe=B.T,Ze={};B.T=Ze;try{var je=J(),ht=B.S;ht!==null&&ht(Ze,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(rt,ve)}catch(Nt){ve(Nt)}finally{B.T=xe}},fn.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},fn.use=function(J){return B.H.use(J)},fn.useActionState=function(J,xe,Ze){return B.H.useActionState(J,xe,Ze)},fn.useCallback=function(J,xe){return B.H.useCallback(J,xe)},fn.useContext=function(J){return B.H.useContext(J)},fn.useDebugValue=function(){},fn.useDeferredValue=function(J,xe){return B.H.useDeferredValue(J,xe)},fn.useEffect=function(J,xe,Ze){var je=B.H;if(typeof Ze=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return je.useEffect(J,xe)},fn.useId=function(){return B.H.useId()},fn.useImperativeHandle=function(J,xe,Ze){return B.H.useImperativeHandle(J,xe,Ze)},fn.useInsertionEffect=function(J,xe){return B.H.useInsertionEffect(J,xe)},fn.useLayoutEffect=function(J,xe){return B.H.useLayoutEffect(J,xe)},fn.useMemo=function(J,xe){return B.H.useMemo(J,xe)},fn.useOptimistic=function(J,xe){return B.H.useOptimistic(J,xe)},fn.useReducer=function(J,xe,Ze){return B.H.useReducer(J,xe,Ze)},fn.useRef=function(J){return B.H.useRef(J)},fn.useState=function(J){return B.H.useState(J)},fn.useSyncExternalStore=function(J,xe,Ze){return B.H.useSyncExternalStore(J,xe,Ze)},fn.useTransition=function(){return B.H.useTransition()},fn.version="19.1.0",fn}var hw;function mg(){return hw||(hw=1,Qm.exports=ix()),Qm.exports}var Qe=mg();const ax=$v(Qe);var Xm={exports:{}},np={},Zm={exports:{}},e0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pw;function ox(){return pw||(pw=1,function(e){function r(Ne,yt){var ve=Ne.length;Ne.push(yt);e:for(;0<ve;){var rt=ve-1>>>1,J=Ne[rt];if(0<o(J,yt))Ne[rt]=yt,Ne[ve]=J,ve=rt;else break e}}function i(Ne){return Ne.length===0?null:Ne[0]}function a(Ne){if(Ne.length===0)return null;var yt=Ne[0],ve=Ne.pop();if(ve!==yt){Ne[0]=ve;e:for(var rt=0,J=Ne.length,xe=J>>>1;rt<xe;){var Ze=2*(rt+1)-1,je=Ne[Ze],ht=Ze+1,Nt=Ne[ht];if(0>o(je,ve))ht<J&&0>o(Nt,je)?(Ne[rt]=Nt,Ne[ht]=ve,rt=ht):(Ne[rt]=je,Ne[Ze]=ve,rt=Ze);else if(ht<J&&0>o(Nt,ve))Ne[rt]=Nt,Ne[ht]=ve,rt=ht;else break e}}return yt}function o(Ne,yt){var ve=Ne.sortIndex-yt.sortIndex;return ve!==0?ve:Ne.id-yt.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var h=[],f=[],y=1,b=null,_=3,A=!1,T=!1,x=!1,O=!1,R=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function K(Ne){for(var yt=i(f);yt!==null;){if(yt.callback===null)a(f);else if(yt.startTime<=Ne)a(f),yt.sortIndex=yt.expirationTime,r(h,yt);else break;yt=i(f)}}function B(Ne){if(x=!1,K(Ne),!T)if(i(h)!==null)T=!0,W||(W=!0,ge());else{var yt=i(f);yt!==null&&lt(B,yt.startTime-Ne)}}var W=!1,Y=-1,q=5,Pe=-1;function $(){return O?!0:!(e.unstable_now()-Pe<q)}function ie(){if(O=!1,W){var Ne=e.unstable_now();Pe=Ne;var yt=!0;try{e:{T=!1,x&&(x=!1,F(Y),Y=-1),A=!0;var ve=_;try{t:{for(K(Ne),b=i(h);b!==null&&!(b.expirationTime>Ne&&$());){var rt=b.callback;if(typeof rt=="function"){b.callback=null,_=b.priorityLevel;var J=rt(b.expirationTime<=Ne);if(Ne=e.unstable_now(),typeof J=="function"){b.callback=J,K(Ne),yt=!0;break t}b===i(h)&&a(h),K(Ne)}else a(h);b=i(h)}if(b!==null)yt=!0;else{var xe=i(f);xe!==null&&lt(B,xe.startTime-Ne),yt=!1}}break e}finally{b=null,_=ve,A=!1}yt=void 0}}finally{yt?ge():W=!1}}}var ge;if(typeof P=="function")ge=function(){P(ie)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,tt=Se.port2;Se.port1.onmessage=ie,ge=function(){tt.postMessage(null)}}else ge=function(){R(ie,0)};function lt(Ne,yt){Y=R(function(){Ne(e.unstable_now())},yt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ne){Ne.callback=null},e.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<Ne?Math.floor(1e3/Ne):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_next=function(Ne){switch(_){case 1:case 2:case 3:var yt=3;break;default:yt=_}var ve=_;_=yt;try{return Ne()}finally{_=ve}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(Ne,yt){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var ve=_;_=Ne;try{return yt()}finally{_=ve}},e.unstable_scheduleCallback=function(Ne,yt,ve){var rt=e.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?rt+ve:rt):ve=rt,Ne){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ve+J,Ne={id:y++,callback:yt,priorityLevel:Ne,startTime:ve,expirationTime:J,sortIndex:-1},ve>rt?(Ne.sortIndex=ve,r(f,Ne),i(h)===null&&Ne===i(f)&&(x?(F(Y),Y=-1):x=!0,lt(B,ve-rt))):(Ne.sortIndex=J,r(h,Ne),T||A||(T=!0,W||(W=!0,ge()))),Ne},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(Ne){var yt=_;return function(){var ve=_;_=yt;try{return Ne.apply(this,arguments)}finally{_=ve}}}}(e0)),e0}var gw;function sx(){return gw||(gw=1,Zm.exports=ox()),Zm.exports}var t0={exports:{}},sa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yw;function lx(){if(yw)return sa;yw=1;var e=mg();function r(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(h,f,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:h,containerInfo:f,implementation:y}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return sa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,sa.createPortal=function(h,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(r(299));return d(h,f,null,y)},sa.flushSync=function(h){var f=l.T,y=a.p;try{if(l.T=null,a.p=2,h)return h()}finally{l.T=f,a.p=y,a.d.f()}},sa.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,a.d.C(h,f))},sa.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},sa.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var y=f.as,b=u(y,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?a.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:A}):y==="script"&&a.d.X(h,{crossOrigin:b,integrity:_,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},sa.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=u(f.as,f.crossOrigin);a.d.M(h,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&a.d.M(h)},sa.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,b=u(y,f.crossOrigin);a.d.L(h,y,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},sa.preloadModule=function(h,f){if(typeof h=="string")if(f){var y=u(f.as,f.crossOrigin);a.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else a.d.m(h)},sa.requestFormReset=function(h){a.d.r(h)},sa.unstable_batchedUpdates=function(h,f){return h(f)},sa.useFormState=function(h,f,y){return l.H.useFormState(h,f,y)},sa.useFormStatus=function(){return l.H.useHostTransitionStatus()},sa.version="19.1.0",sa}var mw;function ux(){if(mw)return t0.exports;mw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),t0.exports=lx(),t0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw;function cx(){if(vw)return np;vw=1;var e=sx(),r=mg(),i=ux();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function l(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function u(t){if(d(t)!==t)throw Error(a(188))}function h(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,p=n;;){var E=s.return;if(E===null)break;var N=E.alternate;if(N===null){if(p=E.return,p!==null){s=p;continue}break}if(E.child===N.child){for(N=E.child;N;){if(N===s)return u(E),t;if(N===p)return u(E),n;N=N.sibling}throw Error(a(188))}if(s.return!==p.return)s=E,p=N;else{for(var Z=!1,ce=E.child;ce;){if(ce===s){Z=!0,s=E,p=N;break}if(ce===p){Z=!0,p=E,s=N;break}ce=ce.sibling}if(!Z){for(ce=N.child;ce;){if(ce===s){Z=!0,s=N,p=E;break}if(ce===p){Z=!0,p=N,s=E;break}ce=ce.sibling}if(!Z)throw Error(a(189))}}if(s.alternate!==p)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function f(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=f(t),n!==null)return n;t=t.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),P=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),Pe=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function ge(t){return t===null||typeof t!="object"?null:(t=ie&&t[ie]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Symbol.for("react.client.reference");function tt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Se?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case T:return"Fragment";case O:return"Profiler";case x:return"StrictMode";case B:return"Suspense";case W:return"SuspenseList";case Pe:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case A:return"Portal";case P:return(t.displayName||"Context")+".Provider";case F:return(t._context.displayName||"Context")+".Consumer";case K:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Y:return n=t.displayName||null,n!==null?n:tt(t.type)||"Memo";case q:n=t._payload,t=t._init;try{return tt(t(n))}catch{}}return null}var lt=Array.isArray,Ne=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},rt=[],J=-1;function xe(t){return{current:t}}function Ze(t){0>J||(t.current=rt[J],rt[J]=null,J--)}function je(t,n){J++,rt[J]=t.current,t.current=n}var ht=xe(null),Nt=xe(null),kt=xe(null),Me=xe(null);function le(t,n){switch(je(kt,n),je(Nt,t),je(ht,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?nr(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=nr(n),t=Pr(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ze(ht),je(ht,t)}function Te(){Ze(ht),Ze(Nt),Ze(kt)}function Je(t){t.memoizedState!==null&&je(Me,t);var n=ht.current,s=Pr(n,t.type);n!==s&&(je(Nt,t),je(ht,s))}function se(t){Nt.current===t&&(Ze(ht),Ze(Nt)),Me.current===t&&(Ze(Me),Qh._currentValue=ve)}var M=Object.prototype.hasOwnProperty,D=e.unstable_scheduleCallback,G=e.unstable_cancelCallback,re=e.unstable_shouldYield,we=e.unstable_requestPaint,Ce=e.unstable_now,ot=e.unstable_getCurrentPriorityLevel,Re=e.unstable_ImmediatePriority,pt=e.unstable_UserBlockingPriority,Ct=e.unstable_NormalPriority,bt=e.unstable_LowPriority,We=e.unstable_IdlePriority,Ge=e.log,Oe=e.unstable_setDisableYieldValue,ut=null,Q=null;function k(t){if(typeof Ge=="function"&&Oe(t),Q&&typeof Q.setStrictMode=="function")try{Q.setStrictMode(ut,t)}catch{}}var V=Math.clz32?Math.clz32:et,j=Math.log,qe=Math.LN2;function et(t){return t>>>=0,t===0?32:31-(j(t)/qe|0)|0}var ze=256,Yt=4194304;function Br(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function jr(t,n,s){var p=t.pendingLanes;if(p===0)return 0;var E=0,N=t.suspendedLanes,Z=t.pingedLanes;t=t.warmLanes;var ce=p&134217727;return ce!==0?(p=ce&~N,p!==0?E=Br(p):(Z&=ce,Z!==0?E=Br(Z):s||(s=ce&~t,s!==0&&(E=Br(s))))):(ce=p&~N,ce!==0?E=Br(ce):Z!==0?E=Br(Z):s||(s=p&~t,s!==0&&(E=Br(s)))),E===0?0:n!==0&&n!==E&&(n&N)===0&&(N=E&-E,s=n&-n,N>=s||N===32&&(s&4194048)!==0)?n:E}function or(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function $e(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var t=ze;return ze<<=1,(ze&4194048)===0&&(ze=256),t}function st(){var t=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),t}function Le(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function ft(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Xt(t,n,s,p,E,N){var Z=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var ce=t.entanglements,Be=t.expirationTimes,mt=t.hiddenUpdates;for(s=Z&~s;0<s;){var Ft=31-V(s),Bt=1<<Ft;ce[Ft]=0,Be[Ft]=-1;var _t=mt[Ft];if(_t!==null)for(mt[Ft]=null,Ft=0;Ft<_t.length;Ft++){var At=_t[Ft];At!==null&&(At.lane&=-536870913)}s&=~Bt}p!==0&&zt(t,p,0),N!==0&&E===0&&t.tag!==0&&(t.suspendedLanes|=N&~(Z&~n))}function zt(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var p=31-V(n);t.entangledLanes|=n,t.entanglements[p]=t.entanglements[p]|1073741824|s&4194090}function tr(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var p=31-V(s),E=1<<p;E&n|t[p]&n&&(t[p]|=n),s&=~E}}function jt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ue(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function pe(){var t=yt.p;return t!==0?t:(t=window.event,t===void 0?32:nw(t.type))}function Tt(t,n){var s=yt.p;try{return yt.p=t,n()}finally{yt.p=s}}var xt=Math.random().toString(36).slice(2),Pt="__reactFiber$"+xt,Zt="__reactProps$"+xt,rr="__reactContainer$"+xt,Fr="__reactEvents$"+xt,$t="__reactListeners$"+xt,er="__reactHandles$"+xt,mr="__reactResources$"+xt,ar="__reactMarker$"+xt;function Dr(t){delete t[Pt],delete t[Zt],delete t[Fr],delete t[$t],delete t[er]}function Ar(t){var n=t[Pt];if(n)return n;for(var s=t.parentNode;s;){if(n=s[rr]||s[Pt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=Vb(t);t!==null;){if(s=t[Pt])return s;t=Vb(t)}return n}t=s,s=t.parentNode}return null}function Gr(t){if(t=t[Pt]||t[rr]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function gr(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function sr(t){var n=t[mr];return n||(n=t[mr]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Gt(t){t[ar]=!0}var Yr=new Set,Tn={};function cn(t,n){Ur(t,n),Ur(t+"Capture",n)}function Ur(t,n){for(Tn[t]=n,t=0;t<n.length;t++)Yr.add(n[t])}var En=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Un={},ur={};function fi(t){return M.call(ur,t)?!0:M.call(Un,t)?!1:En.test(t)?ur[t]=!0:(Un[t]=!0,!1)}function Rn(t,n,s){if(fi(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var p=n.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function $i(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function di(t,n,s,p){if(p===null)t.removeAttribute(s);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+p)}}var Ta,Zi;function hi(t){if(Ta===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Ta=n&&n[1]||"",Zi=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ta+t+Zi}var v=!1;function m(t,n){if(!t||v)return"";v=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(n){var Bt=function(){throw Error()};if(Object.defineProperty(Bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Bt,[])}catch(At){var _t=At}Reflect.construct(t,[],Bt)}else{try{Bt.call()}catch(At){_t=At}t.call(Bt.prototype)}}else{try{throw Error()}catch(At){_t=At}(Bt=t())&&typeof Bt.catch=="function"&&Bt.catch(function(){})}}catch(At){if(At&&_t&&typeof At.stack=="string")return[At.stack,_t.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=p.DetermineComponentFrameRoot(),Z=N[0],ce=N[1];if(Z&&ce){var Be=Z.split(`
`),mt=ce.split(`
`);for(E=p=0;p<Be.length&&!Be[p].includes("DetermineComponentFrameRoot");)p++;for(;E<mt.length&&!mt[E].includes("DetermineComponentFrameRoot");)E++;if(p===Be.length||E===mt.length)for(p=Be.length-1,E=mt.length-1;1<=p&&0<=E&&Be[p]!==mt[E];)E--;for(;1<=p&&0<=E;p--,E--)if(Be[p]!==mt[E]){if(p!==1||E!==1)do if(p--,E--,0>E||Be[p]!==mt[E]){var Ft=`
`+Be[p].replace(" at new "," at ");return t.displayName&&Ft.includes("<anonymous>")&&(Ft=Ft.replace("<anonymous>",t.displayName)),Ft}while(1<=p&&0<=E);break}}}finally{v=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?hi(s):""}function S(t){switch(t.tag){case 26:case 27:case 5:return hi(t.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 15:return m(t.type,!1);case 11:return m(t.type.render,!1);case 1:return m(t.type,!0);case 31:return hi("Activity");default:return""}}function C(t){try{var n="";do n+=S(t),t=t.return;while(t);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function H(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function X(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function oe(t){var n=X(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),p=""+t[n];if(!t.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var E=s.get,N=s.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return E.call(this)},set:function(Z){p=""+Z,N.call(this,Z)}}),Object.defineProperty(t,n,{enumerable:s.enumerable}),{getValue:function(){return p},setValue:function(Z){p=""+Z},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function be(t){t._valueTracker||(t._valueTracker=oe(t))}function he(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),p="";return t&&(p=X(t)?t.checked?"true":"false":t.value),t=p,t!==s?(n.setValue(t),!0):!1}function me(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ee=/[\n"\\]/g;function Ae(t){return t.replace(Ee,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function De(t,n,s,p,E,N,Z,ce){t.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?t.type=Z:t.removeAttribute("type"),n!=null?Z==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+H(n)):t.value!==""+H(n)&&(t.value=""+H(n)):Z!=="submit"&&Z!=="reset"||t.removeAttribute("value"),n!=null?it(t,Z,H(n)):s!=null?it(t,Z,H(s)):p!=null&&t.removeAttribute("value"),E==null&&N!=null&&(t.defaultChecked=!!N),E!=null&&(t.checked=E&&typeof E!="function"&&typeof E!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?t.name=""+H(ce):t.removeAttribute("name")}function Ke(t,n,s,p,E,N,Z,ce){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(t.type=N),n!=null||s!=null){if(!(N!=="submit"&&N!=="reset"||n!=null))return;s=s!=null?""+H(s):"",n=n!=null?""+H(n):s,ce||n===t.value||(t.value=n),t.defaultValue=n}p=p??E,p=typeof p!="function"&&typeof p!="symbol"&&!!p,t.checked=ce?t.checked:!!p,t.defaultChecked=!!p,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(t.name=Z)}function it(t,n,s){n==="number"&&me(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function gt(t,n,s,p){if(t=t.options,n){n={};for(var E=0;E<s.length;E++)n["$"+s[E]]=!0;for(s=0;s<t.length;s++)E=n.hasOwnProperty("$"+t[s].value),t[s].selected!==E&&(t[s].selected=E),E&&p&&(t[s].defaultSelected=!0)}else{for(s=""+H(s),n=null,E=0;E<t.length;E++){if(t[E].value===s){t[E].selected=!0,p&&(t[E].defaultSelected=!0);return}n!==null||t[E].disabled||(n=t[E])}n!==null&&(n.selected=!0)}}function St(t,n,s){if(n!=null&&(n=""+H(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+H(s):""}function ae(t,n,s,p){if(n==null){if(p!=null){if(s!=null)throw Error(a(92));if(lt(p)){if(1<p.length)throw Error(a(93));p=p[0]}s=p}s==null&&(s=""),n=s}s=H(n),t.defaultValue=s,p=t.textContent,p===s&&p!==""&&p!==null&&(t.value=p)}function _e(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var Ie=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fe(t,n,s){var p=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?p?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":p?t.setProperty(n,s):typeof s!="number"||s===0||Ie.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function ct(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var p in s)!s.hasOwnProperty(p)||n!=null&&n.hasOwnProperty(p)||(p.indexOf("--")===0?t.setProperty(p,""):p==="float"?t.cssFloat="":t[p]="");for(var E in n)p=n[E],n.hasOwnProperty(E)&&s[E]!==p&&Fe(t,E,p)}else for(var N in n)n.hasOwnProperty(N)&&Fe(t,N,n[N])}function Et(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ht=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qr(t){return Ht.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var lr=null;function pr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tn=null,dr=null;function rn(t){var n=Gr(t);if(n&&(t=n.stateNode)){var s=t[Zt]||null;e:switch(t=n.stateNode,n.type){case"input":if(De(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Ae(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var p=s[n];if(p!==t&&p.form===t.form){var E=p[Zt]||null;if(!E)throw Error(a(90));De(p,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(n=0;n<s.length;n++)p=s[n],p.form===t.form&&he(p)}break e;case"textarea":St(t,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&gt(t,!!s.multiple,n,!1)}}}var Zr=!1;function Cn(t,n,s){if(Zr)return t(n,s);Zr=!0;try{var p=t(n);return p}finally{if(Zr=!1,(tn!==null||dr!==null)&&(hu(),tn&&(n=tn,t=dr,dr=tn=null,rn(n),t)))for(n=0;n<t.length;n++)rn(t[n])}}function Qr(t,n){var s=t.stateNode;if(s===null)return null;var p=s[Zt]||null;if(p===null)return null;s=p[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(t=t.type,p=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!p;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bn=!1;if(en)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){bn=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{bn=!1}var Vn=null,xi=null,ea=null;function On(){if(ea)return ea;var t,n=xi,s=n.length,p,E="value"in Vn?Vn.value:Vn.textContent,N=E.length;for(t=0;t<s&&n[t]===E[t];t++);var Z=s-t;for(p=1;p<=Z&&n[s-p]===E[N-p];p++);return ea=E.slice(t,1<p?1-p:void 0)}function Ki(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function za(){return!0}function co(){return!1}function An(t){function n(s,p,E,N,Z){this._reactName=s,this._targetInst=E,this.type=p,this.nativeEvent=N,this.target=Z,this.currentTarget=null;for(var ce in t)t.hasOwnProperty(ce)&&(s=t[ce],this[ce]=s?s(N):N[ce]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?za:co,this.isPropagationStopped=co,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),n}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=An(qn),zn=y({},qn,{view:0,detail:0}),Xo=An(zn),fa,U,te,ne=y({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==te&&(te&&t.type==="mousemove"?(fa=t.screenX-te.screenX,U=t.screenY-te.screenY):U=fa=0,te=t),fa)},movementY:function(t){return"movementY"in t?t.movementY:U}}),fe=An(ne),Ue=y({},ne,{dataTransfer:0}),ye=An(Ue),He=y({},zn,{relatedTarget:0}),Rt=An(He),wt=y({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),It=An(wt),qt=y({},qn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vt=An(qt),Wt=y({},qn,{data:0}),Ut=An(Wt),Jt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ir={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function br(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=cr[t])?!!n[t]:!1}function Kr(){return br}var wr=y({},zn,{key:function(t){if(t.key){var n=Jt[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ki(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ir[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kr,charCode:function(t){return t.type==="keypress"?Ki(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ki(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qt=An(wr),kr=y({},ne,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hr=An(kr),Mr=y({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kr}),Wr=An(Mr),Dt=y({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ir=An(Dt),mn=y({},ne,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lr=An(mn),hn=y({},qn,{newState:0,oldState:0}),ln=An(hn),In=[9,13,27,32],_r=en&&"CompositionEvent"in window,Vr=null;en&&"documentMode"in document&&(Vr=document.documentMode);var Wn=en&&"TextEvent"in window&&!Vr,gi=en&&(!_r||Vr&&8<Vr&&11>=Vr),Tr=" ",Bn=!1;function Ln(t,n){switch(t){case"keyup":return In.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $n=!1;function nn(t,n){switch(t){case"compositionend":return Xr(n);case"keypress":return n.which!==32?null:(Bn=!0,Tr);case"textInput":return t=n.data,t===Tr&&Bn?null:t;default:return null}}function Oa(t,n){if($n)return t==="compositionend"||!_r&&Ln(t,n)?(t=On(),ea=xi=Vn=null,$n=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return gi&&n.locale!=="ko"?null:n.data;default:return null}}var Ku={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fs(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Ku[t.type]:n==="textarea"}function Gu(t,n,s,p){tn?dr?dr.push(p):dr=[p]:tn=p,n=Sd(n,"onChange"),0<n.length&&(s=new Ca("onChange","change",null,s,p),t.push({event:s,listeners:n}))}var Wa=null,Zo=null;function vf(t){$h(t,0)}function da(t){var n=gr(t);if(he(n))return t}function Fo(t,n){if(t==="change")return n}var Ll=!1;if(en){var Ds;if(en){var Ja="oninput"in document;if(!Ja){var Ia=document.createElement("div");Ia.setAttribute("oninput","return;"),Ja=typeof Ia.oninput=="function"}Ds=Ja}else Ds=!1;Ll=Ds&&(!document.documentMode||9<document.documentMode)}function pn(){Wa&&(Wa.detachEvent("onpropertychange",Us),Zo=Wa=null)}function Us(t){if(t.propertyName==="value"&&da(Zo)){var n=[];Gu(n,Zo,t,pr(t)),Cn(vf,n)}}function bf(t,n,s){t==="focusin"?(pn(),Wa=n,Zo=s,Wa.attachEvent("onpropertychange",Us)):t==="focusout"&&pn()}function Ls(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return da(Zo)}function ii(t,n){if(t==="click")return da(n)}function qu(t,n){if(t==="input"||t==="change")return da(n)}function wf(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Oi=typeof Object.is=="function"?Object.is:wf;function Ya(t,n){if(Oi(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),p=Object.keys(n);if(s.length!==p.length)return!1;for(p=0;p<s.length;p++){var E=s[p];if(!M.call(n,E)||!Oi(t[E],n[E]))return!1}return!0}function Ms(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ml(t,n){var s=Ms(t);t=0;for(var p;s;){if(s.nodeType===3){if(p=t+s.textContent.length,t<=n&&p>=n)return{node:s,offset:n-t};t=p}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ms(s)}}function Hd(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Hd(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Pa(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=me(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=me(t.document)}return n}function jd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var Pg=en&&"documentMode"in document&&11>=document.documentMode,Gi=null,_f=null,kl=null,Sf=!1;function ha(t,n,s){var p=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Sf||Gi==null||Gi!==me(p)||(p=Gi,"selectionStart"in p&&jd(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),kl&&Ya(kl,p)||(kl=p,p=Sd(_f,"onSelect"),0<p.length&&(n=new Ca("onSelect","select",null,n,s),t.push({event:n,listeners:p}),n.target=Gi)))}function ks(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var fo={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},Vd={},Bs={};en&&(Bs=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function Hs(t){if(Vd[t])return Vd[t];if(!fo[t])return t;var n=fo[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in Bs)return Vd[t]=n[s];return t}var es=Hs("animationend"),ts=Hs("animationiteration"),Ng=Hs("animationstart"),Rm=Hs("transitionrun"),xm=Hs("transitionstart"),Pn=Hs("transitioncancel"),$d=Hs("transitionend"),Kd=new Map,Ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ef.push("scrollEnd");function Qa(t,n){Kd.set(t,n),cn(n,[t])}var ta=new WeakMap;function Na(t,n){if(typeof t=="object"&&t!==null){var s=ta.get(t);return s!==void 0?s:(n={value:t,source:n,stack:C(n)},ta.set(t,n),n)}return{value:t,source:n,stack:C(n)}}var Fa=[],Xa=0,Af=0;function Rf(){for(var t=Xa,n=Af=Xa=0;n<t;){var s=Fa[n];Fa[n++]=null;var p=Fa[n];Fa[n++]=null;var E=Fa[n];Fa[n++]=null;var N=Fa[n];if(Fa[n++]=null,p!==null&&E!==null){var Z=p.pending;Z===null?E.next=E:(E.next=Z.next,Z.next=E),p.pending=E}N!==0&&Fg(s,E,N)}}function Bl(t,n,s,p){Fa[Xa++]=t,Fa[Xa++]=n,Fa[Xa++]=s,Fa[Xa++]=p,Af|=p,t.lanes|=p,t=t.alternate,t!==null&&(t.lanes|=p)}function Gd(t,n,s,p){return Bl(t,n,s,p),xf(t)}function pa(t,n){return Bl(t,null,null,n),xf(t)}function Fg(t,n,s){t.lanes|=s;var p=t.alternate;p!==null&&(p.lanes|=s);for(var E=!1,N=t.return;N!==null;)N.childLanes|=s,p=N.alternate,p!==null&&(p.childLanes|=s),N.tag===22&&(t=N.stateNode,t===null||t._visibility&1||(E=!0)),t=N,N=N.return;return t.tag===3?(N=t.stateNode,E&&n!==null&&(E=31-V(s),t=N.hiddenUpdates,p=t[E],p===null?t[E]=[n]:p.push(n),n.lane=s|536870912),N):null}function xf(t){if(50<qc)throw qc=0,zc=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Hl={};function zu(t,n,s,p){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(t,n,s,p){return new zu(t,n,s,p)}function Wu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Da(t,n){var s=t.alternate;return s===null?(s=mi(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function qd(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Ju(t,n,s,p,E,N){var Z=0;if(p=t,typeof t=="function")Wu(t)&&(Z=1);else if(typeof t=="string")Z=$R(t,s,ht.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Pe:return t=mi(31,s,n,E),t.elementType=Pe,t.lanes=N,t;case T:return js(s.children,E,N,n);case x:Z=8,E|=24;break;case O:return t=mi(12,s,n,E|2),t.elementType=O,t.lanes=N,t;case B:return t=mi(13,s,n,E),t.elementType=B,t.lanes=N,t;case W:return t=mi(19,s,n,E),t.elementType=W,t.lanes=N,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:case P:Z=10;break e;case F:Z=9;break e;case K:Z=11;break e;case Y:Z=14;break e;case q:Z=16,p=null;break e}Z=29,s=Error(a(130,t===null?"null":typeof t,"")),p=null}return n=mi(Z,s,n,E),n.elementType=t,n.type=p,n.lanes=N,n}function js(t,n,s,p){return t=mi(7,t,p,n),t.lanes=s,t}function ei(t,n,s){return t=mi(6,t,null,n),t.lanes=s,t}function Yu(t,n,s){return n=mi(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Vs=[],$s=0,Qu=null,Xu=0,ga=[],ya=0,Ks=null,ho=1,po="";function Gs(t,n){Vs[$s++]=Xu,Vs[$s++]=Qu,Qu=t,Xu=n}function zd(t,n,s){ga[ya++]=ho,ga[ya++]=po,ga[ya++]=Ks,Ks=t;var p=ho;t=po;var E=32-V(p)-1;p&=~(1<<E),s+=1;var N=32-V(n)+E;if(30<N){var Z=E-E%5;N=(p&(1<<Z)-1).toString(32),p>>=Z,E-=Z,ho=1<<32-V(n)+E|s<<E|p,po=N+t}else ho=1<<N|s<<E|p,po=t}function Zu(t){t.return!==null&&(Gs(t,1),zd(t,1,0))}function Tf(t){for(;t===Qu;)Qu=Vs[--$s],Vs[$s]=null,Xu=Vs[--$s],Vs[$s]=null;for(;t===Ks;)Ks=ga[--ya],ga[ya]=null,po=ga[--ya],ga[ya]=null,ho=ga[--ya],ga[ya]=null}var Fi=null,ai=null,Nn=!1,rs=null,Za=!1,Cf=Error(a(519));function ns(t){var n=Error(a(418,""));throw ec(Na(n,t)),Cf}function Dg(t){var n=t.stateNode,s=t.type,p=t.memoizedProps;switch(n[Pt]=t,n[Zt]=p,s){case"dialog":vn("cancel",n),vn("close",n);break;case"iframe":case"object":case"embed":vn("load",n);break;case"video":case"audio":for(s=0;s<Xc.length;s++)vn(Xc[s],n);break;case"source":vn("error",n);break;case"img":case"image":case"link":vn("error",n),vn("load",n);break;case"details":vn("toggle",n);break;case"input":vn("invalid",n),Ke(n,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),be(n);break;case"select":vn("invalid",n);break;case"textarea":vn("invalid",n),ae(n,p.value,p.defaultValue,p.children),be(n)}s=p.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||p.suppressHydrationWarning===!0||L(n.textContent,s)?(p.popover!=null&&(vn("beforetoggle",n),vn("toggle",n)),p.onScroll!=null&&vn("scroll",n),p.onScrollEnd!=null&&vn("scrollend",n),p.onClick!=null&&(n.onclick=z),n=!0):n=!1,n||ns(t)}function Of(t){for(Fi=t.return;Fi;)switch(Fi.tag){case 5:case 13:Za=!1;return;case 27:case 3:Za=!0;return;default:Fi=Fi.return}}function jl(t){if(t!==Fi)return!1;if(!Nn)return Of(t),Nn=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||un(t.type,t.memoizedProps)),s=!s),s&&ai&&ns(t),Of(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(n===0){ai=on(t.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;t=t.nextSibling}ai=null}}else n===27?(n=ai,Bi(t.type)?(t=zo,zo=null,ai=t):ai=n):ai=Fi?on(t.stateNode.nextSibling):null;return!0}function Vl(){ai=Fi=null,Nn=!1}function Wd(){var t=rs;return t!==null&&(Wi===null?Wi=t:Wi.push.apply(Wi,t),rs=null),t}function ec(t){rs===null?rs=[t]:rs.push(t)}var If=xe(null),qs=null,Do=null;function is(t,n,s){je(If,n._currentValue),n._currentValue=s}function Uo(t){t._currentValue=If.current,Ze(If)}function Pf(t,n,s){for(;t!==null;){var p=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,p!==null&&(p.childLanes|=n)):p!==null&&(p.childLanes&n)!==n&&(p.childLanes|=n),t===s)break;t=t.return}}function Jd(t,n,s,p){var E=t.child;for(E!==null&&(E.return=t);E!==null;){var N=E.dependencies;if(N!==null){var Z=E.child;N=N.firstContext;e:for(;N!==null;){var ce=N;N=E;for(var Be=0;Be<n.length;Be++)if(ce.context===n[Be]){N.lanes|=s,ce=N.alternate,ce!==null&&(ce.lanes|=s),Pf(N.return,s,t),p||(Z=null);break e}N=ce.next}}else if(E.tag===18){if(Z=E.return,Z===null)throw Error(a(341));Z.lanes|=s,N=Z.alternate,N!==null&&(N.lanes|=s),Pf(Z,s,t),Z=null}else Z=E.child;if(Z!==null)Z.return=E;else for(Z=E;Z!==null;){if(Z===t){Z=null;break}if(E=Z.sibling,E!==null){E.return=Z.return,Z=E;break}Z=Z.return}E=Z}}function $l(t,n,s,p){t=null;for(var E=n,N=!1;E!==null;){if(!N){if((E.flags&524288)!==0)N=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var Z=E.alternate;if(Z===null)throw Error(a(387));if(Z=Z.memoizedProps,Z!==null){var ce=E.type;Oi(E.pendingProps.value,Z.value)||(t!==null?t.push(ce):t=[ce])}}else if(E===Me.current){if(Z=E.alternate,Z===null)throw Error(a(387));Z.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(t!==null?t.push(Qh):t=[Qh])}E=E.return}t!==null&&Jd(n,t,s,p),n.flags|=262144}function Nf(t){for(t=t.firstContext;t!==null;){if(!Oi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function as(t){qs=t,Do=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Di(t){return Yd(qs,t)}function tc(t,n){return qs===null&&as(t),Yd(t,n)}function Yd(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Do===null){if(t===null)throw Error(a(308));Do=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Do=Do.next=n;return s}var Tm=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,p){t.push(p)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},Ug=e.unstable_scheduleCallback,Cm=e.unstable_NormalPriority,yr={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Si(){return{controller:new Tm,data:new Map,refCount:0}}function Kl(t){t.refCount--,t.refCount===0&&Ug(Cm,function(){t.controller.abort()})}var rc=null,eo=0,Ua=0,zs=null;function Lg(t,n){if(rc===null){var s=rc=[];eo=0,Ua=jh(),zs={status:"pending",value:void 0,then:function(p){s.push(p)}}}return eo++,n.then(Qd,Qd),n}function Qd(){if(--eo===0&&rc!==null){zs!==null&&(zs.status="fulfilled");var t=rc;rc=null,Ua=0,zs=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function Mg(t,n){var s=[],p={status:"pending",value:null,reason:null,then:function(E){s.push(E)}};return t.then(function(){p.status="fulfilled",p.value=n;for(var E=0;E<s.length;E++)(0,s[E])(n)},function(E){for(p.status="rejected",p.reason=E,E=0;E<s.length;E++)(0,s[E])(void 0)}),p}var Xd=Ne.S;Ne.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&Lg(t,n),Xd!==null&&Xd(t,n)};var Lo=xe(null);function Zd(){var t=Lo.current;return t!==null?t:Xn.pooledCache}function nc(t,n){n===null?je(Lo,Lo.current):je(Lo,n.pool)}function eh(){var t=Zd();return t===null?null:{parent:yr._currentValue,pool:t}}var to=Error(a(460)),Gl=Error(a(474)),Ws=Error(a(542)),La={then:function(){}};function Js(t){return t=t.status,t==="fulfilled"||t==="rejected"}function go(){}function ic(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(go,go),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,ac(t),t;default:if(typeof n.status=="string")n.then(go,go);else{if(t=Xn,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(p){if(n.status==="pending"){var E=n;E.status="fulfilled",E.value=p}},function(p){if(n.status==="pending"){var E=n;E.status="rejected",E.reason=p}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,ac(t),t}throw yo=n,to}}var yo=null;function Ys(){if(yo===null)throw Error(a(459));var t=yo;return yo=null,t}function ac(t){if(t===to||t===Ws)throw Error(a(483))}var mo=!1;function ro(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qs(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ma(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function vo(t,n,s){var p=t.updateQueue;if(p===null)return null;if(p=p.shared,(Hn&2)!==0){var E=p.pending;return E===null?n.next=n:(n.next=E.next,E.next=n),p.pending=n,n=xf(t),Fg(t,null,s),n}return Bl(t,p,n,s),xf(t)}function Mo(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var p=n.lanes;p&=t.pendingLanes,s|=p,n.lanes=s,tr(t,s)}}function Xs(t,n){var s=t.updateQueue,p=t.alternate;if(p!==null&&(p=p.updateQueue,s===p)){var E=null,N=null;if(s=s.firstBaseUpdate,s!==null){do{var Z={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};N===null?E=N=Z:N=N.next=Z,s=s.next}while(s!==null);N===null?E=N=n:N=N.next=n}else E=N=n;s={baseState:p.baseState,firstBaseUpdate:E,lastBaseUpdate:N,shared:p.shared,callbacks:p.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var oc=!1;function Ei(){if(oc){var t=zs;if(t!==null)throw t}}function Nr(t,n,s,p){oc=!1;var E=t.updateQueue;mo=!1;var N=E.firstBaseUpdate,Z=E.lastBaseUpdate,ce=E.shared.pending;if(ce!==null){E.shared.pending=null;var Be=ce,mt=Be.next;Be.next=null,Z===null?N=mt:Z.next=mt,Z=Be;var Ft=t.alternate;Ft!==null&&(Ft=Ft.updateQueue,ce=Ft.lastBaseUpdate,ce!==Z&&(ce===null?Ft.firstBaseUpdate=mt:ce.next=mt,Ft.lastBaseUpdate=Be))}if(N!==null){var Bt=E.baseState;Z=0,Ft=mt=Be=null,ce=N;do{var _t=ce.lane&-536870913,At=_t!==ce.lane;if(At?(_n&_t)===_t:(p&_t)===_t){_t!==0&&_t===Ua&&(oc=!0),Ft!==null&&(Ft=Ft.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var zr=t,Hr=ce;_t=n;var Zn=s;switch(Hr.tag){case 1:if(zr=Hr.payload,typeof zr=="function"){Bt=zr.call(Zn,Bt,_t);break e}Bt=zr;break e;case 3:zr.flags=zr.flags&-65537|128;case 0:if(zr=Hr.payload,_t=typeof zr=="function"?zr.call(Zn,Bt,_t):zr,_t==null)break e;Bt=y({},Bt,_t);break e;case 2:mo=!0}}_t=ce.callback,_t!==null&&(t.flags|=64,At&&(t.flags|=8192),At=E.callbacks,At===null?E.callbacks=[_t]:At.push(_t))}else At={lane:_t,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ft===null?(mt=Ft=At,Be=Bt):Ft=Ft.next=At,Z|=_t;if(ce=ce.next,ce===null){if(ce=E.shared.pending,ce===null)break;At=ce,ce=At.next,At.next=null,E.lastBaseUpdate=At,E.shared.pending=null}}while(!0);Ft===null&&(Be=Bt),E.baseState=Be,E.firstBaseUpdate=mt,E.lastBaseUpdate=Ft,N===null&&(E.shared.lanes=0),To|=Z,t.lanes=Z,t.memoizedState=Bt}}function Ff(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function Zs(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Ff(s[t],n)}var ql=xe(null),os=xe(0);function el(t,n){t=xo,je(os,t),je(ql,n),xo=t|n.baseLanes}function tl(){je(os,xo),je(ql,ql.current)}function sc(){xo=os.current,Ze(ql),Ze(os)}var bo=0,an=null,gn=null,oi=null,Df=!1,rl=!1,ss=!1,lc=0,uc=0,nl=null,th=0;function si(){throw Error(a(321))}function Uf(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!Oi(t[s],n[s]))return!1;return!0}function ls(t,n,s,p,E,N){return bo=N,an=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ne.H=t===null||t.memoizedState===null?ah:Pc,ss=!1,N=s(p,E),ss=!1,rl&&(N=vi(n,s,p,E)),il(t),N}function il(t){Ne.H=So;var n=gn!==null&&gn.next!==null;if(bo=0,oi=gn=an=null,Df=!1,uc=0,nl=null,n)throw Error(a(300));t===null||Pi||(t=t.dependencies,t!==null&&Nf(t)&&(Pi=!0))}function vi(t,n,s,p){an=t;var E=0;do{if(rl&&(nl=null),uc=0,rl=!1,25<=E)throw Error(a(301));if(E+=1,oi=gn=null,t.updateQueue!=null){var N=t.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Ne.H=$f,N=n(s,p)}while(rl);return N}function zl(){var t=Ne.H,n=t.useState()[0];return n=typeof n.then=="function"?ds(n):n,t=t.useState()[0],(gn!==null?gn.memoizedState:null)!==t&&(an.flags|=1024),n}function us(){var t=lc!==0;return lc=0,t}function cs(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function qi(t){if(Df){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Df=!1}bo=0,oi=gn=an=null,rl=!1,uc=lc=0,nl=null}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?an.memoizedState=oi=t:oi=oi.next=t,oi}function Qn(){if(gn===null){var t=an.alternate;t=t!==null?t.memoizedState:null}else t=gn.next;var n=oi===null?an.memoizedState:oi.next;if(n!==null)oi=n,gn=t;else{if(t===null)throw an.alternate===null?Error(a(467)):Error(a(310));gn=t,t={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},oi===null?an.memoizedState=oi=t:oi=oi.next=t}return oi}function fs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ds(t){var n=uc;return uc+=1,nl===null&&(nl=[]),t=ic(nl,t,n),n=an,(oi===null?n.memoizedState:oi.next)===null&&(n=n.alternate,Ne.H=n===null||n.memoizedState===null?ah:Pc),t}function Wl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ds(t);if(t.$$typeof===P)return Di(t)}throw Error(a(438,String(t)))}function cc(t){var n=null,s=an.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var p=an.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(n={data:p.data.map(function(E){return E.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=fs(),an.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),p=0;p<t;p++)s[p]=$;return n.index++,s}function Ma(t,n){return typeof n=="function"?n(t):n}function al(t){var n=Qn();return Jl(n,gn,t)}function Jl(t,n,s){var p=t.queue;if(p===null)throw Error(a(311));p.lastRenderedReducer=s;var E=t.baseQueue,N=p.pending;if(N!==null){if(E!==null){var Z=E.next;E.next=N.next,N.next=Z}n.baseQueue=E=N,p.pending=null}if(N=t.baseState,E===null)t.memoizedState=N;else{n=E.next;var ce=Z=null,Be=null,mt=n,Ft=!1;do{var Bt=mt.lane&-536870913;if(Bt!==mt.lane?(_n&Bt)===Bt:(bo&Bt)===Bt){var _t=mt.revertLane;if(_t===0)Be!==null&&(Be=Be.next={lane:0,revertLane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),Bt===Ua&&(Ft=!0);else if((bo&_t)===_t){mt=mt.next,_t===Ua&&(Ft=!0);continue}else Bt={lane:0,revertLane:mt.revertLane,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},Be===null?(ce=Be=Bt,Z=N):Be=Be.next=Bt,an.lanes|=_t,To|=_t;Bt=mt.action,ss&&s(N,Bt),N=mt.hasEagerState?mt.eagerState:s(N,Bt)}else _t={lane:Bt,revertLane:mt.revertLane,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},Be===null?(ce=Be=_t,Z=N):Be=Be.next=_t,an.lanes|=Bt,To|=Bt;mt=mt.next}while(mt!==null&&mt!==n);if(Be===null?Z=N:Be.next=ce,!Oi(N,t.memoizedState)&&(Pi=!0,Ft&&(s=zs,s!==null)))throw s;t.memoizedState=N,t.baseState=Z,t.baseQueue=Be,p.lastRenderedState=N}return E===null&&(p.lanes=0),[t.memoizedState,p.dispatch]}function ko(t){var n=Qn(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var p=s.dispatch,E=s.pending,N=n.memoizedState;if(E!==null){s.pending=null;var Z=E=E.next;do N=t(N,Z.action),Z=Z.next;while(Z!==E);Oi(N,n.memoizedState)||(Pi=!0),n.memoizedState=N,n.baseQueue===null&&(n.baseState=N),s.lastRenderedState=N}return[N,p]}function fc(t,n,s){var p=an,E=Qn(),N=Nn;if(N){if(s===void 0)throw Error(a(407));s=s()}else s=n();var Z=!Oi((gn||E).memoizedState,s);Z&&(E.memoizedState=s,Pi=!0),E=E.queue;var ce=hs.bind(null,p,E,t);if(ps(2048,8,ce,[t]),E.getSnapshot!==n||Z||oi!==null&&oi.memoizedState.tag&1){if(p.flags|=2048,Bo(9,sl(),hc.bind(null,p,E,s,n),null),Xn===null)throw Error(a(349));N||(bo&124)!==0||dc(p,n,s)}return s}function dc(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=an.updateQueue,n===null?(n=fs(),an.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function hc(t,n,s,p){n.value=s,n.getSnapshot=p,pc(n)&&gc(t)}function hs(t,n,s){return s(function(){pc(n)&&gc(t)})}function pc(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!Oi(t,s)}catch{return!0}}function gc(t){var n=pa(t,2);n!==null&&Mi(n,t,2)}function Yl(t){var n=wn();if(typeof t=="function"){var s=t;if(t=s(),ss){k(!0);try{s()}finally{k(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:t},n}function wo(t,n,s,p){return t.baseState=s,Jl(t,gn,typeof p=="function"?p:Ma)}function Lf(t,n,s,p,E){if(pl(t))throw Error(a(485));if(t=n.action,t!==null){var N={payload:E,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){N.listeners.push(Z)}};Ne.T!==null?s(!0):N.isTransition=!1,p(N),s=n.pending,s===null?(N.next=n.pending=N,yc(n,N)):(N.next=s.next,n.pending=s.next=N)}}function yc(t,n){var s=n.action,p=n.payload,E=t.state;if(n.isTransition){var N=Ne.T,Z={};Ne.T=Z;try{var ce=s(E,p),Be=Ne.S;Be!==null&&Be(Z,ce),mc(t,n,ce)}catch(mt){Ql(t,n,mt)}finally{Ne.T=N}}else try{N=s(E,p),mc(t,n,N)}catch(mt){Ql(t,n,mt)}}function mc(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(p){Mf(t,n,p)},function(p){return Ql(t,n,p)}):Mf(t,n,s)}function Mf(t,n,s){n.status="fulfilled",n.value=s,rh(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,yc(t,s)))}function Ql(t,n,s){var p=t.pending;if(t.pending=null,p!==null){p=p.next;do n.status="rejected",n.reason=s,rh(n),n=n.next;while(n!==p)}t.action=null}function rh(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function vc(t,n){return n}function nh(t,n){if(Nn){var s=Xn.formState;if(s!==null){e:{var p=an;if(Nn){if(ai){t:{for(var E=ai,N=Za;E.nodeType!==8;){if(!N){E=null;break t}if(E=on(E.nextSibling),E===null){E=null;break t}}N=E.data,E=N==="F!"||N==="F"?E:null}if(E){ai=on(E.nextSibling),p=E.data==="F!";break e}}ns(p)}p=!1}p&&(n=s[0])}}return s=wn(),s.memoizedState=s.baseState=n,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vc,lastRenderedState:n},s.queue=p,s=hl.bind(null,an,p),p.dispatch=s,p=Yl(!1),N=gs.bind(null,an,!1,p.queue),p=wn(),E={state:n,dispatch:null,action:t,pending:null},p.queue=E,s=Lf.bind(null,an,E,N,s),E.dispatch=s,p.memoizedState=t,[n,s,!1]}function bc(t){var n=Qn();return ol(n,gn,t)}function ol(t,n,s){if(n=Jl(t,n,vc)[0],t=al(Ma)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var p=ds(n)}catch(Z){throw Z===to?Ws:Z}else p=n;n=Qn();var E=n.queue,N=E.dispatch;return s!==n.memoizedState&&(an.flags|=2048,Bo(9,sl(),wc.bind(null,E,s),null)),[p,N,t]}function wc(t,n){t.action=n}function _c(t){var n=Qn(),s=gn;if(s!==null)return ol(n,s,t);Qn(),n=n.memoizedState,s=Qn();var p=s.queue.dispatch;return s.memoizedState=t,[n,p,!1]}function Bo(t,n,s,p){return t={tag:t,create:s,deps:p,inst:n,next:null},n=an.updateQueue,n===null&&(n=fs(),an.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(p=s.next,s.next=t,t.next=p,n.lastEffect=t),t}function sl(){return{destroy:void 0,resource:void 0}}function Xl(){return Qn().memoizedState}function ll(t,n,s,p){var E=wn();p=p===void 0?null:p,an.flags|=t,E.memoizedState=Bo(1|n,sl(),s,p)}function ps(t,n,s,p){var E=Qn();p=p===void 0?null:p;var N=E.memoizedState.inst;gn!==null&&p!==null&&Uf(p,gn.memoizedState.deps)?E.memoizedState=Bo(n,N,s,p):(an.flags|=t,E.memoizedState=Bo(1|n,N,s,p))}function Sc(t,n){ll(8390656,8,t,n)}function ul(t,n){ps(2048,8,t,n)}function Ec(t,n){return ps(4,2,t,n)}function kf(t,n){return ps(4,4,t,n)}function cl(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Ac(t,n,s){s=s!=null?s.concat([t]):null,ps(4,4,cl.bind(null,n,t),s)}function Rc(){}function fl(t,n){var s=Qn();n=n===void 0?null:n;var p=s.memoizedState;return n!==null&&Uf(n,p[1])?p[0]:(s.memoizedState=[t,n],t)}function xc(t,n){var s=Qn();n=n===void 0?null:n;var p=s.memoizedState;if(n!==null&&Uf(n,p[1]))return p[0];if(p=t(),ss){k(!0);try{t()}finally{k(!1)}}return s.memoizedState=[p,n],p}function Tc(t,n,s){return s===void 0||(bo&1073741824)!==0?t.memoizedState=n:(t.memoizedState=s,t=fd(),an.lanes|=t,To|=t,s)}function Bf(t,n,s,p){return Oi(s,n)?s:ql.current!==null?(t=Tc(t,s,p),Oi(t,n)||(Pi=!0),t):(bo&42)===0?(Pi=!0,t.memoizedState=s):(t=fd(),an.lanes|=t,To|=t,n)}function ih(t,n,s,p,E){var N=yt.p;yt.p=N!==0&&8>N?N:8;var Z=Ne.T,ce={};Ne.T=ce,gs(t,!1,n,s);try{var Be=E(),mt=Ne.S;if(mt!==null&&mt(ce,Be),Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var Ft=Mg(Be,p);_o(t,n,Ft,Ji(t))}else _o(t,n,p,Ji(t))}catch(Bt){_o(t,n,{then:function(){},status:"rejected",reason:Bt},Ji())}finally{yt.p=N,Ne.T=Z}}function kg(){}function Hf(t,n,s,p){if(t.tag!==5)throw Error(a(476));var E=Cc(t).queue;ih(t,E,n,ve,s===null?kg:function(){return jf(t),s(p)})}function Cc(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:ve},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function jf(t){var n=Cc(t).next.queue;_o(t,n,{},Ji())}function Vf(){return Di(Qh)}function Oc(){return Qn().memoizedState}function dl(){return Qn().memoizedState}function Zl(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=Ji();t=ma(s);var p=vo(n,t,s);p!==null&&(Mi(p,n,s),Mo(p,n,s)),n={cache:Si()},t.payload=n;return}n=n.return}}function eu(t,n,s){var p=Ji();s={lane:p,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},pl(t)?gl(n,s):(s=Gd(t,n,s,p),s!==null&&(Mi(s,t,p),Ic(s,n,p)))}function hl(t,n,s){var p=Ji();_o(t,n,s,p)}function _o(t,n,s,p){var E={lane:p,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(pl(t))gl(n,E);else{var N=t.alternate;if(t.lanes===0&&(N===null||N.lanes===0)&&(N=n.lastRenderedReducer,N!==null))try{var Z=n.lastRenderedState,ce=N(Z,s);if(E.hasEagerState=!0,E.eagerState=ce,Oi(ce,Z))return Bl(t,n,E,0),Xn===null&&Rf(),!1}catch{}finally{}if(s=Gd(t,n,E,p),s!==null)return Mi(s,t,p),Ic(s,n,p),!0}return!1}function gs(t,n,s,p){if(p={lane:2,revertLane:jh(),action:p,hasEagerState:!1,eagerState:null,next:null},pl(t)){if(n)throw Error(a(479))}else n=Gd(t,s,p,2),n!==null&&Mi(n,t,2)}function pl(t){var n=t.alternate;return t===an||n!==null&&n===an}function gl(t,n){rl=Df=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function Ic(t,n,s){if((s&4194048)!==0){var p=n.lanes;p&=t.pendingLanes,s|=p,n.lanes=s,tr(t,s)}}var So={readContext:Di,use:Wl,useCallback:si,useContext:si,useEffect:si,useImperativeHandle:si,useLayoutEffect:si,useInsertionEffect:si,useMemo:si,useReducer:si,useRef:si,useState:si,useDebugValue:si,useDeferredValue:si,useTransition:si,useSyncExternalStore:si,useId:si,useHostTransitionStatus:si,useFormState:si,useActionState:si,useOptimistic:si,useMemoCache:si,useCacheRefresh:si},ah={readContext:Di,use:Wl,useCallback:function(t,n){return wn().memoizedState=[t,n===void 0?null:n],t},useContext:Di,useEffect:Sc,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,ll(4194308,4,cl.bind(null,n,t),s)},useLayoutEffect:function(t,n){return ll(4194308,4,t,n)},useInsertionEffect:function(t,n){ll(4,2,t,n)},useMemo:function(t,n){var s=wn();n=n===void 0?null:n;var p=t();if(ss){k(!0);try{t()}finally{k(!1)}}return s.memoizedState=[p,n],p},useReducer:function(t,n,s){var p=wn();if(s!==void 0){var E=s(n);if(ss){k(!0);try{s(n)}finally{k(!1)}}}else E=n;return p.memoizedState=p.baseState=E,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:E},p.queue=t,t=t.dispatch=eu.bind(null,an,t),[p.memoizedState,t]},useRef:function(t){var n=wn();return t={current:t},n.memoizedState=t},useState:function(t){t=Yl(t);var n=t.queue,s=hl.bind(null,an,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:Rc,useDeferredValue:function(t,n){var s=wn();return Tc(s,t,n)},useTransition:function(){var t=Yl(!1);return t=ih.bind(null,an,t.queue,!0,!1),wn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var p=an,E=wn();if(Nn){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),Xn===null)throw Error(a(349));(_n&124)!==0||dc(p,n,s)}E.memoizedState=s;var N={value:s,getSnapshot:n};return E.queue=N,Sc(hs.bind(null,p,N,t),[t]),p.flags|=2048,Bo(9,sl(),hc.bind(null,p,N,s,n),null),s},useId:function(){var t=wn(),n=Xn.identifierPrefix;if(Nn){var s=po,p=ho;s=(p&~(1<<32-V(p)-1)).toString(32)+s,n=""+n+"R"+s,s=lc++,0<s&&(n+="H"+s.toString(32)),n+=""}else s=th++,n=""+n+"r"+s.toString(32)+"";return t.memoizedState=n},useHostTransitionStatus:Vf,useFormState:nh,useActionState:nh,useOptimistic:function(t){var n=wn();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=gs.bind(null,an,!0,s),s.dispatch=n,[t,n]},useMemoCache:cc,useCacheRefresh:function(){return wn().memoizedState=Zl.bind(null,an)}},Pc={readContext:Di,use:Wl,useCallback:fl,useContext:Di,useEffect:ul,useImperativeHandle:Ac,useInsertionEffect:Ec,useLayoutEffect:kf,useMemo:xc,useReducer:al,useRef:Xl,useState:function(){return al(Ma)},useDebugValue:Rc,useDeferredValue:function(t,n){var s=Qn();return Bf(s,gn.memoizedState,t,n)},useTransition:function(){var t=al(Ma)[0],n=Qn().memoizedState;return[typeof t=="boolean"?t:ds(t),n]},useSyncExternalStore:fc,useId:Oc,useHostTransitionStatus:Vf,useFormState:bc,useActionState:bc,useOptimistic:function(t,n){var s=Qn();return wo(s,gn,t,n)},useMemoCache:cc,useCacheRefresh:dl},$f={readContext:Di,use:Wl,useCallback:fl,useContext:Di,useEffect:ul,useImperativeHandle:Ac,useInsertionEffect:Ec,useLayoutEffect:kf,useMemo:xc,useReducer:ko,useRef:Xl,useState:function(){return ko(Ma)},useDebugValue:Rc,useDeferredValue:function(t,n){var s=Qn();return gn===null?Tc(s,t,n):Bf(s,gn.memoizedState,t,n)},useTransition:function(){var t=ko(Ma)[0],n=Qn().memoizedState;return[typeof t=="boolean"?t:ds(t),n]},useSyncExternalStore:fc,useId:Oc,useHostTransitionStatus:Vf,useFormState:_c,useActionState:_c,useOptimistic:function(t,n){var s=Qn();return gn!==null?wo(s,gn,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:cc,useCacheRefresh:dl},ka=null,ra=0;function ys(t){var n=ra;return ra+=1,ka===null&&(ka=[]),ic(ka,t,n)}function Ho(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function yl(t,n){throw n.$$typeof===b?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Nc(t){var n=t._init;return n(t._payload)}function Fc(t){function n(at,Xe){if(t){var dt=at.deletions;dt===null?(at.deletions=[Xe],at.flags|=16):dt.push(Xe)}}function s(at,Xe){if(!t)return null;for(;Xe!==null;)n(at,Xe),Xe=Xe.sibling;return null}function p(at){for(var Xe=new Map;at!==null;)at.key!==null?Xe.set(at.key,at):Xe.set(at.index,at),at=at.sibling;return Xe}function E(at,Xe){return at=Da(at,Xe),at.index=0,at.sibling=null,at}function N(at,Xe,dt){return at.index=dt,t?(dt=at.alternate,dt!==null?(dt=dt.index,dt<Xe?(at.flags|=67108866,Xe):dt):(at.flags|=67108866,Xe)):(at.flags|=1048576,Xe)}function Z(at){return t&&at.alternate===null&&(at.flags|=67108866),at}function ce(at,Xe,dt,Lt){return Xe===null||Xe.tag!==6?(Xe=ei(dt,at.mode,Lt),Xe.return=at,Xe):(Xe=E(Xe,dt),Xe.return=at,Xe)}function Be(at,Xe,dt,Lt){var Sr=dt.type;return Sr===T?Ft(at,Xe,dt.props.children,Lt,dt.key):Xe!==null&&(Xe.elementType===Sr||typeof Sr=="object"&&Sr!==null&&Sr.$$typeof===q&&Nc(Sr)===Xe.type)?(Xe=E(Xe,dt.props),Ho(Xe,dt),Xe.return=at,Xe):(Xe=Ju(dt.type,dt.key,dt.props,null,at.mode,Lt),Ho(Xe,dt),Xe.return=at,Xe)}function mt(at,Xe,dt,Lt){return Xe===null||Xe.tag!==4||Xe.stateNode.containerInfo!==dt.containerInfo||Xe.stateNode.implementation!==dt.implementation?(Xe=Yu(dt,at.mode,Lt),Xe.return=at,Xe):(Xe=E(Xe,dt.children||[]),Xe.return=at,Xe)}function Ft(at,Xe,dt,Lt,Sr){return Xe===null||Xe.tag!==7?(Xe=js(dt,at.mode,Lt,Sr),Xe.return=at,Xe):(Xe=E(Xe,dt),Xe.return=at,Xe)}function Bt(at,Xe,dt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Xe=ei(""+Xe,at.mode,dt),Xe.return=at,Xe;if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case _:return dt=Ju(Xe.type,Xe.key,Xe.props,null,at.mode,dt),Ho(dt,Xe),dt.return=at,dt;case A:return Xe=Yu(Xe,at.mode,dt),Xe.return=at,Xe;case q:var Lt=Xe._init;return Xe=Lt(Xe._payload),Bt(at,Xe,dt)}if(lt(Xe)||ge(Xe))return Xe=js(Xe,at.mode,dt,null),Xe.return=at,Xe;if(typeof Xe.then=="function")return Bt(at,ys(Xe),dt);if(Xe.$$typeof===P)return Bt(at,tc(at,Xe),dt);yl(at,Xe)}return null}function _t(at,Xe,dt,Lt){var Sr=Xe!==null?Xe.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return Sr!==null?null:ce(at,Xe,""+dt,Lt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case _:return dt.key===Sr?Be(at,Xe,dt,Lt):null;case A:return dt.key===Sr?mt(at,Xe,dt,Lt):null;case q:return Sr=dt._init,dt=Sr(dt._payload),_t(at,Xe,dt,Lt)}if(lt(dt)||ge(dt))return Sr!==null?null:Ft(at,Xe,dt,Lt,null);if(typeof dt.then=="function")return _t(at,Xe,ys(dt),Lt);if(dt.$$typeof===P)return _t(at,Xe,tc(at,dt),Lt);yl(at,dt)}return null}function At(at,Xe,dt,Lt,Sr){if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number"||typeof Lt=="bigint")return at=at.get(dt)||null,ce(Xe,at,""+Lt,Sr);if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case _:return at=at.get(Lt.key===null?dt:Lt.key)||null,Be(Xe,at,Lt,Sr);case A:return at=at.get(Lt.key===null?dt:Lt.key)||null,mt(Xe,at,Lt,Sr);case q:var Sn=Lt._init;return Lt=Sn(Lt._payload),At(at,Xe,dt,Lt,Sr)}if(lt(Lt)||ge(Lt))return at=at.get(dt)||null,Ft(Xe,at,Lt,Sr,null);if(typeof Lt.then=="function")return At(at,Xe,dt,ys(Lt),Sr);if(Lt.$$typeof===P)return At(at,Xe,dt,tc(Xe,Lt),Sr);yl(Xe,Lt)}return null}function zr(at,Xe,dt,Lt){for(var Sr=null,Sn=null,Or=Xe,$r=Xe=0,Hi=null;Or!==null&&$r<dt.length;$r++){Or.index>$r?(Hi=Or,Or=null):Hi=Or.sibling;var kn=_t(at,Or,dt[$r],Lt);if(kn===null){Or===null&&(Or=Hi);break}t&&Or&&kn.alternate===null&&n(at,Or),Xe=N(kn,Xe,$r),Sn===null?Sr=kn:Sn.sibling=kn,Sn=kn,Or=Hi}if($r===dt.length)return s(at,Or),Nn&&Gs(at,$r),Sr;if(Or===null){for(;$r<dt.length;$r++)Or=Bt(at,dt[$r],Lt),Or!==null&&(Xe=N(Or,Xe,$r),Sn===null?Sr=Or:Sn.sibling=Or,Sn=Or);return Nn&&Gs(at,$r),Sr}for(Or=p(Or);$r<dt.length;$r++)Hi=At(Or,at,$r,dt[$r],Lt),Hi!==null&&(t&&Hi.alternate!==null&&Or.delete(Hi.key===null?$r:Hi.key),Xe=N(Hi,Xe,$r),Sn===null?Sr=Hi:Sn.sibling=Hi,Sn=Hi);return t&&Or.forEach(function(xu){return n(at,xu)}),Nn&&Gs(at,$r),Sr}function Hr(at,Xe,dt,Lt){if(dt==null)throw Error(a(151));for(var Sr=null,Sn=null,Or=Xe,$r=Xe=0,Hi=null,kn=dt.next();Or!==null&&!kn.done;$r++,kn=dt.next()){Or.index>$r?(Hi=Or,Or=null):Hi=Or.sibling;var xu=_t(at,Or,kn.value,Lt);if(xu===null){Or===null&&(Or=Hi);break}t&&Or&&xu.alternate===null&&n(at,Or),Xe=N(xu,Xe,$r),Sn===null?Sr=xu:Sn.sibling=xu,Sn=xu,Or=Hi}if(kn.done)return s(at,Or),Nn&&Gs(at,$r),Sr;if(Or===null){for(;!kn.done;$r++,kn=dt.next())kn=Bt(at,kn.value,Lt),kn!==null&&(Xe=N(kn,Xe,$r),Sn===null?Sr=kn:Sn.sibling=kn,Sn=kn);return Nn&&Gs(at,$r),Sr}for(Or=p(Or);!kn.done;$r++,kn=dt.next())kn=At(Or,at,$r,kn.value,Lt),kn!==null&&(t&&kn.alternate!==null&&Or.delete(kn.key===null?$r:kn.key),Xe=N(kn,Xe,$r),Sn===null?Sr=kn:Sn.sibling=kn,Sn=kn);return t&&Or.forEach(function(tx){return n(at,tx)}),Nn&&Gs(at,$r),Sr}function Zn(at,Xe,dt,Lt){if(typeof dt=="object"&&dt!==null&&dt.type===T&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case _:e:{for(var Sr=dt.key;Xe!==null;){if(Xe.key===Sr){if(Sr=dt.type,Sr===T){if(Xe.tag===7){s(at,Xe.sibling),Lt=E(Xe,dt.props.children),Lt.return=at,at=Lt;break e}}else if(Xe.elementType===Sr||typeof Sr=="object"&&Sr!==null&&Sr.$$typeof===q&&Nc(Sr)===Xe.type){s(at,Xe.sibling),Lt=E(Xe,dt.props),Ho(Lt,dt),Lt.return=at,at=Lt;break e}s(at,Xe);break}else n(at,Xe);Xe=Xe.sibling}dt.type===T?(Lt=js(dt.props.children,at.mode,Lt,dt.key),Lt.return=at,at=Lt):(Lt=Ju(dt.type,dt.key,dt.props,null,at.mode,Lt),Ho(Lt,dt),Lt.return=at,at=Lt)}return Z(at);case A:e:{for(Sr=dt.key;Xe!==null;){if(Xe.key===Sr)if(Xe.tag===4&&Xe.stateNode.containerInfo===dt.containerInfo&&Xe.stateNode.implementation===dt.implementation){s(at,Xe.sibling),Lt=E(Xe,dt.children||[]),Lt.return=at,at=Lt;break e}else{s(at,Xe);break}else n(at,Xe);Xe=Xe.sibling}Lt=Yu(dt,at.mode,Lt),Lt.return=at,at=Lt}return Z(at);case q:return Sr=dt._init,dt=Sr(dt._payload),Zn(at,Xe,dt,Lt)}if(lt(dt))return zr(at,Xe,dt,Lt);if(ge(dt)){if(Sr=ge(dt),typeof Sr!="function")throw Error(a(150));return dt=Sr.call(dt),Hr(at,Xe,dt,Lt)}if(typeof dt.then=="function")return Zn(at,Xe,ys(dt),Lt);if(dt.$$typeof===P)return Zn(at,Xe,tc(at,dt),Lt);yl(at,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint"?(dt=""+dt,Xe!==null&&Xe.tag===6?(s(at,Xe.sibling),Lt=E(Xe,dt),Lt.return=at,at=Lt):(s(at,Xe),Lt=ei(dt,at.mode,Lt),Lt.return=at,at=Lt),Z(at)):s(at,Xe)}return function(at,Xe,dt,Lt){try{ra=0;var Sr=Zn(at,Xe,dt,Lt);return ka=null,Sr}catch(Or){if(Or===to||Or===Ws)throw Or;var Sn=mi(29,Or,null,at.mode);return Sn.lanes=Lt,Sn.return=at,Sn}finally{}}}var jo=Fc(!0),ml=Fc(!1),Ii=xe(null),va=null;function na(t){var n=t.alternate;je(Ai,Ai.current&1),je(Ii,t),va===null&&(n===null||ql.current!==null||n.memoizedState!==null)&&(va=t)}function vl(t){if(t.tag===22){if(je(Ai,Ai.current),je(Ii,t),va===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(va=t)}}else ms()}function ms(){je(Ai,Ai.current),je(Ii,Ii.current)}function Vo(t){Ze(Ii),va===t&&(va=null),Ze(Ai)}var Ai=xe(0);function Kf(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||xl(s)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function oh(t,n,s,p){n=t.memoizedState,s=s(p,n),s=s==null?n:y({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Gf={enqueueSetState:function(t,n,s){t=t._reactInternals;var p=Ji(),E=ma(p);E.payload=n,s!=null&&(E.callback=s),n=vo(t,E,p),n!==null&&(Mi(n,t,p),Mo(n,t,p))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var p=Ji(),E=ma(p);E.tag=1,E.payload=n,s!=null&&(E.callback=s),n=vo(t,E,p),n!==null&&(Mi(n,t,p),Mo(n,t,p))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=Ji(),p=ma(s);p.tag=2,n!=null&&(p.callback=n),n=vo(t,p,s),n!==null&&(Mi(n,t,s),Mo(n,t,s))}};function sh(t,n,s,p,E,N,Z){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(p,N,Z):n.prototype&&n.prototype.isPureReactComponent?!Ya(s,p)||!Ya(E,N):!0}function lh(t,n,s,p){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,p),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,p),n.state!==t&&Gf.enqueueReplaceState(n,n.state,null)}function tu(t,n){var s=n;if("ref"in n){s={};for(var p in n)p!=="ref"&&(s[p]=n[p])}if(t=t.defaultProps){s===n&&(s=y({},s));for(var E in t)s[E]===void 0&&(s[E]=t[E])}return s}var qf=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Om(t){qf(t)}function Im(t){console.error(t)}function Pm(t){qf(t)}function uh(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(p){setTimeout(function(){throw p})}}function Nm(t,n,s){try{var p=t.onCaughtError;p(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Bg(t,n,s){return s=ma(s),s.tag=3,s.payload={element:null},s.callback=function(){uh(t,n)},s}function Hg(t){return t=ma(t),t.tag=3,t}function jg(t,n,s,p){var E=s.type.getDerivedStateFromError;if(typeof E=="function"){var N=p.value;t.payload=function(){return E(N)},t.callback=function(){Nm(n,s,p)}}var Z=s.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(t.callback=function(){Nm(n,s,p),typeof E!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var ce=p.stack;this.componentDidCatch(p.value,{componentStack:ce!==null?ce:""})})}function jb(t,n,s,p,E){if(s.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(n=s.alternate,n!==null&&$l(n,s,E,!0),s=Ii.current,s!==null){switch(s.tag){case 13:return va===null?Nh():s.alternate===null&&ui===0&&(ui=3),s.flags&=-257,s.flags|=65536,s.lanes=E,p===La?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([p]):n.add(p),bd(t,p,E)),!1;case 22:return s.flags|=65536,p===La?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([p])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([p]):s.add(p)),bd(t,p,E)),!1}throw Error(a(435,s.tag))}return bd(t,p,E),Nh(),!1}if(Nn)return n=Ii.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=E,p!==Cf&&(t=Error(a(422),{cause:p}),ec(Na(t,s)))):(p!==Cf&&(n=Error(a(423),{cause:p}),ec(Na(n,s))),t=t.current.alternate,t.flags|=65536,E&=-E,t.lanes|=E,p=Na(p,s),E=Bg(t.stateNode,p,E),Xs(t,E),ui!==4&&(ui=2)),!1;var N=Error(a(520),{cause:p});if(N=Na(N,s),Kc===null?Kc=[N]:Kc.push(N),ui!==4&&(ui=2),n===null)return!0;p=Na(p,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=E&-E,s.lanes|=t,t=Bg(s.stateNode,p,t),Xs(s,t),!1;case 1:if(n=s.type,N=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ws===null||!ws.has(N))))return s.flags|=65536,E&=-E,s.lanes|=E,E=Hg(E),jg(E,t,s,p),Xs(s,E),!1}s=s.return}while(s!==null);return!1}var Fm=Error(a(461)),Pi=!1;function Ui(t,n,s,p){n.child=t===null?ml(n,null,s,p):jo(n,t.child,s,p)}function Dm(t,n,s,p,E){s=s.render;var N=n.ref;if("ref"in p){var Z={};for(var ce in p)ce!=="ref"&&(Z[ce]=p[ce])}else Z=p;return as(n),p=ls(t,n,s,Z,N,E),ce=us(),t!==null&&!Pi?(cs(t,n,E),Eo(t,n,E)):(Nn&&ce&&Zu(n),n.flags|=1,Ui(t,n,p,E),n.child)}function Vg(t,n,s,p,E){if(t===null){var N=s.type;return typeof N=="function"&&!Wu(N)&&N.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=N,ba(t,n,N,p,E)):(t=Ju(s.type,null,p,n,n.mode,E),t.ref=n.ref,t.return=n,n.child=t)}if(N=t.child,!au(t,E)){var Z=N.memoizedProps;if(s=s.compare,s=s!==null?s:Ya,s(Z,p)&&t.ref===n.ref)return Eo(t,n,E)}return n.flags|=1,t=Da(N,p),t.ref=n.ref,t.return=n,n.child=t}function ba(t,n,s,p,E){if(t!==null){var N=t.memoizedProps;if(Ya(N,p)&&t.ref===n.ref)if(Pi=!1,n.pendingProps=p=N,au(t,E))(t.flags&131072)!==0&&(Pi=!0);else return n.lanes=t.lanes,Eo(t,n,E)}return zf(t,n,s,p,E)}function ch(t,n,s){var p=n.pendingProps,E=p.children,N=t!==null?t.memoizedState:null;if(p.mode==="hidden"){if((n.flags&128)!==0){if(p=N!==null?N.baseLanes|s:s,t!==null){for(E=n.child=t.child,N=0;E!==null;)N=N|E.lanes|E.childLanes,E=E.sibling;n.childLanes=N&~p}else n.childLanes=0,n.child=null;return Dc(t,n,p,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&nc(n,N!==null?N.cachePool:null),N!==null?el(n,N):tl(),vl(n);else return n.lanes=n.childLanes=536870912,Dc(t,n,N!==null?N.baseLanes|s:s,s)}else N!==null?(nc(n,N.cachePool),el(n,N),ms(),n.memoizedState=null):(t!==null&&nc(n,null),tl(),ms());return Ui(t,n,E,s),n.child}function Dc(t,n,s,p){var E=Zd();return E=E===null?null:{parent:yr._currentValue,pool:E},n.memoizedState={baseLanes:s,cachePool:E},t!==null&&nc(n,null),tl(),vl(n),t!==null&&$l(t,n,p,!0),null}function ru(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function zf(t,n,s,p,E){return as(n),s=ls(t,n,s,p,void 0,E),p=us(),t!==null&&!Pi?(cs(t,n,E),Eo(t,n,E)):(Nn&&p&&Zu(n),n.flags|=1,Ui(t,n,s,E),n.child)}function fh(t,n,s,p,E,N){return as(n),n.updateQueue=null,s=vi(n,p,s,E),il(t),p=us(),t!==null&&!Pi?(cs(t,n,N),Eo(t,n,N)):(Nn&&p&&Zu(n),n.flags|=1,Ui(t,n,s,N),n.child)}function Wf(t,n,s,p,E){if(as(n),n.stateNode===null){var N=Hl,Z=s.contextType;typeof Z=="object"&&Z!==null&&(N=Di(Z)),N=new s(p,N),n.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Gf,n.stateNode=N,N._reactInternals=n,N=n.stateNode,N.props=p,N.state=n.memoizedState,N.refs={},ro(n),Z=s.contextType,N.context=typeof Z=="object"&&Z!==null?Di(Z):Hl,N.state=n.memoizedState,Z=s.getDerivedStateFromProps,typeof Z=="function"&&(oh(n,s,Z,p),N.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(Z=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),Z!==N.state&&Gf.enqueueReplaceState(N,N.state,null),Nr(n,p,N,E),Ei(),N.state=n.memoizedState),typeof N.componentDidMount=="function"&&(n.flags|=4194308),p=!0}else if(t===null){N=n.stateNode;var ce=n.memoizedProps,Be=tu(s,ce);N.props=Be;var mt=N.context,Ft=s.contextType;Z=Hl,typeof Ft=="object"&&Ft!==null&&(Z=Di(Ft));var Bt=s.getDerivedStateFromProps;Ft=typeof Bt=="function"||typeof N.getSnapshotBeforeUpdate=="function",ce=n.pendingProps!==ce,Ft||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(ce||mt!==Z)&&lh(n,N,p,Z),mo=!1;var _t=n.memoizedState;N.state=_t,Nr(n,p,N,E),Ei(),mt=n.memoizedState,ce||_t!==mt||mo?(typeof Bt=="function"&&(oh(n,s,Bt,p),mt=n.memoizedState),(Be=mo||sh(n,s,Be,p,_t,mt,Z))?(Ft||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(n.flags|=4194308)):(typeof N.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=p,n.memoizedState=mt),N.props=p,N.state=mt,N.context=Z,p=Be):(typeof N.componentDidMount=="function"&&(n.flags|=4194308),p=!1)}else{N=n.stateNode,Qs(t,n),Z=n.memoizedProps,Ft=tu(s,Z),N.props=Ft,Bt=n.pendingProps,_t=N.context,mt=s.contextType,Be=Hl,typeof mt=="object"&&mt!==null&&(Be=Di(mt)),ce=s.getDerivedStateFromProps,(mt=typeof ce=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(Z!==Bt||_t!==Be)&&lh(n,N,p,Be),mo=!1,_t=n.memoizedState,N.state=_t,Nr(n,p,N,E),Ei();var At=n.memoizedState;Z!==Bt||_t!==At||mo||t!==null&&t.dependencies!==null&&Nf(t.dependencies)?(typeof ce=="function"&&(oh(n,s,ce,p),At=n.memoizedState),(Ft=mo||sh(n,s,Ft,p,_t,At,Be)||t!==null&&t.dependencies!==null&&Nf(t.dependencies))?(mt||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(p,At,Be),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(p,At,Be)),typeof N.componentDidUpdate=="function"&&(n.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof N.componentDidUpdate!="function"||Z===t.memoizedProps&&_t===t.memoizedState||(n.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Z===t.memoizedProps&&_t===t.memoizedState||(n.flags|=1024),n.memoizedProps=p,n.memoizedState=At),N.props=p,N.state=At,N.context=Be,p=Ft):(typeof N.componentDidUpdate!="function"||Z===t.memoizedProps&&_t===t.memoizedState||(n.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||Z===t.memoizedProps&&_t===t.memoizedState||(n.flags|=1024),p=!1)}return N=p,ru(t,n),p=(n.flags&128)!==0,N||p?(N=n.stateNode,s=p&&typeof s.getDerivedStateFromError!="function"?null:N.render(),n.flags|=1,t!==null&&p?(n.child=jo(n,t.child,null,E),n.child=jo(n,null,s,E)):Ui(t,n,s,E),n.memoizedState=N.state,t=n.child):t=Eo(t,n,E),t}function dh(t,n,s,p){return Vl(),n.flags|=256,Ui(t,n,s,p),n.child}var nu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uc(t){return{baseLanes:t,cachePool:eh()}}function Jf(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=aa),t}function hh(t,n,s){var p=n.pendingProps,E=!1,N=(n.flags&128)!==0,Z;if((Z=N)||(Z=t!==null&&t.memoizedState===null?!1:(Ai.current&2)!==0),Z&&(E=!0,n.flags&=-129),Z=(n.flags&32)!==0,n.flags&=-33,t===null){if(Nn){if(E?na(n):ms(),Nn){var ce=ai,Be;if(Be=ce){e:{for(Be=ce,ce=Za;Be.nodeType!==8;){if(!ce){ce=null;break e}if(Be=on(Be.nextSibling),Be===null){ce=null;break e}}ce=Be}ce!==null?(n.memoizedState={dehydrated:ce,treeContext:Ks!==null?{id:ho,overflow:po}:null,retryLane:536870912,hydrationErrors:null},Be=mi(18,null,null,0),Be.stateNode=ce,Be.return=n,n.child=Be,Fi=n,ai=null,Be=!0):Be=!1}Be||ns(n)}if(ce=n.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))return xl(ce)?n.lanes=32:n.lanes=536870912,null;Vo(n)}return ce=p.children,p=p.fallback,E?(ms(),E=n.mode,ce=iu({mode:"hidden",children:ce},E),p=js(p,E,s,null),ce.return=n,p.return=n,ce.sibling=p,n.child=ce,E=n.child,E.memoizedState=Uc(s),E.childLanes=Jf(t,Z,s),n.memoizedState=nu,p):(na(n),Yf(n,ce))}if(Be=t.memoizedState,Be!==null&&(ce=Be.dehydrated,ce!==null)){if(N)n.flags&256?(na(n),n.flags&=-257,n=Qf(t,n,s)):n.memoizedState!==null?(ms(),n.child=t.child,n.flags|=128,n=null):(ms(),E=p.fallback,ce=n.mode,p=iu({mode:"visible",children:p.children},ce),E=js(E,ce,s,null),E.flags|=2,p.return=n,E.return=n,p.sibling=E,n.child=p,jo(n,t.child,null,s),p=n.child,p.memoizedState=Uc(s),p.childLanes=Jf(t,Z,s),n.memoizedState=nu,n=E);else if(na(n),xl(ce)){if(Z=ce.nextSibling&&ce.nextSibling.dataset,Z)var mt=Z.dgst;Z=mt,p=Error(a(419)),p.stack="",p.digest=Z,ec({value:p,source:null,stack:null}),n=Qf(t,n,s)}else if(Pi||$l(t,n,s,!1),Z=(s&t.childLanes)!==0,Pi||Z){if(Z=Xn,Z!==null&&(p=s&-s,p=(p&42)!==0?1:jt(p),p=(p&(Z.suspendedLanes|s))!==0?0:p,p!==0&&p!==Be.retryLane))throw Be.retryLane=p,pa(t,p),Mi(Z,t,p),Fm;ce.data==="$?"||Nh(),n=Qf(t,n,s)}else ce.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=Be.treeContext,ai=on(ce.nextSibling),Fi=n,Nn=!0,rs=null,Za=!1,t!==null&&(ga[ya++]=ho,ga[ya++]=po,ga[ya++]=Ks,ho=t.id,po=t.overflow,Ks=n),n=Yf(n,p.children),n.flags|=4096);return n}return E?(ms(),E=p.fallback,ce=n.mode,Be=t.child,mt=Be.sibling,p=Da(Be,{mode:"hidden",children:p.children}),p.subtreeFlags=Be.subtreeFlags&65011712,mt!==null?E=Da(mt,E):(E=js(E,ce,s,null),E.flags|=2),E.return=n,p.return=n,p.sibling=E,n.child=p,p=E,E=n.child,ce=t.child.memoizedState,ce===null?ce=Uc(s):(Be=ce.cachePool,Be!==null?(mt=yr._currentValue,Be=Be.parent!==mt?{parent:mt,pool:mt}:Be):Be=eh(),ce={baseLanes:ce.baseLanes|s,cachePool:Be}),E.memoizedState=ce,E.childLanes=Jf(t,Z,s),n.memoizedState=nu,p):(na(n),s=t.child,t=s.sibling,s=Da(s,{mode:"visible",children:p.children}),s.return=n,s.sibling=null,t!==null&&(Z=n.deletions,Z===null?(n.deletions=[t],n.flags|=16):Z.push(t)),n.child=s,n.memoizedState=null,s)}function Yf(t,n){return n=iu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function iu(t,n){return t=mi(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Qf(t,n,s){return jo(n,t.child,null,s),t=Yf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function ph(t,n,s){t.lanes|=n;var p=t.alternate;p!==null&&(p.lanes|=n),Pf(t.return,n,s)}function Xf(t,n,s,p,E){var N=t.memoizedState;N===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:p,tail:s,tailMode:E}:(N.isBackwards=n,N.rendering=null,N.renderingStartTime=0,N.last=p,N.tail=s,N.tailMode=E)}function gh(t,n,s){var p=n.pendingProps,E=p.revealOrder,N=p.tail;if(Ui(t,n,p.children,s),p=Ai.current,(p&2)!==0)p=p&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ph(t,s,n);else if(t.tag===19)ph(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}p&=1}switch(je(Ai,p),E){case"forwards":for(s=n.child,E=null;s!==null;)t=s.alternate,t!==null&&Kf(t)===null&&(E=s),s=s.sibling;s=E,s===null?(E=n.child,n.child=null):(E=s.sibling,s.sibling=null),Xf(n,!1,E,s,N);break;case"backwards":for(s=null,E=n.child,n.child=null;E!==null;){if(t=E.alternate,t!==null&&Kf(t)===null){n.child=E;break}t=E.sibling,E.sibling=s,s=E,E=t}Xf(n,!0,s,null,N);break;case"together":Xf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Eo(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),To|=n.lanes,(s&n.childLanes)===0)if(t!==null){if($l(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=Da(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Da(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function au(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Nf(t)))}function $g(t,n,s){switch(n.tag){case 3:le(n,n.stateNode.containerInfo),is(n,yr,t.memoizedState.cache),Vl();break;case 27:case 5:Je(n);break;case 4:le(n,n.stateNode.containerInfo);break;case 10:is(n,n.type,n.memoizedProps.value);break;case 13:var p=n.memoizedState;if(p!==null)return p.dehydrated!==null?(na(n),n.flags|=128,null):(s&n.child.childLanes)!==0?hh(t,n,s):(na(n),t=Eo(t,n,s),t!==null?t.sibling:null);na(n);break;case 19:var E=(t.flags&128)!==0;if(p=(s&n.childLanes)!==0,p||($l(t,n,s,!1),p=(s&n.childLanes)!==0),E){if(p)return gh(t,n,s);n.flags|=128}if(E=n.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),je(Ai,Ai.current),p)break;return null;case 22:case 23:return n.lanes=0,ch(t,n,s);case 24:is(n,yr,t.memoizedState.cache)}return Eo(t,n,s)}function yh(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)Pi=!0;else{if(!au(t,s)&&(n.flags&128)===0)return Pi=!1,$g(t,n,s);Pi=(t.flags&131072)!==0}else Pi=!1,Nn&&(n.flags&1048576)!==0&&zd(n,Xu,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var p=n.elementType,E=p._init;if(p=E(p._payload),n.type=p,typeof p=="function")Wu(p)?(t=tu(p,t),n.tag=1,n=Wf(null,n,p,t,s)):(n.tag=0,n=zf(null,n,p,t,s));else{if(p!=null){if(E=p.$$typeof,E===K){n.tag=11,n=Dm(null,n,p,t,s);break e}else if(E===Y){n.tag=14,n=Vg(null,n,p,t,s);break e}}throw n=tt(p)||p,Error(a(306,n,""))}}return n;case 0:return zf(t,n,n.type,n.pendingProps,s);case 1:return p=n.type,E=tu(p,n.pendingProps),Wf(t,n,p,E,s);case 3:e:{if(le(n,n.stateNode.containerInfo),t===null)throw Error(a(387));p=n.pendingProps;var N=n.memoizedState;E=N.element,Qs(t,n),Nr(n,p,null,s);var Z=n.memoizedState;if(p=Z.cache,is(n,yr,p),p!==N.cache&&Jd(n,[yr],s,!0),Ei(),p=Z.element,N.isDehydrated)if(N={element:p,isDehydrated:!1,cache:Z.cache},n.updateQueue.baseState=N,n.memoizedState=N,n.flags&256){n=dh(t,n,p,s);break e}else if(p!==E){E=Na(Error(a(424)),n),ec(E),n=dh(t,n,p,s);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ai=on(t.firstChild),Fi=n,Nn=!0,rs=null,Za=!0,s=ml(n,null,p,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Vl(),p===E){n=Eo(t,n,s);break e}Ui(t,n,p,s)}n=n.child}return n;case 26:return ru(t,n),t===null?(s=qb(n.type,null,n.pendingProps,null))?n.memoizedState=s:Nn||(s=n.type,t=n.pendingProps,p=Kt(kt.current).createElement(s),p[Pt]=n,p[Zt]=t,ke(p,s,t),Gt(p),n.stateNode=p):n.memoizedState=qb(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Je(n),t===null&&Nn&&(p=n.stateNode=$b(n.type,n.pendingProps,kt.current),Fi=n,Za=!0,E=ai,Bi(n.type)?(zo=E,ai=on(p.firstChild)):ai=E),Ui(t,n,n.pendingProps.children,s),ru(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Nn&&((E=p=ai)&&(p=tf(p,n.type,n.pendingProps,Za),p!==null?(n.stateNode=p,Fi=n,ai=on(p.firstChild),Za=!1,E=!0):E=!1),E||ns(n)),Je(n),E=n.type,N=n.pendingProps,Z=t!==null?t.memoizedProps:null,p=N.children,un(E,N)?p=null:Z!==null&&un(E,Z)&&(n.flags|=32),n.memoizedState!==null&&(E=ls(t,n,zl,null,null,s),Qh._currentValue=E),ru(t,n),Ui(t,n,p,s),n.child;case 6:return t===null&&Nn&&((t=s=ai)&&(s=rf(s,n.pendingProps,Za),s!==null?(n.stateNode=s,Fi=n,ai=null,t=!0):t=!1),t||ns(n)),null;case 13:return hh(t,n,s);case 4:return le(n,n.stateNode.containerInfo),p=n.pendingProps,t===null?n.child=jo(n,null,p,s):Ui(t,n,p,s),n.child;case 11:return Dm(t,n,n.type,n.pendingProps,s);case 7:return Ui(t,n,n.pendingProps,s),n.child;case 8:return Ui(t,n,n.pendingProps.children,s),n.child;case 12:return Ui(t,n,n.pendingProps.children,s),n.child;case 10:return p=n.pendingProps,is(n,n.type,p.value),Ui(t,n,p.children,s),n.child;case 9:return E=n.type._context,p=n.pendingProps.children,as(n),E=Di(E),p=p(E),n.flags|=1,Ui(t,n,p,s),n.child;case 14:return Vg(t,n,n.type,n.pendingProps,s);case 15:return ba(t,n,n.type,n.pendingProps,s);case 19:return gh(t,n,s);case 31:return p=n.pendingProps,s=n.mode,p={mode:p.mode,children:p.children},t===null?(s=iu(p,s),s.ref=n.ref,n.child=s,s.return=n,n=s):(s=Da(t.child,p),s.ref=n.ref,n.child=s,s.return=n,n=s),n;case 22:return ch(t,n,s);case 24:return as(n),p=Di(yr),t===null?(E=Zd(),E===null&&(E=Xn,N=Si(),E.pooledCache=N,N.refCount++,N!==null&&(E.pooledCacheLanes|=s),E=N),n.memoizedState={parent:p,cache:E},ro(n),is(n,yr,E)):((t.lanes&s)!==0&&(Qs(t,n),Nr(n,null,null,s),Ei()),E=t.memoizedState,N=n.memoizedState,E.parent!==p?(E={parent:p,cache:p},n.memoizedState=E,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=E),is(n,yr,p)):(p=N.cache,is(n,yr,p),p!==E.cache&&Jd(n,[yr],s,!0))),Ui(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Ao(t){t.flags|=4}function Lc(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Qb(n)){if(n=Ii.current,n!==null&&((_n&4194048)===_n?va!==null:(_n&62914560)!==_n&&(_n&536870912)===0||n!==va))throw yo=La,Gl;t.flags|=8192}}function Mc(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?st():536870912,t.lanes|=n,Sl|=n)}function ou(t,n){if(!Nn)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var p=null;s!==null;)s.alternate!==null&&(p=s),s=s.sibling;p===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:p.sibling=null}}function ri(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,p=0;if(n)for(var E=t.child;E!==null;)s|=E.lanes|E.childLanes,p|=E.subtreeFlags&65011712,p|=E.flags&65011712,E.return=t,E=E.sibling;else for(E=t.child;E!==null;)s|=E.lanes|E.childLanes,p|=E.subtreeFlags,p|=E.flags,E.return=t,E=E.sibling;return t.subtreeFlags|=p,t.childLanes=s,n}function Zf(t,n,s){var p=n.pendingProps;switch(Tf(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(n),null;case 1:return ri(n),null;case 3:return s=n.stateNode,p=null,t!==null&&(p=t.memoizedState.cache),n.memoizedState.cache!==p&&(n.flags|=2048),Uo(yr),Te(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(jl(n)?Ao(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Wd())),ri(n),null;case 26:return s=n.memoizedState,t===null?(Ao(n),s!==null?(ri(n),Lc(n,s)):(ri(n),n.flags&=-16777217)):s?s!==t.memoizedState?(Ao(n),ri(n),Lc(n,s)):(ri(n),n.flags&=-16777217):(t.memoizedProps!==p&&Ao(n),ri(n),n.flags&=-16777217),null;case 27:se(n),s=kt.current;var E=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==p&&Ao(n);else{if(!p){if(n.stateNode===null)throw Error(a(166));return ri(n),null}t=ht.current,jl(n)?Dg(n):(t=$b(E,p,s),n.stateNode=t,Ao(n))}return ri(n),null;case 5:if(se(n),s=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==p&&Ao(n);else{if(!p){if(n.stateNode===null)throw Error(a(166));return ri(n),null}if(t=ht.current,jl(n))Dg(n);else{switch(E=Kt(kt.current),t){case 1:t=E.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=E.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=E.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=E.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=E.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof p.is=="string"?E.createElement("select",{is:p.is}):E.createElement("select"),p.multiple?t.multiple=!0:p.size&&(t.size=p.size);break;default:t=typeof p.is=="string"?E.createElement(s,{is:p.is}):E.createElement(s)}}t[Pt]=n,t[Zt]=p;e:for(E=n.child;E!==null;){if(E.tag===5||E.tag===6)t.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===n)break e;for(;E.sibling===null;){if(E.return===null||E.return===n)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}n.stateNode=t;e:switch(ke(t,s,p),s){case"button":case"input":case"select":case"textarea":t=!!p.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Ao(n)}}return ri(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==p&&Ao(n);else{if(typeof p!="string"&&n.stateNode===null)throw Error(a(166));if(t=kt.current,jl(n)){if(t=n.stateNode,s=n.memoizedProps,p=null,E=Fi,E!==null)switch(E.tag){case 27:case 5:p=E.memoizedProps}t[Pt]=n,t=!!(t.nodeValue===s||p!==null&&p.suppressHydrationWarning===!0||L(t.nodeValue,s)),t||ns(n)}else t=Kt(t).createTextNode(p),t[Pt]=n,n.stateNode=t}return ri(n),null;case 13:if(p=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(E=jl(n),p!==null&&p.dehydrated!==null){if(t===null){if(!E)throw Error(a(318));if(E=n.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));E[Pt]=n}else Vl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ri(n),E=!1}else E=Wd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=E),E=!0;if(!E)return n.flags&256?(Vo(n),n):(Vo(n),null)}if(Vo(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=p!==null,t=t!==null&&t.memoizedState!==null,s){p=n.child,E=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(E=p.alternate.memoizedState.cachePool.pool);var N=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(N=p.memoizedState.cachePool.pool),N!==E&&(p.flags|=2048)}return s!==t&&s&&(n.child.flags|=8192),Mc(n,n.updateQueue),ri(n),null;case 4:return Te(),t===null&&Gh(n.stateNode.containerInfo),ri(n),null;case 10:return Uo(n.type),ri(n),null;case 19:if(Ze(Ai),E=n.memoizedState,E===null)return ri(n),null;if(p=(n.flags&128)!==0,N=E.rendering,N===null)if(p)ou(E,!1);else{if(ui!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(N=Kf(t),N!==null){for(n.flags|=128,ou(E,!1),t=N.updateQueue,n.updateQueue=t,Mc(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)qd(s,t),s=s.sibling;return je(Ai,Ai.current&1|2),n.child}t=t.sibling}E.tail!==null&&Ce()>Go&&(n.flags|=128,p=!0,ou(E,!1),n.lanes=4194304)}else{if(!p)if(t=Kf(N),t!==null){if(n.flags|=128,p=!0,t=t.updateQueue,n.updateQueue=t,Mc(n,t),ou(E,!0),E.tail===null&&E.tailMode==="hidden"&&!N.alternate&&!Nn)return ri(n),null}else 2*Ce()-E.renderingStartTime>Go&&s!==536870912&&(n.flags|=128,p=!0,ou(E,!1),n.lanes=4194304);E.isBackwards?(N.sibling=n.child,n.child=N):(t=E.last,t!==null?t.sibling=N:n.child=N,E.last=N)}return E.tail!==null?(n=E.tail,E.rendering=n,E.tail=n.sibling,E.renderingStartTime=Ce(),n.sibling=null,t=Ai.current,je(Ai,p?t&1|2:t&1),n):(ri(n),null);case 22:case 23:return Vo(n),sc(),p=n.memoizedState!==null,t!==null?t.memoizedState!==null!==p&&(n.flags|=8192):p&&(n.flags|=8192),p?(s&536870912)!==0&&(n.flags&128)===0&&(ri(n),n.subtreeFlags&6&&(n.flags|=8192)):ri(n),s=n.updateQueue,s!==null&&Mc(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),p=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(p=n.memoizedState.cachePool.pool),p!==s&&(n.flags|=2048),t!==null&&Ze(Lo),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Uo(yr),ri(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function Kg(t,n){switch(Tf(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Uo(yr),Te(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return se(n),null;case 13:if(Vo(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Vl()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Ze(Ai),null;case 4:return Te(),null;case 10:return Uo(n.type),null;case 22:case 23:return Vo(n),sc(),t!==null&&Ze(Lo),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Uo(yr),null;case 25:return null;default:return null}}function mh(t,n){switch(Tf(n),n.tag){case 3:Uo(yr),Te();break;case 26:case 27:case 5:se(n);break;case 4:Te();break;case 13:Vo(n);break;case 19:Ze(Ai);break;case 10:Uo(n.type);break;case 22:case 23:Vo(n),sc(),t!==null&&Ze(Lo);break;case 24:Uo(yr)}}function su(t,n){try{var s=n.updateQueue,p=s!==null?s.lastEffect:null;if(p!==null){var E=p.next;s=E;do{if((s.tag&t)===t){p=void 0;var N=s.create,Z=s.inst;p=N(),Z.destroy=p}s=s.next}while(s!==E)}}catch(ce){Kn(n,n.return,ce)}}function no(t,n,s){try{var p=n.updateQueue,E=p!==null?p.lastEffect:null;if(E!==null){var N=E.next;p=N;do{if((p.tag&t)===t){var Z=p.inst,ce=Z.destroy;if(ce!==void 0){Z.destroy=void 0,E=n;var Be=s,mt=ce;try{mt()}catch(Ft){Kn(E,Be,Ft)}}}p=p.next}while(p!==N)}}catch(Ft){Kn(n,n.return,Ft)}}function vh(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{Zs(n,s)}catch(p){Kn(t,t.return,p)}}}function kc(t,n,s){s.props=tu(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(p){Kn(t,n,p)}}function lu(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var p=t.stateNode;break;case 30:p=t.stateNode;break;default:p=t.stateNode}typeof s=="function"?t.refCleanup=s(p):s.current=p}}catch(E){Kn(t,n,E)}}function Ba(t,n){var s=t.ref,p=t.refCleanup;if(s!==null)if(typeof p=="function")try{p()}catch(E){Kn(t,n,E)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(E){Kn(t,n,E)}else s.current=null}function bh(t){var n=t.type,s=t.memoizedProps,p=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&p.focus();break e;case"img":s.src?p.src=s.src:s.srcSet&&(p.srcset=s.srcSet)}}catch(E){Kn(t,t.return,E)}}function ed(t,n,s){try{var p=t.stateNode;Ve(p,t.type,s,n),p[Zt]=n}catch(E){Kn(t,t.return,E)}}function wh(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Bi(t.type)||t.tag===4}function td(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Bi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rd(t,n,s){var p=t.tag;if(p===5||p===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=z));else if(p!==4&&(p===27&&Bi(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(rd(t,n,s),t=t.sibling;t!==null;)rd(t,n,s),t=t.sibling}function $o(t,n,s){var p=t.tag;if(p===5||p===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(p!==4&&(p===27&&Bi(t.type)&&(s=t.stateNode),t=t.child,t!==null))for($o(t,n,s),t=t.sibling;t!==null;)$o(t,n,s),t=t.sibling}function _h(t){var n=t.stateNode,s=t.memoizedProps;try{for(var p=t.type,E=n.attributes;E.length;)n.removeAttributeNode(E[0]);ke(n,p,s),n[Pt]=t,n[Zt]=s}catch(N){Kn(t,t.return,N)}}var Ro=!1,li=!1,Bc=!1,nd=typeof WeakSet=="function"?WeakSet:Set,bi=null;function Gg(t,n){if(t=t.containerInfo,Ye=gy,t=Pa(t),jd(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var p=s.getSelection&&s.getSelection();if(p&&p.rangeCount!==0){s=p.anchorNode;var E=p.anchorOffset,N=p.focusNode;p=p.focusOffset;try{s.nodeType,N.nodeType}catch{s=null;break e}var Z=0,ce=-1,Be=-1,mt=0,Ft=0,Bt=t,_t=null;t:for(;;){for(var At;Bt!==s||E!==0&&Bt.nodeType!==3||(ce=Z+E),Bt!==N||p!==0&&Bt.nodeType!==3||(Be=Z+p),Bt.nodeType===3&&(Z+=Bt.nodeValue.length),(At=Bt.firstChild)!==null;)_t=Bt,Bt=At;for(;;){if(Bt===t)break t;if(_t===s&&++mt===E&&(ce=Z),_t===N&&++Ft===p&&(Be=Z),(At=Bt.nextSibling)!==null)break;Bt=_t,_t=Bt.parentNode}Bt=At}s=ce===-1||Be===-1?null:{start:ce,end:Be}}else s=null}s=s||{start:0,end:0}}else s=null;for(Mt={focusedElem:t,selectionRange:s},gy=!1,bi=n;bi!==null;)if(n=bi,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,bi=t;else for(;bi!==null;){switch(n=bi,N=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&N!==null){t=void 0,s=n,E=N.memoizedProps,N=N.memoizedState,p=s.stateNode;try{var zr=tu(s.type,E,s.elementType===s.type);t=p.getSnapshotBeforeUpdate(zr,N),p.__reactInternalSnapshotBeforeUpdate=t}catch(Hr){Kn(s,s.return,Hr)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)so(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":so(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,bi=t;break}bi=n.return}}function id(t,n,s){var p=s.flags;switch(s.tag){case 0:case 11:case 15:bl(t,s),p&4&&su(5,s);break;case 1:if(bl(t,s),p&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(Z){Kn(s,s.return,Z)}else{var E=tu(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(E,n,t.__reactInternalSnapshotBeforeUpdate)}catch(Z){Kn(s,s.return,Z)}}p&64&&vh(s),p&512&&lu(s,s.return);break;case 3:if(bl(t,s),p&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{Zs(t,n)}catch(Z){Kn(s,s.return,Z)}}break;case 27:n===null&&p&4&&_h(s);case 26:case 5:bl(t,s),n===null&&p&4&&bh(s),p&512&&lu(s,s.return);break;case 12:bl(t,s);break;case 13:bl(t,s),p&4&&Eh(t,s),p&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=ty.bind(null,s),Cr(t,s))));break;case 22:if(p=s.memoizedState!==null||Ro,!p){n=n!==null&&n.memoizedState!==null||li,E=Ro;var N=li;Ro=p,(li=n)&&!N?wl(t,s,(s.subtreeFlags&8772)!==0):bl(t,s),Ro=E,li=N}break;case 30:break;default:bl(t,s)}}function ad(t){var n=t.alternate;n!==null&&(t.alternate=null,ad(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Dr(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ti=null,Li=!1;function io(t,n,s){for(s=s.child;s!==null;)Sh(t,n,s),s=s.sibling}function Sh(t,n,s){if(Q&&typeof Q.onCommitFiberUnmount=="function")try{Q.onCommitFiberUnmount(ut,s)}catch{}switch(s.tag){case 26:li||Ba(s,n),io(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:li||Ba(s,n);var p=ti,E=Li;Bi(s.type)&&(ti=s.stateNode,Li=!1),io(t,n,s),zh(s.stateNode),ti=p,Li=E;break;case 5:li||Ba(s,n);case 6:if(p=ti,E=Li,ti=null,io(t,n,s),ti=p,Li=E,ti!==null)if(Li)try{(ti.nodeType===9?ti.body:ti.nodeName==="HTML"?ti.ownerDocument.body:ti).removeChild(s.stateNode)}catch(N){Kn(s,n,N)}else try{ti.removeChild(s.stateNode)}catch(N){Kn(s,n,N)}break;case 18:ti!==null&&(Li?(t=ti,Ss(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),tp(t)):Ss(ti,s.stateNode));break;case 4:p=ti,E=Li,ti=s.stateNode.containerInfo,Li=!0,io(t,n,s),ti=p,Li=E;break;case 0:case 11:case 14:case 15:li||no(2,s,n),li||no(4,s,n),io(t,n,s);break;case 1:li||(Ba(s,n),p=s.stateNode,typeof p.componentWillUnmount=="function"&&kc(s,n,p)),io(t,n,s);break;case 21:io(t,n,s);break;case 22:li=(p=li)||s.memoizedState!==null,io(t,n,s),li=p;break;default:io(t,n,s)}}function Eh(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{tp(t)}catch(s){Kn(n,n.return,s)}}function Um(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new nd),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new nd),n;default:throw Error(a(435,t.tag))}}function od(t,n){var s=Um(t);n.forEach(function(p){var E=km.bind(null,t,p);s.has(p)||(s.add(p),p.then(E,E))})}function ia(t,n){var s=n.deletions;if(s!==null)for(var p=0;p<s.length;p++){var E=s[p],N=t,Z=n,ce=Z;e:for(;ce!==null;){switch(ce.tag){case 27:if(Bi(ce.type)){ti=ce.stateNode,Li=!1;break e}break;case 5:ti=ce.stateNode,Li=!1;break e;case 3:case 4:ti=ce.stateNode.containerInfo,Li=!0;break e}ce=ce.return}if(ti===null)throw Error(a(160));Sh(N,Z,E),ti=null,Li=!1,N=E.alternate,N!==null&&(N.return=null),E.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Ah(n,t),n=n.sibling}var Ha=null;function Ah(t,n){var s=t.alternate,p=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ia(n,t),wa(t),p&4&&(no(3,t,t.return),su(3,t),no(5,t,t.return));break;case 1:ia(n,t),wa(t),p&512&&(li||s===null||Ba(s,s.return)),p&64&&Ro&&(t=t.updateQueue,t!==null&&(p=t.callbacks,p!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?p:s.concat(p))));break;case 26:var E=Ha;if(ia(n,t),wa(t),p&512&&(li||s===null||Ba(s,s.return)),p&4){var N=s!==null?s.memoizedState:null;if(p=t.memoizedState,s===null)if(p===null)if(t.stateNode===null){e:{p=t.type,s=t.memoizedProps,E=E.ownerDocument||E;t:switch(p){case"title":N=E.getElementsByTagName("title")[0],(!N||N[ar]||N[Pt]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=E.createElement(p),E.head.insertBefore(N,E.querySelector("head > title"))),ke(N,p,s),N[Pt]=t,Gt(N),p=N;break e;case"link":var Z=Jb("link","href",E).get(p+(s.href||""));if(Z){for(var ce=0;ce<Z.length;ce++)if(N=Z[ce],N.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&N.getAttribute("rel")===(s.rel==null?null:s.rel)&&N.getAttribute("title")===(s.title==null?null:s.title)&&N.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){Z.splice(ce,1);break t}}N=E.createElement(p),ke(N,p,s),E.head.appendChild(N);break;case"meta":if(Z=Jb("meta","content",E).get(p+(s.content||""))){for(ce=0;ce<Z.length;ce++)if(N=Z[ce],N.getAttribute("content")===(s.content==null?null:""+s.content)&&N.getAttribute("name")===(s.name==null?null:s.name)&&N.getAttribute("property")===(s.property==null?null:s.property)&&N.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&N.getAttribute("charset")===(s.charSet==null?null:s.charSet)){Z.splice(ce,1);break t}}N=E.createElement(p),ke(N,p,s),E.head.appendChild(N);break;default:throw Error(a(468,p))}N[Pt]=t,Gt(N),p=N}t.stateNode=p}else Yb(E,t.type,t.stateNode);else t.stateNode=Wb(E,p,t.memoizedProps);else N!==p?(N===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):N.count--,p===null?Yb(E,t.type,t.stateNode):Wb(E,p,t.memoizedProps)):p===null&&t.stateNode!==null&&ed(t,t.memoizedProps,s.memoizedProps)}break;case 27:ia(n,t),wa(t),p&512&&(li||s===null||Ba(s,s.return)),s!==null&&p&4&&ed(t,t.memoizedProps,s.memoizedProps);break;case 5:if(ia(n,t),wa(t),p&512&&(li||s===null||Ba(s,s.return)),t.flags&32){E=t.stateNode;try{_e(E,"")}catch(At){Kn(t,t.return,At)}}p&4&&t.stateNode!=null&&(E=t.memoizedProps,ed(t,E,s!==null?s.memoizedProps:E)),p&1024&&(Bc=!0);break;case 6:if(ia(n,t),wa(t),p&4){if(t.stateNode===null)throw Error(a(162));p=t.memoizedProps,s=t.stateNode;try{s.nodeValue=p}catch(At){Kn(t,t.return,At)}}break;case 3:if(dy=null,E=Ha,Ha=cy(n.containerInfo),ia(n,t),Ha=E,wa(t),p&4&&s!==null&&s.memoizedState.isDehydrated)try{tp(n.containerInfo)}catch(At){Kn(t,t.return,At)}Bc&&(Bc=!1,Lm(t));break;case 4:p=Ha,Ha=cy(t.stateNode.containerInfo),ia(n,t),wa(t),Ha=p;break;case 12:ia(n,t),wa(t);break;case 13:ia(n,t),wa(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(ud=Ce()),p&4&&(p=t.updateQueue,p!==null&&(t.updateQueue=null,od(t,p)));break;case 22:E=t.memoizedState!==null;var Be=s!==null&&s.memoizedState!==null,mt=Ro,Ft=li;if(Ro=mt||E,li=Ft||Be,ia(n,t),li=Ft,Ro=mt,wa(t),p&8192)e:for(n=t.stateNode,n._visibility=E?n._visibility&-2:n._visibility|1,E&&(s===null||Be||Ro||li||uu(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){Be=s=n;try{if(N=Be.stateNode,E)Z=N.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{ce=Be.stateNode;var Bt=Be.memoizedProps.style,_t=Bt!=null&&Bt.hasOwnProperty("display")?Bt.display:null;ce.style.display=_t==null||typeof _t=="boolean"?"":(""+_t).trim()}}catch(At){Kn(Be,Be.return,At)}}}else if(n.tag===6){if(s===null){Be=n;try{Be.stateNode.nodeValue=E?"":Be.memoizedProps}catch(At){Kn(Be,Be.return,At)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}p&4&&(p=t.updateQueue,p!==null&&(s=p.retryQueue,s!==null&&(p.retryQueue=null,od(t,s))));break;case 19:ia(n,t),wa(t),p&4&&(p=t.updateQueue,p!==null&&(t.updateQueue=null,od(t,p)));break;case 30:break;case 21:break;default:ia(n,t),wa(t)}}function wa(t){var n=t.flags;if(n&2){try{for(var s,p=t.return;p!==null;){if(wh(p)){s=p;break}p=p.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var E=s.stateNode,N=td(t);$o(t,N,E);break;case 5:var Z=s.stateNode;s.flags&32&&(_e(Z,""),s.flags&=-33);var ce=td(t);$o(t,ce,Z);break;case 3:case 4:var Be=s.stateNode.containerInfo,mt=td(t);rd(t,mt,Be);break;default:throw Error(a(161))}}catch(Ft){Kn(t,t.return,Ft)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Lm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Lm(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function bl(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)id(t,n.alternate,n),n=n.sibling}function uu(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:no(4,n,n.return),uu(n);break;case 1:Ba(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&kc(n,n.return,s),uu(n);break;case 27:zh(n.stateNode);case 26:case 5:Ba(n,n.return),uu(n);break;case 22:n.memoizedState===null&&uu(n);break;case 30:uu(n);break;default:uu(n)}t=t.sibling}}function wl(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var p=n.alternate,E=t,N=n,Z=N.flags;switch(N.tag){case 0:case 11:case 15:wl(E,N,s),su(4,N);break;case 1:if(wl(E,N,s),p=N,E=p.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(mt){Kn(p,p.return,mt)}if(p=N,E=p.updateQueue,E!==null){var ce=p.stateNode;try{var Be=E.shared.hiddenCallbacks;if(Be!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Be.length;E++)Ff(Be[E],ce)}catch(mt){Kn(p,p.return,mt)}}s&&Z&64&&vh(N),lu(N,N.return);break;case 27:_h(N);case 26:case 5:wl(E,N,s),s&&p===null&&Z&4&&bh(N),lu(N,N.return);break;case 12:wl(E,N,s);break;case 13:wl(E,N,s),s&&Z&4&&Eh(E,N);break;case 22:N.memoizedState===null&&wl(E,N,s),lu(N,N.return);break;case 30:break;default:wl(E,N,s)}n=n.sibling}}function qg(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Kl(s))}function Rh(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Kl(t))}function ja(t,n,s,p){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)_l(t,n,s,p),n=n.sibling}function _l(t,n,s,p){var E=n.flags;switch(n.tag){case 0:case 11:case 15:ja(t,n,s,p),E&2048&&su(9,n);break;case 1:ja(t,n,s,p);break;case 3:ja(t,n,s,p),E&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Kl(t)));break;case 12:if(E&2048){ja(t,n,s,p),t=n.stateNode;try{var N=n.memoizedProps,Z=N.id,ce=N.onPostCommit;typeof ce=="function"&&ce(Z,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Be){Kn(n,n.return,Be)}}else ja(t,n,s,p);break;case 13:ja(t,n,s,p);break;case 23:break;case 22:N=n.stateNode,Z=n.alternate,n.memoizedState!==null?N._visibility&2?ja(t,n,s,p):Hc(t,n):N._visibility&2?ja(t,n,s,p):(N._visibility|=2,cu(t,n,s,p,(n.subtreeFlags&10256)!==0)),E&2048&&qg(Z,n);break;case 24:ja(t,n,s,p),E&2048&&Rh(n.alternate,n);break;default:ja(t,n,s,p)}}function cu(t,n,s,p,E){for(E=E&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var N=t,Z=n,ce=s,Be=p,mt=Z.flags;switch(Z.tag){case 0:case 11:case 15:cu(N,Z,ce,Be,E),su(8,Z);break;case 23:break;case 22:var Ft=Z.stateNode;Z.memoizedState!==null?Ft._visibility&2?cu(N,Z,ce,Be,E):Hc(N,Z):(Ft._visibility|=2,cu(N,Z,ce,Be,E)),E&&mt&2048&&qg(Z.alternate,Z);break;case 24:cu(N,Z,ce,Be,E),E&&mt&2048&&Rh(Z.alternate,Z);break;default:cu(N,Z,ce,Be,E)}n=n.sibling}}function Hc(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,p=n,E=p.flags;switch(p.tag){case 22:Hc(s,p),E&2048&&qg(p.alternate,p);break;case 24:Hc(s,p),E&2048&&Rh(p.alternate,p);break;default:Hc(s,p)}n=n.sibling}}var jc=8192;function Ko(t){if(t.subtreeFlags&jc)for(t=t.child;t!==null;)xh(t),t=t.sibling}function xh(t){switch(t.tag){case 26:Ko(t),t.flags&jc&&t.memoizedState!==null&&GR(Ha,t.memoizedState,t.memoizedProps);break;case 5:Ko(t);break;case 3:case 4:var n=Ha;Ha=cy(t.stateNode.containerInfo),Ko(t),Ha=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=jc,jc=16777216,Ko(t),jc=n):Ko(t));break;default:Ko(t)}}function Th(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Vc(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var p=n[s];bi=p,zg(p,t)}Th(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ch(t),t=t.sibling}function Ch(t){switch(t.tag){case 0:case 11:case 15:Vc(t),t.flags&2048&&no(9,t,t.return);break;case 3:Vc(t);break;case 12:Vc(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,sd(t)):Vc(t);break;default:Vc(t)}}function sd(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var p=n[s];bi=p,zg(p,t)}Th(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:no(8,n,n.return),sd(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,sd(n));break;default:sd(n)}t=t.sibling}}function zg(t,n){for(;bi!==null;){var s=bi;switch(s.tag){case 0:case 11:case 15:no(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var p=s.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Kl(s.memoizedState.cache)}if(p=s.child,p!==null)p.return=s,bi=p;else e:for(s=t;bi!==null;){p=bi;var E=p.sibling,N=p.return;if(ad(p),p===s){bi=null;break e}if(E!==null){E.return=N,bi=E;break e}bi=N}}}var Oh={getCacheForType:function(t){var n=Di(yr),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s}},Mm=typeof WeakMap=="function"?WeakMap:Map,Hn=0,Xn=null,yn=null,_n=0,Mn=0,zi=null,ao=!1,_a=!1,$c=!1,xo=0,ui=0,To=0,vs=0,ld=0,aa=0,Sl=0,Kc=null,Wi=null,bs=!1,ud=0,Go=1/0,fu=null,ws=null,Ti=0,qo=null,du=null,El=0,Gc=0,Ih=null,cd=null,qc=0,zc=null;function Ji(){if((Hn&2)!==0&&_n!==0)return _n&-_n;if(Ne.T!==null){var t=Ua;return t!==0?t:jh()}return pe()}function fd(){aa===0&&(aa=(_n&536870912)===0||Nn?vt():536870912);var t=Ii.current;return t!==null&&(t.flags|=32),aa}function Mi(t,n,s){(t===Xn&&(Mn===2||Mn===9)||t.cancelPendingCommit!==null)&&(_s(t,0),Co(t,_n,aa,!1)),ft(t,s),((Hn&2)===0||t!==Xn)&&(t===Xn&&((Hn&2)===0&&(vs|=s),ui===4&&Co(t,_n,aa,!1)),oo(t))}function dd(t,n,s){if((Hn&6)!==0)throw Error(a(327));var p=!s&&(n&124)===0&&(n&t.expiredLanes)===0||or(t,n),E=p?Jg(t,n):Fh(t,n,!0),N=p;do{if(E===0){_a&&!p&&Co(t,n,0,!1);break}else{if(s=t.current.alternate,N&&!pd(s)){E=Fh(t,n,!1),N=!1;continue}if(E===2){if(N=n,t.errorRecoveryDisabledLanes&N)var Z=0;else Z=t.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){n=Z;e:{var ce=t;E=Kc;var Be=ce.current.memoizedState.isDehydrated;if(Be&&(_s(ce,Z).flags|=256),Z=Fh(ce,Z,!1),Z!==2){if($c&&!Be){ce.errorRecoveryDisabledLanes|=N,vs|=N,E=4;break e}N=Wi,Wi=E,N!==null&&(Wi===null?Wi=N:Wi.push.apply(Wi,N))}E=Z}if(N=!1,E!==2)continue}}if(E===1){_s(t,0),Co(t,n,0,!0);break}e:{switch(p=t,N=E,N){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Co(p,n,aa,!ao);break e;case 2:Wi=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(E=ud+300-Ce(),10<E)){if(Co(p,n,aa,!ao),jr(p,0,!0)!==0)break e;p.timeoutHandle=jn(hd.bind(null,p,s,Wi,fu,bs,n,aa,vs,Sl,ao,N,2,-0,0),E);break e}hd(p,s,Wi,fu,bs,n,aa,vs,Sl,ao,N,0,-0,0)}}break}while(!0);oo(t)}function hd(t,n,s,p,E,N,Z,ce,Be,mt,Ft,Bt,_t,At){if(t.timeoutHandle=-1,Bt=n.subtreeFlags,(Bt&8192||(Bt&16785408)===16785408)&&(Yh={stylesheets:null,count:0,unsuspend:KR},xh(n),Bt=qR(),Bt!==null)){t.cancelPendingCommit=Bt(ey.bind(null,t,n,N,s,p,E,Z,ce,Be,Ft,1,_t,At)),Co(t,N,Z,!mt);return}ey(t,n,N,s,p,E,Z,ce,Be)}function pd(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var p=0;p<s.length;p++){var E=s[p],N=E.getSnapshot;E=E.value;try{if(!Oi(N(),E))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Co(t,n,s,p){n&=~ld,n&=~vs,t.suspendedLanes|=n,t.pingedLanes&=~n,p&&(t.warmLanes|=n),p=t.expirationTimes;for(var E=n;0<E;){var N=31-V(E),Z=1<<N;p[N]=-1,E&=~Z}s!==0&&zt(t,s,n)}function hu(){return(Hn&6)===0?(bu(0),!1):!0}function pu(){if(yn!==null){if(Mn===0)var t=yn.return;else t=yn,Do=qs=null,qi(t),ka=null,ra=0,t=yn;for(;t!==null;)mh(t.alternate,t),t=t.return;yn=null}}function _s(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,Er(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),pu(),Xn=t,yn=s=Da(t.current,null),_n=n,Mn=0,zi=null,ao=!1,_a=or(t,n),$c=!1,Sl=aa=ld=vs=To=ui=0,Wi=Kc=null,bs=!1,(n&8)!==0&&(n|=n&32);var p=t.entangledLanes;if(p!==0)for(t=t.entanglements,p&=n;0<p;){var E=31-V(p),N=1<<E;n|=t[E],p&=~N}return xo=n,Rf(),s}function Wg(t,n){an=null,Ne.H=So,n===to||n===Ws?(n=Ys(),Mn=3):n===Gl?(n=Ys(),Mn=4):Mn=n===Fm?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,zi=n,yn===null&&(ui=1,uh(t,Na(n,t.current)))}function Ph(){var t=Ne.H;return Ne.H=So,t===null?So:t}function gu(){var t=Ne.A;return Ne.A=Oh,t}function Nh(){ui=4,ao||(_n&4194048)!==_n&&Ii.current!==null||(_a=!0),(To&134217727)===0&&(vs&134217727)===0||Xn===null||Co(Xn,_n,aa,!1)}function Fh(t,n,s){var p=Hn;Hn|=2;var E=Ph(),N=gu();(Xn!==t||_n!==n)&&(fu=null,_s(t,n)),n=!1;var Z=ui;e:do try{if(Mn!==0&&yn!==null){var ce=yn,Be=zi;switch(Mn){case 8:pu(),Z=6;break e;case 3:case 2:case 9:case 6:Ii.current===null&&(n=!0);var mt=Mn;if(Mn=0,zi=null,yu(t,ce,Be,mt),s&&_a){Z=0;break e}break;default:mt=Mn,Mn=0,zi=null,yu(t,ce,Be,mt)}}gd(),Z=ui;break}catch(Ft){Wg(t,Ft)}while(!0);return n&&t.shellSuspendCounter++,Do=qs=null,Hn=p,Ne.H=E,Ne.A=N,yn===null&&(Xn=null,_n=0,Rf()),Z}function gd(){for(;yn!==null;)Qg(yn)}function Jg(t,n){var s=Hn;Hn|=2;var p=Ph(),E=gu();Xn!==t||_n!==n?(fu=null,Go=Ce()+500,_s(t,n)):_a=or(t,n);e:do try{if(Mn!==0&&yn!==null){n=yn;var N=zi;t:switch(Mn){case 1:Mn=0,zi=null,yu(t,n,N,1);break;case 2:case 9:if(Js(N)){Mn=0,zi=null,Xg(n);break}n=function(){Mn!==2&&Mn!==9||Xn!==t||(Mn=7),oo(t)},N.then(n,n);break e;case 3:Mn=7;break e;case 4:Mn=5;break e;case 7:Js(N)?(Mn=0,zi=null,Xg(n)):(Mn=0,zi=null,yu(t,n,N,7));break;case 5:var Z=null;switch(yn.tag){case 26:Z=yn.memoizedState;case 5:case 27:var ce=yn;if(!Z||Qb(Z)){Mn=0,zi=null;var Be=ce.sibling;if(Be!==null)yn=Be;else{var mt=ce.return;mt!==null?(yn=mt,Wc(mt)):yn=null}break t}}Mn=0,zi=null,yu(t,n,N,5);break;case 6:Mn=0,zi=null,yu(t,n,N,6);break;case 8:pu(),ui=6;break e;default:throw Error(a(462))}}Yg();break}catch(Ft){Wg(t,Ft)}while(!0);return Do=qs=null,Ne.H=p,Ne.A=E,Hn=s,yn!==null?0:(Xn=null,_n=0,Rf(),ui)}function Yg(){for(;yn!==null&&!re();)Qg(yn)}function Qg(t){var n=yh(t.alternate,t,xo);t.memoizedProps=t.pendingProps,n===null?Wc(t):yn=n}function Xg(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=fh(s,n,n.pendingProps,n.type,void 0,_n);break;case 11:n=fh(s,n,n.pendingProps,n.type.render,n.ref,_n);break;case 5:qi(n);default:mh(s,n),n=yn=qd(n,xo),n=yh(s,n,xo)}t.memoizedProps=t.pendingProps,n===null?Wc(t):yn=n}function yu(t,n,s,p){Do=qs=null,qi(n),ka=null,ra=0;var E=n.return;try{if(jb(t,E,n,s,_n)){ui=1,uh(t,Na(s,t.current)),yn=null;return}}catch(N){if(E!==null)throw yn=E,N;ui=1,uh(t,Na(s,t.current)),yn=null;return}n.flags&32768?(Nn||p===1?t=!0:_a||(_n&536870912)!==0?t=!1:(ao=t=!0,(p===2||p===9||p===3||p===6)&&(p=Ii.current,p!==null&&p.tag===13&&(p.flags|=16384))),Zg(n,t)):Wc(n)}function Wc(t){var n=t;do{if((n.flags&32768)!==0){Zg(n,ao);return}t=n.return;var s=Zf(n.alternate,n,xo);if(s!==null){yn=s;return}if(n=n.sibling,n!==null){yn=n;return}yn=n=t}while(n!==null);ui===0&&(ui=5)}function Zg(t,n){do{var s=Kg(t.alternate,t);if(s!==null){s.flags&=32767,yn=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){yn=t;return}yn=t=s}while(t!==null);ui=6,yn=null}function ey(t,n,s,p,E,N,Z,ce,Be){t.cancelPendingCommit=null;do Al();while(Ti!==0);if((Hn&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(N=n.lanes|n.childLanes,N|=Af,Xt(t,s,N,Z,ce,Be),t===Xn&&(yn=Xn=null,_n=0),du=n,qo=t,El=s,Gc=N,Ih=E,cd=p,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Bm(Ct,function(){return mu(),null})):(t.callbackNode=null,t.callbackPriority=0),p=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||p){p=Ne.T,Ne.T=null,E=yt.p,yt.p=2,Z=Hn,Hn|=4;try{Gg(t,n,s)}finally{Hn=Z,yt.p=E,Ne.T=p}}Ti=1,Dh(),yd(),Uh()}}function Dh(){if(Ti===1){Ti=0;var t=qo,n=du,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=Ne.T,Ne.T=null;var p=yt.p;yt.p=2;var E=Hn;Hn|=4;try{Ah(n,t);var N=Mt,Z=Pa(t.containerInfo),ce=N.focusedElem,Be=N.selectionRange;if(Z!==ce&&ce&&ce.ownerDocument&&Hd(ce.ownerDocument.documentElement,ce)){if(Be!==null&&jd(ce)){var mt=Be.start,Ft=Be.end;if(Ft===void 0&&(Ft=mt),"selectionStart"in ce)ce.selectionStart=mt,ce.selectionEnd=Math.min(Ft,ce.value.length);else{var Bt=ce.ownerDocument||document,_t=Bt&&Bt.defaultView||window;if(_t.getSelection){var At=_t.getSelection(),zr=ce.textContent.length,Hr=Math.min(Be.start,zr),Zn=Be.end===void 0?Hr:Math.min(Be.end,zr);!At.extend&&Hr>Zn&&(Z=Zn,Zn=Hr,Hr=Z);var at=Ml(ce,Hr),Xe=Ml(ce,Zn);if(at&&Xe&&(At.rangeCount!==1||At.anchorNode!==at.node||At.anchorOffset!==at.offset||At.focusNode!==Xe.node||At.focusOffset!==Xe.offset)){var dt=Bt.createRange();dt.setStart(at.node,at.offset),At.removeAllRanges(),Hr>Zn?(At.addRange(dt),At.extend(Xe.node,Xe.offset)):(dt.setEnd(Xe.node,Xe.offset),At.addRange(dt))}}}}for(Bt=[],At=ce;At=At.parentNode;)At.nodeType===1&&Bt.push({element:At,left:At.scrollLeft,top:At.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<Bt.length;ce++){var Lt=Bt[ce];Lt.element.scrollLeft=Lt.left,Lt.element.scrollTop=Lt.top}}gy=!!Ye,Mt=Ye=null}finally{Hn=E,yt.p=p,Ne.T=s}}t.current=n,Ti=2}}function yd(){if(Ti===2){Ti=0;var t=qo,n=du,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=Ne.T,Ne.T=null;var p=yt.p;yt.p=2;var E=Hn;Hn|=4;try{id(t,n.alternate,n)}finally{Hn=E,yt.p=p,Ne.T=s}}Ti=3}}function Uh(){if(Ti===4||Ti===3){Ti=0,we();var t=qo,n=du,s=El,p=cd;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ti=5:(Ti=0,du=qo=null,md(t,t.pendingLanes));var E=t.pendingLanes;if(E===0&&(ws=null),ue(s),n=n.stateNode,Q&&typeof Q.onCommitFiberRoot=="function")try{Q.onCommitFiberRoot(ut,n,void 0,(n.current.flags&128)===128)}catch{}if(p!==null){n=Ne.T,E=yt.p,yt.p=2,Ne.T=null;try{for(var N=t.onRecoverableError,Z=0;Z<p.length;Z++){var ce=p[Z];N(ce.value,{componentStack:ce.stack})}}finally{Ne.T=n,yt.p=E}}(El&3)!==0&&Al(),oo(t),E=t.pendingLanes,(s&4194090)!==0&&(E&42)!==0?t===zc?qc++:(qc=0,zc=t):qc=0,bu(0)}}function md(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Kl(n)))}function Al(t){return Dh(),yd(),Uh(),mu()}function mu(){if(Ti!==5)return!1;var t=qo,n=Gc;Gc=0;var s=ue(El),p=Ne.T,E=yt.p;try{yt.p=32>s?32:s,Ne.T=null,s=Ih,Ih=null;var N=qo,Z=El;if(Ti=0,du=qo=null,El=0,(Hn&6)!==0)throw Error(a(331));var ce=Hn;if(Hn|=4,Ch(N.current),_l(N,N.current,Z,s),Hn=ce,bu(0,!1),Q&&typeof Q.onPostCommitFiberRoot=="function")try{Q.onPostCommitFiberRoot(ut,N)}catch{}return!0}finally{yt.p=E,Ne.T=p,md(t,n)}}function vd(t,n,s){n=Na(s,n),n=Bg(t.stateNode,n,2),t=vo(t,n,2),t!==null&&(ft(t,2),oo(t))}function Kn(t,n,s){if(t.tag===3)vd(t,t,s);else for(;n!==null;){if(n.tag===3){vd(n,t,s);break}else if(n.tag===1){var p=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ws===null||!ws.has(p))){t=Na(s,t),s=Hg(2),p=vo(n,s,2),p!==null&&(jg(s,p,n,t),ft(p,2),oo(p));break}}n=n.return}}function bd(t,n,s){var p=t.pingCache;if(p===null){p=t.pingCache=new Mm;var E=new Set;p.set(n,E)}else E=p.get(n),E===void 0&&(E=new Set,p.set(n,E));E.has(s)||($c=!0,E.add(s),t=Lh.bind(null,t,n,s),n.then(t,t))}function Lh(t,n,s){var p=t.pingCache;p!==null&&p.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Xn===t&&(_n&s)===s&&(ui===4||ui===3&&(_n&62914560)===_n&&300>Ce()-ud?(Hn&2)===0&&_s(t,0):ld|=s,Sl===_n&&(Sl=0)),oo(t)}function Mh(t,n){n===0&&(n=st()),t=pa(t,n),t!==null&&(ft(t,n),oo(t))}function ty(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),Mh(t,s)}function km(t,n){var s=0;switch(t.tag){case 13:var p=t.stateNode,E=t.memoizedState;E!==null&&(s=E.retryLane);break;case 19:p=t.stateNode;break;case 22:p=t.stateNode._retryCache;break;default:throw Error(a(314))}p!==null&&p.delete(n),Mh(t,s)}function Bm(t,n){return D(t,n)}var Jc=null,vu=null,kh=!1,Yc=!1,Bh=!1,Rl=0;function oo(t){t!==vu&&t.next===null&&(vu===null?Jc=vu=t:vu=vu.next=t),Yc=!0,kh||(kh=!0,Hm())}function bu(t,n){if(!Bh&&Yc){Bh=!0;do for(var s=!1,p=Jc;p!==null;){if(t!==0){var E=p.pendingLanes;if(E===0)var N=0;else{var Z=p.suspendedLanes,ce=p.pingedLanes;N=(1<<31-V(42|t)+1)-1,N&=E&~(Z&~ce),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(s=!0,Hh(p,N))}else N=_n,N=jr(p,p===Xn?N:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(N&3)===0||or(p,N)||(s=!0,Hh(p,N));p=p.next}while(s);Bh=!1}}function wd(){ry()}function ry(){Yc=kh=!1;var t=0;Rl!==0&&(Va()&&(t=Rl),Rl=0);for(var n=Ce(),s=null,p=Jc;p!==null;){var E=p.next,N=ny(p,n);N===0?(p.next=null,s===null?Jc=E:s.next=E,E===null&&(vu=s)):(s=p,(t!==0||(N&3)!==0)&&(Yc=!0)),p=E}bu(t)}function ny(t,n){for(var s=t.suspendedLanes,p=t.pingedLanes,E=t.expirationTimes,N=t.pendingLanes&-62914561;0<N;){var Z=31-V(N),ce=1<<Z,Be=E[Z];Be===-1?((ce&s)===0||(ce&p)!==0)&&(E[Z]=$e(ce,n)):Be<=n&&(t.expiredLanes|=ce),N&=~ce}if(n=Xn,s=_n,s=jr(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),p=t.callbackNode,s===0||t===n&&(Mn===2||Mn===9)||t.cancelPendingCommit!==null)return p!==null&&p!==null&&G(p),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||or(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(p!==null&&G(p),ue(s)){case 2:case 8:s=pt;break;case 32:s=Ct;break;case 268435456:s=We;break;default:s=Ct}return p=wu.bind(null,t),s=D(s,p),t.callbackPriority=n,t.callbackNode=s,n}return p!==null&&p!==null&&G(p),t.callbackPriority=2,t.callbackNode=null,2}function wu(t,n){if(Ti!==0&&Ti!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Al()&&t.callbackNode!==s)return null;var p=_n;return p=jr(t,t===Xn?p:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),p===0?null:(dd(t,p,n),ny(t,Ce()),t.callbackNode!=null&&t.callbackNode===s?wu.bind(null,t):null)}function Hh(t,n){if(Al())return null;dd(t,n,!0)}function Hm(){wi(function(){(Hn&6)!==0?D(Re,wd):ry()})}function jh(){return Rl===0&&(Rl=vt()),Rl}function iy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:qr(""+t)}function ay(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function oy(t,n,s,p,E){if(n==="submit"&&s&&s.stateNode===E){var N=iy((E[Zt]||null).action),Z=p.submitter;Z&&(n=(n=Z[Zt]||null)?iy(n.formAction):Z.getAttribute("formAction"),n!==null&&(N=n,Z=null));var ce=new Ca("action","action",null,p,E);t.push({event:ce,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Rl!==0){var Be=Z?ay(E,Z):new FormData(E);Hf(s,{pending:!0,data:Be,method:E.method,action:N},null,Be)}}else typeof N=="function"&&(ce.preventDefault(),Be=Z?ay(E,Z):new FormData(E),Hf(s,{pending:!0,data:Be,method:E.method,action:N},N,Be))},currentTarget:E}]})}}for(var Qc=0;Qc<Ef.length;Qc++){var Vh=Ef[Qc],sy=Vh.toLowerCase(),ly=Vh[0].toUpperCase()+Vh.slice(1);Qa(sy,"on"+ly)}Qa(es,"onAnimationEnd"),Qa(ts,"onAnimationIteration"),Qa(Ng,"onAnimationStart"),Qa("dblclick","onDoubleClick"),Qa("focusin","onFocus"),Qa("focusout","onBlur"),Qa(Rm,"onTransitionRun"),Qa(xm,"onTransitionStart"),Qa(Pn,"onTransitionCancel"),Qa($d,"onTransitionEnd"),Ur("onMouseEnter",["mouseout","mouseover"]),Ur("onMouseLeave",["mouseout","mouseover"]),Ur("onPointerEnter",["pointerout","pointerover"]),Ur("onPointerLeave",["pointerout","pointerover"]),cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xc));function $h(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var p=t[s],E=p.event;p=p.listeners;e:{var N=void 0;if(n)for(var Z=p.length-1;0<=Z;Z--){var ce=p[Z],Be=ce.instance,mt=ce.currentTarget;if(ce=ce.listener,Be!==N&&E.isPropagationStopped())break e;N=ce,E.currentTarget=mt;try{N(E)}catch(Ft){qf(Ft)}E.currentTarget=null,N=Be}else for(Z=0;Z<p.length;Z++){if(ce=p[Z],Be=ce.instance,mt=ce.currentTarget,ce=ce.listener,Be!==N&&E.isPropagationStopped())break e;N=ce,E.currentTarget=mt;try{N(E)}catch(Ft){qf(Ft)}E.currentTarget=null,N=Be}}}}function vn(t,n){var s=n[Fr];s===void 0&&(s=n[Fr]=new Set);var p=t+"__bubble";s.has(p)||(uy(n,t,2,!1),s.add(p))}function Kh(t,n,s){var p=0;n&&(p|=4),uy(s,t,p,n)}var _d="_reactListening"+Math.random().toString(36).slice(2);function Gh(t){if(!t[_d]){t[_d]=!0,Yr.forEach(function(s){s!=="selectionchange"&&(Zc.has(s)||Kh(s,!1,t),Kh(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[_d]||(n[_d]=!0,Kh("selectionchange",!1,n))}}function uy(t,n,s,p){switch(nw(n)){case 2:var E=JR;break;case 8:E=YR;break;default:E=Gm}s=E.bind(null,n,s,t),E=void 0,!bn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(E=!0),p?E!==void 0?t.addEventListener(n,s,{capture:!0,passive:E}):t.addEventListener(n,s,!0):E!==void 0?t.addEventListener(n,s,{passive:E}):t.addEventListener(n,s,!1)}function qh(t,n,s,p,E){var N=p;if((n&1)===0&&(n&2)===0&&p!==null)e:for(;;){if(p===null)return;var Z=p.tag;if(Z===3||Z===4){var ce=p.stateNode.containerInfo;if(ce===E)break;if(Z===4)for(Z=p.return;Z!==null;){var Be=Z.tag;if((Be===3||Be===4)&&Z.stateNode.containerInfo===E)return;Z=Z.return}for(;ce!==null;){if(Z=Ar(ce),Z===null)return;if(Be=Z.tag,Be===5||Be===6||Be===26||Be===27){p=N=Z;continue e}ce=ce.parentNode}}p=p.return}Cn(function(){var mt=N,Ft=pr(s),Bt=[];e:{var _t=Kd.get(t);if(_t!==void 0){var At=Ca,zr=t;switch(t){case"keypress":if(Ki(s)===0)break e;case"keydown":case"keyup":At=Qt;break;case"focusin":zr="focus",At=Rt;break;case"focusout":zr="blur",At=Rt;break;case"beforeblur":case"afterblur":At=Rt;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=fe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=ye;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=Wr;break;case es:case ts:case Ng:At=It;break;case $d:At=Ir;break;case"scroll":case"scrollend":At=Xo;break;case"wheel":At=Lr;break;case"copy":case"cut":case"paste":At=Vt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=hr;break;case"toggle":case"beforetoggle":At=ln}var Hr=(n&4)!==0,Zn=!Hr&&(t==="scroll"||t==="scrollend"),at=Hr?_t!==null?_t+"Capture":null:_t;Hr=[];for(var Xe=mt,dt;Xe!==null;){var Lt=Xe;if(dt=Lt.stateNode,Lt=Lt.tag,Lt!==5&&Lt!==26&&Lt!==27||dt===null||at===null||(Lt=Qr(Xe,at),Lt!=null&&Hr.push(ef(Xe,Lt,dt))),Zn)break;Xe=Xe.return}0<Hr.length&&(_t=new At(_t,zr,null,s,Ft),Bt.push({event:_t,listeners:Hr}))}}if((n&7)===0){e:{if(_t=t==="mouseover"||t==="pointerover",At=t==="mouseout"||t==="pointerout",_t&&s!==lr&&(zr=s.relatedTarget||s.fromElement)&&(Ar(zr)||zr[rr]))break e;if((At||_t)&&(_t=Ft.window===Ft?Ft:(_t=Ft.ownerDocument)?_t.defaultView||_t.parentWindow:window,At?(zr=s.relatedTarget||s.toElement,At=mt,zr=zr?Ar(zr):null,zr!==null&&(Zn=d(zr),Hr=zr.tag,zr!==Zn||Hr!==5&&Hr!==27&&Hr!==6)&&(zr=null)):(At=null,zr=mt),At!==zr)){if(Hr=fe,Lt="onMouseLeave",at="onMouseEnter",Xe="mouse",(t==="pointerout"||t==="pointerover")&&(Hr=hr,Lt="onPointerLeave",at="onPointerEnter",Xe="pointer"),Zn=At==null?_t:gr(At),dt=zr==null?_t:gr(zr),_t=new Hr(Lt,Xe+"leave",At,s,Ft),_t.target=Zn,_t.relatedTarget=dt,Lt=null,Ar(Ft)===mt&&(Hr=new Hr(at,Xe+"enter",zr,s,Ft),Hr.target=dt,Hr.relatedTarget=Zn,Lt=Hr),Zn=Lt,At&&zr)t:{for(Hr=At,at=zr,Xe=0,dt=Hr;dt;dt=_u(dt))Xe++;for(dt=0,Lt=at;Lt;Lt=_u(Lt))dt++;for(;0<Xe-dt;)Hr=_u(Hr),Xe--;for(;0<dt-Xe;)at=_u(at),dt--;for(;Xe--;){if(Hr===at||at!==null&&Hr===at.alternate)break t;Hr=_u(Hr),at=_u(at)}Hr=null}else Hr=null;At!==null&&c(Bt,_t,At,Hr,!1),zr!==null&&Zn!==null&&c(Bt,Zn,zr,Hr,!0)}}e:{if(_t=mt?gr(mt):window,At=_t.nodeName&&_t.nodeName.toLowerCase(),At==="select"||At==="input"&&_t.type==="file")var Sr=Fo;else if(Fs(_t))if(Ll)Sr=qu;else{Sr=Ls;var Sn=bf}else At=_t.nodeName,!At||At.toLowerCase()!=="input"||_t.type!=="checkbox"&&_t.type!=="radio"?mt&&Et(mt.elementType)&&(Sr=Fo):Sr=ii;if(Sr&&(Sr=Sr(t,mt))){Gu(Bt,Sr,s,Ft);break e}Sn&&Sn(t,_t,mt),t==="focusout"&&mt&&_t.type==="number"&&mt.memoizedProps.value!=null&&it(_t,"number",_t.value)}switch(Sn=mt?gr(mt):window,t){case"focusin":(Fs(Sn)||Sn.contentEditable==="true")&&(Gi=Sn,_f=mt,kl=null);break;case"focusout":kl=_f=Gi=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,ha(Bt,s,Ft);break;case"selectionchange":if(Pg)break;case"keydown":case"keyup":ha(Bt,s,Ft)}var Or;if(_r)e:{switch(t){case"compositionstart":var $r="onCompositionStart";break e;case"compositionend":$r="onCompositionEnd";break e;case"compositionupdate":$r="onCompositionUpdate";break e}$r=void 0}else $n?Ln(t,s)&&($r="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&($r="onCompositionStart");$r&&(gi&&s.locale!=="ko"&&($n||$r!=="onCompositionStart"?$r==="onCompositionEnd"&&$n&&(Or=On()):(Vn=Ft,xi="value"in Vn?Vn.value:Vn.textContent,$n=!0)),Sn=Sd(mt,$r),0<Sn.length&&($r=new Ut($r,t,null,s,Ft),Bt.push({event:$r,listeners:Sn}),Or?$r.data=Or:(Or=Xr(s),Or!==null&&($r.data=Or)))),(Or=Wn?nn(t,s):Oa(t,s))&&($r=Sd(mt,"onBeforeInput"),0<$r.length&&(Sn=new Ut("onBeforeInput","beforeinput",null,s,Ft),Bt.push({event:Sn,listeners:$r}),Sn.data=Or)),oy(Bt,t,mt,s,Ft)}$h(Bt,n)})}function ef(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Sd(t,n){for(var s=n+"Capture",p=[];t!==null;){var E=t,N=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||N===null||(E=Qr(t,s),E!=null&&p.unshift(ef(t,E,N)),E=Qr(t,n),E!=null&&p.push(ef(t,E,N))),t.tag===3)return p;t=t.return}return[]}function _u(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function c(t,n,s,p,E){for(var N=n._reactName,Z=[];s!==null&&s!==p;){var ce=s,Be=ce.alternate,mt=ce.stateNode;if(ce=ce.tag,Be!==null&&Be===p)break;ce!==5&&ce!==26&&ce!==27||mt===null||(Be=mt,E?(mt=Qr(s,N),mt!=null&&Z.unshift(ef(s,mt,Be))):E||(mt=Qr(s,N),mt!=null&&Z.push(ef(s,mt,Be)))),s=s.return}Z.length!==0&&t.push({event:n,listeners:Z})}var g=/\r\n?/g,w=/\u0000|\uFFFD/g;function I(t){return(typeof t=="string"?t:""+t).replace(g,`
`).replace(w,"")}function L(t,n){return n=I(n),I(t)===n}function z(){}function ee(t,n,s,p,E,N){switch(s){case"children":typeof p=="string"?n==="body"||n==="textarea"&&p===""||_e(t,p):(typeof p=="number"||typeof p=="bigint")&&n!=="body"&&_e(t,""+p);break;case"className":$i(t,"class",p);break;case"tabIndex":$i(t,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":$i(t,s,p);break;case"style":ct(t,p,N);break;case"data":if(n!=="object"){$i(t,"data",p);break}case"src":case"href":if(p===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){t.removeAttribute(s);break}p=qr(""+p),t.setAttribute(s,p);break;case"action":case"formAction":if(typeof p=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(s==="formAction"?(n!=="input"&&ee(t,n,"name",E.name,E,null),ee(t,n,"formEncType",E.formEncType,E,null),ee(t,n,"formMethod",E.formMethod,E,null),ee(t,n,"formTarget",E.formTarget,E,null)):(ee(t,n,"encType",E.encType,E,null),ee(t,n,"method",E.method,E,null),ee(t,n,"target",E.target,E,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){t.removeAttribute(s);break}p=qr(""+p),t.setAttribute(s,p);break;case"onClick":p!=null&&(t.onclick=z);break;case"onScroll":p!=null&&vn("scroll",t);break;case"onScrollEnd":p!=null&&vn("scrollend",t);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(a(61));if(s=p.__html,s!=null){if(E.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":t.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){t.removeAttribute("xlink:href");break}s=qr(""+p),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?t.setAttribute(s,""+p):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":p===!0?t.setAttribute(s,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?t.setAttribute(s,p):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?t.setAttribute(s,p):t.removeAttribute(s);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?t.removeAttribute(s):t.setAttribute(s,p);break;case"popover":vn("beforetoggle",t),vn("toggle",t),Rn(t,"popover",p);break;case"xlinkActuate":di(t,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":di(t,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":di(t,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":di(t,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":di(t,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":di(t,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":di(t,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":di(t,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":di(t,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Rn(t,"is",p);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=fr.get(s)||s,Rn(t,s,p))}}function de(t,n,s,p,E,N){switch(s){case"style":ct(t,p,N);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(a(61));if(s=p.__html,s!=null){if(E.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof p=="string"?_e(t,p):(typeof p=="number"||typeof p=="bigint")&&_e(t,""+p);break;case"onScroll":p!=null&&vn("scroll",t);break;case"onScrollEnd":p!=null&&vn("scrollend",t);break;case"onClick":p!=null&&(t.onclick=z);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tn.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(E=s.endsWith("Capture"),n=s.slice(2,E?s.length-7:void 0),N=t[Zt]||null,N=N!=null?N[s]:null,typeof N=="function"&&t.removeEventListener(n,N,E),typeof p=="function")){typeof N!="function"&&N!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,p,E);break e}s in t?t[s]=p:p===!0?t.setAttribute(s,""):Rn(t,s,p)}}}function ke(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vn("error",t),vn("load",t);var p=!1,E=!1,N;for(N in s)if(s.hasOwnProperty(N)){var Z=s[N];if(Z!=null)switch(N){case"src":p=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ee(t,n,N,Z,s,null)}}E&&ee(t,n,"srcSet",s.srcSet,s,null),p&&ee(t,n,"src",s.src,s,null);return;case"input":vn("invalid",t);var ce=N=Z=E=null,Be=null,mt=null;for(p in s)if(s.hasOwnProperty(p)){var Ft=s[p];if(Ft!=null)switch(p){case"name":E=Ft;break;case"type":Z=Ft;break;case"checked":Be=Ft;break;case"defaultChecked":mt=Ft;break;case"value":N=Ft;break;case"defaultValue":ce=Ft;break;case"children":case"dangerouslySetInnerHTML":if(Ft!=null)throw Error(a(137,n));break;default:ee(t,n,p,Ft,s,null)}}Ke(t,N,ce,Be,mt,Z,E,!1),be(t);return;case"select":vn("invalid",t),p=Z=N=null;for(E in s)if(s.hasOwnProperty(E)&&(ce=s[E],ce!=null))switch(E){case"value":N=ce;break;case"defaultValue":Z=ce;break;case"multiple":p=ce;default:ee(t,n,E,ce,s,null)}n=N,s=Z,t.multiple=!!p,n!=null?gt(t,!!p,n,!1):s!=null&&gt(t,!!p,s,!0);return;case"textarea":vn("invalid",t),N=E=p=null;for(Z in s)if(s.hasOwnProperty(Z)&&(ce=s[Z],ce!=null))switch(Z){case"value":p=ce;break;case"defaultValue":E=ce;break;case"children":N=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(91));break;default:ee(t,n,Z,ce,s,null)}ae(t,p,E,N),be(t);return;case"option":for(Be in s)if(s.hasOwnProperty(Be)&&(p=s[Be],p!=null))switch(Be){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:ee(t,n,Be,p,s,null)}return;case"dialog":vn("beforetoggle",t),vn("toggle",t),vn("cancel",t),vn("close",t);break;case"iframe":case"object":vn("load",t);break;case"video":case"audio":for(p=0;p<Xc.length;p++)vn(Xc[p],t);break;case"image":vn("error",t),vn("load",t);break;case"details":vn("toggle",t);break;case"embed":case"source":case"link":vn("error",t),vn("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(mt in s)if(s.hasOwnProperty(mt)&&(p=s[mt],p!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ee(t,n,mt,p,s,null)}return;default:if(Et(n)){for(Ft in s)s.hasOwnProperty(Ft)&&(p=s[Ft],p!==void 0&&de(t,n,Ft,p,s,void 0));return}}for(ce in s)s.hasOwnProperty(ce)&&(p=s[ce],p!=null&&ee(t,n,ce,p,s,null))}function Ve(t,n,s,p){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,N=null,Z=null,ce=null,Be=null,mt=null,Ft=null;for(At in s){var Bt=s[At];if(s.hasOwnProperty(At)&&Bt!=null)switch(At){case"checked":break;case"value":break;case"defaultValue":Be=Bt;default:p.hasOwnProperty(At)||ee(t,n,At,null,p,Bt)}}for(var _t in p){var At=p[_t];if(Bt=s[_t],p.hasOwnProperty(_t)&&(At!=null||Bt!=null))switch(_t){case"type":N=At;break;case"name":E=At;break;case"checked":mt=At;break;case"defaultChecked":Ft=At;break;case"value":Z=At;break;case"defaultValue":ce=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(a(137,n));break;default:At!==Bt&&ee(t,n,_t,At,p,Bt)}}De(t,Z,ce,Be,mt,Ft,N,E);return;case"select":At=Z=ce=_t=null;for(N in s)if(Be=s[N],s.hasOwnProperty(N)&&Be!=null)switch(N){case"value":break;case"multiple":At=Be;default:p.hasOwnProperty(N)||ee(t,n,N,null,p,Be)}for(E in p)if(N=p[E],Be=s[E],p.hasOwnProperty(E)&&(N!=null||Be!=null))switch(E){case"value":_t=N;break;case"defaultValue":ce=N;break;case"multiple":Z=N;default:N!==Be&&ee(t,n,E,N,p,Be)}n=ce,s=Z,p=At,_t!=null?gt(t,!!s,_t,!1):!!p!=!!s&&(n!=null?gt(t,!!s,n,!0):gt(t,!!s,s?[]:"",!1));return;case"textarea":At=_t=null;for(ce in s)if(E=s[ce],s.hasOwnProperty(ce)&&E!=null&&!p.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:ee(t,n,ce,null,p,E)}for(Z in p)if(E=p[Z],N=s[Z],p.hasOwnProperty(Z)&&(E!=null||N!=null))switch(Z){case"value":_t=E;break;case"defaultValue":At=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:E!==N&&ee(t,n,Z,E,p,N)}St(t,_t,At);return;case"option":for(var zr in s)if(_t=s[zr],s.hasOwnProperty(zr)&&_t!=null&&!p.hasOwnProperty(zr))switch(zr){case"selected":t.selected=!1;break;default:ee(t,n,zr,null,p,_t)}for(Be in p)if(_t=p[Be],At=s[Be],p.hasOwnProperty(Be)&&_t!==At&&(_t!=null||At!=null))switch(Be){case"selected":t.selected=_t&&typeof _t!="function"&&typeof _t!="symbol";break;default:ee(t,n,Be,_t,p,At)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Hr in s)_t=s[Hr],s.hasOwnProperty(Hr)&&_t!=null&&!p.hasOwnProperty(Hr)&&ee(t,n,Hr,null,p,_t);for(mt in p)if(_t=p[mt],At=s[mt],p.hasOwnProperty(mt)&&_t!==At&&(_t!=null||At!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(a(137,n));break;default:ee(t,n,mt,_t,p,At)}return;default:if(Et(n)){for(var Zn in s)_t=s[Zn],s.hasOwnProperty(Zn)&&_t!==void 0&&!p.hasOwnProperty(Zn)&&de(t,n,Zn,void 0,p,_t);for(Ft in p)_t=p[Ft],At=s[Ft],!p.hasOwnProperty(Ft)||_t===At||_t===void 0&&At===void 0||de(t,n,Ft,_t,p,At);return}}for(var at in s)_t=s[at],s.hasOwnProperty(at)&&_t!=null&&!p.hasOwnProperty(at)&&ee(t,n,at,null,p,_t);for(Bt in p)_t=p[Bt],At=s[Bt],!p.hasOwnProperty(Bt)||_t===At||_t==null&&At==null||ee(t,n,Bt,_t,p,At)}var Ye=null,Mt=null;function Kt(t){return t.nodeType===9?t:t.ownerDocument}function nr(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pr(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function un(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Jr=null;function Va(){var t=window.event;return t&&t.type==="popstate"?t===Jr?!1:(Jr=t,!0):(Jr=null,!1)}var jn=typeof setTimeout=="function"?setTimeout:void 0,Er=typeof clearTimeout=="function"?clearTimeout:void 0,ki=typeof Promise=="function"?Promise:void 0,wi=typeof queueMicrotask=="function"?queueMicrotask:typeof ki<"u"?function(t){return ki.resolve(null).then(t).catch(oa)}:jn;function oa(t){setTimeout(function(){throw t})}function Bi(t){return t==="head"}function Ss(t,n){var s=n,p=0,E=0;do{var N=s.nextSibling;if(t.removeChild(s),N&&N.nodeType===8)if(s=N.data,s==="/$"){if(0<p&&8>p){s=p;var Z=t.ownerDocument;if(s&1&&zh(Z.documentElement),s&2&&zh(Z.body),s&4)for(s=Z.head,zh(s),Z=s.firstChild;Z;){var ce=Z.nextSibling,Be=Z.nodeName;Z[ar]||Be==="SCRIPT"||Be==="STYLE"||Be==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||s.removeChild(Z),Z=ce}}if(E===0){t.removeChild(N),tp(n);return}E--}else s==="$"||s==="$?"||s==="$!"?E++:p=s.charCodeAt(0)-48;else p=0;s=N}while(s);tp(n)}function so(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":so(s),Dr(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function tf(t,n,s,p){for(;t.nodeType===1;){var E=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!p&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(p){if(!t[ar])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(N=t.getAttribute("rel"),N==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(N!==E.rel||t.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||t.getAttribute("title")!==(E.title==null?null:E.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(N=t.getAttribute("src"),(N!==(E.src==null?null:E.src)||t.getAttribute("type")!==(E.type==null?null:E.type)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&N&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var N=E.name==null?null:""+E.name;if(E.type==="hidden"&&t.getAttribute("name")===N)return t}else return t;if(t=on(t.nextSibling),t===null)break}return null}function rf(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=on(t.nextSibling),t===null))return null;return t}function xl(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Cr(t,n){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")n();else{var p=function(){n(),s.removeEventListener("DOMContentLoaded",p)};s.addEventListener("DOMContentLoaded",p),t._reactRetry=p}}function on(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var zo=null;function Vb(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return t;n--}else s==="/$"&&n++}t=t.previousSibling}return null}function $b(t,n,s){switch(n=Kt(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function zh(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Dr(t)}var Oo=new Map,Kb=new Set;function cy(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Tl=yt.d;yt.d={f:FR,r:DR,D:UR,C:LR,L:MR,m:kR,X:HR,S:BR,M:jR};function FR(){var t=Tl.f(),n=hu();return t||n}function DR(t){var n=Gr(t);n!==null&&n.tag===5&&n.type==="form"?jf(n):Tl.r(t)}var Ed=typeof document>"u"?null:document;function Gb(t,n,s){var p=Ed;if(p&&typeof n=="string"&&n){var E=Ae(n);E='link[rel="'+t+'"][href="'+E+'"]',typeof s=="string"&&(E+='[crossorigin="'+s+'"]'),Kb.has(E)||(Kb.add(E),t={rel:t,crossOrigin:s,href:n},p.querySelector(E)===null&&(n=p.createElement("link"),ke(n,"link",t),Gt(n),p.head.appendChild(n)))}}function UR(t){Tl.D(t),Gb("dns-prefetch",t,null)}function LR(t,n){Tl.C(t,n),Gb("preconnect",t,n)}function MR(t,n,s){Tl.L(t,n,s);var p=Ed;if(p&&t&&n){var E='link[rel="preload"][as="'+Ae(n)+'"]';n==="image"&&s&&s.imageSrcSet?(E+='[imagesrcset="'+Ae(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(E+='[imagesizes="'+Ae(s.imageSizes)+'"]')):E+='[href="'+Ae(t)+'"]';var N=E;switch(n){case"style":N=Ad(t);break;case"script":N=Rd(t)}Oo.has(N)||(t=y({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),Oo.set(N,t),p.querySelector(E)!==null||n==="style"&&p.querySelector(Wh(N))||n==="script"&&p.querySelector(Jh(N))||(n=p.createElement("link"),ke(n,"link",t),Gt(n),p.head.appendChild(n)))}}function kR(t,n){Tl.m(t,n);var s=Ed;if(s&&t){var p=n&&typeof n.as=="string"?n.as:"script",E='link[rel="modulepreload"][as="'+Ae(p)+'"][href="'+Ae(t)+'"]',N=E;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Rd(t)}if(!Oo.has(N)&&(t=y({rel:"modulepreload",href:t},n),Oo.set(N,t),s.querySelector(E)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Jh(N)))return}p=s.createElement("link"),ke(p,"link",t),Gt(p),s.head.appendChild(p)}}}function BR(t,n,s){Tl.S(t,n,s);var p=Ed;if(p&&t){var E=sr(p).hoistableStyles,N=Ad(t);n=n||"default";var Z=E.get(N);if(!Z){var ce={loading:0,preload:null};if(Z=p.querySelector(Wh(N)))ce.loading=5;else{t=y({rel:"stylesheet",href:t,"data-precedence":n},s),(s=Oo.get(N))&&jm(t,s);var Be=Z=p.createElement("link");Gt(Be),ke(Be,"link",t),Be._p=new Promise(function(mt,Ft){Be.onload=mt,Be.onerror=Ft}),Be.addEventListener("load",function(){ce.loading|=1}),Be.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,fy(Z,n,p)}Z={type:"stylesheet",instance:Z,count:1,state:ce},E.set(N,Z)}}}function HR(t,n){Tl.X(t,n);var s=Ed;if(s&&t){var p=sr(s).hoistableScripts,E=Rd(t),N=p.get(E);N||(N=s.querySelector(Jh(E)),N||(t=y({src:t,async:!0},n),(n=Oo.get(E))&&Vm(t,n),N=s.createElement("script"),Gt(N),ke(N,"link",t),s.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},p.set(E,N))}}function jR(t,n){Tl.M(t,n);var s=Ed;if(s&&t){var p=sr(s).hoistableScripts,E=Rd(t),N=p.get(E);N||(N=s.querySelector(Jh(E)),N||(t=y({src:t,async:!0,type:"module"},n),(n=Oo.get(E))&&Vm(t,n),N=s.createElement("script"),Gt(N),ke(N,"link",t),s.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},p.set(E,N))}}function qb(t,n,s,p){var E=(E=kt.current)?cy(E):null;if(!E)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Ad(s.href),s=sr(E).hoistableStyles,p=s.get(n),p||(p={type:"style",instance:null,count:0,state:null},s.set(n,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ad(s.href);var N=sr(E).hoistableStyles,Z=N.get(t);if(Z||(E=E.ownerDocument||E,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(t,Z),(N=E.querySelector(Wh(t)))&&!N._p&&(Z.instance=N,Z.state.loading=5),Oo.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Oo.set(t,s),N||VR(E,t,s,Z.state))),n&&p===null)throw Error(a(528,""));return Z}if(n&&p!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Rd(s),s=sr(E).hoistableScripts,p=s.get(n),p||(p={type:"script",instance:null,count:0,state:null},s.set(n,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Ad(t){return'href="'+Ae(t)+'"'}function Wh(t){return'link[rel="stylesheet"]['+t+"]"}function zb(t){return y({},t,{"data-precedence":t.precedence,precedence:null})}function VR(t,n,s,p){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?p.loading=1:(n=t.createElement("link"),p.preload=n,n.addEventListener("load",function(){return p.loading|=1}),n.addEventListener("error",function(){return p.loading|=2}),ke(n,"link",s),Gt(n),t.head.appendChild(n))}function Rd(t){return'[src="'+Ae(t)+'"]'}function Jh(t){return"script[async]"+t}function Wb(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var p=t.querySelector('style[data-href~="'+Ae(s.href)+'"]');if(p)return n.instance=p,Gt(p),p;var E=y({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return p=(t.ownerDocument||t).createElement("style"),Gt(p),ke(p,"style",E),fy(p,s.precedence,t),n.instance=p;case"stylesheet":E=Ad(s.href);var N=t.querySelector(Wh(E));if(N)return n.state.loading|=4,n.instance=N,Gt(N),N;p=zb(s),(E=Oo.get(E))&&jm(p,E),N=(t.ownerDocument||t).createElement("link"),Gt(N);var Z=N;return Z._p=new Promise(function(ce,Be){Z.onload=ce,Z.onerror=Be}),ke(N,"link",p),n.state.loading|=4,fy(N,s.precedence,t),n.instance=N;case"script":return N=Rd(s.src),(E=t.querySelector(Jh(N)))?(n.instance=E,Gt(E),E):(p=s,(E=Oo.get(N))&&(p=y({},s),Vm(p,E)),t=t.ownerDocument||t,E=t.createElement("script"),Gt(E),ke(E,"link",p),t.head.appendChild(E),n.instance=E);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(p=n.instance,n.state.loading|=4,fy(p,s.precedence,t));return n.instance}function fy(t,n,s){for(var p=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=p.length?p[p.length-1]:null,N=E,Z=0;Z<p.length;Z++){var ce=p[Z];if(ce.dataset.precedence===n)N=ce;else if(N!==E)break}N?N.parentNode.insertBefore(t,N.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function jm(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Vm(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var dy=null;function Jb(t,n,s){if(dy===null){var p=new Map,E=dy=new Map;E.set(s,p)}else E=dy,p=E.get(s),p||(p=new Map,E.set(s,p));if(p.has(t))return p;for(p.set(t,null),s=s.getElementsByTagName(t),E=0;E<s.length;E++){var N=s[E];if(!(N[ar]||N[Pt]||t==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=N.getAttribute(n)||"";Z=t+Z;var ce=p.get(Z);ce?ce.push(N):p.set(Z,[N])}}return p}function Yb(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function $R(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Qb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Yh=null;function KR(){}function GR(t,n,s){if(Yh===null)throw Error(a(475));var p=Yh;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var E=Ad(s.href),N=t.querySelector(Wh(E));if(N){t=N._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(p.count++,p=hy.bind(p),t.then(p,p)),n.state.loading|=4,n.instance=N,Gt(N);return}N=t.ownerDocument||t,s=zb(s),(E=Oo.get(E))&&jm(s,E),N=N.createElement("link"),Gt(N);var Z=N;Z._p=new Promise(function(ce,Be){Z.onload=ce,Z.onerror=Be}),ke(N,"link",s),n.instance=N}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(p.count++,n=hy.bind(p),t.addEventListener("load",n),t.addEventListener("error",n))}}function qR(){if(Yh===null)throw Error(a(475));var t=Yh;return t.stylesheets&&t.count===0&&$m(t,t.stylesheets),0<t.count?function(n){var s=setTimeout(function(){if(t.stylesheets&&$m(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s)}}:null}function hy(){if(this.count--,this.count===0){if(this.stylesheets)$m(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var py=null;function $m(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,py=new Map,n.forEach(zR,t),py=null,hy.call(t))}function zR(t,n){if(!(n.state.loading&4)){var s=py.get(t);if(s)var p=s.get(null);else{s=new Map,py.set(t,s);for(var E=t.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<E.length;N++){var Z=E[N];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(s.set(Z.dataset.precedence,Z),p=Z)}p&&s.set(null,p)}E=n.instance,Z=E.getAttribute("data-precedence"),N=s.get(Z)||p,N===p&&s.set(null,E),s.set(Z,E),this.count++,p=hy.bind(this),E.addEventListener("load",p),E.addEventListener("error",p),N?N.parentNode.insertBefore(E,N.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(E,t.firstChild)),n.state.loading|=4}}var Qh={$$typeof:P,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function WR(t,n,s,p,E,N,Z,ce){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Le(0),this.hiddenUpdates=Le(null),this.identifierPrefix=p,this.onUncaughtError=E,this.onCaughtError=N,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function Xb(t,n,s,p,E,N,Z,ce,Be,mt,Ft,Bt){return t=new WR(t,n,s,Z,ce,Be,mt,Bt),n=1,N===!0&&(n|=24),N=mi(3,null,null,n),t.current=N,N.stateNode=t,n=Si(),n.refCount++,t.pooledCache=n,n.refCount++,N.memoizedState={element:p,isDehydrated:s,cache:n},ro(N),t}function Zb(t){return t?(t=Hl,t):Hl}function ew(t,n,s,p,E,N){E=Zb(E),p.context===null?p.context=E:p.pendingContext=E,p=ma(n),p.payload={element:s},N=N===void 0?null:N,N!==null&&(p.callback=N),s=vo(t,p,n),s!==null&&(Mi(s,t,n),Mo(s,t,n))}function tw(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function Km(t,n){tw(t,n),(t=t.alternate)&&tw(t,n)}function rw(t){if(t.tag===13){var n=pa(t,67108864);n!==null&&Mi(n,t,67108864),Km(t,67108864)}}var gy=!0;function JR(t,n,s,p){var E=Ne.T;Ne.T=null;var N=yt.p;try{yt.p=2,Gm(t,n,s,p)}finally{yt.p=N,Ne.T=E}}function YR(t,n,s,p){var E=Ne.T;Ne.T=null;var N=yt.p;try{yt.p=8,Gm(t,n,s,p)}finally{yt.p=N,Ne.T=E}}function Gm(t,n,s,p){if(gy){var E=qm(p);if(E===null)qh(t,n,p,yy,s),iw(t,p);else if(XR(E,t,n,s,p))p.stopPropagation();else if(iw(t,p),n&4&&-1<QR.indexOf(t)){for(;E!==null;){var N=Gr(E);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var Z=Br(N.pendingLanes);if(Z!==0){var ce=N;for(ce.pendingLanes|=2,ce.entangledLanes|=2;Z;){var Be=1<<31-V(Z);ce.entanglements[1]|=Be,Z&=~Be}oo(N),(Hn&6)===0&&(Go=Ce()+500,bu(0))}}break;case 13:ce=pa(N,2),ce!==null&&Mi(ce,N,2),hu(),Km(N,2)}if(N=qm(p),N===null&&qh(t,n,p,yy,s),N===E)break;E=N}E!==null&&p.stopPropagation()}else qh(t,n,p,null,s)}}function qm(t){return t=pr(t),zm(t)}var yy=null;function zm(t){if(yy=null,t=Ar(t),t!==null){var n=d(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=l(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return yy=t,null}function nw(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ot()){case Re:return 2;case pt:return 8;case Ct:case bt:return 32;case We:return 268435456;default:return 32}default:return 32}}var Wm=!1,Su=null,Eu=null,Au=null,Xh=new Map,Zh=new Map,Ru=[],QR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iw(t,n){switch(t){case"focusin":case"focusout":Su=null;break;case"dragenter":case"dragleave":Eu=null;break;case"mouseover":case"mouseout":Au=null;break;case"pointerover":case"pointerout":Xh.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zh.delete(n.pointerId)}}function ep(t,n,s,p,E,N){return t===null||t.nativeEvent!==N?(t={blockedOn:n,domEventName:s,eventSystemFlags:p,nativeEvent:N,targetContainers:[E]},n!==null&&(n=Gr(n),n!==null&&rw(n)),t):(t.eventSystemFlags|=p,n=t.targetContainers,E!==null&&n.indexOf(E)===-1&&n.push(E),t)}function XR(t,n,s,p,E){switch(n){case"focusin":return Su=ep(Su,t,n,s,p,E),!0;case"dragenter":return Eu=ep(Eu,t,n,s,p,E),!0;case"mouseover":return Au=ep(Au,t,n,s,p,E),!0;case"pointerover":var N=E.pointerId;return Xh.set(N,ep(Xh.get(N)||null,t,n,s,p,E)),!0;case"gotpointercapture":return N=E.pointerId,Zh.set(N,ep(Zh.get(N)||null,t,n,s,p,E)),!0}return!1}function aw(t){var n=Ar(t.target);if(n!==null){var s=d(n);if(s!==null){if(n=s.tag,n===13){if(n=l(s),n!==null){t.blockedOn=n,Tt(t.priority,function(){if(s.tag===13){var p=Ji();p=jt(p);var E=pa(s,p);E!==null&&Mi(E,s,p),Km(s,p)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function my(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=qm(t.nativeEvent);if(s===null){s=t.nativeEvent;var p=new s.constructor(s.type,s);lr=p,s.target.dispatchEvent(p),lr=null}else return n=Gr(s),n!==null&&rw(n),t.blockedOn=s,!1;n.shift()}return!0}function ow(t,n,s){my(t)&&s.delete(n)}function ZR(){Wm=!1,Su!==null&&my(Su)&&(Su=null),Eu!==null&&my(Eu)&&(Eu=null),Au!==null&&my(Au)&&(Au=null),Xh.forEach(ow),Zh.forEach(ow)}function vy(t,n){t.blockedOn===n&&(t.blockedOn=null,Wm||(Wm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ZR)))}var by=null;function sw(t){by!==t&&(by=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){by===t&&(by=null);for(var n=0;n<t.length;n+=3){var s=t[n],p=t[n+1],E=t[n+2];if(typeof p!="function"){if(zm(p||s)===null)continue;break}var N=Gr(s);N!==null&&(t.splice(n,3),n-=3,Hf(N,{pending:!0,data:E,method:s.method,action:p},p,E))}}))}function tp(t){function n(Be){return vy(Be,t)}Su!==null&&vy(Su,t),Eu!==null&&vy(Eu,t),Au!==null&&vy(Au,t),Xh.forEach(n),Zh.forEach(n);for(var s=0;s<Ru.length;s++){var p=Ru[s];p.blockedOn===t&&(p.blockedOn=null)}for(;0<Ru.length&&(s=Ru[0],s.blockedOn===null);)aw(s),s.blockedOn===null&&Ru.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(p=0;p<s.length;p+=3){var E=s[p],N=s[p+1],Z=E[Zt]||null;if(typeof N=="function")Z||sw(s);else if(Z){var ce=null;if(N&&N.hasAttribute("formAction")){if(E=N,Z=N[Zt]||null)ce=Z.formAction;else if(zm(E)!==null)continue}else ce=Z.action;typeof ce=="function"?s[p+1]=ce:(s.splice(p,3),p-=3),sw(s)}}}function Jm(t){this._internalRoot=t}wy.prototype.render=Jm.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,p=Ji();ew(s,p,t,n,null,null)},wy.prototype.unmount=Jm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ew(t.current,2,null,t,null,null),hu(),n[rr]=null}};function wy(t){this._internalRoot=t}wy.prototype.unstable_scheduleHydration=function(t){if(t){var n=pe();t={blockedOn:null,target:t,priority:n};for(var s=0;s<Ru.length&&n!==0&&n<Ru[s].priority;s++);Ru.splice(s,0,t),s===0&&aw(t)}};var lw=r.version;if(lw!=="19.1.0")throw Error(a(527,lw,"19.1.0"));yt.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=h(n),t=t!==null?f(t):null,t=t===null?null:t.stateNode,t};var ex={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Ne,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_y.isDisabled&&_y.supportsFiber)try{ut=_y.inject(ex),Q=_y}catch{}}return np.createRoot=function(t,n){if(!o(t))throw Error(a(299));var s=!1,p="",E=Om,N=Im,Z=Pm,ce=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(p=n.identifierPrefix),n.onUncaughtError!==void 0&&(E=n.onUncaughtError),n.onCaughtError!==void 0&&(N=n.onCaughtError),n.onRecoverableError!==void 0&&(Z=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(ce=n.unstable_transitionCallbacks)),n=Xb(t,1,!1,null,null,s,p,E,N,Z,ce,null),t[rr]=n.current,Gh(t),new Jm(n)},np.hydrateRoot=function(t,n,s){if(!o(t))throw Error(a(299));var p=!1,E="",N=Om,Z=Im,ce=Pm,Be=null,mt=null;return s!=null&&(s.unstable_strictMode===!0&&(p=!0),s.identifierPrefix!==void 0&&(E=s.identifierPrefix),s.onUncaughtError!==void 0&&(N=s.onUncaughtError),s.onCaughtError!==void 0&&(Z=s.onCaughtError),s.onRecoverableError!==void 0&&(ce=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(Be=s.unstable_transitionCallbacks),s.formState!==void 0&&(mt=s.formState)),n=Xb(t,1,!0,n,s??null,p,E,N,Z,ce,Be,mt),n.context=Zb(null),s=n.current,p=Ji(),p=jt(p),E=ma(p),E.callback=null,vo(s,E,p),s=p,n.current.lanes=s,ft(n,s),oo(n),t[rr]=n.current,Gh(t),new wy(n)},np.version="19.1.0",np}var bw;function fx(){if(bw)return Xm.exports;bw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Xm.exports=cx(),Xm.exports}var dx=fx(),ky={exports:{}},nt={},nf={},ip={},r0={},ap={},ww;function hx(){if(ww)return ap;ww=1,ap.byteLength=u,ap.toByteArray=f,ap.fromByteArray=_;for(var e=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,d=a.length;o<d;++o)e[o]=a[o],r[a.charCodeAt(o)]=o;r[45]=62,r[95]=63;function l(A){var T=A.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=A.indexOf("=");x===-1&&(x=T);var O=x===T?0:4-x%4;return[x,O]}function u(A){var T=l(A),x=T[0],O=T[1];return(x+O)*3/4-O}function h(A,T,x){return(T+x)*3/4-x}function f(A){var T,x=l(A),O=x[0],R=x[1],F=new i(h(A,O,R)),P=0,K=R>0?O-4:O,B;for(B=0;B<K;B+=4)T=r[A.charCodeAt(B)]<<18|r[A.charCodeAt(B+1)]<<12|r[A.charCodeAt(B+2)]<<6|r[A.charCodeAt(B+3)],F[P++]=T>>16&255,F[P++]=T>>8&255,F[P++]=T&255;return R===2&&(T=r[A.charCodeAt(B)]<<2|r[A.charCodeAt(B+1)]>>4,F[P++]=T&255),R===1&&(T=r[A.charCodeAt(B)]<<10|r[A.charCodeAt(B+1)]<<4|r[A.charCodeAt(B+2)]>>2,F[P++]=T>>8&255,F[P++]=T&255),F}function y(A){return e[A>>18&63]+e[A>>12&63]+e[A>>6&63]+e[A&63]}function b(A,T,x){for(var O,R=[],F=T;F<x;F+=3)O=(A[F]<<16&16711680)+(A[F+1]<<8&65280)+(A[F+2]&255),R.push(y(O));return R.join("")}function _(A){for(var T,x=A.length,O=x%3,R=[],F=16383,P=0,K=x-O;P<K;P+=F)R.push(b(A,P,P+F>K?K:P+F));return O===1?(T=A[x-1],R.push(e[T>>2]+e[T<<4&63]+"==")):O===2&&(T=(A[x-2]<<8)+A[x-1],R.push(e[T>>10]+e[T>>4&63]+e[T<<2&63]+"=")),R.join("")}return ap}var Sy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var _w;function px(){return _w||(_w=1,Sy.read=function(e,r,i,a,o){var d,l,u=o*8-a-1,h=(1<<u)-1,f=h>>1,y=-7,b=i?o-1:0,_=i?-1:1,A=e[r+b];for(b+=_,d=A&(1<<-y)-1,A>>=-y,y+=u;y>0;d=d*256+e[r+b],b+=_,y-=8);for(l=d&(1<<-y)-1,d>>=-y,y+=a;y>0;l=l*256+e[r+b],b+=_,y-=8);if(d===0)d=1-f;else{if(d===h)return l?NaN:(A?-1:1)*(1/0);l=l+Math.pow(2,a),d=d-f}return(A?-1:1)*l*Math.pow(2,d-a)},Sy.write=function(e,r,i,a,o,d){var l,u,h,f=d*8-o-1,y=(1<<f)-1,b=y>>1,_=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=a?0:d-1,T=a?1:-1,x=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,l=y):(l=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-l))<1&&(l--,h*=2),l+b>=1?r+=_/h:r+=_*Math.pow(2,1-b),r*h>=2&&(l++,h/=2),l+b>=y?(u=0,l=y):l+b>=1?(u=(r*h-1)*Math.pow(2,o),l=l+b):(u=r*Math.pow(2,b-1)*Math.pow(2,o),l=0));o>=8;e[i+A]=u&255,A+=T,u/=256,o-=8);for(l=l<<o|u,f+=o;f>0;e[i+A]=l&255,A+=T,l/=256,f-=8);e[i+A-T]|=x*128}),Sy}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Sw;function Is(){return Sw||(Sw=1,function(e){const r=hx(),i=px(),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=F,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=d(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const Q=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(Q,k),Q.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(Q){if(Q>o)throw new RangeError('The value "'+Q+'" is invalid for option "size"');const k=new Uint8Array(Q);return Object.setPrototypeOf(k,u.prototype),k}function u(Q,k,V){if(typeof Q=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(Q)}return h(Q,k,V)}u.poolSize=8192;function h(Q,k,V){if(typeof Q=="string")return _(Q,k);if(ArrayBuffer.isView(Q))return T(Q);if(Q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q);if(bt(Q,ArrayBuffer)||Q&&bt(Q.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(bt(Q,SharedArrayBuffer)||Q&&bt(Q.buffer,SharedArrayBuffer)))return x(Q,k,V);if(typeof Q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const j=Q.valueOf&&Q.valueOf();if(j!=null&&j!==Q)return u.from(j,k,V);const qe=O(Q);if(qe)return qe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Q[Symbol.toPrimitive]=="function")return u.from(Q[Symbol.toPrimitive]("string"),k,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q)}u.from=function(Q,k,V){return h(Q,k,V)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function f(Q){if(typeof Q!="number")throw new TypeError('"size" argument must be of type number');if(Q<0)throw new RangeError('The value "'+Q+'" is invalid for option "size"')}function y(Q,k,V){return f(Q),Q<=0?l(Q):k!==void 0?typeof V=="string"?l(Q).fill(k,V):l(Q).fill(k):l(Q)}u.alloc=function(Q,k,V){return y(Q,k,V)};function b(Q){return f(Q),l(Q<0?0:R(Q)|0)}u.allocUnsafe=function(Q){return b(Q)},u.allocUnsafeSlow=function(Q){return b(Q)};function _(Q,k){if((typeof k!="string"||k==="")&&(k="utf8"),!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const V=P(Q,k)|0;let j=l(V);const qe=j.write(Q,k);return qe!==V&&(j=j.slice(0,qe)),j}function A(Q){const k=Q.length<0?0:R(Q.length)|0,V=l(k);for(let j=0;j<k;j+=1)V[j]=Q[j]&255;return V}function T(Q){if(bt(Q,Uint8Array)){const k=new Uint8Array(Q);return x(k.buffer,k.byteOffset,k.byteLength)}return A(Q)}function x(Q,k,V){if(k<0||Q.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(Q.byteLength<k+(V||0))throw new RangeError('"length" is outside of buffer bounds');let j;return k===void 0&&V===void 0?j=new Uint8Array(Q):V===void 0?j=new Uint8Array(Q,k):j=new Uint8Array(Q,k,V),Object.setPrototypeOf(j,u.prototype),j}function O(Q){if(u.isBuffer(Q)){const k=R(Q.length)|0,V=l(k);return V.length===0||Q.copy(V,0,0,k),V}if(Q.length!==void 0)return typeof Q.length!="number"||We(Q.length)?l(0):A(Q);if(Q.type==="Buffer"&&Array.isArray(Q.data))return A(Q.data)}function R(Q){if(Q>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return Q|0}function F(Q){return+Q!=Q&&(Q=0),u.alloc(+Q)}u.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==u.prototype},u.compare=function(k,V){if(bt(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),bt(V,Uint8Array)&&(V=u.from(V,V.offset,V.byteLength)),!u.isBuffer(k)||!u.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===V)return 0;let j=k.length,qe=V.length;for(let et=0,ze=Math.min(j,qe);et<ze;++et)if(k[et]!==V[et]){j=k[et],qe=V[et];break}return j<qe?-1:qe<j?1:0},u.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(k,V){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return u.alloc(0);let j;if(V===void 0)for(V=0,j=0;j<k.length;++j)V+=k[j].length;const qe=u.allocUnsafe(V);let et=0;for(j=0;j<k.length;++j){let ze=k[j];if(bt(ze,Uint8Array))et+ze.length>qe.length?(u.isBuffer(ze)||(ze=u.from(ze)),ze.copy(qe,et)):Uint8Array.prototype.set.call(qe,ze,et);else if(u.isBuffer(ze))ze.copy(qe,et);else throw new TypeError('"list" argument must be an Array of Buffers');et+=ze.length}return qe};function P(Q,k){if(u.isBuffer(Q))return Q.length;if(ArrayBuffer.isView(Q)||bt(Q,ArrayBuffer))return Q.byteLength;if(typeof Q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Q);const V=Q.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&V===0)return 0;let qe=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return Ce(Q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V*2;case"hex":return V>>>1;case"base64":return pt(Q).length;default:if(qe)return j?-1:Ce(Q).length;k=(""+k).toLowerCase(),qe=!0}}u.byteLength=P;function K(Q,k,V){let j=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((V===void 0||V>this.length)&&(V=this.length),V<=0)||(V>>>=0,k>>>=0,V<=k))return"";for(Q||(Q="utf8");;)switch(Q){case"hex":return rt(this,k,V);case"utf8":case"utf-8":return tt(this,k,V);case"ascii":return yt(this,k,V);case"latin1":case"binary":return ve(this,k,V);case"base64":return Se(this,k,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,k,V);default:if(j)throw new TypeError("Unknown encoding: "+Q);Q=(Q+"").toLowerCase(),j=!0}}u.prototype._isBuffer=!0;function B(Q,k,V){const j=Q[k];Q[k]=Q[V],Q[V]=j}u.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let V=0;V<k;V+=2)B(this,V,V+1);return this},u.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let V=0;V<k;V+=4)B(this,V,V+3),B(this,V+1,V+2);return this},u.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let V=0;V<k;V+=8)B(this,V,V+7),B(this,V+1,V+6),B(this,V+2,V+5),B(this,V+3,V+4);return this},u.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?tt(this,0,k):K.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(k){if(!u.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:u.compare(this,k)===0},u.prototype.inspect=function(){let k="";const V=e.INSPECT_MAX_BYTES;return k=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(k+=" ... "),"<Buffer "+k+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(k,V,j,qe,et){if(bt(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(V===void 0&&(V=0),j===void 0&&(j=k?k.length:0),qe===void 0&&(qe=0),et===void 0&&(et=this.length),V<0||j>k.length||qe<0||et>this.length)throw new RangeError("out of range index");if(qe>=et&&V>=j)return 0;if(qe>=et)return-1;if(V>=j)return 1;if(V>>>=0,j>>>=0,qe>>>=0,et>>>=0,this===k)return 0;let ze=et-qe,Yt=j-V;const Br=Math.min(ze,Yt),jr=this.slice(qe,et),or=k.slice(V,j);for(let $e=0;$e<Br;++$e)if(jr[$e]!==or[$e]){ze=jr[$e],Yt=or[$e];break}return ze<Yt?-1:Yt<ze?1:0};function W(Q,k,V,j,qe){if(Q.length===0)return-1;if(typeof V=="string"?(j=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),V=+V,We(V)&&(V=qe?0:Q.length-1),V<0&&(V=Q.length+V),V>=Q.length){if(qe)return-1;V=Q.length-1}else if(V<0)if(qe)V=0;else return-1;if(typeof k=="string"&&(k=u.from(k,j)),u.isBuffer(k))return k.length===0?-1:Y(Q,k,V,j,qe);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?qe?Uint8Array.prototype.indexOf.call(Q,k,V):Uint8Array.prototype.lastIndexOf.call(Q,k,V):Y(Q,[k],V,j,qe);throw new TypeError("val must be string, number or Buffer")}function Y(Q,k,V,j,qe){let et=1,ze=Q.length,Yt=k.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(Q.length<2||k.length<2)return-1;et=2,ze/=2,Yt/=2,V/=2}function Br(or,$e){return et===1?or[$e]:or.readUInt16BE($e*et)}let jr;if(qe){let or=-1;for(jr=V;jr<ze;jr++)if(Br(Q,jr)===Br(k,or===-1?0:jr-or)){if(or===-1&&(or=jr),jr-or+1===Yt)return or*et}else or!==-1&&(jr-=jr-or),or=-1}else for(V+Yt>ze&&(V=ze-Yt),jr=V;jr>=0;jr--){let or=!0;for(let $e=0;$e<Yt;$e++)if(Br(Q,jr+$e)!==Br(k,$e)){or=!1;break}if(or)return jr}return-1}u.prototype.includes=function(k,V,j){return this.indexOf(k,V,j)!==-1},u.prototype.indexOf=function(k,V,j){return W(this,k,V,j,!0)},u.prototype.lastIndexOf=function(k,V,j){return W(this,k,V,j,!1)};function q(Q,k,V,j){V=Number(V)||0;const qe=Q.length-V;j?(j=Number(j),j>qe&&(j=qe)):j=qe;const et=k.length;j>et/2&&(j=et/2);let ze;for(ze=0;ze<j;++ze){const Yt=parseInt(k.substr(ze*2,2),16);if(We(Yt))return ze;Q[V+ze]=Yt}return ze}function Pe(Q,k,V,j){return Ct(Ce(k,Q.length-V),Q,V,j)}function $(Q,k,V,j){return Ct(ot(k),Q,V,j)}function ie(Q,k,V,j){return Ct(pt(k),Q,V,j)}function ge(Q,k,V,j){return Ct(Re(k,Q.length-V),Q,V,j)}u.prototype.write=function(k,V,j,qe){if(V===void 0)qe="utf8",j=this.length,V=0;else if(j===void 0&&typeof V=="string")qe=V,j=this.length,V=0;else if(isFinite(V))V=V>>>0,isFinite(j)?(j=j>>>0,qe===void 0&&(qe="utf8")):(qe=j,j=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const et=this.length-V;if((j===void 0||j>et)&&(j=et),k.length>0&&(j<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");qe||(qe="utf8");let ze=!1;for(;;)switch(qe){case"hex":return q(this,k,V,j);case"utf8":case"utf-8":return Pe(this,k,V,j);case"ascii":case"latin1":case"binary":return $(this,k,V,j);case"base64":return ie(this,k,V,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,k,V,j);default:if(ze)throw new TypeError("Unknown encoding: "+qe);qe=(""+qe).toLowerCase(),ze=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Se(Q,k,V){return k===0&&V===Q.length?r.fromByteArray(Q):r.fromByteArray(Q.slice(k,V))}function tt(Q,k,V){V=Math.min(Q.length,V);const j=[];let qe=k;for(;qe<V;){const et=Q[qe];let ze=null,Yt=et>239?4:et>223?3:et>191?2:1;if(qe+Yt<=V){let Br,jr,or,$e;switch(Yt){case 1:et<128&&(ze=et);break;case 2:Br=Q[qe+1],(Br&192)===128&&($e=(et&31)<<6|Br&63,$e>127&&(ze=$e));break;case 3:Br=Q[qe+1],jr=Q[qe+2],(Br&192)===128&&(jr&192)===128&&($e=(et&15)<<12|(Br&63)<<6|jr&63,$e>2047&&($e<55296||$e>57343)&&(ze=$e));break;case 4:Br=Q[qe+1],jr=Q[qe+2],or=Q[qe+3],(Br&192)===128&&(jr&192)===128&&(or&192)===128&&($e=(et&15)<<18|(Br&63)<<12|(jr&63)<<6|or&63,$e>65535&&$e<1114112&&(ze=$e))}}ze===null?(ze=65533,Yt=1):ze>65535&&(ze-=65536,j.push(ze>>>10&1023|55296),ze=56320|ze&1023),j.push(ze),qe+=Yt}return Ne(j)}const lt=4096;function Ne(Q){const k=Q.length;if(k<=lt)return String.fromCharCode.apply(String,Q);let V="",j=0;for(;j<k;)V+=String.fromCharCode.apply(String,Q.slice(j,j+=lt));return V}function yt(Q,k,V){let j="";V=Math.min(Q.length,V);for(let qe=k;qe<V;++qe)j+=String.fromCharCode(Q[qe]&127);return j}function ve(Q,k,V){let j="";V=Math.min(Q.length,V);for(let qe=k;qe<V;++qe)j+=String.fromCharCode(Q[qe]);return j}function rt(Q,k,V){const j=Q.length;(!k||k<0)&&(k=0),(!V||V<0||V>j)&&(V=j);let qe="";for(let et=k;et<V;++et)qe+=Ge[Q[et]];return qe}function J(Q,k,V){const j=Q.slice(k,V);let qe="";for(let et=0;et<j.length-1;et+=2)qe+=String.fromCharCode(j[et]+j[et+1]*256);return qe}u.prototype.slice=function(k,V){const j=this.length;k=~~k,V=V===void 0?j:~~V,k<0?(k+=j,k<0&&(k=0)):k>j&&(k=j),V<0?(V+=j,V<0&&(V=0)):V>j&&(V=j),V<k&&(V=k);const qe=this.subarray(k,V);return Object.setPrototypeOf(qe,u.prototype),qe};function xe(Q,k,V){if(Q%1!==0||Q<0)throw new RangeError("offset is not uint");if(Q+k>V)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(k,V,j){k=k>>>0,V=V>>>0,j||xe(k,V,this.length);let qe=this[k],et=1,ze=0;for(;++ze<V&&(et*=256);)qe+=this[k+ze]*et;return qe},u.prototype.readUintBE=u.prototype.readUIntBE=function(k,V,j){k=k>>>0,V=V>>>0,j||xe(k,V,this.length);let qe=this[k+--V],et=1;for(;V>0&&(et*=256);)qe+=this[k+--V]*et;return qe},u.prototype.readUint8=u.prototype.readUInt8=function(k,V){return k=k>>>0,V||xe(k,1,this.length),this[k]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(k,V){return k=k>>>0,V||xe(k,2,this.length),this[k]|this[k+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(k,V){return k=k>>>0,V||xe(k,2,this.length),this[k]<<8|this[k+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},u.prototype.readBigUInt64LE=Oe(function(k){k=k>>>0,D(k,"offset");const V=this[k],j=this[k+7];(V===void 0||j===void 0)&&G(k,this.length-8);const qe=V+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,et=this[++k]+this[++k]*2**8+this[++k]*2**16+j*2**24;return BigInt(qe)+(BigInt(et)<<BigInt(32))}),u.prototype.readBigUInt64BE=Oe(function(k){k=k>>>0,D(k,"offset");const V=this[k],j=this[k+7];(V===void 0||j===void 0)&&G(k,this.length-8);const qe=V*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],et=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+j;return(BigInt(qe)<<BigInt(32))+BigInt(et)}),u.prototype.readIntLE=function(k,V,j){k=k>>>0,V=V>>>0,j||xe(k,V,this.length);let qe=this[k],et=1,ze=0;for(;++ze<V&&(et*=256);)qe+=this[k+ze]*et;return et*=128,qe>=et&&(qe-=Math.pow(2,8*V)),qe},u.prototype.readIntBE=function(k,V,j){k=k>>>0,V=V>>>0,j||xe(k,V,this.length);let qe=V,et=1,ze=this[k+--qe];for(;qe>0&&(et*=256);)ze+=this[k+--qe]*et;return et*=128,ze>=et&&(ze-=Math.pow(2,8*V)),ze},u.prototype.readInt8=function(k,V){return k=k>>>0,V||xe(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},u.prototype.readInt16LE=function(k,V){k=k>>>0,V||xe(k,2,this.length);const j=this[k]|this[k+1]<<8;return j&32768?j|4294901760:j},u.prototype.readInt16BE=function(k,V){k=k>>>0,V||xe(k,2,this.length);const j=this[k+1]|this[k]<<8;return j&32768?j|4294901760:j},u.prototype.readInt32LE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},u.prototype.readInt32BE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},u.prototype.readBigInt64LE=Oe(function(k){k=k>>>0,D(k,"offset");const V=this[k],j=this[k+7];(V===void 0||j===void 0)&&G(k,this.length-8);const qe=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(j<<24);return(BigInt(qe)<<BigInt(32))+BigInt(V+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),u.prototype.readBigInt64BE=Oe(function(k){k=k>>>0,D(k,"offset");const V=this[k],j=this[k+7];(V===void 0||j===void 0)&&G(k,this.length-8);const qe=(V<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(qe)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+j)}),u.prototype.readFloatLE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),i.read(this,k,!0,23,4)},u.prototype.readFloatBE=function(k,V){return k=k>>>0,V||xe(k,4,this.length),i.read(this,k,!1,23,4)},u.prototype.readDoubleLE=function(k,V){return k=k>>>0,V||xe(k,8,this.length),i.read(this,k,!0,52,8)},u.prototype.readDoubleBE=function(k,V){return k=k>>>0,V||xe(k,8,this.length),i.read(this,k,!1,52,8)};function Ze(Q,k,V,j,qe,et){if(!u.isBuffer(Q))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>qe||k<et)throw new RangeError('"value" argument is out of bounds');if(V+j>Q.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(k,V,j,qe){if(k=+k,V=V>>>0,j=j>>>0,!qe){const Yt=Math.pow(2,8*j)-1;Ze(this,k,V,j,Yt,0)}let et=1,ze=0;for(this[V]=k&255;++ze<j&&(et*=256);)this[V+ze]=k/et&255;return V+j},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(k,V,j,qe){if(k=+k,V=V>>>0,j=j>>>0,!qe){const Yt=Math.pow(2,8*j)-1;Ze(this,k,V,j,Yt,0)}let et=j-1,ze=1;for(this[V+et]=k&255;--et>=0&&(ze*=256);)this[V+et]=k/ze&255;return V+j},u.prototype.writeUint8=u.prototype.writeUInt8=function(k,V,j){return k=+k,V=V>>>0,j||Ze(this,k,V,1,255,0),this[V]=k&255,V+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(k,V,j){return k=+k,V=V>>>0,j||Ze(this,k,V,2,65535,0),this[V]=k&255,this[V+1]=k>>>8,V+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(k,V,j){return k=+k,V=V>>>0,j||Ze(this,k,V,2,65535,0),this[V]=k>>>8,this[V+1]=k&255,V+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(k,V,j){return k=+k,V=V>>>0,j||Ze(this,k,V,4,4294967295,0),this[V+3]=k>>>24,this[V+2]=k>>>16,this[V+1]=k>>>8,this[V]=k&255,V+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(k,V,j){return k=+k,V=V>>>0,j||Ze(this,k,V,4,4294967295,0),this[V]=k>>>24,this[V+1]=k>>>16,this[V+2]=k>>>8,this[V+3]=k&255,V+4};function je(Q,k,V,j,qe){M(k,j,qe,Q,V,7);let et=Number(k&BigInt(4294967295));Q[V++]=et,et=et>>8,Q[V++]=et,et=et>>8,Q[V++]=et,et=et>>8,Q[V++]=et;let ze=Number(k>>BigInt(32)&BigInt(4294967295));return Q[V++]=ze,ze=ze>>8,Q[V++]=ze,ze=ze>>8,Q[V++]=ze,ze=ze>>8,Q[V++]=ze,V}function ht(Q,k,V,j,qe){M(k,j,qe,Q,V,7);let et=Number(k&BigInt(4294967295));Q[V+7]=et,et=et>>8,Q[V+6]=et,et=et>>8,Q[V+5]=et,et=et>>8,Q[V+4]=et;let ze=Number(k>>BigInt(32)&BigInt(4294967295));return Q[V+3]=ze,ze=ze>>8,Q[V+2]=ze,ze=ze>>8,Q[V+1]=ze,ze=ze>>8,Q[V]=ze,V+8}u.prototype.writeBigUInt64LE=Oe(function(k,V=0){return je(this,k,V,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Oe(function(k,V=0){return ht(this,k,V,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(k,V,j,qe){if(k=+k,V=V>>>0,!qe){const Br=Math.pow(2,8*j-1);Ze(this,k,V,j,Br-1,-Br)}let et=0,ze=1,Yt=0;for(this[V]=k&255;++et<j&&(ze*=256);)k<0&&Yt===0&&this[V+et-1]!==0&&(Yt=1),this[V+et]=(k/ze>>0)-Yt&255;return V+j},u.prototype.writeIntBE=function(k,V,j,qe){if(k=+k,V=V>>>0,!qe){const Br=Math.pow(2,8*j-1);Ze(this,k,V,j,Br-1,-Br)}let et=j-1,ze=1,Yt=0;for(this[V+et]=k&255;--et>=0&&(ze*=256);)k<0&&Yt===0&&this[V+et+1]!==0&&(Yt=1),this[V+et]=(k/ze>>0)-Yt&255;return V+j},u.prototype.writeInt8=function(k,V,j){return k=+k,V=V>>>0,j||Ze(this,k,V,1,127,-128),k<0&&(k=255+k+1),this[V]=k&255,V+1},u.prototype.writeInt16LE=function(k,V,j){return k=+k,V=V>>>0,j||Ze(this,k,V,2,32767,-32768),this[V]=k&255,this[V+1]=k>>>8,V+2},u.prototype.writeInt16BE=function(k,V,j){return k=+k,V=V>>>0,j||Ze(this,k,V,2,32767,-32768),this[V]=k>>>8,this[V+1]=k&255,V+2},u.prototype.writeInt32LE=function(k,V,j){return k=+k,V=V>>>0,j||Ze(this,k,V,4,2147483647,-2147483648),this[V]=k&255,this[V+1]=k>>>8,this[V+2]=k>>>16,this[V+3]=k>>>24,V+4},u.prototype.writeInt32BE=function(k,V,j){return k=+k,V=V>>>0,j||Ze(this,k,V,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[V]=k>>>24,this[V+1]=k>>>16,this[V+2]=k>>>8,this[V+3]=k&255,V+4},u.prototype.writeBigInt64LE=Oe(function(k,V=0){return je(this,k,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Oe(function(k,V=0){return ht(this,k,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Nt(Q,k,V,j,qe,et){if(V+j>Q.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function kt(Q,k,V,j,qe){return k=+k,V=V>>>0,qe||Nt(Q,k,V,4),i.write(Q,k,V,j,23,4),V+4}u.prototype.writeFloatLE=function(k,V,j){return kt(this,k,V,!0,j)},u.prototype.writeFloatBE=function(k,V,j){return kt(this,k,V,!1,j)};function Me(Q,k,V,j,qe){return k=+k,V=V>>>0,qe||Nt(Q,k,V,8),i.write(Q,k,V,j,52,8),V+8}u.prototype.writeDoubleLE=function(k,V,j){return Me(this,k,V,!0,j)},u.prototype.writeDoubleBE=function(k,V,j){return Me(this,k,V,!1,j)},u.prototype.copy=function(k,V,j,qe){if(!u.isBuffer(k))throw new TypeError("argument should be a Buffer");if(j||(j=0),!qe&&qe!==0&&(qe=this.length),V>=k.length&&(V=k.length),V||(V=0),qe>0&&qe<j&&(qe=j),qe===j||k.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if(qe<0)throw new RangeError("sourceEnd out of bounds");qe>this.length&&(qe=this.length),k.length-V<qe-j&&(qe=k.length-V+j);const et=qe-j;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(V,j,qe):Uint8Array.prototype.set.call(k,this.subarray(j,qe),V),et},u.prototype.fill=function(k,V,j,qe){if(typeof k=="string"){if(typeof V=="string"?(qe=V,V=0,j=this.length):typeof j=="string"&&(qe=j,j=this.length),qe!==void 0&&typeof qe!="string")throw new TypeError("encoding must be a string");if(typeof qe=="string"&&!u.isEncoding(qe))throw new TypeError("Unknown encoding: "+qe);if(k.length===1){const ze=k.charCodeAt(0);(qe==="utf8"&&ze<128||qe==="latin1")&&(k=ze)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(V<0||this.length<V||this.length<j)throw new RangeError("Out of range index");if(j<=V)return this;V=V>>>0,j=j===void 0?this.length:j>>>0,k||(k=0);let et;if(typeof k=="number")for(et=V;et<j;++et)this[et]=k;else{const ze=u.isBuffer(k)?k:u.from(k,qe),Yt=ze.length;if(Yt===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(et=0;et<j-V;++et)this[et+V]=ze[et%Yt]}return this};const le={};function Te(Q,k,V){le[Q]=class extends V{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Q}]`,this.stack,delete this.name}get code(){return Q}set code(qe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:qe,writable:!0})}toString(){return`${this.name} [${Q}]: ${this.message}`}}}Te("ERR_BUFFER_OUT_OF_BOUNDS",function(Q){return Q?`${Q} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Te("ERR_INVALID_ARG_TYPE",function(Q,k){return`The "${Q}" argument must be of type number. Received type ${typeof k}`},TypeError),Te("ERR_OUT_OF_RANGE",function(Q,k,V){let j=`The value of "${Q}" is out of range.`,qe=V;return Number.isInteger(V)&&Math.abs(V)>2**32?qe=Je(String(V)):typeof V=="bigint"&&(qe=String(V),(V>BigInt(2)**BigInt(32)||V<-(BigInt(2)**BigInt(32)))&&(qe=Je(qe)),qe+="n"),j+=` It must be ${k}. Received ${qe}`,j},RangeError);function Je(Q){let k="",V=Q.length;const j=Q[0]==="-"?1:0;for(;V>=j+4;V-=3)k=`_${Q.slice(V-3,V)}${k}`;return`${Q.slice(0,V)}${k}`}function se(Q,k,V){D(k,"offset"),(Q[k]===void 0||Q[k+V]===void 0)&&G(k,Q.length-(V+1))}function M(Q,k,V,j,qe,et){if(Q>V||Q<k){const ze=typeof k=="bigint"?"n":"";let Yt;throw k===0||k===BigInt(0)?Yt=`>= 0${ze} and < 2${ze} ** ${(et+1)*8}${ze}`:Yt=`>= -(2${ze} ** ${(et+1)*8-1}${ze}) and < 2 ** ${(et+1)*8-1}${ze}`,new le.ERR_OUT_OF_RANGE("value",Yt,Q)}se(j,qe,et)}function D(Q,k){if(typeof Q!="number")throw new le.ERR_INVALID_ARG_TYPE(k,"number",Q)}function G(Q,k,V){throw Math.floor(Q)!==Q?(D(Q,V),new le.ERR_OUT_OF_RANGE("offset","an integer",Q)):k<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${k}`,Q)}const re=/[^+/0-9A-Za-z-_]/g;function we(Q){if(Q=Q.split("=")[0],Q=Q.trim().replace(re,""),Q.length<2)return"";for(;Q.length%4!==0;)Q=Q+"=";return Q}function Ce(Q,k){k=k||1/0;let V;const j=Q.length;let qe=null;const et=[];for(let ze=0;ze<j;++ze){if(V=Q.charCodeAt(ze),V>55295&&V<57344){if(!qe){if(V>56319){(k-=3)>-1&&et.push(239,191,189);continue}else if(ze+1===j){(k-=3)>-1&&et.push(239,191,189);continue}qe=V;continue}if(V<56320){(k-=3)>-1&&et.push(239,191,189),qe=V;continue}V=(qe-55296<<10|V-56320)+65536}else qe&&(k-=3)>-1&&et.push(239,191,189);if(qe=null,V<128){if((k-=1)<0)break;et.push(V)}else if(V<2048){if((k-=2)<0)break;et.push(V>>6|192,V&63|128)}else if(V<65536){if((k-=3)<0)break;et.push(V>>12|224,V>>6&63|128,V&63|128)}else if(V<1114112){if((k-=4)<0)break;et.push(V>>18|240,V>>12&63|128,V>>6&63|128,V&63|128)}else throw new Error("Invalid code point")}return et}function ot(Q){const k=[];for(let V=0;V<Q.length;++V)k.push(Q.charCodeAt(V)&255);return k}function Re(Q,k){let V,j,qe;const et=[];for(let ze=0;ze<Q.length&&!((k-=2)<0);++ze)V=Q.charCodeAt(ze),j=V>>8,qe=V%256,et.push(qe),et.push(j);return et}function pt(Q){return r.toByteArray(we(Q))}function Ct(Q,k,V,j){let qe;for(qe=0;qe<j&&!(qe+V>=k.length||qe>=Q.length);++qe)k[qe+V]=Q[qe];return qe}function bt(Q,k){return Q instanceof k||Q!=null&&Q.constructor!=null&&Q.constructor.name!=null&&Q.constructor.name===k.name}function We(Q){return Q!==Q}const Ge=function(){const Q="0123456789abcdef",k=new Array(256);for(let V=0;V<16;++V){const j=V*16;for(let qe=0;qe<16;++qe)k[j+qe]=Q[V]+Q[qe]}return k}();function Oe(Q){return typeof BigInt>"u"?ut:Q}function ut(){throw new Error("BigInt not supported")}}(r0)),r0}var n0,Ew;function gx(){if(Ew)return n0;Ew=1;var{Buffer:e}=Is(),r={},i=r.LEFT_BRACE=1,a=r.RIGHT_BRACE=2,o=r.LEFT_BRACKET=3,d=r.RIGHT_BRACKET=4,l=r.COLON=5,u=r.COMMA=6,h=r.TRUE=7,f=r.FALSE=8,y=r.NULL=9,b=r.STRING=10,_=r.NUMBER=11,A=r.START=17,T=r.STOP=18,x=r.TRUE1=33,O=r.TRUE2=34,R=r.TRUE3=35,F=r.FALSE1=49,P=r.FALSE2=50,K=r.FALSE3=51,B=r.FALSE4=52,W=r.NULL1=65,Y=r.NULL2=66,q=r.NULL3=67,Pe=r.NUMBER1=81,$=r.NUMBER3=83,ie=r.STRING1=97,ge=r.STRING2=98,Se=r.STRING3=99,tt=r.STRING4=100,lt=r.STRING5=101,Ne=r.STRING6=102,yt=r.VALUE=113,ve=r.KEY=114,rt=r.OBJECT=129,J=r.ARRAY=130,xe=92,Ze=47,je=8,ht=12,Nt=10,kt=13,Me=9,le=64*1024;function Te(M){return e.alloc?e.alloc(M):new e(M)}function Je(){this.tState=A,this.value=void 0,this.string=void 0,this.stringBuffer=Te(le),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=yt,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:Te(2),3:Te(3),4:Te(4)},this.offset=-1}Je.toknam=function(M){for(var D=Object.keys(r),G=0,re=D.length;G<re;G++){var we=D[G];if(r[we]===M)return we}return M&&"0x"+M.toString(16)};var se=Je.prototype;return se.onError=function(M){throw M},se.charError=function(M,D){this.tState=T,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(M[D]))+" at position "+D+" in state "+Je.toknam(this.tState)))},se.appendStringChar=function(M){this.stringBufferOffset>=le&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=M},se.appendStringBuf=function(M,D,G){var re=M.length;typeof D=="number"&&(typeof G=="number"?G<0?re=M.length-D+G:re=G-D:re=M.length-D),re<0&&(re=0),this.stringBufferOffset+re>le&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),M.copy(this.stringBuffer,this.stringBufferOffset,D,G),this.stringBufferOffset+=re},se.write=function(M){typeof M=="string"&&(M=new e(M));for(var D,G=0,re=M.length;G<re;G++)if(this.tState===A){if(D=M[G],this.offset++,D===123)this.onToken(i,"{");else if(D===125)this.onToken(a,"}");else if(D===91)this.onToken(o,"[");else if(D===93)this.onToken(d,"]");else if(D===58)this.onToken(l,":");else if(D===44)this.onToken(u,",");else if(D===116)this.tState=x;else if(D===102)this.tState=F;else if(D===110)this.tState=W;else if(D===34)this.string="",this.stringBufferOffset=0,this.tState=ie;else if(D===45)this.string="-",this.tState=Pe;else if(D>=48&&D<64)this.string=String.fromCharCode(D),this.tState=$;else if(!(D===32||D===9||D===10||D===13))return this.charError(M,G)}else if(this.tState===ie)if(D=M[G],this.bytes_remaining>0){for(var we=0;we<this.bytes_remaining;we++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+we]=M[we];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,G=G+we-1}else if(this.bytes_remaining===0&&D>=128){if(D<=193||D>244)return this.onError(new Error("Invalid UTF-8 character at position "+G+" in state "+Je.toknam(this.tState)));if(D>=194&&D<=223&&(this.bytes_in_sequence=2),D>=224&&D<=239&&(this.bytes_in_sequence=3),D>=240&&D<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+G>M.length){for(var Ce=0;Ce<=M.length-1-G;Ce++)this.temp_buffs[this.bytes_in_sequence][Ce]=M[G+Ce];this.bytes_remaining=G+this.bytes_in_sequence-M.length,G=M.length-1}else this.appendStringBuf(M,G,G+this.bytes_in_sequence),G=G+this.bytes_in_sequence-1}else if(D===34)this.tState=A,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(b,this.string),this.offset+=e.byteLength(this.string,"utf8")+1,this.string=void 0;else if(D===92)this.tState=ge;else if(D>=32)this.appendStringChar(D);else return this.charError(M,G);else if(this.tState===ge)if(D=M[G],D===34)this.appendStringChar(D),this.tState=ie;else if(D===92)this.appendStringChar(xe),this.tState=ie;else if(D===47)this.appendStringChar(Ze),this.tState=ie;else if(D===98)this.appendStringChar(je),this.tState=ie;else if(D===102)this.appendStringChar(ht),this.tState=ie;else if(D===110)this.appendStringChar(Nt),this.tState=ie;else if(D===114)this.appendStringChar(kt),this.tState=ie;else if(D===116)this.appendStringChar(Me),this.tState=ie;else if(D===117)this.unicode="",this.tState=Se;else return this.charError(M,G);else if(this.tState===Se||this.tState===tt||this.tState===lt||this.tState===Ne)if(D=M[G],D>=48&&D<64||D>64&&D<=70||D>96&&D<=102){if(this.unicode+=String.fromCharCode(D),this.tState++===Ne){var ot=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&ot>=56320&&ot<57344?(this.appendStringBuf(new e(String.fromCharCode(this.highSurrogate,ot))),this.highSurrogate=void 0):this.highSurrogate===void 0&&ot>=55296&&ot<56320?this.highSurrogate=ot:(this.highSurrogate!==void 0&&(this.appendStringBuf(new e(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new e(String.fromCharCode(ot)))),this.tState=ie}}else return this.charError(M,G);else if(this.tState===Pe||this.tState===$)switch(D=M[G],D){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(D),this.tState=$;break;default:this.tState=A;var Re=this.numberReviver(this.string,M,G);if(Re)return Re;this.offset+=this.string.length-1,this.string=void 0,G--;break}else if(this.tState===x)if(M[G]===114)this.tState=O;else return this.charError(M,G);else if(this.tState===O)if(M[G]===117)this.tState=R;else return this.charError(M,G);else if(this.tState===R)if(M[G]===101)this.tState=A,this.onToken(h,!0),this.offset+=3;else return this.charError(M,G);else if(this.tState===F)if(M[G]===97)this.tState=P;else return this.charError(M,G);else if(this.tState===P)if(M[G]===108)this.tState=K;else return this.charError(M,G);else if(this.tState===K)if(M[G]===115)this.tState=B;else return this.charError(M,G);else if(this.tState===B)if(M[G]===101)this.tState=A,this.onToken(f,!1),this.offset+=4;else return this.charError(M,G);else if(this.tState===W)if(M[G]===117)this.tState=Y;else return this.charError(M,G);else if(this.tState===Y)if(M[G]===108)this.tState=q;else return this.charError(M,G);else if(this.tState===q)if(M[G]===108)this.tState=A,this.onToken(y,null),this.offset+=3;else return this.charError(M,G)},se.onToken=function(M,D){},se.parseError=function(M,D){this.tState=T,this.onError(new Error("Unexpected "+Je.toknam(M)+(D?"("+JSON.stringify(D)+")":"")+" in state "+Je.toknam(this.state)))},se.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},se.pop=function(){var M=this.value,D=this.stack.pop();this.value=D.value,this.key=D.key,this.mode=D.mode,this.emit(M),this.mode||(this.state=yt)},se.emit=function(M){this.mode&&(this.state=u),this.onValue(M)},se.onValue=function(M){},se.onToken=function(M,D){if(this.state===yt)if(M===b||M===_||M===h||M===f||M===y)this.value&&(this.value[this.key]=D),this.emit(D);else if(M===i)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=ve,this.mode=rt;else if(M===o)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=J,this.state=yt;else if(M===a)if(this.mode===rt)this.pop();else return this.parseError(M,D);else if(M===d)if(this.mode===J)this.pop();else return this.parseError(M,D);else return this.parseError(M,D);else if(this.state===ve)if(M===b)this.key=D,this.state=l;else if(M===a)this.pop();else return this.parseError(M,D);else if(this.state===l)if(M===l)this.state=yt;else return this.parseError(M,D);else if(this.state===u)if(M===u)this.mode===J?(this.key++,this.state=yt):this.mode===rt&&(this.state=ve);else if(M===d&&this.mode===J||M===a&&this.mode===rt)this.pop();else return this.parseError(M,D);else return this.parseError(M,D)},se.numberReviver=function(M,D,G){var re=Number(M);if(isNaN(re))return this.charError(D,G);M.match(/[0-9]+/)==M&&re.toString()!=M?this.onToken(b,M):this.onToken(_,re)},Je.C=r,n0=Je,n0}var af={},op={},i0={},Aw;function SE(){return Aw||(Aw=1,function(){(function(e){(function(r){var i=typeof globalThis<"u"&&globalThis||typeof e<"u"&&e||typeof uw<"u"&&uw||{},a={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function o($){return $&&DataView.prototype.isPrototypeOf($)}if(a.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function($){return $&&d.indexOf(Object.prototype.toString.call($))>-1};function u($){if(typeof $!="string"&&($=String($)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test($)||$==="")throw new TypeError('Invalid character in header field name: "'+$+'"');return $.toLowerCase()}function h($){return typeof $!="string"&&($=String($)),$}function f($){var ie={next:function(){var ge=$.shift();return{done:ge===void 0,value:ge}}};return a.iterable&&(ie[Symbol.iterator]=function(){return ie}),ie}function y($){this.map={},$ instanceof y?$.forEach(function(ie,ge){this.append(ge,ie)},this):Array.isArray($)?$.forEach(function(ie){if(ie.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+ie.length);this.append(ie[0],ie[1])},this):$&&Object.getOwnPropertyNames($).forEach(function(ie){this.append(ie,$[ie])},this)}y.prototype.append=function($,ie){$=u($),ie=h(ie);var ge=this.map[$];this.map[$]=ge?ge+", "+ie:ie},y.prototype.delete=function($){delete this.map[u($)]},y.prototype.get=function($){return $=u($),this.has($)?this.map[$]:null},y.prototype.has=function($){return this.map.hasOwnProperty(u($))},y.prototype.set=function($,ie){this.map[u($)]=h(ie)},y.prototype.forEach=function($,ie){for(var ge in this.map)this.map.hasOwnProperty(ge)&&$.call(ie,this.map[ge],ge,this)},y.prototype.keys=function(){var $=[];return this.forEach(function(ie,ge){$.push(ge)}),f($)},y.prototype.values=function(){var $=[];return this.forEach(function(ie){$.push(ie)}),f($)},y.prototype.entries=function(){var $=[];return this.forEach(function(ie,ge){$.push([ge,ie])}),f($)},a.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function b($){if(!$._noBody){if($.bodyUsed)return Promise.reject(new TypeError("Already read"));$.bodyUsed=!0}}function _($){return new Promise(function(ie,ge){$.onload=function(){ie($.result)},$.onerror=function(){ge($.error)}})}function A($){var ie=new FileReader,ge=_(ie);return ie.readAsArrayBuffer($),ge}function T($){var ie=new FileReader,ge=_(ie),Se=/charset=([A-Za-z0-9_-]+)/.exec($.type),tt=Se?Se[1]:"utf-8";return ie.readAsText($,tt),ge}function x($){for(var ie=new Uint8Array($),ge=new Array(ie.length),Se=0;Se<ie.length;Se++)ge[Se]=String.fromCharCode(ie[Se]);return ge.join("")}function O($){if($.slice)return $.slice(0);var ie=new Uint8Array($.byteLength);return ie.set(new Uint8Array($)),ie.buffer}function R(){return this.bodyUsed=!1,this._initBody=function($){this.bodyUsed=this.bodyUsed,this._bodyInit=$,$?typeof $=="string"?this._bodyText=$:a.blob&&Blob.prototype.isPrototypeOf($)?this._bodyBlob=$:a.formData&&FormData.prototype.isPrototypeOf($)?this._bodyFormData=$:a.searchParams&&URLSearchParams.prototype.isPrototypeOf($)?this._bodyText=$.toString():a.arrayBuffer&&a.blob&&o($)?(this._bodyArrayBuffer=O($.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf($)||l($))?this._bodyArrayBuffer=O($):this._bodyText=$=Object.prototype.toString.call($):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof $=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf($)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var $=b(this);if($)return $;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var $=b(this);return $||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(a.blob)return this.blob().then(A);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var $=b(this);if($)return $;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function P($){var ie=$.toUpperCase();return F.indexOf(ie)>-1?ie:$}function K($,ie){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');ie=ie||{};var ge=ie.body;if($ instanceof K){if($.bodyUsed)throw new TypeError("Already read");this.url=$.url,this.credentials=$.credentials,ie.headers||(this.headers=new y($.headers)),this.method=$.method,this.mode=$.mode,this.signal=$.signal,!ge&&$._bodyInit!=null&&(ge=$._bodyInit,$.bodyUsed=!0)}else this.url=String($);if(this.credentials=ie.credentials||this.credentials||"same-origin",(ie.headers||!this.headers)&&(this.headers=new y(ie.headers)),this.method=P(ie.method||this.method||"GET"),this.mode=ie.mode||this.mode||null,this.signal=ie.signal||this.signal||function(){if("AbortController"in i){var lt=new AbortController;return lt.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ge)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(ge),(this.method==="GET"||this.method==="HEAD")&&(ie.cache==="no-store"||ie.cache==="no-cache")){var Se=/([?&])_=[^&]*/;if(Se.test(this.url))this.url=this.url.replace(Se,"$1_="+new Date().getTime());else{var tt=/\?/;this.url+=(tt.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}K.prototype.clone=function(){return new K(this,{body:this._bodyInit})};function B($){var ie=new FormData;return $.trim().split("&").forEach(function(ge){if(ge){var Se=ge.split("="),tt=Se.shift().replace(/\+/g," "),lt=Se.join("=").replace(/\+/g," ");ie.append(decodeURIComponent(tt),decodeURIComponent(lt))}}),ie}function W($){var ie=new y,ge=$.replace(/\r?\n[\t ]+/g," ");return ge.split("\r").map(function(Se){return Se.indexOf(`
`)===0?Se.substr(1,Se.length):Se}).forEach(function(Se){var tt=Se.split(":"),lt=tt.shift().trim();if(lt){var Ne=tt.join(":").trim();try{ie.append(lt,Ne)}catch(yt){console.warn("Response "+yt.message)}}}),ie}R.call(K.prototype);function Y($,ie){if(!(this instanceof Y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(ie||(ie={}),this.type="default",this.status=ie.status===void 0?200:ie.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=ie.statusText===void 0?"":""+ie.statusText,this.headers=new y(ie.headers),this.url=ie.url||"",this._initBody($)}R.call(Y.prototype),Y.prototype.clone=function(){return new Y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},Y.error=function(){var $=new Y(null,{status:200,statusText:""});return $.ok=!1,$.status=0,$.type="error",$};var q=[301,302,303,307,308];Y.redirect=function($,ie){if(q.indexOf(ie)===-1)throw new RangeError("Invalid status code");return new Y(null,{status:ie,headers:{location:$}})},r.DOMException=i.DOMException;try{new r.DOMException}catch{r.DOMException=function(ie,ge){this.message=ie,this.name=ge;var Se=Error(ie);this.stack=Se.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function Pe($,ie){return new Promise(function(ge,Se){var tt=new K($,ie);if(tt.signal&&tt.signal.aborted)return Se(new r.DOMException("Aborted","AbortError"));var lt=new XMLHttpRequest;function Ne(){lt.abort()}lt.onload=function(){var rt={statusText:lt.statusText,headers:W(lt.getAllResponseHeaders()||"")};tt.url.indexOf("file://")===0&&(lt.status<200||lt.status>599)?rt.status=200:rt.status=lt.status,rt.url="responseURL"in lt?lt.responseURL:rt.headers.get("X-Request-URL");var J="response"in lt?lt.response:lt.responseText;setTimeout(function(){ge(new Y(J,rt))},0)},lt.onerror=function(){setTimeout(function(){Se(new TypeError("Network request failed"))},0)},lt.ontimeout=function(){setTimeout(function(){Se(new TypeError("Network request timed out"))},0)},lt.onabort=function(){setTimeout(function(){Se(new r.DOMException("Aborted","AbortError"))},0)};function yt(rt){try{return rt===""&&i.location.href?i.location.href:rt}catch{return rt}}if(lt.open(tt.method,yt(tt.url),!0),tt.credentials==="include"?lt.withCredentials=!0:tt.credentials==="omit"&&(lt.withCredentials=!1),"responseType"in lt&&(a.blob?lt.responseType="blob":a.arrayBuffer&&(lt.responseType="arraybuffer")),ie&&typeof ie.headers=="object"&&!(ie.headers instanceof y||i.Headers&&ie.headers instanceof i.Headers)){var ve=[];Object.getOwnPropertyNames(ie.headers).forEach(function(rt){ve.push(u(rt)),lt.setRequestHeader(rt,h(ie.headers[rt]))}),tt.headers.forEach(function(rt,J){ve.indexOf(J)===-1&&lt.setRequestHeader(J,rt)})}else tt.headers.forEach(function(rt,J){lt.setRequestHeader(J,rt)});tt.signal&&(tt.signal.addEventListener("abort",Ne),lt.onreadystatechange=function(){lt.readyState===4&&tt.signal.removeEventListener("abort",Ne)}),lt.send(typeof tt._bodyInit>"u"?null:tt._bodyInit)})}return Pe.polyfill=!0,i.fetch||(i.fetch=Pe,i.Headers=y,i.Request=K,i.Response=Y),r.Headers=y,r.Request=K,r.Response=Y,r.fetch=Pe,Object.defineProperty(r,"__esModule",{value:!0}),r})({})})(typeof self<"u"?self:i0)}()),i0}var of={},Cl={},Rw;function yx(){if(Rw)return Cl;Rw=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.removeDotSegmentsOfPath=Cl.removeDotSegments=Cl.resolve=void 0;function e(o,d){d=d||"";const l=d.indexOf("#");if(l>0&&(d=d.substr(0,l)),!o.length){if(d.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${d}' for value '${o}'`);return d}if(o.startsWith("?")){const A=d.indexOf("?");return A>0&&(d=d.substr(0,A)),d+o}if(o.startsWith("#"))return d+o;if(!d.length){const A=o.indexOf(":");if(A<0)throw new Error(`Found invalid relative IRI '${o}' for a missing baseIRI`);return i(o,A)}const u=o.indexOf(":");if(u>=0)return i(o,u);const h=d.indexOf(":");if(h<0)throw new Error(`Found invalid baseIRI '${d}' for value '${o}'`);const f=d.substr(0,h+1);if(o.indexOf("//")===0)return f+i(o,u);let y;if(d.indexOf("//",h)===h+1){if(y=d.indexOf("/",h+3),y<0)return d.length>h+3?d+"/"+i(o,u):f+i(o,u)}else if(y=d.indexOf("/",h+1),y<0)return f+i(o,u);if(o.indexOf("/")===0)return d.substr(0,y)+r(o);let b=d.substr(y);const _=b.lastIndexOf("/");return _>=0&&_<b.length-1&&(b=b.substr(0,_+1),o[0]==="."&&o[1]!=="."&&o[1]!=="/"&&o[2]&&(o=o.substr(1))),o=b+o,o=r(o),d.substr(0,y)+o}Cl.resolve=e;function r(o){const d=[];let l=0;for(;l<o.length;)switch(o[l]){case"/":if(o[l+1]===".")if(o[l+2]==="."){if(!a(o[l+3])){d.push([]),l++;break}d.pop(),o[l+3]||d.push([]),l+=3}else{if(!a(o[l+2])){d.push([]),l++;break}o[l+2]||d.push([]),l+=2}else d.push([]),l++;break;case"#":case"?":d.length||d.push([]),d[d.length-1].push(o.substr(l)),l=o.length;break;default:d.length||d.push([]),d[d.length-1].push(o[l]),l++;break}return"/"+d.map(u=>u.join("")).join("/")}Cl.removeDotSegments=r;function i(o,d){let l=d+1;d>=0?o[d+1]==="/"&&o[d+2]==="/"&&(l=d+3):o[0]==="/"&&o[1]==="/"&&(l=2);const u=o.indexOf("/",l);if(u<0)return o;const h=o.substr(0,u),f=o.substr(u);return h+r(f)}Cl.removeDotSegmentsOfPath=i;function a(o){return!o||o==="#"||o==="?"||o==="/"}return Cl}var xw;function Kv(){return xw||(xw=1,function(e){var r=of&&of.__createBinding||(Object.create?function(a,o,d,l){l===void 0&&(l=d),Object.defineProperty(a,l,{enumerable:!0,get:function(){return o[d]}})}:function(a,o,d,l){l===void 0&&(l=d),a[l]=o[d]}),i=of&&of.__exportStar||function(a,o){for(var d in a)d!=="default"&&!Object.prototype.hasOwnProperty.call(o,d)&&r(o,a,d)};Object.defineProperty(e,"__esModule",{value:!0}),i(yx(),e)}(of)),of}var a0={},Tw;function vg(){return Tw||(Tw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_CODES=e.ErrorCoded=void 0;class r extends Error{constructor(a,o){super(a),this.code=o}}e.ErrorCoded=r,function(i){i.COLLIDING_KEYWORDS="colliding keywords",i.CONFLICTING_INDEXES="conflicting indexes",i.CYCLIC_IRI_MAPPING="cyclic IRI mapping",i.INVALID_ID_VALUE="invalid @id value",i.INVALID_INDEX_VALUE="invalid @index value",i.INVALID_NEST_VALUE="invalid @nest value",i.INVALID_PREFIX_VALUE="invalid @prefix value",i.INVALID_PROPAGATE_VALUE="invalid @propagate value",i.INVALID_REVERSE_VALUE="invalid @reverse value",i.INVALID_IMPORT_VALUE="invalid @import value",i.INVALID_VERSION_VALUE="invalid @version value",i.INVALID_BASE_IRI="invalid base IRI",i.INVALID_CONTAINER_MAPPING="invalid container mapping",i.INVALID_CONTEXT_ENTRY="invalid context entry",i.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",i.INVALID_DEFAULT_LANGUAGE="invalid default language",i.INVALID_INCLUDED_VALUE="invalid @included value",i.INVALID_IRI_MAPPING="invalid IRI mapping",i.INVALID_JSON_LITERAL="invalid JSON literal",i.INVALID_KEYWORD_ALIAS="invalid keyword alias",i.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",i.INVALID_LANGUAGE_MAPPING="invalid language mapping",i.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",i.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",i.INVALID_LOCAL_CONTEXT="invalid local context",i.INVALID_REMOTE_CONTEXT="invalid remote context",i.INVALID_REVERSE_PROPERTY="invalid reverse property",i.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",i.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",i.INVALID_SCOPED_CONTEXT="invalid scoped context",i.INVALID_SCRIPT_ELEMENT="invalid script element",i.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",i.INVALID_TERM_DEFINITION="invalid term definition",i.INVALID_TYPE_MAPPING="invalid type mapping",i.INVALID_TYPE_VALUE="invalid type value",i.INVALID_TYPED_VALUE="invalid typed value",i.INVALID_VALUE_OBJECT="invalid value object",i.INVALID_VALUE_OBJECT_VALUE="invalid value object value",i.INVALID_VOCAB_MAPPING="invalid vocab mapping",i.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",i.KEYWORD_REDEFINITION="keyword redefinition",i.LOADING_DOCUMENT_FAILED="loading document failed",i.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",i.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",i.PROCESSING_MODE_CONFLICT="processing mode conflict",i.PROTECTED_TERM_REDEFINITION="protected term redefinition",i.CONTEXT_OVERFLOW="context overflow",i.INVALID_BASE_DIRECTION="invalid base direction",i.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",i.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",i.INVALID_EMBEDDED_NODE="invalid embedded node",i.INVALID_ANNOTATION="invalid annotation"}(e.ERROR_CODES||(e.ERROR_CODES={}))}(a0)),a0}var sp={},o0,Cw;function Gv(){if(Cw)return o0;Cw=1;var e=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,r=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,i=/\s|\uFEFF|\xA0/,a=/\r?\n[\x20\x09]+/g,o=/[;,"]/,d=/[;,"]|\s/,l=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,u={IDLE:1,URI:2,ATTR:4};function h(T){return T.replace(r,"")}function f(T){return i.test(T)}function y(T,x){for(;f(T[x]);)x++;return x}function b(T){return d.test(T)||!l.test(T)}function _(T,x){return Object.keys(T).length===Object.keys(x).length&&Object.keys(T).every(O=>O in x&&T[O]===x[O])}class A{constructor(x){this.refs=[],x&&this.parse(x)}rel(x){for(var O=[],R=x.toLowerCase(),F=0;F<this.refs.length;F++)typeof this.refs[F].rel=="string"&&this.refs[F].rel.toLowerCase()===R&&O.push(this.refs[F]);return O}get(x,O){x=x.toLowerCase(),O=O.toLowerCase();for(var R=[],F=0;F<this.refs.length;F++)typeof this.refs[F][x]=="string"&&this.refs[F][x].toLowerCase()===O&&R.push(this.refs[F]);return R}set(x){return this.refs.push(x),this}setUnique(x){return this.refs.some(O=>_(O,x))||this.refs.push(x),this}has(x,O){x=x.toLowerCase(),O=O.toLowerCase();for(var R=0;R<this.refs.length;R++)if(typeof this.refs[R][x]=="string"&&this.refs[R][x].toLowerCase()===O)return!0;return!1}parse(x,P){P=P||0,x=P?x.slice(P):x,x=h(x).replace(a,"");for(var R=u.IDLE,F=x.length,P=0,K=null;P<F;)if(R===u.IDLE){if(f(x[P])){P++;continue}else if(x[P]==="<"){K!=null&&(K.rel!=null?this.refs.push(...A.expandRelations(K)):this.refs.push(K));var B=x.indexOf(">",P);if(B===-1)throw new Error("Expected end of URI delimiter at offset "+P);K={uri:x.slice(P+1,B)},P=B,R=u.URI}else throw new Error('Unexpected character "'+x[P]+'" at offset '+P);P++}else if(R===u.URI)if(f(x[P])){P++;continue}else if(x[P]===";")R=u.ATTR,P++;else if(x[P]===",")R=u.IDLE,P++;else throw new Error('Unexpected character "'+x[P]+'" at offset '+P);else if(R===u.ATTR){if(x[P]===";"||f(x[P])){P++;continue}var B=x.indexOf("=",P);B===-1&&(B=x.indexOf(";",P)),B===-1&&(B=x.length);var W=h(x.slice(P,B)).toLowerCase(),Y="";if(P=B+1,P=y(x,P),x[P]==='"')for(P++;P<F;){if(x[P]==='"'){P++;break}x[P]==="\\"&&P++,Y+=x[P],P++}else{for(var B=P+1;!o.test(x[B])&&B<F;)B++;Y=x.slice(P,B),P=B}switch(K[W]&&A.isSingleOccurenceAttr(W)||(W[W.length-1]==="*"?K[W]=A.parseExtendedValue(Y):(Y=W==="type"?Y.toLowerCase():Y,K[W]!=null?Array.isArray(K[W])?K[W].push(Y):K[W]=[K[W],Y]:K[W]=Y)),x[P]){case",":R=u.IDLE;break;case";":R=u.ATTR;break}P++}else throw new Error('Unknown parser state "'+R+'"');return K!=null&&(K.rel!=null?this.refs.push(...A.expandRelations(K)):this.refs.push(K)),K=null,this}toString(){for(var x=[],O="",R=null,F=0;F<this.refs.length;F++)R=this.refs[F],O=Object.keys(this.refs[F]).reduce(function(P,K){return K==="uri"?P:P+"; "+A.formatAttribute(K,R[K])},"<"+R.uri+">"),x.push(O);return x.join(", ")}}return A.isCompatibleEncoding=function(T){return e.test(T)},A.parse=function(T,x){return new A().parse(T,x)},A.isSingleOccurenceAttr=function(T){return T==="rel"||T==="type"||T==="media"||T==="title"||T==="title*"},A.isTokenAttr=function(T){return T==="rel"||T==="type"||T==="anchor"},A.escapeQuotes=function(T){return T.replace(/"/g,'\\"')},A.expandRelations=function(T){var x=T.rel.split(" ");return x.map(function(O){var R=Object.assign({},T);return R.rel=O,R})},A.parseExtendedValue=function(T){var x=/([^']+)?(?:'([^']*)')?(.+)/.exec(T);return{language:x[2].toLowerCase(),encoding:A.isCompatibleEncoding(x[1])?null:x[1].toLowerCase(),value:A.isCompatibleEncoding(x[1])?decodeURIComponent(x[3]):x[3]}},A.formatExtendedAttribute=function(T,x){var O=(x.encoding||"utf-8").toUpperCase(),R=x.language||"en",F="";return Buffer.isBuffer(x.value)&&A.isCompatibleEncoding(O)?F=x.value.toString(O):Buffer.isBuffer(x.value)?F=x.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):F=encodeURIComponent(x.value),T+"="+O+"'"+R+"'"+F},A.formatAttribute=function(T,x){return Array.isArray(x)?x.map(O=>A.formatAttribute(T,O)).join("; "):T[T.length-1]==="*"||typeof x!="string"?A.formatExtendedAttribute(T,x):(A.isTokenAttr(T)?x=b(x)?'"'+A.escapeQuotes(x)+'"':A.escapeQuotes(x):b(x)&&(x=encodeURIComponent(x),x=x.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),x='"'+x+'"'),T+"="+x)},o0=A,o0}var Ow;function EE(){if(Ow)return sp;Ow=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.FetchDocumentLoader=void 0,SE();const e=vg(),r=Gv(),i=Kv();let a=class{constructor(d){this.fetcher=d}async load(d){const l=await(this.fetcher||fetch)(d,{headers:new Headers({accept:"application/ld+json"})});if(l.ok&&l.headers){let u=l.headers.get("Content-Type");if(u){const h=u.indexOf(";");h>0&&(u=u.substr(0,h))}if(u==="application/ld+json")return await l.json();if(l.headers.has("Link")){let h;if(l.headers.forEach((f,y)=>{if(y==="link"){const b=(0,r.parse)(f);for(const _ of b.get("type","application/ld+json"))if(_.rel==="alternate"){if(h)throw new Error("Multiple JSON-LD alternate links were found on "+d);h=(0,i.resolve)(_.uri,d)}}}),h)return this.load(h)}throw new e.ErrorCoded(`Unsupported JSON-LD media type ${u}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(l.statusText||`Status code: ${l.status}`)}};return sp.FetchDocumentLoader=a,sp}var s0={},lp={},Iw;function qv(){if(Iw)return lp;Iw=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.Util=void 0;class e{static isCompactIri(i){return i.indexOf(":")>0&&!(i&&i[0]==="#")}static getPrefix(i,a){if(i&&i[0]==="#")return null;const o=i.indexOf(":");if(o>=0){if(i.length>o+1&&i.charAt(o+1)==="/"&&i.charAt(o+2)==="/")return null;const d=i.substr(0,o);if(d==="_")return null;if(a[d])return d}return null}static getContextValueId(i){if(i===null||typeof i=="string")return i;const a=i["@id"];return a||null}static isSimpleTermDefinitionPrefix(i,a){return!e.isPotentialKeyword(i)&&(a.allowPrefixNonGenDelims||typeof i=="string"&&(i[0]==="_"||e.isPrefixIriEndingWithGenDelim(i)))}static isPotentialKeyword(i){return typeof i=="string"&&e.KEYWORD_REGEX.test(i)}static isPrefixIriEndingWithGenDelim(i){return e.ENDS_WITH_GEN_DELIM.test(i)}static isPrefixValue(i){return i&&(typeof i=="string"||i&&typeof i=="object")}static isValidIri(i){return!!(i&&e.IRI_REGEX.test(i))}static isValidIriWeak(i){return!!i&&i[0]!==":"&&e.IRI_REGEX_WEAK.test(i)}static isValidKeyword(i){return e.VALID_KEYWORDS[i]}static isTermProtected(i,a){const o=i[a];return typeof o!="string"&&o&&o["@protected"]}static hasProtectedTerms(i){for(const a of Object.keys(i))if(e.isTermProtected(i,a))return!0;return!1}static isReservedInternalKeyword(i){return i.startsWith("@__")}static deepEqual(i,a){const o=Object.keys(i),d=Object.keys(a);return o.length!==d.length?!1:o.every(l=>{const u=i[l],h=a[l];return u===h||u!==null&&h!==null&&typeof u=="object"&&typeof h=="object"&&this.deepEqual(u,h)})}}return e.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,e.IRI_REGEX_WEAK=/(?::[^:])|\//,e.KEYWORD_REGEX=/^@[a-z]+$/i,e.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,e.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,e.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,e.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},e.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],e.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],e.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],e.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],e.CONTAINERS_1_0=["@list","@set","@index"],lp.Util=e,lp}var Pw;function AE(){return Pw||(Pw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultExpandOptions=e.JsonLdContextNormalized=void 0;const r=Kv(),i=vg(),a=qv();class o{constructor(l){this.contextRaw=l}getContextRaw(){return this.contextRaw}expandTerm(l,u,h=e.defaultExpandOptions){const f=this.contextRaw[l];if(f===null||f&&f["@id"]===null)return null;let y=!0;if(f&&u){const O=a.Util.getContextValueId(f);if(O&&O!==l)if(typeof O!="string"||!a.Util.isValidIri(O)&&!a.Util.isValidKeyword(O))a.Util.isPotentialKeyword(O)||(y=!1);else return O}const b=a.Util.getPrefix(l,this.contextRaw),_=this.contextRaw["@vocab"],A=(!!_||_==="")&&_.indexOf(":")<0,T=this.contextRaw["@base"],x=a.Util.isPotentialKeyword(l);if(b){const O=this.contextRaw[b],R=a.Util.getContextValueId(O);if(R){if(typeof O=="string"||!h.allowPrefixForcing){if(!a.Util.isSimpleTermDefinitionPrefix(R,h))return l}else if(R[0]!=="_"&&!x&&!O["@prefix"]&&!(l in this.contextRaw))return l;return R+l.substr(b.length+1)}}else if(u&&(_||_===""||h.allowVocabRelativeToBase&&T&&A)&&!x&&!a.Util.isCompactIri(l))if(A){if(h.allowVocabRelativeToBase)return(_||T?(0,r.resolve)(_,T):"")+l;throw new i.ErrorCoded(`Relative vocab expansion for term '${l}' with vocab '${_}' is not allowed.`,i.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return _+l;else if(!u&&T&&!x&&!a.Util.isCompactIri(l))return(0,r.resolve)(l,T);if(y)return l;throw new i.ErrorCoded(`Invalid IRI mapping found for context entry '${l}': '${JSON.stringify(f)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(l,u){if(u&&this.contextRaw["@vocab"]&&l.startsWith(this.contextRaw["@vocab"]))return l.substr(this.contextRaw["@vocab"].length);if(!u&&this.contextRaw["@base"]&&l.startsWith(this.contextRaw["@base"]))return l.substr(this.contextRaw["@base"].length);const h={prefix:"",suffix:l};for(const f in this.contextRaw){const y=this.contextRaw[f];if(y&&!a.Util.isPotentialKeyword(f)){const b=a.Util.getContextValueId(y);if(l.startsWith(b)){const _=l.substr(b.length);if(_)_.length<h.suffix.length&&(h.prefix=f,h.suffix=_);else if(u)return f}}}return h.prefix?h.prefix+":"+h.suffix:l}}e.JsonLdContextNormalized=o,e.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(s0)),s0}var Nw;function mx(){if(Nw)return op;Nw=1,Object.defineProperty(op,"__esModule",{value:!0}),op.ContextParser=void 0,SE();const e=Kv(),r=vg(),i=EE(),a=AE(),o=qv();let d=class uf{constructor(u){u=u||{},this.documentLoader=u.documentLoader||new i.FetchDocumentLoader,this.documentCache={},this.validateContext=!u.skipValidation,this.expandContentTypeToBase=!!u.expandContentTypeToBase,this.remoteContextsDepthLimit=u.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in u?!!u.redirectSchemaOrgHttps:!0}static validateLanguage(u,h,f){if(typeof u!="string")throw new r.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(u)}'`,f);if(!o.Util.REGEX_LANGUAGE_TAG.test(u)){if(h)throw new r.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(u)}'`,f);return!1}return!0}static validateDirection(u,h){if(typeof u!="string")throw new r.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(u)}'`,r.ERROR_CODES.INVALID_BASE_DIRECTION);if(!o.Util.REGEX_DIRECTION_TAG.test(u)){if(h)throw new r.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(u)}'`,r.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(u){for(const h of Object.keys(u)){let f=u[h];if(f&&typeof f=="object"&&f["@reverse"]&&!f["@id"]){if(typeof f["@reverse"]!="string"||o.Util.isValidKeyword(f["@reverse"]))throw new r.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${f["@reverse"]}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);f=u[h]=Object.assign(Object.assign({},f),{"@id":f["@reverse"]}),f["@id"]=f["@reverse"],o.Util.isPotentialKeyword(f["@reverse"])?delete f["@reverse"]:f["@reverse"]=!0}}return u}expandPrefixedTerms(u,h,f){const y=u.getContextRaw();for(const b of f||Object.keys(y))if(o.Util.EXPAND_KEYS_BLACKLIST.indexOf(b)<0&&!o.Util.isReservedInternalKeyword(b)){const _=y[b];if(o.Util.isPotentialKeyword(b)&&o.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(b)>=0&&(b!=="@type"||typeof y[b]=="object"&&!(y[b]["@protected"]||y[b]["@container"]==="@set")))throw new r.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${b} to ${JSON.stringify(_)}`,r.ERROR_CODES.KEYWORD_REDEFINITION);if(o.Util.ALIAS_RANGE_BLACKLIST.indexOf(o.Util.getContextValueId(_))>=0)throw new r.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${b} to ${JSON.stringify(_)}`,r.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(_&&o.Util.isPotentialKeyword(o.Util.getContextValueId(_))&&_["@prefix"]===!0)throw new r.ErrorCoded(`Tried to use keyword aliases as prefix: '${b}': '${JSON.stringify(_)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);for(;o.Util.isPrefixValue(y[b]);){const A=y[b];let T=!1;if(typeof A=="string")y[b]=u.expandTerm(A,!0),T=T||A!==y[b];else{const x=A["@id"],O=A["@type"],R=!("@prefix"in A)||o.Util.isValidIri(b);if("@id"in A)x!=null&&typeof x=="string"&&(y[b]=Object.assign(Object.assign({},y[b]),{"@id":u.expandTerm(x,!0)}),T=T||x!==y[b]["@id"]);else if(!o.Util.isPotentialKeyword(b)&&R){const F=u.expandTerm(b,!0);F!==b&&(y[b]=Object.assign(Object.assign({},y[b]),{"@id":F}),T=!0)}if(O&&typeof O=="string"&&O!=="@vocab"&&(!A["@container"]||!A["@container"]["@type"])&&R){let F=u.expandTerm(O,!0);h&&O===F&&(F=u.expandTerm(O,!1)),F!==O&&(T=!0,y[b]=Object.assign(Object.assign({},y[b]),{"@type":F}))}}if(!T)break}}}normalize(u,{processingMode:h,normalizeLanguageTags:f}){if(f||h===1)for(const y of Object.keys(u))if(y==="@language"&&typeof u[y]=="string")u[y]=u[y].toLowerCase();else{const b=u[y];if(b&&typeof b=="object"&&typeof b["@language"]=="string"){const _=b["@language"].toLowerCase();_!==b["@language"]&&(u[y]=Object.assign(Object.assign({},b),{"@language":_}))}}}containersToHash(u){for(const h of Object.keys(u)){const f=u[h];if(f&&typeof f=="object"){if(typeof f["@container"]=="string")u[h]=Object.assign(Object.assign({},f),{"@container":{[f["@container"]]:!0}});else if(Array.isArray(f["@container"])){const y={};for(const b of f["@container"])y[b]=!0;u[h]=Object.assign(Object.assign({},f),{"@container":y})}}}}applyScopedProtected(u,{processingMode:h},f){if(h&&h>=1.1&&u["@protected"]){for(const y of Object.keys(u))if(!o.Util.isReservedInternalKeyword(y)&&!o.Util.isPotentialKeyword(y)&&!o.Util.isTermProtected(u,y)){const b=u[y];b&&typeof b=="object"?"@protected"in u[y]||(u[y]=Object.assign(Object.assign({},u[y]),{"@protected":!0})):(u[y]={"@id":b,"@protected":!0},o.Util.isSimpleTermDefinitionPrefix(b,f)&&(u[y]=Object.assign(Object.assign({},u[y]),{"@prefix":!0})))}delete u["@protected"]}}validateKeywordRedefinitions(u,h,f,y){for(const b of y??Object.keys(h))if(o.Util.isTermProtected(u,b)&&(typeof h[b]=="string"?h[b]={"@id":h[b],"@protected":!0}:h[b]=Object.assign(Object.assign({},h[b]),{"@protected":!0}),!o.Util.deepEqual(u[b],h[b])))throw new r.ErrorCoded(`Attempted to override the protected keyword ${b} from ${JSON.stringify(o.Util.getContextValueId(u[b]))} to ${JSON.stringify(o.Util.getContextValueId(h[b]))}`,r.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(u,{processingMode:h}){for(const f of Object.keys(u)){if(o.Util.isReservedInternalKeyword(f))continue;if(f==="")throw new r.ErrorCoded(`The empty term is not allowed, got: '${f}': '${JSON.stringify(u[f])}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);const y=u[f],b=typeof y;if(o.Util.isPotentialKeyword(f)){switch(f.substr(1)){case"vocab":if(y!==null&&b!=="string")throw new r.ErrorCoded(`Found an invalid @vocab IRI: ${y}`,r.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(y!==null&&b!=="string")throw new r.ErrorCoded(`Found an invalid @base IRI: ${u[f]}`,r.ERROR_CODES.INVALID_BASE_IRI);break;case"language":y!==null&&uf.validateLanguage(y,!0,r.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(y!==null&&b!=="number")throw new r.ErrorCoded(`Found an invalid @version number: ${y}`,r.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":y!==null&&uf.validateDirection(y,!0);break;case"propagate":if(h===1)throw new r.ErrorCoded(`Found an illegal @propagate keyword: ${y}`,r.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(y!==null&&b!=="boolean")throw new r.ErrorCoded(`Found an invalid @propagate value: ${y}`,r.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(o.Util.isValidKeyword(f)&&o.Util.isValidKeyword(o.Util.getContextValueId(y)))throw new r.ErrorCoded(`Illegal keyword alias in term value, found: '${f}': '${o.Util.getContextValueId(y)}'`,r.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(y!==null)switch(b){case"string":if(o.Util.getPrefix(y,u)===f)throw new r.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${f}': '${JSON.stringify(y)}'`,r.ERROR_CODES.CYCLIC_IRI_MAPPING);if(o.Util.isValidIriWeak(f)){if(y==="@type")throw new r.ErrorCoded(`IRIs can not be mapped to @type, found: '${f}': '${y}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(o.Util.isValidIri(y)&&y!==new a.JsonLdContextNormalized(u).expandTerm(f))throw new r.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${f}': '${y}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!o.Util.isCompactIri(f)&&!("@id"in y)&&(y["@type"]==="@id"?!u["@base"]:!u["@vocab"]))throw new r.ErrorCoded(`Missing @id in context entry: '${f}': '${JSON.stringify(y)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);for(const _ of Object.keys(y)){const A=y[_];if(A)switch(_){case"@id":if(o.Util.isValidKeyword(A)&&A!=="@type"&&A!=="@id"&&A!=="@graph"&&A!=="@nest")throw new r.ErrorCoded(`Illegal keyword alias in term value, found: '${f}': '${JSON.stringify(y)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(o.Util.isValidIriWeak(f)){if(A==="@type")throw new r.ErrorCoded(`IRIs can not be mapped to @type, found: '${f}': '${JSON.stringify(y)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(o.Util.isValidIri(A)&&A!==new a.JsonLdContextNormalized(u).expandTerm(f))throw new r.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${f}': '${JSON.stringify(y)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof A!="string")throw new r.ErrorCoded(`Detected non-string @id in context entry: '${f}': '${JSON.stringify(y)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING);if(o.Util.getPrefix(A,u)===f)throw new r.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${f}': '${JSON.stringify(y)}'`,r.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(y["@container"]==="@type"&&A!=="@id"&&A!=="@vocab")throw new r.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${f}': '${A}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof A!="string")throw new r.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(b)}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);if(A!=="@id"&&A!=="@vocab"&&(h===1||A!=="@json")&&(h===1||A!=="@none")&&(A[0]==="_"||!o.Util.isValidIri(A)))throw new r.ErrorCoded(`A context @type must be an absolute IRI, found: '${f}': '${A}'`,r.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof A=="string"&&y["@id"]&&y["@id"]!==A)throw new r.ErrorCoded(`Found non-matching @id and @reverse term values in '${f}':'${A}' and '${y["@id"]}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in y)throw new r.ErrorCoded(`@nest is not allowed in the reverse property '${f}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(h===1&&(Object.keys(A).length>1||o.Util.CONTAINERS_1_0.indexOf(Object.keys(A)[0])<0))throw new r.ErrorCoded(`Invalid term @container for '${f}' ('${Object.keys(A)}') in 1.0, must be only one of ${o.Util.CONTAINERS_1_0.join(", ")}`,r.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const T of Object.keys(A)){if(T==="@list"&&y["@reverse"])throw new r.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${f}'`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(o.Util.CONTAINERS.indexOf(T)<0)throw new r.ErrorCoded(`Invalid term @container for '${f}' ('${T}'), must be one of ${o.Util.CONTAINERS.join(", ")}`,r.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":uf.validateLanguage(A,!0,r.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":uf.validateDirection(A,!0);break;case"@prefix":if(A!==null&&typeof A!="boolean")throw new r.ErrorCoded(`Found an invalid term @prefix boolean in: '${f}': '${JSON.stringify(y)}'`,r.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in y)&&!o.Util.isValidIri(f))throw new r.ErrorCoded(`Invalid @prefix definition for '${f}' ('${JSON.stringify(y)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(h===1||!y["@container"]||!y["@container"]["@index"])throw new r.ErrorCoded(`Attempt to add illegal key to value object: '${f}': '${JSON.stringify(y)}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(o.Util.isPotentialKeyword(A)&&A!=="@nest")throw new r.ErrorCoded(`Found an invalid term @nest value in: '${f}': '${JSON.stringify(y)}'`,r.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new r.ErrorCoded(`Found an invalid term value: '${f}': '${y}'`,r.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(u,h,f){return typeof u=="string"||(f&&!("@base"in u)&&h.parentContext&&typeof h.parentContext=="object"&&"@base"in h.parentContext&&(u["@base"]=h.parentContext["@base"],h.parentContext["@__baseDocument"]&&(u["@__baseDocument"]=!0)),h.baseIRI&&!h.external&&("@base"in u?u["@base"]!==null&&typeof u["@base"]=="string"&&!o.Util.isValidIri(u["@base"])&&(u["@base"]=(0,e.resolve)(u["@base"],h.parentContext&&h.parentContext["@base"]||h.baseIRI)):(u["@base"]=h.baseIRI,u["@__baseDocument"]=!0))),u}normalizeContextIri(u,h){if(!o.Util.isValidIri(u))try{u=(0,e.resolve)(u,h)}catch{throw new Error(`Invalid context IRI: ${u}`)}return this.redirectSchemaOrgHttps&&u.startsWith("http://schema.org")&&(u="https://schema.org/"),u}async parseInnerContexts(u,h,f){for(const y of f??Object.keys(u)){const b=u[y];if(b&&typeof b=="object"&&"@context"in b&&b["@context"]!==null&&!h.ignoreScopedContexts){if(this.validateContext)try{const _=Object.assign(Object.assign({},u),{[y]:Object.assign({},u[y])});delete _[y]["@context"],await this.parse(b["@context"],Object.assign(Object.assign({},h),{external:!1,parentContext:_,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(_){throw new r.ErrorCoded(_.message,r.ERROR_CODES.INVALID_SCOPED_CONTEXT)}u[y]=Object.assign(Object.assign({},b),{"@context":(await this.parse(b["@context"],Object.assign(Object.assign({},h),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:u}))).getContextRaw()})}}return u}async parse(u,h={},f={}){const{baseIRI:y,parentContext:b,external:_,processingMode:A=uf.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:T,ignoreProtection:x,minimalProcessing:O}=h,R=h.remoteContexts||{};if(Object.keys(R).length>=this.remoteContextsDepthLimit)throw new r.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(R),r.ERROR_CODES.CONTEXT_OVERFLOW);if(u==null){if(!x&&b&&o.Util.hasProtectedTerms(b))throw new r.ErrorCoded("Illegal context nullification when terms are protected",r.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new a.JsonLdContextNormalized(this.applyBaseEntry({},h,!1))}else if(typeof u=="string"){const F=this.normalizeContextIri(u,y),P=this.getOverriddenLoad(F,h);if(P)return new a.JsonLdContextNormalized(P);const K=await this.parse(await this.load(F),Object.assign(Object.assign({},h),{baseIRI:F,external:!0,remoteContexts:Object.assign(Object.assign({},R),{[F]:!0})}));return this.applyBaseEntry(K.getContextRaw(),h,!0),K}else if(Array.isArray(u)){const F=[],P=await Promise.all(u.map((B,W)=>{if(typeof B=="string"){const Y=this.normalizeContextIri(B,y);F[W]=Y;const q=this.getOverriddenLoad(Y,h);return q||this.load(Y)}else return B}));if(O)return new a.JsonLdContextNormalized(P);const K=await P.reduce((B,W,Y)=>B.then(q=>this.parse(W,Object.assign(Object.assign({},h),{baseIRI:F[Y]||h.baseIRI,external:!!F[Y]||h.external,parentContext:q.getContextRaw(),remoteContexts:F[Y]?Object.assign(Object.assign({},R),{[F[Y]]:!0}):R}),{skipValidation:Y<P.length-1})),Promise.resolve(new a.JsonLdContextNormalized(b||{})));return this.applyBaseEntry(K.getContextRaw(),h,!0),K}else if(typeof u=="object"){if("@context"in u)return await this.parse(u["@context"],h);if(u=Object.assign({},u),_&&delete u["@base"],this.applyBaseEntry(u,h,!0),this.containersToHash(u),O)return new a.JsonLdContextNormalized(u);let F={};if("@import"in u)if(A>=1.1){if(typeof u["@import"]!="string")throw new r.ErrorCoded("An @import value must be a string, but got "+typeof u["@import"],r.ERROR_CODES.INVALID_IMPORT_VALUE);F=await this.loadImportContext(this.normalizeContextIri(u["@import"],y)),delete u["@import"]}else throw new r.ErrorCoded("Context importing is not supported in JSON-LD 1.0",r.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(F,{processingMode:A},a.defaultExpandOptions);const P=Object.assign(F,u);this.idifyReverseTerms(P),this.normalize(P,{processingMode:A,normalizeLanguageTags:T}),this.applyScopedProtected(P,{processingMode:A},a.defaultExpandOptions);const K=Object.keys(P),B=[];if(typeof b=="object")for(const Y in b)Y in P?B.push(Y):P[Y]=b[Y];await this.parseInnerContexts(P,h,K);const W=new a.JsonLdContextNormalized(P);return(P&&P["@version"]||uf.DEFAULT_PROCESSING_MODE)>=1.1&&(u["@vocab"]&&typeof u["@vocab"]=="string"||u["@vocab"]==="")&&(b&&"@vocab"in b&&u["@vocab"].indexOf(":")<0?P["@vocab"]=b["@vocab"]+u["@vocab"]:(o.Util.isCompactIri(u["@vocab"])||u["@vocab"]in P)&&(P["@vocab"]=W.expandTerm(u["@vocab"],!0))),this.expandPrefixedTerms(W,this.expandContentTypeToBase,K),!x&&b&&A>=1.1&&this.validateKeywordRedefinitions(b,P,a.defaultExpandOptions,B),this.validateContext&&!f.skipValidation&&this.validate(P,{processingMode:A}),W}else throw new r.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${u}`,r.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(u){const h=this.documentCache[u];if(h)return h;let f;try{f=await this.documentLoader.load(u)}catch(y){throw new r.ErrorCoded(`Failed to load remote context ${u}: ${y.message}`,r.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in f))throw new r.ErrorCoded(`Missing @context in remote context at ${u}`,r.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[u]=f["@context"]}getOverriddenLoad(u,h){if(u in(h.remoteContexts||{})){if(h.ignoreRemoteScopedContexts)return u;throw new r.ErrorCoded("Detected a cyclic context inclusion of "+u,r.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(u){let h=await this.load(u);if(typeof h!="object"||Array.isArray(h))throw new r.ErrorCoded("An imported context must be a single object: "+u,r.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in h)throw new r.ErrorCoded("An imported context can not import another context: "+u,r.ERROR_CODES.INVALID_CONTEXT_ENTRY);return h=Object.assign({},h),this.containersToHash(h),h}};return d.DEFAULT_PROCESSING_MODE=1.1,op.ContextParser=d,op}var l0={},Fw;function vx(){return Fw||(Fw=1,Object.defineProperty(l0,"__esModule",{value:!0})),l0}var u0={},Dw;function bx(){return Dw||(Dw=1,Object.defineProperty(u0,"__esModule",{value:!0})),u0}var Uw;function Ra(){return Uw||(Uw=1,function(e){var r=af&&af.__createBinding||(Object.create?function(a,o,d,l){l===void 0&&(l=d);var u=Object.getOwnPropertyDescriptor(o,d);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[d]}}),Object.defineProperty(a,l,u)}:function(a,o,d,l){l===void 0&&(l=d),a[l]=o[d]}),i=af&&af.__exportStar||function(a,o){for(var d in a)d!=="default"&&!Object.prototype.hasOwnProperty.call(o,d)&&r(o,a,d)};Object.defineProperty(e,"__esModule",{value:!0}),i(mx(),e),i(vg(),e),i(EE(),e),i(vx(),e),i(bx(),e),i(AE(),e),i(qv(),e)}(af)),af}var c0={exports:{}},f0={exports:{}},d0,Lw;function yi(){if(Lw)return d0;Lw=1;class e extends Error{constructor(i){if(!Array.isArray(i))throw new TypeError(`Expected input to be an Array, got ${typeof i}`);let a="";for(let o=0;o<i.length;o++)a+=`    ${i[o].stack}
`;super(a),this.name="AggregateError",this.errors=i}}return d0={AggregateError:e,ArrayIsArray(r){return Array.isArray(r)},ArrayPrototypeIncludes(r,i){return r.includes(i)},ArrayPrototypeIndexOf(r,i){return r.indexOf(i)},ArrayPrototypeJoin(r,i){return r.join(i)},ArrayPrototypeMap(r,i){return r.map(i)},ArrayPrototypePop(r,i){return r.pop(i)},ArrayPrototypePush(r,i){return r.push(i)},ArrayPrototypeSlice(r,i,a){return r.slice(i,a)},Error,FunctionPrototypeCall(r,i,...a){return r.call(i,...a)},FunctionPrototypeSymbolHasInstance(r,i){return Function.prototype[Symbol.hasInstance].call(r,i)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(r,i){return Object.defineProperties(r,i)},ObjectDefineProperty(r,i,a){return Object.defineProperty(r,i,a)},ObjectGetOwnPropertyDescriptor(r,i){return Object.getOwnPropertyDescriptor(r,i)},ObjectKeys(r){return Object.keys(r)},ObjectSetPrototypeOf(r,i){return Object.setPrototypeOf(r,i)},Promise,PromisePrototypeCatch(r,i){return r.catch(i)},PromisePrototypeThen(r,i,a){return r.then(i,a)},PromiseReject(r){return Promise.reject(r)},PromiseResolve(r){return Promise.resolve(r)},ReflectApply:Reflect.apply,RegExpPrototypeTest(r,i){return r.test(i)},SafeSet:Set,String,StringPrototypeSlice(r,i,a){return r.slice(i,a)},StringPrototypeToLowerCase(r){return r.toLowerCase()},StringPrototypeToUpperCase(r){return r.toUpperCase()},StringPrototypeTrim(r){return r.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(r,i,a){return r.set(i,a)},Boolean,Uint8Array},d0}var h0={exports:{}},p0,Mw;function RE(){return Mw||(Mw=1,p0={format(e,...r){return e.replace(/%([sdifj])/g,function(...[i,a]){const o=r.shift();return a==="f"?o.toFixed(6):a==="j"?JSON.stringify(o):a==="s"&&typeof o=="object"?`${o.constructor!==Object?o.constructor.name:""} {}`.trim():o.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),p0}var g0,kw;function xa(){if(kw)return g0;kw=1;const{format:e,inspect:r}=RE(),{AggregateError:i}=yi(),a=globalThis.AggregateError||i,o=Symbol("kIsNodeError"),d=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,u="__node_internal_",h={};function f(O,R){if(!O)throw new h.ERR_INTERNAL_ASSERTION(R)}function y(O){let R="",F=O.length;const P=O[0]==="-"?1:0;for(;F>=P+4;F-=3)R=`_${O.slice(F-3,F)}${R}`;return`${O.slice(0,F)}${R}`}function b(O,R,F){if(typeof R=="function")return f(R.length<=F.length,`Code: ${O}; The provided arguments length (${F.length}) does not match the required ones (${R.length}).`),R(...F);const P=(R.match(/%[dfijoOs]/g)||[]).length;return f(P===F.length,`Code: ${O}; The provided arguments length (${F.length}) does not match the required ones (${P}).`),F.length===0?R:e(R,...F)}function _(O,R,F){F||(F=Error);class P extends F{constructor(...B){super(b(O,R,B))}toString(){return`${this.name} [${O}]: ${this.message}`}}Object.defineProperties(P.prototype,{name:{value:F.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${O}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),P.prototype.code=O,P.prototype[o]=!0,h[O]=P}function A(O){const R=u+O.name;return Object.defineProperty(O,"name",{value:R}),O}function T(O,R){if(O&&R&&O!==R){if(Array.isArray(R.errors))return R.errors.push(O),R;const F=new a([R,O],R.message);return F.code=R.code,F}return O||R}class x extends Error{constructor(R="The operation was aborted",F=void 0){if(F!==void 0&&typeof F!="object")throw new h.ERR_INVALID_ARG_TYPE("options","Object",F);super(R,F),this.code="ABORT_ERR",this.name="AbortError"}}return _("ERR_ASSERTION","%s",Error),_("ERR_INVALID_ARG_TYPE",(O,R,F)=>{f(typeof O=="string","'name' must be a string"),Array.isArray(R)||(R=[R]);let P="The ";O.endsWith(" argument")?P+=`${O} `:P+=`"${O}" ${O.includes(".")?"property":"argument"} `,P+="must be ";const K=[],B=[],W=[];for(const q of R)f(typeof q=="string","All expected entries have to be of type string"),d.includes(q)?K.push(q.toLowerCase()):l.test(q)?B.push(q):(f(q!=="object",'The value "object" should be written as "Object"'),W.push(q));if(B.length>0){const q=K.indexOf("object");q!==-1&&(K.splice(K,q,1),B.push("Object"))}if(K.length>0){switch(K.length){case 1:P+=`of type ${K[0]}`;break;case 2:P+=`one of type ${K[0]} or ${K[1]}`;break;default:{const q=K.pop();P+=`one of type ${K.join(", ")}, or ${q}`}}(B.length>0||W.length>0)&&(P+=" or ")}if(B.length>0){switch(B.length){case 1:P+=`an instance of ${B[0]}`;break;case 2:P+=`an instance of ${B[0]} or ${B[1]}`;break;default:{const q=B.pop();P+=`an instance of ${B.join(", ")}, or ${q}`}}W.length>0&&(P+=" or ")}switch(W.length){case 0:break;case 1:W[0].toLowerCase()!==W[0]&&(P+="an "),P+=`${W[0]}`;break;case 2:P+=`one of ${W[0]} or ${W[1]}`;break;default:{const q=W.pop();P+=`one of ${W.join(", ")}, or ${q}`}}if(F==null)P+=`. Received ${F}`;else if(typeof F=="function"&&F.name)P+=`. Received function ${F.name}`;else if(typeof F=="object"){var Y;if((Y=F.constructor)!==null&&Y!==void 0&&Y.name)P+=`. Received an instance of ${F.constructor.name}`;else{const q=r(F,{depth:-1});P+=`. Received ${q}`}}else{let q=r(F,{colors:!1});q.length>25&&(q=`${q.slice(0,25)}...`),P+=`. Received type ${typeof F} (${q})`}return P},TypeError),_("ERR_INVALID_ARG_VALUE",(O,R,F="is invalid")=>{let P=r(R);return P.length>128&&(P=P.slice(0,128)+"..."),`The ${O.includes(".")?"property":"argument"} '${O}' ${F}. Received ${P}`},TypeError),_("ERR_INVALID_RETURN_VALUE",(O,R,F)=>{var P;const K=F!=null&&(P=F.constructor)!==null&&P!==void 0&&P.name?`instance of ${F.constructor.name}`:`type ${typeof F}`;return`Expected ${O} to be returned from the "${R}" function but got ${K}.`},TypeError),_("ERR_MISSING_ARGS",(...O)=>{f(O.length>0,"At least one arg needs to be specified");let R;const F=O.length;switch(O=(Array.isArray(O)?O:[O]).map(P=>`"${P}"`).join(" or "),F){case 1:R+=`The ${O[0]} argument`;break;case 2:R+=`The ${O[0]} and ${O[1]} arguments`;break;default:{const P=O.pop();R+=`The ${O.join(", ")}, and ${P} arguments`}break}return`${R} must be specified`},TypeError),_("ERR_OUT_OF_RANGE",(O,R,F)=>{f(R,'Missing "range" argument');let P;if(Number.isInteger(F)&&Math.abs(F)>2**32)P=y(String(F));else if(typeof F=="bigint"){P=String(F);const K=BigInt(2)**BigInt(32);(F>K||F<-K)&&(P=y(P)),P+="n"}else P=r(F);return`The value of "${O}" is out of range. It must be ${R}. Received ${P}`},RangeError),_("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),_("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),_("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),_("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),_("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),_("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),_("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),_("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),_("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),_("ERR_STREAM_WRITE_AFTER_END","write after end",Error),_("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),g0={AbortError:x,aggregateTwoErrors:A(T),hideStackFrames:A,codes:h},g0}var up={exports:{}},Bw;function cg(){if(Bw)return up.exports;Bw=1;const{AbortController:e,AbortSignal:r}=typeof self<"u"?self:typeof window<"u"?window:void 0;return up.exports=e,up.exports.AbortSignal=r,up.exports.default=e,up.exports}var Ey={exports:{}},Hw;function gf(){if(Hw)return Ey.exports;Hw=1;var e=typeof Reflect=="object"?Reflect:null,r=e&&typeof e.apply=="function"?e.apply:function(B,W,Y){return Function.prototype.apply.call(B,W,Y)},i;e&&typeof e.ownKeys=="function"?i=e.ownKeys:Object.getOwnPropertySymbols?i=function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:i=function(B){return Object.getOwnPropertyNames(B)};function a(K){console&&console.warn&&console.warn(K)}var o=Number.isNaN||function(B){return B!==B};function d(){d.init.call(this)}Ey.exports=d,Ey.exports.once=R,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var l=10;function u(K){if(typeof K!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof K)}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(K){if(typeof K!="number"||K<0||o(K))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+K+".");l=K}}),d.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(B){if(typeof B!="number"||B<0||o(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this};function h(K){return K._maxListeners===void 0?d.defaultMaxListeners:K._maxListeners}d.prototype.getMaxListeners=function(){return h(this)},d.prototype.emit=function(B){for(var W=[],Y=1;Y<arguments.length;Y++)W.push(arguments[Y]);var q=B==="error",Pe=this._events;if(Pe!==void 0)q=q&&Pe.error===void 0;else if(!q)return!1;if(q){var $;if(W.length>0&&($=W[0]),$ instanceof Error)throw $;var ie=new Error("Unhandled error."+($?" ("+$.message+")":""));throw ie.context=$,ie}var ge=Pe[B];if(ge===void 0)return!1;if(typeof ge=="function")r(ge,this,W);else for(var Se=ge.length,tt=T(ge,Se),Y=0;Y<Se;++Y)r(tt[Y],this,W);return!0};function f(K,B,W,Y){var q,Pe,$;if(u(W),Pe=K._events,Pe===void 0?(Pe=K._events=Object.create(null),K._eventsCount=0):(Pe.newListener!==void 0&&(K.emit("newListener",B,W.listener?W.listener:W),Pe=K._events),$=Pe[B]),$===void 0)$=Pe[B]=W,++K._eventsCount;else if(typeof $=="function"?$=Pe[B]=Y?[W,$]:[$,W]:Y?$.unshift(W):$.push(W),q=h(K),q>0&&$.length>q&&!$.warned){$.warned=!0;var ie=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(B)+" listeners added. Use emitter.setMaxListeners() to increase limit");ie.name="MaxListenersExceededWarning",ie.emitter=K,ie.type=B,ie.count=$.length,a(ie)}return K}d.prototype.addListener=function(B,W){return f(this,B,W,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(B,W){return f(this,B,W,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(K,B,W){var Y={fired:!1,wrapFn:void 0,target:K,type:B,listener:W},q=y.bind(Y);return q.listener=W,Y.wrapFn=q,q}d.prototype.once=function(B,W){return u(W),this.on(B,b(this,B,W)),this},d.prototype.prependOnceListener=function(B,W){return u(W),this.prependListener(B,b(this,B,W)),this},d.prototype.removeListener=function(B,W){var Y,q,Pe,$,ie;if(u(W),q=this._events,q===void 0)return this;if(Y=q[B],Y===void 0)return this;if(Y===W||Y.listener===W)--this._eventsCount===0?this._events=Object.create(null):(delete q[B],q.removeListener&&this.emit("removeListener",B,Y.listener||W));else if(typeof Y!="function"){for(Pe=-1,$=Y.length-1;$>=0;$--)if(Y[$]===W||Y[$].listener===W){ie=Y[$].listener,Pe=$;break}if(Pe<0)return this;Pe===0?Y.shift():x(Y,Pe),Y.length===1&&(q[B]=Y[0]),q.removeListener!==void 0&&this.emit("removeListener",B,ie||W)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(B){var W,Y,q;if(Y=this._events,Y===void 0)return this;if(Y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Y[B]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Y[B]),this;if(arguments.length===0){var Pe=Object.keys(Y),$;for(q=0;q<Pe.length;++q)$=Pe[q],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(W=Y[B],typeof W=="function")this.removeListener(B,W);else if(W!==void 0)for(q=W.length-1;q>=0;q--)this.removeListener(B,W[q]);return this};function _(K,B,W){var Y=K._events;if(Y===void 0)return[];var q=Y[B];return q===void 0?[]:typeof q=="function"?W?[q.listener||q]:[q]:W?O(q):T(q,q.length)}d.prototype.listeners=function(B){return _(this,B,!0)},d.prototype.rawListeners=function(B){return _(this,B,!1)},d.listenerCount=function(K,B){return typeof K.listenerCount=="function"?K.listenerCount(B):A.call(K,B)},d.prototype.listenerCount=A;function A(K){var B=this._events;if(B!==void 0){var W=B[K];if(typeof W=="function")return 1;if(W!==void 0)return W.length}return 0}d.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function T(K,B){for(var W=new Array(B),Y=0;Y<B;++Y)W[Y]=K[Y];return W}function x(K,B){for(;B+1<K.length;B++)K[B]=K[B+1];K.pop()}function O(K){for(var B=new Array(K.length),W=0;W<B.length;++W)B[W]=K[W].listener||K[W];return B}function R(K,B){return new Promise(function(W,Y){function q($){K.removeListener(B,Pe),Y($)}function Pe(){typeof K.removeListener=="function"&&K.removeListener("error",q),W([].slice.call(arguments))}P(K,B,Pe,{once:!0}),B!=="error"&&F(K,q,{once:!0})})}function F(K,B,W){typeof K.on=="function"&&P(K,"error",B,W)}function P(K,B,W,Y){if(typeof K.on=="function")Y.once?K.once(B,W):K.on(B,W);else if(typeof K.addEventListener=="function")K.addEventListener(B,function q(Pe){Y.once&&K.removeEventListener(B,q),W(Pe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof K)}return Ey.exports}var jw;function Ga(){return jw||(jw=1,function(e){const r=Is(),{format:i,inspect:a}=RE(),{codes:{ERR_INVALID_ARG_TYPE:o}}=xa(),{kResistStopPropagation:d,AggregateError:l,SymbolDispose:u}=yi(),h=globalThis.AbortSignal||cg().AbortSignal,f=globalThis.AbortController||cg().AbortController,y=Object.getPrototypeOf(async function(){}).constructor,b=globalThis.Blob||r.Blob,_=typeof b<"u"?function(O){return O instanceof b}:function(O){return!1},A=(x,O)=>{if(x!==void 0&&(x===null||typeof x!="object"||!("aborted"in x)))throw new o(O,"AbortSignal",x)},T=(x,O)=>{if(typeof x!="function")throw new o(O,"Function",x)};e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(x){let O=!1;return function(...R){O||(O=!0,x.apply(this,R))}},createDeferredPromise:function(){let x,O;return{promise:new Promise((F,P)=>{x=F,O=P}),resolve:x,reject:O}},promisify(x){return new Promise((O,R)=>{x((F,...P)=>F?R(F):O(...P))})},debuglog(){return function(){}},format:i,inspect:a,types:{isAsyncFunction(x){return x instanceof y},isArrayBufferView(x){return ArrayBuffer.isView(x)}},isBlob:_,deprecate(x,O){return x},addAbortListener:gf().addAbortListener||function(O,R){if(O===void 0)throw new o("signal","AbortSignal",O);A(O,"signal"),T(R,"listener");let F;return O.aborted?queueMicrotask(()=>R()):(O.addEventListener("abort",R,{__proto__:null,once:!0,[d]:!0}),F=()=>{O.removeEventListener("abort",R)}),{__proto__:null,[u](){var P;(P=F)===null||P===void 0||P()}}},AbortSignalAny:h.any||function(O){if(O.length===1)return O[0];const R=new f,F=()=>R.abort();return O.forEach(P=>{A(P,"signals"),P.addEventListener("abort",F,{once:!0})}),R.signal.addEventListener("abort",()=>{O.forEach(P=>P.removeEventListener("abort",F))},{once:!0}),R.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(h0)),h0.exports}var Ay={},y0,Vw;function bg(){if(Vw)return y0;Vw=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:r,ArrayPrototypeJoin:i,ArrayPrototypeMap:a,NumberIsInteger:o,NumberIsNaN:d,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:u,NumberParseInt:h,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:y,String:b,StringPrototypeToUpperCase:_,StringPrototypeTrim:A}=yi(),{hideStackFrames:T,codes:{ERR_SOCKET_BAD_PORT:x,ERR_INVALID_ARG_TYPE:O,ERR_INVALID_ARG_VALUE:R,ERR_OUT_OF_RANGE:F,ERR_UNKNOWN_SIGNAL:P}}=xa(),{normalizeEncoding:K}=Ga(),{isAsyncFunction:B,isArrayBufferView:W}=Ga().types,Y={};function q(Re){return Re===(Re|0)}function Pe(Re){return Re===Re>>>0}const $=/^[0-7]+$/,ie="must be a 32-bit unsigned integer or an octal string";function ge(Re,pt,Ct){if(typeof Re>"u"&&(Re=Ct),typeof Re=="string"){if(y($,Re)===null)throw new R(pt,Re,ie);Re=h(Re,8)}return lt(Re,pt),Re}const Se=T((Re,pt,Ct=u,bt=l)=>{if(typeof Re!="number")throw new O(pt,"number",Re);if(!o(Re))throw new F(pt,"an integer",Re);if(Re<Ct||Re>bt)throw new F(pt,`>= ${Ct} && <= ${bt}`,Re)}),tt=T((Re,pt,Ct=-2147483648,bt=2147483647)=>{if(typeof Re!="number")throw new O(pt,"number",Re);if(!o(Re))throw new F(pt,"an integer",Re);if(Re<Ct||Re>bt)throw new F(pt,`>= ${Ct} && <= ${bt}`,Re)}),lt=T((Re,pt,Ct=!1)=>{if(typeof Re!="number")throw new O(pt,"number",Re);if(!o(Re))throw new F(pt,"an integer",Re);const bt=Ct?1:0,We=4294967295;if(Re<bt||Re>We)throw new F(pt,`>= ${bt} && <= ${We}`,Re)});function Ne(Re,pt){if(typeof Re!="string")throw new O(pt,"string",Re)}function yt(Re,pt,Ct=void 0,bt){if(typeof Re!="number")throw new O(pt,"number",Re);if(Ct!=null&&Re<Ct||bt!=null&&Re>bt||(Ct!=null||bt!=null)&&d(Re))throw new F(pt,`${Ct!=null?`>= ${Ct}`:""}${Ct!=null&&bt!=null?" && ":""}${bt!=null?`<= ${bt}`:""}`,Re)}const ve=T((Re,pt,Ct)=>{if(!r(Ct,Re)){const We="must be one of: "+i(a(Ct,Ge=>typeof Ge=="string"?`'${Ge}'`:b(Ge)),", ");throw new R(pt,Re,We)}});function rt(Re,pt){if(typeof Re!="boolean")throw new O(pt,"boolean",Re)}function J(Re,pt,Ct){return Re==null||!f(Re,pt)?Ct:Re[pt]}const xe=T((Re,pt,Ct=null)=>{const bt=J(Ct,"allowArray",!1),We=J(Ct,"allowFunction",!1);if(!J(Ct,"nullable",!1)&&Re===null||!bt&&e(Re)||typeof Re!="object"&&(!We||typeof Re!="function"))throw new O(pt,"Object",Re)}),Ze=T((Re,pt)=>{if(Re!=null&&typeof Re!="object"&&typeof Re!="function")throw new O(pt,"a dictionary",Re)}),je=T((Re,pt,Ct=0)=>{if(!e(Re))throw new O(pt,"Array",Re);if(Re.length<Ct){const bt=`must be longer than ${Ct}`;throw new R(pt,Re,bt)}});function ht(Re,pt){je(Re,pt);for(let Ct=0;Ct<Re.length;Ct++)Ne(Re[Ct],`${pt}[${Ct}]`)}function Nt(Re,pt){je(Re,pt);for(let Ct=0;Ct<Re.length;Ct++)rt(Re[Ct],`${pt}[${Ct}]`)}function kt(Re,pt){je(Re,pt);for(let Ct=0;Ct<Re.length;Ct++){const bt=Re[Ct],We=`${pt}[${Ct}]`;if(bt==null)throw new O(We,"AbortSignal",bt);se(bt,We)}}function Me(Re,pt="signal"){if(Ne(Re,pt),Y[Re]===void 0)throw Y[_(Re)]!==void 0?new P(Re+" (signals must use all capital letters)"):new P(Re)}const le=T((Re,pt="buffer")=>{if(!W(Re))throw new O(pt,["Buffer","TypedArray","DataView"],Re)});function Te(Re,pt){const Ct=K(pt),bt=Re.length;if(Ct==="hex"&&bt%2!==0)throw new R("encoding",pt,`is invalid for data of length ${bt}`)}function Je(Re,pt="Port",Ct=!0){if(typeof Re!="number"&&typeof Re!="string"||typeof Re=="string"&&A(Re).length===0||+Re!==+Re>>>0||Re>65535||Re===0&&!Ct)throw new x(pt,Re,Ct);return Re|0}const se=T((Re,pt)=>{if(Re!==void 0&&(Re===null||typeof Re!="object"||!("aborted"in Re)))throw new O(pt,"AbortSignal",Re)}),M=T((Re,pt)=>{if(typeof Re!="function")throw new O(pt,"Function",Re)}),D=T((Re,pt)=>{if(typeof Re!="function"||B(Re))throw new O(pt,"Function",Re)}),G=T((Re,pt)=>{if(Re!==void 0)throw new O(pt,"undefined",Re)});function re(Re,pt,Ct){if(!r(Ct,Re))throw new O(pt,`('${i(Ct,"|")}')`,Re)}const we=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ce(Re,pt){if(typeof Re>"u"||!y(we,Re))throw new R(pt,Re,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ot(Re){if(typeof Re=="string")return Ce(Re,"hints"),Re;if(e(Re)){const pt=Re.length;let Ct="";if(pt===0)return Ct;for(let bt=0;bt<pt;bt++){const We=Re[bt];Ce(We,"hints"),Ct+=We,bt!==pt-1&&(Ct+=", ")}return Ct}throw new R("hints",Re,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return y0={isInt32:q,isUint32:Pe,parseFileMode:ge,validateArray:je,validateStringArray:ht,validateBooleanArray:Nt,validateAbortSignalArray:kt,validateBoolean:rt,validateBuffer:le,validateDictionary:Ze,validateEncoding:Te,validateFunction:M,validateInt32:tt,validateInteger:Se,validateNumber:yt,validateObject:xe,validateOneOf:ve,validatePlainFunction:D,validatePort:Je,validateSignalName:Me,validateString:Ne,validateUint32:lt,validateUndefined:G,validateUnion:re,validateAbortSignal:se,validateLinkHeaderValue:ot},y0}var Ry={exports:{}},m0={exports:{}},$w;function yf(){if($w)return m0.exports;$w=1;var e=m0.exports={},r,i;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=a}catch{r=a}try{typeof clearTimeout=="function"?i=clearTimeout:i=o}catch{i=o}})();function d(x){if(r===setTimeout)return setTimeout(x,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(x,0);try{return r(x,0)}catch{try{return r.call(null,x,0)}catch{return r.call(this,x,0)}}}function l(x){if(i===clearTimeout)return clearTimeout(x);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(x);try{return i(x)}catch{try{return i.call(null,x)}catch{return i.call(this,x)}}}var u=[],h=!1,f,y=-1;function b(){!h||!f||(h=!1,f.length?u=f.concat(u):y=-1,u.length&&_())}function _(){if(!h){var x=d(b);h=!0;for(var O=u.length;O;){for(f=u,u=[];++y<O;)f&&f[y].run();y=-1,O=u.length}f=null,h=!1,l(x)}}e.nextTick=function(x){var O=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)O[R-1]=arguments[R];u.push(new A(x,O)),u.length===1&&!h&&d(_)};function A(x,O){this.fun=x,this.array=O}A.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function T(){}return e.on=T,e.addListener=T,e.once=T,e.off=T,e.removeListener=T,e.removeAllListeners=T,e.emit=T,e.prependListener=T,e.prependOnceListener=T,e.listeners=function(x){return[]},e.binding=function(x){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(x){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},m0.exports}var v0,Kw;function Ul(){if(Kw)return v0;Kw=1;const{SymbolAsyncIterator:e,SymbolIterator:r,SymbolFor:i}=yi(),a=i("nodejs.stream.destroyed"),o=i("nodejs.stream.errored"),d=i("nodejs.stream.readable"),l=i("nodejs.stream.writable"),u=i("nodejs.stream.disturbed"),h=i("nodejs.webstream.isClosedPromise"),f=i("nodejs.webstream.controllerErrorFunction");function y(J,xe=!1){var Ze;return!!(J&&typeof J.pipe=="function"&&typeof J.on=="function"&&(!xe||typeof J.pause=="function"&&typeof J.resume=="function")&&(!J._writableState||((Ze=J._readableState)===null||Ze===void 0?void 0:Ze.readable)!==!1)&&(!J._writableState||J._readableState))}function b(J){var xe;return!!(J&&typeof J.write=="function"&&typeof J.on=="function"&&(!J._readableState||((xe=J._writableState)===null||xe===void 0?void 0:xe.writable)!==!1))}function _(J){return!!(J&&typeof J.pipe=="function"&&J._readableState&&typeof J.on=="function"&&typeof J.write=="function")}function A(J){return J&&(J._readableState||J._writableState||typeof J.write=="function"&&typeof J.on=="function"||typeof J.pipe=="function"&&typeof J.on=="function")}function T(J){return!!(J&&!A(J)&&typeof J.pipeThrough=="function"&&typeof J.getReader=="function"&&typeof J.cancel=="function")}function x(J){return!!(J&&!A(J)&&typeof J.getWriter=="function"&&typeof J.abort=="function")}function O(J){return!!(J&&!A(J)&&typeof J.readable=="object"&&typeof J.writable=="object")}function R(J){return T(J)||x(J)||O(J)}function F(J,xe){return J==null?!1:xe===!0?typeof J[e]=="function":xe===!1?typeof J[r]=="function":typeof J[e]=="function"||typeof J[r]=="function"}function P(J){if(!A(J))return null;const xe=J._writableState,Ze=J._readableState,je=xe||Ze;return!!(J.destroyed||J[a]||je!=null&&je.destroyed)}function K(J){if(!b(J))return null;if(J.writableEnded===!0)return!0;const xe=J._writableState;return xe!=null&&xe.errored?!1:typeof xe?.ended!="boolean"?null:xe.ended}function B(J,xe){if(!b(J))return null;if(J.writableFinished===!0)return!0;const Ze=J._writableState;return Ze!=null&&Ze.errored?!1:typeof Ze?.finished!="boolean"?null:!!(Ze.finished||xe===!1&&Ze.ended===!0&&Ze.length===0)}function W(J){if(!y(J))return null;if(J.readableEnded===!0)return!0;const xe=J._readableState;return!xe||xe.errored?!1:typeof xe?.ended!="boolean"?null:xe.ended}function Y(J,xe){if(!y(J))return null;const Ze=J._readableState;return Ze!=null&&Ze.errored?!1:typeof Ze?.endEmitted!="boolean"?null:!!(Ze.endEmitted||xe===!1&&Ze.ended===!0&&Ze.length===0)}function q(J){return J&&J[d]!=null?J[d]:typeof J?.readable!="boolean"?null:P(J)?!1:y(J)&&J.readable&&!Y(J)}function Pe(J){return J&&J[l]!=null?J[l]:typeof J?.writable!="boolean"?null:P(J)?!1:b(J)&&J.writable&&!K(J)}function $(J,xe){return A(J)?P(J)?!0:!(xe?.readable!==!1&&q(J)||xe?.writable!==!1&&Pe(J)):null}function ie(J){var xe,Ze;return A(J)?J.writableErrored?J.writableErrored:(xe=(Ze=J._writableState)===null||Ze===void 0?void 0:Ze.errored)!==null&&xe!==void 0?xe:null:null}function ge(J){var xe,Ze;return A(J)?J.readableErrored?J.readableErrored:(xe=(Ze=J._readableState)===null||Ze===void 0?void 0:Ze.errored)!==null&&xe!==void 0?xe:null:null}function Se(J){if(!A(J))return null;if(typeof J.closed=="boolean")return J.closed;const xe=J._writableState,Ze=J._readableState;return typeof xe?.closed=="boolean"||typeof Ze?.closed=="boolean"?xe?.closed||Ze?.closed:typeof J._closed=="boolean"&&tt(J)?J._closed:null}function tt(J){return typeof J._closed=="boolean"&&typeof J._defaultKeepAlive=="boolean"&&typeof J._removedConnection=="boolean"&&typeof J._removedContLen=="boolean"}function lt(J){return typeof J._sent100=="boolean"&&tt(J)}function Ne(J){var xe;return typeof J._consuming=="boolean"&&typeof J._dumped=="boolean"&&((xe=J.req)===null||xe===void 0?void 0:xe.upgradeOrConnect)===void 0}function yt(J){if(!A(J))return null;const xe=J._writableState,Ze=J._readableState,je=xe||Ze;return!je&&lt(J)||!!(je&&je.autoDestroy&&je.emitClose&&je.closed===!1)}function ve(J){var xe;return!!(J&&((xe=J[u])!==null&&xe!==void 0?xe:J.readableDidRead||J.readableAborted))}function rt(J){var xe,Ze,je,ht,Nt,kt,Me,le,Te,Je;return!!(J&&((xe=(Ze=(je=(ht=(Nt=(kt=J[o])!==null&&kt!==void 0?kt:J.readableErrored)!==null&&Nt!==void 0?Nt:J.writableErrored)!==null&&ht!==void 0?ht:(Me=J._readableState)===null||Me===void 0?void 0:Me.errorEmitted)!==null&&je!==void 0?je:(le=J._writableState)===null||le===void 0?void 0:le.errorEmitted)!==null&&Ze!==void 0?Ze:(Te=J._readableState)===null||Te===void 0?void 0:Te.errored)!==null&&xe!==void 0?xe:!((Je=J._writableState)===null||Je===void 0)&&Je.errored))}return v0={isDestroyed:P,kIsDestroyed:a,isDisturbed:ve,kIsDisturbed:u,isErrored:rt,kIsErrored:o,isReadable:q,kIsReadable:d,kIsClosedPromise:h,kControllerErrorFunction:f,kIsWritable:l,isClosed:Se,isDuplexNodeStream:_,isFinished:$,isIterable:F,isReadableNodeStream:y,isReadableStream:T,isReadableEnded:W,isReadableFinished:Y,isReadableErrored:ge,isNodeStream:A,isWebStream:R,isWritable:Pe,isWritableNodeStream:b,isWritableStream:x,isWritableEnded:K,isWritableFinished:B,isWritableErrored:ie,isServerRequest:Ne,isServerResponse:lt,willEmitClose:yt,isTransformStream:O},v0}var Gw;function Hu(){if(Gw)return Ry.exports;Gw=1;const e=yf(),{AbortError:r,codes:i}=xa(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:o}=i,{kEmptyObject:d,once:l}=Ga(),{validateAbortSignal:u,validateFunction:h,validateObject:f,validateBoolean:y}=bg(),{Promise:b,PromisePrototypeThen:_,SymbolDispose:A}=yi(),{isClosed:T,isReadable:x,isReadableNodeStream:O,isReadableStream:R,isReadableFinished:F,isReadableErrored:P,isWritable:K,isWritableNodeStream:B,isWritableStream:W,isWritableFinished:Y,isWritableErrored:q,isNodeStream:Pe,willEmitClose:$,kIsClosedPromise:ie}=Ul();let ge;function Se(ve){return ve.setHeader&&typeof ve.abort=="function"}const tt=()=>{};function lt(ve,rt,J){var xe,Ze;if(arguments.length===2?(J=rt,rt=d):rt==null?rt=d:f(rt,"options"),h(J,"callback"),u(rt.signal,"options.signal"),J=l(J),R(ve)||W(ve))return Ne(ve,rt,J);if(!Pe(ve))throw new a("stream",["ReadableStream","WritableStream","Stream"],ve);const je=(xe=rt.readable)!==null&&xe!==void 0?xe:O(ve),ht=(Ze=rt.writable)!==null&&Ze!==void 0?Ze:B(ve),Nt=ve._writableState,kt=ve._readableState,Me=()=>{ve.writable||Je()};let le=$(ve)&&O(ve)===je&&B(ve)===ht,Te=Y(ve,!1);const Je=()=>{Te=!0,ve.destroyed&&(le=!1),!(le&&(!ve.readable||je))&&(!je||se)&&J.call(ve)};let se=F(ve,!1);const M=()=>{se=!0,ve.destroyed&&(le=!1),!(le&&(!ve.writable||ht))&&(!ht||Te)&&J.call(ve)},D=Re=>{J.call(ve,Re)};let G=T(ve);const re=()=>{G=!0;const Re=q(ve)||P(ve);if(Re&&typeof Re!="boolean")return J.call(ve,Re);if(je&&!se&&O(ve,!0)&&!F(ve,!1))return J.call(ve,new o);if(ht&&!Te&&!Y(ve,!1))return J.call(ve,new o);J.call(ve)},we=()=>{G=!0;const Re=q(ve)||P(ve);if(Re&&typeof Re!="boolean")return J.call(ve,Re);J.call(ve)},Ce=()=>{ve.req.on("finish",Je)};Se(ve)?(ve.on("complete",Je),le||ve.on("abort",re),ve.req?Ce():ve.on("request",Ce)):ht&&!Nt&&(ve.on("end",Me),ve.on("close",Me)),!le&&typeof ve.aborted=="boolean"&&ve.on("aborted",re),ve.on("end",M),ve.on("finish",Je),rt.error!==!1&&ve.on("error",D),ve.on("close",re),G?e.nextTick(re):Nt!=null&&Nt.errorEmitted||kt!=null&&kt.errorEmitted?le||e.nextTick(we):(!je&&(!le||x(ve))&&(Te||K(ve)===!1)||!ht&&(!le||K(ve))&&(se||x(ve)===!1)||kt&&ve.req&&ve.aborted)&&e.nextTick(we);const ot=()=>{J=tt,ve.removeListener("aborted",re),ve.removeListener("complete",Je),ve.removeListener("abort",re),ve.removeListener("request",Ce),ve.req&&ve.req.removeListener("finish",Je),ve.removeListener("end",Me),ve.removeListener("close",Me),ve.removeListener("finish",Je),ve.removeListener("end",M),ve.removeListener("error",D),ve.removeListener("close",re)};if(rt.signal&&!G){const Re=()=>{const pt=J;ot(),pt.call(ve,new r(void 0,{cause:rt.signal.reason}))};if(rt.signal.aborted)e.nextTick(Re);else{ge=ge||Ga().addAbortListener;const pt=ge(rt.signal,Re),Ct=J;J=l((...bt)=>{pt[A](),Ct.apply(ve,bt)})}}return ot}function Ne(ve,rt,J){let xe=!1,Ze=tt;if(rt.signal)if(Ze=()=>{xe=!0,J.call(ve,new r(void 0,{cause:rt.signal.reason}))},rt.signal.aborted)e.nextTick(Ze);else{ge=ge||Ga().addAbortListener;const ht=ge(rt.signal,Ze),Nt=J;J=l((...kt)=>{ht[A](),Nt.apply(ve,kt)})}const je=(...ht)=>{xe||e.nextTick(()=>J.apply(ve,ht))};return _(ve[ie].promise,je,je),tt}function yt(ve,rt){var J;let xe=!1;return rt===null&&(rt=d),(J=rt)!==null&&J!==void 0&&J.cleanup&&(y(rt.cleanup,"cleanup"),xe=rt.cleanup),new b((Ze,je)=>{const ht=lt(ve,rt,Nt=>{xe&&ht(),Nt?je(Nt):Ze()})})}return Ry.exports=lt,Ry.exports.finished=yt,Ry.exports}var b0,qw;function Dd(){if(qw)return b0;qw=1;const e=yf(),{aggregateTwoErrors:r,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:a}=xa(),{Symbol:o}=yi(),{kIsDestroyed:d,isDestroyed:l,isFinished:u,isServerRequest:h}=Ul(),f=o("kDestroy"),y=o("kConstruct");function b($,ie,ge){$&&($.stack,ie&&!ie.errored&&(ie.errored=$),ge&&!ge.errored&&(ge.errored=$))}function _($,ie){const ge=this._readableState,Se=this._writableState,tt=Se||ge;return Se!=null&&Se.destroyed||ge!=null&&ge.destroyed?(typeof ie=="function"&&ie(),this):(b($,Se,ge),Se&&(Se.destroyed=!0),ge&&(ge.destroyed=!0),tt.constructed?A(this,$,ie):this.once(f,function(lt){A(this,r(lt,$),ie)}),this)}function A($,ie,ge){let Se=!1;function tt(lt){if(Se)return;Se=!0;const Ne=$._readableState,yt=$._writableState;b(lt,yt,Ne),yt&&(yt.closed=!0),Ne&&(Ne.closed=!0),typeof ge=="function"&&ge(lt),lt?e.nextTick(T,$,lt):e.nextTick(x,$)}try{$._destroy(ie||null,tt)}catch(lt){tt(lt)}}function T($,ie){O($,ie),x($)}function x($){const ie=$._readableState,ge=$._writableState;ge&&(ge.closeEmitted=!0),ie&&(ie.closeEmitted=!0),(ge!=null&&ge.emitClose||ie!=null&&ie.emitClose)&&$.emit("close")}function O($,ie){const ge=$._readableState,Se=$._writableState;Se!=null&&Se.errorEmitted||ge!=null&&ge.errorEmitted||(Se&&(Se.errorEmitted=!0),ge&&(ge.errorEmitted=!0),$.emit("error",ie))}function R(){const $=this._readableState,ie=this._writableState;$&&($.constructed=!0,$.closed=!1,$.closeEmitted=!1,$.destroyed=!1,$.errored=null,$.errorEmitted=!1,$.reading=!1,$.ended=$.readable===!1,$.endEmitted=$.readable===!1),ie&&(ie.constructed=!0,ie.destroyed=!1,ie.closed=!1,ie.closeEmitted=!1,ie.errored=null,ie.errorEmitted=!1,ie.finalCalled=!1,ie.prefinished=!1,ie.ended=ie.writable===!1,ie.ending=ie.writable===!1,ie.finished=ie.writable===!1)}function F($,ie,ge){const Se=$._readableState,tt=$._writableState;if(tt!=null&&tt.destroyed||Se!=null&&Se.destroyed)return this;Se!=null&&Se.autoDestroy||tt!=null&&tt.autoDestroy?$.destroy(ie):ie&&(ie.stack,tt&&!tt.errored&&(tt.errored=ie),Se&&!Se.errored&&(Se.errored=ie),ge?e.nextTick(O,$,ie):O($,ie))}function P($,ie){if(typeof $._construct!="function")return;const ge=$._readableState,Se=$._writableState;ge&&(ge.constructed=!1),Se&&(Se.constructed=!1),$.once(y,ie),!($.listenerCount(y)>1)&&e.nextTick(K,$)}function K($){let ie=!1;function ge(Se){if(ie){F($,Se??new i);return}ie=!0;const tt=$._readableState,lt=$._writableState,Ne=lt||tt;tt&&(tt.constructed=!0),lt&&(lt.constructed=!0),Ne.destroyed?$.emit(f,Se):Se?F($,Se,!0):e.nextTick(B,$)}try{$._construct(Se=>{e.nextTick(ge,Se)})}catch(Se){e.nextTick(ge,Se)}}function B($){$.emit(y)}function W($){return $?.setHeader&&typeof $.abort=="function"}function Y($){$.emit("close")}function q($,ie){$.emit("error",ie),e.nextTick(Y,$)}function Pe($,ie){!$||l($)||(!ie&&!u($)&&(ie=new a),h($)?($.socket=null,$.destroy(ie)):W($)?$.abort():W($.req)?$.req.abort():typeof $.destroy=="function"?$.destroy(ie):typeof $.close=="function"?$.close():ie?e.nextTick(q,$,ie):e.nextTick(Y,$),$.destroyed||($[d]=!0))}return b0={construct:P,destroyer:Pe,destroy:_,undestroy:R,errorOrDestroy:F},b0}var w0,zw;function zv(){if(zw)return w0;zw=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:r}=yi(),{EventEmitter:i}=gf();function a(d){i.call(this,d)}r(a.prototype,i.prototype),r(a,i),a.prototype.pipe=function(d,l){const u=this;function h(x){d.writable&&d.write(x)===!1&&u.pause&&u.pause()}u.on("data",h);function f(){u.readable&&u.resume&&u.resume()}d.on("drain",f),!d._isStdio&&(!l||l.end!==!1)&&(u.on("end",b),u.on("close",_));let y=!1;function b(){y||(y=!0,d.end())}function _(){y||(y=!0,typeof d.destroy=="function"&&d.destroy())}function A(x){T(),i.listenerCount(this,"error")===0&&this.emit("error",x)}o(u,"error",A),o(d,"error",A);function T(){u.removeListener("data",h),d.removeListener("drain",f),u.removeListener("end",b),u.removeListener("close",_),u.removeListener("error",A),d.removeListener("error",A),u.removeListener("end",T),u.removeListener("close",T),d.removeListener("close",T)}return u.on("end",T),u.on("close",T),d.on("close",T),d.emit("pipe",u),d};function o(d,l,u){if(typeof d.prependListener=="function")return d.prependListener(l,u);!d._events||!d._events[l]?d.on(l,u):e(d._events[l])?d._events[l].unshift(u):d._events[l]=[u,d._events[l]]}return w0={Stream:a,prependListener:o},w0}var _0={exports:{}},Ww;function im(){return Ww||(Ww=1,function(e){const{SymbolDispose:r}=yi(),{AbortError:i,codes:a}=xa(),{isNodeStream:o,isWebStream:d,kControllerErrorFunction:l}=Ul(),u=Hu(),{ERR_INVALID_ARG_TYPE:h}=a;let f;const y=(b,_)=>{if(typeof b!="object"||!("aborted"in b))throw new h(_,"AbortSignal",b)};e.exports.addAbortSignal=function(_,A){if(y(_,"signal"),!o(A)&&!d(A))throw new h("stream",["ReadableStream","WritableStream","Stream"],A);return e.exports.addAbortSignalNoValidate(_,A)},e.exports.addAbortSignalNoValidate=function(b,_){if(typeof b!="object"||!("aborted"in b))return _;const A=o(_)?()=>{_.destroy(new i(void 0,{cause:b.reason}))}:()=>{_[l](new i(void 0,{cause:b.reason}))};if(b.aborted)A();else{f=f||Ga().addAbortListener;const T=f(b,A);u(_,T[r])}return _}}(_0)),_0.exports}var S0,Jw;function wx(){if(Jw)return S0;Jw=1;const{StringPrototypeSlice:e,SymbolIterator:r,TypedArrayPrototypeSet:i,Uint8Array:a}=yi(),{Buffer:o}=Is(),{inspect:d}=Ga();return S0=class{constructor(){this.head=null,this.tail=null,this.length=0}push(u){const h={data:u,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}unshift(u){const h={data:u,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}shift(){if(this.length===0)return;const u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}clear(){this.head=this.tail=null,this.length=0}join(u){if(this.length===0)return"";let h=this.head,f=""+h.data;for(;(h=h.next)!==null;)f+=u+h.data;return f}concat(u){if(this.length===0)return o.alloc(0);const h=o.allocUnsafe(u>>>0);let f=this.head,y=0;for(;f;)i(h,f.data,y),y+=f.data.length,f=f.next;return h}consume(u,h){const f=this.head.data;if(u<f.length){const y=f.slice(0,u);return this.head.data=f.slice(u),y}return u===f.length?this.shift():h?this._getString(u):this._getBuffer(u)}first(){return this.head.data}*[r](){for(let u=this.head;u;u=u.next)yield u.data}_getString(u){let h="",f=this.head,y=0;do{const b=f.data;if(u>b.length)h+=b,u-=b.length;else{u===b.length?(h+=b,++y,f.next?this.head=f.next:this.head=this.tail=null):(h+=e(b,0,u),this.head=f,f.data=e(b,u));break}++y}while((f=f.next)!==null);return this.length-=y,h}_getBuffer(u){const h=o.allocUnsafe(u),f=u;let y=this.head,b=0;do{const _=y.data;if(u>_.length)i(h,_,f-u),u-=_.length;else{u===_.length?(i(h,_,f-u),++b,y.next?this.head=y.next:this.head=this.tail=null):(i(h,new a(_.buffer,_.byteOffset,u),f-u),this.head=y,y.data=_.slice(u));break}++b}while((y=y.next)!==null);return this.length-=b,h}[Symbol.for("nodejs.util.inspect.custom")](u,h){return d(this,{...h,depth:0,customInspect:!1})}},S0}var E0,Yw;function am(){if(Yw)return E0;Yw=1;const{MathFloor:e,NumberIsInteger:r}=yi(),{validateInteger:i}=bg(),{ERR_INVALID_ARG_VALUE:a}=xa().codes;let o=16*1024,d=16;function l(y,b,_){return y.highWaterMark!=null?y.highWaterMark:b?y[_]:null}function u(y){return y?d:o}function h(y,b){i(b,"value",0),y?d=b:o=b}function f(y,b,_,A){const T=l(b,A,_);if(T!=null){if(!r(T)||T<0){const x=A?`options.${_}`:"options.highWaterMark";throw new a(x,T)}return e(T)}return u(y.objectMode)}return E0={getHighWaterMark:f,getDefaultHighWaterMark:u,setDefaultHighWaterMark:h},E0}var A0={},xy={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Qw;function _x(){return Qw||(Qw=1,function(e,r){var i=Is(),a=i.Buffer;function o(l,u){for(var h in l)u[h]=l[h]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=i:(o(i,r),r.Buffer=d);function d(l,u,h){return a(l,u,h)}d.prototype=Object.create(a.prototype),o(a,d),d.from=function(l,u,h){if(typeof l=="number")throw new TypeError("Argument must not be a number");return a(l,u,h)},d.alloc=function(l,u,h){if(typeof l!="number")throw new TypeError("Argument must be a number");var f=a(l);return u!==void 0?typeof h=="string"?f.fill(u,h):f.fill(u):f.fill(0),f},d.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return a(l)},d.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(l)}}(xy,xy.exports)),xy.exports}var Xw;function Sx(){if(Xw)return A0;Xw=1;var e=_x().Buffer,r=e.isEncoding||function(R){switch(R=""+R,R&&R.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(R){if(!R)return"utf8";for(var F;;)switch(R){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return R;default:if(F)return;R=(""+R).toLowerCase(),F=!0}}function a(R){var F=i(R);if(typeof F!="string"&&(e.isEncoding===r||!r(R)))throw new Error("Unknown encoding: "+R);return F||R}A0.StringDecoder=o;function o(R){this.encoding=a(R);var F;switch(this.encoding){case"utf16le":this.text=b,this.end=_,F=4;break;case"utf8":this.fillLast=h,F=4;break;case"base64":this.text=A,this.end=T,F=3;break;default:this.write=x,this.end=O;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(F)}o.prototype.write=function(R){if(R.length===0)return"";var F,P;if(this.lastNeed){if(F=this.fillLast(R),F===void 0)return"";P=this.lastNeed,this.lastNeed=0}else P=0;return P<R.length?F?F+this.text(R,P):this.text(R,P):F||""},o.prototype.end=y,o.prototype.text=f,o.prototype.fillLast=function(R){if(this.lastNeed<=R.length)return R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,R.length),this.lastNeed-=R.length};function d(R){return R<=127?0:R>>5===6?2:R>>4===14?3:R>>3===30?4:R>>6===2?-1:-2}function l(R,F,P){var K=F.length-1;if(K<P)return 0;var B=d(F[K]);return B>=0?(B>0&&(R.lastNeed=B-1),B):--K<P||B===-2?0:(B=d(F[K]),B>=0?(B>0&&(R.lastNeed=B-2),B):--K<P||B===-2?0:(B=d(F[K]),B>=0?(B>0&&(B===2?B=0:R.lastNeed=B-3),B):0))}function u(R,F,P){if((F[0]&192)!==128)return R.lastNeed=0,"";if(R.lastNeed>1&&F.length>1){if((F[1]&192)!==128)return R.lastNeed=1,"";if(R.lastNeed>2&&F.length>2&&(F[2]&192)!==128)return R.lastNeed=2,""}}function h(R){var F=this.lastTotal-this.lastNeed,P=u(this,R);if(P!==void 0)return P;if(this.lastNeed<=R.length)return R.copy(this.lastChar,F,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);R.copy(this.lastChar,F,0,R.length),this.lastNeed-=R.length}function f(R,F){var P=l(this,R,F);if(!this.lastNeed)return R.toString("utf8",F);this.lastTotal=P;var K=R.length-(P-this.lastNeed);return R.copy(this.lastChar,0,K),R.toString("utf8",F,K)}function y(R){var F=R&&R.length?this.write(R):"";return this.lastNeed?F+"":F}function b(R,F){if((R.length-F)%2===0){var P=R.toString("utf16le",F);if(P){var K=P.charCodeAt(P.length-1);if(K>=55296&&K<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1],P.slice(0,-1)}return P}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=R[R.length-1],R.toString("utf16le",F,R.length-1)}function _(R){var F=R&&R.length?this.write(R):"";if(this.lastNeed){var P=this.lastTotal-this.lastNeed;return F+this.lastChar.toString("utf16le",0,P)}return F}function A(R,F){var P=(R.length-F)%3;return P===0?R.toString("base64",F):(this.lastNeed=3-P,this.lastTotal=3,P===1?this.lastChar[0]=R[R.length-1]:(this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1]),R.toString("base64",F,R.length-P))}function T(R){var F=R&&R.length?this.write(R):"";return this.lastNeed?F+this.lastChar.toString("base64",0,3-this.lastNeed):F}function x(R){return R.toString(this.encoding)}function O(R){return R&&R.length?this.write(R):""}return A0}var R0,Zw;function xE(){if(Zw)return R0;Zw=1;const e=yf(),{PromisePrototypeThen:r,SymbolAsyncIterator:i,SymbolIterator:a}=yi(),{Buffer:o}=Is(),{ERR_INVALID_ARG_TYPE:d,ERR_STREAM_NULL_VALUES:l}=xa().codes;function u(h,f,y){let b;if(typeof f=="string"||f instanceof o)return new h({objectMode:!0,...y,read(){this.push(f),this.push(null)}});let _;if(f&&f[i])_=!0,b=f[i]();else if(f&&f[a])_=!1,b=f[a]();else throw new d("iterable",["Iterable"],f);const A=new h({objectMode:!0,highWaterMark:1,...y});let T=!1;A._read=function(){T||(T=!0,O())},A._destroy=function(R,F){r(x(R),()=>e.nextTick(F,R),P=>e.nextTick(F,P||R))};async function x(R){const F=R!=null,P=typeof b.throw=="function";if(F&&P){const{value:K,done:B}=await b.throw(R);if(await K,B)return}if(typeof b.return=="function"){const{value:K}=await b.return();await K}}async function O(){for(;;){try{const{value:R,done:F}=_?await b.next():b.next();if(F)A.push(null);else{const P=R&&typeof R.then=="function"?await R:R;if(P===null)throw T=!1,new l;if(A.push(P))continue;T=!1}}catch(R){A.destroy(R)}break}}return A}return R0=u,R0}var x0,e_;function om(){if(e_)return x0;e_=1;const e=yf(),{ArrayPrototypeIndexOf:r,NumberIsInteger:i,NumberIsNaN:a,NumberParseInt:o,ObjectDefineProperties:d,ObjectKeys:l,ObjectSetPrototypeOf:u,Promise:h,SafeSet:f,SymbolAsyncDispose:y,SymbolAsyncIterator:b,Symbol:_}=yi();x0=bt,bt.ReadableState=Ct;const{EventEmitter:A}=gf(),{Stream:T,prependListener:x}=zv(),{Buffer:O}=Is(),{addAbortSignal:R}=im(),F=Hu();let P=Ga().debuglog("stream",ue=>{P=ue});const K=wx(),B=Dd(),{getHighWaterMark:W,getDefaultHighWaterMark:Y}=am(),{aggregateTwoErrors:q,codes:{ERR_INVALID_ARG_TYPE:Pe,ERR_METHOD_NOT_IMPLEMENTED:$,ERR_OUT_OF_RANGE:ie,ERR_STREAM_PUSH_AFTER_EOF:ge,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Se},AbortError:tt}=xa(),{validateObject:lt}=bg(),Ne=_("kPaused"),{StringDecoder:yt}=Sx(),ve=xE();u(bt.prototype,T.prototype),u(bt,T);const rt=()=>{},{errorOrDestroy:J}=B,xe=1,Ze=2,je=4,ht=8,Nt=16,kt=32,Me=64,le=128,Te=256,Je=512,se=1024,M=2048,D=4096,G=8192,re=16384,we=32768,Ce=65536,ot=1<<17,Re=1<<18;function pt(ue){return{enumerable:!1,get(){return(this.state&ue)!==0},set(pe){pe?this.state|=ue:this.state&=~ue}}}d(Ct.prototype,{objectMode:pt(xe),ended:pt(Ze),endEmitted:pt(je),reading:pt(ht),constructed:pt(Nt),sync:pt(kt),needReadable:pt(Me),emittedReadable:pt(le),readableListening:pt(Te),resumeScheduled:pt(Je),errorEmitted:pt(se),emitClose:pt(M),autoDestroy:pt(D),destroyed:pt(G),closed:pt(re),closeEmitted:pt(we),multiAwaitDrain:pt(Ce),readingMore:pt(ot),dataEmitted:pt(Re)});function Ct(ue,pe,Tt){typeof Tt!="boolean"&&(Tt=pe instanceof Pl()),this.state=M|D|Nt|kt,ue&&ue.objectMode&&(this.state|=xe),Tt&&ue&&ue.readableObjectMode&&(this.state|=xe),this.highWaterMark=ue?W(this,ue,"readableHighWaterMark",Tt):Y(!1),this.buffer=new K,this.length=0,this.pipes=[],this.flowing=null,this[Ne]=null,ue&&ue.emitClose===!1&&(this.state&=~M),ue&&ue.autoDestroy===!1&&(this.state&=~D),this.errored=null,this.defaultEncoding=ue&&ue.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ue&&ue.encoding&&(this.decoder=new yt(ue.encoding),this.encoding=ue.encoding)}function bt(ue){if(!(this instanceof bt))return new bt(ue);const pe=this instanceof Pl();this._readableState=new Ct(ue,this,pe),ue&&(typeof ue.read=="function"&&(this._read=ue.read),typeof ue.destroy=="function"&&(this._destroy=ue.destroy),typeof ue.construct=="function"&&(this._construct=ue.construct),ue.signal&&!pe&&R(ue.signal,this)),T.call(this,ue),B.construct(this,()=>{this._readableState.needReadable&&qe(this,this._readableState)})}bt.prototype.destroy=B.destroy,bt.prototype._undestroy=B.undestroy,bt.prototype._destroy=function(ue,pe){pe(ue)},bt.prototype[A.captureRejectionSymbol]=function(ue){this.destroy(ue)},bt.prototype[y]=function(){let ue;return this.destroyed||(ue=this.readableEnded?null:new tt,this.destroy(ue)),new h((pe,Tt)=>F(this,xt=>xt&&xt!==ue?Tt(xt):pe(null)))},bt.prototype.push=function(ue,pe){return We(this,ue,pe,!1)},bt.prototype.unshift=function(ue,pe){return We(this,ue,pe,!0)};function We(ue,pe,Tt,xt){P("readableAddChunk",pe);const Pt=ue._readableState;let Zt;if((Pt.state&xe)===0&&(typeof pe=="string"?(Tt=Tt||Pt.defaultEncoding,Pt.encoding!==Tt&&(xt&&Pt.encoding?pe=O.from(pe,Tt).toString(Pt.encoding):(pe=O.from(pe,Tt),Tt=""))):pe instanceof O?Tt="":T._isUint8Array(pe)?(pe=T._uint8ArrayToBuffer(pe),Tt=""):pe!=null&&(Zt=new Pe("chunk",["string","Buffer","Uint8Array"],pe))),Zt)J(ue,Zt);else if(pe===null)Pt.state&=~ht,k(ue,Pt);else if((Pt.state&xe)!==0||pe&&pe.length>0)if(xt)if((Pt.state&je)!==0)J(ue,new Se);else{if(Pt.destroyed||Pt.errored)return!1;Ge(ue,Pt,pe,!0)}else if(Pt.ended)J(ue,new ge);else{if(Pt.destroyed||Pt.errored)return!1;Pt.state&=~ht,Pt.decoder&&!Tt?(pe=Pt.decoder.write(pe),Pt.objectMode||pe.length!==0?Ge(ue,Pt,pe,!1):qe(ue,Pt)):Ge(ue,Pt,pe,!1)}else xt||(Pt.state&=~ht,qe(ue,Pt));return!Pt.ended&&(Pt.length<Pt.highWaterMark||Pt.length===0)}function Ge(ue,pe,Tt,xt){pe.flowing&&pe.length===0&&!pe.sync&&ue.listenerCount("data")>0?((pe.state&Ce)!==0?pe.awaitDrainWriters.clear():pe.awaitDrainWriters=null,pe.dataEmitted=!0,ue.emit("data",Tt)):(pe.length+=pe.objectMode?1:Tt.length,xt?pe.buffer.unshift(Tt):pe.buffer.push(Tt),(pe.state&Me)!==0&&V(ue)),qe(ue,pe)}bt.prototype.isPaused=function(){const ue=this._readableState;return ue[Ne]===!0||ue.flowing===!1},bt.prototype.setEncoding=function(ue){const pe=new yt(ue);this._readableState.decoder=pe,this._readableState.encoding=this._readableState.decoder.encoding;const Tt=this._readableState.buffer;let xt="";for(const Pt of Tt)xt+=pe.write(Pt);return Tt.clear(),xt!==""&&Tt.push(xt),this._readableState.length=xt.length,this};const Oe=1073741824;function ut(ue){if(ue>Oe)throw new ie("size","<= 1GiB",ue);return ue--,ue|=ue>>>1,ue|=ue>>>2,ue|=ue>>>4,ue|=ue>>>8,ue|=ue>>>16,ue++,ue}function Q(ue,pe){return ue<=0||pe.length===0&&pe.ended?0:(pe.state&xe)!==0?1:a(ue)?pe.flowing&&pe.length?pe.buffer.first().length:pe.length:ue<=pe.length?ue:pe.ended?pe.length:0}bt.prototype.read=function(ue){P("read",ue),ue===void 0?ue=NaN:i(ue)||(ue=o(ue,10));const pe=this._readableState,Tt=ue;if(ue>pe.highWaterMark&&(pe.highWaterMark=ut(ue)),ue!==0&&(pe.state&=~le),ue===0&&pe.needReadable&&((pe.highWaterMark!==0?pe.length>=pe.highWaterMark:pe.length>0)||pe.ended))return P("read: emitReadable",pe.length,pe.ended),pe.length===0&&pe.ended?ft(this):V(this),null;if(ue=Q(ue,pe),ue===0&&pe.ended)return pe.length===0&&ft(this),null;let xt=(pe.state&Me)!==0;if(P("need readable",xt),(pe.length===0||pe.length-ue<pe.highWaterMark)&&(xt=!0,P("length less than watermark",xt)),pe.ended||pe.reading||pe.destroyed||pe.errored||!pe.constructed)xt=!1,P("reading, ended or constructing",xt);else if(xt){P("do read"),pe.state|=ht|kt,pe.length===0&&(pe.state|=Me);try{this._read(pe.highWaterMark)}catch(Zt){J(this,Zt)}pe.state&=~kt,pe.reading||(ue=Q(Tt,pe))}let Pt;return ue>0?Pt=Le(ue,pe):Pt=null,Pt===null?(pe.needReadable=pe.length<=pe.highWaterMark,ue=0):(pe.length-=ue,pe.multiAwaitDrain?pe.awaitDrainWriters.clear():pe.awaitDrainWriters=null),pe.length===0&&(pe.ended||(pe.needReadable=!0),Tt!==ue&&pe.ended&&ft(this)),Pt!==null&&!pe.errorEmitted&&!pe.closeEmitted&&(pe.dataEmitted=!0,this.emit("data",Pt)),Pt};function k(ue,pe){if(P("onEofChunk"),!pe.ended){if(pe.decoder){const Tt=pe.decoder.end();Tt&&Tt.length&&(pe.buffer.push(Tt),pe.length+=pe.objectMode?1:Tt.length)}pe.ended=!0,pe.sync?V(ue):(pe.needReadable=!1,pe.emittedReadable=!0,j(ue))}}function V(ue){const pe=ue._readableState;P("emitReadable",pe.needReadable,pe.emittedReadable),pe.needReadable=!1,pe.emittedReadable||(P("emitReadable",pe.flowing),pe.emittedReadable=!0,e.nextTick(j,ue))}function j(ue){const pe=ue._readableState;P("emitReadable_",pe.destroyed,pe.length,pe.ended),!pe.destroyed&&!pe.errored&&(pe.length||pe.ended)&&(ue.emit("readable"),pe.emittedReadable=!1),pe.needReadable=!pe.flowing&&!pe.ended&&pe.length<=pe.highWaterMark,$e(ue)}function qe(ue,pe){!pe.readingMore&&pe.constructed&&(pe.readingMore=!0,e.nextTick(et,ue,pe))}function et(ue,pe){for(;!pe.reading&&!pe.ended&&(pe.length<pe.highWaterMark||pe.flowing&&pe.length===0);){const Tt=pe.length;if(P("maybeReadMore read 0"),ue.read(0),Tt===pe.length)break}pe.readingMore=!1}bt.prototype._read=function(ue){throw new $("_read()")},bt.prototype.pipe=function(ue,pe){const Tt=this,xt=this._readableState;xt.pipes.length===1&&(xt.multiAwaitDrain||(xt.multiAwaitDrain=!0,xt.awaitDrainWriters=new f(xt.awaitDrainWriters?[xt.awaitDrainWriters]:[]))),xt.pipes.push(ue),P("pipe count=%d opts=%j",xt.pipes.length,pe);const Zt=(!pe||pe.end!==!1)&&ue!==e.stdout&&ue!==e.stderr?Fr:sr;xt.endEmitted?e.nextTick(Zt):Tt.once("end",Zt),ue.on("unpipe",rr);function rr(Gt,Yr){P("onunpipe"),Gt===Tt&&Yr&&Yr.hasUnpiped===!1&&(Yr.hasUnpiped=!0,mr())}function Fr(){P("onend"),ue.end()}let $t,er=!1;function mr(){P("cleanup"),ue.removeListener("close",Gr),ue.removeListener("finish",gr),$t&&ue.removeListener("drain",$t),ue.removeListener("error",Ar),ue.removeListener("unpipe",rr),Tt.removeListener("end",Fr),Tt.removeListener("end",sr),Tt.removeListener("data",Dr),er=!0,$t&&xt.awaitDrainWriters&&(!ue._writableState||ue._writableState.needDrain)&&$t()}function ar(){er||(xt.pipes.length===1&&xt.pipes[0]===ue?(P("false write response, pause",0),xt.awaitDrainWriters=ue,xt.multiAwaitDrain=!1):xt.pipes.length>1&&xt.pipes.includes(ue)&&(P("false write response, pause",xt.awaitDrainWriters.size),xt.awaitDrainWriters.add(ue)),Tt.pause()),$t||($t=ze(Tt,ue),ue.on("drain",$t))}Tt.on("data",Dr);function Dr(Gt){P("ondata");const Yr=ue.write(Gt);P("dest.write",Yr),Yr===!1&&ar()}function Ar(Gt){if(P("onerror",Gt),sr(),ue.removeListener("error",Ar),ue.listenerCount("error")===0){const Yr=ue._writableState||ue._readableState;Yr&&!Yr.errorEmitted?J(ue,Gt):ue.emit("error",Gt)}}x(ue,"error",Ar);function Gr(){ue.removeListener("finish",gr),sr()}ue.once("close",Gr);function gr(){P("onfinish"),ue.removeListener("close",Gr),sr()}ue.once("finish",gr);function sr(){P("unpipe"),Tt.unpipe(ue)}return ue.emit("pipe",Tt),ue.writableNeedDrain===!0?ar():xt.flowing||(P("pipe resume"),Tt.resume()),ue};function ze(ue,pe){return function(){const xt=ue._readableState;xt.awaitDrainWriters===pe?(P("pipeOnDrain",1),xt.awaitDrainWriters=null):xt.multiAwaitDrain&&(P("pipeOnDrain",xt.awaitDrainWriters.size),xt.awaitDrainWriters.delete(pe)),(!xt.awaitDrainWriters||xt.awaitDrainWriters.size===0)&&ue.listenerCount("data")&&ue.resume()}}bt.prototype.unpipe=function(ue){const pe=this._readableState,Tt={hasUnpiped:!1};if(pe.pipes.length===0)return this;if(!ue){const Pt=pe.pipes;pe.pipes=[],this.pause();for(let Zt=0;Zt<Pt.length;Zt++)Pt[Zt].emit("unpipe",this,{hasUnpiped:!1});return this}const xt=r(pe.pipes,ue);return xt===-1?this:(pe.pipes.splice(xt,1),pe.pipes.length===0&&this.pause(),ue.emit("unpipe",this,Tt),this)},bt.prototype.on=function(ue,pe){const Tt=T.prototype.on.call(this,ue,pe),xt=this._readableState;return ue==="data"?(xt.readableListening=this.listenerCount("readable")>0,xt.flowing!==!1&&this.resume()):ue==="readable"&&!xt.endEmitted&&!xt.readableListening&&(xt.readableListening=xt.needReadable=!0,xt.flowing=!1,xt.emittedReadable=!1,P("on readable",xt.length,xt.reading),xt.length?V(this):xt.reading||e.nextTick(Br,this)),Tt},bt.prototype.addListener=bt.prototype.on,bt.prototype.removeListener=function(ue,pe){const Tt=T.prototype.removeListener.call(this,ue,pe);return ue==="readable"&&e.nextTick(Yt,this),Tt},bt.prototype.off=bt.prototype.removeListener,bt.prototype.removeAllListeners=function(ue){const pe=T.prototype.removeAllListeners.apply(this,arguments);return(ue==="readable"||ue===void 0)&&e.nextTick(Yt,this),pe};function Yt(ue){const pe=ue._readableState;pe.readableListening=ue.listenerCount("readable")>0,pe.resumeScheduled&&pe[Ne]===!1?pe.flowing=!0:ue.listenerCount("data")>0?ue.resume():pe.readableListening||(pe.flowing=null)}function Br(ue){P("readable nexttick read 0"),ue.read(0)}bt.prototype.resume=function(){const ue=this._readableState;return ue.flowing||(P("resume"),ue.flowing=!ue.readableListening,jr(this,ue)),ue[Ne]=!1,this};function jr(ue,pe){pe.resumeScheduled||(pe.resumeScheduled=!0,e.nextTick(or,ue,pe))}function or(ue,pe){P("resume",pe.reading),pe.reading||ue.read(0),pe.resumeScheduled=!1,ue.emit("resume"),$e(ue),pe.flowing&&!pe.reading&&ue.read(0)}bt.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ne]=!0,this};function $e(ue){const pe=ue._readableState;for(P("flow",pe.flowing);pe.flowing&&ue.read()!==null;);}bt.prototype.wrap=function(ue){let pe=!1;ue.on("data",xt=>{!this.push(xt)&&ue.pause&&(pe=!0,ue.pause())}),ue.on("end",()=>{this.push(null)}),ue.on("error",xt=>{J(this,xt)}),ue.on("close",()=>{this.destroy()}),ue.on("destroy",()=>{this.destroy()}),this._read=()=>{pe&&ue.resume&&(pe=!1,ue.resume())};const Tt=l(ue);for(let xt=1;xt<Tt.length;xt++){const Pt=Tt[xt];this[Pt]===void 0&&typeof ue[Pt]=="function"&&(this[Pt]=ue[Pt].bind(ue))}return this},bt.prototype[b]=function(){return vt(this)},bt.prototype.iterator=function(ue){return ue!==void 0&&lt(ue,"options"),vt(this,ue)};function vt(ue,pe){typeof ue.read!="function"&&(ue=bt.wrap(ue,{objectMode:!0}));const Tt=st(ue,pe);return Tt.stream=ue,Tt}async function*st(ue,pe){let Tt=rt;function xt(rr){this===ue?(Tt(),Tt=rt):Tt=rr}ue.on("readable",xt);let Pt;const Zt=F(ue,{writable:!1},rr=>{Pt=rr?q(Pt,rr):null,Tt(),Tt=rt});try{for(;;){const rr=ue.destroyed?null:ue.read();if(rr!==null)yield rr;else{if(Pt)throw Pt;if(Pt===null)return;await new h(xt)}}}catch(rr){throw Pt=q(Pt,rr),Pt}finally{(Pt||pe?.destroyOnReturn!==!1)&&(Pt===void 0||ue._readableState.autoDestroy)?B.destroyer(ue,null):(ue.off("readable",xt),Zt())}}d(bt.prototype,{readable:{__proto__:null,get(){const ue=this._readableState;return!!ue&&ue.readable!==!1&&!ue.destroyed&&!ue.errorEmitted&&!ue.endEmitted},set(ue){this._readableState&&(this._readableState.readable=!!ue)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ue){this._readableState&&(this._readableState.flowing=ue)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ue){this._readableState&&(this._readableState.destroyed=ue)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),d(Ct.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Ne]!==!1},set(ue){this[Ne]=!!ue}}}),bt._fromList=Le;function Le(ue,pe){if(pe.length===0)return null;let Tt;return pe.objectMode?Tt=pe.buffer.shift():!ue||ue>=pe.length?(pe.decoder?Tt=pe.buffer.join(""):pe.buffer.length===1?Tt=pe.buffer.first():Tt=pe.buffer.concat(pe.length),pe.buffer.clear()):Tt=pe.buffer.consume(ue,pe.decoder),Tt}function ft(ue){const pe=ue._readableState;P("endReadable",pe.endEmitted),pe.endEmitted||(pe.ended=!0,e.nextTick(Xt,pe,ue))}function Xt(ue,pe){if(P("endReadableNT",ue.endEmitted,ue.length),!ue.errored&&!ue.closeEmitted&&!ue.endEmitted&&ue.length===0){if(ue.endEmitted=!0,pe.emit("end"),pe.writable&&pe.allowHalfOpen===!1)e.nextTick(zt,pe);else if(ue.autoDestroy){const Tt=pe._writableState;(!Tt||Tt.autoDestroy&&(Tt.finished||Tt.writable===!1))&&pe.destroy()}}}function zt(ue){ue.writable&&!ue.writableEnded&&!ue.destroyed&&ue.end()}bt.from=function(ue,pe){return ve(bt,ue,pe)};let tr;function jt(){return tr===void 0&&(tr={}),tr}return bt.fromWeb=function(ue,pe){return jt().newStreamReadableFromReadableStream(ue,pe)},bt.toWeb=function(ue,pe){return jt().newReadableStreamFromStreamReadable(ue,pe)},bt.wrap=function(ue,pe){var Tt,xt;return new bt({objectMode:(Tt=(xt=ue.readableObjectMode)!==null&&xt!==void 0?xt:ue.objectMode)!==null&&Tt!==void 0?Tt:!0,...pe,destroy(Pt,Zt){B.destroyer(ue,Pt),Zt(Pt)}}).wrap(ue)},x0}var T0,t_;function Wv(){if(t_)return T0;t_=1;const e=yf(),{ArrayPrototypeSlice:r,Error:i,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:o,ObjectDefineProperties:d,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:h,SymbolHasInstance:f}=yi();T0=lt,lt.WritableState=Se;const{EventEmitter:y}=gf(),b=zv().Stream,{Buffer:_}=Is(),A=Dd(),{addAbortSignal:T}=im(),{getHighWaterMark:x,getDefaultHighWaterMark:O}=am(),{ERR_INVALID_ARG_TYPE:R,ERR_METHOD_NOT_IMPLEMENTED:F,ERR_MULTIPLE_CALLBACK:P,ERR_STREAM_CANNOT_PIPE:K,ERR_STREAM_DESTROYED:B,ERR_STREAM_ALREADY_FINISHED:W,ERR_STREAM_NULL_VALUES:Y,ERR_STREAM_WRITE_AFTER_END:q,ERR_UNKNOWN_ENCODING:Pe}=xa().codes,{errorOrDestroy:$}=A;l(lt.prototype,b.prototype),l(lt,b);function ie(){}const ge=h("kOnFinished");function Se(D,G,re){typeof re!="boolean"&&(re=G instanceof Pl()),this.objectMode=!!(D&&D.objectMode),re&&(this.objectMode=this.objectMode||!!(D&&D.writableObjectMode)),this.highWaterMark=D?x(this,D,"writableHighWaterMark",re):O(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const we=!!(D&&D.decodeStrings===!1);this.decodeStrings=!we,this.defaultEncoding=D&&D.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=J.bind(void 0,G),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,tt(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!D||D.emitClose!==!1,this.autoDestroy=!D||D.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ge]=[]}function tt(D){D.buffered=[],D.bufferedIndex=0,D.allBuffers=!0,D.allNoop=!0}Se.prototype.getBuffer=function(){return r(this.buffered,this.bufferedIndex)},o(Se.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function lt(D){const G=this instanceof Pl();if(!G&&!a(lt,this))return new lt(D);this._writableState=new Se(D,this,G),D&&(typeof D.write=="function"&&(this._write=D.write),typeof D.writev=="function"&&(this._writev=D.writev),typeof D.destroy=="function"&&(this._destroy=D.destroy),typeof D.final=="function"&&(this._final=D.final),typeof D.construct=="function"&&(this._construct=D.construct),D.signal&&T(D.signal,this)),b.call(this,D),A.construct(this,()=>{const re=this._writableState;re.writing||ht(this,re),le(this,re)})}o(lt,f,{__proto__:null,value:function(D){return a(this,D)?!0:this!==lt?!1:D&&D._writableState instanceof Se}}),lt.prototype.pipe=function(){$(this,new K)};function Ne(D,G,re,we){const Ce=D._writableState;if(typeof re=="function")we=re,re=Ce.defaultEncoding;else{if(!re)re=Ce.defaultEncoding;else if(re!=="buffer"&&!_.isEncoding(re))throw new Pe(re);typeof we!="function"&&(we=ie)}if(G===null)throw new Y;if(!Ce.objectMode)if(typeof G=="string")Ce.decodeStrings!==!1&&(G=_.from(G,re),re="buffer");else if(G instanceof _)re="buffer";else if(b._isUint8Array(G))G=b._uint8ArrayToBuffer(G),re="buffer";else throw new R("chunk",["string","Buffer","Uint8Array"],G);let ot;return Ce.ending?ot=new q:Ce.destroyed&&(ot=new B("write")),ot?(e.nextTick(we,ot),$(D,ot,!0),ot):(Ce.pendingcb++,yt(D,Ce,G,re,we))}lt.prototype.write=function(D,G,re){return Ne(this,D,G,re)===!0},lt.prototype.cork=function(){this._writableState.corked++},lt.prototype.uncork=function(){const D=this._writableState;D.corked&&(D.corked--,D.writing||ht(this,D))},lt.prototype.setDefaultEncoding=function(G){if(typeof G=="string"&&(G=u(G)),!_.isEncoding(G))throw new Pe(G);return this._writableState.defaultEncoding=G,this};function yt(D,G,re,we,Ce){const ot=G.objectMode?1:re.length;G.length+=ot;const Re=G.length<G.highWaterMark;return Re||(G.needDrain=!0),G.writing||G.corked||G.errored||!G.constructed?(G.buffered.push({chunk:re,encoding:we,callback:Ce}),G.allBuffers&&we!=="buffer"&&(G.allBuffers=!1),G.allNoop&&Ce!==ie&&(G.allNoop=!1)):(G.writelen=ot,G.writecb=Ce,G.writing=!0,G.sync=!0,D._write(re,we,G.onwrite),G.sync=!1),Re&&!G.errored&&!G.destroyed}function ve(D,G,re,we,Ce,ot,Re){G.writelen=we,G.writecb=Re,G.writing=!0,G.sync=!0,G.destroyed?G.onwrite(new B("write")):re?D._writev(Ce,G.onwrite):D._write(Ce,ot,G.onwrite),G.sync=!1}function rt(D,G,re,we){--G.pendingcb,we(re),je(G),$(D,re)}function J(D,G){const re=D._writableState,we=re.sync,Ce=re.writecb;if(typeof Ce!="function"){$(D,new P);return}re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0,G?(G.stack,re.errored||(re.errored=G),D._readableState&&!D._readableState.errored&&(D._readableState.errored=G),we?e.nextTick(rt,D,re,G,Ce):rt(D,re,G,Ce)):(re.buffered.length>re.bufferedIndex&&ht(D,re),we?re.afterWriteTickInfo!==null&&re.afterWriteTickInfo.cb===Ce?re.afterWriteTickInfo.count++:(re.afterWriteTickInfo={count:1,cb:Ce,stream:D,state:re},e.nextTick(xe,re.afterWriteTickInfo)):Ze(D,re,1,Ce))}function xe({stream:D,state:G,count:re,cb:we}){return G.afterWriteTickInfo=null,Ze(D,G,re,we)}function Ze(D,G,re,we){for(!G.ending&&!D.destroyed&&G.length===0&&G.needDrain&&(G.needDrain=!1,D.emit("drain"));re-- >0;)G.pendingcb--,we();G.destroyed&&je(G),le(D,G)}function je(D){if(D.writing)return;for(let Ce=D.bufferedIndex;Ce<D.buffered.length;++Ce){var G;const{chunk:ot,callback:Re}=D.buffered[Ce],pt=D.objectMode?1:ot.length;D.length-=pt,Re((G=D.errored)!==null&&G!==void 0?G:new B("write"))}const re=D[ge].splice(0);for(let Ce=0;Ce<re.length;Ce++){var we;re[Ce]((we=D.errored)!==null&&we!==void 0?we:new B("end"))}tt(D)}function ht(D,G){if(G.corked||G.bufferProcessing||G.destroyed||!G.constructed)return;const{buffered:re,bufferedIndex:we,objectMode:Ce}=G,ot=re.length-we;if(!ot)return;let Re=we;if(G.bufferProcessing=!0,ot>1&&D._writev){G.pendingcb-=ot-1;const pt=G.allNoop?ie:bt=>{for(let We=Re;We<re.length;++We)re[We].callback(bt)},Ct=G.allNoop&&Re===0?re:r(re,Re);Ct.allBuffers=G.allBuffers,ve(D,G,!0,G.length,Ct,"",pt),tt(G)}else{do{const{chunk:pt,encoding:Ct,callback:bt}=re[Re];re[Re++]=null;const We=Ce?1:pt.length;ve(D,G,!1,We,pt,Ct,bt)}while(Re<re.length&&!G.writing);Re===re.length?tt(G):Re>256?(re.splice(0,Re),G.bufferedIndex=0):G.bufferedIndex=Re}G.bufferProcessing=!1}lt.prototype._write=function(D,G,re){if(this._writev)this._writev([{chunk:D,encoding:G}],re);else throw new F("_write()")},lt.prototype._writev=null,lt.prototype.end=function(D,G,re){const we=this._writableState;typeof D=="function"?(re=D,D=null,G=null):typeof G=="function"&&(re=G,G=null);let Ce;if(D!=null){const ot=Ne(this,D,G);ot instanceof i&&(Ce=ot)}return we.corked&&(we.corked=1,this.uncork()),Ce||(!we.errored&&!we.ending?(we.ending=!0,le(this,we,!0),we.ended=!0):we.finished?Ce=new W("end"):we.destroyed&&(Ce=new B("end"))),typeof re=="function"&&(Ce||we.finished?e.nextTick(re,Ce):we[ge].push(re)),this};function Nt(D){return D.ending&&!D.destroyed&&D.constructed&&D.length===0&&!D.errored&&D.buffered.length===0&&!D.finished&&!D.writing&&!D.errorEmitted&&!D.closeEmitted}function kt(D,G){let re=!1;function we(Ce){if(re){$(D,Ce??P());return}if(re=!0,G.pendingcb--,Ce){const ot=G[ge].splice(0);for(let Re=0;Re<ot.length;Re++)ot[Re](Ce);$(D,Ce,G.sync)}else Nt(G)&&(G.prefinished=!0,D.emit("prefinish"),G.pendingcb++,e.nextTick(Te,D,G))}G.sync=!0,G.pendingcb++;try{D._final(we)}catch(Ce){we(Ce)}G.sync=!1}function Me(D,G){!G.prefinished&&!G.finalCalled&&(typeof D._final=="function"&&!G.destroyed?(G.finalCalled=!0,kt(D,G)):(G.prefinished=!0,D.emit("prefinish")))}function le(D,G,re){Nt(G)&&(Me(D,G),G.pendingcb===0&&(re?(G.pendingcb++,e.nextTick((we,Ce)=>{Nt(Ce)?Te(we,Ce):Ce.pendingcb--},D,G)):Nt(G)&&(G.pendingcb++,Te(D,G))))}function Te(D,G){G.pendingcb--,G.finished=!0;const re=G[ge].splice(0);for(let we=0;we<re.length;we++)re[we]();if(D.emit("finish"),G.autoDestroy){const we=D._readableState;(!we||we.autoDestroy&&(we.endEmitted||we.readable===!1))&&D.destroy()}}d(lt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(D){this._writableState&&(this._writableState.destroyed=D)}},writable:{__proto__:null,get(){const D=this._writableState;return!!D&&D.writable!==!1&&!D.destroyed&&!D.errored&&!D.ending&&!D.ended},set(D){this._writableState&&(this._writableState.writable=!!D)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const D=this._writableState;return D?!D.destroyed&&!D.ending&&D.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Je=A.destroy;lt.prototype.destroy=function(D,G){const re=this._writableState;return!re.destroyed&&(re.bufferedIndex<re.buffered.length||re[ge].length)&&e.nextTick(je,re),Je.call(this,D,G),this},lt.prototype._undestroy=A.undestroy,lt.prototype._destroy=function(D,G){G(D)},lt.prototype[y.captureRejectionSymbol]=function(D){this.destroy(D)};let se;function M(){return se===void 0&&(se={}),se}return lt.fromWeb=function(D,G){return M().newStreamWritableFromWritableStream(D,G)},lt.toWeb=function(D){return M().newWritableStreamFromStreamWritable(D)},T0}var C0,r_;function Ex(){if(r_)return C0;r_=1;const e=yf(),r=Is(),{isReadable:i,isWritable:a,isIterable:o,isNodeStream:d,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:h,isReadableStream:f,isWritableStream:y}=Ul(),b=Hu(),{AbortError:_,codes:{ERR_INVALID_ARG_TYPE:A,ERR_INVALID_RETURN_VALUE:T}}=xa(),{destroyer:x}=Dd(),O=Pl(),R=om(),F=Wv(),{createDeferredPromise:P}=Ga(),K=xE(),B=globalThis.Blob||r.Blob,W=typeof B<"u"?function(Se){return Se instanceof B}:function(Se){return!1},Y=globalThis.AbortController||cg().AbortController,{FunctionPrototypeCall:q}=yi();class Pe extends O{constructor(Se){super(Se),Se?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),Se?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}C0=function ge(Se,tt){if(h(Se))return Se;if(l(Se))return ie({readable:Se});if(u(Se))return ie({writable:Se});if(d(Se))return ie({writable:!1,readable:!1});if(f(Se))return ie({readable:R.fromWeb(Se)});if(y(Se))return ie({writable:F.fromWeb(Se)});if(typeof Se=="function"){const{value:Ne,write:yt,final:ve,destroy:rt}=$(Se);if(o(Ne))return K(Pe,Ne,{objectMode:!0,write:yt,final:ve,destroy:rt});const J=Ne?.then;if(typeof J=="function"){let xe;const Ze=q(J,Ne,je=>{if(je!=null)throw new T("nully","body",je)},je=>{x(xe,je)});return xe=new Pe({objectMode:!0,readable:!1,write:yt,final(je){ve(async()=>{try{await Ze,e.nextTick(je,null)}catch(ht){e.nextTick(je,ht)}})},destroy:rt})}throw new T("Iterable, AsyncIterable or AsyncFunction",tt,Ne)}if(W(Se))return ge(Se.arrayBuffer());if(o(Se))return K(Pe,Se,{objectMode:!0,writable:!1});if(f(Se?.readable)&&y(Se?.writable))return Pe.fromWeb(Se);if(typeof Se?.writable=="object"||typeof Se?.readable=="object"){const Ne=Se!=null&&Se.readable?l(Se?.readable)?Se?.readable:ge(Se.readable):void 0,yt=Se!=null&&Se.writable?u(Se?.writable)?Se?.writable:ge(Se.writable):void 0;return ie({readable:Ne,writable:yt})}const lt=Se?.then;if(typeof lt=="function"){let Ne;return q(lt,Se,yt=>{yt!=null&&Ne.push(yt),Ne.push(null)},yt=>{x(Ne,yt)}),Ne=new Pe({objectMode:!0,writable:!1,read(){}})}throw new A(tt,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Se)};function $(ge){let{promise:Se,resolve:tt}=P();const lt=new Y,Ne=lt.signal;return{value:ge(async function*(){for(;;){const ve=Se;Se=null;const{chunk:rt,done:J,cb:xe}=await ve;if(e.nextTick(xe),J)return;if(Ne.aborted)throw new _(void 0,{cause:Ne.reason});({promise:Se,resolve:tt}=P()),yield rt}}(),{signal:Ne}),write(ve,rt,J){const xe=tt;tt=null,xe({chunk:ve,done:!1,cb:J})},final(ve){const rt=tt;tt=null,rt({done:!0,cb:ve})},destroy(ve,rt){lt.abort(),rt(ve)}}}function ie(ge){const Se=ge.readable&&typeof ge.readable.read!="function"?R.wrap(ge.readable):ge.readable,tt=ge.writable;let lt=!!i(Se),Ne=!!a(tt),yt,ve,rt,J,xe;function Ze(je){const ht=J;J=null,ht?ht(je):je&&xe.destroy(je)}return xe=new Pe({readableObjectMode:!!(Se!=null&&Se.readableObjectMode),writableObjectMode:!!(tt!=null&&tt.writableObjectMode),readable:lt,writable:Ne}),Ne&&(b(tt,je=>{Ne=!1,je&&x(Se,je),Ze(je)}),xe._write=function(je,ht,Nt){tt.write(je,ht)?Nt():yt=Nt},xe._final=function(je){tt.end(),ve=je},tt.on("drain",function(){if(yt){const je=yt;yt=null,je()}}),tt.on("finish",function(){if(ve){const je=ve;ve=null,je()}})),lt&&(b(Se,je=>{lt=!1,je&&x(Se,je),Ze(je)}),Se.on("readable",function(){if(rt){const je=rt;rt=null,je()}}),Se.on("end",function(){xe.push(null)}),xe._read=function(){for(;;){const je=Se.read();if(je===null){rt=xe._read;return}if(!xe.push(je))return}}),xe._destroy=function(je,ht){!je&&J!==null&&(je=new _),rt=null,yt=null,ve=null,J===null?ht(je):(J=ht,x(tt,je),x(Se,je))},xe}return C0}var O0,n_;function Pl(){if(n_)return O0;n_=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:r,ObjectKeys:i,ObjectSetPrototypeOf:a}=yi();O0=l;const o=om(),d=Wv();a(l.prototype,o.prototype),a(l,o);{const y=i(d.prototype);for(let b=0;b<y.length;b++){const _=y[b];l.prototype[_]||(l.prototype[_]=d.prototype[_])}}function l(y){if(!(this instanceof l))return new l(y);o.call(this,y),d.call(this,y),y?(this.allowHalfOpen=y.allowHalfOpen!==!1,y.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),y.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(l.prototype,{writable:{__proto__:null,...r(d.prototype,"writable")},writableHighWaterMark:{__proto__:null,...r(d.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...r(d.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...r(d.prototype,"writableBuffer")},writableLength:{__proto__:null,...r(d.prototype,"writableLength")},writableFinished:{__proto__:null,...r(d.prototype,"writableFinished")},writableCorked:{__proto__:null,...r(d.prototype,"writableCorked")},writableEnded:{__proto__:null,...r(d.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...r(d.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(y){this._readableState&&this._writableState&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}}});let u;function h(){return u===void 0&&(u={}),u}l.fromWeb=function(y,b){return h().newStreamDuplexFromReadableWritablePair(y,b)},l.toWeb=function(y){return h().newReadableWritablePairFromDuplex(y)};let f;return l.from=function(y){return f||(f=Ex()),f(y,"body")},O0}var I0,i_;function TE(){if(i_)return I0;i_=1;const{ObjectSetPrototypeOf:e,Symbol:r}=yi();I0=l;const{ERR_METHOD_NOT_IMPLEMENTED:i}=xa().codes,a=Pl(),{getHighWaterMark:o}=am();e(l.prototype,a.prototype),e(l,a);const d=r("kCallback");function l(f){if(!(this instanceof l))return new l(f);const y=f?o(this,f,"readableHighWaterMark",!0):null;y===0&&(f={...f,highWaterMark:null,readableHighWaterMark:y,writableHighWaterMark:f.writableHighWaterMark||0}),a.call(this,f),this._readableState.sync=!1,this[d]=null,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",h)}function u(f){typeof this._flush=="function"&&!this.destroyed?this._flush((y,b)=>{if(y){f?f(y):this.destroy(y);return}b!=null&&this.push(b),this.push(null),f&&f()}):(this.push(null),f&&f())}function h(){this._final!==u&&u.call(this)}return l.prototype._final=u,l.prototype._transform=function(f,y,b){throw new i("_transform()")},l.prototype._write=function(f,y,b){const _=this._readableState,A=this._writableState,T=_.length;this._transform(f,y,(x,O)=>{if(x){b(x);return}O!=null&&this.push(O),A.ended||T===_.length||_.length<_.highWaterMark?b():this[d]=b})},l.prototype._read=function(){if(this[d]){const f=this[d];this[d]=null,f()}},I0}var P0,a_;function CE(){if(a_)return P0;a_=1;const{ObjectSetPrototypeOf:e}=yi();P0=i;const r=TE();e(i.prototype,r.prototype),e(i,r);function i(a){if(!(this instanceof i))return new i(a);r.call(this,a)}return i.prototype._transform=function(a,o,d){d(null,a)},P0}var N0,o_;function Jv(){if(o_)return N0;o_=1;const e=yf(),{ArrayIsArray:r,Promise:i,SymbolAsyncIterator:a,SymbolDispose:o}=yi(),d=Hu(),{once:l}=Ga(),u=Dd(),h=Pl(),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:b,ERR_MISSING_ARGS:_,ERR_STREAM_DESTROYED:A,ERR_STREAM_PREMATURE_CLOSE:T},AbortError:x}=xa(),{validateFunction:O,validateAbortSignal:R}=bg(),{isIterable:F,isReadable:P,isReadableNodeStream:K,isNodeStream:B,isTransformStream:W,isWebStream:Y,isReadableStream:q,isReadableFinished:Pe}=Ul(),$=globalThis.AbortController||cg().AbortController;let ie,ge,Se;function tt(je,ht,Nt){let kt=!1;je.on("close",()=>{kt=!0});const Me=d(je,{readable:ht,writable:Nt},le=>{kt=!le});return{destroy:le=>{kt||(kt=!0,u.destroyer(je,le||new A("pipe")))},cleanup:Me}}function lt(je){return O(je[je.length-1],"streams[stream.length - 1]"),je.pop()}function Ne(je){if(F(je))return je;if(K(je))return yt(je);throw new y("val",["Readable","Iterable","AsyncIterable"],je)}async function*yt(je){ge||(ge=om()),yield*ge.prototype[a].call(je)}async function ve(je,ht,Nt,{end:kt}){let Me,le=null;const Te=M=>{if(M&&(Me=M),le){const D=le;le=null,D()}},Je=()=>new i((M,D)=>{Me?D(Me):le=()=>{Me?D(Me):M()}});ht.on("drain",Te);const se=d(ht,{readable:!1},Te);try{ht.writableNeedDrain&&await Je();for await(const M of je)ht.write(M)||await Je();kt&&(ht.end(),await Je()),Nt()}catch(M){Nt(Me!==M?f(Me,M):M)}finally{se(),ht.off("drain",Te)}}async function rt(je,ht,Nt,{end:kt}){W(ht)&&(ht=ht.writable);const Me=ht.getWriter();try{for await(const le of je)await Me.ready,Me.write(le).catch(()=>{});await Me.ready,kt&&await Me.close(),Nt()}catch(le){try{await Me.abort(le),Nt(le)}catch(Te){Nt(Te)}}}function J(...je){return xe(je,l(lt(je)))}function xe(je,ht,Nt){if(je.length===1&&r(je[0])&&(je=je[0]),je.length<2)throw new _("streams");const kt=new $,Me=kt.signal,le=Nt?.signal,Te=[];R(le,"options.signal");function Je(){Ce(new x)}Se=Se||Ga().addAbortListener;let se;le&&(se=Se(le,Je));let M,D;const G=[];let re=0;function we(bt){Ce(bt,--re===0)}function Ce(bt,We){var Ge;if(bt&&(!M||M.code==="ERR_STREAM_PREMATURE_CLOSE")&&(M=bt),!(!M&&!We)){for(;G.length;)G.shift()(M);(Ge=se)===null||Ge===void 0||Ge[o](),kt.abort(),We&&(M||Te.forEach(Oe=>Oe()),e.nextTick(ht,M,D))}}let ot;for(let bt=0;bt<je.length;bt++){const We=je[bt],Ge=bt<je.length-1,Oe=bt>0,ut=Ge||Nt?.end!==!1,Q=bt===je.length-1;if(B(We)){let k=function(V){V&&V.name!=="AbortError"&&V.code!=="ERR_STREAM_PREMATURE_CLOSE"&&we(V)};var Ct=k;if(ut){const{destroy:V,cleanup:j}=tt(We,Ge,Oe);G.push(V),P(We)&&Q&&Te.push(j)}We.on("error",k),P(We)&&Q&&Te.push(()=>{We.removeListener("error",k)})}if(bt===0)if(typeof We=="function"){if(ot=We({signal:Me}),!F(ot))throw new b("Iterable, AsyncIterable or Stream","source",ot)}else F(We)||K(We)||W(We)?ot=We:ot=h.from(We);else if(typeof We=="function"){if(W(ot)){var Re;ot=Ne((Re=ot)===null||Re===void 0?void 0:Re.readable)}else ot=Ne(ot);if(ot=We(ot,{signal:Me}),Ge){if(!F(ot,!0))throw new b("AsyncIterable",`transform[${bt-1}]`,ot)}else{var pt;ie||(ie=CE());const k=new ie({objectMode:!0}),V=(pt=ot)===null||pt===void 0?void 0:pt.then;if(typeof V=="function")re++,V.call(ot,et=>{D=et,et!=null&&k.write(et),ut&&k.end(),e.nextTick(we)},et=>{k.destroy(et),e.nextTick(we,et)});else if(F(ot,!0))re++,ve(ot,k,we,{end:ut});else if(q(ot)||W(ot)){const et=ot.readable||ot;re++,ve(et,k,we,{end:ut})}else throw new b("AsyncIterable or Promise","destination",ot);ot=k;const{destroy:j,cleanup:qe}=tt(ot,!1,!0);G.push(j),Q&&Te.push(qe)}}else if(B(We)){if(K(ot)){re+=2;const k=Ze(ot,We,we,{end:ut});P(We)&&Q&&Te.push(k)}else if(W(ot)||q(ot)){const k=ot.readable||ot;re++,ve(k,We,we,{end:ut})}else if(F(ot))re++,ve(ot,We,we,{end:ut});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ot);ot=We}else if(Y(We)){if(K(ot))re++,rt(Ne(ot),We,we,{end:ut});else if(q(ot)||F(ot))re++,rt(ot,We,we,{end:ut});else if(W(ot))re++,rt(ot.readable,We,we,{end:ut});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ot);ot=We}else ot=h.from(We)}return(Me!=null&&Me.aborted||le!=null&&le.aborted)&&e.nextTick(Je),ot}function Ze(je,ht,Nt,{end:kt}){let Me=!1;if(ht.on("close",()=>{Me||Nt(new T)}),je.pipe(ht,{end:!1}),kt){let Te=function(){Me=!0,ht.end()};var le=Te;Pe(je)?e.nextTick(Te):je.once("end",Te)}else Nt();return d(je,{readable:!0,writable:!1},Te=>{const Je=je._readableState;Te&&Te.code==="ERR_STREAM_PREMATURE_CLOSE"&&Je&&Je.ended&&!Je.errored&&!Je.errorEmitted?je.once("end",Nt).once("error",Nt):Nt(Te)}),d(ht,{readable:!1,writable:!0},Nt)}return N0={pipelineImpl:xe,pipeline:J},N0}var F0,s_;function OE(){if(s_)return F0;s_=1;const{pipeline:e}=Jv(),r=Pl(),{destroyer:i}=Dd(),{isNodeStream:a,isReadable:o,isWritable:d,isWebStream:l,isTransformStream:u,isWritableStream:h,isReadableStream:f}=Ul(),{AbortError:y,codes:{ERR_INVALID_ARG_VALUE:b,ERR_MISSING_ARGS:_}}=xa(),A=Hu();return F0=function(...x){if(x.length===0)throw new _("streams");if(x.length===1)return r.from(x[0]);const O=[...x];if(typeof x[0]=="function"&&(x[0]=r.from(x[0])),typeof x[x.length-1]=="function"){const ie=x.length-1;x[ie]=r.from(x[ie])}for(let ie=0;ie<x.length;++ie)if(!(!a(x[ie])&&!l(x[ie]))){if(ie<x.length-1&&!(o(x[ie])||f(x[ie])||u(x[ie])))throw new b(`streams[${ie}]`,O[ie],"must be readable");if(ie>0&&!(d(x[ie])||h(x[ie])||u(x[ie])))throw new b(`streams[${ie}]`,O[ie],"must be writable")}let R,F,P,K,B;function W(ie){const ge=K;K=null,ge?ge(ie):ie?B.destroy(ie):!$&&!Pe&&B.destroy()}const Y=x[0],q=e(x,W),Pe=!!(d(Y)||h(Y)||u(Y)),$=!!(o(q)||f(q)||u(q));if(B=new r({writableObjectMode:!!(Y!=null&&Y.writableObjectMode),readableObjectMode:!!(q!=null&&q.readableObjectMode),writable:Pe,readable:$}),Pe){if(a(Y))B._write=function(ge,Se,tt){Y.write(ge,Se)?tt():R=tt},B._final=function(ge){Y.end(),F=ge},Y.on("drain",function(){if(R){const ge=R;R=null,ge()}});else if(l(Y)){const Se=(u(Y)?Y.writable:Y).getWriter();B._write=async function(tt,lt,Ne){try{await Se.ready,Se.write(tt).catch(()=>{}),Ne()}catch(yt){Ne(yt)}},B._final=async function(tt){try{await Se.ready,Se.close().catch(()=>{}),F=tt}catch(lt){tt(lt)}}}const ie=u(q)?q.readable:q;A(ie,()=>{if(F){const ge=F;F=null,ge()}})}if($){if(a(q))q.on("readable",function(){if(P){const ie=P;P=null,ie()}}),q.on("end",function(){B.push(null)}),B._read=function(){for(;;){const ie=q.read();if(ie===null){P=B._read;return}if(!B.push(ie))return}};else if(l(q)){const ge=(u(q)?q.readable:q).getReader();B._read=async function(){for(;;)try{const{value:Se,done:tt}=await ge.read();if(!B.push(Se))return;if(tt){B.push(null);return}}catch{return}}}}return B._destroy=function(ie,ge){!ie&&K!==null&&(ie=new y),P=null,R=null,F=null,K===null?ge(ie):(K=ge,a(q)&&i(q,ie))},B},F0}var l_;function Ax(){if(l_)return Ay;l_=1;const e=globalThis.AbortController||cg().AbortController,{codes:{ERR_INVALID_ARG_VALUE:r,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:o},AbortError:d}=xa(),{validateAbortSignal:l,validateInteger:u,validateObject:h}=bg(),f=yi().Symbol("kWeak"),y=yi().Symbol("kResistStopPropagation"),{finished:b}=Hu(),_=OE(),{addAbortSignalNoValidate:A}=im(),{isWritable:T,isNodeStream:x}=Ul(),{deprecate:O}=Ga(),{ArrayPrototypePush:R,Boolean:F,MathFloor:P,Number:K,NumberIsNaN:B,Promise:W,PromiseReject:Y,PromiseResolve:q,PromisePrototypeThen:Pe,Symbol:$}=yi(),ie=$("kEmpty"),ge=$("kEof");function Se(le,Te){if(Te!=null&&h(Te,"options"),Te?.signal!=null&&l(Te.signal,"options.signal"),x(le)&&!T(le))throw new r("stream",le,"must be writable");const Je=_(this,le);return Te!=null&&Te.signal&&A(Te.signal,Je),Je}function tt(le,Te){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);Te!=null&&h(Te,"options"),Te?.signal!=null&&l(Te.signal,"options.signal");let Je=1;Te?.concurrency!=null&&(Je=P(Te.concurrency));let se=Je-1;return Te?.highWaterMark!=null&&(se=P(Te.highWaterMark)),u(Je,"options.concurrency",1),u(se,"options.highWaterMark",0),se+=Je,(async function*(){const D=Ga().AbortSignalAny([Te?.signal].filter(F)),G=this,re=[],we={signal:D};let Ce,ot,Re=!1,pt=0;function Ct(){Re=!0,bt()}function bt(){pt-=1,We()}function We(){ot&&!Re&&pt<Je&&re.length<se&&(ot(),ot=null)}async function Ge(){try{for await(let Oe of G){if(Re)return;if(D.aborted)throw new d;try{if(Oe=le(Oe,we),Oe===ie)continue;Oe=q(Oe)}catch(ut){Oe=Y(ut)}pt+=1,Pe(Oe,bt,Ct),re.push(Oe),Ce&&(Ce(),Ce=null),!Re&&(re.length>=se||pt>=Je)&&await new W(ut=>{ot=ut})}re.push(ge)}catch(Oe){const ut=Y(Oe);Pe(ut,bt,Ct),re.push(ut)}finally{Re=!0,Ce&&(Ce(),Ce=null)}}Ge();try{for(;;){for(;re.length>0;){const Oe=await re[0];if(Oe===ge)return;if(D.aborted)throw new d;Oe!==ie&&(yield Oe),re.shift(),We()}await new W(Oe=>{Ce=Oe})}}finally{Re=!0,ot&&(ot(),ot=null)}}).call(this)}function lt(le=void 0){return le!=null&&h(le,"options"),le?.signal!=null&&l(le.signal,"options.signal"),(async function*(){let Je=0;for await(const M of this){var se;if(le!=null&&(se=le.signal)!==null&&se!==void 0&&se.aborted)throw new d({cause:le.signal.reason});yield[Je++,M]}}).call(this)}async function Ne(le,Te=void 0){for await(const Je of J.call(this,le,Te))return!0;return!1}async function yt(le,Te=void 0){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);return!await Ne.call(this,async(...Je)=>!await le(...Je),Te)}async function ve(le,Te){for await(const Je of J.call(this,le,Te))return Je}async function rt(le,Te){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);async function Je(se,M){return await le(se,M),ie}for await(const se of tt.call(this,Je,Te));}function J(le,Te){if(typeof le!="function")throw new i("fn",["Function","AsyncFunction"],le);async function Je(se,M){return await le(se,M)?se:ie}return tt.call(this,Je,Te)}class xe extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Ze(le,Te,Je){var se;if(typeof le!="function")throw new i("reducer",["Function","AsyncFunction"],le);Je!=null&&h(Je,"options"),Je?.signal!=null&&l(Je.signal,"options.signal");let M=arguments.length>1;if(Je!=null&&(se=Je.signal)!==null&&se!==void 0&&se.aborted){const Ce=new d(void 0,{cause:Je.signal.reason});throw this.once("error",()=>{}),await b(this.destroy(Ce)),Ce}const D=new e,G=D.signal;if(Je!=null&&Je.signal){const Ce={once:!0,[f]:this,[y]:!0};Je.signal.addEventListener("abort",()=>D.abort(),Ce)}let re=!1;try{for await(const Ce of this){var we;if(re=!0,Je!=null&&(we=Je.signal)!==null&&we!==void 0&&we.aborted)throw new d;M?Te=await le(Te,Ce,{signal:G}):(Te=Ce,M=!0)}if(!re&&!M)throw new xe}finally{D.abort()}return Te}async function je(le){le!=null&&h(le,"options"),le?.signal!=null&&l(le.signal,"options.signal");const Te=[];for await(const se of this){var Je;if(le!=null&&(Je=le.signal)!==null&&Je!==void 0&&Je.aborted)throw new d(void 0,{cause:le.signal.reason});R(Te,se)}return Te}function ht(le,Te){const Je=tt.call(this,le,Te);return(async function*(){for await(const M of Je)yield*M}).call(this)}function Nt(le){if(le=K(le),B(le))return 0;if(le<0)throw new o("number",">= 0",le);return le}function kt(le,Te=void 0){return Te!=null&&h(Te,"options"),Te?.signal!=null&&l(Te.signal,"options.signal"),le=Nt(le),(async function*(){var se;if(Te!=null&&(se=Te.signal)!==null&&se!==void 0&&se.aborted)throw new d;for await(const D of this){var M;if(Te!=null&&(M=Te.signal)!==null&&M!==void 0&&M.aborted)throw new d;le--<=0&&(yield D)}}).call(this)}function Me(le,Te=void 0){return Te!=null&&h(Te,"options"),Te?.signal!=null&&l(Te.signal,"options.signal"),le=Nt(le),(async function*(){var se;if(Te!=null&&(se=Te.signal)!==null&&se!==void 0&&se.aborted)throw new d;for await(const D of this){var M;if(Te!=null&&(M=Te.signal)!==null&&M!==void 0&&M.aborted)throw new d;if(le-- >0&&(yield D),le<=0)return}}).call(this)}return Ay.streamReturningOperators={asIndexedPairs:O(lt,"readable.asIndexedPairs will be removed in a future version."),drop:kt,filter:J,flatMap:ht,map:tt,take:Me,compose:Se},Ay.promiseReturningOperators={every:yt,forEach:rt,reduce:Ze,toArray:je,some:Ne,find:ve},Ay}var D0,u_;function IE(){if(u_)return D0;u_=1;const{ArrayPrototypePop:e,Promise:r}=yi(),{isIterable:i,isNodeStream:a,isWebStream:o}=Ul(),{pipelineImpl:d}=Jv(),{finished:l}=Hu();PE();function u(...h){return new r((f,y)=>{let b,_;const A=h[h.length-1];if(A&&typeof A=="object"&&!a(A)&&!i(A)&&!o(A)){const T=e(h);b=T.signal,_=T.end}d(h,(T,x)=>{T?y(T):f(x)},{signal:b,end:_})})}return D0={finished:l,pipeline:u},D0}var c_;function PE(){if(c_)return f0.exports;c_=1;const{Buffer:e}=Is(),{ObjectDefineProperty:r,ObjectKeys:i,ReflectApply:a}=yi(),{promisify:{custom:o}}=Ga(),{streamReturningOperators:d,promiseReturningOperators:l}=Ax(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=xa(),h=OE(),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:y}=am(),{pipeline:b}=Jv(),{destroyer:_}=Dd(),A=Hu(),T=IE(),x=Ul(),O=f0.exports=zv().Stream;O.isDestroyed=x.isDestroyed,O.isDisturbed=x.isDisturbed,O.isErrored=x.isErrored,O.isReadable=x.isReadable,O.isWritable=x.isWritable,O.Readable=om();for(const P of i(d)){let B=function(...W){if(new.target)throw u();return O.Readable.from(a(K,this,W))};var F=B;const K=d[P];r(B,"name",{__proto__:null,value:K.name}),r(B,"length",{__proto__:null,value:K.length}),r(O.Readable.prototype,P,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}for(const P of i(l)){let B=function(...Y){if(new.target)throw u();return a(K,this,Y)};var F=B;const K=l[P];r(B,"name",{__proto__:null,value:K.name}),r(B,"length",{__proto__:null,value:K.length}),r(O.Readable.prototype,P,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}O.Writable=Wv(),O.Duplex=Pl(),O.Transform=TE(),O.PassThrough=CE(),O.pipeline=b;const{addAbortSignal:R}=im();return O.addAbortSignal=R,O.finished=A,O.destroy=_,O.compose=h,O.setDefaultHighWaterMark=f,O.getDefaultHighWaterMark=y,r(O,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return T}}),r(b,o,{__proto__:null,enumerable:!0,get(){return T.pipeline}}),r(A,o,{__proto__:null,enumerable:!0,get(){return T.finished}}),O.Stream=O,O._isUint8Array=function(K){return K instanceof Uint8Array},O._uint8ArrayToBuffer=function(K){return e.from(K.buffer,K.byteOffset,K.byteLength)},f0.exports}var f_;function NE(){return f_||(f_=1,function(e){const r=PE(),i=IE(),a=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=a,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return i}}),e.exports.Stream=r.Stream,e.exports.default=e.exports}(c0)),c0.exports}var cp={},fp={},sf={},dp={},d_;function FE(){if(d_)return dp;d_=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.BlankNode=void 0;class e{constructor(i){this.termType="BlankNode",this.value=i}equals(i){return!!i&&i.termType==="BlankNode"&&i.value===this.value}}return dp.BlankNode=e,dp}var hp={},pp={},h_;function DE(){if(h_)return pp;h_=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.DefaultGraph=void 0;class e{constructor(){this.termType="DefaultGraph",this.value=""}equals(i){return!!i&&i.termType==="DefaultGraph"}}return pp.DefaultGraph=e,e.INSTANCE=new e,pp}var gp={},yp={},p_;function Yv(){if(p_)return yp;p_=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.NamedNode=void 0;class e{constructor(i){this.termType="NamedNode",this.value=i}equals(i){return!!i&&i.termType==="NamedNode"&&i.value===this.value}}return yp.NamedNode=e,yp}var g_;function UE(){if(g_)return gp;g_=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.Literal=void 0;const e=Yv();class r{constructor(a,o){this.termType="Literal",this.value=a,typeof o=="string"?(this.language=o,this.datatype=r.RDF_LANGUAGE_STRING):o?(this.language="",this.datatype=o):(this.language="",this.datatype=r.XSD_STRING)}equals(a){return!!a&&a.termType==="Literal"&&a.value===this.value&&a.language===this.language&&this.datatype.equals(a.datatype)}}return gp.Literal=r,r.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),gp}var mp={},y_;function LE(){if(y_)return mp;y_=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.Quad=void 0;class e{constructor(i,a,o,d){this.termType="Quad",this.value="",this.subject=i,this.predicate=a,this.object=o,this.graph=d}equals(i){return!!i&&(i.termType==="Quad"||!i.termType)&&this.subject.equals(i.subject)&&this.predicate.equals(i.predicate)&&this.object.equals(i.object)&&this.graph.equals(i.graph)}}return mp.Quad=e,mp}var vp={},m_;function ME(){if(m_)return vp;m_=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.Variable=void 0;class e{constructor(i){this.termType="Variable",this.value=i}equals(i){return!!i&&i.termType==="Variable"&&i.value===this.value}}return vp.Variable=e,vp}var v_;function Rx(){if(v_)return hp;v_=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.DataFactory=void 0;const e=FE(),r=DE(),i=UE(),a=Yv(),o=LE(),d=ME();let l=0;class u{constructor(f){this.blankNodeCounter=0,f=f||{},this.blankNodePrefix=f.blankNodePrefix||`df_${l++}_`}namedNode(f){return new a.NamedNode(f)}blankNode(f){return new e.BlankNode(f||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(f,y){return new i.Literal(f,y)}variable(f){return new d.Variable(f)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(f,y,b,_){return new o.Quad(f,y,b,_||this.defaultGraph())}fromTerm(f){switch(f.termType){case"NamedNode":return this.namedNode(f.value);case"BlankNode":return this.blankNode(f.value);case"Literal":return f.language?this.literal(f.value,f.language):f.datatype.equals(i.Literal.XSD_STRING)?this.literal(f.value):this.literal(f.value,this.fromTerm(f.datatype));case"Variable":return this.variable(f.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(f.subject),this.fromTerm(f.predicate),this.fromTerm(f.object),this.fromTerm(f.graph))}}fromQuad(f){return this.fromTerm(f)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return hp.DataFactory=u,hp}var b_;function xx(){return b_||(b_=1,function(e){var r=sf&&sf.__createBinding||(Object.create?function(a,o,d,l){l===void 0&&(l=d);var u=Object.getOwnPropertyDescriptor(o,d);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[d]}}),Object.defineProperty(a,l,u)}:function(a,o,d,l){l===void 0&&(l=d),a[l]=o[d]}),i=sf&&sf.__exportStar||function(a,o){for(var d in a)d!=="default"&&!Object.prototype.hasOwnProperty.call(o,d)&&r(o,a,d)};Object.defineProperty(e,"__esModule",{value:!0}),i(FE(),e),i(Rx(),e),i(DE(),e),i(UE(),e),i(Yv(),e),i(LE(),e),i(ME(),e)}(sf)),sf}var bp={},wp={},w_;function Tx(){if(w_)return wp;w_=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.ContainerHandlerIdentifier=void 0;let e=class{canCombineWithGraph(){return!0}async handle(i,a,o,d,l,u){let h;if(a.emittedStack[u+1]&&a.idStack[u+1])h=a.idStack[u+1][0];else{const b=await o.getContainerKey(d[u],d,u)!==null?await o.resourceToTerm(await a.getContext(d),d[u]):o.dataFactory.blankNode();if(!b){a.emittedStack[u]=!1;return}h=b,a.idStack[u+1]=[h]}let f=a.idStack[u];f||(f=a.idStack[u]=[]),f.some(y=>y.equals(h))||f.push(h),await a.handlePendingContainerFlushBuffers()||(a.emittedStack[u]=!1)}};return wp.ContainerHandlerIdentifier=e,wp}var _p={},Sp={},__;function sm(){if(__)return Sp;__=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.EntryHandlerPredicate=void 0;const e=Ra(),r=mf();let i=class kE{static async handlePredicateObject(o,d,l,u,h,f,y,b,_){const A=await d.getPropertiesDepth(l,u),T=await d.getDepthOffsetGraph(u,l),x=u-T,O=o.idStack[A];if(O&&!_)for(const R of O)if(T>=0){const P=o.idStack[x-1];if(P)for(const K of P)d.emitQuadChecked(u,R,h,f,K,y,b);else y?(d.validateReverseSubject(f),o.getUnidentifiedGraphBufferSafe(x-1).push({subject:f,predicate:h,object:R,isEmbedded:b})):o.getUnidentifiedGraphBufferSafe(x-1).push({subject:R,predicate:h,object:f,isEmbedded:b})}else{const P=await d.getGraphContainerValue(l,A);d.emitQuadChecked(u,R,h,f,P,y,b)}else if(y&&d.validateReverseSubject(f),_){if(o.rdfstar){o.idStack[u]&&o.emitError(new e.ErrorCoded(`Found an illegal @id inside an annotation: ${o.idStack[u][0].value}`,e.ERROR_CODES.INVALID_ANNOTATION));for(let P=0;P<u;P++)await d.unaliasKeyword(l[P],l,P)==="@id"&&o.emitError(new e.ErrorCoded("Found an illegal annotation inside an embedded node",e.ERROR_CODES.INVALID_ANNOTATION));const R=o.getAnnotationsBufferSafe(A),F={predicate:h,object:f,reverse:y,nestedAnnotations:[],depth:A};R.push(F);for(let P=R.length-2;P>=0;P--){const K=R[P];K.depth>A&&(F.nestedAnnotations.push(K),R.splice(P,1))}}}else o.getUnidentifiedValueBufferSafe(A).push({predicate:h,object:f,reverse:y,isEmbedded:b})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(o,d,l,u,h){const f=l[u];if(f){const y=await o.getContext(l);if(!o.jsonLiteralStack[u]&&await d.predicateToTerm(y,l[u]))return r.Util.getContextValueType(y,f)==="@json"&&(o.jsonLiteralStack[u+1]=!0),!0}return!1}async test(o,d,l,u,h){return u[h]}async handle(o,d,l,u,h,f,y){const b=u[f],_=await o.getContext(u),A=await d.predicateToTerm(_,l);if(A){const T=await d.valueToTerm(_,l,h,f,u);if(T.length)for(let x of T){let O=await d.unaliasKeywordParent(u,f);const R=r.Util.isPropertyReverse(_,b,O);let F=0;for(;O==="@reverse"||typeof O=="number";)typeof O=="number"?F++:f--,O=await d.unaliasKeywordParent(u,f-F);const P=r.Util.isPropertyInEmbeddedNode(O);d.validateReverseInEmbeddedNode(l,R,P);const K=r.Util.isPropertyInAnnotationObject(O);if(h){const B="@list"in r.Util.getContextValueContainer(_,l);if(B||h["@list"]){if((B&&!Array.isArray(h)&&!h["@list"]||h["@list"]&&!Array.isArray(h["@list"]))&&x!==d.rdfNil){const W=d.dataFactory.blankNode();o.emitQuad(f,d.dataFactory.quad(W,d.rdfRest,d.rdfNil,d.getDefaultGraph())),o.emitQuad(f,d.dataFactory.quad(W,d.rdfFirst,x,d.getDefaultGraph())),x=W}if(R&&!o.allowSubjectList)throw new e.ErrorCoded(`Found illegal list value in subject position at ${l}`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await kE.handlePredicateObject(o,d,u,f,A,x,R,P,K)}}}};return Sp.EntryHandlerPredicate=i,Sp}var S_;function Cx(){if(S_)return _p;S_=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.ContainerHandlerIndex=void 0;const e=Ra(),r=sm(),i=mf();let a=class{canCombineWithGraph(){return!0}async handle(d,l,u,h,f,y){if(!Array.isArray(f)){const b="@graph"in d,_=await l.getContext(h),A=h[y-1],T=i.Util.getContextValueIndex(_,A);if(T){if(e.Util.isPotentialKeyword(T))throw new e.ErrorCoded(`Keywords can not be used as @index value, got: ${T}`,e.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof T!="string")throw new e.ErrorCoded(`@index values must be strings, got: ${T}`,e.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof f!="object"){if(i.Util.getContextValueType(_,A)!=="@id")throw new e.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${f}`,e.ERROR_CODES.INVALID_VALUE_OBJECT);const R=u.resourceToTerm(_,f);R&&(l.idStack[y+1]=[R])}const O=u.createVocabOrBaseTerm(_,T);if(O){const R=await u.valueToTerm(_,T,await u.getContainerKey(h[y],h,y),y,h);if(b){const F=await u.getGraphContainerValue(h,y+1);for(const P of R)l.emitQuad(y,u.dataFactory.quad(F,O,P,u.getDefaultGraph()))}else for(const F of R)await r.EntryHandlerPredicate.handlePredicateObject(l,u,h,y+1,O,F,!1,!1,!1)}}const x=b?2:1;await l.newOnValueJob(h.slice(0,h.length-x),f,y-x,!0),await l.handlePendingContainerFlushBuffers()}l.emittedStack[y]=!1}};return _p.ContainerHandlerIndex=a,_p}var Ep={},E_;function Ox(){if(E_)return Ep;E_=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.ContainerHandlerLanguage=void 0;const e=Ra();let r=class{canCombineWithGraph(){return!1}async handle(a,o,d,l,u,h){const f=await d.getContainerKey(l[h],l,h);if(Array.isArray(u))u=u.map(y=>({"@value":y,"@language":f}));else{if(typeof u!="string")throw new e.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(u)}', but expected string`,e.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);u={"@value":u,"@language":f}}await o.newOnValueJob(l.slice(0,l.length-1),u,h-1,!0),o.emittedStack[h]=!1}};return Ep.ContainerHandlerLanguage=r,Ep}var Ap={},A_;function Ix(){if(A_)return Ap;A_=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.ContainerHandlerType=void 0;const e=sm(),r=mf();let i=class{canCombineWithGraph(){return!1}async handle(o,d,l,u,h,f){if(!Array.isArray(h)){if(typeof h=="string"){const _=await d.getContext(u),T=r.Util.getContextValueType(_,u[f-1])==="@vocab"?await l.createVocabOrBaseTerm(_,h):await l.resourceToTerm(_,h);if(T){const x={"@id":T.termType==="NamedNode"?T.value:h};await d.newOnValueJob(u.slice(0,u.length-1),x,f-1,!0),d.idStack[f+1]=[T]}}else{const _=!!d.idStack[f+1];_||delete d.idStack[f],await d.newOnValueJob(u.slice(0,u.length-1),h,f-1,!0),_||(d.idStack[f+1]=d.idStack[f])}const y=await l.getContainerKey(u[f],u,f),b=y!==null?l.createVocabOrBaseTerm(await d.getContext(u),y):null;b&&await e.EntryHandlerPredicate.handlePredicateObject(d,l,u,f+1,l.rdfType,b,!1,!1,!1),await d.handlePendingContainerFlushBuffers()}d.emittedStack[f]=!1}};return Ap.ContainerHandlerType=i,Ap}var R_;function BE(){if(R_)return bp;R_=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.EntryHandlerContainer=void 0;const e=Tx(),r=Cx(),i=Ox(),a=Ix(),o=mf();let d=class Iu{static isSimpleGraphContainer(u){return"@graph"in u&&("@set"in u&&Object.keys(u).length===2||Object.keys(u).length===1)}static isComplexGraphContainer(u){return"@graph"in u&&("@set"in u&&Object.keys(u).length>2||!("@set"in u)&&Object.keys(u).length>1)}static getContainerGraphIndex(u,h,f){let y=Iu.isSimpleGraphContainer(u),b="";for(let _=h;_<f.length;_++)(!y||typeof f[_]=="number")&&(b+=":"+f[_]),!y&&typeof f[_]!="number"&&(y=!0);return b}static async getContainerHandler(u,h,f){const y={containers:{"@set":!0},depth:f,fallback:!0};let b=!1;const _=await u.getContext(h,2);for(let A=f-1;A>=0;A--)if(typeof h[A]!="number"){const T=o.Util.getContextValue(_,"@container",h[A],!1);if(T&&Iu.isSimpleGraphContainer(T))return{containers:T,depth:A+1,fallback:!1};const x=o.Util.getContextValue(_,"@container",h[A-1],!1);if(x){const O="@graph"in x;for(const R in Iu.CONTAINER_HANDLERS)if(x[R])return O?Iu.CONTAINER_HANDLERS[R].canCombineWithGraph()?{containers:x,depth:A,fallback:!1}:y:b?y:{containers:x,depth:A,fallback:!1};return y}else{if(b)return y;b=!0}}return y}static async isBufferableContainerHandler(u,h,f){const y=await Iu.getContainerHandler(u,h,f);return!y.fallback&&!("@graph"in y.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(u,h,f,y,b){return!!await this.test(u,h,null,f,y)}async test(u,h,f,y,b){const _=o.Util.getContextValueContainer(await u.getContext(y,2),y[b-1]);for(const A in Iu.CONTAINER_HANDLERS)if(_[A])return{containers:_,handler:Iu.CONTAINER_HANDLERS[A]};return null}async handle(u,h,f,y,b,_,A){return A.handler.handle(A.containers,u,h,y,b,_)}};return d.CONTAINER_HANDLERS={"@id":new e.ContainerHandlerIdentifier,"@index":new r.ContainerHandlerIndex,"@language":new i.ContainerHandlerLanguage,"@type":new a.ContainerHandlerType},bp.EntryHandlerContainer=d,bp}var U0,x_;function Px(){return x_||(x_=1,U0=function e(r){return r===null||typeof r!="object"||r.toJSON!=null?JSON.stringify(r):Array.isArray(r)?"["+r.reduce((i,a,o)=>{const d=o===0?"":",",l=a===void 0||typeof a=="symbol"?null:a;return i+d+e(l)},"")+"]":"{"+Object.keys(r).sort().reduce((i,a,o)=>{if(r[a]===void 0||typeof r[a]=="symbol")return i;const d=i.length===0?"":",";return i+d+e(a)+":"+e(r[a])},"")+"}"}),U0}var T_;function mf(){if(T_)return fp;T_=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.Util=void 0;const e=Ra(),r=xx(),i=BE(),a=Px();class o{constructor(l){this.parsingContext=l.parsingContext,this.dataFactory=l.dataFactory||new r.DataFactory,this.rdfFirst=this.dataFactory.namedNode(o.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(o.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(o.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(o.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(o.RDF+"JSON")}static getContextValue(l,u,h,f){const y=l.getContextRaw()[h];if(!y)return f;const b=y[u];return b===void 0?f:b}static getContextValueContainer(l,u){return o.getContextValue(l,"@container",u,{"@set":!0})}static getContextValueType(l,u){const h=o.getContextValue(l,"@type",u,null);return h==="@none"?null:h}static getContextValueLanguage(l,u){return o.getContextValue(l,"@language",u,l.getContextRaw()["@language"]||null)}static getContextValueDirection(l,u){return o.getContextValue(l,"@direction",u,l.getContextRaw()["@direction"]||null)}static isContextValueReverse(l,u){return!!o.getContextValue(l,"@reverse",u,null)}static getContextValueIndex(l,u){return o.getContextValue(l,"@index",u,l.getContextRaw()["@index"]||null)}static isPropertyReverse(l,u,h){return h==="@reverse"!==o.isContextValueReverse(l,u)}static isPropertyInEmbeddedNode(l){return l==="@id"}static isPropertyInAnnotationObject(l){return l==="@annotation"}static isValidIri(l){return l!==null&&e.Util.isValidIri(l)}static isPrefixArray(l,u){if(l.length>u.length)return!1;for(let h=0;h<l.length;h++)if(l[h]!==u[h])return!1;return!0}async validateValueIndexes(l){if(this.parsingContext.validateValueIndexes){const u={};for(const h of l)if(h&&typeof h=="object"){const f=h["@id"],y=h["@index"];if(f&&y){const b=u[f];if(b&&b!==y)throw new e.ErrorCoded(`Conflicting @index value for ${f}`,e.ERROR_CODES.CONFLICTING_INDEXES);u[f]=y}}}}async valueToTerm(l,u,h,f,y){if(o.getContextValueType(l,u)==="@json")return[this.dataFactory.literal(this.valueToJsonString(h),this.rdfJson)];const b=typeof h;switch(b){case"object":if(h==null)return[];if(Array.isArray(h))return"@list"in o.getContextValueContainer(l,u)?h.length===0?[this.rdfNil]:this.parsingContext.idStack[f+1]||[]:(await this.validateValueIndexes(h),[]);if(l=await this.getContextSelfOrPropertyScoped(l,u),"@context"in h&&(l=await this.parsingContext.parseContext(h["@context"],(await this.parsingContext.getContext(y,0)).getContextRaw())),h=await this.unaliasKeywords(h,y,f,l),"@value"in h){let _,A,T,x,O;for(u in h){const R=h[u];switch(u){case"@value":_=R;break;case"@language":A=R;break;case"@direction":T=R;break;case"@type":x=R;break;case"@index":O=R;break;case"@annotation":break;default:throw new e.ErrorCoded(`Unknown value entry '${u}' in @value: ${JSON.stringify(h)}`,e.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(x,y,f,!0,l)==="@json")return[this.dataFactory.literal(this.valueToJsonString(_),this.rdfJson)];if(_===null)return[];if(typeof _=="object")throw new e.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(_)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&O&&typeof O!="string")throw new e.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(O)}'`,e.ERROR_CODES.INVALID_INDEX_VALUE);if(A){if(typeof _!="string")throw new e.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(_)}'`,e.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!e.ContextParser.validateLanguage(A,this.parsingContext.strictValues,e.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(A=A.toLowerCase())}if(T){if(typeof _!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(_)}'`);if(!e.ContextParser.validateDirection(T,this.parsingContext.strictValues))return[]}if(A&&T&&this.parsingContext.rdfDirection){if(x)throw new e.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(h)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(f,_,A,T))}else if(A){if(x)throw new e.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(h)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(_,A)]}else if(T&&this.parsingContext.rdfDirection){if(x)throw new e.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(h)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(f,_,A,T))}else if(x){if(typeof x!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(x)}'`,e.ERROR_CODES.INVALID_TYPED_VALUE);const R=this.createVocabOrBaseTerm(l,x);if(!R)throw new e.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(x)}'`,e.ERROR_CODES.INVALID_TYPED_VALUE);if(R.termType!=="NamedNode")throw new e.ErrorCoded(`Illegal value type (${R.termType}): ${x}`,e.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(_,R)]}return await this.valueToTerm(new e.JsonLdContextNormalized({}),u,_,f,y)}else if("@set"in h){if(Object.keys(h).length>1)throw new e.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${u}'`,e.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in h){if(Object.keys(h).length>1)throw new e.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${u}'`,e.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const _=h["@list"];return Array.isArray(_)?_.length===0?[this.rdfNil]:this.parsingContext.idStack[f+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(y),u,_,f-1,y.slice(0,-1))}else{if("@reverse"in h&&typeof h["@reverse"]=="boolean")return[];if("@graph"in o.getContextValueContainer(await this.parsingContext.getContext(y),u)){const _=this.parsingContext.graphContainerTermStack[f+1];return _?Object.values(_):[this.dataFactory.blankNode()]}else if("@id"in h){if(Object.keys(h).length>1&&(l=await this.parsingContext.getContext(y,0)),"@context"in h&&(l=await this.parsingContext.parseContext(h["@context"],l.getContextRaw())),h["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(l,h["@id"]));{const _=h["@id"];let A;if(typeof _=="object")if(this.parsingContext.rdfstar)A=this.parsingContext.idStack[f+1][0];else throw new e.ErrorCoded(`Found illegal @id '${h}'`,e.ERROR_CODES.INVALID_ID_VALUE);else A=this.resourceToTerm(l,_);return this.nullableTermToArray(A)}}else return this.parsingContext.emittedStack[f+1]||h&&typeof h=="object"&&Object.keys(h).length===0?this.parsingContext.idStack[f+1]||(this.parsingContext.idStack[f+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(f,await this.getContextSelfOrPropertyScoped(l,u),u,h,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(f,await this.getContextSelfOrPropertyScoped(l,u),u,(!!h).toString(),this.dataFactory.namedNode(o.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(f,await this.getContextSelfOrPropertyScoped(l,u),u,h,this.dataFactory.namedNode(h%1===0&&h<1e21?o.XSD_INTEGER:o.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${b}`)),[]}}async getContextSelfOrPropertyScoped(l,u){const h=l.getContextRaw()[u];return h&&typeof h=="object"&&"@context"in h&&(l=await this.parsingContext.parseContext(h,l.getContextRaw(),!0)),l}nullableTermToArray(l){return l?[l]:[]}predicateToTerm(l,u){const h=l.expandTerm(u,!0,this.parsingContext.getExpandOptions());if(!h)return null;if(h[0]==="_"&&h[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(h.substr(2)):null;if(o.isValidIri(h))return this.dataFactory.namedNode(h);if(h&&this.parsingContext.strictValues)this.parsingContext.emitError(new e.ErrorCoded(`Invalid predicate IRI: ${h}`,e.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(l,u){if(u.startsWith("_:"))return this.dataFactory.blankNode(u.substr(2));const h=l.expandTerm(u,!1,this.parsingContext.getExpandOptions());if(!o.isValidIri(h))if(h&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${h}`));else return null;return this.dataFactory.namedNode(h)}createVocabOrBaseTerm(l,u){if(u.startsWith("_:"))return this.dataFactory.blankNode(u.substr(2));const h=this.parsingContext.getExpandOptions();let f=l.expandTerm(u,!0,h);if(f===u&&(f=l.expandTerm(u,!1,h)),!o.isValidIri(f))if(f&&this.parsingContext.strictValues&&!f.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${f}`));else return null;return this.dataFactory.namedNode(f)}intToString(l,u){return typeof l=="number"?Number.isFinite(l)?l%1===0&&(!u||u.value!==o.XSD_DOUBLE)?Number(l).toString():l.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):l>0?"INF":"-INF":l}stringValueToTerm(l,u,h,f,y){const b=o.getContextValueType(u,h);if(b)if(b==="@id"){if(!y)return this.resourceToTerm(u,this.intToString(f,y))}else if(b==="@vocab"){if(!y)return this.createVocabOrBaseTerm(u,this.intToString(f,y))}else y=this.dataFactory.namedNode(b);if(!y){const _=o.getContextValueLanguage(u,h),A=o.getContextValueDirection(u,h);return A&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(l,this.intToString(f,y),_,A):this.dataFactory.literal(this.intToString(f,y),_)}return this.dataFactory.literal(this.intToString(f,y),y)}createLanguageDirectionLiteral(l,u,h,f){if(this.parsingContext.rdfDirection==="i18n-datatype")return h||(h=""),this.dataFactory.literal(u,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${h}_${f}`));{const y=this.dataFactory.blankNode(),b=this.getDefaultGraph();return this.parsingContext.emitQuad(l,this.dataFactory.quad(y,this.dataFactory.namedNode(o.RDF+"value"),this.dataFactory.literal(u),b)),h&&this.parsingContext.emitQuad(l,this.dataFactory.quad(y,this.dataFactory.namedNode(o.RDF+"language"),this.dataFactory.literal(h),b)),this.parsingContext.emitQuad(l,this.dataFactory.quad(y,this.dataFactory.namedNode(o.RDF+"direction"),this.dataFactory.literal(f),b)),y}}valueToJsonString(l){return a(l)}async unaliasKeyword(l,u,h,f,y){if(Number.isInteger(l))return l;if(!f){const b=this.parsingContext.unaliasedKeywordCacheStack[h];if(b)return b}if(!e.Util.isPotentialKeyword(l)){y=y||await this.parsingContext.getContext(u);let b=y.getContextRaw()[l];b&&typeof b=="object"&&(b=b["@id"]),e.Util.isValidKeyword(b)&&(l=b)}return f?l:this.parsingContext.unaliasedKeywordCacheStack[h]=l}async unaliasKeywordParent(l,u){return await this.unaliasKeyword(u>0&&l[u-1],l,u-1)}async unaliasKeywords(l,u,h,f){const y={};for(const b in l)y[await this.unaliasKeyword(b,u,h+1,!0,f)]=l[b];return y}async isLiteral(l,u){for(let h=u;h>=0;h--){if(await this.unaliasKeyword(l[h],l,h)==="@annotation")return!1;if(this.parsingContext.literalStack[h]||this.parsingContext.jsonLiteralStack[h])return!0}return!1}async getDepthOffsetGraph(l,u){for(let h=l-1;h>0;h--)if(await this.unaliasKeyword(u[h],u,h)==="@graph"){const f=(await i.EntryHandlerContainer.getContainerHandler(this.parsingContext,u,h)).containers;return i.EntryHandlerContainer.isComplexGraphContainer(f)?-1:l-h-1}return-1}validateReverseSubject(l){if(l.termType==="Literal")throw new e.ErrorCoded(`Found illegal literal in subject position: ${l.value}`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(l,u){let h=this.getDefaultGraph();const{containers:f,depth:y}=await i.EntryHandlerContainer.getContainerHandler(this.parsingContext,l,u);if("@graph"in f){const b=i.EntryHandlerContainer.getContainerGraphIndex(f,y,l),_=this.parsingContext.graphContainerTermStack[y];if(h=_?_[b]:null,!h){let A=null;if("@id"in f){const T=await this.getContainerKey(l[y],l,y);T!==null&&(A=await this.resourceToTerm(await this.parsingContext.getContext(l),T))}A||(A=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[y]||(this.parsingContext.graphContainerTermStack[y]={}),h=this.parsingContext.graphContainerTermStack[y][b]=A}}return h}async getPropertiesDepth(l,u){let h=u;for(let f=u-1;f>0;f--)if(typeof l[f]!="number"){const y=await this.unaliasKeyword(l[f],l,f);if(y==="@reverse")return f;if(y==="@nest")h=f;else return h}return h}async getContainerKey(l,u,h){const f=await this.unaliasKeyword(l,u,h);return f==="@none"?null:f}validateReverseInEmbeddedNode(l,u,h){if(h&&u&&!this.parsingContext.rdfstarReverseInEmbedded)throw new e.ErrorCoded(`Illegal reverse property in embedded node in ${l}`,e.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(l,u,h,f,y,b,_){let A;if(b?(this.validateReverseSubject(f),A=this.dataFactory.quad(f,h,u,y)):A=this.dataFactory.quad(u,h,f,y),_){if(A.graph.termType!=="DefaultGraph"&&(A=this.dataFactory.quad(A.subject,A.predicate,A.object)),this.parsingContext.idStack[l-1])throw new e.ErrorCoded("Illegal multiple properties in an embedded node",e.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[l-1]=[A]}else this.parsingContext.emitQuad(l,A);const T=this.parsingContext.annotationsBuffer[l];if(T){for(const x of T)this.emitAnnotation(l,A,x);delete this.parsingContext.annotationsBuffer[l]}}emitAnnotation(l,u,h){let f;h.reverse?(this.validateReverseSubject(h.object),f=this.dataFactory.quad(h.object,h.predicate,u)):f=this.dataFactory.quad(u,h.predicate,h.object),this.parsingContext.emitQuad(l,f);for(const y of h.nestedAnnotations)this.emitAnnotation(l,f,y)}}return o.XSD="http://www.w3.org/2001/XMLSchema#",o.XSD_BOOLEAN=o.XSD+"boolean",o.XSD_INTEGER=o.XSD+"integer",o.XSD_DOUBLE=o.XSD+"double",o.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",fp.Util=o,fp}var C_;function Nx(){if(C_)return cp;C_=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.EntryHandlerArrayValue=void 0;const e=mf(),r=Ra();let i=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(o,d,l,u,h){return this.test(o,d,null,l,u)}async test(o,d,l,u,h){return typeof u[h]=="number"}async handle(o,d,l,u,h,f){let y=await d.unaliasKeywordParent(u,f);if(y==="@list"){let b=null,_=0;for(let A=f-2;A>0;A--){const T=u[A];if(typeof T=="string"||typeof T=="number"){_=A,b=T;break}}if(b!==null){const A=await d.valueToTerm(await o.getContext(u),b,h,f,u);for(const T of A)await this.handleListElement(o,d,T,h,f,u.slice(0,_),_);A.length===0&&await this.handleListElement(o,d,null,h,f,u.slice(0,_),_)}}else if(y==="@set")await o.newOnValueJob(u.slice(0,-2),h,f-2,!1);else if(y!==void 0&&y!=="@type"){for(let _=f-1;_>0;_--)if(typeof u[_]!="number"){y=await d.unaliasKeyword(u[_],u,_);break}const b=await o.getContext(u.slice(0,-1));if("@list"in e.Util.getContextValueContainer(b,y)){o.emittedStack[f+1]=!0;const _=await d.valueToTerm(await o.getContext(u),y,h,f,u);for(const A of _)await this.handleListElement(o,d,A,h,f,u.slice(0,-1),f-1);_.length===0&&await this.handleListElement(o,d,null,h,f,u.slice(0,-1),f-1)}else o.shiftStack(f,1),await o.newOnValueJob(u.slice(0,-1),h,f-1,!1),o.contextTree.removeContext(u.slice(0,-1))}}async handleListElement(o,d,l,u,h,f,y){let b=o.listPointerStack[h];if(u!==null&&(await d.unaliasKeywords(u,f,h))["@value"]!==null){if(!b||!b.value){const _=d.dataFactory.blankNode();b={value:_,listRootDepth:y,listId:_}}else{const _=d.dataFactory.blankNode();o.emitQuad(h,d.dataFactory.quad(b.value,d.rdfRest,_,d.getDefaultGraph())),b.value=_}l&&o.emitQuad(h,d.dataFactory.quad(b.value,d.rdfFirst,l,d.getDefaultGraph()))}else b||(b={listRootDepth:y,listId:d.rdfNil});o.listPointerStack[h]=b,o.rdfstar&&o.annotationsBuffer[h]&&o.emitError(new r.ErrorCoded("Found an illegal annotation inside a list",r.ERROR_CODES.INVALID_ANNOTATION))}};return cp.EntryHandlerArrayValue=i,cp}var Rp={},O_;function Fx(){if(O_)return Rp;O_=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.EntryHandlerInvalidFallback=void 0;let e=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(i,a,o,d,l){return!1}async test(i,a,o,d,l){return!0}async handle(i,a,o,d,l,u){i.emittedStack[u]=!1}};return Rp.EntryHandlerInvalidFallback=e,Rp}var xp={},Tp={},I_;function ju(){if(I_)return Tp;I_=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.EntryHandlerKeyword=void 0;let e=class{constructor(i){this.keyword=i}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(i,a,o,d,l){return!1}async test(i,a,o,d,l){return o===this.keyword}};return Tp.EntryHandlerKeyword=e,Tp}var P_;function Dx(){if(P_)return xp;P_=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.EntryHandlerKeywordContext=void 0;const e=Ra(),r=ju();let i=class extends r.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(o,d,l,u,h,f){o.streamingProfile&&(o.processingStack[f]||o.processingType[f]||o.idStack[f]!==void 0)&&o.emitError(new e.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",e.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const y=o.getContext(u),b=o.parseContext(h,(await y).getContextRaw());o.contextTree.setContext(u.slice(0,-1),b),o.emitContext(h),await o.validateContext(await b)}};return xp.EntryHandlerKeywordContext=i,xp}var Cp={},N_;function Ux(){if(N_)return Cp;N_=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.EntryHandlerKeywordGraph=void 0;const e=ju();let r=class extends e.EntryHandlerKeyword{constructor(){super("@graph")}async handle(a,o,d,l,u,h){a.graphStack[h+1]=!0}};return Cp.EntryHandlerKeywordGraph=r,Cp}var Op={},F_;function Lx(){if(F_)return Op;F_=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.EntryHandlerKeywordId=void 0;const e=Ra(),r=ju();let i=class extends r.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(o,d,l,u,h,f){if(typeof h!="string"){if(o.rdfstar&&typeof h=="object"){const b=Object.keys(h);b.length===1&&b[0]==="@id"&&o.emitError(new e.ErrorCoded(`Invalid embedded node without property with @id ${h["@id"]}`,e.ERROR_CODES.INVALID_EMBEDDED_NODE))}else o.emitError(new e.ErrorCoded(`Found illegal @id '${h}'`,e.ERROR_CODES.INVALID_ID_VALUE));return}const y=await d.getPropertiesDepth(u,f);if(o.idStack[y]!==void 0&&(o.idStack[y][0].listHead?o.emitError(new e.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${u[f-1]}'`,e.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):o.emitError(new e.ErrorCoded(`Found duplicate @ids '${o.idStack[y][0].value}' and '${h}'`,e.ERROR_CODES.COLLIDING_KEYWORDS))),o.rdfstar&&o.annotationsBuffer[f])for(const b of o.annotationsBuffer[f])b.depth===f&&o.emitError(new e.ErrorCoded(`Found an illegal @id inside an annotation: ${h}`,e.ERROR_CODES.INVALID_ANNOTATION));o.idStack[y]=d.nullableTermToArray(await d.resourceToTerm(await o.getContext(u),h))}};return Op.EntryHandlerKeywordId=i,Op}var Ip={},D_;function Mx(){if(D_)return Ip;D_=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.EntryHandlerKeywordIncluded=void 0;const e=Ra(),r=ju();let i=class extends r.EntryHandlerKeyword{constructor(){super("@included")}async handle(o,d,l,u,h,f){typeof h!="object"&&o.emitError(new e.ErrorCoded(`Found illegal @included '${h}'`,e.ERROR_CODES.INVALID_INCLUDED_VALUE));const y=await d.unaliasKeywords(h,u,f,await o.getContext(u));"@value"in y&&o.emitError(new e.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(h)}'`,e.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in y&&o.emitError(new e.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(h)}'`,e.ERROR_CODES.INVALID_INCLUDED_VALUE)),o.emittedStack[f]=!1}};return Ip.EntryHandlerKeywordIncluded=i,Ip}var Pp={},U_;function kx(){if(U_)return Pp;U_=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.EntryHandlerKeywordNest=void 0;const e=Ra(),r=ju();let i=class extends r.EntryHandlerKeyword{constructor(){super("@nest")}async handle(o,d,l,u,h,f){typeof h!="object"&&o.emitError(new e.ErrorCoded(`Found invalid @nest entry for '${l}': '${h}'`,e.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await d.unaliasKeywords(h,u,f,await o.getContext(u))&&o.emitError(new e.ErrorCoded(`Found an invalid @value node for '${l}'`,e.ERROR_CODES.INVALID_NEST_VALUE)),o.emittedStack[f]=!1}};return Pp.EntryHandlerKeywordNest=i,Pp}var Np={},L_;function Bx(){if(L_)return Np;L_=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.EntryHandlerKeywordType=void 0;const e=Ra(),r=mf(),i=sm(),a=ju();let o=class extends a.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(l,u,h,f,y,b){const _=f[b],A=await l.getContext(f),T=u.rdfType,x=await u.unaliasKeywordParent(f,b),O=r.Util.isPropertyReverse(A,_,x),R=r.Util.isPropertyInEmbeddedNode(x);u.validateReverseInEmbeddedNode(h,O,R);const F=r.Util.isPropertyInAnnotationObject(x),P=Array.isArray(y)?y:[y];for(const W of P){typeof W!="string"&&l.emitError(new e.ErrorCoded(`Found illegal @type '${W}'`,e.ERROR_CODES.INVALID_TYPE_VALUE));const Y=u.createVocabOrBaseTerm(A,W);Y&&await i.EntryHandlerPredicate.handlePredicateObject(l,u,f,b,T,Y,O,R,F)}let K=Promise.resolve(A),B=!1;for(const W of P.sort()){const Y=r.Util.getContextValue(A,"@context",W,null);Y&&(B=!0,K=K.then(q=>l.parseContext(Y,q.getContextRaw())))}l.streamingProfile&&(B||!l.streamingProfileAllowOutOfOrderPlainType)&&(l.processingStack[b]||l.idStack[b])&&l.emitError(new e.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",e.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),B&&(K=K.then(W=>W.getContextRaw()["@propagate"]!==!0?new e.JsonLdContextNormalized(Object.assign(Object.assign({},W.getContextRaw()),{"@propagate":!1,"@__propagateFallback":A.getContextRaw()})):W),l.contextTree.setContext(f.slice(0,f.length-1),K)),l.processingType[b]=!0}};return Np.EntryHandlerKeywordType=o,Np}var Fp={},M_;function Hx(){if(M_)return Fp;M_=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.EntryHandlerKeywordUnknownFallback=void 0;const e=Ra();let r=class HE{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(a,o,d,l,u){const h=await o.unaliasKeyword(d[l],d,l);return e.Util.isPotentialKeyword(h)?!(!u&&h==="@list"):!1}async test(a,o,d,l,u){return e.Util.isPotentialKeyword(d)}async handle(a,o,d,l,u,h){const f=HE.VALID_KEYWORDS_TYPES[d];f!==void 0?f&&typeof u!==f.type&&a.emitError(new e.ErrorCoded(`Invalid value type for '${d}' with value '${u}'`,f.errorCode)):a.strictValues&&a.emitError(new Error(`Unknown keyword '${d}' with value '${u}'`)),a.emittedStack[h]=!1}};return r.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:e.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:e.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null},Fp.EntryHandlerKeywordUnknownFallback=r,Fp}var Dp={},k_;function jx(){if(k_)return Dp;k_=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.EntryHandlerKeywordValue=void 0;const e=ju();let r=class extends e.EntryHandlerKeyword{constructor(){super("@value")}async validate(a,o,d,l,u){const h=d[l];return h&&!a.literalStack[l]&&await this.test(a,o,h,d,l)&&(a.literalStack[l]=!0),super.validate(a,o,d,l,u)}async test(a,o,d,l,u){return await o.unaliasKeyword(l[u],l.slice(0,l.length-1),u-1,!0)==="@value"}async handle(a,o,d,l,u,h){a.literalStack[h]=!0,delete a.unidentifiedValuesBuffer[h],delete a.unidentifiedGraphsBuffer[h],a.emittedStack[h]=!1}};return Dp.EntryHandlerKeywordValue=r,Dp}var Up={},Lp={},B_;function Vx(){if(B_)return Lp;B_=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.ContextTree=void 0;let e=class jE{constructor(){this.subTrees={}}getContext(i){if(i.length>0){const[a,...o]=i,d=this.subTrees[a];if(d){const l=d.getContext(o);if(l)return l.then(({context:u,depth:h})=>({context:u,depth:h+1}))}}return this.context?this.context.then(a=>({context:a,depth:0})):null}setContext(i,a){if(i.length===0)this.context=a;else{const[o,...d]=i;let l=this.subTrees[o];l||(l=this.subTrees[o]=new jE),l.setContext(d,a)}}removeContext(i){this.setContext(i,null)}};return Lp.ContextTree=e,Lp}var H_;function $x(){if(H_)return Up;H_=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.ParsingContext=void 0;const e=Ra(),r=vg(),i=Vx(),a=$E();let o=class VE{constructor(l){this.contextParser=new e.ContextParser({documentLoader:l.documentLoader,skipValidation:l.skipContextValidation}),this.streamingProfile=!!l.streamingProfile,this.baseIRI=l.baseIRI,this.produceGeneralizedRdf=!!l.produceGeneralizedRdf,this.allowSubjectList=!!l.allowSubjectList,this.processingMode=l.processingMode||a.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!l.strictValues,this.validateValueIndexes=!!l.validateValueIndexes,this.defaultGraph=l.defaultGraph,this.rdfDirection=l.rdfDirection,this.normalizeLanguageTags=l.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=l.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=l.rdfstar!==!1,this.rdfstarReverseInEmbedded=l.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new i.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=l.parser,l.context?(this.rootContext=this.parseContext(l.context),this.rootContext.then(u=>this.validateContext(u))):this.rootContext=Promise.resolve(new e.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(l,u,h){return this.contextParser.parse(l,{baseIRI:this.baseIRI,ignoreProtection:h,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:u,processingMode:this.activeProcessingMode})}validateContext(l){const u=l.getContextRaw()["@version"];if(u){if(this.activeProcessingMode&&u>this.activeProcessingMode)throw new r.ErrorCoded(`Unsupported JSON-LD version '${u}' under active processing mode ${this.activeProcessingMode}.`,r.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&u<this.activeProcessingMode)throw new r.ErrorCoded(`Invalid JSON-LD version ${u} under active processing mode ${this.activeProcessingMode}.`,r.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=u}}async getContext(l,u=1){const h=l;for(;typeof l[l.length-1]=="number";)l=l.slice(0,l.length-1);u&&(l=l.slice(0,-u));const f=await this.getContextPropagationAware(l);let b=f.context.getContextRaw();for(let _=f.depth;_<h.length-u;_++){const A=h[_],T=b[A];if(T&&typeof T=="object"&&"@context"in T){const x=(await this.parseContext(T,b,!0)).getContextRaw(),O=!(A in x)||x[A]["@context"]["@propagate"];(O!==!1||_===h.length-1-u)&&(b=Object.assign({},x),delete b["@propagate"],b[A]=Object.assign({},b[A]),"@id"in T&&(b[A]["@id"]=T["@id"]),delete b[A]["@context"],O!==!1&&this.contextTree.setContext(h.slice(0,_+u),Promise.resolve(new e.JsonLdContextNormalized(b))))}}return new e.JsonLdContextNormalized(b)}async getContextPropagationAware(l){const u=l.length;let h=null,f;do{f=!1,h&&"@__propagateFallback"in h.context.getContextRaw()?h.context=new e.JsonLdContextNormalized(h.context.getContextRaw()["@__propagateFallback"]):(h&&(l=l.slice(0,h.depth-1)),h=await this.contextTree.getContext(l)||{context:await this.rootContext,depth:0});const y=l[l.length-1];if(y in h.context.getContextRaw()){const b=h.context.getContextRaw()[y];b&&typeof b=="object"&&"@context"in b&&(f=!0)}}while(h.depth>0&&h.context.getContextRaw()["@propagate"]===!1&&h.depth!==u&&!f);return h.depth===0&&h.context.getContextRaw()["@propagate"]===!1&&h.depth!==u&&(h.context=new e.JsonLdContextNormalized({})),h}async newOnValueJob(l,u,h,f){await this.parser.newOnValueJob(l,u,h,f)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const l of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(l.depth,l.keys),this.parser.flushStacks(l.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(l,u){l===1&&(this.topLevelProperties=!0),this.parser.push(u)}emitError(l){this.parser.emit("error",l)}emitContext(l){this.parser.emit("context",l)}getUnidentifiedValueBufferSafe(l){let u=this.unidentifiedValuesBuffer[l];return u||(u=[],this.unidentifiedValuesBuffer[l]=u),u}getUnidentifiedGraphBufferSafe(l){let u=this.unidentifiedGraphsBuffer[l];return u||(u=[],this.unidentifiedGraphsBuffer[l]=u),u}getAnnotationsBufferSafe(l){let u=this.annotationsBuffer[l];return u||(u=[],this.annotationsBuffer[l]=u),u}getExpandOptions(){return VE.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(l,u){const h=this.idStack[l+u];if(h&&(this.idStack[l]=h,this.emittedStack[l]=!0,delete this.idStack[l+u]),this.pendingContainerFlushBuffers.length)for(const f of this.pendingContainerFlushBuffers)f.depth>=l+u&&(f.depth-=u,f.keys.splice(l,u));this.unidentifiedValuesBuffer[l+u]&&(this.unidentifiedValuesBuffer[l]=this.unidentifiedValuesBuffer[l+u],delete this.unidentifiedValuesBuffer[l+u]),this.annotationsBuffer[l+u-1]&&(this.annotationsBuffer[l-1]||(this.annotationsBuffer[l-1]=[]),this.annotationsBuffer[l-1]=[...this.annotationsBuffer[l-1],...this.annotationsBuffer[l+u-1]],delete this.annotationsBuffer[l+u-1])}};return o.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},Up.ParsingContext=o,Up}var Mp={},j_;function Kx(){if(j_)return Mp;j_=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.EntryHandlerKeywordAnnotation=void 0;const e=ju(),r=Ra();let i=class extends e.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(o,d,l,u,h,f){(typeof h=="string"||typeof h=="object"&&h["@value"])&&o.emitError(new r.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(h)}`,r.ERROR_CODES.INVALID_ANNOTATION))}};return Mp.EntryHandlerKeywordAnnotation=i,Mp}var V_;function $E(){if(V_)return ip;V_=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.JsonLdParser=void 0;const e=gx(),r=Ra(),i=NE(),a=Nx(),o=BE(),d=Fx(),l=sm(),u=Dx(),h=Ux(),f=Lx(),y=Mx(),b=kx(),_=Bx(),A=Hx(),T=jx(),x=$x(),O=mf(),R=Gv(),F=Kx();let P=class Cd extends i.Transform{constructor(B){super({readableObjectMode:!0}),B=B||{},this.options=B,this.parsingContext=new x.ParsingContext(Object.assign({parser:this},B)),this.util=new O.Util({dataFactory:B.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new e,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(B,W,Y,q){let Pe,$=["application/activity+json"];if(q&&q.wellKnownMediaTypes&&($=q.wellKnownMediaTypes),W!=="application/ld+json"&&!$.includes(W)){if(W!=="application/json"&&!W.endsWith("+json"))throw new r.ErrorCoded(`Unsupported JSON-LD media type ${W}`,r.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(Y&&Y.has("Link")&&Y.forEach((ge,Se)=>{if(Se==="link"){const tt=(0,R.parse)(ge);for(const lt of tt.get("rel","http://www.w3.org/ns/json-ld#context")){if(Pe)throw new r.ErrorCoded("Multiple JSON-LD context link headers were found on "+B,r.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);Pe=lt.uri}}}),!Pe&&!q?.ignoreMissingContextLinkHeader)throw new r.ErrorCoded(`Missing context link header for media type ${W} on ${B}`,r.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let ie;if(Y&&Y.has("Content-Type")){const ge=Y.get("Content-Type"),Se=/; *profile=([^"]*)/.exec(ge);Se&&Se[1]==="http://www.w3.org/ns/json-ld#streaming"&&(ie=!0)}return new Cd(Object.assign({baseIRI:B,context:Pe,streamingProfile:ie},q||{}))}import(B){if("pipe"in B){B.on("error",Y=>W.emit("error",Y));const W=B.pipe(new Cd(this.options));return W}else{const W=new i.PassThrough({readableObjectMode:!0});B.on("error",q=>Y.emit("error",q)),B.on("data",q=>W.push(q)),B.on("end",()=>W.push(null));const Y=W.pipe(new Cd(this.options));return Y}}_transform(B,W,Y){this.jsonParser.write(B),this.lastOnValueJob.then(()=>Y(),q=>Y(q))}async newOnValueJob(B,W,Y,q){let Pe=!0;if(q&&Y<this.lastDepth){const tt=this.parsingContext.listPointerStack[this.lastDepth];tt&&(tt.value&&this.push(this.util.dataFactory.quad(tt.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),tt.listId.listHead=!0,this.parsingContext.idStack[tt.listRootDepth+1]=[tt.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await o.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),Pe=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const $=await this.util.unaliasKeyword(B[Y],B,Y),ie=await this.util.unaliasKeywordParent(B,Y);this.parsingContext.emittedStack[Y]=!0;let ge=!0;r.Util.isValidKeyword($)&&ie==="@reverse"&&$!=="@context"&&this.emit("error",new r.ErrorCoded(`Found the @id '${W}' inside an @reverse property`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let Se=!1;this.parsingContext.validationStack.length>1&&(Se=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let tt=Math.max(1,this.parsingContext.validationStack.length-1);tt<B.length-1;tt++){const lt=this.parsingContext.validationStack[tt]||(this.parsingContext.validationStack[tt]=await this.validateKey(B.slice(0,tt+1),tt,Se));if(lt.valid)!Se&&lt.property&&(Se=!0);else{this.parsingContext.emittedStack[Y]=!1,ge=!1;break}}if(await this.util.isLiteral(B,Y)&&(ge=!1),ge)for(const tt of Cd.ENTRY_HANDLERS){const lt=await tt.test(this.parsingContext,this.util,$,B,Y);if(lt){await tt.handle(this.parsingContext,this.util,$,B,W,Y,lt),tt.isStackProcessor()&&(this.parsingContext.processingStack[Y]=!0);break}}Y===0&&Array.isArray(W)&&await this.util.validateValueIndexes(W),Pe&&Y<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=Y,this.lastKeys=B,this.parsingContext.unaliasedKeywordCacheStack.splice(Y-1)}flushStacks(B){this.parsingContext.processingStack.splice(B,1),this.parsingContext.processingType.splice(B,1),this.parsingContext.emittedStack.splice(B,1),this.parsingContext.idStack.splice(B,1),this.parsingContext.graphStack.splice(B+1,1),this.parsingContext.graphContainerTermStack.splice(B,1),this.parsingContext.jsonLiteralStack.splice(B,1),this.parsingContext.validationStack.splice(B-1,2),this.parsingContext.literalStack.splice(B,this.parsingContext.literalStack.length-B),this.parsingContext.annotationsBuffer.splice(B,1)}async flushBuffer(B,W){let Y=this.parsingContext.idStack[B];!!Y||(Y=this.parsingContext.idStack[B]=[this.util.dataFactory.blankNode()]);const Pe=this.parsingContext.unidentifiedValuesBuffer[B];if(Pe){for(const ge of Y){const Se=await this.util.getDepthOffsetGraph(B,W),tt=this.parsingContext.graphStack[B]||Se>=0?this.parsingContext.idStack[B-Se-1]:[await this.util.getGraphContainerValue(W,B)];if(tt)for(const lt of tt){this.parsingContext.emittedStack[B]=!0;for(const Ne of Pe)this.util.emitQuadChecked(B,ge,Ne.predicate,Ne.object,lt,Ne.reverse,Ne.isEmbedded)}else{const lt=this.parsingContext.getUnidentifiedGraphBufferSafe(B-await this.util.getDepthOffsetGraph(B,W)-1);for(const Ne of Pe)Ne.reverse?lt.push({object:ge,predicate:Ne.predicate,subject:Ne.object,isEmbedded:Ne.isEmbedded}):lt.push({object:Ne.object,predicate:Ne.predicate,subject:ge,isEmbedded:Ne.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(B,1),this.parsingContext.literalStack.splice(B,1),this.parsingContext.jsonLiteralStack.splice(B,1)}const $=this.parsingContext.unidentifiedGraphsBuffer[B];if($){for(const ge of Y){const Se=B===1&&ge.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():ge;this.parsingContext.emittedStack[B]=!0;for(const tt of $)this.parsingContext.emitQuad(B,this.util.dataFactory.quad(tt.subject,tt.predicate,tt.object,Se))}this.parsingContext.unidentifiedGraphsBuffer.splice(B,1)}const ie=this.parsingContext.annotationsBuffer[B];if(ie){ie.length>0&&B===1&&this.parsingContext.emitError(new r.ErrorCoded("Annotations can not be made on top-level nodes",r.ERROR_CODES.INVALID_ANNOTATION));const ge=this.parsingContext.getAnnotationsBufferSafe(B-1);for(const Se of ie)ge.push(Se);delete this.parsingContext.annotationsBuffer[B]}}async validateKey(B,W,Y){for(const q of Cd.ENTRY_HANDLERS)if(await q.validate(this.parsingContext,this.util,B,W,Y))return{valid:!0,property:Y||q.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=B=>{const W=this.jsonParser.stack.length,Y=new Array(W+1).fill(0).map((q,Pe)=>Pe===W?this.jsonParser.key:this.jsonParser.stack[Pe].key);if(!this.isParsingContextInner(W)){const q=()=>this.newOnValueJob(Y,B,W,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(Y.slice(0,-1)))if(Y[W]==="@context"){let Pe=this.contextJobs[W];Pe||(Pe=this.contextJobs[W]=[]),Pe.push(q)}else this.contextAwaitingJobs.push({job:q,keys:Y,depth:W});else this.lastOnValueJob=this.lastOnValueJob.then(q);!this.parsingContext.streamingProfile&&W===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=B=>{this.emit("error",B)}}isParsingContextInner(B){for(let W=B;W>0;W--)if(this.jsonParser.stack[W-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const W of this.contextJobs)if(W)for(const Y of W)await Y();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const B=[];for(const W of this.contextAwaitingJobs)await this.util.unaliasKeyword(W.keys[W.depth],W.keys,W.depth,!0)==="@type"||typeof W.keys[W.depth]=="number"&&await this.util.unaliasKeyword(W.keys[W.depth-1],W.keys,W.depth-1,!0)==="@type"?this.typeJobs.push({job:W.job,keys:W.keys.slice(0,W.keys.length-1)}):B.push(W);for(const W of B){if(this.typeJobs.length>0){const Y=[],q=[];for(let ie=0;ie<this.typeJobs.length;ie++){const ge=this.typeJobs[ie];O.Util.isPrefixArray(ge.keys,W.keys)&&(Y.push(ge),q.push(ie))}const Pe=Y.sort((ie,ge)=>ie.keys.length-ge.keys.length);for(const ie of Pe)await ie.job();const $=q.sort().reverse();for(const ie of $)this.typeJobs.splice(ie,1)}await W.job()}}};return P.DEFAULT_PROCESSING_MODE="1.1",P.ENTRY_HANDLERS=[new a.EntryHandlerArrayValue,new u.EntryHandlerKeywordContext,new f.EntryHandlerKeywordId,new y.EntryHandlerKeywordIncluded,new h.EntryHandlerKeywordGraph,new b.EntryHandlerKeywordNest,new _.EntryHandlerKeywordType,new T.EntryHandlerKeywordValue,new F.EntryHandlerKeywordAnnotation,new o.EntryHandlerContainer,new A.EntryHandlerKeywordUnknownFallback,new l.EntryHandlerPredicate,new d.EntryHandlerInvalidFallback],ip.JsonLdParser=P,ip}var $_;function Gx(){return $_||($_=1,function(e){var r=nf&&nf.__createBinding||(Object.create?function(a,o,d,l){l===void 0&&(l=d);var u=Object.getOwnPropertyDescriptor(o,d);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[d]}}),Object.defineProperty(a,l,u)}:function(a,o,d,l){l===void 0&&(l=d),a[l]=o[d]}),i=nf&&nf.__exportStar||function(a,o){for(var d in a)d!=="default"&&!Object.prototype.hasOwnProperty.call(o,d)&&r(o,a,d)};Object.defineProperty(e,"__esModule",{value:!0}),i($E(),e)}(nf)),nf}var Tu={},K_;function Qv(){if(K_)return Tu;K_=1,Object.defineProperty(Tu,"__esModule",{value:!0});var e=globalThis.fetch;const{fetch:r,Response:i,Request:a,Headers:o}=globalThis;return Tu.Headers=o,Tu.Request=a,Tu.Response=i,Tu.default=e,Tu.fetch=r,Tu}var qx=Is();const kp="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Bp="http://www.w3.org/2001/XMLSchema#",Ty="http://www.w3.org/2000/10/swap/",Qi={xsd:{decimal:`${Bp}decimal`,boolean:`${Bp}boolean`,double:`${Bp}double`,integer:`${Bp}integer`,string:`${Bp}string`},rdf:{type:`${kp}type`,nil:`${kp}nil`,first:`${kp}first`,rest:`${kp}rest`,langString:`${kp}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Ty}reify#forSome`,forAll:`${Ty}reify#forAll`},log:{implies:`${Ty}log#implies`,isImpliedBy:`${Ty}log#isImpliedBy`}},{xsd:Cy}=Qi,zx=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,G_={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Wx=/[\x00-\x20<>\\"\{\}\|\^\`]/,Jx={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Yx=/$0^/;class Xv{constructor(r){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,r=r||{},this._isImpliedBy=r.isImpliedBy,this._lineMode=!!r.lineMode){this._n3Mode=!1;for(const i in this)!(i in Jx)&&this[i]instanceof RegExp&&(this[i]=Yx)}else this._n3Mode=r.n3!==!1;this.comments=!!r.comments,this._literalClosingPos=0}_tokenizeToEnd(r,i){let a=this._input,o=a.length;for(;;){let u,h;for(;u=this._newline.exec(a);)this.comments&&(h=this._comment.exec(u[0]))&&d("comment",h[1],"",this._line,u[0].length),a=a.substr(u[0].length,a.length),o=a.length,this._line++;if(!u&&(u=this._whitespace.exec(a))&&(a=a.substr(u[0].length,a.length)),this._endOfFile.test(a))return i&&(this.comments&&(h=this._comment.exec(a))&&d("comment",h[1],"",this._line,a.length),a=null,d("eof","","",this._line,0)),this._input=a;const f=this._line,y=a[0];let b="",_="",A="",T=null,x=0,O=!1;switch(y){case"^":if(a.length<3)break;if(a[1]==="^"){if(this._previousMarker="^^",a=a.substr(2),a[0]!=="<"){O=!0;break}}else{this._n3Mode&&(x=1,b="^");break}case"<":if(T=this._unescapedIri.exec(a))b="IRI",_=T[1];else if(T=this._iri.exec(a)){if(_=this._unescape(T[1]),_===null||Wx.test(_))return l(this);b="IRI"}else a.length>1&&a[1]==="<"?(b="<<",x=2):this._n3Mode&&a.length>1&&a[1]==="="&&(x=2,this._isImpliedBy?(b="abbreviation",_="<"):(b="inverse",_=">"));break;case">":a.length>1&&a[1]===">"&&(b=">>",x=2);break;case"_":((T=this._blank.exec(a))||i&&(T=this._blank.exec(`${a} `)))&&(b="blank",A="_",_=T[1]);break;case'"':if(T=this._simpleQuotedString.exec(a))_=T[1];else if({value:_,matchLength:x}=this._parseLiteral(a),_===null)return l(this);(T!==null||x!==0)&&(b="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(T=this._simpleApostropheString.exec(a))_=T[1];else if({value:_,matchLength:x}=this._parseLiteral(a),_===null)return l(this);(T!==null||x!==0)&&(b="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(T=this._variable.exec(a))&&(b="var",_=T[0]);break;case"@":this._previousMarker==="literal"&&(T=this._langcode.exec(a))?(b="langcode",_=T[1]):(T=this._keyword.exec(a))&&(b=T[0]);break;case".":if(a.length===1?i:a[1]<"0"||a[1]>"9"){b=".",x=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(T=this._number.exec(a)||i&&(T=this._number.exec(`${a} `)))&&(b="literal",_=T[0],A=typeof T[1]=="string"?Cy.double:typeof T[2]=="string"?Cy.decimal:Cy.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(T=this._sparqlKeyword.exec(a))?b=T[0].toUpperCase():O=!0;break;case"f":case"t":(T=this._boolean.exec(a))?(b="literal",_=T[0],A=Cy.boolean):O=!0;break;case"a":(T=this._shortPredicates.exec(a))?(b="abbreviation",_="a"):O=!0;break;case"=":this._n3Mode&&a.length>1&&(b="abbreviation",a[1]!==">"?(x=1,_="="):(x=2,_=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(x=1,b=y);break;case"{":!this._lineMode&&a.length>=2&&(a[1]==="|"?(b="{|",x=2):(b=y,x=1));break;case"|":a.length>=2&&a[1]==="}"&&(b="|}",x=2);break;default:O=!0}if(O&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(T=this._prefix.exec(a))?(b="prefix",_=T[1]||""):((T=this._prefixed.exec(a))||i&&(T=this._prefixed.exec(`${a} `)))&&(b="prefixed",A=T[1]||"",_=this._unescape(T[2]))),this._previousMarker==="^^")switch(b){case"prefixed":b="type";break;case"IRI":b="typeIRI";break;default:b=""}if(!b)return i||!/^'''|^"""/.test(a)&&/\n|\r/.test(a)?l(this):this._input=a;const R=x||T[0].length,F=d(b,_,A,f,R);this.previousToken=F,this._previousMarker=b,a=a.substr(R,a.length)}function d(u,h,f,y,b){const _=a?o-a.length:o,A=_+b,T={type:u,value:h,prefix:f,line:y,start:_,end:A};return r(null,T),T}function l(u){r(u._syntaxError(/^\S*/.exec(a)[0]))}}_unescape(r){let i=!1;const a=r.replace(zx,(o,d,l,u)=>{if(typeof d=="string")return String.fromCharCode(Number.parseInt(d,16));if(typeof l=="string"){let h=Number.parseInt(l,16);return h<=65535?String.fromCharCode(Number.parseInt(l,16)):String.fromCharCode(55296+((h-=65536)>>10),56320+(h&1023))}return u in G_?G_[u]:(i=!0,"")});return i?null:a}_parseLiteral(r){if(r.length>=3){const i=r.match(/^(?:"""|"|'''|'|)/)[0],a=i.length;let o=Math.max(this._literalClosingPos,a);for(;(o=r.indexOf(i,o))>0;){let d=0;for(;r[o-d-1]==="\\";)d++;if(d%2===0){const l=r.substring(a,o),u=l.split(/\r\n|\r|\n/).length-1,h=o+a;if(a===1&&u!==0||a===3&&this._lineMode)break;return this._line+=u,{value:this._unescape(l),matchLength:h}}o++}this._literalClosingPos=r.length-a+1}return{value:"",matchLength:0}}_syntaxError(r){this._input=null;const i=new Error(`Unexpected "${r}" on line ${this._line}.`);return i.context={token:void 0,line:this._line,previousToken:this.previousToken},i}_readStartingBom(r){return r.startsWith("\uFEFF")?r.substr(1):r}tokenize(r,i){if(this._line=1,typeof r=="string")if(this._input=this._readStartingBom(r),typeof i=="function")queueMicrotask(()=>this._tokenizeToEnd(i,!0));else{const a=[];let o;if(this._tokenizeToEnd((d,l)=>d?o=d:a.push(l),!0),o)throw o;return a}else this._pendingBuffer=null,typeof r.setEncoding=="function"&&r.setEncoding("utf8"),r.on("data",a=>{this._input!==null&&a.length!==0&&(this._pendingBuffer&&(a=qx.Buffer.concat([this._pendingBuffer,a]),this._pendingBuffer=null),a[a.length-1]&128?this._pendingBuffer=a:(typeof this._input>"u"?this._input=this._readStartingBom(typeof a=="string"?a:a.toString()):this._input+=a,this._tokenizeToEnd(i,!1)))}),r.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(i,!0)}),r.on("error",i)}}const{rdf:Qx,xsd:cf}=Qi;let Ud,Xx=0;const Jo={namedNode:KE,blankNode:GE,variable:zE,literal:qE,defaultGraph:Zx,quad:yv,triple:yv,fromTerm:rg,fromQuad:WE};class uo{constructor(r){this.id=r}get value(){return this.id}equals(r){return r instanceof uo?this.id===r.id:!!r&&this.termType===r.termType&&this.value===r.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class lm extends uo{get termType(){return"NamedNode"}}class ku extends uo{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const r=this.id;let i=r.lastIndexOf('"')+1;return i<r.length&&r[i++]==="@"?r.substr(i).toLowerCase():""}get datatype(){return new lm(this.datatypeString)}get datatypeString(){const r=this.id,i=r.lastIndexOf('"')+1,a=i<r.length?r[i]:"";return a==="^"?r.substr(i+2):a!=="@"?cf.string:Qx.langString}equals(r){return r instanceof ku?this.id===r.id:!!r&&!!r.datatype&&this.termType===r.termType&&this.value===r.value&&this.language===r.language&&this.datatype.value===r.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Zv extends uo{constructor(r){super(`_:${r}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class eb extends uo{constructor(r){super(`?${r}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class tb extends uo{constructor(){return super(""),Ud||this}get termType(){return"DefaultGraph"}equals(r){return this===r||!!r&&this.termType===r.termType}}Ud=new tb;function df(e,r,i){if(r=r||Jo,!e)return r.defaultGraph();switch(e[0]){case"?":return r.variable(e.substr(1));case"_":return r.blankNode(e.substr(2));case'"':if(r===Jo)return new ku(e);if(e[e.length-1]==='"')return r.literal(e.substr(1,e.length-2));const a=e.lastIndexOf('"',e.length-1);return r.literal(e.substr(1,a-1),e[a+1]==="@"?e.substr(a+2):r.namedNode(e.substr(a+3)));case"[":e=JSON.parse(e);break;default:if(!i||!Array.isArray(e))return r.namedNode(e)}return r.quad(df(e[0],r,!0),df(e[1],r,!0),df(e[2],r,!0),e[3]&&df(e[3],r,!0))}function Du(e,r){if(typeof e=="string")return e;if(e instanceof uo&&e.termType!=="Quad")return e.id;if(!e)return Ud.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return`_:${e.value}`;case"Variable":return`?${e.value}`;case"DefaultGraph":return"";case"Literal":return`"${e.value}"${e.language?`@${e.language}`:e.datatype&&e.datatype.value!==cf.string?`^^${e.datatype.value}`:""}`;case"Quad":const i=[Du(e.subject,!0),Du(e.predicate,!0),Du(e.object,!0)];return e.graph&&e.graph.termType!=="DefaultGraph"&&i.push(Du(e.graph,!0)),r?i:JSON.stringify(i);default:throw new Error(`Unexpected termType: ${e.termType}`)}}class Pd extends uo{constructor(r,i,a,o){super(""),this._subject=r,this._predicate=i,this._object=a,this._graph=o||Ud}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(r){return!!r&&this._subject.equals(r.subject)&&this._predicate.equals(r.predicate)&&this._object.equals(r.object)&&this._graph.equals(r.graph)}}function KE(e){return new lm(e)}function GE(e){return new Zv(e||`n3-${Xx++}`)}function qE(e,r){if(typeof r=="string")return new ku(`"${e}"@${r.toLowerCase()}`);let i=r?r.value:"";return i===""&&(typeof e=="boolean"?i=cf.boolean:typeof e=="number"&&(Number.isFinite(e)?i=Number.isInteger(e)?cf.integer:cf.double:(i=cf.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),i===""||i===cf.string?new ku(`"${e}"`):new ku(`"${e}"^^${i}`)}function zE(e){return new eb(e)}function Zx(){return Ud}function yv(e,r,i,a){return new Pd(e,r,i,a)}function rg(e){if(e instanceof uo)return e;switch(e.termType){case"NamedNode":return KE(e.value);case"BlankNode":return GE(e.value);case"Variable":return zE(e.value);case"DefaultGraph":return Ud;case"Literal":return qE(e.value,e.language||e.datatype);case"Quad":return WE(e);default:throw new Error(`Unexpected termType: ${e.termType}`)}}function WE(e){if(e instanceof Pd)return e;if(e.termType!=="Quad")throw new Error(`Unexpected termType: ${e.termType}`);return yv(rg(e.subject),rg(e.predicate),rg(e.object),rg(e.graph))}let q_=0;class um{constructor(r){this._contextStack=[],this._graph=null,r=r||{},this._setBase(r.baseIRI),r.factory&&JE(this,r.factory);const i=typeof r.format=="string"?r.format.match(/\w*$/)[0].toLowerCase():"",a=/turtle/.test(i),o=/trig/.test(i),d=/triple/.test(i),l=/quad/.test(i),u=this._n3Mode=/n3/.test(i),h=d||l;(this._supportsNamedGraphs=!(a||u))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(a||o||d||u),this._isImpliedBy=r.isImpliedBy,this._supportsRDFStar=i===""||/star|\*$/.test(i),h&&(this._resolveRelativeIRI=f=>null),this._blankNodePrefix=typeof r.blankNodePrefix!="string"?"":r.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=r.lexer||new Xv({lineMode:h,n3:u,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!r.explicitQuantifiers}static _resetBlankNodePrefix(){q_=0}_setBase(r){if(!r)this._base="",this._basePath="";else{const i=r.indexOf("#");i>=0&&(r=r.substr(0,i)),this._base=r,this._basePath=r.indexOf("/")<0?r:r.replace(/[^\/?]*(?:\?.*)?$/,""),r=r.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=r[0],this._baseScheme=r[1]}}_saveContext(r,i,a,o,d){const l=this._n3Mode;this._contextStack.push({type:r,subject:a,predicate:o,object:d,graph:i,inverse:l?this._inversePredicate:!1,blankPrefix:l?this._prefixes._:"",quantified:l?this._quantified:null}),l&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(r,i){const a=this._contextStack.pop();if(!a||a.type!==r)return this._error(`Unexpected ${i.type}`,i);this._subject=a.subject,this._predicate=a.predicate,this._object=a.object,this._graph=a.graph,this._n3Mode&&(this._inversePredicate=a.inverse,this._prefixes._=a.blankPrefix,this._quantified=a.quantified)}_readInTopContext(r){switch(r.type){case"eof":return this._graph!==null?this._error("Unclosed graph",r):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(r)}}_readEntity(r,i){let a;switch(r.type){case"IRI":case"typeIRI":const o=this._resolveIRI(r.value);if(o===null)return this._error("Invalid IRI",r);a=this._factory.namedNode(o);break;case"type":case"prefixed":const d=this._prefixes[r.prefix];if(d===void 0)return this._error(`Undefined prefix "${r.prefix}:"`,r);a=this._factory.namedNode(d+r.value);break;case"blank":a=this._factory.blankNode(this._prefixes[r.prefix]+r.value);break;case"var":a=this._factory.variable(r.value.substr(1));break;default:return this._error(`Expected entity but got ${r.type}`,r)}return!i&&this._n3Mode&&a.id in this._quantified&&(a=this._quantified[a.id]),a}_readSubject(r){switch(this._predicate=null,r.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",r);case"}":return this._readPunctuation(r);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',r);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',r);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",r);if(r.prefix.length===0)return this._literalValue=r.value,this._completeSubjectLiteral;this._subject=this._factory.literal(r.value,this._factory.namedNode(r.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",r);default:if((this._subject=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(r){const i=r.type;switch(i){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[r.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${i}`,r):(this._subject=null,i==="]"?this._readBlankNodeTail(r):this._readPunctuation(r));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",r);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",r);default:if((this._predicate=this._readEntity(r))===void 0)return}return this._readObject}_readObject(r){switch(r.type){case"literal":if(r.prefix.length===0)return this._literalValue=r.value,this._readDataTypeOrLang;this._object=this._factory.literal(r.value,this._factory.namedNode(r.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",r);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",r);default:if((this._object=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(r){return r.type==="{"?this._readGraph(r):this._readPredicate(r)}_readGraph(r){return r.type!=="{"?this._error(`Expected graph but got ${r.type}`,r):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(r){return r.type==="]"?(this._subject=null,this._readBlankNodeTail(r)):(this._predicate=null,this._readPredicate(r))}_readBlankNodeTail(r){if(r.type!=="]")return this._readBlankNodePunctuation(r);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const i=this._predicate===null;return this._restoreContext("blank",r),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:i?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(r){switch(r.type){case".":case"}":return this._subject=null,this._readPunctuation(r);default:return this._readPredicate(r)}}_readListItem(r){let i=null,a=null,o=this._readListItem;const d=this._subject,l=this._contextStack,u=l[l.length-1];switch(r.type){case"[":this._saveContext("blank",this._graph,a=this._factory.blankNode(),this.RDF_FIRST,this._subject=i=this._factory.blankNode()),o=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,a=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",r),l.length!==0&&l[l.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(o=this._readPredicate,this._subject===this.RDF_NIL)return o}else if(o=this._getContextEndReader(),this._object===this.RDF_NIL)return o;a=this.RDF_NIL;break;case"literal":r.prefix.length===0?(this._literalValue=r.value,o=this._readListItemDataTypeOrLang):(i=this._factory.literal(r.value,this._factory.namedNode(r.prefix)),o=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",r);default:if((i=this._readEntity(r))===void 0)return}if(a===null&&(this._subject=a=this._factory.blankNode()),d===null?u.predicate===null?u.subject=a:u.object=a:this._emit(d,this.RDF_REST,a,this._graph),i!==null){if(this._n3Mode&&(r.type==="IRI"||r.type==="prefixed"))return this._saveContext("item",this._graph,a,this.RDF_FIRST,i),this._subject=i,this._predicate=null,this._getPathReader(this._readListItem);this._emit(a,this.RDF_FIRST,i,this._graph)}return o}_readDataTypeOrLang(r){return this._completeObjectLiteral(r,!1)}_readListItemDataTypeOrLang(r){return this._completeObjectLiteral(r,!0)}_completeLiteral(r){let i=this._factory.literal(this._literalValue);switch(r.type){case"type":case"typeIRI":const a=this._readEntity(r);if(a===void 0)return;i=this._factory.literal(this._literalValue,a),r=null;break;case"langcode":i=this._factory.literal(this._literalValue,r.value),r=null;break}return{token:r,literal:i}}_completeSubjectLiteral(r){return this._subject=this._completeLiteral(r).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(r,i){const a=this._completeLiteral(r);if(a)return this._object=a.literal,i&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),a.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(a.token))}_readFormulaTail(r){return r.type!=="}"?this._readPunctuation(r):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",r),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(r){let i,a=this._graph;const o=this._subject,d=this._inversePredicate;switch(r.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",r);if(this._n3Mode)return this._readFormulaTail(r);this._graph=null;case".":this._subject=null,i=this._contextStack.length?this._readSubject:this._readInTopContext,d&&(this._inversePredicate=!1);break;case";":i=this._readPredicate;break;case",":i=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",r);const l=this._predicate,u=this._object;this._subject=this._factory.quad(o,l,u,this.DEFAULTGRAPH),i=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",r);this._subject=null,i=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(a=this._readEntity(r))!==void 0){i=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}if(o!==null){const l=this._predicate,u=this._object;d?this._emit(u,l,o,a):this._emit(o,l,u,a)}return i}_readBlankNodePunctuation(r){let i;switch(r.type){case";":i=this._readPredicate;break;case",":i=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}return this._emit(this._subject,this._predicate,this._object,this._graph),i}_readQuadPunctuation(r){return r.type!=="."?this._error("Expected dot to follow quad",r):this._readInTopContext}_readPrefix(r){return r.type!=="prefix"?this._error("Expected prefix to follow @prefix",r):(this._prefix=r.value,this._readPrefixIRI)}_readPrefixIRI(r){if(r.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,r);const i=this._readEntity(r);return this._prefixes[this._prefix]=i.value,this._prefixCallback(this._prefix,i),this._readDeclarationPunctuation}_readBaseIRI(r){const i=r.type==="IRI"&&this._resolveIRI(r.value);return i?(this._setBase(i),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",r)}_readNamedGraphLabel(r){switch(r.type){case"IRI":case"blank":case"prefixed":return this._readSubject(r),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",r)}}_readNamedGraphBlankLabel(r){return r.type!=="]"?this._error("Invalid graph label",r):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(r){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(r)):r.type!=="."?this._error("Expected declaration to end with a dot",r):this._readInTopContext}_readQuantifierList(r){let i;switch(r.type){case"IRI":case"prefixed":if((i=this._readEntity(r,!0))!==void 0)break;default:return this._error(`Unexpected ${r.type}`,r)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,i,this.QUANTIFIERS_GRAPH)):this._quantified[i.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(r){return r.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(r))}_getPathReader(r){return this._afterPath=r,this._readPath}_readPath(r){switch(r.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const i=this._contextStack,a=i.length&&i[i.length-1];if(a&&a.type==="item"){const o=this._subject;this._restoreContext("item",r),this._emit(this._subject,this.RDF_FIRST,o,this._graph)}return this._afterPath(r)}}_readForwardPath(r){let i,a;const o=this._factory.blankNode();if((a=this._readEntity(r))!==void 0)return this._predicate===null?(i=this._subject,this._subject=o):(i=this._object,this._object=o),this._emit(i,a,o,this._graph),this._readPath}_readBackwardPath(r){const i=this._factory.blankNode();let a,o;if((a=this._readEntity(r))!==void 0)return this._predicate===null?(o=this._subject,this._subject=i):(o=this._object,this._object=i),this._emit(i,a,o,this._graph),this._readPath}_readRDFStarTailOrGraph(r){return r.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(r))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,r):this._readRDFStarTail(r)}_readRDFStarTail(r){if(r.type!==">>")return this._error(`Expected >> but got ${r.type}`,r);const i=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",r),this._subject===null?(this._subject=i,this._readPredicate):(this._object=i,this._getContextEndReader())}_getContextEndReader(){const r=this._contextStack;if(!r.length)return this._readPunctuation;switch(r[r.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(r,i,a,o){this._callback(null,this._factory.quad(r,i,a,o||this.DEFAULTGRAPH))}_error(r,i){const a=new Error(`${r} on line ${i.line}.`);a.context={token:i,line:i.line,previousToken:this._lexer.previousToken},this._callback(a),this._callback=Oy}_resolveIRI(r){return/^[a-z][a-z0-9+.-]*:/i.test(r)?r:this._resolveRelativeIRI(r)}_resolveRelativeIRI(r){if(!r.length)return this._base;switch(r[0]){case"#":return this._base+r;case"?":return this._base.replace(/(?:\?.*)?$/,r);case"/":return(r[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(r);default:return/^[^/:]*:/.test(r)?null:this._removeDotSegments(this._basePath+r)}}_removeDotSegments(r){if(!/(^|\/)\.\.?($|[/#?])/.test(r))return r;const i=r.length;let a="",o=-1,d=-1,l=0,u="/";for(;o<i;){switch(u){case":":if(d<0&&r[++o]==="/"&&r[++o]==="/")for(;(d=o+1)<i&&r[d]!=="/";)o=d;break;case"?":case"#":o=i;break;case"/":if(r[o+1]===".")switch(u=r[++o+1],u){case"/":a+=r.substring(l,o-1),l=o+1;break;case void 0:case"?":case"#":return a+r.substring(l,o)+r.substr(o+1);case".":if(u=r[++o+1],u===void 0||u==="/"||u==="?"||u==="#"){if(a+=r.substring(l,o-2),(l=a.lastIndexOf("/"))>=d&&(a=a.substr(0,l)),u!=="/")return`${a}/${r.substr(o+1)}`;l=o+1}}}u=r[++o]}return a+r.substring(l)}parse(r,i,a){let o,d,l;if(i&&(i.onQuad||i.onPrefix||i.onComment)?(o=i.onQuad,d=i.onPrefix,l=i.onComment):(o=i,d=a),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${q_++}_`,this._prefixCallback=d||Oy,this._inversePredicate=!1,this._quantified=Object.create(null),!o){const h=[];let f;if(this._callback=(y,b)=>{y?f=y:b&&h.push(b)},this._lexer.tokenize(r).every(y=>this._readCallback=this._readCallback(y)),f)throw f;return h}let u=(h,f)=>{h!==null?(this._callback(h),this._callback=Oy):this._readCallback&&(this._readCallback=this._readCallback(f))};l&&(this._lexer.comments=!0,u=(h,f)=>{h!==null?(this._callback(h),this._callback=Oy):this._readCallback&&(f.type==="comment"?l(f.value):this._readCallback=this._readCallback(f))}),this._callback=o,this._lexer.tokenize(r,u)}}function Oy(){}function JE(e,r){e._factory=r,e.DEFAULTGRAPH=r.defaultGraph(),e.RDF_FIRST=r.namedNode(Qi.rdf.first),e.RDF_REST=r.namedNode(Qi.rdf.rest),e.RDF_NIL=r.namedNode(Qi.rdf.nil),e.N3_FORALL=r.namedNode(Qi.r.forAll),e.N3_FORSOME=r.namedNode(Qi.r.forSome),e.ABBREVIATIONS={a:r.namedNode(Qi.rdf.type),"=":r.namedNode(Qi.owl.sameAs),">":r.namedNode(Qi.log.implies),"<":r.namedNode(Qi.log.isImpliedBy)},e.QUANTIFIERS_GRAPH=r.namedNode("urn:n3:quantifiers")}JE(um.prototype,Jo);function eT(e){return!!e&&e.termType==="NamedNode"}function tT(e){return!!e&&e.termType==="BlankNode"}function rT(e){return!!e&&e.termType==="Literal"}function nT(e){return!!e&&e.termType==="Variable"}function iT(e){return!!e&&e.termType==="Quad"}function fg(e){return!!e&&e.termType==="DefaultGraph"}function aT(e){return fg(e.graph)}function oT(e,r){return YE({"":e.value||e},r)("")}function YE(e,r){const i=Object.create(null);for(const o in e)a(o,e[o]);r=r||Jo;function a(o,d){if(typeof d=="string"){const l=Object.create(null);i[o]=u=>l[u]||(l[u]=r.namedNode(d+u))}else if(!(o in i))throw new Error(`Unknown prefix: ${o}`);return i[o]}return a}const QE=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:aT,isBlankNode:tT,isDefaultGraph:fg,isLiteral:rT,isNamedNode:eT,isQuad:iT,isVariable:nT,prefix:oT,prefixes:YE},Symbol.toStringTag,{value:"Module"}));function By(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const sT=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,lT=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,z_="./",uT="../",L0="?",W_="#";class wg{constructor(r){this.base=r,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(r.length+1)}static supports(r){return!sT.test(r)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!wg.supports(this.base))return this._baseMatcher=/.^/;const r=/^[^:]*:\/*/.exec(this.base)[0],i=["^",By(r)],a=[],o=[],d=/[^/?#]*([/?#])/y;let l,u=0,h=0,f=d.lastIndex=r.length;for(;!u&&!h&&(l=d.exec(this.base));)l[1]===W_?h=d.lastIndex-1:(i.push(By(l[0]),"(?:"),a.push(")?"),l[1]!==L0?o.push(f=d.lastIndex):(u=f=d.lastIndex,h=this.base.indexOf(W_,u),this._pathReplacements[u]=L0));for(let y=0;y<o.length;y++)this._pathReplacements[o[y]]=uT.repeat(o.length-y-1);return this._pathReplacements[o[o.length-1]]=z_,this._baseLength=h>0?h:this.base.length,i.push(By(this.base.substring(f,this._baseLength)),u?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...i,...a].join(""))}toRelative(r){const i=this._getBaseMatcher().exec(r);if(!i)return r;const a=i[0].length;if(a===this._baseLength&&a===r.length)return"";const o=this._pathReplacements[a];if(o){const d=r.substring(a);return o!==L0&&!lT.test(d)?r:o===z_&&/^[^?#]/.test(d)?d:o+d}return r.substring(a-1)}}const Hp=Jo.defaultGraph(),{rdf:cT,xsd:xd}=Qi,J_=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Y_=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,fT={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class jp extends uo{equals(r){return r===this}}class _g{constructor(r,i){if(this._prefixRegex=/$0^/,r&&typeof r.write!="function"&&(i=r,r=null),i=i||{},this._lists=i.lists,r)this._outputStream=r,this._endStream=i.end===void 0?!0:!!i.end;else{let a="";this._outputStream={write(o,d,l){a+=o,l&&l()},end:o=>{o&&o(null,a)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(i.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Hp,this._prefixIRIs=Object.create(null),i.prefixes&&this.addPrefixes(i.prefixes),i.baseIRI&&(this._baseIri=new wg(i.baseIRI)))}get _inDefaultGraph(){return Hp.equals(this._graph)}_write(r,i){this._outputStream.write(r,"utf8",i)}_writeQuad(r,i,a,o,d){try{o.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Hp.equals(o)?"":`${this._encodeIriOrBlank(o)} {
`)),this._graph=o,this._subject=null),r.equals(this._subject)?i.equals(this._predicate)?this._write(`, ${this._encodeObject(a)}`,d):this._write(`;
    ${this._encodePredicate(this._predicate=i)} ${this._encodeObject(a)}`,d):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=r)} ${this._encodePredicate(this._predicate=i)} ${this._encodeObject(a)}`,d)}catch(l){d&&d(l)}}_writeQuadLine(r,i,a,o,d){delete this._prefixMatch,this._write(this.quadToString(r,i,a,o),d)}quadToString(r,i,a,o){return`${this._encodeSubject(r)} ${this._encodeIriOrBlank(i)} ${this._encodeObject(a)}${o&&o.value?` ${this._encodeIriOrBlank(o)} .
`:` .
`}`}quadsToString(r){let i="";for(const a of r)i+=this.quadToString(a.subject,a.predicate,a.object,a.graph);return i}_encodeSubject(r){return r.termType==="Quad"?this._encodeQuad(r):this._encodeIriOrBlank(r)}_encodeIriOrBlank(r){if(r.termType!=="NamedNode")return this._lists&&r.value in this._lists&&(r=this.list(this._lists[r.value])),"id"in r?r.id:`_:${r.value}`;let i=r.value;this._baseIri&&(i=this._baseIri.toRelative(i)),J_.test(i)&&(i=i.replace(Y_,Q_));const a=this._prefixRegex.exec(i);return a?a[1]?this._prefixIRIs[a[1]]+a[2]:i:`<${i}>`}_encodeLiteral(r){let i=r.value;if(J_.test(i)&&(i=i.replace(Y_,Q_)),r.language)return`"${i}"@${r.language}`;if(this._lineMode){if(r.datatype.value===xd.string)return`"${i}"`}else switch(r.datatype.value){case xd.string:return`"${i}"`;case xd.boolean:if(i==="true"||i==="false")return i;break;case xd.integer:if(/^[+-]?\d+$/.test(i))return i;break;case xd.decimal:if(/^[+-]?\d*\.\d+$/.test(i))return i;break;case xd.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(i))return i;break}return`"${i}"^^${this._encodeIriOrBlank(r.datatype)}`}_encodePredicate(r){return r.value===cT.type?"a":this._encodeIriOrBlank(r)}_encodeObject(r){switch(r.termType){case"Quad":return this._encodeQuad(r);case"Literal":return this._encodeLiteral(r);default:return this._encodeIriOrBlank(r)}}_encodeQuad({subject:r,predicate:i,object:a,graph:o}){return`<<${this._encodeSubject(r)} ${this._encodePredicate(i)} ${this._encodeObject(a)}${fg(o)?"":` ${this._encodeIriOrBlank(o)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(r,i,a,o,d){a===void 0?this._writeQuad(r.subject,r.predicate,r.object,r.graph,i):typeof o=="function"?this._writeQuad(r,i,a,Hp,o):this._writeQuad(r,i,a,o||Hp,d)}addQuads(r){for(let i=0;i<r.length;i++)this.addQuad(r[i])}addPrefix(r,i,a){const o={};o[r]=i,this.addPrefixes(o,a)}addPrefixes(r,i){if(!this._prefixIRIs)return i&&i();let a=!1;for(let o in r){let d=r[o];typeof d!="string"&&(d=d.value),a=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[d]=o+=":",this._write(`@prefix ${o} <${d}>.
`)}if(a){let o="",d="";for(const l in this._prefixIRIs)o+=o?`|${l}`:l,d+=(d?"|":"")+this._prefixIRIs[l];o=By(o),this._prefixRegex=new RegExp(`^(?:${d})[^/]*$|^(${o})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(a?`
`:"",i)}blank(r,i){let a=r,o,d;switch(r===void 0?a=[]:r.termType?a=[{predicate:r,object:i}]:"length"in r||(a=[r]),d=a.length){case 0:return new jp("[]");case 1:if(o=a[0],!(o.object instanceof jp))return new jp(`[ ${this._encodePredicate(o.predicate)} ${this._encodeObject(o.object)} ]`);default:let l="[";for(let u=0;u<d;u++)o=a[u],o.predicate.equals(r)?l+=`, ${this._encodeObject(o.object)}`:(l+=`${(u?`;
  `:`
  `)+this._encodePredicate(o.predicate)} ${this._encodeObject(o.object)}`,r=o.predicate);return new jp(`${l}
]`)}}list(r){const i=r&&r.length||0,a=new Array(i);for(let o=0;o<i;o++)a[o]=this._encodeObject(r[o]);return new jp(`(${a.join(" ")})`)}end(r){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let i=r&&((a,o)=>{i=null,r(a,o)});if(this._endStream)try{return this._outputStream.end(i)}catch{}i&&i()}}function Q_(e){let r=fT[e];return r===void 0&&(e.length===1?(r=e.charCodeAt(0).toString(16),r="\\u0000".substr(0,6-r.length)+r):(r=((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)+9216).toString(16),r="\\U00000000".substr(0,10-r.length)+r)),r}var cm=NE();const M0=Symbol("iter");function og(e,r,i=4){if(i===0)return Object.assign(e,r);for(const a in r)e[a]=og(e[a]||Object.create(null),r[a],i-1);return e}function XE(e,r,i=4){let a=!1;for(const o in e)if(o in r){const d=i===0?null:XE(e[o],r[o],i-1);if(d!==!1)a=a||Object.create(null),a[o]=d;else if(i===3)return!1}return a}function ZE(e,r,i=4){let a=!1;for(const o in e)if(!(o in r))a=a||Object.create(null),a[o]=i===0?null:og({},e[o],i-1);else if(i!==0){const d=ZE(e[o],r[o],i-1);if(d!==!1)a=a||Object.create(null),a[o]=d;else if(i===3)return!1}return a}class rb{constructor(r={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=r.factory||Jo}_termFromId(r){if(r[0]==="."){const i=this._entities,a=r.split(".");return this._factory.quad(this._termFromId(i[a[1]]),this._termFromId(i[a[2]]),this._termFromId(i[a[3]]),a[4]&&this._termFromId(i[a[4]]))}return df(r,this._factory)}_termToNumericId(r){if(r.termType==="Quad"){const i=this._termToNumericId(r.subject),a=this._termToNumericId(r.predicate),o=this._termToNumericId(r.object);let d;return i&&a&&o&&(fg(r.graph)||(d=this._termToNumericId(r.graph)))&&this._ids[d?`.${i}.${a}.${o}.${d}`:`.${i}.${a}.${o}`]}return this._ids[Du(r)]}_termToNewNumericId(r){const i=r&&r.termType==="Quad"?`.${this._termToNewNumericId(r.subject)}.${this._termToNewNumericId(r.predicate)}.${this._termToNewNumericId(r.object)}${fg(r.graph)?"":`.${this._termToNewNumericId(r.graph)}`}`:Du(r);return this._ids[i]||(this._ids[this._entities[++this._id]=i]=this._id)}createBlankNode(r){let i,a;if(r)for(i=r=`_:${r}`,a=1;this._ids[i];)i=r+a++;else do i=`_:b${this._blankNodeIndex++}`;while(this._ids[i]);return this._ids[i]=++this._id,this._entities[this._id]=i,this._factory.blankNode(i.substr(2))}}class la{constructor(r,i){this._size=0,this._graphs=Object.create(null),!i&&r&&!r[0]&&typeof r.match!="function"&&(i=r,r=null),i=i||{},this._factory=i.factory||Jo,this._entityIndex=i.entityIndex||new rb({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),r&&this.addAll(r)}get size(){let r=this._size;if(r!==null)return r;r=0;const i=this._graphs;let a,o;for(const d in i)for(const l in a=i[d].subjects)for(const u in o=a[l])r+=Object.keys(o[u]).length;return this._size=r}_addToIndex(r,i,a,o){const d=r[i]||(r[i]={}),l=d[a]||(d[a]={}),u=o in l;return u||(l[o]=null),!u}_removeFromIndex(r,i,a,o){const d=r[i],l=d[a];delete l[o];for(const u in l)return;delete d[a];for(const u in d)return;delete r[i]}*_findInIndex(r,i,a,o,d,l,u,h){let f,y,b;const _=this._entities,A=this._termFromId(_[h]),T={subject:null,predicate:null,object:null};i&&((f=r,r={})[i]=f[i]);for(const x in r)if(y=r[x]){T[d]=this._termFromId(_[x]),a&&((f=y,y={})[a]=f[a]);for(const O in y)if(b=y[O]){T[l]=this._termFromId(_[O]);const R=o?o in b?[o]:[]:Object.keys(b);for(let F=0;F<R.length;F++)T[u]=this._termFromId(_[R[F]]),yield this._factory.quad(T.subject,T.predicate,T.object,A)}}}_loop(r,i){for(const a in r)i(a)}_loopByKey0(r,i,a){let o,d;if(o=r[i])for(d in o)a(d)}_loopByKey1(r,i,a){let o,d;for(o in r)d=r[o],d[i]&&a(o)}_loopBy2Keys(r,i,a,o){let d,l,u;if((d=r[i])&&(l=d[a]))for(u in l)o(u)}_countInIndex(r,i,a,o){let d=0,l,u,h;i&&((l=r,r={})[i]=l[i]);for(const f in r)if(u=r[f]){a&&((l=u,u={})[a]=l[a]);for(const y in u)(h=u[y])&&(o?o in h&&d++:d+=Object.keys(h).length)}return d}_getGraphs(r){return r=r===""?1:r&&(this._termToNumericId(r)||-1),typeof r!="number"?this._graphs:{[r]:this._graphs[r]}}_uniqueEntities(r){const i=Object.create(null);return a=>{a in i||(i[a]=!0,r(this._termFromId(this._entities[a],this._factory)))}}add(r){return this.addQuad(r),this}addQuad(r,i,a,o){i||(o=r.graph,a=r.object,i=r.predicate,r=r.subject),o=o?this._termToNewNumericId(o):1;let d=this._graphs[o];return d||(d=this._graphs[o]={subjects:{},predicates:{},objects:{}},Object.freeze(d)),r=this._termToNewNumericId(r),i=this._termToNewNumericId(i),a=this._termToNewNumericId(a),this._addToIndex(d.subjects,r,i,a)?(this._addToIndex(d.predicates,i,a,r),this._addToIndex(d.objects,a,r,i),this._size=null,!0):!1}addQuads(r){for(let i=0;i<r.length;i++)this.addQuad(r[i])}delete(r){return this.removeQuad(r),this}has(r,i,a,o){return r&&r.subject&&({subject:r,predicate:i,object:a,graph:o}=r),!this.readQuads(r,i,a,o).next().done}import(r){return r.on("data",i=>{this.addQuad(i)}),r}removeQuad(r,i,a,o){i||({subject:r,predicate:i,object:a,graph:o}=r),o=o?this._termToNumericId(o):1;const d=this._graphs;let l,u,h;if(!(r=r&&this._termToNumericId(r))||!(i=i&&this._termToNumericId(i))||!(a=a&&this._termToNumericId(a))||!(l=d[o])||!(u=l.subjects[r])||!(h=u[i])||!(a in h))return!1;this._removeFromIndex(l.subjects,r,i,a),this._removeFromIndex(l.predicates,i,a,r),this._removeFromIndex(l.objects,a,r,i),this._size!==null&&this._size--;for(r in l.subjects)return!0;return delete d[o],!0}removeQuads(r){for(let i=0;i<r.length;i++)this.removeQuad(r[i])}remove(r){return r.on("data",i=>{this.removeQuad(i)}),r}removeMatches(r,i,a,o){const d=new cm.Readable({objectMode:!0}),l=this.readQuads(r,i,a,o);return d._read=u=>{for(;--u>=0;){const{done:h,value:f}=l.next();if(h){d.push(null);return}d.push(f)}},this.remove(d)}deleteGraph(r){return this.removeMatches(null,null,null,r)}getQuads(r,i,a,o){return[...this.readQuads(r,i,a,o)]}*readQuads(r,i,a,o){const d=this._getGraphs(o);let l,u,h,f;if(!(r&&!(u=this._termToNumericId(r))||i&&!(h=this._termToNumericId(i))||a&&!(f=this._termToNumericId(a))))for(const y in d)(l=d[y])&&(u?f?yield*this._findInIndex(l.objects,f,u,h,"object","subject","predicate",y):yield*this._findInIndex(l.subjects,u,h,null,"subject","predicate","object",y):h?yield*this._findInIndex(l.predicates,h,f,null,"predicate","object","subject",y):f?yield*this._findInIndex(l.objects,f,null,null,"object","subject","predicate",y):yield*this._findInIndex(l.subjects,null,null,null,"subject","predicate","object",y))}match(r,i,a,o){return new Nu(this,r,i,a,o,{entityIndex:this._entityIndex})}countQuads(r,i,a,o){const d=this._getGraphs(o);let l=0,u,h,f,y;if(r&&!(h=this._termToNumericId(r))||i&&!(f=this._termToNumericId(i))||a&&!(y=this._termToNumericId(a)))return 0;for(const b in d)(u=d[b])&&(r?a?l+=this._countInIndex(u.objects,y,h,f):l+=this._countInIndex(u.subjects,h,f,y):i?l+=this._countInIndex(u.predicates,f,y,h):l+=this._countInIndex(u.objects,y,h,f));return l}forEach(r,i,a,o,d){this.some(l=>(r(l,this),!1),i,a,o,d)}every(r,i,a,o,d){return!this.some(l=>!r(l,this),i,a,o,d)}some(r,i,a,o,d){for(const l of this.readQuads(i,a,o,d))if(r(l,this))return!0;return!1}getSubjects(r,i,a){const o=[];return this.forSubjects(d=>{o.push(d)},r,i,a),o}forSubjects(r,i,a,o){const d=this._getGraphs(o);let l,u,h;if(r=this._uniqueEntities(r),!(i&&!(u=this._termToNumericId(i))||a&&!(h=this._termToNumericId(a))))for(o in d)(l=d[o])&&(u?h?this._loopBy2Keys(l.predicates,u,h,r):this._loopByKey1(l.subjects,u,r):h?this._loopByKey0(l.objects,h,r):this._loop(l.subjects,r))}getPredicates(r,i,a){const o=[];return this.forPredicates(d=>{o.push(d)},r,i,a),o}forPredicates(r,i,a,o){const d=this._getGraphs(o);let l,u,h;if(r=this._uniqueEntities(r),!(i&&!(u=this._termToNumericId(i))||a&&!(h=this._termToNumericId(a))))for(o in d)(l=d[o])&&(u?h?this._loopBy2Keys(l.objects,h,u,r):this._loopByKey0(l.subjects,u,r):h?this._loopByKey1(l.predicates,h,r):this._loop(l.predicates,r))}getObjects(r,i,a){const o=[];return this.forObjects(d=>{o.push(d)},r,i,a),o}forObjects(r,i,a,o){const d=this._getGraphs(o);let l,u,h;if(r=this._uniqueEntities(r),!(i&&!(u=this._termToNumericId(i))||a&&!(h=this._termToNumericId(a))))for(o in d)(l=d[o])&&(u?h?this._loopBy2Keys(l.subjects,u,h,r):this._loopByKey1(l.objects,u,r):h?this._loopByKey0(l.predicates,h,r):this._loop(l.objects,r))}getGraphs(r,i,a){const o=[];return this.forGraphs(d=>{o.push(d)},r,i,a),o}forGraphs(r,i,a,o){for(const d in this._graphs)this.some(l=>(r(l.graph),!0),i,a,o,this._termFromId(this._entities[d]))}createBlankNode(r){return this._entityIndex.createBlankNode(r)}extractLists({remove:r=!1,ignoreErrors:i=!1}={}){const a={},o=i?()=>!0:(u,h)=>{throw new Error(`${u.value} ${h}`)},d=this.getQuads(null,Qi.rdf.rest,Qi.rdf.nil,null),l=r?[...d]:[];return d.forEach(u=>{const h=[];let f=!1,y,b;const _=u.graph;let A=u.subject;for(;A&&!f;){const T=this.getQuads(null,null,A,null),x=this.getQuads(A,null,null,null);let O,R=null,F=null,P=null;for(let K=0;K<x.length&&!f;K++)O=x[K],O.graph.equals(_)?y?f=o(A,"has non-list arcs out"):O.predicate.value===Qi.rdf.first?R?f=o(A,"has multiple rdf:first arcs"):l.push(R=O):O.predicate.value===Qi.rdf.rest?F?f=o(A,"has multiple rdf:rest arcs"):l.push(F=O):T.length?f=o(A,"can't be subject and object"):(y=O,b="subject"):f=o(A,"not confined to single graph");for(let K=0;K<T.length&&!f;++K)O=T[K],y?f=o(A,"can't have coreferences"):O.predicate.value===Qi.rdf.rest?P?f=o(A,"has incoming rdf:rest arcs"):P=O:(y=O,b="object");R?h.unshift(R.object):f=o(A,"has no list head"),A=P&&P.subject}f?r=!1:y&&(a[y[b].value]=h)}),r&&this.removeQuads(l),a}addAll(r){if(r instanceof Nu&&(r=r.filtered),Array.isArray(r))this.addQuads(r);else if(r instanceof la&&r._entityIndex===this._entityIndex)r._size!==0&&(this._graphs=og(this._graphs,r._graphs),this._size=null);else for(const i of r)this.add(i);return this}contains(r){if(r instanceof Nu&&(r=r.filtered),r===this)return!0;if(!(r instanceof la)||this._entityIndex!==r._entityIndex)return r.every(f=>this.has(f));const i=this._graphs,a=r._graphs;let o,d,l,u,h;for(const f in a){if(!(o=i[f]))return!1;o=o.subjects;for(const y in d=a[f].subjects){if(!(l=o[y]))return!1;for(const b in u=d[y]){if(!(h=l[b]))return!1;for(const _ in u[b])if(!(_ in h))return!1}}}return!0}deleteMatches(r,i,a,o){for(const d of this.match(r,i,a,o))this.removeQuad(d);return this}difference(r){if(r&&r instanceof Nu&&(r=r.filtered),r===this)return new la({entityIndex:this._entityIndex});if(r instanceof la&&r._entityIndex===this._entityIndex){const i=new la({entityIndex:this._entityIndex}),a=ZE(this._graphs,r._graphs);return a&&(i._graphs=a,i._size=null),i}return this.filter(i=>!r.has(i))}equals(r){return r instanceof Nu&&(r=r.filtered),r===this||this.size===r.size&&this.contains(r)}filter(r){const i=new la({entityIndex:this._entityIndex});for(const a of this)r(a,this)&&i.add(a);return i}intersection(r){if(r instanceof Nu&&(r=r.filtered),r===this){const i=new la({entityIndex:this._entityIndex});return i._graphs=og(Object.create(null),this._graphs),i._size=this._size,i}else if(r instanceof la&&this._entityIndex===r._entityIndex){const i=new la({entityIndex:this._entityIndex}),a=XE(r._graphs,this._graphs);return a&&(i._graphs=a,i._size=null),i}return this.filter(i=>r.has(i))}map(r){const i=new la({entityIndex:this._entityIndex});for(const a of this)i.add(r(a,this));return i}reduce(r,i){const a=this.readQuads();let o=i===void 0?a.next().value:i;for(const d of a)o=r(o,d,this);return o}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new _g().quadsToString(this)}union(r){const i=new la({entityIndex:this._entityIndex});return i._graphs=og(Object.create(null),this._graphs),i._size=this._size,i.addAll(r),i}*[Symbol.iterator](){yield*this.readQuads()}}function Es(e,r,i=0){const a=r[i];if(a&&!(a in e))return!1;let o=!1;for(const d in a?{[a]:e[a]}:e){const l=i===2?null:Es(e[d],r,i+1);l!==!1&&(o=o||Object.create(null),o[d]=l)}return o}class Nu extends cm.Readable{constructor(r,i,a,o,d,l){super({objectMode:!0}),Object.assign(this,{n3Store:r,subject:i,predicate:a,object:o,graph:d,options:l})}get filtered(){if(!this._filtered){const{n3Store:r,graph:i,object:a,predicate:o,subject:d}=this,l=this._filtered=new la({factory:r._factory,entityIndex:this.options.entityIndex});let u,h,f;if(d&&!(u=l._termToNumericId(d))||o&&!(h=l._termToNumericId(o))||a&&!(f=l._termToNumericId(a)))return l;const y=r._getGraphs(i);for(const b in y){let _,A,T,x;(x=y[b])&&(!u&&h?(A=Es(x.predicates,[h,f,u]))&&(_=Es(x.subjects,[u,h,f]),T=Es(x.objects,[f,u,h])):f?(T=Es(x.objects,[f,u,h]))&&(_=Es(x.subjects,[u,h,f]),A=Es(x.predicates,[h,f,u])):(_=Es(x.subjects,[u,h,f]))&&(A=Es(x.predicates,[h,f,u]),T=Es(x.objects,[f,u,h])),_&&(l._graphs[b]={subjects:_,predicates:A,objects:T}))}l._size=null}return this._filtered}get size(){return this.filtered.size}_read(r){r>0&&!this[M0]&&(this[M0]=this[Symbol.iterator]());const i=this[M0];for(;--r>=0;){const{done:a,value:o}=i.next();if(a){this.push(null);return}this.push(o)}}addAll(r){return this.filtered.addAll(r)}contains(r){return this.filtered.contains(r)}deleteMatches(r,i,a,o){return this.filtered.deleteMatches(r,i,a,o)}difference(r){return this.filtered.difference(r)}equals(r){return this.filtered.equals(r)}every(r,i,a,o,d){return this.filtered.every(r,i,a,o,d)}filter(r){return this.filtered.filter(r)}forEach(r,i,a,o,d){return this.filtered.forEach(r,i,a,o,d)}import(r){return this.filtered.import(r)}intersection(r){return this.filtered.intersection(r)}map(r){return this.filtered.map(r)}some(r,i,a,o,d){return this.filtered.some(r,i,a,o,d)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(r){return this._filtered?this._filtered.union(r):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(r)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(r,i){return this.filtered.reduce(r,i)}toString(){return new _g().quadsToString(this)}add(r){return this.filtered.add(r)}delete(r){return this.filtered.delete(r)}has(r){return this.filtered.has(r)}match(r,i,a,o){return new Nu(this.filtered,r,i,a,o,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class e1{dataset(r){return new la(r)}}function t1(e){const r=[];for(const{subject:i,object:a}of e.match(null,Jo.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,Jo.defaultGraph())){const o=[...e.match(null,null,null,i)],d=[...e.match(null,null,null,a)];r.push({premise:o,conclusion:d})}return r}class r1{constructor(r){this._store=r}_add(r,i,a,o,d){this._store._addToIndex(o.subjects,r,i,a)&&(this._store._addToIndex(o.predicates,i,a,r),this._store._addToIndex(o.objects,a,r,i),d())}_evaluatePremise(r,i,a,o=0){let d,l,u,h,f;const[y,b,_]=r.premise[o].value,A=i[r.premise[o].content],T=!(u=y.value);for(u in T?A:{[u]:A[u]})if(h=A[u]){T&&(y.value=Number(u)),d=!(u=b.value);for(u in d?h:{[u]:h[u]})if(f=h[u]){d&&(b.value=Number(u)),l=!(u=_.value);for(u in l?f:{[u]:f[u]})l&&(_.value=Number(u)),o===r.premise.length-1?r.conclusion.forEach(x=>{this._add(x.subject.value,x.predicate.value,x.object.value,i,()=>{a(x)})}):this._evaluatePremise(r,i,a,o+1);l&&(_.value=null)}d&&(b.value=null)}T&&(y.value=null)}_evaluateRules(r,i,a){for(let o=0;o<r.length;o++)this._evaluatePremise(r[o],i,a)}_reasonGraphNaive(r,i){const a=[];function o(u){u.next&&u.next.forEach(h=>{a.push([u.subject.value,u.predicate.value,u.object.value,h])})}const d=u=>{u.forEach(h=>{this._add(h.subject.value,h.predicate.value,h.object.value,i,()=>{o(h)})})};this._evaluateRules(r,i,o);let l;for(;(l=a.pop())!==void 0;){const[u,h,f,y]=l,b=y.basePremise.subject.value;b||(y.basePremise.subject.value=u);const _=y.basePremise.predicate.value;_||(y.basePremise.predicate.value=h);const A=y.basePremise.object.value;A||(y.basePremise.object.value=f),y.premise.length===0?d(y.conclusion):this._evaluatePremise(y,i,o),b||(y.basePremise.subject.value=null),_||(y.basePremise.predicate.value=null),A||(y.basePremise.object.value=null)}}_createRule({premise:r,conclusion:i}){const a={},o=l=>l.termType==="Variable"?a[l.value]=a[l.value]||{}:{value:this._store._termToNewNumericId(l)},d=l=>({subject:o(l.subject),predicate:o(l.predicate),object:o(l.object)});return{premise:r.map(l=>d(l)),conclusion:i.map(l=>d(l)),variables:Object.values(a)}}reason(r){Array.isArray(r)||(r=t1(r)),r=r.map(a=>this._createRule(a));for(const a of r)for(const o of r)for(let d=0;d<o.premise.length;d++){const l=o.premise[d];for(const u of a.conclusion){if(k0(l.subject,u.subject)&&k0(l.predicate,u.predicate)&&k0(l.object,u.object)){const h=new Set,f=[];l.subject.value=l.subject.value||1,l.object.value=l.object.value||1,l.predicate.value=l.predicate.value||1;for(let y=0;y<o.premise.length;y++)y!==d&&f.push(X_(o.premise[y],h));(u.next=u.next||[]).push({premise:f,conclusion:o.conclusion,basePremise:l})}o.variables.forEach(h=>{h.value=null})}}for(const a of r){const o=new Set;a.premise=a.premise.map(d=>X_(d,o))}const i=this._store._getGraphs();for(const a in i)this._reasonGraphNaive(r,i[a]);this._store._size=null}}function X_({subject:e,predicate:r,object:i},a){const o=e.value||a.has(e)||(a.add(e),!1),d=r.value||a.has(r)||(a.add(r),!1),l=i.value||a.has(i)||(a.add(i),!1);return!o&&d?{content:"predicates",value:[r,i,e]}:l?{content:"objects",value:[i,e,r]}:{content:"subjects",value:[e,r,i]}}function k0(e,r){return e.value===null&&(e.value=r.value),e.value===r.value}class n1 extends cm.Transform{constructor(r){super({decodeStrings:!0}),this._readableState.objectMode=!0;const i=new um(r);let a,o;const d={onQuad:(l,u)=>{l&&this.emit("error",l)||u&&this.push(u)},onPrefix:(l,u)=>{this.emit("prefix",l,u)}};r&&r.comments&&(d.onComment=l=>{this.emit("comment",l)}),i.parse({on:(l,u)=>{switch(l){case"data":a=u;break;case"end":o=u;break}}},d),this._transform=(l,u,h)=>{a(l),h()},this._flush=l=>{o(),l()}}import(r){return r.on("data",i=>{this.write(i)}),r.on("end",()=>{this.end()}),r.on("error",i=>{this.emit("error",i)}),this}}class i1 extends cm.Transform{constructor(r){super({encoding:"utf8",writableObjectMode:!0});const i=this._writer=new _g({write:(a,o,d)=>{this.push(a),d&&d()},end:a=>{this.push(null),a&&a()}},r);this._transform=(a,o,d)=>{i.addQuad(a,d)},this._flush=a=>{i.end(a)}}import(r){return r.on("data",i=>{this.write(i)}),r.on("end",()=>{this.end()}),r.on("error",i=>{this.emit("error",i)}),r.on("prefix",(i,a)=>{this._writer.addPrefix(i,a)}),this}}const dT={Lexer:Xv,Parser:um,Writer:_g,Store:la,StoreFactory:e1,EntityIndex:rb,StreamParser:n1,StreamWriter:i1,Util:QE,Reasoner:r1,BaseIRI:wg,DataFactory:Jo,Term:uo,NamedNode:lm,Literal:ku,BlankNode:Zv,Variable:eb,DefaultGraph:tb,Quad:Pd,Triple:Pd,termFromId:df,termToId:Du},hT=Object.freeze(Object.defineProperty({__proto__:null,BaseIRI:wg,BlankNode:Zv,DataFactory:Jo,DefaultGraph:tb,EntityIndex:rb,Lexer:Xv,Literal:ku,NamedNode:lm,Parser:um,Quad:Pd,Reasoner:r1,Store:la,StoreFactory:e1,StreamParser:n1,StreamWriter:i1,Term:uo,Triple:Pd,Util:QE,Variable:eb,Writer:_g,default:dT,getRulesFromDataset:t1,termFromId:df,termToId:Du},Symbol.toStringTag,{value:"Module"})),pT=nm(hT);var B0,Z_;function gT(){if(Z_)return B0;Z_=1;class e{constructor(i){this.value=i||"b"+ ++e.nextId}equals(i){return!!i&&i.termType===this.termType&&i.value===this.value}}return e.prototype.termType="BlankNode",e.nextId=0,B0=e,B0}var H0,eS;function a1(){if(eS)return H0;eS=1;class e{equals(i){return!!i&&i.termType===this.termType}}return e.prototype.termType="DefaultGraph",e.prototype.value="",H0=e,H0}var j0,tS;function yT(){if(tS)return j0;tS=1;function e(r){if(!r)return null;if(r.termType==="BlankNode")return this.blankNode(r.value);if(r.termType==="DefaultGraph")return this.defaultGraph();if(r.termType==="Literal")return this.literal(r.value,r.language||this.namedNode(r.datatype.value));if(r.termType==="NamedNode")return this.namedNode(r.value);if(r.termType==="Quad"){const i=this.fromTerm(r.subject),a=this.fromTerm(r.predicate),o=this.fromTerm(r.object),d=this.fromTerm(r.graph);return this.quad(i,a,o,d)}if(r.termType==="Variable")return this.variable(r.value);throw new Error(`unknown termType ${r.termType}`)}return j0=e,j0}var V0,rS;function o1(){if(rS)return V0;rS=1;class e{constructor(i){this.value=i}equals(i){return!!i&&i.termType===this.termType&&i.value===this.value}}return e.prototype.termType="NamedNode",V0=e,V0}var $0,nS;function mT(){if(nS)return $0;nS=1;const e=o1();class r{constructor(a,o,d){this.value=a,this.datatype=r.stringDatatype,this.language="",o?(this.language=o,this.datatype=r.langStringDatatype):d&&(this.datatype=d)}equals(a){return!!a&&a.termType===this.termType&&a.value===this.value&&a.language===this.language&&a.datatype.equals(this.datatype)}}return r.prototype.termType="Literal",r.langStringDatatype=new e("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.stringDatatype=new e("http://www.w3.org/2001/XMLSchema#string"),$0=r,$0}var K0,iS;function vT(){if(iS)return K0;iS=1;const e=a1();class r{constructor(a,o,d,l){this.subject=a,this.predicate=o,this.object=d,l?this.graph=l:this.graph=new e}equals(a){return!!a&&(a.termType==="Quad"||!a.termType)&&a.subject.equals(this.subject)&&a.predicate.equals(this.predicate)&&a.object.equals(this.object)&&a.graph.equals(this.graph)}}return r.prototype.termType="Quad",r.prototype.value="",K0=r,K0}var G0,aS;function bT(){if(aS)return G0;aS=1;class e{constructor(i){this.value=i}equals(i){return!!i&&i.termType===this.termType&&i.value===this.value}}return e.prototype.termType="Variable",G0=e,G0}var q0,oS;function wT(){if(oS)return q0;oS=1;const e=gT(),r=a1(),i=yT(),a=mT(),o=o1(),d=vT(),l=bT();function u(R){return new o(R)}function h(R){return new e(R)}function f(R,F){return typeof F=="string"?F.indexOf(":")===-1?new a(R,F):new a(R,null,O.namedNode(F)):new a(R,null,F)}function y(R){return new l(R)}function b(){return O.defaultGraphInstance}function _(R,F,P){return O.quad(R,F,P)}function A(R,F,P,K){return new d(R,F,P,K||O.defaultGraphInstance)}function T(R){return i.call(O,R)}function x(R){return i.call(O,R)}const O={namedNode:u,blankNode:h,literal:f,variable:y,defaultGraph:b,triple:_,quad:A,fromTerm:T,fromQuad:x,defaultGraphInstance:new r};return q0=O,q0}var z0,sS;function s1(){return sS||(sS=1,z0=wT()),z0}var W0,lS;function _T(){if(lS)return W0;lS=1;function e(l){return typeof l=="string"||l instanceof String}const r="http://www.w3.org/2001/XMLSchema#string";function i(l){if(typeof l=="string")return l;if(!l)return"";if(typeof l.id<"u"&&l.termType!=="Quad")return l.id;let u,h,f,y;switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return`_:${l.value}`;case"Variable":return`?${l.value}`;case"DefaultGraph":return"";case"Literal":return l.language?`"${l.value}"@${l.language}`:`"${l.value}"${l.datatype&&l.datatype.value!==r?`^^${l.datatype.value}`:""}`;case"Quad":return u=o(i(l.subject)),h=o(i(l.predicate)),f=o(i(l.object)),y=l.graph.termType==="DefaultGraph"?"":` ${i(l.graph)}`,`<<${u} ${h} ${f}${y}>>`;default:throw new Error(`Unexpected termType: ${l.termType}`)}}const a=/^"(.*".*)(?="[^"]*$)/;function o(l){return l.replace(a,(u,h)=>`"${h.replace(/"/g,'""')}`)}class d{constructor(u){if(this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._quads=new Map,u)for(const h of u)this.add(h)}get size(){let u=this._size;if(u!==null)return u;u=0;const h=this._graphs;let f,y;for(const b in h)for(const _ in f=h[b].subjects)for(const A in y=f[_])u+=Object.keys(y[A]).length;return this._size=u,this._size}add(u){let h=i(u.subject),f=i(u.predicate),y=i(u.object);const b=i(u.graph);let _=this._graphs[b];_||(_=this._graphs[b]={subjects:{},predicates:{},objects:{}},Object.freeze(_));const A=this._ids,T=this._entities;return h=A[h]||(A[T[++this._id]=h]=this._id),f=A[f]||(A[T[++this._id]=f]=this._id),y=A[y]||(A[T[++this._id]=y]=this._id),this._addToIndex(_.subjects,h,f,y),this._addToIndex(_.predicates,f,y,h),this._addToIndex(_.objects,y,h,f),this._setQuad(h,f,y,b,u),this._size=null,this}delete(u){let h=i(u.subject),f=i(u.predicate),y=i(u.object);const b=i(u.graph),_=this._ids,A=this._graphs;let T,x,O;if(!(h=_[h])||!(f=_[f])||!(y=_[y])||!(T=A[b])||!(x=T.subjects[h])||!(O=x[f])||!(y in O))return this;this._removeFromIndex(T.subjects,h,f,y),this._removeFromIndex(T.predicates,f,y,h),this._removeFromIndex(T.objects,y,h,f),this._size!==null&&this._size--,this._deleteQuad(h,f,y,b);for(h in T.subjects)return this;return delete A[b],this}has(u){const h=i(u.subject),f=i(u.predicate),y=i(u.object),b=i(u.graph),_=this._graphs[b];if(!_)return!1;const A=this._ids;let T,x,O;return e(h)&&!(T=A[h])||e(f)&&!(x=A[f])||e(y)&&!(O=A[y])?!1:this._countInIndex(_.objects,O,T,x)===1}match(u,h,f,y){return this._createDataset(this._match(u,h,f,y))}[Symbol.iterator](){return this._match()[Symbol.iterator]()}_addToIndex(u,h,f,y){const b=u[h]||(u[h]={}),_=b[f]||(b[f]={}),A=y in _;return A||(_[y]=null),!A}_removeFromIndex(u,h,f,y){const b=u[h],_=b[f];delete _[y];for(const A in _)return;delete b[f];for(const A in b)return;delete u[h]}_findInIndex(u,h,f,y,b,_,A,T,x,O){let R,F,P;h&&((R=u,u={})[h]=R[h]);for(const K in u)if(F=u[K],F){f&&((R=F,F={})[f]=R[f]);for(const B in F)if(P=F[B],P){const W=y?y in P?[y]:[]:Object.keys(P);for(let Y=0;Y<W.length;Y++){const q={[b]:K,[_]:B,[A]:W[Y]},Pe=this._getQuad(q.subject,q.predicate,q.object,T);if(O)O.push(Pe);else if(x(Pe))return!0}}}return O}_countInIndex(u,h,f,y){let b=0,_,A,T;h&&((_=u,u={})[h]=_[h]);for(const x in u)if(A=u[x],A){f&&((_=A,A={})[f]=_[f]);for(const O in A)T=A[O],T&&(y?y in T&&b++:b+=Object.keys(T).length)}return b}_getGraphs(u){return e(u)?{[u]:this._graphs[u]}:this._graphs}_match(u,h,f,y){u=u&&i(u),h=h&&i(h),f=f&&i(f),y=y&&i(y);const b=[],_=this._getGraphs(y),A=this._ids;let T,x,O,R;if(e(u)&&!(x=A[u])||e(h)&&!(O=A[h])||e(f)&&!(R=A[f]))return b;for(const F in _)T=_[F],T&&(x?R?this._findInIndex(T.objects,R,x,O,"object","subject","predicate",F,null,b):this._findInIndex(T.subjects,x,O,null,"subject","predicate","object",F,null,b):O?this._findInIndex(T.predicates,O,R,null,"predicate","object","subject",F,null,b):R?this._findInIndex(T.objects,R,null,null,"object","subject","predicate",F,null,b):this._findInIndex(T.subjects,null,null,null,"subject","predicate","object",F,null,b));return b}_getQuad(u,h,f,y){return this._quads.get(this._toId(u,h,f,y))}_setQuad(u,h,f,y,b){this._quads.set(this._toId(u,h,f,y),b)}_deleteQuad(u,h,f,y){this._quads.delete(this._toId(u,h,f,y))}_createDataset(u){return new this.constructor(u)}_toId(u,h,f,y){return`${u}:${h}:${f}:${y}`}}return W0=d,W0}var J0,uS;function ST(){if(uS)return J0;uS=1;const e=s1(),r=_T();function i(a){return new r(a)}return J0=Object.assign({dataset:i},e),J0}var Y0={},Vp={},Iy={},cS;function l1(){if(cS)return Iy;cS=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.default=i;let e;const r=new Uint8Array(16);function i(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(r)}return Iy}var Td={},$p={},Kp={},fS;function ET(){if(fS)return Kp;fS=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return Kp.default=e,Kp}var dS;function fm(){if(dS)return $p;dS=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.default=void 0;var e=r(ET());function r(o){return o&&o.__esModule?o:{default:o}}function i(o){return typeof o=="string"&&e.default.test(o)}var a=i;return $p.default=a,$p}var hS;function dm(){if(hS)return Td;hS=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.default=void 0,Td.unsafeStringify=a;var e=r(fm());function r(l){return l&&l.__esModule?l:{default:l}}const i=[];for(let l=0;l<256;++l)i.push((l+256).toString(16).slice(1));function a(l,u=0){return i[l[u+0]]+i[l[u+1]]+i[l[u+2]]+i[l[u+3]]+"-"+i[l[u+4]]+i[l[u+5]]+"-"+i[l[u+6]]+i[l[u+7]]+"-"+i[l[u+8]]+i[l[u+9]]+"-"+i[l[u+10]]+i[l[u+11]]+i[l[u+12]]+i[l[u+13]]+i[l[u+14]]+i[l[u+15]]}function o(l,u=0){const h=a(l,u);if(!(0,e.default)(h))throw TypeError("Stringified UUID is invalid");return h}var d=o;return Td.default=d,Td}var pS;function AT(){if(pS)return Vp;pS=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.default=void 0;var e=i(l1()),r=dm();function i(f){return f&&f.__esModule?f:{default:f}}let a,o,d=0,l=0;function u(f,y,b){let _=y&&b||0;const A=y||new Array(16);f=f||{};let T=f.node||a,x=f.clockseq!==void 0?f.clockseq:o;if(T==null||x==null){const B=f.random||(f.rng||e.default)();T==null&&(T=a=[B[0]|1,B[1],B[2],B[3],B[4],B[5]]),x==null&&(x=o=(B[6]<<8|B[7])&16383)}let O=f.msecs!==void 0?f.msecs:Date.now(),R=f.nsecs!==void 0?f.nsecs:l+1;const F=O-d+(R-l)/1e4;if(F<0&&f.clockseq===void 0&&(x=x+1&16383),(F<0||O>d)&&f.nsecs===void 0&&(R=0),R>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=O,l=R,o=x,O+=122192928e5;const P=((O&268435455)*1e4+R)%4294967296;A[_++]=P>>>24&255,A[_++]=P>>>16&255,A[_++]=P>>>8&255,A[_++]=P&255;const K=O/4294967296*1e4&268435455;A[_++]=K>>>8&255,A[_++]=K&255,A[_++]=K>>>24&15|16,A[_++]=K>>>16&255,A[_++]=x>>>8|128,A[_++]=x&255;for(let B=0;B<6;++B)A[_+B]=T[B];return y||(0,r.unsafeStringify)(A)}var h=u;return Vp.default=h,Vp}var Gp={},Cu={},qp={},gS;function u1(){if(gS)return qp;gS=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.default=void 0;var e=r(fm());function r(o){return o&&o.__esModule?o:{default:o}}function i(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");let d;const l=new Uint8Array(16);return l[0]=(d=parseInt(o.slice(0,8),16))>>>24,l[1]=d>>>16&255,l[2]=d>>>8&255,l[3]=d&255,l[4]=(d=parseInt(o.slice(9,13),16))>>>8,l[5]=d&255,l[6]=(d=parseInt(o.slice(14,18),16))>>>8,l[7]=d&255,l[8]=(d=parseInt(o.slice(19,23),16))>>>8,l[9]=d&255,l[10]=(d=parseInt(o.slice(24,36),16))/1099511627776&255,l[11]=d/4294967296&255,l[12]=d>>>24&255,l[13]=d>>>16&255,l[14]=d>>>8&255,l[15]=d&255,l}var a=i;return qp.default=a,qp}var yS;function c1(){if(yS)return Cu;yS=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.URL=Cu.DNS=void 0,Cu.default=l;var e=dm(),r=i(u1());function i(u){return u&&u.__esModule?u:{default:u}}function a(u){u=unescape(encodeURIComponent(u));const h=[];for(let f=0;f<u.length;++f)h.push(u.charCodeAt(f));return h}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Cu.DNS=o;const d="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Cu.URL=d;function l(u,h,f){function y(b,_,A,T){var x;if(typeof b=="string"&&(b=a(b)),typeof _=="string"&&(_=(0,r.default)(_)),((x=_)===null||x===void 0?void 0:x.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let O=new Uint8Array(16+b.length);if(O.set(_),O.set(b,_.length),O=f(O),O[6]=O[6]&15|h,O[8]=O[8]&63|128,A){T=T||0;for(let R=0;R<16;++R)A[T+R]=O[R];return A}return(0,e.unsafeStringify)(O)}try{y.name=u}catch{}return y.DNS=o,y.URL=d,y}return Cu}var zp={},mS;function RT(){if(mS)return zp;mS=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.default=void 0;function e(A){if(typeof A=="string"){const T=unescape(encodeURIComponent(A));A=new Uint8Array(T.length);for(let x=0;x<T.length;++x)A[x]=T.charCodeAt(x)}return r(a(o(A),A.length*8))}function r(A){const T=[],x=A.length*32,O="0123456789abcdef";for(let R=0;R<x;R+=8){const F=A[R>>5]>>>R%32&255,P=parseInt(O.charAt(F>>>4&15)+O.charAt(F&15),16);T.push(P)}return T}function i(A){return(A+64>>>9<<4)+14+1}function a(A,T){A[T>>5]|=128<<T%32,A[i(T)-1]=T;let x=1732584193,O=-271733879,R=-1732584194,F=271733878;for(let P=0;P<A.length;P+=16){const K=x,B=O,W=R,Y=F;x=h(x,O,R,F,A[P],7,-680876936),F=h(F,x,O,R,A[P+1],12,-389564586),R=h(R,F,x,O,A[P+2],17,606105819),O=h(O,R,F,x,A[P+3],22,-1044525330),x=h(x,O,R,F,A[P+4],7,-176418897),F=h(F,x,O,R,A[P+5],12,1200080426),R=h(R,F,x,O,A[P+6],17,-1473231341),O=h(O,R,F,x,A[P+7],22,-45705983),x=h(x,O,R,F,A[P+8],7,1770035416),F=h(F,x,O,R,A[P+9],12,-1958414417),R=h(R,F,x,O,A[P+10],17,-42063),O=h(O,R,F,x,A[P+11],22,-1990404162),x=h(x,O,R,F,A[P+12],7,1804603682),F=h(F,x,O,R,A[P+13],12,-40341101),R=h(R,F,x,O,A[P+14],17,-1502002290),O=h(O,R,F,x,A[P+15],22,1236535329),x=f(x,O,R,F,A[P+1],5,-165796510),F=f(F,x,O,R,A[P+6],9,-1069501632),R=f(R,F,x,O,A[P+11],14,643717713),O=f(O,R,F,x,A[P],20,-373897302),x=f(x,O,R,F,A[P+5],5,-701558691),F=f(F,x,O,R,A[P+10],9,38016083),R=f(R,F,x,O,A[P+15],14,-660478335),O=f(O,R,F,x,A[P+4],20,-405537848),x=f(x,O,R,F,A[P+9],5,568446438),F=f(F,x,O,R,A[P+14],9,-1019803690),R=f(R,F,x,O,A[P+3],14,-187363961),O=f(O,R,F,x,A[P+8],20,1163531501),x=f(x,O,R,F,A[P+13],5,-1444681467),F=f(F,x,O,R,A[P+2],9,-51403784),R=f(R,F,x,O,A[P+7],14,1735328473),O=f(O,R,F,x,A[P+12],20,-1926607734),x=y(x,O,R,F,A[P+5],4,-378558),F=y(F,x,O,R,A[P+8],11,-2022574463),R=y(R,F,x,O,A[P+11],16,1839030562),O=y(O,R,F,x,A[P+14],23,-35309556),x=y(x,O,R,F,A[P+1],4,-1530992060),F=y(F,x,O,R,A[P+4],11,1272893353),R=y(R,F,x,O,A[P+7],16,-155497632),O=y(O,R,F,x,A[P+10],23,-1094730640),x=y(x,O,R,F,A[P+13],4,681279174),F=y(F,x,O,R,A[P],11,-358537222),R=y(R,F,x,O,A[P+3],16,-722521979),O=y(O,R,F,x,A[P+6],23,76029189),x=y(x,O,R,F,A[P+9],4,-640364487),F=y(F,x,O,R,A[P+12],11,-421815835),R=y(R,F,x,O,A[P+15],16,530742520),O=y(O,R,F,x,A[P+2],23,-995338651),x=b(x,O,R,F,A[P],6,-198630844),F=b(F,x,O,R,A[P+7],10,1126891415),R=b(R,F,x,O,A[P+14],15,-1416354905),O=b(O,R,F,x,A[P+5],21,-57434055),x=b(x,O,R,F,A[P+12],6,1700485571),F=b(F,x,O,R,A[P+3],10,-1894986606),R=b(R,F,x,O,A[P+10],15,-1051523),O=b(O,R,F,x,A[P+1],21,-2054922799),x=b(x,O,R,F,A[P+8],6,1873313359),F=b(F,x,O,R,A[P+15],10,-30611744),R=b(R,F,x,O,A[P+6],15,-1560198380),O=b(O,R,F,x,A[P+13],21,1309151649),x=b(x,O,R,F,A[P+4],6,-145523070),F=b(F,x,O,R,A[P+11],10,-1120210379),R=b(R,F,x,O,A[P+2],15,718787259),O=b(O,R,F,x,A[P+9],21,-343485551),x=d(x,K),O=d(O,B),R=d(R,W),F=d(F,Y)}return[x,O,R,F]}function o(A){if(A.length===0)return[];const T=A.length*8,x=new Uint32Array(i(T));for(let O=0;O<T;O+=8)x[O>>5]|=(A[O/8]&255)<<O%32;return x}function d(A,T){const x=(A&65535)+(T&65535);return(A>>16)+(T>>16)+(x>>16)<<16|x&65535}function l(A,T){return A<<T|A>>>32-T}function u(A,T,x,O,R,F){return d(l(d(d(T,A),d(O,F)),R),x)}function h(A,T,x,O,R,F,P){return u(T&x|~T&O,A,T,R,F,P)}function f(A,T,x,O,R,F,P){return u(T&O|x&~O,A,T,R,F,P)}function y(A,T,x,O,R,F,P){return u(T^x^O,A,T,R,F,P)}function b(A,T,x,O,R,F,P){return u(x^(T|~O),A,T,R,F,P)}var _=e;return zp.default=_,zp}var vS;function xT(){if(vS)return Gp;vS=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.default=void 0;var e=i(c1()),r=i(RT());function i(d){return d&&d.__esModule?d:{default:d}}var o=(0,e.default)("v3",48,r.default);return Gp.default=o,Gp}var Wp={},Jp={},bS;function TT(){if(bS)return Jp;bS=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.default=void 0;var r={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Jp.default=r,Jp}var wS;function CT(){if(wS)return Wp;wS=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.default=void 0;var e=a(TT()),r=a(l1()),i=dm();function a(l){return l&&l.__esModule?l:{default:l}}function o(l,u,h){if(e.default.randomUUID&&!u&&!l)return e.default.randomUUID();l=l||{};const f=l.random||(l.rng||r.default)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,u){h=h||0;for(let y=0;y<16;++y)u[h+y]=f[y];return u}return(0,i.unsafeStringify)(f)}var d=o;return Wp.default=d,Wp}var Yp={},Qp={},_S;function OT(){if(_S)return Qp;_S=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.default=void 0;function e(o,d,l,u){switch(o){case 0:return d&l^~d&u;case 1:return d^l^u;case 2:return d&l^d&u^l&u;case 3:return d^l^u}}function r(o,d){return o<<d|o>>>32-d}function i(o){const d=[1518500249,1859775393,2400959708,3395469782],l=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof o=="string"){const y=unescape(encodeURIComponent(o));o=[];for(let b=0;b<y.length;++b)o.push(y.charCodeAt(b))}else Array.isArray(o)||(o=Array.prototype.slice.call(o));o.push(128);const u=o.length/4+2,h=Math.ceil(u/16),f=new Array(h);for(let y=0;y<h;++y){const b=new Uint32Array(16);for(let _=0;_<16;++_)b[_]=o[y*64+_*4]<<24|o[y*64+_*4+1]<<16|o[y*64+_*4+2]<<8|o[y*64+_*4+3];f[y]=b}f[h-1][14]=(o.length-1)*8/Math.pow(2,32),f[h-1][14]=Math.floor(f[h-1][14]),f[h-1][15]=(o.length-1)*8&4294967295;for(let y=0;y<h;++y){const b=new Uint32Array(80);for(let R=0;R<16;++R)b[R]=f[y][R];for(let R=16;R<80;++R)b[R]=r(b[R-3]^b[R-8]^b[R-14]^b[R-16],1);let _=l[0],A=l[1],T=l[2],x=l[3],O=l[4];for(let R=0;R<80;++R){const F=Math.floor(R/20),P=r(_,5)+e(F,A,T,x)+O+d[F]+b[R]>>>0;O=x,x=T,T=r(A,30)>>>0,A=_,_=P}l[0]=l[0]+_>>>0,l[1]=l[1]+A>>>0,l[2]=l[2]+T>>>0,l[3]=l[3]+x>>>0,l[4]=l[4]+O>>>0}return[l[0]>>24&255,l[0]>>16&255,l[0]>>8&255,l[0]&255,l[1]>>24&255,l[1]>>16&255,l[1]>>8&255,l[1]&255,l[2]>>24&255,l[2]>>16&255,l[2]>>8&255,l[2]&255,l[3]>>24&255,l[3]>>16&255,l[3]>>8&255,l[3]&255,l[4]>>24&255,l[4]>>16&255,l[4]>>8&255,l[4]&255]}var a=i;return Qp.default=a,Qp}var SS;function IT(){if(SS)return Yp;SS=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.default=void 0;var e=i(c1()),r=i(OT());function i(d){return d&&d.__esModule?d:{default:d}}var o=(0,e.default)("v5",80,r.default);return Yp.default=o,Yp}var Xp={},ES;function PT(){if(ES)return Xp;ES=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.default=void 0;var e="00000000-0000-0000-0000-000000000000";return Xp.default=e,Xp}var Zp={},AS;function NT(){if(AS)return Zp;AS=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.default=void 0;var e=r(fm());function r(o){return o&&o.__esModule?o:{default:o}}function i(o){if(!(0,e.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}var a=i;return Zp.default=a,Zp}var RS;function nb(){return RS||(RS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return l.default}});var r=y(AT()),i=y(xT()),a=y(CT()),o=y(IT()),d=y(PT()),l=y(NT()),u=y(fm()),h=y(dm()),f=y(u1());function y(b){return b&&b.__esModule?b:{default:b}}}(Y0)),Y0}var xS;function FT(){if(xS)return nt;xS=1;var e=Gx(),r=Ra(),i=Qv(),a=Gv(),o=pT,d=s1(),l=ST(),u=nb();function h(c){const g=c;return typeof g=="object"&&typeof g.internal_resourceInfo=="object"}function f(c){const g=c;return typeof g=="object"&&typeof g.internal_resourceInfo=="object"&&typeof g.internal_resourceInfo.linkedResources=="object"}function y(c){const g=c;return typeof g.internal_changeLog=="object"&&Array.isArray(g.internal_changeLog.additions)&&Array.isArray(g.internal_changeLog.deletions)}class b extends Error{}function _(c){return typeof c=="string"?c:c.value}const A=i.fetch.bind(globalThis);function T(c){var g,w,I,L,z;const ee=(w=(g=c.headers.get("Content-Type"))===null||g===void 0?void 0:g.split(";"))!==null&&w!==void 0?w:[],de=ee.length>0&&["text/turtle","application/ld+json"].includes(ee[0]),ke={sourceIri:c.url,isRawData:!de,contentLocation:(I=c.headers.get("Content-Location"))!==null&&I!==void 0?I:void 0,contentType:(L=c.headers.get("Content-Type"))!==null&&L!==void 0?L:void 0,linkedResources:{},location:(z=c.headers.get("Location"))!==null&&z!==void 0?z:void 0},Ve=c.headers.get("Link");if(Ve){const Mt=a.parse(Ve),Kt=Mt.get("rel","acl");Kt.length===1&&(ke.aclUrl=new URL(Kt[0].uri,ke.sourceIri).href),ke.linkedResources=Mt.refs.reduce((nr,Pr)=>{var un,Jr;return(un=nr[Jr=Pr.rel])!==null&&un!==void 0||(nr[Jr]=[]),nr[Pr.rel].push(new URL(Pr.uri,ke.sourceIri).href),nr},ke.linkedResources)}const Ye=c.headers.get("WAC-Allow");return Ye&&(ke.permissions=x(Ye)),ke}function x(c){function g(I){const L=I.split(" ");return L.includes("write")?{read:L.includes("read"),append:!0,write:!0,control:L.includes("control")}:{read:L.includes("read"),append:L.includes("append"),write:!1,control:L.includes("control")}}function w(I,L){const z=I.split(",").map(de=>de.split("=")).filter(de=>de.length===2&&de[0].trim()===L);if(z.length!==1)return"";const ee=z[0][1].trim();return ee.charAt(0)!=='"'||ee.charAt(ee.length-1)!=='"'?"":ee.substring(1,ee.length-1)}return{user:g(w(c,"user")),public:g(w(c,"public"))}}function O(c){let g;return typeof c.slice=="function"?g=Object.assign(c.slice(),{...c}):g={...c},g}function R(c){return!c.ok}function F(c){return c.status===401||c.status===403}const P={Authorization:"http://www.w3.org/ns/auth/acl#Authorization",accessTo:"http://www.w3.org/ns/auth/acl#accessTo",agent:"http://www.w3.org/ns/auth/acl#agent",agentGroup:"http://www.w3.org/ns/auth/acl#agentGroup",agentClass:"http://www.w3.org/ns/auth/acl#agentClass",default:"http://www.w3.org/ns/auth/acl#default",defaultForNew:"http://www.w3.org/ns/auth/acl#defaultForNew",mode:"http://www.w3.org/ns/auth/acl#mode",origin:"http://www.w3.org/ns/auth/acl#origin"},K={type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},B={seeAlso:"http://www.w3.org/2000/01/rdf-schema#seeAlso"},W={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},Y={Agent:"http://xmlns.com/foaf/0.1/Agent",primaryTopic:"http://xmlns.com/foaf/0.1/primaryTopic",isPrimaryTopicOf:"http://xmlns.com/foaf/0.1/isPrimaryTopicOf"},q={AccessControlResource:"http://www.w3.org/ns/solid/acp#AccessControlResource",Policy:"http://www.w3.org/ns/solid/acp#Policy",AccessControl:"http://www.w3.org/ns/solid/acp#AccessControl",Read:"http://www.w3.org/ns/solid/acp#Read",Append:"http://www.w3.org/ns/solid/acp#Append",Write:"http://www.w3.org/ns/solid/acp#Write",Rule:"http://www.w3.org/ns/solid/acp#Rule",Matcher:"http://www.w3.org/ns/solid/acp#Matcher",accessControl:"http://www.w3.org/ns/solid/acp#accessControl",apply:"http://www.w3.org/ns/solid/acp#apply",applyMembers:"http://www.w3.org/ns/solid/acp#applyMembers",allow:"http://www.w3.org/ns/solid/acp#allow",deny:"http://www.w3.org/ns/solid/acp#deny",allOf:"http://www.w3.org/ns/solid/acp#allOf",anyOf:"http://www.w3.org/ns/solid/acp#anyOf",noneOf:"http://www.w3.org/ns/solid/acp#noneOf",access:"http://www.w3.org/ns/solid/acp#access",accessMembers:"http://www.w3.org/ns/solid/acp#accessMembers",agent:"http://www.w3.org/ns/solid/acp#agent",group:"http://www.w3.org/ns/solid/acp#group",client:"http://www.w3.org/ns/solid/acp#client",PublicAgent:"http://www.w3.org/ns/solid/acp#PublicAgent",AuthenticatedAgent:"http://www.w3.org/ns/solid/acp#AuthenticatedAgent",CreatorAgent:"http://www.w3.org/ns/solid/acp#CreatorAgent"},Pe={PublicOidcClient:"http://www.w3.org/ns/solid/terms#PublicOidcClient"},$={publicKey:"https://w3id.org/security#publicKey"},ie={storage:"http://www.w3.org/ns/pim/space#storage"},ge={fetch:A};async function Se(c,g={...ge,ignoreAuthenticationErrors:!1}){var w;const L=await{...ge,...g}.fetch(c,{method:"HEAD"});return tt(L,{ignoreAuthenticationErrors:(w=g.ignoreAuthenticationErrors)!==null&&w!==void 0?w:!1})}function tt(c,g={ignoreAuthenticationErrors:!1}){if(R(c)&&(!F(c)||!g.ignoreAuthenticationErrors))throw new ht(`Fetching the metadata of the Resource at [${c.url}] failed: [${c.status}] [${c.statusText}].`,c);return{internal_resourceInfo:T(c)}}function lt(c){return(h(c)?ve(c):_(c)).endsWith("/")}function Ne(c){return c.internal_resourceInfo.isRawData}function yt(c){var g;return(g=c.internal_resourceInfo.contentType)!==null&&g!==void 0?g:null}function ve(c){return h(c)?c.internal_resourceInfo.sourceIri:null}const rt=ve;function J(c){var g;if(!f(c))return null;const w=(g=Ze(c)["http://www.w3.org/ns/solid/terms#podOwner"])!==null&&g!==void 0?g:[];return w.length===1?w[0]:null}function xe(c,g){const w=J(g);return typeof w!="string"?null:w===c}function Ze(c){return c.internal_resourceInfo.linkedResources}function je(c){var g,w,I,L,z,ee,de;if(typeof c.internal_resourceInfo.permissions=="object")return{user:{read:c.internal_resourceInfo.permissions.user.read,append:c.internal_resourceInfo.permissions.user.append,write:c.internal_resourceInfo.permissions.user.write},public:{read:c.internal_resourceInfo.permissions.public.read,append:c.internal_resourceInfo.permissions.public.append,write:c.internal_resourceInfo.permissions.public.write}};const ke=Ze(c);return{user:{read:(w=(g=ke[q.allow])===null||g===void 0?void 0:g.includes(q.Read))!==null&&w!==void 0?w:!1,append:(z=((I=ke[q.allow])===null||I===void 0?void 0:I.includes(q.Append))||((L=ke[q.allow])===null||L===void 0?void 0:L.includes(q.Write)))!==null&&z!==void 0?z:!1,write:(de=(ee=ke[q.allow])===null||ee===void 0?void 0:ee.includes(q.Write))!==null&&de!==void 0?de:!1}}}class ht extends b{get statusCode(){return this.response.status}get statusText(){return this.response.statusText}constructor(g,w){super(g),this.response=w}}const Nt=()=>{const c=[],g=[],w=[];return{onQuad:I=>{c.push(I)},onError:I=>{w.push(I)},onComplete:I=>{g.push(I)},parse:async(I,L)=>new Promise(z=>{const ee=new e.JsonLdParser({baseIRI:ve(L),documentLoader:new r.FetchDocumentLoader(A)});let de=!1;function ke(){de||(de=!0,g.forEach(Ve=>Ve()),z())}ee.on("end",ke),ee.on("error",Ve=>{w.forEach(Ye=>Ye(Ve)),ke()}),c.forEach(Ve=>ee.on("data",Ve)),ee.write(I),ee.end()})}};l.dataset;const kt="https://inrupt.com/.well-known/sdk-local-node/",{freeze:Me}=Object;function le(c){return c.substring(0,kt.length)===kt}function Te(c){return c.substring(kt.length)}function Je(c){return`${kt}${c}`}function se(c){return typeof c=="string"&&c.substring(0,2)==="_:"}function M(c){return c.substring(2)}function D(c){return`_:${c.value}`}const G={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function re(c){return c?"true":"false"}function we(c){return c==="true"||c==="1"?!0:c==="false"||c==="0"?!1:null}function Ce(c){let g,w;if(c.millisecond&&(c.millisecond<10?g=`00${c.millisecond}`:c.millisecond<100?g=`0${c.millisecond}`:g=c.millisecond),typeof c.timezoneHourOffset=="number"){const I=Math.abs(c.timezoneHourOffset)<10?`0${Math.abs(c.timezoneHourOffset)}`:Math.abs(c.timezoneHourOffset);w=c.timezoneHourOffset>=0?`+${I}`:`-${I}`,c.timezoneMinuteOffset?w=`${w}:${c.timezoneMinuteOffset<10?`0${c.timezoneMinuteOffset}`:c.timezoneMinuteOffset}`:w+=":00"}return`${c.hour<10?`0${c.hour}`:c.hour}:${c.minute<10?`0${c.minute}`:c.minute}:${c.second<10?`0${c.second}`:c.second}${c.millisecond?`.${g}`:""}${w||""}`}function ot(c){if(!/\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(c))return null;const[w,I]=We(c),[L,z,ee]=w.split(":");let de=Number.parseInt(L,10),ke=Number.parseInt(z,10);const[Ve,Ye]=ee.split("."),Mt=Number.parseInt(Ve,10),Kt=Ye?Number.parseInt(Ye,10):void 0;ke>=60&&(de+=1,ke-=60);const nr={hour:de,minute:ke,second:Mt};if(typeof Kt=="number"&&(nr.millisecond=Kt),typeof I=="string"){const[Pr,un]=Ge(I);if(typeof Pr!="number"||Pr>24||typeof un!="number"||un>59)return null;nr.timezoneHourOffset=Pr,nr.timezoneMinuteOffset=un}return nr}function Re(c){return c.toISOString()}function pt(c){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(c))return null;const[w,I]=c.split("T"),[L,z]=w.charAt(0)==="-"?[-1,w.substring(1)]:[1,w],[ee,de,ke]=z.split("-"),Ve=Number.parseInt(ee,10)*L,Ye=Number.parseInt(de,10)-1,Mt=Number.parseInt(ke,10),[Kt,nr]=We(I),[Pr,un]=typeof nr=="string"?Ge(nr):[0,0],[Jr,Va,jn]=Kt.split(":"),Er=Number.parseInt(Jr,10)+Pr,ki=Number.parseInt(Va,10)+un,[wi,oa]=jn.split("."),Bi=Number.parseInt(wi,10),Ss=oa?Number.parseInt(oa,10):0,so=new Date(Date.UTC(Ve,Ye,Mt,Er,ki,Bi,Ss));return Ve>=0&&Ve<100&&so.setUTCFullYear(so.getUTCFullYear()-1900),so}function Ct(c){const g=c.getFullYear(),w=c.getMonth()+1,I=c.getDate(),[,L]=We(c.toISOString());return`${g}-${String(w).padStart(2,"0")}-${String(I).padStart(2,"0")}${L}`}function bt(c){if(!/-?\d{4,}-\d\d-\d\d(Z|(\+|-)\d\d:\d\d)?/.test(c))return null;const w=c,[I,L]=w.charAt(0)==="-"?[-1,w.substring(1)]:[1,w],[z,ee,de]=L.split("-"),ke=de.length>2?de.substring(0,2):de,Ve=Number.parseInt(z,10)*I,Ye=Number.parseInt(ee,10)-1,Mt=Number.parseInt(ke,10),Kt=12,nr=new Date(Date.UTC(Ve,Ye,Mt,Kt));return Ve>=0&&Ve<100&&nr.setUTCFullYear(nr.getUTCFullYear()-1900),nr}function We(c){if(c.endsWith("Z"))return[c.substring(0,c.length-1),"Z"];const g=c.split("+"),w=c.split("-");return g.length===1&&w.length===1?[g[0],void 0]:g.length>w.length?[g[0],`+${g[1]}`]:[w[0],`-${w[1]}`]}function Ge(c){if(c==="Z")return[0,0];const g=c.charAt(0)==="+"?1:-1,[w,I]=c.substring(1).split(":"),L=Number.parseInt(w,10),z=Number.parseInt(I,10);return[L*g,z*g]}function Oe(c){return c.toString()}function ut(c){const g=Number.parseFloat(c);return Number.isNaN(g)?null:g}function Q(c){return c.toString()}function k(c){const g=Number.parseInt(c,10);return Number.isNaN(g)?null:g}function V(c){return c.toLowerCase()}function j(c){return et(c)&&c.termType==="NamedNode"}function qe(c){return et(c)&&c.termType==="Literal"}function et(c){return c!==null&&typeof c=="object"&&typeof c.termType=="string"&&typeof c.value=="string"&&typeof c.equals=="function"}function ze(c){return j(c)&&le(c.value)}function Yt(c){const g=_(c);if(typeof URL!="function")return!0;try{return new URL(g),!0}catch{return!1}}function Br(c,g){return or.namedNode(jr(Te(c.value),g))}function jr(c,g){if(typeof URL!="function")throw new Error("The URL interface is not available, so an IRI cannot be determined.");const w=new URL(g);return w.hash=c,w.href}const or=d;function $e(c,g,w={}){var I;if(!["NamedNode","DefaultGraph"].includes(g.graph.termType))throw new Error(`Cannot parse Quads with nodes of type [${g.graph.termType}] as their Graph node.`);const z=g.graph.termType==="DefaultGraph"?"default":g.graph.value,ee=(I=c.graphs[z])!==null&&I!==void 0?I:{};return Me({...c,graphs:Me({...c.graphs,[z]:vt(ee,g,w)})})}function vt(c,g,w){var I;if(!["NamedNode","BlankNode"].includes(g.subject.termType))throw new Error(`Cannot parse Quads with nodes of type [${g.subject.termType}] as their Subject node.`);const z=g.subject.termType==="BlankNode"?`_:${g.subject.value}`:g.subject.value,ee=(I=c[z])!==null&&I!==void 0?I:{type:"Subject",url:z,predicates:{}};return Me({...c,[z]:st(ee,g,w)})}function st(c,g,w){return Me({...c,predicates:Le(c.predicates,g,w)})}function Le(c,g,w){var I;if(!["NamedNode"].includes(g.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${g.predicate.termType}] as their Predicate node.`);const z=g.predicate.value,ee=(I=c[z])!==null&&I!==void 0?I:{};return Me({...c,[z]:ft(ee,g,w)})}function ft(c,g,w){var I,L,z,ee,de,ke,Ve,Ye;if(g.object.termType==="NamedNode"){const Mt=Me([...(I=c.namedNodes)!==null&&I!==void 0?I:[],g.object.value]);return Me({...c,namedNodes:Mt})}if(g.object.termType==="Literal"){if(g.object.datatype.value===G.langString){const nr=g.object.language.toLowerCase(),Pr=Me([...(z=(L=c.langStrings)===null||L===void 0?void 0:L[nr])!==null&&z!==void 0?z:[],g.object.value]),un=Me({...(ee=c.langStrings)!==null&&ee!==void 0?ee:{},[nr]:Pr});return Me({...c,langStrings:un})}const Mt=Me([...(ke=(de=c.literals)===null||de===void 0?void 0:de[g.object.datatype.value])!==null&&ke!==void 0?ke:[],g.object.value]),Kt=Me({...(Ve=c.literals)!==null&&Ve!==void 0?Ve:{},[g.object.datatype.value]:Mt});return Me({...c,literals:Kt})}if(g.object.termType==="BlankNode"){const Mt=Xt(g.object,w),Kt=Me([...(Ye=c.blankNodes)!==null&&Ye!==void 0?Ye:[],Mt]);return Me({...c,blankNodes:Kt})}throw new Error(`Objects of type [${g.object.termType}] are not supported.`)}function Xt(c,g){var w,I;if(((w=g.chainBlankNodes)!==null&&w!==void 0?w:[]).find(Ve=>Ve.equals(c))===void 0)return D(c);const ee=((I=g.otherQuads)!==null&&I!==void 0?I:[]).filter(Ve=>Ve.subject.equals(c)),de=ee.filter(Ve=>!pe(Ve.object)).reduce((Ve,Ye)=>{var Mt;if(!["NamedNode"].includes(Ye.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${Ye.predicate.termType}] as their Predicate node.`);const nr=(Mt=Ve[Ye.predicate.value])!==null&&Mt!==void 0?Mt:{};return Me({...Ve,[Ye.predicate.value]:ft(nr,Ye,g)})},{});return ee.filter(Ve=>pe(Ve.object)).reduce((Ve,Ye)=>{var Mt,Kt;if(!["NamedNode"].includes(Ye.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${Ye.predicate.termType}] as their Predicate node.`);const Pr=(Mt=Ve[Ye.predicate.value])!==null&&Mt!==void 0?Mt:{},un=(Kt=Pr.blankNodes)!==null&&Kt!==void 0?Kt:[];return Me({...Ve,[Ye.predicate.value]:{...Pr,blankNodes:[...un,Xt(Ye.object,g)]}})},de)}function zt(c){const g=c.map(ee=>ee.subject).filter(pe),w=c.map(ee=>ee.object).filter(pe);function I(ee){return ee.every(de=>ee.every(ke=>de.equals(ke)))}const L=[];return w.forEach(ee=>{L.push(...ue(ee,c))}),g.concat(w).filter(ee=>{if(L.some(ke=>ke.equals(ee)))return!1;const de=c.filter(ke=>ke.object.equals(ee)).map(ke=>ke.subject);return de.length>0&&I(de)})}function tr(c,g={}){var w;const I=[],L=(w=g.dataFactory)!==null&&w!==void 0?w:d;return Object.keys(c.graphs).forEach(z=>{const ee=c.graphs[z],de=z==="default"?L.defaultGraph():L.namedNode(z);Object.keys(ee).forEach(ke=>{const{predicates:Ve}=ee[ke],Ye=se(ke)?L.blankNode(M(ke)):L.namedNode(ke);I.push(...jt(Ve,Ye,de,g))})}),I}function jt(c,g,w,I={}){var L;const z=[],ee=(L=I.dataFactory)!==null&&L!==void 0?L:d;return Object.keys(c).forEach(de=>{var ke,Ve,Ye,Mt;const Kt=ee.namedNode(de),nr=(ke=c[de].langStrings)!==null&&ke!==void 0?ke:{},Pr=(Ve=c[de].namedNodes)!==null&&Ve!==void 0?Ve:[],un=(Ye=c[de].literals)!==null&&Ye!==void 0?Ye:{},Jr=(Mt=c[de].blankNodes)!==null&&Mt!==void 0?Mt:[];Object.keys(un).forEach(Er=>{const ki=ee.namedNode(Er);un[Er].forEach(oa=>{const Bi=ee.literal(oa,ki);z.push(ee.quad(g,Kt,Bi,w))})}),Object.keys(nr).forEach(Er=>{nr[Er].forEach(wi=>{const oa=ee.literal(wi,Er);z.push(ee.quad(g,Kt,oa,w))})}),Pr.forEach(Er=>{const ki=ee.namedNode(Er);z.push(ee.quad(g,Kt,ki,w))}),Jr.forEach(Er=>{if(se(Er)){const ki=ee.blankNode(M(Er));z.push(ee.quad(g,Kt,ki,w))}else{const ki=ee.blankNode(),wi=ee.quad(g,Kt,ki,w),oa=jt(Er,ki,w);z.push(wi),z.push(...oa)}})}),z}function ue(c,g,w=[]){if(w.find(de=>de.equals(c))!==void 0)return w;const I=g.filter(de=>de.subject.equals(c)&&pe(de.object)).map(de=>de.object);if(I.length===0)return[];const L=[...w,c],z=I.map(de=>ue(de,g,L)),ee=[];for(const de of z)ee.push(...de);return ee}function pe(c){return c.termType==="BlankNode"}const Tt=()=>{const c=[],g=[],w=[];return{onQuad:I=>{c.push(I)},onError:I=>{w.push(I)},onComplete:I=>{g.push(I)},parse:async(I,L)=>{(await xt(ve(L))).parse(I,(ee,de)=>{ee?w.forEach(ke=>ke(ee)):de?c.forEach(ke=>ke(de)):g.forEach(ke=>ke())})}}};async function xt(c){return new o.Parser({format:"text/turtle",baseIRI:c})}async function Pt(c,g){const w="text/turtle",I=new o.Writer({format:w,prefixes:g?.prefixes}),L=c.map(de=>or.quad(de.subject,de.predicate,de.object,void 0));return I.addQuads(L),await new Promise((de,ke)=>{I.end((Ve,Ye)=>{Ve?ke(Ve):de(Ye)})})}const Zt={acl:"http://www.w3.org/ns/auth/acl#",acp:"http://www.w3.org/ns/solid/acp#",cc:"http://creativecommons.org/ns#",cert:"http://www.w3.org/ns/auth/cert#",csvw:"http://www.w3.org/ns/csvw#",current:"#",dc:"http://purl.org/dc/terms/",dcam:"http://purl.org/dc/dcam/",dcat:"http://www.w3.org/ns/dcat#",dctype:"http://purl.org/dc/dcmitype/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",owl:"http://www.w3.org/2002/07/owl#",posixstat:"http://www.w3.org/ns/posix/stat#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",shacl:"http://www.w3.org/ns/shacl#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",solid:"http://www.w3.org/ns/solid/terms#",swapdoc:"http://www.w3.org/2000/10/swap/pim/doc#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",ws:"http://www.w3.org/ns/pim/space#",xsd:"http://www.w3.org/2001/XMLSchema#"},rr=l.dataset;function Fr(c){const g={graphs:{default:{}},type:"Dataset"},w=Array.from(c),I=zt(w);return w.filter(z=>I.every(ee=>!ee.equals(z.subject))).reduce((z,ee)=>$e(z,ee,{otherQuads:w,chainBlankNodes:I}),g)}function $t(c,g={}){var w,I;return((I=(w=g.datasetFactory)===null||w===void 0?void 0:w.dataset)!==null&&I!==void 0?I:rr)(tr(c,g))}async function er(c,g){const{prefixes:w=Zt,thing:I}={...g},L=new o.Writer({format:"application/turtle",prefixes:w}),z=I?new o.NamedNode(I):void 0;for(const ee of $t(c).match(z))L.addQuad(ee);return new Promise((ee,de)=>{L.end((ke,Ve)=>{ke?de(ke):ee(Ve)})})}var mr=Object.freeze({__proto__:null,getJsonLdParser:Nt,getTurtleParser:Tt,solidDatasetAsTurtle:er});const ar={fetch:A},Dr=["Slug","If-None-Match","Content-Type"];function Ar(c){return Dr.some(g=>c[g]!==void 0)}async function Gr(c,g=ar){const w={...ar,...g},I=_(c),L=await w.fetch(I,w.init);if(R(L))throw new ht(`Fetching the File failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const z=T(L),ee=await L.blob();return Object.assign(ee,{internal_resourceInfo:z})}async function gr(c,g=ar){const w={...ar,...g},I=h(c)?_(rt(c)):_(c),L=await w.fetch(I,{...w.init,method:"DELETE"});if(R(L))throw new ht(`Deleting the file at [${I}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}async function sr(c,g,w=ar){const I=_(c),L=await Ur(I,g,"POST",w);if(R(L))throw new ht(`Saving the file in [${c}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const z=L.headers.get("Location");if(z===null)throw new Error("Could not determine the location of the newly saved file.");const ee=new URL(z,new URL(I).origin).href,de=O(g),ke={internal_resourceInfo:{isRawData:!0,sourceIri:ee,contentType:En(g,w.contentType)}};return Object.assign(de,ke)}async function Gt(c,g,w=ar){const I=_(c),L=await Ur(I,g,"PUT",w);if(R(L))throw new ht(`Overwriting the file at [${I}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const z=O(g),ee=T(L);return ee.sourceIri=I,ee.isRawData=!0,Object.assign(z,{internal_resourceInfo:ee})}function Yr(c){return Array.isArray(c)}function Tn(c){return typeof c.forEach=="function"}function cn(c){if(typeof c>"u")return{};let g={};return Yr(c)?c.forEach(([w,I])=>{g[w]=I}):Tn(c)?c.forEach((w,I)=>{g[I]=w}):g=c,g}async function Ur(c,g,w,I){var L,z;const ee={...ar,...I},de=cn((z=(L=ee.init)===null||L===void 0?void 0:L.headers)!==null&&z!==void 0?z:{});if(Ar(de))throw new Error(`No reserved header (${Dr.join(", ")}) should be set in the optional RequestInit.`);ee.slug!==void 0&&(de.Slug=ee.slug),de["Content-Type"]=En(g,I.contentType);const ke=_(c);return ee.fetch(ke,{...ee.init,headers:de,method:w,body:g})}function En(c,g){if(typeof g=="string")return g;const w=typeof c=="object"&&c!==null&&"type"in c&&typeof c.type=="string"&&c.type.length>0?c.type:void 0;return w??"application/octet-stream"}function Un(c){var g,w,I,L,z,ee,de,ke;if(j(c))return`<${c.value}> (URL)`;if(qe(c)){if(!j(c.datatype))return`[${c.value}] (RDF/JS Literal of unknown type)`;let Ve;switch(c.datatype.value){case G.boolean:return Ve=(w=(g=we(c.value))===null||g===void 0?void 0:g.valueOf())!==null&&w!==void 0?w:`Invalid data: \`${c.value}\``,`${Ve} (boolean)`;case G.dateTime:return Ve=(L=(I=pt(c.value))===null||I===void 0?void 0:I.toUTCString())!==null&&L!==void 0?L:`Invalid data: \`${c.value}\``,`${Ve} (datetime)`;case G.decimal:return Ve=(ee=(z=ut(c.value))===null||z===void 0?void 0:z.toString())!==null&&ee!==void 0?ee:`Invalid data: \`${c.value}\``,`${Ve} (decimal)`;case G.integer:return Ve=(ke=(de=k(c.value))===null||de===void 0?void 0:de.toString())!==null&&ke!==void 0?ke:`Invalid data: \`${c.value}\``,`${Ve} (integer)`;case G.langString:return`"${c.value}" (${c.language} string)`;case G.string:return`"${c.value}" (string)`;default:return`[${c.value}] (RDF/JS Literal of type: \`${c.datatype.value}\`)`}}return c.termType==="BlankNode"?`[${c.value}] (RDF/JS BlankNode)`:c.termType==="Quad"?"??? (nested RDF* Quad)":c.termType==="Variable"?`?${c.value} (RDF/JS Variable)`:c}function ur(c){if(!en(c))throw new ea(c)}function fi(c,g){const w=y(c)?c.internal_changeLog:{additions:[],deletions:[]},[I,L]=g.filter(z=>!di(z)).reduce(([z,ee],de)=>typeof ee.find(Ve=>Ve.equals(de))<"u"?[z,ee.filter(Ve=>!Ve.equals(de))]:[z.concat(de),ee],[w.additions,w.deletions]);return Me({...c,internal_changeLog:{additions:I,deletions:L}})}function Rn(c,g){const w=y(c)?c.internal_changeLog:{additions:[],deletions:[]},[I,L]=g.filter(z=>!di(z)).reduce(([z,ee],de)=>typeof z.find(Ve=>Ve.equals(de))<"u"?[z.filter(Ve=>!Ve.equals(de)),ee]:[z,ee.concat(de)],[w.additions,w.deletions]);return Me({...c,internal_changeLog:{additions:I,deletions:L}})}function $i(c){return y(c)?c:Me({...c,internal_changeLog:{additions:[],deletions:[]}})}function di(c){return c.subject.termType==="BlankNode"||c.object.termType==="BlankNode"}function Ta(c){return Object.keys(c.predicates).filter(g=>qr(c,g)!==null)}function Zi(c,g){var w,I,L;if(ur(c),!Yt(g))throw new On(g);const z=_(g),ee=(L=(I=(w=c.predicates[z])===null||w===void 0?void 0:w.namedNodes)===null||I===void 0?void 0:I[0])!==null&&L!==void 0?L:null;return ee===null?null:le(ee)?`#${Te(ee)}`:ee}const hi=Zi;function v(c,g){var w,I,L;if(ur(c),!Yt(g))throw new On(g);const z=_(g);return(L=(I=(w=c.predicates[z])===null||w===void 0?void 0:w.namedNodes)===null||I===void 0?void 0:I.map(ee=>le(ee)?`#${Te(ee)}`:ee))!==null&&L!==void 0?L:[]}const m=v;function S(c,g){ur(c);const w=pr(c,g,G.boolean);return w===null?null:we(w)}function C(c,g){return ur(c),tn(c,g,G.boolean).map(we).filter(I=>I!==null)}function H(c,g){ur(c);const w=pr(c,g,G.dateTime);return w===null?null:pt(w)}function X(c,g){return ur(c),tn(c,g,G.dateTime).map(pt).filter(I=>I!==null)}function oe(c,g){ur(c);const w=pr(c,g,G.date);return w===null?null:bt(w)}function be(c,g){return ur(c),tn(c,g,G.date).map(bt).filter(I=>I!==null)}function he(c,g){ur(c);const w=pr(c,g,G.time);return w===null?null:ot(w)}function me(c,g){return ur(c),tn(c,g,G.time).map(ot).filter(I=>I!==null)}function Ee(c,g){ur(c);const w=pr(c,g,G.decimal);return w===null?null:ut(w)}function Ae(c,g){return ur(c),tn(c,g,G.decimal).map(I=>ut(I)).filter(I=>I!==null)}function De(c,g){ur(c);const w=pr(c,g,G.integer);return w===null?null:k(w)}function Ke(c,g){return ur(c),tn(c,g,G.integer).map(I=>k(I)).filter(I=>I!==null)}function it(c,g){return gt(c,g,"en")}function gt(c,g,w){var I,L;if(ur(c),!Yt(g))throw new On(g);const z=_(g),ee=(L=(I=c.predicates[z])===null||I===void 0?void 0:I.langStrings)!==null&&L!==void 0?L:{},ke=Object.keys(ee).find(Ve=>Ve.toLowerCase()===w.toLowerCase()&&Array.isArray(ee[Ve])&&ee[Ve].length>0);return typeof ke=="string"?ee[ke][0]:null}function St(c,g){return ae(c,g,"en")}function ae(c,g,w){var I,L;if(ur(c),!Yt(g))throw new On(g);const z=_(g),ee=(L=(I=c.predicates[z])===null||I===void 0?void 0:I.langStrings)!==null&&L!==void 0?L:{},ke=Object.keys(ee).find(Ve=>Ve.toLowerCase()===w.toLowerCase()&&Array.isArray(ee[Ve])&&ee[Ve].length>0);return typeof ke=="string"?[...ee[ke]]:[]}function _e(c,g){var w,I;if(ur(c),!Yt(g))throw new On(g);const L=_(g),z=(I=(w=c.predicates[L])===null||w===void 0?void 0:w.langStrings)!==null&&I!==void 0?I:{};return new Map(Object.entries(z).map(([ee,de])=>[ee,[...de]]))}function Ie(c,g){return ur(c),pr(c,g,G.string)}function Fe(c,g){return ur(c),tn(c,g,G.string)}function ct(c,g){const w=hi(c,g);return w===null?null:or.namedNode(w)}function Et(c,g){return m(c,g).map(I=>or.namedNode(I))}function fr(c,g){var w,I,L,z;if(ur(c),!Yt(g))throw new On(g);const ee=_(g),de=(I=(w=c.predicates[ee])===null||w===void 0?void 0:w.langStrings)!==null&&I!==void 0?I:{},ke=Object.keys(de);if(ke.length>0){const Mt=ke.find(Kt=>Array.isArray(de[Kt])&&de[Kt].length>0);if(typeof Mt=="string")return or.literal(de[Mt][0],Mt)}const Ve=(z=(L=c.predicates[ee])===null||L===void 0?void 0:L.literals)!==null&&z!==void 0?z:{},Ye=Object.keys(Ve);if(Ye.length>0){const Mt=Ye.find(Kt=>Array.isArray(Ve[Kt])&&Ve[Kt].length>0);if(typeof Mt=="string")return or.literal(Ve[Mt][0],or.namedNode(Mt))}return null}function Ht(c,g){var w,I,L,z;if(ur(c),!Yt(g))throw new On(g);const ee=_(g);let de=[];const ke=(I=(w=c.predicates[ee])===null||w===void 0?void 0:w.langStrings)!==null&&I!==void 0?I:{},Ve=Object.keys(ke);for(const Kt of Ve){const Pr=ke[Kt].map(un=>or.literal(un,Kt));de=de.concat(Pr)}const Ye=(z=(L=c.predicates[ee])===null||L===void 0?void 0:L.literals)!==null&&z!==void 0?z:{},Mt=Object.keys(Ye);for(const Kt of Mt){const nr=Ye[Kt],Pr=or.namedNode(Kt),un=nr.map(Jr=>or.literal(Jr,Pr));de=de.concat(un)}return de}function qr(c,g){var w,I;ur(c);const L=ct(c,g);if(L!==null)return L;const z=fr(c,g);if(z!==null)return z;const ee=_(g),de=(I=(w=c.predicates[ee])===null||w===void 0?void 0:w.blankNodes)!==null&&I!==void 0?I:[];if(de.length>0){const ke=se(de[0])?M(de[0]):void 0;return or.blankNode(ke)}return null}function lr(c,g){var w,I;ur(c);const L=Et(c,g),z=Ht(c,g),ee=_(g),ke=((I=(w=c.predicates[ee])===null||w===void 0?void 0:w.blankNodes)!==null&&I!==void 0?I:[]).map(Ye=>{const Mt=se(Ye)?M(Ye):void 0;return or.blankNode(Mt)});return L.concat(z).concat(ke)}function pr(c,g,w){var I,L,z,ee;if(!Yt(g))throw new On(g);const de=_(g);return(ee=(z=(L=(I=c.predicates[de])===null||I===void 0?void 0:I.literals)===null||L===void 0?void 0:L[w])===null||z===void 0?void 0:z[0])!==null&&ee!==void 0?ee:null}function tn(c,g,w){var I,L,z;if(!Yt(g))throw new On(g);const ee=_(g);return[...(z=(L=(I=c.predicates[ee])===null||I===void 0?void 0:I.literals)===null||L===void 0?void 0:L[w])!==null&&z!==void 0?z:[]]}function dr(c,g,w={}){var I;if(!Yt(g))throw new za(g);const L=typeof w.scope<"u"?_(w.scope):"default",z=(I=c.graphs[L])!==null&&I!==void 0?I:{},ee=_(g),de=le(ee)&&f(c)?jr(Te(ee),ve(c)):ee,ke=z[de];return typeof ke>"u"?null:ke}function rn(c,g={acceptBlankNodes:!1}){var w;const I=typeof g.scope<"u"?_(g.scope):"default",L=(w=c.graphs[I])!==null&&w!==void 0?w:{};return Object.values(L).filter(z=>!se(z.url)||g.acceptBlankNodes)}function Zr(c,g){var w;const I=xi(g)&&f(c)?jr(Te(g.url),ve(c)):g.url,L=c.graphs.default,z=Me({...L,[I]:Me({...g,url:I})}),ee=Me({...c.graphs,default:z}),de=or.namedNode(I),ke=(w=c.graphs.default[I])===null||w===void 0?void 0:w.predicates,Ve=typeof ke<"u"?jt(ke,de,or.defaultGraph()):[],Ye=jt(g.predicates,de,or.defaultGraph());return fi(Rn(Me({...c,graphs:ee}),Ve),Ye)}function Cn(c,g){var w;let I;j(g)?I=g.value:typeof g=="string"?I=le(g)&&f(c)?jr(Te(g),ve(c)):g:xi(g)?I=g.url:I=xr(g);const z={...c.graphs.default};delete z[I];const ee=Me({...c.graphs,default:Me(z)}),de=or.namedNode(I),ke=(w=c.graphs.default[I])===null||w===void 0?void 0:w.predicates,Ve=typeof ke<"u"?jt(ke,de,or.defaultGraph()):[];return Rn(Me({...c,graphs:ee}),Ve)}function Qr(c={}){var g;if(typeof c.url<"u"){const{url:z}=c;if(!Yt(z))throw new za(z);return Me({type:"Subject",predicates:Me({}),url:z})}const w=(g=c.name)!==null&&g!==void 0?g:co(),I=Je(w);return Me({type:"Subject",predicates:Me({}),url:I})}function en(c){return typeof c=="object"&&c!==null&&typeof c.type=="string"&&c.type==="Subject"}function bn(c,g){if(xi(c)){if(typeof g>"u")throw new Error("The URL of a Thing that has not been persisted cannot be determined without a base URL.");return jr(Te(c.url),g)}return c.url}const xr=bn;function Vn(c){let g="";xi(c)?g+=`## Thing (no URL yet  identifier: \`#${Te(c.url)}\`)
`:g+=`## Thing: ${c.url}
`;const w=Object.keys(c.predicates);if(w.length===0)g+=`
<empty>
`;else for(const I of w){g+=`
Property: ${I}
`;const L=lr(c,I);g+=L.reduce((z,ee)=>`${z}- ${Un(ee)}
`,"")}return g}function xi(c){return le(c.url)}class ea extends b{constructor(g){const w=`Expected a Thing, but received: [${g}].`;super(w),this.receivedValue=g}}class On extends b{constructor(g){const w=j(g)?g.value:g,I=`Expected a valid URL to identify a property, but received: [${w}].`;super(I),this.receivedProperty=w}}class Ki extends b{constructor(g){const w=j(g)?g.value:g,I=`Expected a valid URL value, but received: [${w}].`;super(I),this.receivedValue=w}}class za extends b{constructor(g){const w=j(g)?g.value:g,I=`Expected a valid URL to identify a Thing, but received: [${w}].`;super(I),this.receivedValue=w}}const co=()=>u.v4();function An(c){const g=new URL(c);return g.hash="",g.href}function qn(){return Me({type:"Dataset",graphs:{default:{}}})}async function Ca(c,g={}){if(R(c))throw new ht(`Fetching the SolidDataset at [${c.url}] failed: [${c.status}] [${c.statusText}] ${await c.text()}.`,c);const w=tt(c),I={"text/turtle":Tt(),...g.parsers},L=yt(w);if(L===null)throw new Error(`Could not determine the content type of the Resource at [${ve(w)}].`);const z=L.split(";")[0],ee=I[z];if(typeof ee>"u")throw new Error(`The Resource at [${ve(w)}] has a MIME type of [${z}], but the only parsers available are for the following MIME types: [${Object.keys(I).join(", ")}].`);const de=await c.text();return new Promise((Ve,Ye)=>{let Mt=Me({graphs:Me({default:Me({})}),type:"Dataset"});const Kt=[],nr=[];ee.onError(Pr=>{Ye(new Error(`Encountered an error parsing the Resource at [${ve(w)}] with content type [${L}]: ${Pr}`))}),ee.onQuad(Pr=>{nr.push(Pr),Pr.subject.termType==="BlankNode"||Pr.object.termType==="BlankNode"?Kt.push(Pr):Mt=$e(Mt,Pr)}),ee.onComplete(async()=>{const un=Kt.length<=20?zt(Kt):[];Mt=Kt.filter(jn=>un.every(Er=>!Er.equals(jn.subject))).reduce((jn,Er)=>$e(jn,Er,{otherQuads:nr,chainBlankNodes:un}),Mt);const Va=Me({...Mt,...w});Ve(Va)}),ee.parse(de,w)})}async function zn(c,g=ge){var w;c=_(c);const I={...ge,...g},L=Object.keys((w=g.parsers)!==null&&w!==void 0?w:{}),z=L.length>0?L.join(", "):"text/turtle",ee=await I.fetch(c,{headers:{Accept:z}});if(R(ee))throw new ht(`Fetching the Resource at [${c}] failed: [${ee.status}] [${ee.statusText}] ${await ee.text()}.`,ee);return await Ca(ee,g)}async function Xo(c){const g=c.internal_changeLog.deletions.length>0?`DELETE DATA {${(await Pt(c.internal_changeLog.deletions.map(ir))).trim()}};`:"",w=c.internal_changeLog.additions.length>0?`INSERT DATA {${(await Pt(c.internal_changeLog.additions.map(ir))).trim()}};`:"";return{method:"PATCH",body:`${g} ${w}`,headers:{"Content-Type":"application/sparql-update"}}}async function fa(c,g){return{method:"PUT",body:await Pt(tr(c).map(ir),g),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${W.Resource}>; rel="type"`}}}async function U(c,g,w=ge){c=_(c);const I={...ge,...w},L=$i(g),z=Ue(L,c)?await Xo(L):await fa(L,w),ee=await I.fetch(c,z);if(R(ee)){const Ye=Ue(L,c)?`The changes that were sent to the Pod are listed below.

${Wt(L)}`:`The SolidDataset that was sent to the Pod is listed below.

${Vt(L)}`;throw new ht(`Storing the Resource at [${c}] failed: [${ee.status}] [${ee.statusText}] ${await ee.text()}.

${Ye}`,ee)}const de={...T(ee),isRawData:!1},ke=Me({...g,internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:de});return br(ke)}async function te(c,g=ge){const w={...ge,...g},I=h(c)?_(ve(c)):_(c),L=await w.fetch(I,{method:"DELETE"});if(R(L))throw new ht(`Deleting the SolidDataset at [${I}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}async function ne(c,g=ge){var w;c=_(c),c=c.endsWith("/")?c:`${c}/`;const I={...ge,...g},L=await I.fetch(c,{method:"PUT",body:I.initialContent?await Pt(tr(I.initialContent).map(ir)):void 0,headers:{Accept:"text/turtle","Content-Type":"text/turtle","If-None-Match":"*",Link:`<${W.BasicContainer}>; rel="type"`}});if(R(L)){const de=I.initialContent===void 0?"empty":"non-empty";throw new ht(`Creating the ${de} Container at [${c}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}const z=T(L);return Me({...(w=g.initialContent)!==null&&w!==void 0?w:qn(),internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:z})}function fe(c,g){return An(c.internal_resourceInfo.sourceIri)===An(g)}function Ue(c,g){return y(c)&&h(c)&&typeof c.internal_resourceInfo.sourceIri=="string"&&fe(c,g)}async function ye(c,g,w=ge){const I={...ge,...w};c=_(c);const L=await Pt(tr(g).map(ir)),z={"Content-Type":"text/turtle",Link:`<${W.Resource}>; rel="type"`};w.slugSuggestion&&(z.slug=w.slugSuggestion);const ee=await I.fetch(c,{method:"POST",body:L,headers:z});if(R(ee))throw new ht(`Storing the Resource in the Container at [${c}] failed: [${ee.status}] [${ee.statusText}] ${await ee.text()}.

The SolidDataset that was sent to the Pod is listed below.

${Vt(g)}`,ee);const de=T(ee);if(!de.location)throw new Error("Could not determine the location of the newly saved SolidDataset.");let ke;try{ke=new URL(de.location).href}catch{ke=new URL(de.location,ee.url).href}const Ye=Me({...g,...{internal_resourceInfo:{isRawData:!1,sourceIri:ke}}});return br(Ye)}async function He(c,g=ge){c=_(c);const w={...ge,...g},I={"Content-Type":"text/turtle",Link:`<${W.BasicContainer}>; rel="type"`};g.slugSuggestion&&(I.slug=g.slugSuggestion);const L=await w.fetch(c,{method:"POST",headers:I});if(R(L))throw new ht(`Creating an empty Container in the Container at [${c}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L);const z=T(L);if(!z.location)throw new Error("Could not determine the location of the newly created Container.");try{const ee=new URL(z.location).toString();return Me({...qn(),internal_resourceInfo:{...z,sourceIri:ee}})}catch{}return Me({...qn(),internal_resourceInfo:{...z,sourceIri:new URL(z.location,L.url).href}})}async function Rt(c,g=ge){const w=h(c)?_(ve(c)):_(c);if(!lt(c))throw new Error(`You're trying to delete the Container at [${w}], but Container URLs should end in a \`/\`. Are you sure this is a Container?`);const L=await{...ge,...g}.fetch(w,{method:"DELETE"});if(R(L))throw new ht(`Deleting the Container at [${w}] failed: [${L.status}] [${L.statusText}] ${await L.text()}.`,L)}function wt(c,g){const w=new URL(g),I=new URL(c),L=I.href.startsWith(w.href),z=I.pathname.substring(w.pathname.length,I.pathname.length).replace(/(^\/)|(\/$)/g,"");return L&&z.length>=1&&!z.includes("/")}function It(c){const g=ve(c),w=dr(c,g);return w===null?[]:m(w,W.contains).filter(I=>wt(I,g))}function qt(c){const g=ve(c),w=dr(c,g);if(w===null)return{isValid:!0,invalidContainedResources:[]};const I=m(w,W.contains).filter(L=>!wt(L,g));return I.length>0?{isValid:!1,invalidContainedResources:I}:{isValid:!0,invalidContainedResources:[]}}function Vt(c){let g="";h(c)?g+=`# SolidDataset: ${ve(c)}
`:g+=`# SolidDataset (no URL yet)
`;const w=rn(c);return w.length===0?g+=`
<empty>
`:w.forEach(I=>{g+=`
${Vn(I)}`,y(c)&&(g+=`
${Jt(c,I)}
`)}),g}function Wt(c){if(!h(c))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!y(c)||c.internal_changeLog.additions.length===0&&c.internal_changeLog.deletions.length===0)return`## Changes compared to ${ve(c)}

This SolidDataset has not been modified since it was fetched from ${ve(c)}.
`;let g=`## Changes compared to ${ve(c)}
`;const w=Ut(c);return Object.keys(w).forEach(I=>{g+=`
### Thing: ${I}
`;const L=w[I];Object.keys(L).forEach(z=>{g+=`
Property: ${z}
`;const{deleted:ee}=L[z],{added:de}=L[z];ee.length>0&&(g+=`- Removed:
`,g+=ee.reduce((ke,Ve)=>`${ke}  - ${Un(Ve)}
`,"")),de.length>0&&(g+=`- Added:
`,g+=de.reduce((ke,Ve)=>`${ke}  - ${Un(Ve)}
`,""))})}),g}function Ut(c){const g=Object.create(null);return c.internal_changeLog.deletions.forEach(w=>{var I,L,z;const ee=ze(w.subject)?Br(w.subject,ve(c)):w.subject;if(!j(ee)||!j(w.predicate))return;const de=_(ee),ke=_(w.predicate);(I=g[de])!==null&&I!==void 0||(g[de]=Object.create(null)),(L=(z=g[de])[ke])!==null&&L!==void 0||(z[ke]={added:[],deleted:[]}),g[de][ke].deleted.push(w.object)}),c.internal_changeLog.additions.forEach(w=>{var I,L,z;const ee=ze(w.subject)?Br(w.subject,ve(c)):w.subject;if(!j(ee)||!j(w.predicate))return;const de=_(ee),ke=_(w.predicate);(I=g[de])!==null&&I!==void 0||(g[de]=Object.create(null)),(L=(z=g[de])[ke])!==null&&L!==void 0||(z[ke]={added:[],deleted:[]}),g[de][ke].added.push(w.object)}),g}function Jt(c,g){const w=or.namedNode(g.url),I=c.internal_changeLog.additions.reduce((de,ke)=>ke.subject.equals(w)?de+1:de,0),L=c.internal_changeLog.deletions.reduce((de,ke)=>ke.subject.equals(w)?de+1:de,0),z=I===1?"1 new value added":`${I} new values added`,ee=L===1?"1 value removed":`${L} values removed`;return`(${z} / ${ee})`}function ir(c){const g=j(c.subject)?cr(c.subject):c.subject,w=j(c.object)?cr(c.object):c.object;return or.quad(g,c.predicate,w,c.graph)}function cr(c){return le(c.value)?or.namedNode(`#${Te(c.value)}`):c}function br(c){const g=ve(c),w=c.graphs.default,L=Object.keys(w).reduce((ee,de)=>{const ke=Kr(ee[de],g),Ve=le(de)?`${g}#${Te(de)}`:de,Ye={...ee};return delete Ye[de],Ye[Ve]=ke,Me(Ye)},w),z=Me({...c.graphs,default:L});return Me({...c,graphs:z})}function Kr(c,g){const I=Object.keys(c.predicates).reduce((L,z)=>{var ee;const de=(ee=L[z].namedNodes)!==null&&ee!==void 0?ee:[];if(de.every(Ye=>!le(Ye)))return L;const ke=Me(de.map(Ye=>le(Ye)?`${g}#${Te(Ye)}`:Ye)),Ve=Me({...L[z],namedNodes:ke});return Me({...L,[z]:Ve})},c.predicates);return Me({...c,predicates:I,url:le(c.url)?`${g}#${Te(c.url)}`:c.url})}async function wr(c,g=ge){const w=_(c);try{const de=new URL("/.well-known/solid",new URL(w).origin).href;return await zn(de,{fetch:A})}catch{}const I=await Se(w,{fetch:g.fetch,ignoreAuthenticationErrors:!0}),z=Ze(I)[ie.storage],ee=z?.length===1?z[0]:null;if(ee!==null){const de=new URL(".well-known/solid",ee.endsWith("/")?ee:`${ee}/`).href;return zn(de,{...g,parsers:{"application/ld+json":Nt()}})}throw new Error("Could not determine storage root or well-known solid resource.")}function Qt(c){return{...qn(),internal_resourceInfo:{sourceIri:_(c),isRawData:!1,contentType:"text/turtle",linkedResources:{}}}}function kr(c){const g=_(c);if(!g.endsWith("/"))throw new Error("A Container's URL should end in a slash. Please update your tests.");return Qt(g)}function hr(c,g){const w=new Blob;return Object.assign(w,{internal_resourceInfo:{sourceIri:_(c),isRawData:!0,contentType:g?.contentType,linkedResources:{}}})}function Mr(c,g=404,w="Not Found"){const I=new i.Response(void 0,{status:g,statusText:w});return new ht(`Fetching the Resource at [${c}] failed: [${I.status}] [${I.statusText}].`,I)}const Wr=(c,g,w)=>{var I,L;if(ur(c),!Yt(g))throw new On(g);if(!en(w)&&!Yt(w))throw new Ki(w);const z=_(g),ee=(I=c.predicates[z])!==null&&I!==void 0?I:{},de=(L=ee.namedNodes)!==null&&L!==void 0?L:[];let ke;j(w)?ke=w.value:typeof w=="string"?ke=w:xi(w)?ke=w.url:ke=xr(w);const Ve=Me(de.concat(_(ke))),Ye=Me({...ee,namedNodes:Ve}),Mt=Me({...c.predicates,[z]:Ye});return Me({...c,predicates:Mt})},Dt=Wr,Ir=(c,g,w)=>(ur(c),Ln(c,g,re(w),G.boolean)),mn=(c,g,w)=>(ur(c),Ln(c,g,Re(w),G.dateTime)),Lr=(c,g,w)=>(ur(c),Ln(c,g,Ct(w),G.date)),hn=(c,g,w)=>(ur(c),Ln(c,g,Ce(w),G.time)),ln=(c,g,w)=>(ur(c),Ln(c,g,Oe(w),G.decimal)),In=(c,g,w)=>(ur(c),Ln(c,g,Q(w),G.integer));function _r(c,g,w){return Vr(c,g,w,"en")}function Vr(c,g,w,I){var L,z,ee;if(ur(c),!Yt(g))throw new On(g);const de=_(g),ke=V(I),Ve=(L=c.predicates[de])!==null&&L!==void 0?L:{},Ye=(z=Ve.langStrings)!==null&&z!==void 0?z:{},Mt=(ee=Ye[ke])!==null&&ee!==void 0?ee:[],Kt=Me(Mt.concat(w)),nr=Me({...Ye,[ke]:Kt}),Pr=Me({...Ve,langStrings:nr}),un=Me({...c.predicates,[de]:Pr});return Me({...c,predicates:un})}const Wn=(c,g,w)=>(ur(c),Ln(c,g,w,G.string));function gi(c,g,w){return Wr(c,g,w.value)}function Tr(c,g,w){if(ur(c),!Yt(g))throw new On(g);return w.datatype.value===G.langString?Vr(c,g,w.value,w.language):Ln(c,g,w.value,w.datatype.value)}function Bn(c,g,w){var I,L;if(w.termType==="NamedNode")return gi(c,g,w);if(w.termType==="Literal")return Tr(c,g,w);if(w.termType==="BlankNode"){if(ur(c),!Yt(g))throw new On(g);const z=_(g),ee=(I=c.predicates[z])!==null&&I!==void 0?I:{},de=(L=ee.blankNodes)!==null&&L!==void 0?L:[],ke=Me(de.concat(D(w))),Ve=Me({...ee,blankNodes:ke}),Ye=Me({...c.predicates,[z]:Ve});return Me({...c,predicates:Ye})}throw new Error(`Term type [${w.termType}] is not supported by @inrupt/solid-client.`)}function Ln(c,g,w,I){var L,z,ee;if(ur(c),!Yt(g))throw new On(g);const de=_(g),ke=(L=c.predicates[de])!==null&&L!==void 0?L:{},Ve=(z=ke.literals)!==null&&z!==void 0?z:{},Ye=(ee=Ve[I])!==null&&ee!==void 0?ee:[],Mt=Me(Ye.concat(w)),Kt=Me({...Ve,[I]:Mt}),nr=Me({...ke,literals:Kt}),Pr=Me({...c.predicates,[de]:nr});return Me({...c,predicates:Pr})}function Xr(c,g){if(ur(c),!Yt(g))throw new On(g);const w=_(g),I={...c.predicates};return delete I[w],Me({...c,predicates:Me(I)})}const $n=(c,g,w)=>{var I,L,z;if(ur(c),!Yt(g))throw new On(g);const ee=_(g);if(!en(w)&&!Yt(w))throw new Ki(w);const de=en(w)?xr(w):_(w),ke=Me((z=(L=(I=c.predicates[ee])===null||I===void 0?void 0:I.namedNodes)===null||L===void 0?void 0:L.filter(Mt=>Mt.toLowerCase()!==de.toLowerCase()))!==null&&z!==void 0?z:[]),Ve=Me({...c.predicates[ee],namedNodes:ke}),Ye=Me({...c.predicates,[ee]:Ve});return Me({...c,predicates:Ye})},nn=$n,Oa=(c,g,w)=>(ur(c),Ja(c,g,G.boolean,I=>we(I)===w)),Ku=(c,g,w)=>(ur(c),Ja(c,g,G.dateTime,I=>{var L;return((L=pt(I))===null||L===void 0?void 0:L.getTime())===w.getTime()})),Fs=(c,g,w)=>(ur(c),Ja(c,g,G.date,function(I){const L=bt(I);return L?L.getFullYear()===w.getFullYear()&&L.getMonth()===w.getMonth()&&L.getUTCDate()===w.getUTCDate():!1})),Gu=(c,g,w)=>(ur(c),Ja(c,g,G.time,function(I){const L=ot(I);return L?L.hour===w.hour&&L.minute===w.minute&&L.second===w.second&&L.millisecond===w.millisecond&&L.timezoneHourOffset===w.timezoneHourOffset&&L.timezoneMinuteOffset===w.timezoneMinuteOffset:!1})),Wa=(c,g,w)=>(ur(c),Ja(c,g,G.decimal,I=>ut(I)===w)),Zo=(c,g,w)=>(ur(c),Ja(c,g,G.integer,I=>k(I)===w));function vf(c,g,w){return da(c,g,w,"en")}function da(c,g,w,I){var L,z;if(ur(c),!Yt(g))throw new On(g);const ee=_(g),de=(z=(L=c.predicates[ee])===null||L===void 0?void 0:L.langStrings)!==null&&z!==void 0?z:{},ke=Object.keys(de).find(Pr=>V(Pr)===V(I)&&Array.isArray(de[Pr])&&de[Pr].length>0);if(typeof ke!="string")return c;const Ve=de[ke],Ye=Me(Ve.filter(Pr=>Pr!==w)),Mt=Me({...de,[ke]:Ye}),Kt=Me({...c.predicates[ee],langStrings:Mt}),nr=Me({...c.predicates,[ee]:Kt});return Me({...c,predicates:nr})}const Fo=(c,g,w)=>(ur(c),Ja(c,g,G.string,I=>I===w));function Ll(c,g,w){return $n(c,g,w.value)}function Ds(c,g,w){var I,L,z;if(ur(c),!Yt(g))throw new On(g);const ee=w.datatype.value;if(ee===G.langString)return da(c,g,w.value,w.language);const de=_(g),ke=(I=c.predicates[de])!==null&&I!==void 0?I:{},Ve=(L=ke.literals)!==null&&L!==void 0?L:{},Ye=(z=Ve[ee])!==null&&z!==void 0?z:[],Mt=Me(Ye.filter(Jr=>Jr!==w.value)),Kt=Me({...Ve,[ee]:Mt}),nr=Me({...ke,literals:Kt}),Pr=Me({...c.predicates,[de]:nr});return Me({...c,predicates:Pr})}function Ja(c,g,w,I){var L,z,ee;if(!Yt(g))throw new On(g);const de=_(g),ke=(L=c.predicates[de])!==null&&L!==void 0?L:{},Ve=(z=ke.literals)!==null&&z!==void 0?z:{},Ye=(ee=Ve[w])!==null&&ee!==void 0?ee:[],Mt=Me(Ye.filter(Jr=>!I(Jr))),Kt=Me({...Ve,[w]:Mt}),nr=Me({...ke,literals:Kt}),Pr=Me({...c.predicates,[de]:nr});return Me({...c,predicates:Pr})}const Ia=(c,g,w)=>{if(ur(c),!Yt(g))throw new On(g);if(!en(w)&&!Yt(w))throw new Ki(w);return Wr(Xr(c,g),g,w)},pn=Ia,Us=(c,g,w)=>(ur(c),Ir(Xr(c,g),g,w)),bf=(c,g,w)=>(ur(c),mn(Xr(c,g),g,w)),Ls=(c,g,w)=>(ur(c),Lr(Xr(c,g),g,w)),ii=(c,g,w)=>(ur(c),hn(Xr(c,g),g,w)),qu=(c,g,w)=>(ur(c),ln(Xr(c,g),g,w)),wf=(c,g,w)=>(ur(c),In(Xr(c,g),g,w));function Oi(c,g,w,I){return ur(c),Vr(Xr(c,g),g,w,I)}const Ya=(c,g,w)=>(ur(c),Wn(Xr(c,g),g,w));function Ms(c,g,w){return ur(c),gi(Xr(c,g),g,w)}function Ml(c,g,w){return ur(c),Tr(Xr(c,g),g,w)}function Hd(c,g,w){if(ur(c),!Yt(g))throw new On(g);return Bn(Xr(c,g),g,w)}function Pa(c=Qr()){let g=en(c)?c:Qr(c);function w(ee){return(de,ke)=>(g=ee(g,de,ke),z)}function I(ee){return(de,ke)=>(g=ee(g,de,ke),z)}function L(ee){return(de,ke)=>(g=ee(g,de,ke),z)}const z={build:()=>g,addUrl:w(Wr),addIri:w(Dt),addBoolean:w(Ir),addDatetime:w(mn),addDate:w(Lr),addTime:w(hn),addDecimal:w(ln),addInteger:w(In),addStringNoLocale:w(Wn),addStringEnglish:(ee,de)=>(g=Vr(g,ee,de,"en"),z),addStringWithLocale:(ee,de,ke)=>(g=Vr(g,ee,de,ke),z),addNamedNode:w(gi),addLiteral:w(Tr),addTerm:w(Bn),setUrl:I(Ia),setIri:I(pn),setBoolean:I(Us),setDatetime:I(bf),setDate:I(Ls),setTime:I(ii),setDecimal:I(qu),setInteger:I(wf),setStringNoLocale:I(Ya),setStringEnglish:(ee,de)=>(g=Oi(g,ee,de,"en"),z),setStringWithLocale:(ee,de,ke)=>(g=Oi(g,ee,de,ke),z),setNamedNode:I(Ms),setLiteral:I(Ml),setTerm:I(Hd),removeAll:ee=>(g=Xr(g,ee),z),removeUrl:L($n),removeIri:L(nn),removeBoolean:L(Oa),removeDatetime:L(Ku),removeDate:L(Fs),removeTime:L(Gu),removeDecimal:L(Wa),removeInteger:L(Zo),removeStringNoLocale:L(Fo),removeStringEnglish:(ee,de)=>Pa(da(g,ee,de,"en")),removeStringWithLocale:(ee,de,ke)=>Pa(da(g,ee,de,ke)),removeNamedNode:L(Ll),removeLiteral:L(Ds)};return z}function jd(c){const g=_(c);return{type:"Subject",predicates:{},url:g}}function Pg(c){const g=Ze(c).type;return Array.isArray(g)&&g.includes(q.AccessControlResource)}async function Gi(c,g=ge){if(!ei(c))return{resourceAcl:null,fallbackAcl:null};try{const w=await _f(c,g);return w===null?{resourceAcl:null,fallbackAcl:await kl(c,g)}:{resourceAcl:w,fallbackAcl:null}}catch(w){if(w instanceof Bl)return{resourceAcl:null,fallbackAcl:null};throw w}}async function _f(c,g=ge){if(!ei(c))return null;try{const w=await zn(c.internal_resourceInfo.aclUrl,g);if(Pg(w))throw new Bl(c,w);return Me({...w,internal_accessTo:ve(c)})}catch(w){if(w instanceof Bl)throw w;return null}}async function kl(c,g=ge){const w=new URL(ve(c)),I=w.pathname;if(I==="/")return null;const L=Sf(I),z=new URL(L,w.origin).href,ee=await Se(z,g);if(!ei(ee))return null;const de=await _f(ee,g);return de===null?kl(ee,g):de}function Sf(c){const g=c.substring(c.length-1)==="/"?c.substring(0,c.length-1):c;return`${c.substring(0,g.lastIndexOf("/"))}/`}function ha(c){return rn(c).filter(ks)}function ks(c){return m(c,K.type).includes(P.Authorization)}function fo(c,g){return c.filter(w=>Vd(w,g))}function Vd(c,g){return m(c,P.accessTo).includes(g)}function Bs(c,g){return c.filter(w=>Hs(w,g))}function Hs(c,g){return m(c,P.default).includes(g)||m(c,P.defaultForNew).includes(g)}function es(c){const g=m(c,P.mode);return g.includes(Pn.write)?{read:g.includes(Pn.read),append:!0,write:!0,control:g.includes(Pn.control)}:{read:g.includes(Pn.read),append:g.includes(Pn.append),write:!1,control:g.includes(Pn.control)}}function ts(c){return c.reduce((g,w)=>g.write||w.write?{read:g.read||w.read,append:!0,write:!0,control:g.control||w.control}:{read:g.read||w.read,append:g.append||w.append,write:!1,control:g.control||w.control},{read:!1,append:!1,write:!1,control:!1})}function Ng(c){return ha(c).filter(Rm).reduce(Cn,c)}function Rm(c){return jt(c.predicates,or.namedNode(c.url),or.defaultGraph()).some(g=>!xm(g))?!1:hi(c,P.accessTo)===null&&hi(c,P.default)===null&&hi(c,P.defaultForNew)===null||hi(c,P.mode)===null||hi(c,P.agent)===null&&hi(c,P.agentGroup)===null&&hi(c,P.agentClass)===null}function xm(c){const{predicate:g}=c,{object:w}=c;return!!(g.equals(or.namedNode(K.type))&&w.equals(or.namedNode(P.Authorization))||g.equals(or.namedNode(P.accessTo))||g.equals(or.namedNode(P.default))||g.equals(or.namedNode(P.defaultForNew))||g.equals(or.namedNode(P.mode))&&Object.values(Pn).some(I=>w.equals(or.namedNode(I)))||g.equals(or.namedNode(P.agent))||g.equals(or.namedNode(P.agentGroup))||g.equals(or.namedNode(P.agentClass))||g.equals(or.namedNode(P.origin)))}const Pn={read:"http://www.w3.org/ns/auth/acl#Read",append:"http://www.w3.org/ns/auth/acl#Append",write:"http://www.w3.org/ns/auth/acl#Write",control:"http://www.w3.org/ns/auth/acl#Control"};function $d(c,g,w){return c.filter(I=>m(I,w).includes(g))}function Kd(c,g){const w={};return c.forEach(I=>{const L=m(I,g),z=es(I);L.forEach(ee=>{w[ee]=typeof w[ee]>"u"?z:ts([w[ee],z])})}),w}function Ef(c){let g=Qr();return g=pn(g,K.type,P.Authorization),c.read&&(g=Dt(g,P.mode,Pn.read)),c.append&&!c.write&&(g=Dt(g,P.mode,Pn.append)),c.write&&(g=Dt(g,P.mode,Pn.write)),c.control&&(g=Dt(g,P.mode,Pn.control)),g}function Qa(c){let g=Qr();g=pn(g,K.type,P.Authorization);function w(I,L,z){return m(I,z).reduce((ee,de)=>Dt(ee,z,de),L)}return g=w(c,g,P.accessTo),g=w(c,g,P.default),g=w(c,g,P.defaultForNew),g=w(c,g,P.agent),g=w(c,g,P.agentGroup),g=w(c,g,P.agentClass),g=w(c,g,P.origin),g=w(c,g,P.mode),g}function ta(c,g){return Object.assign(O(c),{internal_acl:g})}const Na=[P.agent,P.agentClass,P.agentGroup,P.origin];function Fa(c,g,w,I,L){if(!m(c,w).includes(g)){const de=Ef({read:!1,append:!1,write:!1,control:!1});return[c,de]}const z=nn(c,w,g);let ee=Qa(c);return ee=nn(ee,L==="resource"?P.accessTo:P.default,I),L==="default"&&(ee=nn(ee,P.defaultForNew,I)),ee=pn(ee,w,g),Na.filter(de=>de!==w).forEach(de=>{ee=Xr(ee,de)}),[z,ee]}function Xa(c,g,w,I,L){let z=c;rn(c).forEach(ke=>{const[Ve,Ye]=Fa(ke,L,w,c.internal_accessTo,I);z=Zr(z,Ve),z=Zr(z,Ye)});let ee=Ef(g);ee=pn(ee,I==="resource"?P.accessTo:P.default,c.internal_accessTo),ee=pn(ee,w,L);const de=Zr(z,ee);return Ng(de)}function Af(c,g){return ta(c,{resourceAcl:g,fallbackAcl:null})}function Rf(c){return c.internal_acl.resourceAcl}class Bl extends Error{constructor(g,w){super(`[${rt(g)}] is governed by Access Control Policies in [${rt(w)}] rather than by Web Access Control.`)}}function Gd(c){return typeof c.internal_acl=="object"}function pa(c){return c.internal_acl.resourceAcl!==null&&ve(c)===c.internal_acl.resourceAcl.internal_accessTo&&c.internal_resourceInfo.aclUrl===ve(c.internal_acl.resourceAcl)}async function Fg(c,g=ge){const w=await zn(c,g),I=await Gi(w,g);return ta(w,I)}async function xf(c,g=ge){const w=await Gr(c,g),I=await Gi(w,g);return ta(w,I)}async function Hl(c,g=ge){const w=await Se(c,g),I=await Gi(w,g);return ta(w,I)}function zu(c){return pa(c)?c.internal_acl.resourceAcl:null}function mi(c){return c.internal_acl.fallbackAcl!==null}function Wu(c){return mi(c)?c.internal_acl.fallbackAcl:null}function Da(c){return Me({...qn(),internal_accessTo:ve(c),internal_resourceInfo:{sourceIri:c.internal_resourceInfo.aclUrl,isRawData:!1,linkedResources:{}}})}function qd(c){const g=Da(c),w=ha(c.internal_acl.fallbackAcl);return Bs(w,c.internal_acl.fallbackAcl.internal_accessTo).map(ee=>(ee=Xr(ee,P.default),ee=Xr(ee,P.defaultForNew),ee=pn(ee,P.accessTo,ve(c)),ee=pn(ee,P.default,ve(c)),ee)).reduce(Zr,g)}async function Ju(c,g,w=ge){if(!ei(c))throw new Error(`Could not determine the location of the ACL for the Resource at [${ve(c)}]; possibly the current user does not have Control access to that Resource. Try calling \`hasAccessibleAcl()\` before calling \`saveAclFor()\`.`);return{...await U(c.internal_resourceInfo.aclUrl,g,w),internal_accessTo:ve(c)}}async function js(c,g=ge){const I=await{...ge,...g}.fetch(c.internal_resourceInfo.aclUrl,{method:"DELETE"});if(!I.ok)throw new Error(`Deleting the ACL of the Resource at [${ve(c)}] failed: [${I.status}] [${I.statusText}].`);return Object.assign(O(c),{acl:{resourceAcl:null}})}function ei(c){return typeof c.internal_resourceInfo.aclUrl=="string"}function Yu(c,g){return pa(c)?$s(c.internal_acl.resourceAcl,g):mi(c)?ga(c.internal_acl.fallbackAcl,g):null}function Vs(c){if(pa(c)){const g=zu(c);return Qu(g)}if(mi(c)){const g=Wu(c);return ya(g)}return null}function $s(c,g){const w=ha(c),I=fo(w,c.internal_accessTo),z=ho(I,g).map(es);return ts(z)}function Qu(c){const g=ha(c),w=fo(g,c.internal_accessTo),I=po(w);return zd(I)}function Xu(c,g,w){return Xa(c,w,P.agent,"resource",g)}function ga(c,g){const w=ha(c),I=Bs(w,c.internal_accessTo),z=ho(I,g).map(es);return ts(z)}function ya(c){const g=ha(c),w=Bs(g,c.internal_accessTo),I=po(w);return zd(I)}function Ks(c,g,w){return Xa(c,w,P.agent,"default",g)}function ho(c,g){return $d(c,g,P.agent)}function po(c){return c.filter(Gs)}function Gs(c){return hi(c,P.agent)!==null}function zd(c){return Kd(c,P.agent)}function Zu(c,g){return pa(c)?Fi(c.internal_acl.resourceAcl,g):mi(c)?Nn(c.internal_acl.fallbackAcl,g):null}function Tf(c){if(pa(c)){const g=zu(c);return ai(g)}if(mi(c)){const g=Wu(c);return rs(g)}return null}function Fi(c,g){const w=ha(c),I=fo(w,c.internal_accessTo),z=Za(I,g).map(es);return ts(z)}function ai(c){const g=ha(c),w=fo(g,c.internal_accessTo);return Cf(w)}function Nn(c,g){const w=ha(c),I=Bs(w,c.internal_accessTo),z=Za(I,g).map(es);return ts(z)}function rs(c){const g=ha(c),w=Bs(g,c.internal_accessTo);return Cf(w)}function Za(c,g){return $d(c,g,P.agentGroup)}function Cf(c){return Kd(c,P.agentGroup)}function ns(c,g,w){return Xa(c,w,P.agentGroup,"resource",g)}function Dg(c,g,w){return Xa(c,w,P.agentGroup,"default",g)}function Of(c){return pa(c)?jl(c.internal_acl.resourceAcl):mi(c)?Vl(c.internal_acl.fallbackAcl):null}function jl(c){const g=ha(c),w=fo(g,c.internal_accessTo),L=If(w,Y.Agent).map(es);return ts(L)}function Vl(c){const g=ha(c),w=Bs(g,c.internal_accessTo),L=If(w,Y.Agent).map(es);return ts(L)}function Wd(c,g){return Xa(c,g,P.agentClass,"resource",Y.Agent)}function ec(c,g){return Xa(c,g,P.agentClass,"default",Y.Agent)}function If(c,g){return c.filter(w=>qs(w,g))}function qs(c,g){return m(c,P.agentClass).includes(g)}function Do(c,g){return Object.assign(O(c),{internal_resourceInfo:{...c.internal_resourceInfo,aclUrl:g}})}function is(c){var g;const w=(g=c.internal_resourceInfo.aclUrl)!==null&&g!==void 0?g:"https://your.pod/mock-acl.ttl",I=Object.assign(O(c),{internal_resourceInfo:{...c.internal_resourceInfo,aclUrl:w}}),L=Da(I);return ta(I,{resourceAcl:L,fallbackAcl:null})}function Uo(c){const g=Sf(rt(c)),w=`${g}.acl`,I=Do(kr(g),w),L=Da(I);return ta(O(c),{resourceAcl:null,fallbackAcl:L})}function Pf(c,g){const w=dr(c,g);if(w===null)throw new Error(`Profile document [${ve(c)}] does not include WebID [${g}]`);return w}function Jd(c,g,w){return Zr(c,pn(Pf(c,g),$.publicKey,w))}function $l(c,g){return Zi(Pf(c,g),$.publicKey)}const Nf=c=>typeof c.keys<"u";async function as(c,g,w=ge){const L=await{...ge,...w}.fetch(g);if(!L.ok)throw new Error(`Fetching [${g}] returned an error: ${L.status} ${L.statusText}`);try{const z=await L.json();if(!Nf(z))throw new Error(`[${g}] does not dereference to a valid JWKS: ${JSON.stringify(z)}`);return{keys:[...z.keys,c]}}catch(z){throw new Error(`Parsing the document at [${g}] failed: ${z}`)}}async function Di(c,g,w=ge){const I=await zn(g,{fetch:w.fetch});if(I===null)throw new Error(`The profile document associated with WebID [${g}] could not be retrieved.`);const L=$l(I,g);if(L===null)throw new Error(`No key set is declared for the property [${$.publicKey}] in the profile of [${g}]`);const z=await as(c,L,w);return Gt(L,new Blob([JSON.stringify(z)]),{contentType:"application/json",fetch:w.fetch})}function tc(c,g){const w=dr(g,c),I=rn(g).filter(L=>m(L,Y.primaryTopic).length>0).map(xr).concat(w?m(w,B.seeAlso):[]).concat(w?m(w,Y.isPrimaryTopicOf):[]).filter(L=>L!==rt(g));return Array.from(new Set(I))}async function Yd(c,g=ge){var w,I;const L=(w=g.fetch)!==null&&w!==void 0?w:A,z=(I=g.webIdProfile)!==null&&I!==void 0?I:await zn(c,{fetch:A}),ee=(await Promise.allSettled(tc(c,z).map(de=>zn(de,{fetch:L})))).filter(de=>de.status==="fulfilled").map(de=>de.value);return{webIdProfile:z,altProfileAll:ee}}async function Tm(c,g=ge){const w=await Yd(c,g);return Ug(w,c)}function Ug(c,g){const w=new Set;return[c.webIdProfile,...c.altProfileAll].forEach(I=>{const L=dr(I,g);L!==null&&m(L,ie.storage).forEach(z=>w.add(z))}),Array.from(w)}async function Cm(c){return zn(c,{fetch:A})}function yr(c){if(!wn(c))throw new Error(`An Access Control Resource for [${ve(c)}] is not available. This could be because the current user is not allowed to see it, or because their Pod Server does not support Access Control Resources.`);return c.internal_acp.acr}function Si(c,g){return Object.assign(O(c),{internal_acp:{...c.internal_acp,acr:g}})}function Kl(c){let g=Qr(c);return g=pn(g,K.type,q.AccessControl),g}function rc(c,g,w){const I=yr(c),L=dr(I,g,w);return L===null||!m(L,K.type).includes(q.AccessControl)?null:L}function eo(c,g){const w=yr(c),I=rn(w,g),L=I.filter(ee=>m(ee,K.type).includes(q.AccessControl)),z=I.filter(ee=>m(ee,q.accessControl).length>0).map(ee=>{const de=m(ee,q.accessControl)[0];return Qr({url:de})});return L.concat(z)}function Ua(c,g){const w=yr(c),I=Zr(w,g);return Si(c,I)}function zs(c,g){return Dt(c,q.apply,g)}function Lg(c){return m(c,q.apply)}function Qd(c,g){return nn(c,q.apply,g)}function Mg(c){return Xr(c,q.apply)}function Xd(c,g){return Dt(c,q.applyMembers,g)}function Lo(c){return m(c,q.applyMembers)}function Zd(c,g){return nn(c,q.applyMembers,g)}function nc(c){return Xr(c,q.applyMembers)}function eh(c){const g=eo(c);return g.length===0?Kl():g[0]}function to(c){return f(c)&&Array.isArray(c.internal_resourceInfo.linkedResources[q.accessControl])&&c.internal_resourceInfo.linkedResources[q.accessControl].length===1}function Gl(c,g){var w;const I=yr(c),L=ve(I);let z=(w=dr(I,L))!==null&&w!==void 0?w:Qr({url:L});z=Dt(z,q.access,g);const ee=Zr(I,z);return Si(c,ee)}function Ws(c,g){var w;const I=yr(c),L=ve(I);let z=(w=dr(I,L))!==null&&w!==void 0?w:Qr({url:L});z=Dt(z,q.accessMembers,g);const ee=Zr(I,z);return Si(c,ee)}function La(c){const g=yr(c),w=ve(g),I=dr(g,w);return I===null?[]:m(I,q.access)}function Js(c){const g=yr(c),w=ve(g),I=dr(g,w);return I===null?[]:m(I,q.accessMembers)}function go(c,g){const w=yr(c),I=ve(w),L=dr(w,I);if(L===null)return c;const z=nn(L,q.access,g),ee=Zr(w,z);return Si(c,ee)}function ic(c,g){const w=yr(c),I=ve(w),L=dr(w,I);if(L===null)return c;const z=nn(L,q.accessMembers,g),ee=Zr(w,z);return Si(c,ee)}function yo(c){const g=yr(c),w=ve(g),I=dr(g,w);if(I===null)return c;const L=Xr(I,q.access),z=Zr(g,L);return Si(c,z)}function Ys(c){const g=yr(c),w=ve(g),I=dr(g,w);if(I===null)return c;const L=Xr(I,q.accessMembers),z=Zr(g,L);return Si(c,z)}function ac(c,g){const w=eh(c),I=zs(w,g);return Ua(c,I)}function mo(c,g){const w=eh(c),I=Xd(w,g);return Ua(c,I)}function ro(c){const w=eo(c).map(L=>Lg(L)),I=new Set;return w.forEach(L=>{L.forEach(z=>I.add(z))}),Array.from(I)}function Qs(c){const w=eo(c).map(L=>Lo(L)),I=new Set;return w.forEach(L=>{L.forEach(z=>I.add(z))}),Array.from(I)}function ma(c,g){return eo(c).map(z=>Qd(z,g)).reduce(Ua,c)}function vo(c,g){return eo(c).map(z=>Zd(z,g)).reduce(Ua,c)}function Mo(c){return eo(c).map(L=>Mg(L)).reduce(Ua,c)}function Xs(c){return eo(c).map(L=>nc(L)).reduce(Ua,c)}function oc(c){let g=`# Access controls for ${ve(c)}
`;const w=ro(c),I=Qs(c),L=La(c),z=Js(c);return w.length===0&&I.length===0&&L.length===0&&z.length===0&&(g+=`
<no policies specified yet>
`),w.length>0&&(g+=`
The following policies apply to this resource:
- `,g+=`${w.join(`
- `)}
`),L.length>0&&(g+=`
The following policies apply to the access control resource for this resource:
- `,g+=`${L.join(`
- `)}
`),I.length>0&&(g+=`
The following policies apply to the children of this resource:
- `,g+=`${I.join(`
- `)}
`),z.length>0&&(g+=`
The following policies apply to the access control resources for children of this resource:
- `,g+=`${z.join(`
- `)}
`),g}const Ei="http://www.w3.org/ns/solid/acp#",Nr={AccessControlResource:Ei.concat("AccessControlResource"),Matcher:Ei.concat("Matcher"),Policy:Ei.concat("Policy"),PublicAgent:Ei.concat("PublicAgent"),access:Ei.concat("access"),accessControl:Ei.concat("accessControl"),agent:Ei.concat("agent"),allOf:Ei.concat("allOf"),allow:Ei.concat("allow"),anyOf:Ei.concat("anyOf"),apply:Ei.concat("apply"),deny:Ei.concat("deny"),memberAccessControl:Ei.concat("memberAccessControl"),noneOf:Ei.concat("noneOf"),vc:Ei.concat("vc")},Ff="http://www.w3.org/ns/auth/acl#",Zs={Append:Ff.concat("Append"),Read:Ff.concat("Read"),Write:Ff.concat("Write")},ql="http://www.w3.org/ns/solid/vc#SolidAccessGrant";function os(c){const g=yr(c),w=ve(g);return dr(g,w)}const el="defaultAccessControl",tl="defaultAcrAccessControl",sc="defaultMemberAccessControl",bo="defaultMemberAcrAccessControl";function an(c,g){const w=yr(c);return ve(w).concat("#").concat(g)}function gn(c,g){const w=yr(c),I=an(c,g),L=dr(w,I);return L===null||typeof L>"u"?Qr({url:I}):L}function oi(c,g){const w=m(c,g);return{read:w.includes(Zs.Read),append:w.includes(Zs.Append),write:w.includes(Zs.Write),controlRead:!1,controlWrite:!1}}function Df(c,g){return Object.assign(O(c),{internal_acp:{acr:g}})}function rl(c,g,w){let I=Xr(c,w);return(g.read||g.controlRead)&&(I=Dt(I,w,Zs.Read)),g.append&&(I=Dt(I,w,Zs.Append)),(g.write||g.controlWrite)&&(I=Dt(I,w,Zs.Write)),I}const ss="defaultVcPolicy",lc="defaultVcMatcher";function uc(c,g,w,I){var L;let z=dr(c,g);z===null&&(z=Pa({url:g}).addIri(K.type,Nr.Policy).addIri(Nr.anyOf,w).build());const ee=(L=dr(c,w))!==null&&L!==void 0?L:Pa({url:w}).addIri(K.type,Nr.Matcher).addIri(Nr.vc,ql).build(),de=oi(z,Nr.allow);return z=rl(z,{...de,...I},Nr.allow),{matcher:ee,policy:z}}function nl(c,g,w={inherit:!1}){var I;let L=yr(c);const z=`${rt(L)}#${ss}`,ee=`${rt(L)}#${lc}`,{policy:de,matcher:ke}=uc(L,z,ee,g);let Ve=gn(c,"defaultAccessControl");m(Ve,Nr.apply).includes(xr(de))||(Ve=Dt(Ve,Nr.apply,de));let Ye=gn(c,"defaultMemberAccessControl"),Mt=(I=os(c))!==null&&I!==void 0?I:Qr({url:rt(L)});return m(Mt,Nr.accessControl).includes(xr(Ve))||(Mt=Dt(Mt,Nr.accessControl,Ve)),L=[Mt,Ve,de,ke].reduce(Zr,L),w.inherit&&(m(Ye,Nr.apply).includes(xr(de))||(Ye=Dt(Ye,Nr.apply,de)),m(Mt,Nr.memberAccessControl).includes(xr(Ye))||(Mt=Dt(Mt,Nr.memberAccessControl,Ye)),L=[Mt,Ye].reduce(Zr,L)),Df(c,L)}const th={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},si=(c,g,w)=>m(c,g).includes(xr(w));function Uf(c){const g=yr(c),w=gn(c,"defaultAccessControl"),I=os(c);if(I===null||!si(I,Nr.accessControl,w))return th;const L=`${rt(g)}#${ss}`,z=dr(g,L);if(z===null||!si(w,Nr.apply,z))return th;const ee=`${rt(g)}#${lc}`,de=dr(g,ee);return de===null||!si(z,Nr.anyOf,de)?th:oi(z,Nr.allow)}async function ls(c,g=ge){const w=_(c),I={...ge,...g},L=await zn(w,I),z=await Qn(L,I);return{...L,...z}}async function il(c,g=ge){const w=_(c),I={...ge,...g},L=await Gr(w,I),z=await Qn(L,I);return Object.assign(L,z)}async function vi(c,g=ge){const w=_(c),I={...ge,...g},L=await Se(w,I),z=await Qn(L,I);return{...L,...z}}async function zl(c,g=ge){const w=_(c),I={...ge,...g},L=await zn(w,I);if(ei(L)){const ee=await Gi(L,I);return ta(L,ee)}const z=await Qn(L,I);return{...L,...z}}async function us(c,g=ge){const w=_(c),I={...ge,...g},L=await Gr(w,I);if(ei(L)){const ee=await Gi(L,I);return ta(L,ee)}const z=await Qn(L,I);return Object.assign(L,z)}async function cs(c,g=ge){const w=_(c),I={...ge,...g},L=await Se(w,I);if(ei(L)){const ee=await Gi(L,I);return ta(L,ee)}const z=await Qn(L,I);return{...L,...z}}async function qi(c,g=ge){const w=yr(c),I={...ge,...g},L=await U(ve(w),w,I);return Si(c,L)}function wn(c){return typeof c.internal_acp=="object"&&c.internal_acp!==null&&typeof c.internal_acp.acr=="object"&&c.internal_acp.acr!==null}async function Qn(c,g){let w;if(to(c)){const{linkedResources:ee}=c.internal_resourceInfo;[w]=ee[q.accessControl]}else if(ei(c)){let ee;try{ee=await Se(c.internal_resourceInfo.aclUrl,g)}catch{}ee&&Pg(ee)&&(w=ve(ee))}if(typeof w!="string")return{internal_acp:{acr:null}};let I;try{I=await zn(w,g)}catch{return{internal_acp:{acr:null}}}return{internal_acp:{acr:{...I,accessTo:ve(c)}}}}function fs(c){const g=ro(c).map(An).concat(Qs(c).map(An)).concat(La(c).map(An)).concat(Js(c).map(An));return Array.from(new Set(g))}async function ds(c,g=ge){const w=_(c),I={...ge,...g},L=await Se(w,I);return wn(await Qn(L,I))}function Wl(c){return f(c)?[q.accessControl,"acl"].map(w=>{if(Array.isArray(c.internal_resourceInfo.linkedResources[w])&&c.internal_resourceInfo.linkedResources[w].length===1)return c.internal_resourceInfo.linkedResources[w][0]}).find(w=>w!==void 0):void 0}function cc(c){return m(c,K.type).includes(q.Rule)}function Ma(c,g){return Dt(c,q.allOf,g)}function al(c,g){return nn(c,q.allOf,g)}function Jl(c,g){return pn(c,q.allOf,g)}function ko(c){return m(c,q.allOf)}function fc(c,g){return Dt(c,q.anyOf,g)}function dc(c,g){return nn(c,q.anyOf,g)}function hc(c,g){return pn(c,q.anyOf,g)}function hs(c){return m(c,q.anyOf)}function pc(c,g){return Dt(c,q.noneOf,g)}function gc(c,g){return nn(c,q.noneOf,g)}function Yl(c,g){return pn(c,q.noneOf,g)}function wo(c){return m(c,q.noneOf)}function Lf(c){const g=_(c);let w=Qr({url:g});return w=Ia(w,K.type,q.Rule),w}function yc(c,g){const w=yr(c),I=new URL(ve(w));I.hash=`#${g}`;let L=Qr({url:I.href});return L=Ia(L,K.type,q.Rule),L}function mc(c,g){const w=dr(c,g);return w===null||Zi(w,K.type)!==q.Rule?null:w}function Mf(c,g){const w=yr(c),I=ve(w),L=new URL(I);L.hash=`#${g}`;const z=dr(w,L.href);return z===null||!cc(z)?null:z}function Ql(c){return rn(c).filter(cc)}function rh(c){const g=yr(c);return rn(g).filter(cc)}function vc(c,g){return Cn(c,g)}function nh(c,g){const w=yr(c);let I;if(typeof g=="string")if(Yt(g))I=g;else{const de=new URL(ve(w));de.hash=`#${g}`,I=de.href}else j(g)?I=_(g):I=bn(g);const L=Mf(c,new URL(I).hash.substring(1));if(L===null)return c;const z=Cn(w,L);return Si(c,z)}function bc(c,g){return Zr(c,g)}function ol(c,g){const w=yr(c),I=Zr(w,g);return Si(c,I)}function wc(c){return m(c,q.agent).filter(g=>g!==q.PublicAgent&&g!==q.AuthenticatedAgent&&g!==q.CreatorAgent)}function _c(c,g){const w=ul(c),I=cl(c),L=fl(c);let z=pn(c,q.agent,g);return w&&(z=Ec(z)),I&&(z=Ac(z)),L&&(z=xc(z)),z}function Bo(c,g){return Dt(c,q.agent,g)}function sl(c,g){return nn(c,q.agent,g)}function Xl(c){return m(c,q.group)}function ll(c,g){return pn(c,q.group,g)}function ps(c,g){return Dt(c,q.group,g)}function Sc(c,g){return nn(c,q.group,g)}function ul(c){return m(c,q.agent).filter(g=>g===q.PublicAgent).length>0}function Ec(c){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return Dt(c,q.agent,q.PublicAgent)}function kf(c){return nn(c,q.agent,q.PublicAgent)}function cl(c){return m(c,q.agent).filter(g=>g===q.AuthenticatedAgent).length>0}function Ac(c){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return Dt(c,q.agent,q.AuthenticatedAgent)}function Rc(c){return nn(c,q.agent,q.AuthenticatedAgent)}function fl(c){return m(c,q.agent).filter(g=>g===q.CreatorAgent).length>0}function xc(c){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return Dt(c,q.agent,q.CreatorAgent)}function Tc(c){return nn(c,q.agent,q.CreatorAgent)}function Bf(c){return m(c,q.client).filter(g=>g!==Pe.PublicOidcClient)}function ih(c,g){const w=Cc(c);let I=pn(c,q.client,g);return w&&(I=jf(I)),I}function kg(c,g){return Dt(c,q.client,g)}function Hf(c,g){return nn(c,q.client,g)}function Cc(c){return m(c,q.client).filter(g=>g===Pe.PublicOidcClient).length>0}function jf(c){return Dt(c,q.client,Pe.PublicOidcClient)}function Vf(c){return nn(c,q.client,Pe.PublicOidcClient)}function Oc(c){let g=`## Rule: ${bn(c)}

`,w="";ul(c)&&(w+=`- Everyone
`),cl(c)&&(w+=`- All authenticated agents
`),fl(c)&&(w+=`- The creator of this resource
`),Cc(c)&&(w+=`- Users of any client application
`);const I=wc(c);I.length>0&&(w+=`- The following agents:
  - `,w+=`${I.join(`
  - `)}
`);const L=Xl(c);L.length>0&&(w+=`- Members of the following groups:
  - `,w+=`${L.join(`
  - `)}
`);const z=Bf(c);return z.length>0&&(w+=`- Users of the following client applications:
  - `,w+=`${z.join(`
  - `)}
`),g+=w.length>0?`This rule applies to:
${w}`:`<empty>
`,g}function dl(c){return m(c,K.type).includes(q.Policy)}function Zl(c){const g=_(c);let w=Qr({url:g});return w=Ia(w,K.type,q.Policy),w}function eu(c,g){const w=dr(c,g);return w===null||!dl(w)?null:w}function hl(c){return rn(c).filter(I=>!xi(I)&&dl(I))}function _o(c,g){return Cn(c,g)}function gs(c,g){return Zr(c,g)}function pl(c,g){let w=Xr(c,q.allow);return g.read===!0&&(w=Dt(w,q.allow,Pn.read)),g.append===!0&&(w=Dt(w,q.allow,Pn.append)),g.write===!0&&(w=Dt(w,q.allow,Pn.write)),w}function gl(c,g){let w=Xr(c,q.allow);return g.read===!0&&(w=Dt(w,q.allow,q.Read)),g.append===!0&&(w=Dt(w,q.allow,q.Append)),g.write===!0&&(w=Dt(w,q.allow,q.Write)),w}function Ic(c){const g=m(c,q.allow);return{read:g.includes(Pn.read),append:g.includes(Pn.append),write:g.includes(Pn.write)}}function So(c){const g=m(c,q.allow);return{read:g.includes(q.Read),append:g.includes(q.Append),write:g.includes(q.Write)}}function ah(c,g){let w=Xr(c,q.deny);return g.read===!0&&(w=Dt(w,q.deny,Pn.read)),g.append===!0&&(w=Dt(w,q.deny,Pn.append)),g.write===!0&&(w=Dt(w,q.deny,Pn.write)),w}function Pc(c,g){let w=Xr(c,q.deny);return g.read===!0&&(w=Dt(w,q.deny,q.Read)),g.append===!0&&(w=Dt(w,q.deny,q.Append)),g.write===!0&&(w=Dt(w,q.deny,q.Write)),w}function $f(c){const g=m(c,q.deny);return{read:g.includes(Pn.read),append:g.includes(Pn.append),write:g.includes(Pn.write)}}function ka(c){const g=m(c,q.deny);return{read:g.includes(q.Read),append:g.includes(q.Append),write:g.includes(q.Write)}}function ra(c,g){const w=yr(c),I=new URL(ve(w));I.hash=`#${g}`;let L=Qr({url:I.href});return L=Ia(L,K.type,q.Policy),L}function ys(c,g){const w=yr(c),I=ve(w),L=new URL(I);L.hash=`#${g}`;const z=dr(w,L.href);return!ro(c).includes(L.href)||z===null||!dl(z)?null:z}function Ho(c,g){const w=yr(c),I=ve(w),L=new URL(I);L.hash=`#${g}`;const z=dr(w,L.href);return!La(c).includes(L.href)||z===null||!dl(z)?null:z}function yl(c){const g=yr(c);return ro(c).map(z=>dr(g,z)).filter(z=>z!==null&&dl(z))}function Nc(c){const g=yr(c);return La(c).map(z=>dr(g,z)).filter(z=>z!==null&&dl(z))}function Fc(c,g){const w=yr(c);let I=g;if(typeof I=="string"&&Yt(I)===!1){const ke=new URL(ve(w));ke.hash=`#${g}`,I=ke.href}let L;if(typeof I=="string"?L=I:j(I)?L=_(I):L=bn(I,ve(w)),ys(c,new URL(L).hash.substring(1))===null)return c;const ee=Cn(w,I),de=Si(c,ee);return ma(de,L)}function jo(c,g){const w=yr(c);let I=g;if(typeof I=="string"&&Yt(I)===!1){const ke=new URL(ve(w));ke.hash=`#${g}`,I=ke.href}let L;if(typeof I=="string"?L=I:j(I)?L=_(I):L=bn(I,ve(w)),Ho(c,new URL(L).hash.substring(1))===null)return c;const ee=Cn(w,I),de=Si(c,ee);return go(de,L)}function ml(c,g){const w=yr(c),I=Zr(w,g),L=Si(c,I),z=bn(g,ve(w));return ac(L,z)}function Ii(c,g){const w=yr(c),I=Zr(w,g),L=Si(c,I),z=bn(g,ve(w));return Gl(L,z)}function va(c){function g(ke,Ve){return Ve?"denied":ke?"allowed":"unspecified"}const w=So(c),I=ka(c);let L=`## Policy: ${bn(c)}

`;L+=`- Read: ${g(w.read,I.read)}
`,L+=`- Append: ${g(w.append,I.append)}
`,L+=`- Write: ${g(w.write,I.write)}
`;const z=ko(c),ee=hs(c),de=wo(c);return z.length===0&&ee.length===0&&de.length===0&&(L+=`
<no rules specified yet>
`),z.length>0&&(L+=`
All of these rules should match:
`,L+=`- ${z.join(`
- `)}
`),ee.length>0&&(L+=`
At least one of these rules should match:
`,L+=`- ${ee.join(`
- `)}
`),de.length>0&&(L+=`
None of these rules should match:
`,L+=`- ${de.join(`
- `)}
`),L}function na(c){const g=new URL("access-control-resource",c).href;return{...Qt(g),accessTo:c}}function vl(c,g=na(ve(c))){return Object.assign(O(c),{internal_acp:{acr:g,aprs:{}}})}const ms={getFileWithAccessDatasets:us,getFileWithAcr:il,getReferencedPolicyUrlAll:fs,getResourceInfoWithAccessDatasets:cs,getResourceInfoWithAcr:vi,getSolidDatasetWithAccessDatasets:zl,getSolidDatasetWithAcr:ls,hasAccessibleAcr:wn,saveAcrFor:qi},Vo={acrAsMarkdown:oc,addAcrPolicyUrl:Gl,addMemberAcrPolicyUrl:Ws,addMemberPolicyUrl:mo,addPolicyUrl:ac,getAcrPolicyUrlAll:La,getMemberAcrPolicyUrlAll:Js,getMemberPolicyUrlAll:Qs,getPolicyUrlAll:ro,hasLinkedAcr:to,removeAcrPolicyUrl:go,removeAcrPolicyUrlAll:yo,removeMemberAcrPolicyUrl:ic,removeMemberAcrPolicyUrlAll:Ys,removeMemberPolicyUrl:vo,removeMemberPolicyUrlAll:Xs,removePolicyUrl:ma,removePolicyUrlAll:Mo},Ai={createPolicy:Zl,getAllowModes:So,getDenyModes:ka,getPolicy:eu,getPolicyAll:hl,policyAsMarkdown:va,removePolicy:_o,setAllowModes:gl,setDenyModes:Pc,setPolicy:gs},Kf={addAgent:Bo,addForbiddenRuleUrl:pc,addGroup:ps,addOptionalRuleUrl:fc,addRequiredRuleUrl:Ma,createRule:Lf,getAgentAll:wc,getForbiddenRuleUrlAll:wo,getGroupAll:Xl,getOptionalRuleUrlAll:hs,getRequiredRuleUrlAll:ko,getRule:mc,getRuleAll:Ql,hasAuthenticated:cl,hasCreator:fl,hasPublic:ul,removeAgent:sl,removeForbiddenRuleUrl:gc,removeGroup:Sc,removeOptionalRuleUrl:dc,removeRequiredRuleUrl:al,removeRule:vc,ruleAsMarkdown:Oc,setAgent:_c,setForbiddenRuleUrl:Yl,setGroup:ll,setOptionalRuleUrl:hc,setRequiredRuleUrl:Jl,setRule:bc},oh={addMockAcrTo:vl,mockAcrFor:na};function Gf(c,g){return g?Ec(c):kf(c)}function sh(c,g){return g?Ac(c):Rc(c)}function lh(c,g){return g?xc(c):Tc(c)}const qf={...ms,...Vo,...Ai,...Kf,...oh,...{getForbiddenRuleurlAll:wo,setPublic:Gf,setAuthenticated:sh,setCreator:lh}},Hg={...{getFileWithAccessDatasets:us,getFileWithAcr:il,getReferencedPolicyUrlAll:fs,getResourceInfoWithAccessDatasets:cs,getResourceInfoWithAcr:vi,getSolidDatasetWithAccessDatasets:zl,getSolidDatasetWithAcr:ls,hasAccessibleAcr:wn,saveAcrFor:qi},...{createPolicy:Zl,getAllowModes:So,getDenyModes:ka,getPolicy:eu,getPolicyAll:hl,policyAsMarkdown:va,removePolicy:_o,setAllowModes:gl,setDenyModes:Pc,setPolicy:gs},...{addAgent:Bo,addForbiddenRuleUrl:pc,addGroup:ps,addOptionalRuleUrl:fc,addRequiredRuleUrl:Ma,createRule:Lf,getAgentAll:wc,getForbiddenRuleUrlAll:wo,getGroupAll:Xl,getOptionalRuleUrlAll:hs,getRequiredRuleUrlAll:ko,getRule:mc,getRuleAll:Ql,hasAuthenticated:cl,hasCreator:fl,hasPublic:ul,removeAgent:sl,removeForbiddenRuleUrl:gc,removeGroup:Sc,removeOptionalRuleUrl:dc,removeRequiredRuleUrl:al,removeRule:vc,ruleAsMarkdown:Oc,setAgent:_c,setForbiddenRuleUrl:Yl,setGroup:ll,setOptionalRuleUrl:hc,setRequiredRuleUrl:Jl,setRule:bc},...{addMockAcrTo:vl,mockAcrFor:na},...{hasLinkedAcr:to,addAcrPolicyUrl:Gl,addMemberAcrPolicyUrl:Ws,getAcrPolicyUrlAll:La,getMemberAcrPolicyUrlAll:Js,removeAcrPolicyUrl:go,removeAcrPolicyUrlAll:yo,removeMemberAcrPolicyUrl:ic,removeMemberAcrPolicyUrlAll:Ys},...{createControl:Kl,getControl:rc,getAllControl:eo,getControlAll:eo,setControl:Ua,removeControl:jg,addPolicyUrl:zs,getPolicyUrlAll:Lg,removePolicyUrl:Qd,removePolicyUrlAll:Mg,addMemberPolicyUrl:Xd,getMemberPolicyUrlAll:Lo,removeMemberPolicyUrl:Lo,removeMemberPolicyUrlAll:nc,getForbiddenRuleurlAll:wo,setPublic:Gf,setAuthenticated:sh,setCreator:lh}};function jg(c,g){const w=yr(c),I=Cn(w,g);return Si(c,I)}const Vg={...{getFileWithAccessDatasets:us,getFileWithAcr:il,getLinkedAcrUrl:Wl,getReferencedPolicyUrlAll:fs,getResourceInfoWithAccessDatasets:cs,getResourceInfoWithAcr:vi,getSolidDatasetWithAccessDatasets:zl,getSolidDatasetWithAcr:ls,hasAccessibleAcr:wn,saveAcrFor:qi,isAcpControlled:ds},...{acrAsMarkdown:oc,addAcrPolicyUrl:Gl,addMemberAcrPolicyUrl:Ws,addMemberPolicyUrl:mo,addPolicyUrl:ac,getAcrPolicyUrlAll:La,getMemberAcrPolicyUrlAll:Js,getMemberPolicyUrlAll:Qs,getPolicyUrlAll:ro,hasLinkedAcr:to,removeAcrPolicyUrl:go,removeAcrPolicyUrlAll:yo,removeMemberAcrPolicyUrl:ic,removeMemberAcrPolicyUrlAll:Ys,removeMemberPolicyUrl:vo,removeMemberPolicyUrlAll:Xs,removePolicyUrl:ma,removePolicyUrlAll:Mo},...{createPolicy:Zl,getAllowModes:So,getDenyModes:ka,getPolicy:eu,getPolicyAll:hl,policyAsMarkdown:va,removePolicy:_o,setAllowModes:gl,setDenyModes:Pc,setPolicy:gs,createResourcePolicyFor:ra,getResourceAcrPolicy:Ho,getResourceAcrPolicyAll:Nc,getResourcePolicy:ys,getResourcePolicyAll:yl,removeResourceAcrPolicy:jo,removeResourcePolicy:Fc,setResourceAcrPolicy:Ii,setResourcePolicy:ml},...{addAgent:Bo,addGroup:ps,createRule:Lf,getAgentAll:wc,getGroupAll:Xl,getRule:mc,getRuleAll:Ql,removeAgent:sl,removeGroup:Sc,removeRule:vc,ruleAsMarkdown:Oc,setAgent:_c,setGroup:ll,setRule:bc,addClient:kg,getClientAll:Bf,hasAnyClient:Cc,removeClient:Hf,setAnyClient:jf,setClient:ih,removeAnyClient:Vf,hasAuthenticated:cl,hasCreator:fl,hasPublic:ul,setAuthenticated:Ac,setCreator:xc,setPublic:Ec,removeAuthenticated:Rc,removeCreator:Tc,removePublic:kf,getAnyOfRuleUrlAll:hs,addAnyOfRuleUrl:fc,removeAnyOfRuleUrl:dc,setAnyOfRuleUrl:hc,getAllOfRuleUrlAll:ko,addAllOfRuleUrl:Ma,removeAllOfRuleUrl:al,setAllOfRuleUrl:Jl,getNoneOfRuleUrlAll:wo,addNoneOfRuleUrl:pc,removeNoneOfRuleUrl:gc,setNoneOfRuleUrl:Yl,createResourceRuleFor:yc,getResourceRule:Mf,getResourceRuleAll:rh,removeResourceRule:nh,setResourceRule:ol},...{addMockAcrTo:vl,mockAcrFor:na}};function ba(c,g){return Object.assign(O(c),{internal_acp:{...c.internal_acp,acr:Zr(c.internal_acp.acr,g)}})}function ch(c){return c.includes("Member")?Nr.memberAccessControl:Nr.accessControl}function Dc(c,g){const w=an(c,g),I=yr(c);let L=os(c);return(L===null||typeof L>"u")&&(L=Qr({url:ve(I)})),m(L,ch(g)).includes(w)?c:(L=Pa(L).addUrl(ch(g),w).build(),ba(c,L))}function ru(c,g){const w=Dc(c,tl),I=gn(w,tl);return ba(w,Pa(I).addUrl(Nr.access,g).build())}function zf(c,g){const w=Dc(c,bo),I=gn(w,bo);return ba(w,Pa(I).addUrl(Nr.access,g).build())}function fh(c,g){const w=Dc(c,sc),I=gn(w,sc);return ba(w,Pa(I).addUrl(Nr.apply,g).build())}function Wf(c,g){const w=Dc(c,el),I=gn(w,el);return ba(w,Pa(I).addUrl(Nr.apply,g).build())}function dh(c){const g=os(c);return g===null?[]:m(g,Nr.accessControl)}function nu(c,g,w){const I=yr(c);return Array.from(new Set(g.map(L=>{const z=dr(I,L);return z!==null?m(z,w):[]}).reduce((L,z)=>L.concat(z),[])))}function Uc(c){return nu(c,dh(c),Nr.access)}function Jf(c){const g=os(c);return g===null?[]:m(g,Nr.memberAccessControl)}function hh(c){return nu(c,Jf(c),Nr.access)}function Yf(c){return nu(c,Jf(c),Nr.apply)}function iu(c){return nu(c,dh(c),Nr.apply)}function Qf(c,g){const w=gn(c,tl);return ba(c,nn(w,Nr.access,g))}function ph(c,g){const w=gn(c,bo);return ba(c,nn(w,Nr.access,g))}function Xf(c,g){const w=gn(c,sc);return ba(c,nn(w,Nr.apply,g))}function gh(c,g){const w=gn(c,el);return ba(c,nn(w,Nr.apply,g))}function Eo(c,g){return ba(c,g)}function au(c){return m(c,K.type).includes(q.Matcher)}function $g(c,g){return Dt(c,q.allOf,g)}function yh(c,g){return nn(c,q.allOf,g)}function Ao(c,g){return pn(c,q.allOf,g)}function Lc(c){return m(c,q.allOf)}function Mc(c,g){return Dt(c,q.anyOf,g)}function ou(c,g){return nn(c,q.anyOf,g)}function ri(c,g){return pn(c,q.anyOf,g)}function Zf(c){return m(c,q.anyOf)}function Kg(c,g){return Dt(c,q.noneOf,g)}function mh(c,g){return nn(c,q.noneOf,g)}function su(c,g){return pn(c,q.noneOf,g)}function no(c){return m(c,q.noneOf)}function vh(c){const g=_(c);let w=Qr({url:g});return w=Ia(w,K.type,q.Matcher),w}function kc(c,g){const w=yr(c),I=new URL(ve(w));I.hash=`#${g}`;let L=Qr({url:I.href});return L=Ia(L,K.type,q.Matcher),L}function lu(c,g){const w=dr(c,g);return w===null||!au(w)?null:w}function Ba(c,g){const w=yr(c),I=ve(w),L=new URL(I);L.hash=`#${g}`;const z=dr(w,L.href);return z===null||!au(z)?null:z}function bh(c){return rn(c).filter(au)}function ed(c){const g=yr(c);return rn(g).filter(au)}function wh(c,g){return Cn(c,g)}function td(c,g){const w=yr(c);let I;if(typeof g=="string")if(Yt(g))I=g;else{const de=new URL(ve(w));de.hash=`#${g}`,I=de.href}else j(g)?I=_(g):I=bn(g);const L=Ba(c,new URL(I).hash.substring(1));if(L===null)return c;const z=Cn(w,L);return Si(c,z)}function rd(c,g){return Zr(c,g)}function $o(c,g){const w=yr(c),I=Zr(w,g);return Si(c,I)}function _h(c){return m(c,q.agent).filter(g=>g!==q.PublicAgent&&g!==q.AuthenticatedAgent&&g!==q.CreatorAgent)}function Ro(c,g){const w=nd(c),I=id(c),L=Li(c);let z=pn(c,q.agent,g);return w&&(z=bi(z)),I&&(z=ad(z)),L&&(z=io(z)),z}function li(c,g){return Dt(c,q.agent,g)}function Bc(c,g){return nn(c,q.agent,g)}function nd(c){return m(c,q.agent).filter(g=>g===q.PublicAgent).length>0}function bi(c){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setPublic` no longer takes a second parameter. It is now used together with `removePublic` instead.");return Dt(c,q.agent,q.PublicAgent)}function Gg(c){return nn(c,q.agent,q.PublicAgent)}function id(c){return m(c,q.agent).filter(g=>g===q.AuthenticatedAgent).length>0}function ad(c){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setAuthenticated` no longer takes a second parameter. It is now used together with `removeAuthenticated` instead.");return Dt(c,q.agent,q.AuthenticatedAgent)}function ti(c){return nn(c,q.agent,q.AuthenticatedAgent)}function Li(c){return m(c,q.agent).filter(g=>g===q.CreatorAgent).length>0}function io(c){if(typeof arguments=="object"&&typeof arguments[1]=="boolean")throw new Error("The function `setCreator` no longer takes a second parameter. It is now used together with `removeCreator` instead.");return Dt(c,q.agent,q.CreatorAgent)}function Sh(c){return nn(c,q.agent,q.CreatorAgent)}function Eh(c){return m(c,q.client).filter(g=>g!==Pe.PublicOidcClient).concat(Fe(c,q.client))}function Um(c,g){const w=Ha(c);let I=pn(c,q.client,g);return w&&(I=Ah(I)),I}function od(c,g){return Yt(g)?Dt(c,q.client,g):Wn(c,q.client,g)}function ia(c,g){return Yt(g)?nn(c,q.client,g):Fo(c,q.client,g)}function Ha(c){return m(c,q.client).filter(g=>g===Pe.PublicOidcClient).length>0}function Ah(c){return Dt(c,q.client,Pe.PublicOidcClient)}function wa(c){return nn(c,q.client,Pe.PublicOidcClient)}const Rh={...{getFileWithAccessDatasets:us,getFileWithAcr:il,getReferencedPolicyUrlAll:fs,getResourceInfoWithAccessDatasets:cs,getResourceInfoWithAcr:vi,getSolidDatasetWithAccessDatasets:zl,getSolidDatasetWithAcr:ls,hasAccessibleAcr:wn,saveAcrFor:qi,isAcpControlled:ds,getVcAccess:Uf,setVcAccess:nl},...{addAcrPolicyUrl:ru,addMemberAcrPolicyUrl:zf,addMemberPolicyUrl:fh,addPolicyUrl:Wf,getAcrPolicyUrlAll:Uc,getMemberAcrPolicyUrlAll:hh,getMemberPolicyUrlAll:Yf,getPolicyUrlAll:iu,hasLinkedAcr:to,removeAcrPolicyUrl:Qf,removeAcrPolicyUrlAll:yo,removeMemberAcrPolicyUrl:ph,removeMemberAcrPolicyUrlAll:Ys,removeMemberPolicyUrl:Xf,removeMemberPolicyUrlAll:Xs,removePolicyUrl:gh,removePolicyUrlAll:Mo},...{createPolicy:Zl,getAllowModes:Ic,getDenyModes:$f,getPolicy:eu,getPolicyAll:hl,removePolicy:_o,setAllowModes:pl,setDenyModes:ah,setPolicy:gs,createResourcePolicyFor:ra,getResourceAcrPolicy:Ho,getResourceAcrPolicyAll:Nc,getResourcePolicy:ys,getResourcePolicyAll:yl,removeResourceAcrPolicy:jo,removeResourcePolicy:Fc,setResourcePolicy:Eo},...{addAgent:li,createMatcher:vh,getAgentAll:_h,getMatcher:lu,getMatcherAll:bh,removeAgent:Bc,removeMatcher:wh,setAgent:Ro,setMatcher:rd,addClient:od,getClientAll:Eh,hasAnyClient:Ha,removeClient:ia,setAnyClient:Ah,setClient:Um,removeAnyClient:wa,hasAuthenticated:id,hasCreator:Li,hasPublic:nd,setAuthenticated:ad,setCreator:io,setPublic:bi,removeAuthenticated:ti,removeCreator:Sh,removePublic:Gg,getAnyOfMatcherUrlAll:Zf,addAnyOfMatcherUrl:Mc,removeAnyOfMatcherUrl:ou,setAnyOfMatcherUrl:ri,getAllOfMatcherUrlAll:Lc,addAllOfMatcherUrl:$g,removeAllOfMatcherUrl:yh,setAllOfMatcherUrl:Ao,getNoneOfMatcherUrlAll:no,addNoneOfMatcherUrl:Kg,removeNoneOfMatcherUrl:mh,setNoneOfMatcherUrl:su,createResourceMatcherFor:kc,getResourceMatcher:Ba,getResourceMatcherAll:ed,removeResourceMatcher:td,setResourceMatcher:$o},...{addMockAcrTo:vl,mockAcrFor:na}},ja=[q.agent,q.group];function _l(c,g,w){if(c.inaccessibleUrls.length>0)return null;const I=c.acrPolicies.filter(Ye=>Ko(Ye,g,w,c)),L=c.policies.filter(Ye=>Ko(Ye,g,w,c)),z={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},ee=I.reduce((Ye,Mt)=>{const Kt={...Ye},nr=So(Mt);return nr.read&&(Kt.controlRead=!0),nr.write&&(Kt.controlWrite=!0),Kt},z),de=L.reduce((Ye,Mt)=>{const Kt={...Ye},nr=So(Mt);return nr.read&&(Kt.read=!0),nr.append&&(Kt.append=!0),nr.write&&(Kt.write=!0),Kt},ee),ke=I.reduce((Ye,Mt)=>{const Kt={...Ye},nr=ka(Mt);return nr.read===!0&&(Kt.controlRead=!1),nr.write===!0&&(Kt.controlWrite=!1),Kt},de);return L.reduce((Ye,Mt)=>{const Kt={...Ye},nr=ka(Mt);return nr.read===!0&&(Kt.read=!1),nr.append===!0&&(Kt.append=!1),nr.write===!0&&(Kt.write=!1),Kt},ke)}function cu(c,g){return _l(c,q.agent,g)}function Hc(c,g){return _l(c,q.group,g)}function jc(c){return _l(c,q.agent,q.PublicAgent)}function Ko(c,g,w,I){const L=m(c,q.allow),z=m(c,q.deny);if(L.length+z.length===0)return!1;const ee=ko(c).map(Ve=>I.rules.find(Ye=>xr(Ye)===Ve)),de=hs(c).map(Ve=>I.rules.find(Ye=>xr(Ye)===Ve)),ke=wo(c).map(Ve=>I.rules.find(Ye=>xr(Ye)===Ve));return ee.every(Ve=>Th(Ve,g,w))&&(de.length===0||de.some(Ve=>Th(Ve,g,w)))&&ke.length===0}function xh(c,g){const w=m(c,q.allow),I=m(c,q.deny);return g.read===!0&&I.includes(q.Read)||g.read===!1&&w.includes(q.Read)&&!I.includes(q.Read)||g.append===!0&&I.includes(q.Append)||g.append===!1&&w.includes(q.Append)&&!I.includes(q.Append)||g.write===!0&&I.includes(q.Write)||g.write===!1&&w.includes(q.Write)&&!I.includes(q.Write)}function Th(c,g,w){let I=!0;return ja.forEach(L=>{I&&(I=hi(c,L)===null)}),I||m(c,g).includes(w)}function Vc(c,g){const w=new Set;return c.rules.forEach(I=>{m(I,g).filter(L=>![q.PublicAgent,q.CreatorAgent,q.AuthenticatedAgent].includes(L)||g!==q.agent).forEach(L=>w.add(L))}),w}function Ch(c,g){if(c.inaccessibleUrls.length>0)return null;const w={};return Vc(c,g).forEach(L=>{const z=_l(c,g,L);w[L]=z}),w}function sd(c){return Ch(c,q.group)}function zg(c){return Ch(c,q.agent)}function Oh(c,g,w,I,L){var z,ee,de,ke,Ve;if(!wn(c)||g.inaccessibleUrls.length>0)return null;const Ye=_l(g,w,I);if(Ye===null)return null;const Mt=g.acrPolicies.filter(Cr=>Ko(Cr,w,I,g)),Kt=g.policies.filter(Cr=>Ko(Cr,w,I,g)),nr=Mt.filter(Cr=>xh(Cr,{read:L.controlRead,write:L.controlWrite})),Pr=Kt.filter(Cr=>xh(Cr,{read:L.read,append:L.append,write:L.write})),un=nr.filter(Cr=>yn(Cr,w,I,g)),Jr=Pr.filter(Cr=>yn(Cr,w,I,g)),Va={...g,acrPolicies:g.acrPolicies.filter(Cr=>!un.includes(Cr)),policies:g.policies.filter(Cr=>!Jr.includes(Cr))},jn=_l(Va,w,I);if(jn===null)return null;let Er=c;un.forEach(Cr=>{const[on,zo]=Mn(Cr,c,g,w,I);Er=Ii(Er,on),Er=zo.reduce(ol,Er)}),Jr.forEach(Cr=>{const[on,zo]=Mn(Cr,c,g,w,I);Er=ml(Er,on),Er=zo.reduce(ol,Er)});const ki=`rule_${encodeURIComponent(`${w}_${I}`)}`;let wi=yc(c,ki);wi=pn(wi,w,I);const oa=(z=L.controlRead)!==null&&z!==void 0?z:Ye.controlRead,Bi=(ee=L.controlWrite)!==null&&ee!==void 0?ee:Ye.controlWrite;let Ss=un;if(oa!==jn.controlRead||Bi!==jn.controlWrite){const Cr=u.v4();let on=ra(c,Cr);on=gl(on,{read:oa===!0,append:!1,write:Bi===!0}),on=Dt(on,q.allOf,wi),Er=Ii(Er,on),Er=ol(Er,wi),Ss=nr}const so=(de=L.read)!==null&&de!==void 0?de:Ye.read,tf=(ke=L.append)!==null&&ke!==void 0?ke:Ye.append,rf=(Ve=L.write)!==null&&Ve!==void 0?Ve:Ye.write;let xl=Jr;if(so!==jn.read||tf!==jn.append||rf!==jn.write){const Cr=u.v4();let on=ra(c,Cr);on=gl(on,{read:so===!0,append:tf===!0,write:rf===!0}),on=Dt(on,q.allOf,wi),Er=ml(Er,on),Er=ol(Er,wi),xl=Pr}return Ss.forEach(Cr=>{Er=go(Er,xr(Cr))}),xl.forEach(Cr=>{Er=ma(Er,xr(Cr))}),Er}function Mm(c,g,w,I){return Oh(c,g,q.agent,w,I)}function Hn(c,g,w,I){return Oh(c,g,q.group,w,I)}function Xn(c,g,w){return Oh(c,g,q.agent,q.PublicAgent,w)}function yn(c,g,w,I){const z=m(c,q.allOf).map(Ye=>I.rules.find(Mt=>xr(Mt)===Ye)).some(Ye=>_n(Ye,g,w)),de=m(c,q.anyOf).map(Ye=>I.rules.find(Mt=>xr(Mt)===Ye)).some(Ye=>_n(Ye,g,w)),Ve=m(c,q.noneOf).map(Ye=>I.rules.find(Mt=>xr(Mt)===Ye)).some(Ye=>_n(Ye,g,w));return z||de||Ve}function _n(c,g,w){const I=[];return ja.forEach(L=>{const z=m(c,L).filter(ee=>ee!==w||L!==g);I.push(...z)}),I.length>0}function Mn(c,g,w,I,L){const z=u.v4(),ee=zi(m(c,q.allOf),g,w,z,I,L),de=zi(m(c,q.anyOf),g,w,z,I,L),ke=zi(m(c,q.noneOf),g,w,z,I,L);let Ve=ra(g,encodeURI(xr(c))+z);return m(c,q.allow).forEach(Ye=>{Ve=Dt(Ve,q.allow,Ye)}),m(c,q.deny).forEach(Ye=>{Ve=Dt(Ve,q.deny,Ye)}),ee.forEach(Ye=>{Ve=Dt(Ve,q.allOf,Ye)}),de.forEach(Ye=>{Ve=Dt(Ve,q.anyOf,Ye)}),ke.forEach(Ye=>{Ve=Dt(Ve,q.noneOf,Ye)}),[Ve,ee.concat(de).concat(ke)]}function zi(c,g,w,I,L,z){return c.map(ee=>{const de=w.rules.find(Ye=>xr(Ye)===ee);if(typeof de>"u")return null;let ke=yc(g,encodeURI(xr(de))+I),Ve=!1;return ja.forEach(Ye=>{m(de,Ye).forEach(Mt=>{Ye===L&&Mt===z||(Ve=!0,ke=Dt(ke,Ye,Mt))})}),Ve?ke:null}).filter(ao)}function ao(c){return c!==null}async function _a(c,g=ge){const w=La(c),I=ro(c),L=xo(w).concat(xo(I)),z=await ui(L,g),ee=To(w,z).filter(ao),de=To(I,z).filter(ao),ke=new Set;ee.forEach(Jr=>{vs(Jr).forEach(jn=>{ke.add(jn)})}),de.forEach(Jr=>{vs(Jr).forEach(jn=>{ke.add(jn)})});const Ve=Array.from(ke),Mt=Ve.map(Jr=>$c(Jr)).filter(Jr=>!L.includes(Jr)),Kt=await ui(Mt,g),nr={...z,...Kt},Pr=To(Ve,nr).filter(ao);return{inaccessibleUrls:Object.keys(nr).filter(Jr=>nr[Jr]===null),acrPolicies:ee,policies:de,rules:Pr}}function $c(c){const g=new URL(c);return g.hash="",g.href}function xo(c){const g=[];return c.forEach(w=>{const I=$c(w);g.includes(I)||g.push(I)}),g}async function ui(c,g){const w=Array.from(new Set(c)),I={};return await Promise.all(w.map(async L=>{try{const z=await zn(L,g);I[L]=z}catch{I[L]=null}})),I}function To(c,g){return c.map(w=>{const I=$c(w),L=g[I];return L?dr(L,w):null})}function vs(c){return ko(c).concat(hs(c)).concat(wo(c))}function ld(c,g){var w,I,L,z;if(c.controlRead!==c.controlWrite)throw new Error("For Pods using Web Access Control, controlRead and controlWrite must be equal.");return{read:(w=c.read)!==null&&w!==void 0?w:g.read,append:(I=c.append)!==null&&I!==void 0?I:g.append,write:(L=c.write)!==null&&L!==void 0?L:g.write,control:(z=c.controlRead)!==null&&z!==void 0?z:g.control}}function aa(c){return{read:c.read,write:c.write,append:c.append,controlRead:c.control,controlWrite:c.control}}async function Sl(c,g,w,I){const L=await Gi(c,I),z=w(ta(c,L),g);return z===null?null:aa(z)}async function Kc(c,g,w){const I=await Gi(c,w),L=g(ta(c,I));return L===null?null:aa(L)}async function Wi(c,g,w){const I=await Gi(c,w),L=g(ta(c,I));if(L===null)return null;const z={};for(const[ee,de]of Object.entries(L))z[ee]=aa(de);return z}function bs(c,g,w=ge){return Sl(c,g,Yu,w)}function ud(c,g,w=ge){return Sl(c,g,Zu,w)}function Go(c,g=ge){return Kc(c,Of,g)}function fu(c,g=ge){return Wi(c,Vs,g)}function ws(c,g=ge){return Wi(c,Tf,g)}async function Ti(c,g){if(!ei(c))return null;const w=await Gi(c,g),I=ta(c,w);let L;if(pa(I))L=Rf(I);else if(mi(I))L=qd(I);else return null;return Af(I,L)}async function qo(c,g,w){let I=null;try{return I=await Ju(c,g,w),Af(c,I)}catch{return null}}async function du(c,g,w,I,L){const z=await Ti(c,L);if(z===null)return null;const ee=zu(z),de=w(z),ke=ld(g,de),Ve=I(ee,ke);return qo(z,Ve,L)}async function El(c,g,w,I,L,z){const ee=await Ti(c,z);if(ee===null)return null;const de=I(ee,g),ke=zu(ee),Ve=ld(w,de),Ye=L(ke,g,Ve);return qo(ee,Ye,z)}async function Gc(c,g,w,I=ge){return El(c,g,w,Yu,Xu,I)}async function Ih(c,g,w,I=ge){return El(c,g,w,Zu,ns,I)}async function cd(c,g,w=ge){return du(c,g,Of,Wd,w)}var qc=Object.freeze({__proto__:null,getAccessFor:zc,getAccessForAll:Ji,getAgentAccess:Mi,getAgentAccessAll:hd,getGroupAccess:pd,getGroupAccessAll:Co,getPublicAccess:pu,setAccessFor:fd,setAgentAccess:dd,setGroupAccess:hu,setPublicAccess:_s});async function zc(c,g,w=ge,I=ge){if(g==="agent"){if(typeof w!="string")throw new Error("When reading Agent-specific access, the given agent cannot be left undefined.");return Mi(c,w,I)}if(g==="group"){if(typeof w!="string")throw new Error("When reading Group-specific access, the given group cannot be left undefined.");return pd(c,w,I)}if(g==="public"){if(typeof w=="string")throw new Error(`When reading public access, no actor type should be specified (here [${w}]).`);return pu(c,w)}return null}async function Ji(c,g,w=ge){return g==="agent"?hd(c,w):g==="group"?Co(c,w):null}async function fd(c,g,w,I=ge,L=ge){if(g==="agent"){if(typeof I!="string")throw new Error("When writing Agent-specific access, the given agent cannot be left undefined.");return dd(c,I,w,L)}if(g==="group"){if(typeof I!="string")throw new Error("When writing Group-specific access, the given group cannot be left undefined.");return hu(c,I,w,L)}if(g==="public"){if(typeof I=="string")throw new Error(`When writing public access, no actor type should be specified (here [${I}]).`);return _s(c,w,I)}return null}async function Mi(c,g,w=ge){const I=await vi(c,w);if(wn(I)){const L=await _a(I,w);return cu(L,g)}return ei(I)?bs(I,g,w):null}async function dd(c,g,w,I=ge){const L=await vi(c,I);if(wn(L)){const z=await _a(L,I),ee=Mm(L,z,g,w);if(ee)try{return await qi(ee,I),await Mi(c,g,I)}catch{return null}return null}if(ei(L)){if(w.controlRead!==w.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${rt(L)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await Gc(L,g,w,I),bs(L,g,I)}return null}async function hd(c,g=ge){const w=await vi(c,g);if(wn(w)){const I=await _a(w,g);return zg(I)}return ei(w)?fu(w,g):null}async function pd(c,g,w=ge){const I=await vi(c,w);if(wn(I)){const L=await _a(I,w);return Hc(L,g)}return ei(I)?ud(I,g,w):null}async function Co(c,g=ge){const w=await vi(c,g);if(wn(w)){const I=await _a(w,g);return sd(I)}return ei(w)?ws(w,g):null}async function hu(c,g,w,I=ge){const L=await vi(c,I);if(wn(L)){const z=await _a(L,I),ee=Hn(L,z,g,w);if(ee)try{return await qi(ee,I),await pd(c,g,I)}catch{return null}return null}if(ei(L)){if(w.controlRead!==w.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${rt(L)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await Ih(L,g,w,I),ud(L,g,I)}return null}async function pu(c,g=ge){const w=await vi(c,g);if(wn(w)){const I=await _a(w,g);return jc(I)}return ei(w)?Go(w,g):null}async function _s(c,g,w=ge){const I=await vi(c,w);if(wn(I)){const L=await _a(I,w),z=Xn(I,L,g);if(z)try{return await qi(z,w),await pu(c,w)}catch{return null}return null}if(ei(I)){if(g.controlRead!==g.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${rt(I)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await cd(I,g,w),Go(I,w)}return null}var Wg=Object.freeze({__proto__:null,getAccessFor:zc,getAccessForAll:Ji,getAgentAccess:Mi,getAgentAccessAll:hd,getGroupAccess:pd,getGroupAccessAll:Co,getPublicAccess:pu,setAccessFor:fd,setAgentAccess:dd,setGroupAccess:hu,setPublicAccess:_s});const Ph=[q.agent];function gu(c,g,w){if(c.inaccessibleUrls.length>0)return null;const I=c.acrPolicies.filter(Ye=>gd(Ye,g,w,c)),L=c.policies.filter(Ye=>gd(Ye,g,w,c)),z={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1},ee=I.reduce((Ye,Mt)=>{const Kt={...Ye},nr=Ic(Mt);return nr.read&&(Kt.controlRead=!0),nr.write&&(Kt.controlWrite=!0),Kt},z),de=L.reduce((Ye,Mt)=>{const Kt={...Ye},nr=Ic(Mt);return nr.read&&(Kt.read=!0),nr.append&&(Kt.append=!0),nr.write&&(Kt.write=!0),Kt},ee),ke=I.reduce((Ye,Mt)=>{const Kt={...Ye},nr=$f(Mt);return nr.read===!0&&(Kt.controlRead=!1),nr.write===!0&&(Kt.controlWrite=!1),Kt},de);return L.reduce((Ye,Mt)=>{const Kt={...Ye},nr=$f(Mt);return nr.read===!0&&(Kt.read=!1),nr.append===!0&&(Kt.append=!1),nr.write===!0&&(Kt.write=!1),Kt},ke)}function Nh(c,g){return gu(c,q.agent,g)}function Fh(c){return gu(c,q.agent,q.PublicAgent)}function gd(c,g,w,I){const L=m(c,q.allow),z=m(c,q.deny);if(L.length+z.length===0)return!1;const ee=Lc(c).map(Ve=>I.matchers.find(Ye=>xr(Ye)===Ve)),de=Zf(c).map(Ve=>I.matchers.find(Ye=>xr(Ye)===Ve)),ke=no(c).map(Ve=>I.matchers.find(Ye=>xr(Ye)===Ve));return ee.every(Ve=>Yg(Ve,g,w))&&(de.length===0||de.some(Ve=>Yg(Ve,g,w)))&&ee.length+de.length>0&&ke.length===0}function Jg(c,g){const w=m(c,q.allow),I=m(c,q.deny);return g.read===!0&&I.includes(Pn.read)||g.read===!1&&w.includes(Pn.read)&&!I.includes(Pn.read)||g.append===!0&&I.includes(Pn.append)||g.append===!1&&w.includes(Pn.append)&&!I.includes(Pn.append)||g.write===!0&&I.includes(Pn.write)||g.write===!1&&w.includes(Pn.write)&&!I.includes(Pn.write)}function Yg(c,g,w){return m(c,g).includes(w)}function Qg(c,g){const w=new Set;return c.matchers.forEach(I=>{m(I,g).filter(L=>![q.PublicAgent,q.CreatorAgent,q.AuthenticatedAgent].includes(L)||g!==q.agent).forEach(L=>w.add(L))}),w}function Xg(c,g){if(c.inaccessibleUrls.length>0)return null;const w={};return Qg(c,g).forEach(L=>{const z=gu(c,g,L);w[L]=z}),w}function yu(c){return Xg(c,q.agent)}function Wc(c,g,w,I,L){var z,ee,de,ke,Ve;if(!wn(c)||g.inaccessibleUrls.length>0)return null;const Ye=gu(g,w,I);if(Ye===null)return null;const Mt=g.acrPolicies.filter(Cr=>gd(Cr,w,I,g)),Kt=g.policies.filter(Cr=>gd(Cr,w,I,g)),nr=Mt.filter(Cr=>Jg(Cr,{read:L.controlRead,write:L.controlWrite})),Pr=Kt.filter(Cr=>Jg(Cr,{read:L.read,append:L.append,write:L.write})),un=nr.filter(Cr=>Dh(Cr,w,I,g)),Jr=Pr.filter(Cr=>Dh(Cr,w,I,g)),Va={...g,acrPolicies:g.acrPolicies.filter(Cr=>!un.includes(Cr)),policies:g.policies.filter(Cr=>!Jr.includes(Cr))},jn=gu(Va,w,I);if(jn===null)return null;let Er=c;un.forEach(Cr=>{const[on,zo]=Uh(Cr,c,g,w,I);Er=Ii(Er,on),Er=zo.reduce($o,Er)}),Jr.forEach(Cr=>{const[on,zo]=Uh(Cr,c,g,w,I);Er=ml(Er,on),Er=zo.reduce($o,Er)});const ki=`matcher_${encodeURIComponent(`${w}_${I}`)}`;let wi=kc(c,ki);wi=pn(wi,w,I);const oa=(z=L.controlRead)!==null&&z!==void 0?z:Ye.controlRead,Bi=(ee=L.controlWrite)!==null&&ee!==void 0?ee:Ye.controlWrite;let Ss=un;if(oa!==jn.controlRead||Bi!==jn.controlWrite){const Cr=u.v4();let on=ra(c,Cr);on=pl(on,{read:oa===!0,append:!1,write:Bi===!0}),on=Dt(on,q.allOf,wi),Er=Ii(Er,on),Er=$o(Er,wi),Ss=nr}const so=(de=L.read)!==null&&de!==void 0?de:Ye.read,tf=(ke=L.append)!==null&&ke!==void 0?ke:Ye.append,rf=(Ve=L.write)!==null&&Ve!==void 0?Ve:Ye.write;let xl=Jr;if(so!==jn.read||tf!==jn.append||rf!==jn.write){const Cr=u.v4();let on=ra(c,Cr);on=pl(on,{read:so===!0,append:tf===!0,write:rf===!0}),on=Dt(on,q.allOf,wi),Er=ml(Er,on),Er=$o(Er,wi),xl=Pr}return Ss.forEach(Cr=>{Er=go(Er,xr(Cr))}),xl.forEach(Cr=>{Er=ma(Er,xr(Cr))}),Er}function Zg(c,g,w,I){return Wc(c,g,q.agent,w,I)}function ey(c,g,w){return Wc(c,g,q.agent,q.PublicAgent,w)}function Dh(c,g,w,I){const z=m(c,q.allOf).map(Ye=>I.matchers.find(Mt=>xr(Mt)===Ye)).some(Ye=>yd(Ye,g,w)),de=m(c,q.anyOf).map(Ye=>I.matchers.find(Mt=>xr(Mt)===Ye)).some(Ye=>yd(Ye,g,w)),Ve=m(c,q.noneOf).map(Ye=>I.matchers.find(Mt=>xr(Mt)===Ye)).some(Ye=>yd(Ye,g,w));return z||de||Ve}function yd(c,g,w){const I=[];return Ph.forEach(L=>{const z=m(c,L).filter(ee=>ee!==w||L!==g);I.push(...z)}),I.length>0}function Uh(c,g,w,I,L){const z=u.v4(),ee=md(m(c,q.allOf),g,w,z,I,L),de=md(m(c,q.anyOf),g,w,z,I,L),ke=md(m(c,q.noneOf),g,w,z,I,L);let Ve=ra(g,encodeURI(xr(c))+z);return m(c,q.allow).forEach(Ye=>{Ve=Dt(Ve,q.allow,Ye)}),m(c,q.deny).forEach(Ye=>{Ve=Dt(Ve,q.deny,Ye)}),ee.forEach(Ye=>{Ve=Dt(Ve,q.allOf,Ye)}),de.forEach(Ye=>{Ve=Dt(Ve,q.anyOf,Ye)}),ke.forEach(Ye=>{Ve=Dt(Ve,q.noneOf,Ye)}),[Ve,ee.concat(de).concat(ke)]}function md(c,g,w,I,L,z){return c.map(ee=>{const de=w.matchers.find(Ye=>xr(Ye)===ee);if(typeof de>"u")return null;let ke=kc(g,encodeURI(xr(de))+I),Ve=!1;return Ph.forEach(Ye=>{m(de,Ye).forEach(Mt=>{Ye===L&&Mt===z||(Ve=!0,ke=Dt(ke,Ye,Mt))})}),Ve?ke:null}).filter(Al)}function Al(c){return c!==null}async function mu(c,g=ge){const w=La(c),I=ro(c),L=Kn(w).concat(Kn(I)),z=await bd(L,g),ee=Lh(w,z).filter(Al),de=Lh(I,z).filter(Al),ke=new Set;ee.forEach(Jr=>{Mh(Jr).forEach(jn=>{ke.add(jn)})}),de.forEach(Jr=>{Mh(Jr).forEach(jn=>{ke.add(jn)})});const Ve=Array.from(ke),Mt=Ve.map(Jr=>vd(Jr)).filter(Jr=>!L.includes(Jr)),Kt=await bd(Mt,g),nr={...z,...Kt},Pr=Lh(Ve,nr).filter(Al);return{inaccessibleUrls:Object.keys(nr).filter(Jr=>nr[Jr]===null),acrPolicies:ee,policies:de,matchers:Pr}}function vd(c){const g=new URL(c);return g.hash="",g.href}function Kn(c){const g=[];return c.forEach(w=>{const I=vd(w);g.includes(I)||g.push(I)}),g}async function bd(c,g){const w=Array.from(new Set(c)),I={};return await Promise.all(w.map(async L=>{try{const z=await zn(L,g);I[L]=z}catch{I[L]=null}})),I}function Lh(c,g){return c.map(w=>{const I=vd(w),L=g[I];return L?dr(L,w):null})}function Mh(c){return Lc(c).concat(Zf(c)).concat(no(c))}async function ty(c,g,w=ge){const I=await vi(c,w);if(wn(I)){const L=await mu(I,w);return Nh(L,g)}return ei(I)?bs(I,g,w):null}async function km(c,g,w,I=ge){const L=await vi(c,I);if(wn(L)){const z=await mu(L,I),ee=Zg(L,z,g,w);if(ee)try{return await qi(ee,I),await ty(c,g,I)}catch{return null}return null}if(ei(L)){if(w.controlRead!==w.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${rt(L)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await Gc(L,g,w,I),bs(L,g,I)}return null}async function Bm(c,g=ge){const w=await vi(c,g);if(wn(w)){const I=await mu(w,g);return yu(I)}return ei(w)?fu(w,g):null}async function Jc(c,g=ge){const w=await vi(c,g);if(wn(w)){const I=await mu(w,g);return Fh(I)}return ei(w)?Go(w,g):null}async function vu(c,g,w=ge){const I=await vi(c,w);if(wn(I)){const L=await mu(I,w),z=ey(I,L,g);if(z)try{return await qi(z,w),await Jc(c,w)}catch{return null}return null}if(ei(I)){if(g.controlRead!==g.controlWrite)throw new Error(`When setting access for a Resource in a Pod implementing Web Access Control (i.e. [${rt(I)}]), \`controlRead\` and \`controlWrite\` should have the same value.`);return await cd(I,g,w),Go(I,w)}return null}var kh=Object.freeze({__proto__:null,getAccessFor:zc,getAccessForAll:Ji,getAgentAccess:ty,getAgentAccessAll:Bm,getPublicAccess:Jc,setAccessFor:fd,setAgentAccess:km,setPublicAccess:vu});async function Yc(c,g){if(typeof c.internal_resourceInfo.aclUrl!="string")return null;try{return await Se(c.internal_resourceInfo.aclUrl,g)}catch{return null}}function Bh(c){return oi(c,Nr.allow)}function Rl(c){return oi(c,Nr.deny)}function oo(c,g,w){const I=v(g,Nr.allOf).map(Ve=>dr(yr(c),Ve)).filter(Ve=>Ve!==null),L=I.every(Ve=>v(Ve,Nr.agent).includes(w)),z=v(g,Nr.anyOf).map(Ve=>dr(yr(c),Ve)).filter(Ve=>Ve!==null),ee=z.some(Ve=>v(Ve,Nr.agent).includes(w)),de=v(g,Nr.noneOf).map(Ve=>dr(yr(c),Ve)).filter(Ve=>Ve!==null),ke=de.some(Ve=>v(Ve,Nr.agent).includes(w));return I.length+z.length>0&&(I.length===0||L)&&(z.length===0||ee)&&(de.length===0||!ke)}function bu(c,g,w){const I=Bh(c),L=Rl(c);return w==="control"?{read:g.read,append:g.append,write:g.write,controlRead:(g.controlRead||I.read)&&!L.read,controlWrite:(g.controlWrite||I.write)&&!L.write}:{read:(g.read||I.read)&&!L.read,append:(g.append||I.append)&&!L.append,write:(g.write||I.write)&&!L.write,controlRead:g.controlRead,controlWrite:g.controlWrite}}async function wd(c,g){let w={read:!1,append:!1,write:!1,controlRead:!1,controlWrite:!1};return iu(c).map(z=>dr(yr(c),z)).filter(z=>z!==null).forEach(z=>{oo(c,z,g)&&(w=bu(z,w,"resource"))}),Uc(c).map(z=>dr(yr(c),z)).filter(z=>z!==null).forEach(z=>{oo(c,z,g)&&(w=bu(z,w,"control"))}),w}function ry(c){const g=c.internal_resourceInfo.linkedResources[Nr.accessControl];return Array.isArray(g)&&g.length===1?g[0]:null}async function ny(c,g){const w=ry(c);if(w!==null)return w;const I=await Yc(c,g);if(I===null)return null;const L=Ze(I).type;return Array.isArray(L)&&L.includes(Nr.AccessControlResource)?ve(I):null}async function wu(c,g){const w=await ny(c,g);if(w===null)return null;let I;try{I=await zn(w,g)}catch{return null}return{...c,internal_acp:{acr:{...I,accessTo:ve(c)}}}}async function Hh(c,g,w){const I=await Se(c,w),L=await wu(I,w);return L===null?bs(I,g,w):wd(L,g)}function Hm(c){return Array.from(new Set(rn(yr(c)).map(g=>v(g,Nr.agent)).reduce((g,w)=>g.concat(w),[])))}async function jh(c){return(await Promise.all(Hm(c).map(async g=>({[g]:await wd(c,g)})))).reduce((g,w)=>({...g,...w}),{})}async function iy(c,g){const w=await Se(c,g),I=await wu(w,g);return I===null?fu(w,g):jh(I)}async function ay(c){return wd(c,Nr.PublicAgent)}async function oy(c,g){const w=await Se(c,g),I=await wu(w,g);return I===null?Go(w,g):ay(I)}function Qc(c,g,w){return an(c,g).concat("AgentMatcher").concat(w.charAt(0).toUpperCase()+w.slice(1)).concat("Policy")}function Vh(c,g,w){const I=Qc(c,g,w);return I.includes("Acr")?ru(c,I):Wf(c,I)}function sy(c,g,w){return Qc(c,g,w).concat("Matcher")}const ly=Nr.anyOf;function Xc(c,g,w){const I=Qc(c,g,w),L=sy(c,g,w);let z=dr(yr(c),I);return z||(c=Vh(c,g,w),z=Qr({url:I}),z=rl(z,{[w]:!0},Nr.allow)),m(z,ly).includes(L)?c:(z=Pa(z).addUrl(ly,L).build(),ba(c,z))}function Zc(c,g,w,I,L){var z;const ee=sy(c,w,I),de=Xc(c,w,I),ke=(z=dr(yr(de),ee))!==null&&z!==void 0?z:Qr({url:ee});return ba(de,L==="add"?li(ke,g):Bc(ke,g))}async function $h(c,g,w){const I=await wd(c,g);return typeof w.read=="boolean"&&I.read!==w.read&&(c=Zc(c,g,el,"read",w.read?"add":"remove")),typeof w.append=="boolean"&&I.append!==w.append&&(c=Zc(c,g,el,"append",w.append?"add":"remove")),typeof w.write=="boolean"&&I.write!==w.write&&(c=Zc(c,g,el,"write",w.write?"add":"remove")),typeof w.controlRead=="boolean"&&I.controlRead!==w.controlRead&&(c=Zc(c,g,tl,"controlRead",w.controlRead?"add":"remove")),typeof w.controlWrite=="boolean"&&I.controlWrite!==w.controlWrite&&(c=Zc(c,g,tl,"controlWrite",w.controlWrite?"add":"remove")),c}async function vn(c,g,w,I){const L=await Se(c,I),z=await wu(L,I);if(z===null)return await Gc(L,g,w,I),bs(L,g,I);try{return await qi(await $h(z,g,w),I),await Hh(c,g,I)}catch{return null}}async function Kh(c,g){return $h(c,Nr.PublicAgent,g)}async function _d(c,g,w){const I=await Se(c,w),L=await wu(I,w);if(L===null)return await cd(I,g,w),Go(I,w);try{return await qi(await Kh(L,g),w),await oy(c,w)}catch{return null}}var Gh=Object.freeze({__proto__:null,getAclServerResourceInfo:Yc,getAgentAccess:Hh,getAgentAccessAll:iy,getPublicAccess:oy,setAgentAccess:vn,setPublicAccess:_d}),uy=Object.freeze({__proto__:null,acrAsMarkdown:oc,addAcrPolicyUrl:Gl,addAgent:Bo,addAllOfRuleUrl:Ma,addAnyOfRuleUrl:fc,addClient:kg,addGroup:ps,addMemberAcrPolicyUrl:Ws,addMemberPolicyUrl:mo,addMockAcrTo:vl,addNoneOfRuleUrl:pc,addPolicyUrl:ac,createPolicy:Zl,createResourcePolicyFor:ra,createResourceRuleFor:yc,createRule:Lf,getAcrPolicyUrlAll:La,getAgentAll:wc,getAllOfRuleUrlAll:ko,getAllowModes:So,getAnyOfRuleUrlAll:hs,getClientAll:Bf,getDenyModes:ka,getFileWithAccessDatasets:us,getFileWithAcr:il,getGroupAll:Xl,getLinkedAcrUrl:Wl,getMemberAcrPolicyUrlAll:Js,getMemberPolicyUrlAll:Qs,getNoneOfRuleUrlAll:wo,getPolicy:eu,getPolicyAll:hl,getPolicyUrlAll:ro,getReferencedPolicyUrlAll:fs,getResourceAcrPolicy:Ho,getResourceAcrPolicyAll:Nc,getResourceInfoWithAccessDatasets:cs,getResourceInfoWithAcr:vi,getResourcePolicy:ys,getResourcePolicyAll:yl,getResourceRule:Mf,getResourceRuleAll:rh,getRule:mc,getRuleAll:Ql,getSolidDatasetWithAccessDatasets:zl,getSolidDatasetWithAcr:ls,hasAccessibleAcr:wn,hasAnyClient:Cc,hasAuthenticated:cl,hasCreator:fl,hasLinkedAcr:to,hasPublic:ul,isAcpControlled:ds,mockAcrFor:na,policyAsMarkdown:va,removeAcrPolicyUrl:go,removeAcrPolicyUrlAll:yo,removeAgent:sl,removeAllOfRuleUrl:al,removeAnyClient:Vf,removeAnyOfRuleUrl:dc,removeAuthenticated:Rc,removeClient:Hf,removeCreator:Tc,removeGroup:Sc,removeMemberAcrPolicyUrl:ic,removeMemberAcrPolicyUrlAll:Ys,removeMemberPolicyUrl:vo,removeMemberPolicyUrlAll:Xs,removeNoneOfRuleUrl:gc,removePolicy:_o,removePolicyUrl:ma,removePolicyUrlAll:Mo,removePublic:kf,removeResourceAcrPolicy:jo,removeResourcePolicy:Fc,removeResourceRule:nh,removeRule:vc,ruleAsMarkdown:Oc,saveAcrFor:qi,setAgent:_c,setAllOfRuleUrl:Jl,setAllowModes:gl,setAnyClient:jf,setAnyOfRuleUrl:hc,setAuthenticated:Ac,setClient:ih,setCreator:xc,setDenyModes:Pc,setGroup:ll,setNoneOfRuleUrl:Yl,setPolicy:gs,setPublic:Ec,setResourceAcrPolicy:Ii,setResourcePolicy:ml,setResourceRule:ol,setRule:bc}),qh=Object.freeze({__proto__:null,addAcrPolicyUrl:ru,addAgent:li,addAllOfMatcherUrl:$g,addAnyOfMatcherUrl:Mc,addClient:od,addMemberAcrPolicyUrl:zf,addMemberPolicyUrl:fh,addMockAcrTo:vl,addNoneOfMatcherUrl:Kg,addPolicyUrl:Wf,createMatcher:vh,createPolicy:Zl,createResourceMatcherFor:kc,createResourcePolicyFor:ra,getAcrPolicyUrlAll:Uc,getAgentAll:_h,getAllOfMatcherUrlAll:Lc,getAllowModes:Ic,getAnyOfMatcherUrlAll:Zf,getClientAll:Eh,getDenyModes:$f,getFileWithAccessDatasets:us,getFileWithAcr:il,getLinkedAcrUrl:Wl,getMatcher:lu,getMatcherAll:bh,getMemberAcrPolicyUrlAll:hh,getMemberPolicyUrlAll:Yf,getNoneOfMatcherUrlAll:no,getPolicy:eu,getPolicyAll:hl,getPolicyUrlAll:iu,getReferencedPolicyUrlAll:fs,getResourceAcrPolicy:Ho,getResourceAcrPolicyAll:Nc,getResourceInfoWithAccessDatasets:cs,getResourceInfoWithAcr:vi,getResourceMatcher:Ba,getResourceMatcherAll:ed,getResourcePolicy:ys,getResourcePolicyAll:yl,getSolidDatasetWithAccessDatasets:zl,getSolidDatasetWithAcr:ls,getVcAccess:Uf,hasAccessibleAcr:wn,hasAuthenticated:id,hasCreator:Li,hasLinkedAcr:to,hasPublic:nd,isAcpControlled:ds,mockAcrFor:na,removeAcrPolicyUrl:Qf,removeAcrPolicyUrlAll:yo,removeAgent:Bc,removeAllOfMatcherUrl:yh,removeAnyOfMatcherUrl:ou,removeAuthenticated:ti,removeClient:ia,removeCreator:Sh,removeMatcher:wh,removeMemberAcrPolicyUrl:ph,removeMemberAcrPolicyUrlAll:Ys,removeMemberPolicyUrl:Xf,removeMemberPolicyUrlAll:Xs,removeNoneOfMatcherUrl:mh,removePolicy:_o,removePolicyUrl:gh,removePolicyUrlAll:Mo,removePublic:Gg,removeResourceAcrPolicy:jo,removeResourceMatcher:td,removeResourcePolicy:Fc,saveAcrFor:qi,setAgent:Ro,setAllOfMatcherUrl:Ao,setAllowModes:pl,setAnyOfMatcherUrl:ri,setAuthenticated:ad,setCreator:io,setDenyModes:ah,setMatcher:rd,setNoneOfMatcherUrl:su,setPolicy:gs,setPublic:bi,setResourceMatcher:$o,setResourcePolicy:Eo,setVcAccess:nl});const{getJsonLdParser:ef,getTurtleParser:Sd,solidDatasetAsTurtle:_u}=mr;return nt.FetchError=ht,nt.SolidClientError=b,nt.ThingExpectedError=ea,nt.access=qc,nt.access_v1=Wg,nt.access_v2=kh,nt.acp_ess_1=uy,nt.acp_ess_2=qh,nt.acp_v1=Hg,nt.acp_v2=qf,nt.acp_v3=Vg,nt.acp_v4=Rh,nt.addBoolean=Ir,nt.addDate=Lr,nt.addDatetime=mn,nt.addDecimal=ln,nt.addInteger=In,nt.addIri=Dt,nt.addJwkToJwks=as,nt.addLiteral=Tr,nt.addMockFallbackAclTo=Uo,nt.addMockResourceAclTo=is,nt.addNamedNode=gi,nt.addPublicKeyToProfileJwks=Di,nt.addStringEnglish=_r,nt.addStringNoLocale=Wn,nt.addStringWithLocale=Vr,nt.addTerm=Bn,nt.addTime=hn,nt.addUrl=Wr,nt.asIri=xr,nt.asUrl=bn,nt.buildThing=Pa,nt.changeLogAsMarkdown=Wt,nt.createAcl=Da,nt.createAclFromFallbackAcl=qd,nt.createContainerAt=ne,nt.createContainerInContainer=He,nt.createSolidDataset=qn,nt.createThing=Qr,nt.deleteAclFor=js,nt.deleteContainer=Rt,nt.deleteFile=gr,nt.deleteSolidDataset=te,nt.fromRdfJsDataset=Fr,nt.getAgentAccess=Yu,nt.getAgentAccessAll=Vs,nt.getAgentDefaultAccess=ga,nt.getAgentDefaultAccessAll=ya,nt.getAgentResourceAccess=$s,nt.getAgentResourceAccessAll=Qu,nt.getAltProfileUrlAllFrom=tc,nt.getBoolean=S,nt.getBooleanAll=C,nt.getContainedResourceUrlAll=It,nt.getContentType=yt,nt.getDate=oe,nt.getDateAll=be,nt.getDatetime=H,nt.getDatetimeAll=X,nt.getDecimal=Ee,nt.getDecimalAll=Ae,nt.getEffectiveAccess=je,nt.getFallbackAcl=Wu,nt.getFile=Gr,nt.getFileWithAcl=xf,nt.getGroupAccess=Zu,nt.getGroupAccessAll=Tf,nt.getGroupDefaultAccess=Nn,nt.getGroupDefaultAccessAll=rs,nt.getGroupResourceAccess=Fi,nt.getGroupResourceAccessAll=ai,nt.getInteger=De,nt.getIntegerAll=Ke,nt.getIri=hi,nt.getIriAll=m,nt.getJsonLdParser=ef,nt.getLinkedResourceUrlAll=Ze,nt.getLiteral=fr,nt.getLiteralAll=Ht,nt.getNamedNode=ct,nt.getNamedNodeAll=Et,nt.getPodOwner=J,nt.getPodUrlAll=Tm,nt.getPodUrlAllFrom=Ug,nt.getProfileAll=Yd,nt.getProfileJwksIri=$l,nt.getPropertyAll=Ta,nt.getPublicAccess=Of,nt.getPublicDefaultAccess=Vl,nt.getPublicResourceAccess=jl,nt.getResourceAcl=zu,nt.getResourceInfo=Se,nt.getResourceInfoWithAcl=Hl,nt.getSolidDataset=zn,nt.getSolidDatasetWithAcl=Fg,nt.getSourceIri=rt,nt.getSourceUrl=ve,nt.getStringByLocaleAll=_e,nt.getStringEnglish=it,nt.getStringEnglishAll=St,nt.getStringNoLocale=Ie,nt.getStringNoLocaleAll=Fe,nt.getStringWithLocale=gt,nt.getStringWithLocaleAll=ae,nt.getTerm=qr,nt.getTermAll=lr,nt.getThing=dr,nt.getThingAll=rn,nt.getTime=he,nt.getTimeAll=me,nt.getTurtleParser=Sd,nt.getUrl=Zi,nt.getUrlAll=v,nt.getWebIdDataset=Cm,nt.getWellKnownSolid=wr,nt.hasAccessibleAcl=ei,nt.hasAcl=Gd,nt.hasFallbackAcl=mi,nt.hasResourceAcl=pa,nt.hasResourceInfo=h,nt.hasServerResourceInfo=f,nt.isContainer=lt,nt.isPodOwner=xe,nt.isRawData=Ne,nt.isThing=en,nt.isThingLocal=xi,nt.mockContainerFrom=kr,nt.mockFetchError=Mr,nt.mockFileFrom=hr,nt.mockSolidDatasetFrom=Qt,nt.mockThingFrom=jd,nt.overwriteFile=Gt,nt.removeAll=Xr,nt.removeBoolean=Oa,nt.removeDate=Fs,nt.removeDatetime=Ku,nt.removeDecimal=Wa,nt.removeInteger=Zo,nt.removeIri=nn,nt.removeLiteral=Ds,nt.removeNamedNode=Ll,nt.removeStringEnglish=vf,nt.removeStringNoLocale=Fo,nt.removeStringWithLocale=da,nt.removeThing=Cn,nt.removeTime=Gu,nt.removeUrl=$n,nt.responseToResourceInfo=tt,nt.responseToSolidDataset=Ca,nt.saveAclFor=Ju,nt.saveFileInContainer=sr,nt.saveSolidDatasetAt=U,nt.saveSolidDatasetInContainer=ye,nt.setAgentDefaultAccess=Ks,nt.setAgentResourceAccess=Xu,nt.setBoolean=Us,nt.setDate=Ls,nt.setDatetime=bf,nt.setDecimal=qu,nt.setGroupDefaultAccess=Dg,nt.setGroupResourceAccess=ns,nt.setInteger=wf,nt.setIri=pn,nt.setLiteral=Ml,nt.setNamedNode=Ms,nt.setProfileJwks=Jd,nt.setPublicDefaultAccess=ec,nt.setPublicResourceAccess=Wd,nt.setStringNoLocale=Ya,nt.setStringWithLocale=Oi,nt.setTerm=Hd,nt.setThing=Zr,nt.setTime=ii,nt.setUrl=Ia,nt.solidDatasetAsMarkdown=Vt,nt.solidDatasetAsTurtle=_u,nt.thingAsMarkdown=Vn,nt.toRdfJsDataset=$t,nt.universalAccess=Gh,nt.validateContainedResourceAll=qt,nt}var Q0={},sn={};const dn=crypto,qa=e=>e instanceof CryptoKey,f1=async(e,r)=>{const i=`SHA-${e.slice(-3)}`;return new Uint8Array(await dn.subtle.digest(i,r))},Ri=new TextEncoder,Io=new TextDecoder,qy=2**32;function Ps(...e){const r=e.reduce((o,{length:d})=>o+d,0),i=new Uint8Array(r);let a=0;return e.forEach(o=>{i.set(o,a),a+=o.length}),i}function DT(e,r){return Ps(Ri.encode(e),new Uint8Array([0]),r)}function mv(e,r,i){if(r<0||r>=qy)throw new RangeError(`value must be >= 0 and <= ${qy-1}. Received ${r}`);e.set([r>>>24,r>>>16,r>>>8,r&255],i)}function d1(e){const r=Math.floor(e/qy),i=e%qy,a=new Uint8Array(8);return mv(a,r,0),mv(a,i,4),a}function ib(e){const r=new Uint8Array(4);return mv(r,e),r}function X0(e){return Ps(ib(e.length),e)}async function UT(e,r,i){const a=Math.ceil((r>>3)/32),o=new Uint8Array(a*32);for(let d=0;d<a;d++){const l=new Uint8Array(4+e.length+i.length);l.set(ib(d+1)),l.set(e,4),l.set(i,4+e.length),o.set(await f1("sha256",l),d*32)}return o.slice(0,r>>3)}const ab=e=>{let r=e;typeof r=="string"&&(r=Ri.encode(r));const i=32768,a=[];for(let o=0;o<r.length;o+=i)a.push(String.fromCharCode.apply(null,r.subarray(o,o+i)));return btoa(a.join(""))},Ci=e=>ab(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),h1=e=>{const r=atob(e),i=new Uint8Array(r.length);for(let a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return i},Ni=e=>{let r=e;r instanceof Uint8Array&&(r=Io.decode(r)),r=r.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return h1(r)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Vi extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(r){var i;super(r),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(i=Error.captureStackTrace)===null||i===void 0||i.call(Error,this,this.constructor)}}class $a extends Vi{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(r,i="unspecified",a="unspecified"){super(r),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=i,this.reason=a}}class vv extends Vi{static get code(){return"ERR_JWT_EXPIRED"}constructor(r,i="unspecified",a="unspecified"){super(r),this.code="ERR_JWT_EXPIRED",this.claim=i,this.reason=a}}class zy extends Vi{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class Dn extends Vi{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class dg extends Vi{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class LT extends Vi{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}class vr extends Vi{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class Jn extends Vi{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Ka extends Vi{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class p1 extends Vi{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class hm extends Vi{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class ob extends Vi{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class g1 extends Vi{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class y1 extends Vi{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class sb extends Vi{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const MT=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:zy,JOSEError:Vi,JOSENotSupported:Dn,JWEDecompressionFailed:LT,JWEDecryptionFailed:dg,JWEInvalid:vr,JWKInvalid:p1,JWKSInvalid:hm,JWKSMultipleMatchingKeys:g1,JWKSNoMatchingKey:ob,JWKSTimeout:y1,JWSInvalid:Jn,JWSSignatureVerificationFailed:sb,JWTClaimValidationFailed:$a,JWTExpired:vv,JWTInvalid:Ka},Symbol.toStringTag,{value:"Module"})),pm=dn.getRandomValues.bind(dn);function m1(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Dn(`Unsupported JWE Algorithm: ${e}`)}}const v1=e=>pm(new Uint8Array(m1(e)>>3)),b1=(e,r)=>{if(r.length<<3!==m1(e))throw new vr("Invalid Initialization Vector length")},Wy=(e,r)=>{const i=e.byteLength<<3;if(i!==r)throw new vr(`Invalid Content Encryption Key length. Expected ${r} bits, got ${i} bits`)},kT=(e,r)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(r instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==r.length)throw new TypeError("Input buffers must have the same length");const i=e.length;let a=0,o=-1;for(;++o<i;)a|=e[o]^r[o];return a===0};function Xi(e,r="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${r} must be ${e}`)}function Uu(e,r){return e.name===r}function Hy(e){return parseInt(e.name.slice(4),10)}function BT(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function w1(e,r){if(r.length&&!r.some(i=>e.usages.includes(i))){let i="CryptoKey does not support this operation, its usages must include ";if(r.length>2){const a=r.pop();i+=`one of ${r.join(", ")}, or ${a}.`}else r.length===2?i+=`one of ${r[0]} or ${r[1]}.`:i+=`${r[0]}.`;throw new TypeError(i)}}function HT(e,r,...i){switch(r){case"HS256":case"HS384":case"HS512":{if(!Uu(e.algorithm,"HMAC"))throw Xi("HMAC");const a=parseInt(r.slice(2),10);if(Hy(e.algorithm.hash)!==a)throw Xi(`SHA-${a}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Uu(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Xi("RSASSA-PKCS1-v1_5");const a=parseInt(r.slice(2),10);if(Hy(e.algorithm.hash)!==a)throw Xi(`SHA-${a}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Uu(e.algorithm,"RSA-PSS"))throw Xi("RSA-PSS");const a=parseInt(r.slice(2),10);if(Hy(e.algorithm.hash)!==a)throw Xi(`SHA-${a}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw Xi("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!Uu(e.algorithm,"ECDSA"))throw Xi("ECDSA");const a=BT(r);if(e.algorithm.namedCurve!==a)throw Xi(a,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}w1(e,i)}function Bu(e,r,...i){switch(r){case"A128GCM":case"A192GCM":case"A256GCM":{if(!Uu(e.algorithm,"AES-GCM"))throw Xi("AES-GCM");const a=parseInt(r.slice(1,4),10);if(e.algorithm.length!==a)throw Xi(a,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!Uu(e.algorithm,"AES-KW"))throw Xi("AES-KW");const a=parseInt(r.slice(1,4),10);if(e.algorithm.length!==a)throw Xi(a,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Xi("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!Uu(e.algorithm,"PBKDF2"))throw Xi("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!Uu(e.algorithm,"RSA-OAEP"))throw Xi("RSA-OAEP");const a=parseInt(r.slice(9),10)||1;if(Hy(e.algorithm.hash)!==a)throw Xi(`SHA-${a}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}w1(e,i)}function _1(e,r,...i){if(i.length>2){const a=i.pop();e+=`one of type ${i.join(", ")}, or ${a}.`}else i.length===2?e+=`one of type ${i[0]} or ${i[1]}.`:e+=`of type ${i[0]}.`;return r==null?e+=` Received ${r}`:typeof r=="function"&&r.name?e+=` Received function ${r.name}`:typeof r=="object"&&r!=null&&r.constructor&&r.constructor.name&&(e+=` Received an instance of ${r.constructor.name}`),e}const ca=(e,...r)=>_1("Key must be ",e,...r);function S1(e,r,...i){return _1(`Key for the ${e} algorithm must be `,r,...i)}const E1=e=>qa(e),_i=["CryptoKey"];async function jT(e,r,i,a,o,d){if(!(r instanceof Uint8Array))throw new TypeError(ca(r,"Uint8Array"));const l=parseInt(e.slice(1,4),10),u=await dn.subtle.importKey("raw",r.subarray(l>>3),"AES-CBC",!1,["decrypt"]),h=await dn.subtle.importKey("raw",r.subarray(0,l>>3),{hash:`SHA-${l<<1}`,name:"HMAC"},!1,["sign"]),f=Ps(d,a,i,d1(d.length<<3)),y=new Uint8Array((await dn.subtle.sign("HMAC",h,f)).slice(0,l>>3));let b;try{b=kT(o,y)}catch{}if(!b)throw new dg;let _;try{_=new Uint8Array(await dn.subtle.decrypt({iv:a,name:"AES-CBC"},u,i))}catch{}if(!_)throw new dg;return _}async function VT(e,r,i,a,o,d){let l;r instanceof Uint8Array?l=await dn.subtle.importKey("raw",r,"AES-GCM",!1,["decrypt"]):(Bu(r,e,"decrypt"),l=r);try{return new Uint8Array(await dn.subtle.decrypt({additionalData:d,iv:a,name:"AES-GCM",tagLength:128},l,Ps(i,o)))}catch{throw new dg}}const A1=async(e,r,i,a,o,d)=>{if(!qa(r)&&!(r instanceof Uint8Array))throw new TypeError(ca(r,..._i,"Uint8Array"));switch(b1(e,a),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&Wy(r,parseInt(e.slice(-3),10)),jT(e,r,i,a,o,d);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&Wy(r,parseInt(e.slice(1,4),10)),VT(e,r,i,a,o,d);default:throw new Dn("Unsupported JWE Content Encryption Algorithm")}},$T=async()=>{throw new Dn('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},KT=async()=>{throw new Dn('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},Sg=(...e)=>{const r=e.filter(Boolean);if(r.length===0||r.length===1)return!0;let i;for(const a of r){const o=Object.keys(a);if(!i||i.size===0){i=new Set(o);continue}for(const d of o){if(i.has(d))return!1;i.add(d)}}return!0};function GT(e){return typeof e=="object"&&e!==null}function ji(e){if(!GT(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let r=e;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}const gm=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function R1(e,r){if(e.algorithm.length!==parseInt(r.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${r}`)}function x1(e,r,i){if(qa(e))return Bu(e,r,i),e;if(e instanceof Uint8Array)return dn.subtle.importKey("raw",e,"AES-KW",!0,[i]);throw new TypeError(ca(e,..._i,"Uint8Array"))}const bv=async(e,r,i)=>{const a=await x1(r,e,"wrapKey");R1(a,e);const o=await dn.subtle.importKey("raw",i,...gm);return new Uint8Array(await dn.subtle.wrapKey("raw",o,a,"AES-KW"))},wv=async(e,r,i)=>{const a=await x1(r,e,"unwrapKey");R1(a,e);const o=await dn.subtle.unwrapKey("raw",i,a,"AES-KW",...gm);return new Uint8Array(await dn.subtle.exportKey("raw",o))};async function T1(e,r,i,a,o=new Uint8Array(0),d=new Uint8Array(0)){if(!qa(e))throw new TypeError(ca(e,..._i));if(Bu(e,"ECDH"),!qa(r))throw new TypeError(ca(r,..._i));Bu(r,"ECDH","deriveBits");const l=Ps(X0(Ri.encode(i)),X0(o),X0(d),ib(a));let u;e.algorithm.name==="X25519"?u=256:e.algorithm.name==="X448"?u=448:u=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const h=new Uint8Array(await dn.subtle.deriveBits({name:e.algorithm.name,public:e},r,u));return UT(h,a,l)}async function qT(e){if(!qa(e))throw new TypeError(ca(e,..._i));return dn.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function C1(e){if(!qa(e))throw new TypeError(ca(e,..._i));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function zT(e){if(!(e instanceof Uint8Array)||e.length<8)throw new vr("PBES2 Salt Input must be 8 or more octets")}function WT(e,r){if(e instanceof Uint8Array)return dn.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(qa(e))return Bu(e,r,"deriveBits","deriveKey"),e;throw new TypeError(ca(e,..._i,"Uint8Array"))}async function O1(e,r,i,a){zT(e);const o=DT(r,e),d=parseInt(r.slice(13,16),10),l={hash:`SHA-${r.slice(8,11)}`,iterations:i,name:"PBKDF2",salt:o},u={length:d,name:"AES-KW"},h=await WT(a,r);if(h.usages.includes("deriveBits"))return new Uint8Array(await dn.subtle.deriveBits(l,h,d));if(h.usages.includes("deriveKey"))return dn.subtle.deriveKey(l,h,u,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const JT=async(e,r,i,a=2048,o=pm(new Uint8Array(16)))=>{const d=await O1(o,e,a,r);return{encryptedKey:await bv(e.slice(-6),d,i),p2c:a,p2s:Ci(o)}},YT=async(e,r,i,a,o)=>{const d=await O1(o,e,a,r);return wv(e.slice(-6),d,i)};function Jy(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Dn(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const ym=(e,r)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:i}=r.algorithm;if(typeof i!="number"||i<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},QT=async(e,r,i)=>{if(!qa(r))throw new TypeError(ca(r,..._i));if(Bu(r,e,"encrypt","wrapKey"),ym(e,r),r.usages.includes("encrypt"))return new Uint8Array(await dn.subtle.encrypt(Jy(e),r,i));if(r.usages.includes("wrapKey")){const a=await dn.subtle.importKey("raw",i,...gm);return new Uint8Array(await dn.subtle.wrapKey("raw",a,r,Jy(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},XT=async(e,r,i)=>{if(!qa(r))throw new TypeError(ca(r,..._i));if(Bu(r,e,"decrypt","unwrapKey"),ym(e,r),r.usages.includes("decrypt"))return new Uint8Array(await dn.subtle.decrypt(Jy(e),r,i));if(r.usages.includes("unwrapKey")){const a=await dn.subtle.unwrapKey("raw",i,r,Jy(e),...gm);return new Uint8Array(await dn.subtle.exportKey("raw",a))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function lb(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Dn(`Unsupported JWE Algorithm: ${e}`)}}const ff=e=>pm(new Uint8Array(lb(e)>>3)),I1=(e,r)=>{const i=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${r}-----
${i}
-----END ${r}-----`},P1=async(e,r,i)=>{if(!qa(i))throw new TypeError(ca(i,..._i));if(!i.extractable)throw new TypeError("CryptoKey is not extractable");if(i.type!==e)throw new TypeError(`key is not a ${e} key`);return I1(ab(new Uint8Array(await dn.subtle.exportKey(r,i))),`${e.toUpperCase()} KEY`)},ZT=e=>P1("public","spki",e),eC=e=>P1("private","pkcs8",e),Pu=(e,r,i=0)=>{i===0&&(r.unshift(r.length),r.unshift(6));let a=e.indexOf(r[0],i);if(a===-1)return!1;const o=e.subarray(a,a+r.length);return o.length!==r.length?!1:o.every((d,l)=>d===r[l])||Pu(e,r,a+1)},TS=e=>{switch(!0){case Pu(e,[42,134,72,206,61,3,1,7]):return"P-256";case Pu(e,[43,129,4,0,34]):return"P-384";case Pu(e,[43,129,4,0,35]):return"P-521";case Pu(e,[43,101,110]):return"X25519";case Pu(e,[43,101,111]):return"X448";case Pu(e,[43,101,112]):return"Ed25519";case Pu(e,[43,101,113]):return"Ed448";default:throw new Dn("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},N1=async(e,r,i,a,o)=>{var d;let l,u;const h=new Uint8Array(atob(i.replace(e,"")).split("").map(y=>y.charCodeAt(0))),f=r==="spki";switch(a){case"PS256":case"PS384":case"PS512":l={name:"RSA-PSS",hash:`SHA-${a.slice(-3)}`},u=f?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":l={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.slice(-3)}`},u=f?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":l={name:"RSA-OAEP",hash:`SHA-${parseInt(a.slice(-3),10)||1}`},u=f?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":l={name:"ECDSA",namedCurve:"P-256"},u=f?["verify"]:["sign"];break;case"ES384":l={name:"ECDSA",namedCurve:"P-384"},u=f?["verify"]:["sign"];break;case"ES512":l={name:"ECDSA",namedCurve:"P-521"},u=f?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const y=TS(h);l=y.startsWith("P-")?{name:"ECDH",namedCurve:y}:{name:y},u=f?[]:["deriveBits"];break}case"EdDSA":l={name:TS(h)},u=f?["verify"]:["sign"];break;default:throw new Dn('Invalid or unsupported "alg" (Algorithm) value')}return dn.subtle.importKey(r,h,l,(d=o?.extractable)!==null&&d!==void 0?d:!1,u)},tC=(e,r,i)=>N1(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,r,i),F1=(e,r,i)=>N1(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,r,i);function CS(e){let r=[],i=0;for(;i<e.length;){let a=D1(e.subarray(i));r.push(a),i+=a.byteLength}return r}function D1(e){let r=0,i=e[0]&31;if(r++,i===31){for(i=0;e[r]>=128;)i=i*128+e[r]-128,r++;i=i*128+e[r]-128,r++}let a=0;if(e[r]<128)a=e[r],r++;else if(a===128){for(a=0;e[r+a]!==0||e[r+a+1]!==0;){if(a>e.byteLength)throw new TypeError("invalid indefinite form length");a++}const d=r+a+2;return{byteLength:d,contents:e.subarray(r,r+a),raw:e.subarray(0,d)}}else{let d=e[r]&127;r++,a=0;for(let l=0;l<d;l++)a=a*256+e[r],r++}const o=r+a;return{byteLength:o,contents:e.subarray(r,o),raw:e.subarray(0,o)}}function rC(e){const r=CS(CS(D1(e).contents)[0].contents);return ab(r[r[0].raw[0]===160?6:5].raw)}function nC(e){const r=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),i=h1(r);return I1(rC(i),"PUBLIC KEY")}const iC=(e,r,i)=>{let a;try{a=nC(e)}catch(o){throw new TypeError("Failed to parse the X.509 certificate",{cause:o})}return F1(a,r,i)};function aC(e){let r,i;switch(e.kty){case"oct":{switch(e.alg){case"HS256":case"HS384":case"HS512":r={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},i=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new Dn(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":r={name:"AES-GCM"},i=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":r={name:"AES-KW"},i=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":r={name:"PBKDF2"},i=["deriveBits"];break;default:throw new Dn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},i=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},i=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},i=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Dn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":r={name:"ECDSA",namedCurve:"P-256"},i=e.d?["sign"]:["verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},i=e.d?["sign"]:["verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},i=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:"ECDH",namedCurve:e.crv},i=e.d?["deriveBits"]:[];break;default:throw new Dn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":r={name:e.crv},i=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":r={name:e.crv},i=e.d?["deriveBits"]:[];break;default:throw new Dn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Dn('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:r,keyUsages:i}}const OS=async e=>{var r,i;if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:a,keyUsages:o}=aC(e),d=[a,(r=e.ext)!==null&&r!==void 0?r:!1,(i=e.key_ops)!==null&&i!==void 0?i:o];if(a.name==="PBKDF2")return dn.subtle.importKey("raw",Ni(e.k),...d);const l={...e};return delete l.alg,delete l.use,dn.subtle.importKey("jwk",l,...d)};async function oC(e,r,i){if(typeof e!="string"||e.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return F1(e,r,i)}async function sC(e,r,i){if(typeof e!="string"||e.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return iC(e,r,i)}async function lC(e,r,i){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return tC(e,r,i)}async function Eg(e,r,i){var a;if(!ji(e))throw new TypeError("JWK must be an object");switch(r||(r=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return i??(i=e.ext!==!0),i?OS({...e,alg:r,ext:(a=e.ext)!==null&&a!==void 0?a:!1}):Ni(e.k);case"RSA":if(e.oth!==void 0)throw new Dn('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return OS({...e,alg:r});default:throw new Dn('Unsupported "kty" (Key Type) Parameter value')}}const uC=(e,r)=>{if(!(r instanceof Uint8Array)){if(!E1(r))throw new TypeError(S1(e,r,..._i,"Uint8Array"));if(r.type!=="secret")throw new TypeError(`${_i.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},cC=(e,r,i)=>{if(!E1(r))throw new TypeError(S1(e,r,..._i));if(r.type==="secret")throw new TypeError(`${_i.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(i==="sign"&&r.type==="public")throw new TypeError(`${_i.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(i==="decrypt"&&r.type==="public")throw new TypeError(`${_i.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(r.algorithm&&i==="verify"&&r.type==="private")throw new TypeError(`${_i.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(r.algorithm&&i==="encrypt"&&r.type==="private")throw new TypeError(`${_i.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},mm=(e,r,i)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?uC(e,r):cC(e,r,i)};async function fC(e,r,i,a,o){if(!(i instanceof Uint8Array))throw new TypeError(ca(i,"Uint8Array"));const d=parseInt(e.slice(1,4),10),l=await dn.subtle.importKey("raw",i.subarray(d>>3),"AES-CBC",!1,["encrypt"]),u=await dn.subtle.importKey("raw",i.subarray(0,d>>3),{hash:`SHA-${d<<1}`,name:"HMAC"},!1,["sign"]),h=new Uint8Array(await dn.subtle.encrypt({iv:a,name:"AES-CBC"},l,r)),f=Ps(o,a,h,d1(o.length<<3)),y=new Uint8Array((await dn.subtle.sign("HMAC",u,f)).slice(0,d>>3));return{ciphertext:h,tag:y}}async function dC(e,r,i,a,o){let d;i instanceof Uint8Array?d=await dn.subtle.importKey("raw",i,"AES-GCM",!1,["encrypt"]):(Bu(i,e,"encrypt"),d=i);const l=new Uint8Array(await dn.subtle.encrypt({additionalData:o,iv:a,name:"AES-GCM",tagLength:128},d,r)),u=l.slice(-16);return{ciphertext:l.slice(0,-16),tag:u}}const _v=async(e,r,i,a,o)=>{if(!qa(i)&&!(i instanceof Uint8Array))throw new TypeError(ca(i,..._i,"Uint8Array"));switch(b1(e,a),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return i instanceof Uint8Array&&Wy(i,parseInt(e.slice(-3),10)),fC(e,r,i,a,o);case"A128GCM":case"A192GCM":case"A256GCM":return i instanceof Uint8Array&&Wy(i,parseInt(e.slice(1,4),10)),dC(e,r,i,a,o);default:throw new Dn("Unsupported JWE Content Encryption Algorithm")}};async function hC(e,r,i,a){const o=e.slice(0,7);a||(a=v1(o));const{ciphertext:d,tag:l}=await _v(o,i,r,a,new Uint8Array(0));return{encryptedKey:d,iv:Ci(a),tag:Ci(l)}}async function pC(e,r,i,a,o){const d=e.slice(0,7);return A1(d,r,i,a,o,new Uint8Array(0))}async function gC(e,r,i,a,o){switch(mm(e,r,"decrypt"),e){case"dir":{if(i!==void 0)throw new vr("Encountered unexpected JWE Encrypted Key");return r}case"ECDH-ES":if(i!==void 0)throw new vr("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ji(a.epk))throw new vr('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!C1(r))throw new Dn("ECDH with the provided key is not allowed or not supported by your javascript runtime");const d=await Eg(a.epk,e);let l,u;if(a.apu!==void 0){if(typeof a.apu!="string")throw new vr('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{l=Ni(a.apu)}catch{throw new vr("Failed to base64url decode the apu")}}if(a.apv!==void 0){if(typeof a.apv!="string")throw new vr('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{u=Ni(a.apv)}catch{throw new vr("Failed to base64url decode the apv")}}const h=await T1(d,r,e==="ECDH-ES"?a.enc:e,e==="ECDH-ES"?lb(a.enc):parseInt(e.slice(-5,-2),10),l,u);if(e==="ECDH-ES")return h;if(i===void 0)throw new vr("JWE Encrypted Key missing");return wv(e.slice(-6),h,i)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(i===void 0)throw new vr("JWE Encrypted Key missing");return XT(e,r,i)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(i===void 0)throw new vr("JWE Encrypted Key missing");if(typeof a.p2c!="number")throw new vr('JOSE Header "p2c" (PBES2 Count) missing or invalid');const d=o?.maxPBES2Count||1e4;if(a.p2c>d)throw new vr('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof a.p2s!="string")throw new vr('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let l;try{l=Ni(a.p2s)}catch{throw new vr("Failed to base64url decode the p2s")}return YT(e,r,i,a.p2c,l)}case"A128KW":case"A192KW":case"A256KW":{if(i===void 0)throw new vr("JWE Encrypted Key missing");return wv(e,r,i)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(i===void 0)throw new vr("JWE Encrypted Key missing");if(typeof a.iv!="string")throw new vr('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof a.tag!="string")throw new vr('JOSE Header "tag" (Authentication Tag) missing or invalid');let d;try{d=Ni(a.iv)}catch{throw new vr("Failed to base64url decode the iv")}let l;try{l=Ni(a.tag)}catch{throw new vr("Failed to base64url decode the tag")}return pC(e,r,i,d,l)}default:throw new Dn('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Ag(e,r,i,a,o){if(o.crit!==void 0&&a.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!a||a.crit===void 0)return new Set;if(!Array.isArray(a.crit)||a.crit.length===0||a.crit.some(l=>typeof l!="string"||l.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let d;i!==void 0?d=new Map([...Object.entries(i),...r.entries()]):d=r;for(const l of a.crit){if(!d.has(l))throw new Dn(`Extension Header Parameter "${l}" is not recognized`);if(o[l]===void 0)throw new e(`Extension Header Parameter "${l}" is missing`);if(d.get(l)&&a[l]===void 0)throw new e(`Extension Header Parameter "${l}" MUST be integrity protected`)}return new Set(a.crit)}const Sv=(e,r)=>{if(r!==void 0&&(!Array.isArray(r)||r.some(i=>typeof i!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(r)return new Set(r)};async function ub(e,r,i){var a;if(!ji(e))throw new vr("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new vr("JOSE Header missing");if(typeof e.iv!="string")throw new vr("JWE Initialization Vector missing or incorrect type");if(typeof e.ciphertext!="string")throw new vr("JWE Ciphertext missing or incorrect type");if(typeof e.tag!="string")throw new vr("JWE Authentication Tag missing or incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new vr("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new vr("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new vr("JWE AAD incorrect type");if(e.header!==void 0&&!ji(e.header))throw new vr("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!ji(e.unprotected))throw new vr("JWE Per-Recipient Unprotected Header incorrect type");let o;if(e.protected)try{const K=Ni(e.protected);o=JSON.parse(Io.decode(K))}catch{throw new vr("JWE Protected Header is invalid")}if(!Sg(o,e.header,e.unprotected))throw new vr("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const d={...o,...e.header,...e.unprotected};if(Ag(vr,new Map,i?.crit,o,d),d.zip!==void 0){if(!o||!o.zip)throw new vr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(d.zip!=="DEF")throw new Dn('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:l,enc:u}=d;if(typeof l!="string"||!l)throw new vr("missing JWE Algorithm (alg) in JWE Header");if(typeof u!="string"||!u)throw new vr("missing JWE Encryption Algorithm (enc) in JWE Header");const h=i&&Sv("keyManagementAlgorithms",i.keyManagementAlgorithms),f=i&&Sv("contentEncryptionAlgorithms",i.contentEncryptionAlgorithms);if(h&&!h.has(l))throw new zy('"alg" (Algorithm) Header Parameter not allowed');if(f&&!f.has(u))throw new zy('"enc" (Encryption Algorithm) Header Parameter not allowed');let y;if(e.encrypted_key!==void 0)try{y=Ni(e.encrypted_key)}catch{throw new vr("Failed to base64url decode the encrypted_key")}let b=!1;typeof r=="function"&&(r=await r(o,e),b=!0);let _;try{_=await gC(l,r,y,d,i)}catch(K){if(K instanceof TypeError||K instanceof vr||K instanceof Dn)throw K;_=ff(u)}let A,T;try{A=Ni(e.iv)}catch{throw new vr("Failed to base64url decode the iv")}try{T=Ni(e.tag)}catch{throw new vr("Failed to base64url decode the tag")}const x=Ri.encode((a=e.protected)!==null&&a!==void 0?a:"");let O;e.aad!==void 0?O=Ps(x,Ri.encode("."),Ri.encode(e.aad)):O=x;let R;try{R=Ni(e.ciphertext)}catch{throw new vr("Failed to base64url decode the ciphertext")}let F=await A1(u,_,R,A,T,O);d.zip==="DEF"&&(F=await(i?.inflateRaw||$T)(F));const P={plaintext:F};if(e.protected!==void 0&&(P.protectedHeader=o),e.aad!==void 0)try{P.additionalAuthenticatedData=Ni(e.aad)}catch{throw new vr("Failed to base64url decode the aad")}return e.unprotected!==void 0&&(P.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(P.unprotectedHeader=e.header),b?{...P,key:r}:P}async function U1(e,r,i){if(e instanceof Uint8Array&&(e=Io.decode(e)),typeof e!="string")throw new vr("Compact JWE must be a string or Uint8Array");const{0:a,1:o,2:d,3:l,4:u,length:h}=e.split(".");if(h!==5)throw new vr("Invalid Compact JWE");const f=await ub({ciphertext:l,iv:d||void 0,protected:a||void 0,tag:u||void 0,encrypted_key:o||void 0},r,i),y={plaintext:f.plaintext,protectedHeader:f.protectedHeader};return typeof r=="function"?{...y,key:f.key}:y}async function yC(e,r,i){if(!ji(e))throw new vr("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(ji))throw new vr("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new vr("JWE Recipients has no members");for(const a of e.recipients)try{return await ub({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:a.encrypted_key,header:a.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},r,i)}catch{}throw new dg}const mC=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:Ci(e)};if(!qa(e))throw new TypeError(ca(e,..._i,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:r,key_ops:i,alg:a,use:o,...d}=await dn.subtle.exportKey("jwk",e);return d};async function vC(e){return ZT(e)}async function bC(e){return eC(e)}async function cb(e){return mC(e)}async function L1(e,r,i,a,o={}){let d,l,u;switch(mm(e,i,"encrypt"),e){case"dir":{u=i;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!C1(i))throw new Dn("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:h,apv:f}=o;let{epk:y}=o;y||(y=(await qT(i)).privateKey);const{x:b,y:_,crv:A,kty:T}=await cb(y),x=await T1(i,y,e==="ECDH-ES"?r:e,e==="ECDH-ES"?lb(r):parseInt(e.slice(-5,-2),10),h,f);if(l={epk:{x:b,crv:A,kty:T}},T==="EC"&&(l.epk.y=_),h&&(l.apu=Ci(h)),f&&(l.apv=Ci(f)),e==="ECDH-ES"){u=x;break}u=a||ff(r);const O=e.slice(-6);d=await bv(O,x,u);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{u=a||ff(r),d=await QT(e,i,u);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{u=a||ff(r);const{p2c:h,p2s:f}=o;({encryptedKey:d,...l}=await JT(e,i,u,h,f));break}case"A128KW":case"A192KW":case"A256KW":{u=a||ff(r),d=await bv(e,i,u);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{u=a||ff(r);const{iv:h}=o;({encryptedKey:d,...l}=await hC(e,i,u,h));break}default:throw new Dn('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:u,encryptedKey:d,parameters:l}}const M1=Symbol();class Yy{constructor(r){if(!(r instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=r}setKeyManagementParameters(r){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=r,this}setProtectedHeader(r){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setSharedUnprotectedHeader(r){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=r,this}setUnprotectedHeader(r){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}setAdditionalAuthenticatedData(r){return this._aad=r,this}setContentEncryptionKey(r){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=r,this}setInitializationVector(r){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=r,this}async encrypt(r,i){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new vr("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Sg(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new vr("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const a={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Ag(vr,new Map,i?.crit,this._protectedHeader,a),a.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new vr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(a.zip!=="DEF")throw new Dn('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:o,enc:d}=a;if(typeof o!="string"||!o)throw new vr('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof d!="string"||!d)throw new vr('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let l;if(o==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(o==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let u;{let T;({cek:u,encryptedKey:l,parameters:T}=await L1(o,d,r,this._cek,this._keyManagementParameters)),T&&(i&&M1 in i?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...T}:this.setUnprotectedHeader(T):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...T}:this.setProtectedHeader(T))}this._iv||(this._iv=v1(d));let h,f,y;this._protectedHeader?f=Ri.encode(Ci(JSON.stringify(this._protectedHeader))):f=Ri.encode(""),this._aad?(y=Ci(this._aad),h=Ps(f,Ri.encode("."),Ri.encode(y))):h=f;let b,_;if(a.zip==="DEF"){const T=await(i?.deflateRaw||KT)(this._plaintext);({ciphertext:b,tag:_}=await _v(d,T,u,this._iv,h))}else({ciphertext:b,tag:_}=await _v(d,this._plaintext,u,this._iv,h));const A={ciphertext:Ci(b),iv:Ci(this._iv),tag:Ci(_)};return l&&(A.encrypted_key=Ci(l)),y&&(A.aad=y),this._protectedHeader&&(A.protected=Io.decode(f)),this._sharedUnprotectedHeader&&(A.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(A.header=this._unprotectedHeader),A}}class wC{constructor(r,i,a){this.parent=r,this.key=i,this.options=a}setUnprotectedHeader(r){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=r,this}addRecipient(...r){return this.parent.addRecipient(...r)}encrypt(...r){return this.parent.encrypt(...r)}done(){return this.parent}}class _C{constructor(r){this._recipients=[],this._plaintext=r}addRecipient(r,i){const a=new wC(this,r,{crit:i?.crit});return this._recipients.push(a),a}setProtectedHeader(r){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setSharedUnprotectedHeader(r){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}setAdditionalAuthenticatedData(r){return this._aad=r,this}async encrypt(r){var i,a,o;if(!this._recipients.length)throw new vr("at least one recipient must be added");if(r={deflateRaw:r?.deflateRaw},this._recipients.length===1){const[h]=this._recipients,f=await new Yy(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(h.unprotectedHeader).encrypt(h.key,{...h.options,...r});let y={ciphertext:f.ciphertext,iv:f.iv,recipients:[{}],tag:f.tag};return f.aad&&(y.aad=f.aad),f.protected&&(y.protected=f.protected),f.unprotected&&(y.unprotected=f.unprotected),f.encrypted_key&&(y.recipients[0].encrypted_key=f.encrypted_key),f.header&&(y.recipients[0].header=f.header),y}let d;for(let h=0;h<this._recipients.length;h++){const f=this._recipients[h];if(!Sg(this._protectedHeader,this._unprotectedHeader,f.unprotectedHeader))throw new vr("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const y={...this._protectedHeader,...this._unprotectedHeader,...f.unprotectedHeader},{alg:b}=y;if(typeof b!="string"||!b)throw new vr('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(b==="dir"||b==="ECDH-ES")throw new vr('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof y.enc!="string"||!y.enc)throw new vr('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!d)d=y.enc;else if(d!==y.enc)throw new vr('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(Ag(vr,new Map,f.options.crit,this._protectedHeader,y),y.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new vr('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const l=ff(d);let u={ciphertext:"",iv:"",recipients:[],tag:""};for(let h=0;h<this._recipients.length;h++){const f=this._recipients[h],y={};u.recipients.push(y);const _={...this._protectedHeader,...this._unprotectedHeader,...f.unprotectedHeader}.alg.startsWith("PBES2")?2048+h:void 0;if(h===0){const x=await new Yy(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(l).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(f.unprotectedHeader).setKeyManagementParameters({p2c:_}).encrypt(f.key,{...f.options,...r,[M1]:!0});u.ciphertext=x.ciphertext,u.iv=x.iv,u.tag=x.tag,x.aad&&(u.aad=x.aad),x.protected&&(u.protected=x.protected),x.unprotected&&(u.unprotected=x.unprotected),y.encrypted_key=x.encrypted_key,x.header&&(y.header=x.header);continue}const{encryptedKey:A,parameters:T}=await L1(((i=f.unprotectedHeader)===null||i===void 0?void 0:i.alg)||((a=this._protectedHeader)===null||a===void 0?void 0:a.alg)||((o=this._unprotectedHeader)===null||o===void 0?void 0:o.alg),d,f.key,l,{p2c:_});y.encrypted_key=Ci(A),(f.unprotectedHeader||T)&&(y.header={...f.unprotectedHeader,...T})}return u}}function k1(e,r){const i=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:i,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:i,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:i,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:i,name:"ECDSA",namedCurve:r.namedCurve};case"EdDSA":return{name:r.name};default:throw new Dn(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function B1(e,r,i){if(qa(r))return HT(r,e,i),r;if(r instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(ca(r,..._i));return dn.subtle.importKey("raw",r,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[i])}throw new TypeError(ca(r,..._i,"Uint8Array"))}const SC=async(e,r,i,a)=>{const o=await B1(e,r,"verify");ym(e,o);const d=k1(e,o.algorithm);try{return await dn.subtle.verify(d,o,i,a)}catch{return!1}};async function fb(e,r,i){var a;if(!ji(e))throw new Jn("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new Jn('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new Jn("JWS Protected Header incorrect type");if(e.payload===void 0)throw new Jn("JWS Payload missing");if(typeof e.signature!="string")throw new Jn("JWS Signature missing or incorrect type");if(e.header!==void 0&&!ji(e.header))throw new Jn("JWS Unprotected Header incorrect type");let o={};if(e.protected)try{const O=Ni(e.protected);o=JSON.parse(Io.decode(O))}catch{throw new Jn("JWS Protected Header is invalid")}if(!Sg(o,e.header))throw new Jn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const d={...o,...e.header},l=Ag(Jn,new Map([["b64",!0]]),i?.crit,o,d);let u=!0;if(l.has("b64")&&(u=o.b64,typeof u!="boolean"))throw new Jn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:h}=d;if(typeof h!="string"||!h)throw new Jn('JWS "alg" (Algorithm) Header Parameter missing or invalid');const f=i&&Sv("algorithms",i.algorithms);if(f&&!f.has(h))throw new zy('"alg" (Algorithm) Header Parameter not allowed');if(u){if(typeof e.payload!="string")throw new Jn("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new Jn("JWS Payload must be a string or an Uint8Array instance");let y=!1;typeof r=="function"&&(r=await r(o,e),y=!0),mm(h,r,"verify");const b=Ps(Ri.encode((a=e.protected)!==null&&a!==void 0?a:""),Ri.encode("."),typeof e.payload=="string"?Ri.encode(e.payload):e.payload);let _;try{_=Ni(e.signature)}catch{throw new Jn("Failed to base64url decode the signature")}if(!await SC(h,r,_,b))throw new sb;let T;if(u)try{T=Ni(e.payload)}catch{throw new Jn("Failed to base64url decode the payload")}else typeof e.payload=="string"?T=Ri.encode(e.payload):T=e.payload;const x={payload:T};return e.protected!==void 0&&(x.protectedHeader=o),e.header!==void 0&&(x.unprotectedHeader=e.header),y?{...x,key:r}:x}async function H1(e,r,i){if(e instanceof Uint8Array&&(e=Io.decode(e)),typeof e!="string")throw new Jn("Compact JWS must be a string or Uint8Array");const{0:a,1:o,2:d,length:l}=e.split(".");if(l!==3)throw new Jn("Invalid Compact JWS");const u=await fb({payload:o,protected:a,signature:d},r,i),h={payload:u.payload,protectedHeader:u.protectedHeader};return typeof r=="function"?{...h,key:u.key}:h}async function EC(e,r,i){if(!ji(e))throw new Jn("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(ji))throw new Jn("JWS Signatures missing or incorrect type");for(const a of e.signatures)try{return await fb({header:a.header,payload:e.payload,protected:a.protected,signature:a.signature},r,i)}catch{}throw new sb}const jy=e=>Math.floor(e.getTime()/1e3),j1=60,V1=j1*60,db=V1*24,AC=db*7,RC=db*365.25,xC=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,Qy=e=>{const r=xC.exec(e);if(!r)throw new TypeError("Invalid time period format");const i=parseFloat(r[1]);switch(r[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(i);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(i*j1);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(i*V1);case"day":case"days":case"d":return Math.round(i*db);case"week":case"weeks":case"w":return Math.round(i*AC);default:return Math.round(i*RC)}},IS=e=>e.toLowerCase().replace(/^application\//,""),TC=(e,r)=>typeof e=="string"?r.includes(e):Array.isArray(e)?r.some(Set.prototype.has.bind(new Set(e))):!1,hb=(e,r,i={})=>{const{typ:a}=i;if(a&&(typeof e.typ!="string"||IS(e.typ)!==IS(a)))throw new $a('unexpected "typ" JWT header value',"typ","check_failed");let o;try{o=JSON.parse(Io.decode(r))}catch{}if(!ji(o))throw new Ka("JWT Claims Set must be a top-level JSON object");const{requiredClaims:d=[],issuer:l,subject:u,audience:h,maxTokenAge:f}=i;f!==void 0&&d.push("iat"),h!==void 0&&d.push("aud"),u!==void 0&&d.push("sub"),l!==void 0&&d.push("iss");for(const A of new Set(d.reverse()))if(!(A in o))throw new $a(`missing required "${A}" claim`,A,"missing");if(l&&!(Array.isArray(l)?l:[l]).includes(o.iss))throw new $a('unexpected "iss" claim value',"iss","check_failed");if(u&&o.sub!==u)throw new $a('unexpected "sub" claim value',"sub","check_failed");if(h&&!TC(o.aud,typeof h=="string"?[h]:h))throw new $a('unexpected "aud" claim value',"aud","check_failed");let y;switch(typeof i.clockTolerance){case"string":y=Qy(i.clockTolerance);break;case"number":y=i.clockTolerance;break;case"undefined":y=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:b}=i,_=jy(b||new Date);if((o.iat!==void 0||f)&&typeof o.iat!="number")throw new $a('"iat" claim must be a number',"iat","invalid");if(o.nbf!==void 0){if(typeof o.nbf!="number")throw new $a('"nbf" claim must be a number',"nbf","invalid");if(o.nbf>_+y)throw new $a('"nbf" claim timestamp check failed',"nbf","check_failed")}if(o.exp!==void 0){if(typeof o.exp!="number")throw new $a('"exp" claim must be a number',"exp","invalid");if(o.exp<=_-y)throw new vv('"exp" claim timestamp check failed',"exp","check_failed")}if(f){const A=_-o.iat,T=typeof f=="number"?f:Qy(f);if(A-y>T)throw new vv('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(A<0-y)throw new $a('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return o};async function $1(e,r,i){var a;const o=await H1(e,r,i);if(!((a=o.protectedHeader.crit)===null||a===void 0)&&a.includes("b64")&&o.protectedHeader.b64===!1)throw new Ka("JWTs MUST NOT use unencoded payload");const l={payload:hb(o.protectedHeader,o.payload,i),protectedHeader:o.protectedHeader};return typeof r=="function"?{...l,key:o.key}:l}async function CC(e,r,i){const a=await U1(e,r,i),o=hb(a.protectedHeader,a.plaintext,i),{protectedHeader:d}=a;if(d.iss!==void 0&&d.iss!==o.iss)throw new $a('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(d.sub!==void 0&&d.sub!==o.sub)throw new $a('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(d.aud!==void 0&&JSON.stringify(d.aud)!==JSON.stringify(o.aud))throw new $a('replicated "aud" claim header parameter mismatch',"aud","mismatch");const l={payload:o,protectedHeader:d};return typeof r=="function"?{...l,key:a.key}:l}class K1{constructor(r){this._flattened=new Yy(r)}setContentEncryptionKey(r){return this._flattened.setContentEncryptionKey(r),this}setInitializationVector(r){return this._flattened.setInitializationVector(r),this}setProtectedHeader(r){return this._flattened.setProtectedHeader(r),this}setKeyManagementParameters(r){return this._flattened.setKeyManagementParameters(r),this}async encrypt(r,i){const a=await this._flattened.encrypt(r,i);return[a.protected,a.encrypted_key,a.iv,a.ciphertext,a.tag].join(".")}}const OC=async(e,r,i)=>{const a=await B1(e,r,"sign");ym(e,a);const o=await dn.subtle.sign(k1(e,a.algorithm),a,i);return new Uint8Array(o)};class pb{constructor(r){if(!(r instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=r}setProtectedHeader(r){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setUnprotectedHeader(r){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=r,this}async sign(r,i){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Jn("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Sg(this._protectedHeader,this._unprotectedHeader))throw new Jn("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...this._protectedHeader,...this._unprotectedHeader},o=Ag(Jn,new Map([["b64",!0]]),i?.crit,this._protectedHeader,a);let d=!0;if(o.has("b64")&&(d=this._protectedHeader.b64,typeof d!="boolean"))throw new Jn('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:l}=a;if(typeof l!="string"||!l)throw new Jn('JWS "alg" (Algorithm) Header Parameter missing or invalid');mm(l,r,"sign");let u=this._payload;d&&(u=Ri.encode(Ci(u)));let h;this._protectedHeader?h=Ri.encode(Ci(JSON.stringify(this._protectedHeader))):h=Ri.encode("");const f=Ps(h,Ri.encode("."),u),y=await OC(l,r,f),b={signature:Ci(y),payload:""};return d&&(b.payload=Io.decode(u)),this._unprotectedHeader&&(b.header=this._unprotectedHeader),this._protectedHeader&&(b.protected=Io.decode(h)),b}}class G1{constructor(r){this._flattened=new pb(r)}setProtectedHeader(r){return this._flattened.setProtectedHeader(r),this}async sign(r,i){const a=await this._flattened.sign(r,i);if(a.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${a.protected}.${a.payload}.${a.signature}`}}class IC{constructor(r,i,a){this.parent=r,this.key=i,this.options=a}setProtectedHeader(r){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=r,this}setUnprotectedHeader(r){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=r,this}addSignature(...r){return this.parent.addSignature(...r)}sign(...r){return this.parent.sign(...r)}done(){return this.parent}}class PC{constructor(r){this._signatures=[],this._payload=r}addSignature(r,i){const a=new IC(this,r,i);return this._signatures.push(a),a}async sign(){if(!this._signatures.length)throw new Jn("at least one signature must be added");const r={signatures:[],payload:""};for(let i=0;i<this._signatures.length;i++){const a=this._signatures[i],o=new pb(this._payload);o.setProtectedHeader(a.protectedHeader),o.setUnprotectedHeader(a.unprotectedHeader);const{payload:d,...l}=await o.sign(a.key,a.options);if(i===0)r.payload=d;else if(r.payload!==d)throw new Jn("inconsistent use of JWS Unencoded Payload (RFC7797)");r.signatures.push(l)}return r}}class gb{constructor(r){if(!ji(r))throw new TypeError("JWT Claims Set MUST be an object");this._payload=r}setIssuer(r){return this._payload={...this._payload,iss:r},this}setSubject(r){return this._payload={...this._payload,sub:r},this}setAudience(r){return this._payload={...this._payload,aud:r},this}setJti(r){return this._payload={...this._payload,jti:r},this}setNotBefore(r){return typeof r=="number"?this._payload={...this._payload,nbf:r}:this._payload={...this._payload,nbf:jy(new Date)+Qy(r)},this}setExpirationTime(r){return typeof r=="number"?this._payload={...this._payload,exp:r}:this._payload={...this._payload,exp:jy(new Date)+Qy(r)},this}setIssuedAt(r){return typeof r>"u"?this._payload={...this._payload,iat:jy(new Date)}:this._payload={...this._payload,iat:r},this}}class q1 extends gb{setProtectedHeader(r){return this._protectedHeader=r,this}async sign(r,i){var a;const o=new G1(Ri.encode(JSON.stringify(this._payload)));if(o.setProtectedHeader(this._protectedHeader),Array.isArray((a=this._protectedHeader)===null||a===void 0?void 0:a.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Ka("JWTs MUST NOT use unencoded payload");return o.sign(r,i)}}class NC extends gb{setProtectedHeader(r){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=r,this}setKeyManagementParameters(r){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=r,this}setContentEncryptionKey(r){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=r,this}setInitializationVector(r){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=r,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(r,i){const a=new K1(Ri.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),a.setProtectedHeader(this._protectedHeader),this._iv&&a.setInitializationVector(this._iv),this._cek&&a.setContentEncryptionKey(this._cek),this._keyManagementParameters&&a.setKeyManagementParameters(this._keyManagementParameters),a.encrypt(r,i)}}const Ou=(e,r)=>{if(typeof e!="string"||!e)throw new p1(`${r} missing or invalid`)};async function z1(e,r){if(!ji(e))throw new TypeError("JWK must be an object");if(r??(r="sha256"),r!=="sha256"&&r!=="sha384"&&r!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let i;switch(e.kty){case"EC":Ou(e.crv,'"crv" (Curve) Parameter'),Ou(e.x,'"x" (X Coordinate) Parameter'),Ou(e.y,'"y" (Y Coordinate) Parameter'),i={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":Ou(e.crv,'"crv" (Subtype of Key Pair) Parameter'),Ou(e.x,'"x" (Public Key) Parameter'),i={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":Ou(e.e,'"e" (Exponent) Parameter'),Ou(e.n,'"n" (Modulus) Parameter'),i={e:e.e,kty:e.kty,n:e.n};break;case"oct":Ou(e.k,'"k" (Key Value) Parameter'),i={k:e.k,kty:e.kty};break;default:throw new Dn('"kty" (Key Type) Parameter missing or unsupported')}const a=Ri.encode(JSON.stringify(i));return Ci(await f1(r,a))}async function FC(e,r){r??(r="sha256");const i=await z1(e,r);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${r.slice(-3)}:${i}`}async function DC(e,r){const i={...e,...r?.header};if(!ji(i.jwk))throw new Jn('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const a=await Eg({...i.jwk,ext:!0},i.alg,!0);if(a instanceof Uint8Array||a.type!=="public")throw new Jn('"jwk" (JSON Web Key) Header Parameter must be a public key');return a}function UC(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new Dn('Unsupported "alg" value for a JSON Web Key Set')}}function W1(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(LC)}function LC(e){return ji(e)}function MC(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}class J1{constructor(r){if(this._cached=new WeakMap,!W1(r))throw new hm("JSON Web Key Set malformed");this._jwks=MC(r)}async getKey(r,i){const{alg:a,kid:o}={...r,...i?.header},d=UC(a),l=this._jwks.keys.filter(f=>{let y=d===f.kty;if(y&&typeof o=="string"&&(y=o===f.kid),y&&typeof f.alg=="string"&&(y=a===f.alg),y&&typeof f.use=="string"&&(y=f.use==="sig"),y&&Array.isArray(f.key_ops)&&(y=f.key_ops.includes("verify")),y&&a==="EdDSA"&&(y=f.crv==="Ed25519"||f.crv==="Ed448"),y)switch(a){case"ES256":y=f.crv==="P-256";break;case"ES256K":y=f.crv==="secp256k1";break;case"ES384":y=f.crv==="P-384";break;case"ES512":y=f.crv==="P-521";break}return y}),{0:u,length:h}=l;if(h===0)throw new ob;if(h!==1){const f=new g1,{_cached:y}=this;throw f[Symbol.asyncIterator]=async function*(){for(const b of l)try{yield await PS(y,b,a)}catch{continue}},f}return PS(this._cached,u,a)}}async function PS(e,r,i){const a=e.get(r)||e.set(r,{}).get(r);if(a[i]===void 0){const o=await Eg({...r,ext:!0},i);if(o instanceof Uint8Array||o.type!=="public")throw new hm("JSON Web Key Set members must be public keys");a[i]=o}return a[i]}function kC(e){const r=new J1(e);return async function(i,a){return r.getKey(i,a)}}const BC=async(e,r,i)=>{let a,o,d=!1;typeof AbortController=="function"&&(a=new AbortController,o=setTimeout(()=>{d=!0,a.abort()},r));const l=await fetch(e.href,{signal:a?a.signal:void 0,redirect:"manual",headers:i.headers}).catch(u=>{throw d?new y1:u});if(o!==void 0&&clearTimeout(o),l.status!==200)throw new Vi("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await l.json()}catch{throw new Vi("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function HC(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}class jC extends J1{constructor(r,i){if(super({keys:[]}),this._jwks=void 0,!(r instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(r.href),this._options={agent:i?.agent,headers:i?.headers},this._timeoutDuration=typeof i?.timeoutDuration=="number"?i?.timeoutDuration:5e3,this._cooldownDuration=typeof i?.cooldownDuration=="number"?i?.cooldownDuration:3e4,this._cacheMaxAge=typeof i?.cacheMaxAge=="number"?i?.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(r,i){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(r,i)}catch(a){if(a instanceof ob&&this.coolingDown()===!1)return await this.reload(),super.getKey(r,i);throw a}}async reload(){this._pendingFetch&&HC()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=BC(this._url,this._timeoutDuration,this._options).then(r=>{if(!W1(r))throw new hm("JSON Web Key Set malformed");this._jwks={keys:r.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(r=>{throw this._pendingFetch=void 0,r})),await this._pendingFetch}}function VC(e,r){const i=new jC(e,r);return async function(a,o){return i.getKey(a,o)}}class $C extends gb{encode(){const r=Ci(JSON.stringify({alg:"none"})),i=Ci(JSON.stringify(this._payload));return`${r}.${i}.`}static decode(r,i){if(typeof r!="string")throw new Ka("Unsecured JWT must be a string");const{0:a,1:o,2:d,length:l}=r.split(".");if(l!==3||d!=="")throw new Ka("Invalid Unsecured JWT");let u;try{if(u=JSON.parse(Io.decode(Ni(a))),u.alg!=="none")throw new Error}catch{throw new Ka("Invalid Unsecured JWT")}return{payload:hb(u,Ni(o),i),header:u}}}const KC=Ci,yb=Ni,GC=Object.freeze(Object.defineProperty({__proto__:null,decode:yb,encode:KC},Symbol.toStringTag,{value:"Module"}));function qC(e){let r;if(typeof e=="string"){const i=e.split(".");(i.length===3||i.length===5)&&([r]=i)}else if(typeof e=="object"&&e)if("protected"in e)r=e.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof r!="string"||!r)throw new Error;const i=JSON.parse(Io.decode(yb(r)));if(!ji(i))throw new Error;return i}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function zC(e){if(typeof e!="string")throw new Ka("JWTs must use Compact JWS serialization, JWT must be a string");const{1:r,length:i}=e.split(".");if(i===5)throw new Ka("Only JWTs using Compact JWS serialization can be decoded");if(i!==3)throw new Ka("Invalid JWT");if(!r)throw new Ka("JWTs must contain a payload");let a;try{a=yb(r)}catch{throw new Ka("Failed to base64url decode the payload")}let o;try{o=JSON.parse(Io.decode(a))}catch{throw new Ka("Failed to parse the decoded payload as JSON")}if(!ji(o))throw new Ka("Invalid JWT Claims Set");return o}async function WC(e,r){var i;let a,o,d;switch(e){case"HS256":case"HS384":case"HS512":a=parseInt(e.slice(-3),10),o={name:"HMAC",hash:`SHA-${a}`,length:a},d=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return a=parseInt(e.slice(-3),10),pm(new Uint8Array(a>>3));case"A128KW":case"A192KW":case"A256KW":a=parseInt(e.slice(1,4),10),o={name:"AES-KW",length:a},d=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":a=parseInt(e.slice(1,4),10),o={name:"AES-GCM",length:a},d=["encrypt","decrypt"];break;default:throw new Dn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return dn.subtle.generateKey(o,(i=r?.extractable)!==null&&i!==void 0?i:!1,d)}function Z0(e){var r;const i=(r=e?.modulusLength)!==null&&r!==void 0?r:2048;if(typeof i!="number"||i<2048)throw new Dn("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return i}async function JC(e,r){var i,a,o;let d,l;switch(e){case"PS256":case"PS384":case"PS512":d={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Z0(r)},l=["sign","verify"];break;case"RS256":case"RS384":case"RS512":d={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Z0(r)},l=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":d={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Z0(r)},l=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":d={name:"ECDSA",namedCurve:"P-256"},l=["sign","verify"];break;case"ES384":d={name:"ECDSA",namedCurve:"P-384"},l=["sign","verify"];break;case"ES512":d={name:"ECDSA",namedCurve:"P-521"},l=["sign","verify"];break;case"EdDSA":l=["sign","verify"];const u=(i=r?.crv)!==null&&i!==void 0?i:"Ed25519";switch(u){case"Ed25519":case"Ed448":d={name:u};break;default:throw new Dn("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{l=["deriveKey","deriveBits"];const h=(a=r?.crv)!==null&&a!==void 0?a:"P-256";switch(h){case"P-256":case"P-384":case"P-521":{d={name:"ECDH",namedCurve:h};break}case"X25519":case"X448":d={name:h};break;default:throw new Dn("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new Dn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return dn.subtle.generateKey(d,(o=r?.extractable)!==null&&o!==void 0?o:!1,l)}async function Y1(e,r){return JC(e,r)}async function YC(e,r){return WC(e,r)}const QC="WebCryptoAPI",XC=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:K1,CompactSign:G1,EmbeddedJWK:DC,EncryptJWT:NC,FlattenedEncrypt:Yy,FlattenedSign:pb,GeneralEncrypt:_C,GeneralSign:PC,SignJWT:q1,UnsecuredJWT:$C,base64url:GC,calculateJwkThumbprint:z1,calculateJwkThumbprintUri:FC,compactDecrypt:U1,compactVerify:H1,createLocalJWKSet:kC,createRemoteJWKSet:VC,cryptoRuntime:QC,decodeJwt:zC,decodeProtectedHeader:qC,errors:MT,exportJWK:cb,exportPKCS8:bC,exportSPKI:vC,flattenedDecrypt:ub,flattenedVerify:fb,generalDecrypt:yC,generalVerify:EC,generateKeyPair:Y1,generateSecret:YC,importJWK:Eg,importPKCS8:lC,importSPKI:oC,importX509:sC,jwtDecrypt:CC,jwtVerify:$1},Symbol.toStringTag,{value:"Module"})),ZC=nm(XC);var NS;function e2(){if(NS)return sn;NS=1;var e=gf(),r=Qv(),i=ZC,a=nb();const o="solidClientAuthn:",d=["ES256","RS256"],l={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},u=5,b=["openid","offline_access","webid"].join(" "),_=(We,Ge)=>({get(Oe,ut,Q){if(!Object.getOwnPropertyNames(e.EventEmitter).includes(ut)&&Object.getOwnPropertyNames(We).includes(ut))throw new Error(`${Ge}: [${ut}] is not supported`);return Reflect.get(Oe,ut,Q)}});class A{constructor(Ge){this.handleables=Ge,this.handleables=Ge}async getProperHandler(Ge){const Oe=await Promise.all(this.handleables.map(ut=>ut.canHandle(...Ge)));for(let ut=0;ut<Oe.length;ut+=1)if(Oe[ut])return this.handleables[ut];return null}async canHandle(...Ge){return await this.getProperHandler(Ge)!==null}async handle(...Ge){const Oe=await this.getProperHandler(Ge);if(Oe)return Oe.handle(...Ge);throw new Error(`[${this.constructor.name}] cannot find a suitable handler for: ${Ge.map(ut=>{try{return JSON.stringify(ut)}catch{return ut.toString()}}).join(", ")}`)}}async function T(We,Ge){const Oe=await r.fetch.call(globalThis,We);if(Oe.status!==200)throw new Error(`Could not fetch JWKS for [${Ge}] at [${We}]: ${Oe.status} ${Oe.statusText}`);let ut;try{ut=(await Oe.json()).keys[0]}catch(Q){throw new Error(`Malformed JWKS for [${Ge}] at [${We}]: ${Q.message}`)}return ut}async function x(We,Ge,Oe,ut){const Q=await T(Ge,Oe);let k;try{const{payload:V}=await i.jwtVerify(We,await i.importJWK(Q),{issuer:Oe,audience:ut});k=V}catch(V){throw new Error(`Token verification failed: ${V.stack}`)}if(typeof k.webid=="string")return k.webid;if(typeof k.sub!="string")throw new Error(`The token ${JSON.stringify(k)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(k.sub),k.sub}catch(V){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${k.sub}] is invalid as a URL - error [${V}].`)}}function O(We){try{const Ge=new URL(We),Oe=!Ge.searchParams.has("code")&&!Ge.searchParams.has("state"),ut=Ge.hash==="";return Oe&&ut}catch{return!1}}function R(We){const Ge=new URL(We);return Ge.searchParams.delete("state"),Ge.searchParams.delete("code"),Ge.searchParams.delete("error"),Ge.searchParams.delete("error_description"),Ge.searchParams.delete("iss"),Ge}class F{constructor(Ge,Oe){this.storageUtility=Ge,this.redirector=Oe,this.storageUtility=Ge,this.redirector=Oe}async canHandle(Ge){return!!(Ge.issuerConfiguration.grantTypesSupported&&Ge.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1)}async handleRedirect({oidcLoginOptions:Ge,state:Oe,codeVerifier:ut,targetUrl:Q}){await Promise.all([this.storageUtility.setForUser(Oe,{sessionId:Ge.sessionId}),this.storageUtility.setForUser(Ge.sessionId,{codeVerifier:ut,issuer:Ge.issuer.toString(),redirectUrl:Ge.redirectUrl,dpop:Ge.dpop?"true":"false"})]),this.redirector.redirect(Q,{handleRedirect:Ge.handleRedirect})}}class P{constructor(Ge){this.sessionInfoManager=Ge,this.sessionInfoManager=Ge}async canHandle(){return!0}async handle(Ge){await this.sessionInfoManager.clear(Ge)}}class K{constructor(Ge){this.redirector=Ge,this.redirector=Ge}async canHandle(Ge,Oe){return Oe?.logoutType==="idp"}async handle(Ge,Oe){if(Oe?.logoutType!=="idp")throw new Error("Attempting to call idp logout handler to perform app logout");if(Oe.toLogoutUrl===void 0)throw new Error("Cannot perform IDP logout. Did you log in using the OIDC authentication flow?");this.redirector.redirect(Oe.toLogoutUrl(Oe),{handleRedirect:Oe.handleRedirect})}}class B{constructor(Ge,Oe){this.handlers=[new P(Ge),new K(Oe)]}async canHandle(){return!0}async handle(Ge,Oe){for(const ut of this.handlers)await ut.canHandle(Ge,Oe)&&await ut.handle(Ge,Oe)}}function W(){return{isLoggedIn:!1,sessionId:a.v4(),fetch:(...We)=>r.fetch.call(globalThis,...We)}}async function Y(We,Ge){await Promise.all([Ge.deleteAllUserData(We,{secure:!1}),Ge.deleteAllUserData(We,{secure:!0})])}class q{constructor(Ge){this.storageUtility=Ge,this.storageUtility=Ge}update(Ge,Oe){throw new Error("Not Implemented")}get(Ge){throw new Error("Not implemented")}async getAll(){throw new Error("Not implemented")}async clear(Ge){return Y(Ge,this.storageUtility)}async register(Ge){throw new Error("Not implemented")}async getRegisteredSessionIdAll(){throw new Error("Not implemented")}async clearAll(){throw new Error("Not implemented")}}function Pe({endSessionEndpoint:We,idTokenHint:Ge,postLogoutRedirectUri:Oe,state:ut}){const Q=new URL(We);return Ge!==void 0&&Q.searchParams.append("id_token_hint",Ge),Oe!==void 0&&(Q.searchParams.append("post_logout_redirect_uri",Oe),ut!==void 0&&Q.searchParams.append("state",ut)),Q.toString()}function $({endSessionEndpoint:We,idTokenHint:Ge}){if(We!==void 0)return function({state:ut,postLogoutUrl:Q}){return Pe({endSessionEndpoint:We,idTokenHint:Ge,state:ut,postLogoutRedirectUri:Q})}}function ie(We){return typeof We=="string"&&["DPoP","Bearer"].includes(We)}const ge="solidClientAuthenticationUser";function Se(We){try{return new URL(We),!0}catch{return!1}}function tt(We,Ge){var Oe;return(Oe=Ge.find(ut=>We.includes(ut)))!==null&&Oe!==void 0?Oe:null}function lt(We,Ge){return We.clientId!==void 0&&!Se(We.clientId)?"static":Ge.scopesSupported.includes("webid")&&We.clientId!==void 0&&Se(We.clientId)?"solid-oidc":"dynamic"}async function Ne(We,Ge,Oe,ut){const Q=lt(We,Ge);return Q==="dynamic"?ut.getClient({sessionId:We.sessionId,clientName:We.clientName,redirectUrl:We.redirectUrl},Ge):(await Oe.setForUser(We.sessionId,{clientId:We.clientId}),We.clientSecret&&await Oe.setForUser(We.sessionId,{clientSecret:We.clientSecret}),We.clientName&&await Oe.setForUser(We.sessionId,{clientName:We.clientName}),{clientId:We.clientId,clientSecret:We.clientSecret,clientName:We.clientName,clientType:Q})}const yt=(We,Ge)=>r.fetch.call(globalThis,We,Ge);class ve{constructor(Ge,Oe,ut,Q,k){this.loginHandler=Ge,this.redirectHandler=Oe,this.logoutHandler=ut,this.sessionInfoManager=Q,this.issuerConfigFetcher=k,this.fetch=yt,this.logout=async(V,j)=>{await this.logoutHandler.handle(V,j?.logoutType==="idp"?{...j,toLogoutUrl:this.boundLogout}:j),this.fetch=yt,delete this.boundLogout},this.getSessionInfo=async V=>this.sessionInfoManager.get(V),this.getAllSessionInfo=async()=>this.sessionInfoManager.getAll(),this.loginHandler=Ge,this.redirectHandler=Oe,this.logoutHandler=ut,this.sessionInfoManager=Q,this.issuerConfigFetcher=k}}async function rt(We,Ge){return We.getForUser(Ge,"sessionId")}async function J(We,Ge,Oe){try{const[ut,Q,k,V]=await Promise.all([Ge.getForUser(We,"issuer",{errorIfNull:!0}),Ge.getForUser(We,"codeVerifier"),Ge.getForUser(We,"redirectUrl"),Ge.getForUser(We,"dpop",{errorIfNull:!0})]);await Ge.deleteForUser(We,"codeVerifier");const j=await Oe.fetchConfig(ut);return{codeVerifier:Q,redirectUrl:k,issuerConfig:j,dpop:V==="true"}}catch(ut){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${We}]: ${ut}`)}}async function xe(We,Ge,Oe,ut,Q,k,V){Q!==void 0&&await We.setForUser(Ge,{refreshToken:Q},{secure:k}),Oe!==void 0&&await We.setForUser(Ge,{webId:Oe},{secure:k}),ut!==void 0&&await We.setForUser(Ge,{isLoggedIn:ut},{secure:k}),V!==void 0&&await We.setForUser(Ge,{publicKey:JSON.stringify(V.publicKey),privateKey:JSON.stringify(await i.exportJWK(V.privateKey))},{secure:k})}class Ze{constructor(Ge,Oe){this.secureStorage=Ge,this.insecureStorage=Oe,this.secureStorage=Ge,this.insecureStorage=Oe}getKey(Ge){return`solidClientAuthenticationUser:${Ge}`}async getUserData(Ge,Oe){const ut=await(Oe?this.secureStorage:this.insecureStorage).get(this.getKey(Ge));if(ut===void 0)return{};try{return JSON.parse(ut)}catch{throw new Error(`Data for user [${Ge}] in [${Oe?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${ut}`)}}async setUserData(Ge,Oe,ut){await(ut?this.secureStorage:this.insecureStorage).set(this.getKey(Ge),JSON.stringify(Oe))}async get(Ge,Oe){const ut=await(Oe?.secure?this.secureStorage:this.insecureStorage).get(Ge);if(ut===void 0&&Oe?.errorIfNull)throw new Error(`[${Ge}] is not stored`);return ut}async set(Ge,Oe,ut){return(ut?.secure?this.secureStorage:this.insecureStorage).set(Ge,Oe)}async delete(Ge,Oe){return(Oe?.secure?this.secureStorage:this.insecureStorage).delete(Ge)}async getForUser(Ge,Oe,ut){const Q=await this.getUserData(Ge,ut?.secure);let k;if((!Q||!Q[Oe])&&(k=void 0),k=Q[Oe],k===void 0&&ut?.errorIfNull)throw new Error(`Field [${Oe}] for user [${Ge}] is not stored`);return k||void 0}async setForUser(Ge,Oe,ut){let Q;try{Q=await this.getUserData(Ge,ut?.secure)}catch{Q={}}await this.setUserData(Ge,{...Q,...Oe},ut?.secure)}async deleteForUser(Ge,Oe,ut){const Q=await this.getUserData(Ge,ut?.secure);delete Q[Oe],await this.setUserData(Ge,Q,ut?.secure)}async deleteAllUserData(Ge,Oe){await(Oe?.secure?this.secureStorage:this.insecureStorage).delete(this.getKey(Ge))}}class je{constructor(){this.map={}}async get(Ge){return this.map[Ge]||void 0}async set(Ge,Oe){this.map[Ge]=Oe}async delete(Ge){delete this.map[Ge]}}class ht extends Error{constructor(Ge){super(Ge)}}class Nt extends Error{constructor(Ge){super(`[${Ge}] is not implemented`)}}class kt extends Error{constructor(Ge){super(`Invalid response from OIDC provider: missing fields ${Ge}`),this.missingFields=Ge}}class Me extends Error{constructor(Ge,Oe,ut){super(Ge),this.error=Oe,this.errorDescription=ut}}function le(We){const Ge=new URL(We);return new URL(Ge.pathname,Ge.origin).toString()}async function Te(We,Ge,Oe){return new i.SignJWT({htu:le(We),htm:Ge.toUpperCase(),jti:a.v4()}).setProtectedHeader({alg:d[0],jwk:Oe.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(Oe.privateKey,{})}async function Je(){const{privateKey:We,publicKey:Ge}=await i.generateKeyPair(d[0]),Oe={privateKey:We,publicKey:await i.exportJWK(Ge)};return[Oe.publicKey.alg]=d,Oe}const se=600;function M(We){return[401,403].includes(We)}async function D(We,Ge,Oe,ut){var Q;const k=new r.Headers(ut?.headers);return k.set("Authorization",`DPoP ${Ge}`),k.set("DPoP",await Te(We,(Q=ut?.method)!==null&&Q!==void 0?Q:"get",Oe)),{...ut,headers:k}}async function G(We,Ge,Oe,ut){if(Oe!==void 0)return D(We,Ge,Oe,ut);const Q=new r.Headers(ut?.headers);return Q.set("Authorization",`Bearer ${Ge}`),{...ut,headers:Q}}async function re(We,Ge,Oe,ut,Q){return We(Oe,await G(Oe.toString(),Ge,Q,ut))}async function we(We,Ge,Oe){var ut;const Q=await We.tokenRefresher.refresh(We.sessionId,We.refreshToken,Ge);return Oe?.emit(l.SESSION_EXTENDED,(ut=Q.expiresIn)!==null&&ut!==void 0?ut:se),typeof Q.refreshToken=="string"&&Oe?.emit(l.NEW_REFRESH_TOKEN,Q.refreshToken),{accessToken:Q.accessToken,refreshToken:Q.refreshToken,expiresIn:Q.expiresIn}}const Ce=We=>We!==void 0?We-u>0?We-u:We:se;async function ot(We,Ge,Oe){var ut;let Q=Ge,k;const V=Oe?.refreshOptions;if(V!==void 0){const j=async()=>{var qe,et,ze,Yt;try{const{accessToken:Br,refreshToken:jr,expiresIn:or}=await we(V,Oe.dpopKey,Oe.eventEmitter);Q=Br,jr!==void 0&&(V.refreshToken=jr),clearTimeout(k),k=setTimeout(j,Ce(or)*1e3),(qe=Oe.eventEmitter)===null||qe===void 0||qe.emit(l.TIMEOUT_SET,k)}catch(Br){Br instanceof Me&&((et=Oe?.eventEmitter)===null||et===void 0||et.emit(l.ERROR,Br.error,Br.errorDescription),(ze=Oe?.eventEmitter)===null||ze===void 0||ze.emit(l.SESSION_EXPIRED)),Br instanceof kt&&Br.missingFields.includes("access_token")&&((Yt=Oe?.eventEmitter)===null||Yt===void 0||Yt.emit(l.SESSION_EXPIRED))}};k=setTimeout(j,Ce(Oe.expiresIn)*1e3),(ut=Oe.eventEmitter)===null||ut===void 0||ut.emit(l.TIMEOUT_SET,k)}else if(Oe!==void 0&&Oe.eventEmitter!==void 0){const j=setTimeout(()=>{Oe.eventEmitter.emit(l.SESSION_EXPIRED)},Ce(Oe.expiresIn)*1e3);Oe.eventEmitter.emit(l.TIMEOUT_SET,j)}return async(j,qe)=>{let et=await re(We,Q,j,qe,Oe?.dpopKey);const ze=!et.ok&&!M(et.status);return et.ok||ze||et.url!==j&&Oe?.dpopKey!==void 0&&(et=await re(We,Q,et.url,qe,Oe.dpopKey)),et}}const Re="getResponse",pt={get:async(We,Ge)=>Re,set:async(We,Ge)=>{},delete:async We=>{},getForUser:async(We,Ge,Oe)=>Re,setForUser:async(We,Ge,Oe)=>{},deleteForUser:async(We,Ge,Oe)=>{},deleteAllUserData:async(We,Ge)=>{}},Ct=We=>{const Ge=We;return{get:async Oe=>{if(Ge[Oe]!==void 0)return typeof Ge[Oe]=="string"?Ge[Oe]:JSON.stringify(Ge[Oe])},set:async(Oe,ut)=>{Ge[Oe]=ut},delete:async Oe=>{delete Ge[Oe]}}},bt=(We,Ge=!1)=>Ge?new Ze(Ct(We),Ct({})):new Ze(Ct({}),Ct(We));return sn.AggregateHandler=A,sn.AuthorizationCodeWithPkceOidcHandlerBase=F,sn.ClientAuthentication=ve,sn.ConfigurationError=ht,sn.DEFAULT_SCOPES=b,sn.EVENTS=l,sn.GeneralLogoutHandler=P,sn.IRpLogoutHandler=K,sn.IWaterfallLogoutHandler=B,sn.InMemoryStorage=je,sn.InvalidResponseError=kt,sn.NotImplementedError=Nt,sn.OidcProviderError=Me,sn.PREFERRED_SIGNING_ALG=d,sn.REFRESH_BEFORE_EXPIRATION_SECONDS=u,sn.SOLID_CLIENT_AUTHN_KEY_PREFIX=o,sn.SessionInfoManagerBase=q,sn.StorageUtility=Ze,sn.StorageUtilityGetResponse=Re,sn.StorageUtilityMock=pt,sn.USER_SESSION_PREFIX=ge,sn.buildAuthenticatedFetch=ot,sn.buildProxyHandler=_,sn.clear=Y,sn.createDpopHeader=Te,sn.determineSigningAlg=tt,sn.fetchJwks=T,sn.generateDpopKeyPair=Je,sn.getEndSessionUrl=Pe,sn.getSessionIdFromOauthState=rt,sn.getUnauthenticatedSession=W,sn.getWebidFromTokenPayload=x,sn.handleRegistration=Ne,sn.isSupportedTokenType=ie,sn.isValidRedirectUrl=O,sn.loadOidcContextFromStorage=J,sn.maybeBuildRpInitiatedLogout=$,sn.mockStorage=Ct,sn.mockStorageUtility=bt,sn.removeOpenIdParams=R,sn.saveSessionInfoToStorage=xe,sn}var Vy={exports:{}},t2=Vy.exports,FS;function r2(){return FS||(FS=1,function(e,r){(function(a,o){e.exports=o()})(t2,function(){return function(i){var a={};function o(d){if(a[d])return a[d].exports;var l=a[d]={i:d,l:!1,exports:{}};return i[d].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=a,o.d=function(d,l,u){o.o(d,l)||Object.defineProperty(d,l,{enumerable:!0,get:u})},o.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},o.t=function(d,l){if(1&l&&(d=o(d)),8&l||4&l&&typeof d=="object"&&d&&d.__esModule)return d;var u=Object.create(null);if(o.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:d}),2&l&&typeof d!="string")for(var h in d)o.d(u,h,(function(f){return d[f]}).bind(null,h));return u},o.n=function(d){var l=d&&d.__esModule?function(){return d.default}:function(){return d};return o.d(l,"a",l),l},o.o=function(d,l){return Object.prototype.hasOwnProperty.call(d,l)},o.p="",o(o.s=22)}([function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0});var d=function(){function f(y,b){for(var _=0;_<b.length;_++){var A=b[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}return function(y,b,_){return b&&f(y.prototype,b),_&&f(y,_),y}}(),l={debug:function(){},info:function(){},warn:function(){},error:function(){}},u=void 0,h=void 0;(a.Log=function(){function f(){(function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")})(this,f)}return f.reset=function(){h=3,u=l},f.debug=function(){if(h>=4){for(var b=arguments.length,_=Array(b),A=0;A<b;A++)_[A]=arguments[A];u.debug.apply(u,Array.from(_))}},f.info=function(){if(h>=3){for(var b=arguments.length,_=Array(b),A=0;A<b;A++)_[A]=arguments[A];u.info.apply(u,Array.from(_))}},f.warn=function(){if(h>=2){for(var b=arguments.length,_=Array(b),A=0;A<b;A++)_[A]=arguments[A];u.warn.apply(u,Array.from(_))}},f.error=function(){if(h>=1){for(var b=arguments.length,_=Array(b),A=0;A<b;A++)_[A]=arguments[A];u.error.apply(u,Array.from(_))}},d(f,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return h},set:function(b){if(!(0<=b&&b<=4))throw new Error("Invalid log level");h=b}},{key:"logger",get:function(){return u},set:function(b){if(!b.debug&&b.info&&(b.debug=b.info),!(b.debug&&b.info&&b.warn&&b.error))throw new Error("Invalid logger");u=b}}]),f}()).reset()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0});var d=function(){function f(y,b){for(var _=0;_<b.length;_++){var A=b[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}return function(y,b,_){return b&&f(y.prototype,b),_&&f(y,_),y}}(),l={setInterval:function(f){function y(b,_){return f.apply(this,arguments)}return y.toString=function(){return f.toString()},y}(function(f,y){return setInterval(f,y)}),clearInterval:function(f){function y(b){return f.apply(this,arguments)}return y.toString=function(){return f.toString()},y}(function(f){return clearInterval(f)})},u=!1,h=null;a.Global=function(){function f(){(function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")})(this,f)}return f._testing=function(){u=!0},f.setXMLHttpRequest=function(b){h=b},d(f,null,[{key:"location",get:function(){if(!u)return location}},{key:"localStorage",get:function(){if(!u&&typeof window<"u")return localStorage}},{key:"sessionStorage",get:function(){if(!u&&typeof window<"u")return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!u&&typeof window<"u")return h||XMLHttpRequest}},{key:"timer",get:function(){if(!u)return l}}]),f}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.MetadataService=void 0;var d=function(){function y(b,_){for(var A=0;A<_.length;A++){var T=_[A];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(b,T.key,T)}}return function(b,_,A){return _&&y(b.prototype,_),A&&y(b,A),b}}(),l=o(0),u=o(7);function h(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}var f=".well-known/openid-configuration";a.MetadataService=function(){function y(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.JsonService;if(h(this,y),!b)throw l.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=b,this._jsonService=new _(["application/jwk-set+json"])}return y.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},y.prototype.getMetadata=function(){var _=this;return this._settings.metadata?(l.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(l.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(A){l.Log.debug("MetadataService.getMetadata: json received");var T=_._settings.metadataSeed||{};return _._settings.metadata=Object.assign({},T,A),_._settings.metadata})):(l.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},y.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},y.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},y.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},y.prototype.getTokenEndpoint=function(){var _=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this._getMetadataProperty("token_endpoint",_)},y.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},y.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},y.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},y.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},y.prototype._getMetadataProperty=function(_){var A=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return l.Log.debug("MetadataService.getMetadataProperty for: "+_),this.getMetadata().then(function(T){if(l.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),T[_]===void 0){if(A===!0)return void l.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+_);throw l.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+_),new Error("Metadata does not contain property "+_)}return T[_]})},y.prototype.getSigningKeys=function(){var _=this;return this._settings.signingKeys?(l.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(A){return l.Log.debug("MetadataService.getSigningKeys: jwks_uri received",A),_._jsonService.getJson(A).then(function(T){if(l.Log.debug("MetadataService.getSigningKeys: key set received",T),!T.keys)throw l.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return _._settings.signingKeys=T.keys,_._settings.signingKeys})})},d(y,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(f)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=f))),this._metadataUrl}}]),y}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.UrlUtility=void 0;var d=o(0),l=o(1);a.UrlUtility=function(){function u(){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.addQueryParam=function(f,y,b){return f.indexOf("?")<0&&(f+="?"),f[f.length-1]!=="?"&&(f+="&"),f+=encodeURIComponent(y),f+="=",f+=encodeURIComponent(b)},u.parseUrlFragment=function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#",b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.Global;typeof f!="string"&&(f=b.location.href);var _=f.lastIndexOf(y);_>=0&&(f=f.substr(_+1)),y==="?"&&(_=f.indexOf("#"))>=0&&(f=f.substr(0,_));for(var A,T={},x=/([^&=]+)=([^&]*)/g,O=0;A=x.exec(f);)if(T[decodeURIComponent(A[1])]=decodeURIComponent(A[2].replace(/\+/g," ")),O++>50)return d.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",f),{error:"Response exceeded expected number of parameters"};for(var R in T)return T;return{}},u}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.JoseUtil=void 0;var d=o(26),l=function(h){return h&&h.__esModule?h:{default:h}}(o(33));a.JoseUtil=(0,l.default)({jws:d.jws,KeyUtil:d.KeyUtil,X509:d.X509,crypto:d.crypto,hextob64u:d.hextob64u,b64tohex:d.b64tohex,AllowedSigningAlgs:d.AllowedSigningAlgs})},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.OidcClientSettings=void 0;var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},l=function(){function R(F,P){for(var K=0;K<P.length;K++){var B=P[K];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(F,B.key,B)}}return function(F,P,K){return P&&R(F.prototype,P),K&&R(F,K),F}}(),u=o(0),h=o(23),f=o(6),y=o(24),b=o(2);function _(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")}var A=".well-known/openid-configuration",T="id_token",x="openid",O="client_secret_post";a.OidcClientSettings=function(){function R(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=F.authority,K=F.metadataUrl,B=F.metadata,W=F.signingKeys,Y=F.metadataSeed,q=F.client_id,Pe=F.client_secret,$=F.response_type,ie=$===void 0?T:$,ge=F.scope,Se=ge===void 0?x:ge,tt=F.redirect_uri,lt=F.post_logout_redirect_uri,Ne=F.client_authentication,yt=Ne===void 0?O:Ne,ve=F.prompt,rt=F.display,J=F.max_age,xe=F.ui_locales,Ze=F.acr_values,je=F.resource,ht=F.response_mode,Nt=F.filterProtocolClaims,kt=Nt===void 0||Nt,Me=F.loadUserInfo,le=Me===void 0||Me,Te=F.staleStateAge,Je=Te===void 0?900:Te,se=F.clockSkew,M=se===void 0?300:se,D=F.clockService,G=D===void 0?new h.ClockService:D,re=F.userInfoJwtIssuer,we=re===void 0?"OP":re,Ce=F.mergeClaims,ot=Ce!==void 0&&Ce,Re=F.stateStore,pt=Re===void 0?new f.WebStorageStateStore:Re,Ct=F.ResponseValidatorCtor,bt=Ct===void 0?y.ResponseValidator:Ct,We=F.MetadataServiceCtor,Ge=We===void 0?b.MetadataService:We,Oe=F.extraQueryParams,ut=Oe===void 0?{}:Oe,Q=F.extraTokenParams,k=Q===void 0?{}:Q;_(this,R),this._authority=P,this._metadataUrl=K,this._metadata=B,this._metadataSeed=Y,this._signingKeys=W,this._client_id=q,this._client_secret=Pe,this._response_type=ie,this._scope=Se,this._redirect_uri=tt,this._post_logout_redirect_uri=lt,this._client_authentication=yt,this._prompt=ve,this._display=rt,this._max_age=J,this._ui_locales=xe,this._acr_values=Ze,this._resource=je,this._response_mode=ht,this._filterProtocolClaims=!!kt,this._loadUserInfo=!!le,this._staleStateAge=Je,this._clockSkew=M,this._clockService=G,this._userInfoJwtIssuer=we,this._mergeClaims=!!ot,this._stateStore=pt,this._validator=new bt(this),this._metadataService=new Ge(this),this._extraQueryParams=(ut===void 0?"undefined":d(ut))==="object"?ut:{},this._extraTokenParams=(k===void 0?"undefined":d(k))==="object"?k:{}}return R.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},l(R,[{key:"client_id",get:function(){return this._client_id},set:function(P){if(this._client_id)throw u.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=P}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(P){if(this._authority)throw u.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=P}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(A)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=A)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(P){this._metadata=P}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(P){this._metadataSeed=P}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(P){this._signingKeys=P}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(P){(P===void 0?"undefined":d(P))==="object"?this._extraQueryParams=P:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(P){(P===void 0?"undefined":d(P))==="object"?this._extraTokenParams=P:this._extraTokenParams={}}}]),R}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.WebStorageStateStore=void 0;var d=o(0),l=o(1);function u(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}a.WebStorageStateStore=function(){function h(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=f.prefix,b=y===void 0?"oidc.":y,_=f.store,A=_===void 0?l.Global.localStorage:_;u(this,h),this._store=A,this._prefix=b}return h.prototype.set=function(y,b){return d.Log.debug("WebStorageStateStore.set",y),y=this._prefix+y,this._store.setItem(y,b),Promise.resolve()},h.prototype.get=function(y){d.Log.debug("WebStorageStateStore.get",y),y=this._prefix+y;var b=this._store.getItem(y);return Promise.resolve(b)},h.prototype.remove=function(y){d.Log.debug("WebStorageStateStore.remove",y),y=this._prefix+y;var b=this._store.getItem(y);return this._store.removeItem(y),Promise.resolve(b)},h.prototype.getAllKeys=function(){d.Log.debug("WebStorageStateStore.getAllKeys");for(var y=[],b=0;b<this._store.length;b++){var _=this._store.key(b);_.indexOf(this._prefix)===0&&y.push(_.substr(this._prefix.length))}return Promise.resolve(y)},h}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.JsonService=void 0;var d=o(0),l=o(1);function u(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}a.JsonService=function(){function h(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.Global.XMLHttpRequest,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;u(this,h),f&&Array.isArray(f)?this._contentTypes=f.slice():this._contentTypes=[],this._contentTypes.push("application/json"),b&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=y,this._jwtHandler=b}return h.prototype.getJson=function(y,b){var _=this;if(!y)throw d.Log.error("JsonService.getJson: No url passed"),new Error("url");return d.Log.debug("JsonService.getJson, url: ",y),new Promise(function(A,T){var x=new _._XMLHttpRequest;x.open("GET",y);var O=_._contentTypes,R=_._jwtHandler;x.onload=function(){if(d.Log.debug("JsonService.getJson: HTTP response received, status",x.status),x.status===200){var F=x.getResponseHeader("Content-Type");if(F){var P=O.find(function(K){if(F.startsWith(K))return!0});if(P=="application/jwt")return void R(x).then(A,T);if(P)try{return void A(JSON.parse(x.responseText))}catch(K){return d.Log.error("JsonService.getJson: Error parsing JSON response",K.message),void T(K)}}T(Error("Invalid response Content-Type: "+F+", from URL: "+y))}else T(Error(x.statusText+" ("+x.status+")"))},x.onerror=function(){d.Log.error("JsonService.getJson: network error"),T(Error("Network Error"))},b&&(d.Log.debug("JsonService.getJson: token passed, setting Authorization header"),x.setRequestHeader("Authorization","Bearer "+b)),x.send()})},h.prototype.postForm=function(y,b,_){var A=this;if(!y)throw d.Log.error("JsonService.postForm: No url passed"),new Error("url");return d.Log.debug("JsonService.postForm, url: ",y),new Promise(function(T,x){var O=new A._XMLHttpRequest;O.open("POST",y);var R=A._contentTypes;O.onload=function(){if(d.Log.debug("JsonService.postForm: HTTP response received, status",O.status),O.status!==200){if(O.status===400&&(W=O.getResponseHeader("Content-Type"))&&R.find(function(Y){if(W.startsWith(Y))return!0}))try{var B=JSON.parse(O.responseText);if(B&&B.error)return d.Log.error("JsonService.postForm: Error from server: ",B.error),void x(new Error(B.error))}catch(Y){return d.Log.error("JsonService.postForm: Error parsing JSON response",Y.message),void x(Y)}x(Error(O.statusText+" ("+O.status+")"))}else{var W;if((W=O.getResponseHeader("Content-Type"))&&R.find(function(Y){if(W.startsWith(Y))return!0}))try{return void T(JSON.parse(O.responseText))}catch(Y){return d.Log.error("JsonService.postForm: Error parsing JSON response",Y.message),void x(Y)}x(Error("Invalid response Content-Type: "+W+", from URL: "+y))}},O.onerror=function(){d.Log.error("JsonService.postForm: network error"),x(Error("Network Error"))};var F="";for(var P in b){var K=b[P];K&&(F.length>0&&(F+="&"),F+=encodeURIComponent(P),F+="=",F+=encodeURIComponent(K))}O.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),_!==void 0&&O.setRequestHeader("Authorization","Basic "+btoa(_)),O.send(F)})},h}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.SigninRequest=void 0;var d=o(0),l=o(3),u=o(13);a.SigninRequest=function(){function h(f){var y=f.url,b=f.client_id,_=f.redirect_uri,A=f.response_type,T=f.scope,x=f.authority,O=f.data,R=f.prompt,F=f.display,P=f.max_age,K=f.ui_locales,B=f.id_token_hint,W=f.login_hint,Y=f.acr_values,q=f.resource,Pe=f.response_mode,$=f.request,ie=f.request_uri,ge=f.extraQueryParams,Se=f.request_type,tt=f.client_secret,lt=f.extraTokenParams,Ne=f.skipUserInfo;if(function(je,ht){if(!(je instanceof ht))throw new TypeError("Cannot call a class as a function")}(this,h),!y)throw d.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!b)throw d.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!_)throw d.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!A)throw d.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!T)throw d.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!x)throw d.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var yt=h.isOidc(A),ve=h.isCode(A);Pe||(Pe=h.isCode(A)?"query":null),this.state=new u.SigninState({nonce:yt,data:O,client_id:b,authority:x,redirect_uri:_,code_verifier:ve,request_type:Se,response_mode:Pe,client_secret:tt,scope:T,extraTokenParams:lt,skipUserInfo:Ne}),y=l.UrlUtility.addQueryParam(y,"client_id",b),y=l.UrlUtility.addQueryParam(y,"redirect_uri",_),y=l.UrlUtility.addQueryParam(y,"response_type",A),y=l.UrlUtility.addQueryParam(y,"scope",T),y=l.UrlUtility.addQueryParam(y,"state",this.state.id),yt&&(y=l.UrlUtility.addQueryParam(y,"nonce",this.state.nonce)),ve&&(y=l.UrlUtility.addQueryParam(y,"code_challenge",this.state.code_challenge),y=l.UrlUtility.addQueryParam(y,"code_challenge_method","S256"));var rt={prompt:R,display:F,max_age:P,ui_locales:K,id_token_hint:B,login_hint:W,acr_values:Y,resource:q,request:$,request_uri:ie,response_mode:Pe};for(var J in rt)rt[J]&&(y=l.UrlUtility.addQueryParam(y,J,rt[J]));for(var xe in ge)y=l.UrlUtility.addQueryParam(y,xe,ge[xe]);this.url=y}return h.isOidc=function(y){return!!y.split(/\s+/g).filter(function(b){return b==="id_token"})[0]},h.isOAuth=function(y){return!!y.split(/\s+/g).filter(function(b){return b==="token"})[0]},h.isCode=function(y){return!!y.split(/\s+/g).filter(function(b){return b==="code"})[0]},h}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.State=void 0;var d=function(){function f(y,b){for(var _=0;_<b.length;_++){var A=b[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}return function(y,b,_){return b&&f(y.prototype,b),_&&f(y,_),y}}(),l=o(0),u=function(y){return y&&y.__esModule?y:{default:y}}(o(14));function h(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}a.State=function(){function f(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=y.id,_=y.data,A=y.created,T=y.request_type;h(this,f),this._id=b||(0,u.default)(),this._data=_,this._created=typeof A=="number"&&A>0?A:parseInt(Date.now()/1e3),this._request_type=T}return f.prototype.toStorageString=function(){return l.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},f.fromStorageString=function(b){return l.Log.debug("State.fromStorageString"),new f(JSON.parse(b))},f.clearStaleState=function(b,_){var A=Date.now()/1e3-_;return b.getAllKeys().then(function(T){l.Log.debug("State.clearStaleState: got keys",T);for(var x=[],O=function(K){var B=T[K];F=b.get(B).then(function(W){var Y=!1;if(W)try{var q=f.fromStorageString(W);l.Log.debug("State.clearStaleState: got item from key: ",B,q.created),q.created<=A&&(Y=!0)}catch(Pe){l.Log.error("State.clearStaleState: Error parsing state for key",B,Pe.message),Y=!0}else l.Log.debug("State.clearStaleState: no item in storage for key: ",B),Y=!0;if(Y)return l.Log.debug("State.clearStaleState: removed item for key: ",B),b.remove(B)}),x.push(F)},R=0;R<T.length;R++){var F;O(R)}return l.Log.debug("State.clearStaleState: waiting on promise count:",x.length),Promise.all(x)})},d(f,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),f}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.OidcClient=void 0;var d=function(){function O(R,F){for(var P=0;P<F.length;P++){var K=F[P];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(R,K.key,K)}}return function(R,F,P){return F&&O(R.prototype,F),P&&O(R,P),R}}(),l=o(0),u=o(5),h=o(12),f=o(8),y=o(34),b=o(35),_=o(36),A=o(13),T=o(9);function x(O,R){if(!(O instanceof R))throw new TypeError("Cannot call a class as a function")}a.OidcClient=function(){function O(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};x(this,O),R instanceof u.OidcClientSettings?this._settings=R:this._settings=new u.OidcClientSettings(R)}return O.prototype.createSigninRequest=function(){var F=this,P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=P.response_type,B=P.scope,W=P.redirect_uri,Y=P.data,q=P.state,Pe=P.prompt,$=P.display,ie=P.max_age,ge=P.ui_locales,Se=P.id_token_hint,tt=P.login_hint,lt=P.acr_values,Ne=P.resource,yt=P.request,ve=P.request_uri,rt=P.response_mode,J=P.extraQueryParams,xe=P.extraTokenParams,Ze=P.request_type,je=P.skipUserInfo,ht=arguments[1];l.Log.debug("OidcClient.createSigninRequest");var Nt=this._settings.client_id;K=K||this._settings.response_type,B=B||this._settings.scope,W=W||this._settings.redirect_uri,Pe=Pe||this._settings.prompt,$=$||this._settings.display,ie=ie||this._settings.max_age,ge=ge||this._settings.ui_locales,lt=lt||this._settings.acr_values,Ne=Ne||this._settings.resource,rt=rt||this._settings.response_mode,J=J||this._settings.extraQueryParams,xe=xe||this._settings.extraTokenParams;var kt=this._settings.authority;return f.SigninRequest.isCode(K)&&K!=="code"?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(Me){l.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",Me);var le=new f.SigninRequest({url:Me,client_id:Nt,redirect_uri:W,response_type:K,scope:B,data:Y||q,authority:kt,prompt:Pe,display:$,max_age:ie,ui_locales:ge,id_token_hint:Se,login_hint:tt,acr_values:lt,resource:Ne,request:yt,request_uri:ve,extraQueryParams:J,extraTokenParams:xe,request_type:Ze,response_mode:rt,client_secret:F._settings.client_secret,skipUserInfo:je}),Te=le.state;return(ht=ht||F._stateStore).set(Te.id,Te.toStorageString()).then(function(){return le})})},O.prototype.readSigninResponseState=function(F,P){var K=arguments.length>2&&arguments[2]!==void 0&&arguments[2];l.Log.debug("OidcClient.readSigninResponseState");var B=this._settings.response_mode==="query"||!this._settings.response_mode&&f.SigninRequest.isCode(this._settings.response_type),W=B?"?":"#",Y=new y.SigninResponse(F,W);if(!Y.state)return l.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));P=P||this._stateStore;var q=K?P.remove.bind(P):P.get.bind(P);return q(Y.state).then(function(Pe){if(!Pe)throw l.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:A.SigninState.fromStorageString(Pe),response:Y}})},O.prototype.processSigninResponse=function(F,P){var K=this;return l.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(F,P,!0).then(function(B){var W=B.state,Y=B.response;return l.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),K._validator.validateSigninResponse(W,Y)})},O.prototype.createSignoutRequest=function(){var F=this,P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=P.id_token_hint,B=P.data,W=P.state,Y=P.post_logout_redirect_uri,q=P.extraQueryParams,Pe=P.request_type,$=arguments[1];return l.Log.debug("OidcClient.createSignoutRequest"),Y=Y||this._settings.post_logout_redirect_uri,q=q||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(ie){if(!ie)throw l.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");l.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",ie);var ge=new b.SignoutRequest({url:ie,id_token_hint:K,post_logout_redirect_uri:Y,data:B||W,extraQueryParams:q,request_type:Pe}),Se=ge.state;return Se&&(l.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),($=$||F._stateStore).set(Se.id,Se.toStorageString())),ge})},O.prototype.readSignoutResponseState=function(F,P){var K=arguments.length>2&&arguments[2]!==void 0&&arguments[2];l.Log.debug("OidcClient.readSignoutResponseState");var B=new _.SignoutResponse(F);if(!B.state)return l.Log.debug("OidcClient.readSignoutResponseState: No state in response"),B.error?(l.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",B.error),Promise.reject(new h.ErrorResponse(B))):Promise.resolve({state:void 0,response:B});var W=B.state;P=P||this._stateStore;var Y=K?P.remove.bind(P):P.get.bind(P);return Y(W).then(function(q){if(!q)throw l.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:T.State.fromStorageString(q),response:B}})},O.prototype.processSignoutResponse=function(F,P){var K=this;return l.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(F,P,!0).then(function(B){var W=B.state,Y=B.response;return W?(l.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),K._validator.validateSignoutResponse(W,Y)):(l.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),Y)})},O.prototype.clearStaleState=function(F){return l.Log.debug("OidcClient.clearStaleState"),F=F||this._stateStore,T.State.clearStaleState(F,this.settings.staleStateAge)},d(O,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),O}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.TokenClient=void 0;var d=o(7),l=o(2),u=o(0);function h(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")}a.TokenClient=function(){function f(y){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.JsonService,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.MetadataService;if(h(this,f),!y)throw u.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=y,this._jsonService=new b,this._metadataService=new _(this._settings)}return f.prototype.exchangeCode=function(){var b=this,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(_=Object.assign({},_)).grant_type=_.grant_type||"authorization_code",_.client_id=_.client_id||this._settings.client_id,_.client_secret=_.client_secret||this._settings.client_secret,_.redirect_uri=_.redirect_uri||this._settings.redirect_uri;var A=void 0,T=_._client_authentication||this._settings._client_authentication;return delete _._client_authentication,_.code?_.redirect_uri?_.code_verifier?_.client_id?_.client_secret||T!="client_secret_basic"?(T=="client_secret_basic"&&(A=_.client_id+":"+_.client_secret,delete _.client_id,delete _.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(x){return u.Log.debug("TokenClient.exchangeCode: Received token endpoint"),b._jsonService.postForm(x,_,A).then(function(O){return u.Log.debug("TokenClient.exchangeCode: response received"),O})})):(u.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(u.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(u.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(u.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(u.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},f.prototype.exchangeRefreshToken=function(){var b=this,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(_=Object.assign({},_)).grant_type=_.grant_type||"refresh_token",_.client_id=_.client_id||this._settings.client_id,_.client_secret=_.client_secret||this._settings.client_secret;var A=void 0,T=_._client_authentication||this._settings._client_authentication;return delete _._client_authentication,_.refresh_token?_.client_id?(T=="client_secret_basic"&&(A=_.client_id+":"+_.client_secret,delete _.client_id,delete _.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(x){return u.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),b._jsonService.postForm(x,_,A).then(function(O){return u.Log.debug("TokenClient.exchangeRefreshToken: response received"),O})})):(u.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(u.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},f}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.ErrorResponse=void 0;var d=o(0);function l(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function u(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?h:f}a.ErrorResponse=function(h){function f(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=y.error,_=y.error_description,A=y.error_uri,T=y.state,x=y.session_state;if(l(this,f),!b)throw d.Log.error("No error passed to ErrorResponse"),new Error("error");var O=u(this,h.call(this,_||b));return O.name="ErrorResponse",O.error=b,O.error_description=_,O.error_uri=A,O.state=T,O.session_state=x,O}return function(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}(f,h),f}(Error)},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.SigninState=void 0;var d=function(){function _(A,T){for(var x=0;x<T.length;x++){var O=T[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(A,O.key,O)}}return function(A,T,x){return T&&_(A.prototype,T),x&&_(A,x),A}}(),l=o(0),u=o(9),h=o(4),f=function(A){return A&&A.__esModule?A:{default:A}}(o(14));function y(_,A){if(!(_ instanceof A))throw new TypeError("Cannot call a class as a function")}function b(_,A){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||typeof A!="object"&&typeof A!="function"?_:A}a.SigninState=function(_){function A(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=T.nonce,O=T.authority,R=T.client_id,F=T.redirect_uri,P=T.code_verifier,K=T.response_mode,B=T.client_secret,W=T.scope,Y=T.extraTokenParams,q=T.skipUserInfo;y(this,A);var Pe=b(this,_.call(this,arguments[0]));if(x===!0?Pe._nonce=(0,f.default)():x&&(Pe._nonce=x),P===!0?Pe._code_verifier=(0,f.default)()+(0,f.default)()+(0,f.default)():P&&(Pe._code_verifier=P),Pe.code_verifier){var $=h.JoseUtil.hashString(Pe.code_verifier,"SHA256");Pe._code_challenge=h.JoseUtil.hexToBase64Url($)}return Pe._redirect_uri=F,Pe._authority=O,Pe._client_id=R,Pe._response_mode=K,Pe._client_secret=B,Pe._scope=W,Pe._extraTokenParams=Y,Pe._skipUserInfo=q,Pe}return function(x,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);x.prototype=Object.create(O&&O.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(x,O):x.__proto__=O)}(A,_),A.prototype.toStorageString=function(){return l.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},A.fromStorageString=function(x){return l.Log.debug("SigninState.fromStorageString"),new A(JSON.parse(x))},d(A,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),A}(u.State)},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return(d!="undefined"&&d!==null&&d.getRandomValues!==void 0?l:u)().replace(/-/g,"")};var d=typeof window<"u"?window.crypto||window.msCrypto:null;function l(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(h){return(h^d.getRandomValues(new Uint8Array(1))[0]&15>>h/4).toString(16)})}function u(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(h){return(h^16*Math.random()>>h/4).toString(16)})}i.exports=a.default},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.User=void 0;var d=function(){function u(h,f){for(var y=0;y<f.length;y++){var b=f[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,f,y){return f&&u(h.prototype,f),y&&u(h,y),h}}(),l=o(0);a.User=function(){function u(h){var f=h.id_token,y=h.session_state,b=h.access_token,_=h.refresh_token,A=h.token_type,T=h.scope,x=h.profile,O=h.expires_at,R=h.state;(function(P,K){if(!(P instanceof K))throw new TypeError("Cannot call a class as a function")})(this,u),this.id_token=f,this.session_state=y,this.access_token=b,this.refresh_token=_,this.token_type=A,this.scope=T,this.profile=x,this.expires_at=O,this.state=R}return u.prototype.toStorageString=function(){return l.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},u.fromStorageString=function(f){return l.Log.debug("User.fromStorageString"),new u(JSON.parse(f))},d(u,[{key:"expires_in",get:function(){if(this.expires_at){var f=parseInt(Date.now()/1e3);return this.expires_at-f}},set:function(f){var y=parseInt(f);if(typeof y=="number"&&y>0){var b=parseInt(Date.now()/1e3);this.expires_at=b+y}}},{key:"expired",get:function(){var f=this.expires_in;if(f!==void 0)return f<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),u}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.AccessTokenEvents=void 0;var d=o(0),l=o(46);function u(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}a.AccessTokenEvents=function(){function h(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=f.accessTokenExpiringNotificationTime,b=y===void 0?60:y,_=f.accessTokenExpiringTimer,A=_===void 0?new l.Timer("Access token expiring"):_,T=f.accessTokenExpiredTimer,x=T===void 0?new l.Timer("Access token expired"):T;u(this,h),this._accessTokenExpiringNotificationTime=b,this._accessTokenExpiring=A,this._accessTokenExpired=x}return h.prototype.load=function(y){if(y.access_token&&y.expires_in!==void 0){var b=y.expires_in;if(d.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",b),b>0){var _=b-this._accessTokenExpiringNotificationTime;_<=0&&(_=1),d.Log.debug("AccessTokenEvents.load: registering expiring timer in:",_),this._accessTokenExpiring.init(_)}else d.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var A=b+1;d.Log.debug("AccessTokenEvents.load: registering expired timer in:",A),this._accessTokenExpired.init(A)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},h.prototype.unload=function(){d.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},h.prototype.addAccessTokenExpiring=function(y){this._accessTokenExpiring.addHandler(y)},h.prototype.removeAccessTokenExpiring=function(y){this._accessTokenExpiring.removeHandler(y)},h.prototype.addAccessTokenExpired=function(y){this._accessTokenExpired.addHandler(y)},h.prototype.removeAccessTokenExpired=function(y){this._accessTokenExpired.removeHandler(y)},h}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.Event=void 0;var d=o(0);a.Event=function(){function l(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,l),this._name=u,this._callbacks=[]}return l.prototype.addHandler=function(h){this._callbacks.push(h)},l.prototype.removeHandler=function(h){var f=this._callbacks.findIndex(function(y){return y===h});f>=0&&this._callbacks.splice(f,1)},l.prototype.raise=function(){d.Log.debug("Event: Raising event: "+this._name);for(var h=0;h<this._callbacks.length;h++){var f;(f=this._callbacks)[h].apply(f,arguments)}},l}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.SessionMonitor=void 0;var d=function(){function y(b,_){for(var A=0;A<_.length;A++){var T=_[A];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(b,T.key,T)}}return function(b,_,A){return _&&y(b.prototype,_),A&&y(b,A),b}}(),l=o(0),u=o(19),h=o(1);function f(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}a.SessionMonitor=function(){function y(b){var _=this,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.CheckSessionIFrame,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.Global.timer;if(f(this,y),!b)throw l.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=b,this._CheckSessionIFrameCtor=A,this._timer=T,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(x){x?_._start(x):_._settings.monitorAnonymousSession&&_._userManager.querySessionStatus().then(function(O){var R={session_state:O.session_state};O.sub&&O.sid&&(R.profile={sub:O.sub,sid:O.sid}),_._start(R)}).catch(function(O){l.Log.error("SessionMonitor ctor: error from querySessionStatus:",O.message)})}).catch(function(x){l.Log.error("SessionMonitor ctor: error from getUser:",x.message)}))}return y.prototype._start=function(_){var A=this,T=_.session_state;T&&(_.profile?(this._sub=_.profile.sub,this._sid=_.profile.sid,l.Log.debug("SessionMonitor._start: session_state:",T,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,l.Log.debug("SessionMonitor._start: session_state:",T,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(T):this._metadataService.getCheckSessionIframe().then(function(x){if(x){l.Log.debug("SessionMonitor._start: Initializing check session iframe");var O=A._client_id,R=A._checkSessionInterval,F=A._stopCheckSessionOnError;A._checkSessionIFrame=new A._CheckSessionIFrameCtor(A._callback.bind(A),O,x,R,F),A._checkSessionIFrame.load().then(function(){A._checkSessionIFrame.start(T)})}else l.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(x){l.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",x.message)}))},y.prototype._stop=function(){var _=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(l.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var A=this._timer.setInterval(function(){_._timer.clearInterval(A),_._userManager.querySessionStatus().then(function(T){var x={session_state:T.session_state};T.sub&&T.sid&&(x.profile={sub:T.sub,sid:T.sid}),_._start(x)}).catch(function(T){l.Log.error("SessionMonitor: error from querySessionStatus:",T.message)})},1e3)},y.prototype._callback=function(){var _=this;this._userManager.querySessionStatus().then(function(A){var T=!0;A?A.sub===_._sub?(T=!1,_._checkSessionIFrame.start(A.session_state),A.sid===_._sid?l.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",A.session_state):(l.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",A.session_state),_._userManager.events._raiseUserSessionChanged())):l.Log.debug("SessionMonitor._callback: Different subject signed into OP:",A.sub):l.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),T&&(_._sub?(l.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),_._userManager.events._raiseUserSignedOut()):(l.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),_._userManager.events._raiseUserSignedIn()))}).catch(function(A){_._sub&&(l.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",A.message),_._userManager.events._raiseUserSignedOut())})},d(y,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),y}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.CheckSessionIFrame=void 0;var d=o(0);function l(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}a.CheckSessionIFrame=function(){function u(h,f,y,b){var _=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];l(this,u),this._callback=h,this._client_id=f,this._url=y,this._interval=b||2e3,this._stopOnError=_;var A=y.indexOf("/",y.indexOf("//")+2);this._frame_origin=y.substr(0,A),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=y}return u.prototype.load=function(){var f=this;return new Promise(function(y){f._frame.onload=function(){y()},window.document.body.appendChild(f._frame),f._boundMessageEvent=f._message.bind(f),window.addEventListener("message",f._boundMessageEvent,!1)})},u.prototype._message=function(f){f.origin===this._frame_origin&&f.source===this._frame.contentWindow&&(f.data==="error"?(d.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):f.data==="changed"?(d.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):d.Log.debug("CheckSessionIFrame: "+f.data+" message from check session op iframe"))},u.prototype.start=function(f){var y=this;if(this._session_state!==f){d.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=f;var b=function(){y._frame.contentWindow.postMessage(y._client_id+" "+y._session_state,y._frame_origin)};b(),this._timer=window.setInterval(b,this._interval)}},u.prototype.stop=function(){this._session_state=null,this._timer&&(d.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},u}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.TokenRevocationClient=void 0;var d=o(0),l=o(2),u=o(1);function h(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}var f="access_token",y="refresh_token";a.TokenRevocationClient=function(){function b(_){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.Global.XMLHttpRequest,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.MetadataService;if(h(this,b),!_)throw d.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=_,this._XMLHttpRequestCtor=A,this._metadataService=new T(this._settings)}return b.prototype.revoke=function(A,T){var x=this,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"access_token";if(!A)throw d.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(O!==f&&O!=y)throw d.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(R){if(R){d.Log.debug("TokenRevocationClient.revoke: Revoking "+O);var F=x._settings.client_id,P=x._settings.client_secret;return x._revoke(R,F,P,A,O)}if(T)throw d.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},b.prototype._revoke=function(A,T,x,O,R){var F=this;return new Promise(function(P,K){var B=new F._XMLHttpRequestCtor;B.open("POST",A),B.onload=function(){d.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",B.status),B.status===200?P():K(Error(B.statusText+" ("+B.status+")"))},B.onerror=function(){d.Log.debug("TokenRevocationClient.revoke: Network Error."),K("Network Error")};var W="client_id="+encodeURIComponent(T);x&&(W+="&client_secret="+encodeURIComponent(x)),W+="&token_type_hint="+encodeURIComponent(R),W+="&token="+encodeURIComponent(O),B.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),B.send(W)})},b}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.CordovaPopupWindow=void 0;var d=function(){function u(h,f){for(var y=0;y<f.length;y++){var b=f[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,f,y){return f&&u(h.prototype,f),y&&u(h,y),h}}(),l=o(0);a.CordovaPopupWindow=function(){function u(h){var f=this;(function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")})(this,u),this._promise=new Promise(function(y,b){f._resolve=y,f._reject=b}),this.features=h.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=h.popupWindowTarget||"_blank",this.redirect_uri=h.startUrl,l.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return u.prototype._isInAppBrowserInstalled=function(f){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(y){return f.hasOwnProperty(y)})},u.prototype.navigate=function(f){if(f&&f.url){if(!window.cordova)return this._error("cordova is undefined");var y=window.cordova.require("cordova/plugin_list").metadata;if(this._isInAppBrowserInstalled(y)===!1)return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(f.url,this.target,this.features),this._popup?(l.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},u.prototype._loadStartCallback=function(f){f.url.indexOf(this.redirect_uri)===0&&this._success({url:f.url})},u.prototype._exitCallback=function(f){this._error(f)},u.prototype._success=function(f){this._cleanup(),l.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(f)},u.prototype._error=function(f){this._cleanup(),l.Log.error(f),this._reject(new Error(f))},u.prototype.close=function(){this._cleanup()},u.prototype._cleanup=function(){this._popup&&(l.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},d(u,[{key:"promise",get:function(){return this._promise}}]),u}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0});var d=o(0),l=o(10),u=o(5),h=o(6),f=o(37),y=o(38),b=o(16),_=o(2),A=o(48),T=o(49),x=o(19),O=o(20),R=o(18),F=o(1),P=o(15),K=o(50);a.default={Version:K.Version,Log:d.Log,OidcClient:l.OidcClient,OidcClientSettings:u.OidcClientSettings,WebStorageStateStore:h.WebStorageStateStore,InMemoryWebStorage:f.InMemoryWebStorage,UserManager:y.UserManager,AccessTokenEvents:b.AccessTokenEvents,MetadataService:_.MetadataService,CordovaPopupNavigator:A.CordovaPopupNavigator,CordovaIFrameNavigator:T.CordovaIFrameNavigator,CheckSessionIFrame:x.CheckSessionIFrame,TokenRevocationClient:O.TokenRevocationClient,SessionMonitor:R.SessionMonitor,Global:F.Global,User:P.User},i.exports=a.default},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.ClockService=function(){function d(){(function(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")})(this,d)}return d.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},d}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.ResponseValidator=void 0;var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},l=o(0),u=o(2),h=o(25),f=o(11),y=o(12),b=o(4);function _(T,x){if(!(T instanceof x))throw new TypeError("Cannot call a class as a function")}var A=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];a.ResponseValidator=function(){function T(x){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.MetadataService,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.UserInfoService,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:b.JoseUtil,P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:f.TokenClient;if(_(this,T),!x)throw l.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=x,this._metadataService=new O(this._settings),this._userInfoService=new R(this._settings),this._joseUtil=F,this._tokenClient=new P(this._settings)}return T.prototype.validateSigninResponse=function(O,R){var F=this;return l.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(O,R).then(function(P){return l.Log.debug("ResponseValidator.validateSigninResponse: state processed"),F._validateTokens(O,P).then(function(K){return l.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),F._processClaims(O,K).then(function(B){return l.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),B})})})},T.prototype.validateSignoutResponse=function(O,R){return O.id!==R.state?(l.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(l.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),R.state=O.data,R.error?(l.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",R.error),Promise.reject(new y.ErrorResponse(R))):Promise.resolve(R))},T.prototype._processSigninParams=function(O,R){if(O.id!==R.state)return l.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!O.client_id)return l.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!O.authority)return l.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==O.authority)return l.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=O.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==O.client_id)return l.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=O.client_id;return l.Log.debug("ResponseValidator._processSigninParams: state validated"),R.state=O.data,R.error?(l.Log.warn("ResponseValidator._processSigninParams: Response was error",R.error),Promise.reject(new y.ErrorResponse(R))):O.nonce&&!R.id_token?(l.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!O.nonce&&R.id_token?(l.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):O.code_verifier&&!R.code?(l.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!O.code_verifier&&R.code?(l.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(R.scope||(R.scope=O.scope),Promise.resolve(R))},T.prototype._processClaims=function(O,R){var F=this;if(R.isOpenIdConnect){if(l.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),R.profile=this._filterProtocolClaims(R.profile),O.skipUserInfo!==!0&&this._settings.loadUserInfo&&R.access_token)return l.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(R.access_token).then(function(P){return l.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),P.sub!==R.profile.sub?(l.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(R.profile=F._mergeClaims(R.profile,P),l.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",R.profile),R)});l.Log.debug("ResponseValidator._processClaims: not loading user info")}else l.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(R)},T.prototype._mergeClaims=function(O,R){var F=Object.assign({},O);for(var P in R){var K=R[P];Array.isArray(K)||(K=[K]);for(var B=0;B<K.length;B++){var W=K[B];F[P]?Array.isArray(F[P])?F[P].indexOf(W)<0&&F[P].push(W):F[P]!==W&&((W===void 0?"undefined":d(W))==="object"&&this._settings.mergeClaims?F[P]=this._mergeClaims(F[P],W):F[P]=[F[P],W]):F[P]=W}}return F},T.prototype._filterProtocolClaims=function(O){l.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",O);var R=Object.assign({},O);return this._settings._filterProtocolClaims?(A.forEach(function(F){delete R[F]}),l.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",R)):l.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),R},T.prototype._validateTokens=function(O,R){return R.code?(l.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(O,R)):R.id_token?R.access_token?(l.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(O,R)):(l.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(O,R)):(l.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(R))},T.prototype._processCode=function(O,R){var F=this,P={client_id:O.client_id,client_secret:O.client_secret,code:R.code,redirect_uri:O.redirect_uri,code_verifier:O.code_verifier};return O.extraTokenParams&&d(O.extraTokenParams)==="object"&&Object.assign(P,O.extraTokenParams),this._tokenClient.exchangeCode(P).then(function(K){for(var B in K)R[B]=K[B];return R.id_token?(l.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),F._validateIdTokenAttributes(O,R)):(l.Log.debug("ResponseValidator._processCode: token response successful, returning response"),R)})},T.prototype._validateIdTokenAttributes=function(O,R){var F=this;return this._metadataService.getIssuer().then(function(P){var K=O.client_id,B=F._settings.clockSkew;return l.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",B),F._settings.getEpochTime().then(function(W){return F._joseUtil.validateJwtAttributes(R.id_token,P,K,B,W).then(function(Y){return O.nonce&&O.nonce!==Y.nonce?(l.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):Y.sub?(R.profile=Y,R):(l.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},T.prototype._validateIdTokenAndAccessToken=function(O,R){var F=this;return this._validateIdToken(O,R).then(function(P){return F._validateAccessToken(P)})},T.prototype._getSigningKeyForJwt=function(O){var R=this;return this._metadataService.getSigningKeys().then(function(F){var P=O.header.kid;if(!F)return l.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));l.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var K=void 0;if(P)K=F.filter(function(B){return B.kid===P})[0];else{if((F=R._filterByAlg(F,O.header.alg)).length>1)return l.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));K=F[0]}return Promise.resolve(K)})},T.prototype._getSigningKeyForJwtWithSingleRetry=function(O){var R=this;return this._getSigningKeyForJwt(O).then(function(F){return F?Promise.resolve(F):(R._metadataService.resetSigningKeys(),R._getSigningKeyForJwt(O))})},T.prototype._validateIdToken=function(O,R){var F=this;if(!O.nonce)return l.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var P=this._joseUtil.parseJwt(R.id_token);return P&&P.header&&P.payload?O.nonce!==P.payload.nonce?(l.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(K){return l.Log.debug("ResponseValidator._validateIdToken: Received issuer"),F._getSigningKeyForJwtWithSingleRetry(P).then(function(B){if(!B)return l.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var W=O.client_id,Y=F._settings.clockSkew;return l.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",Y),F._joseUtil.validateJwt(R.id_token,B,K,W,Y).then(function(){return l.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),P.payload.sub?(R.profile=P.payload,R):(l.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(l.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",P),Promise.reject(new Error("Failed to parse id_token")))},T.prototype._filterByAlg=function(O,R){var F=null;if(R.startsWith("RS"))F="RSA";else if(R.startsWith("PS"))F="PS";else{if(!R.startsWith("ES"))return l.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",R),[];F="EC"}return l.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",F),O=O.filter(function(P){return P.kty===F}),l.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",F,O.length),O},T.prototype._validateAccessToken=function(O){if(!O.profile)return l.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!O.profile.at_hash)return l.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!O.id_token)return l.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var R=this._joseUtil.parseJwt(O.id_token);if(!R||!R.header)return l.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",R),Promise.reject(new Error("Failed to parse id_token"));var F=R.header.alg;if(!F||F.length!==5)return l.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",F),Promise.reject(new Error("Unsupported alg: "+F));var P=F.substr(2,3);if(!P)return l.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",F,P),Promise.reject(new Error("Unsupported alg: "+F));if((P=parseInt(P))!==256&&P!==384&&P!==512)return l.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",F,P),Promise.reject(new Error("Unsupported alg: "+F));var K="sha"+P,B=this._joseUtil.hashString(O.access_token,K);if(!B)return l.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",K),Promise.reject(new Error("Failed to validate at_hash"));var W=B.substr(0,B.length/2),Y=this._joseUtil.hexToBase64Url(W);return Y!==O.profile.at_hash?(l.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",Y,O.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(l.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(O))},T}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.UserInfoService=void 0;var d=o(7),l=o(2),u=o(0),h=o(4);function f(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}a.UserInfoService=function(){function y(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.JsonService,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l.MetadataService,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:h.JoseUtil;if(f(this,y),!b)throw u.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=b,this._jsonService=new _(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new A(this._settings),this._joseUtil=T}return y.prototype.getClaims=function(_){var A=this;return _?this._metadataService.getUserInfoEndpoint().then(function(T){return u.Log.debug("UserInfoService.getClaims: received userinfo url",T),A._jsonService.getJson(T,_).then(function(x){return u.Log.debug("UserInfoService.getClaims: claims received",x),x})}):(u.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},y.prototype._getClaimsFromJwt=function(_){var A=this;try{var T=this._joseUtil.parseJwt(_.responseText);if(!T||!T.header||!T.payload)return u.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",T),Promise.reject(new Error("Failed to parse id_token"));var x=T.header.kid,O=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":O=this._metadataService.getIssuer();break;case"ANY":O=Promise.resolve(T.payload.iss);break;default:O=Promise.resolve(this._settings.userInfoJwtIssuer)}return O.then(function(R){return u.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+R),A._metadataService.getSigningKeys().then(function(F){if(!F)return u.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));u.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var P=void 0;if(x)P=F.filter(function(W){return W.kid===x})[0];else{if((F=A._filterByAlg(F,T.header.alg)).length>1)return u.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));P=F[0]}if(!P)return u.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var K=A._settings.client_id,B=A._settings.clockSkew;return u.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",B),A._joseUtil.validateJwt(_.responseText,P,R,K,B,void 0,!0).then(function(){return u.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),T.payload})})})}catch(R){return u.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",R.message),void reject(R)}},y.prototype._filterByAlg=function(_,A){var T=null;if(A.startsWith("RS"))T="RSA";else if(A.startsWith("PS"))T="PS";else{if(!A.startsWith("ES"))return u.Log.debug("UserInfoService._filterByAlg: alg not supported: ",A),[];T="EC"}return u.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",T),_=_.filter(function(x){return x.kty===T}),u.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",T,_.length),_},y}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.AllowedSigningAlgs=a.b64tohex=a.hextob64u=a.crypto=a.X509=a.KeyUtil=a.jws=void 0;var d=o(27);a.jws=d.jws,a.KeyUtil=d.KEYUTIL,a.X509=d.X509,a.crypto=d.crypto,a.hextob64u=d.hextob64u,a.b64tohex=d.b64tohex,a.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(i,a,o){(function(d){Object.defineProperty(a,"__esModule",{value:!0});var l,u,h,f,y,b,_,A,T,x,O,R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},F={},P={},K=K||(l=Math,h=(u={}).lib={},f=h.Base=function(){function v(){}return{extend:function(S){v.prototype=this;var C=new v;return S&&C.mixIn(S),C.hasOwnProperty("init")||(C.init=function(){C.$super.init.apply(this,arguments)}),C.init.prototype=C,C.$super=this,C},create:function(){var S=this.extend();return S.init.apply(S,arguments),S},init:function(){},mixIn:function(S){for(var C in S)S.hasOwnProperty(C)&&(this[C]=S[C]);S.hasOwnProperty("toString")&&(this.toString=S.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),y=h.WordArray=f.extend({init:function(m,S){m=this.words=m||[],this.sigBytes=S??4*m.length},toString:function(m){return(m||_).stringify(this)},concat:function(m){var S=this.words,C=m.words,H=this.sigBytes,X=m.sigBytes;if(this.clamp(),H%4)for(var oe=0;oe<X;oe++){var be=C[oe>>>2]>>>24-oe%4*8&255;S[H+oe>>>2]|=be<<24-(H+oe)%4*8}else for(oe=0;oe<X;oe+=4)S[H+oe>>>2]=C[oe>>>2];return this.sigBytes+=X,this},clamp:function(){var m=this.words,S=this.sigBytes;m[S>>>2]&=4294967295<<32-S%4*8,m.length=l.ceil(S/4)},clone:function(){var m=f.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var S=[],C=0;C<m;C+=4)S.push(4294967296*l.random()|0);return new y.init(S,m)}}),b=u.enc={},_=b.Hex={stringify:function(m){for(var S=m.words,C=m.sigBytes,H=[],X=0;X<C;X++){var oe=S[X>>>2]>>>24-X%4*8&255;H.push((oe>>>4).toString(16)),H.push((15&oe).toString(16))}return H.join("")},parse:function(m){for(var S=m.length,C=[],H=0;H<S;H+=2)C[H>>>3]|=parseInt(m.substr(H,2),16)<<24-H%8*4;return new y.init(C,S/2)}},A=b.Latin1={stringify:function(m){for(var S=m.words,C=m.sigBytes,H=[],X=0;X<C;X++){var oe=S[X>>>2]>>>24-X%4*8&255;H.push(String.fromCharCode(oe))}return H.join("")},parse:function(m){for(var S=m.length,C=[],H=0;H<S;H++)C[H>>>2]|=(255&m.charCodeAt(H))<<24-H%4*8;return new y.init(C,S)}},T=b.Utf8={stringify:function(m){try{return decodeURIComponent(escape(A.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return A.parse(unescape(encodeURIComponent(m)))}},x=h.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new y.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=T.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var S=this._data,C=S.words,H=S.sigBytes,X=this.blockSize,oe=H/(4*X),be=(oe=m?l.ceil(oe):l.max((0|oe)-this._minBufferSize,0))*X,he=l.min(4*be,H);if(be){for(var me=0;me<be;me+=X)this._doProcessBlock(C,me);var Ee=C.splice(0,be);S.sigBytes-=he}return new y.init(Ee,he)},clone:function(){var m=f.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0}),h.Hasher=x.extend({cfg:f.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){x.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){return m&&this._append(m),this._doFinalize()},blockSize:16,_createHelper:function(m){return function(S,C){return new m.init(C).finalize(S)}},_createHmacHelper:function(m){return function(S,C){return new O.HMAC.init(m,C).finalize(S)}}}),O=u.algo={},u);(function(v){var m,S=(m=K).lib,C=S.Base,H=S.WordArray;(m=m.x64={}).Word=C.extend({init:function(oe,be){this.high=oe,this.low=be}}),m.WordArray=C.extend({init:function(oe,be){oe=this.words=oe||[],this.sigBytes=be??8*oe.length},toX32:function(){for(var oe=this.words,be=oe.length,he=[],me=0;me<be;me++){var Ee=oe[me];he.push(Ee.high),he.push(Ee.low)}return H.create(he,this.sigBytes)},clone:function(){for(var oe=C.clone.call(this),be=oe.words=this.words.slice(0),he=be.length,me=0;me<he;me++)be[me]=be[me].clone();return oe}})})(),function(){var v=K,m=v.lib.WordArray;v.enc.Base64={stringify:function(C){var H=C.words,X=C.sigBytes,oe=this._map;C.clamp(),C=[];for(var be=0;be<X;be+=3)for(var he=(H[be>>>2]>>>24-be%4*8&255)<<16|(H[be+1>>>2]>>>24-(be+1)%4*8&255)<<8|H[be+2>>>2]>>>24-(be+2)%4*8&255,me=0;4>me&&be+.75*me<X;me++)C.push(oe.charAt(he>>>6*(3-me)&63));if(H=oe.charAt(64))for(;C.length%4;)C.push(H);return C.join("")},parse:function(C){var H=C.length,X=this._map;(oe=X.charAt(64))&&(oe=C.indexOf(oe))!=-1&&(H=oe);for(var oe=[],be=0,he=0;he<H;he++)if(he%4){var me=X.indexOf(C.charAt(he-1))<<he%4*2,Ee=X.indexOf(C.charAt(he))>>>6-he%4*2;oe[be>>>2]|=(me|Ee)<<24-be%4*8,be++}return m.create(oe,be)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(v){for(var m=K,S=(H=m.lib).WordArray,C=H.Hasher,H=m.algo,X=[],oe=[],be=function(gt){return 4294967296*(gt-(0|gt))|0},he=2,me=0;64>me;){var Ee;e:{Ee=he;for(var Ae=v.sqrt(Ee),De=2;De<=Ae;De++)if(!(Ee%De)){Ee=!1;break e}Ee=!0}Ee&&(8>me&&(X[me]=be(v.pow(he,.5))),oe[me]=be(v.pow(he,1/3)),me++),he++}var Ke=[];H=H.SHA256=C.extend({_doReset:function(){this._hash=new S.init(X.slice(0))},_doProcessBlock:function(gt,St){for(var ae=this._hash.words,_e=ae[0],Ie=ae[1],Fe=ae[2],ct=ae[3],Et=ae[4],fr=ae[5],Ht=ae[6],qr=ae[7],lr=0;64>lr;lr++){if(16>lr)Ke[lr]=0|gt[St+lr];else{var pr=Ke[lr-15],tn=Ke[lr-2];Ke[lr]=((pr<<25|pr>>>7)^(pr<<14|pr>>>18)^pr>>>3)+Ke[lr-7]+((tn<<15|tn>>>17)^(tn<<13|tn>>>19)^tn>>>10)+Ke[lr-16]}pr=qr+((Et<<26|Et>>>6)^(Et<<21|Et>>>11)^(Et<<7|Et>>>25))+(Et&fr^~Et&Ht)+oe[lr]+Ke[lr],tn=((_e<<30|_e>>>2)^(_e<<19|_e>>>13)^(_e<<10|_e>>>22))+(_e&Ie^_e&Fe^Ie&Fe),qr=Ht,Ht=fr,fr=Et,Et=ct+pr|0,ct=Fe,Fe=Ie,Ie=_e,_e=pr+tn|0}ae[0]=ae[0]+_e|0,ae[1]=ae[1]+Ie|0,ae[2]=ae[2]+Fe|0,ae[3]=ae[3]+ct|0,ae[4]=ae[4]+Et|0,ae[5]=ae[5]+fr|0,ae[6]=ae[6]+Ht|0,ae[7]=ae[7]+qr|0},_doFinalize:function(){var gt=this._data,St=gt.words,ae=8*this._nDataBytes,_e=8*gt.sigBytes;return St[_e>>>5]|=128<<24-_e%32,St[14+(_e+64>>>9<<4)]=v.floor(ae/4294967296),St[15+(_e+64>>>9<<4)]=ae,gt.sigBytes=4*St.length,this._process(),this._hash},clone:function(){var gt=C.clone.call(this);return gt._hash=this._hash.clone(),gt}}),m.SHA256=C._createHelper(H),m.HmacSHA256=C._createHmacHelper(H)}(Math),function(){function v(){return C.create.apply(C,arguments)}for(var m=K,S=m.lib.Hasher,C=(X=m.x64).Word,H=X.WordArray,X=m.algo,oe=[v(1116352408,3609767458),v(1899447441,602891725),v(3049323471,3964484399),v(3921009573,2173295548),v(961987163,4081628472),v(1508970993,3053834265),v(2453635748,2937671579),v(2870763221,3664609560),v(3624381080,2734883394),v(310598401,1164996542),v(607225278,1323610764),v(1426881987,3590304994),v(1925078388,4068182383),v(2162078206,991336113),v(2614888103,633803317),v(3248222580,3479774868),v(3835390401,2666613458),v(4022224774,944711139),v(264347078,2341262773),v(604807628,2007800933),v(770255983,1495990901),v(1249150122,1856431235),v(1555081692,3175218132),v(1996064986,2198950837),v(2554220882,3999719339),v(2821834349,766784016),v(2952996808,2566594879),v(3210313671,3203337956),v(3336571891,1034457026),v(3584528711,2466948901),v(113926993,3758326383),v(338241895,168717936),v(666307205,1188179964),v(773529912,1546045734),v(1294757372,1522805485),v(1396182291,2643833823),v(1695183700,2343527390),v(1986661051,1014477480),v(2177026350,1206759142),v(2456956037,344077627),v(2730485921,1290863460),v(2820302411,3158454273),v(3259730800,3505952657),v(3345764771,106217008),v(3516065817,3606008344),v(3600352804,1432725776),v(4094571909,1467031594),v(275423344,851169720),v(430227734,3100823752),v(506948616,1363258195),v(659060556,3750685593),v(883997877,3785050280),v(958139571,3318307427),v(1322822218,3812723403),v(1537002063,2003034995),v(1747873779,3602036899),v(1955562222,1575990012),v(2024104815,1125592928),v(2227730452,2716904306),v(2361852424,442776044),v(2428436474,593698344),v(2756734187,3733110249),v(3204031479,2999351573),v(3329325298,3815920427),v(3391569614,3928383900),v(3515267271,566280711),v(3940187606,3454069534),v(4118630271,4000239992),v(116418474,1914138554),v(174292421,2731055270),v(289380356,3203993006),v(460393269,320620315),v(685471733,587496836),v(852142971,1086792851),v(1017036298,365543100),v(1126000580,2618297676),v(1288033470,3409855158),v(1501505948,4234509866),v(1607167915,987167468),v(1816402316,1246189591)],be=[],he=0;80>he;he++)be[he]=v();X=X.SHA512=S.extend({_doReset:function(){this._hash=new H.init([new C.init(1779033703,4089235720),new C.init(3144134277,2227873595),new C.init(1013904242,4271175723),new C.init(2773480762,1595750129),new C.init(1359893119,2917565137),new C.init(2600822924,725511199),new C.init(528734635,4215389547),new C.init(1541459225,327033209)])},_doProcessBlock:function(Ee,Ae){for(var De=(Ie=this._hash.words)[0],Ke=Ie[1],it=Ie[2],gt=Ie[3],St=Ie[4],ae=Ie[5],_e=Ie[6],Ie=Ie[7],Fe=De.high,ct=De.low,Et=Ke.high,fr=Ke.low,Ht=it.high,qr=it.low,lr=gt.high,pr=gt.low,tn=St.high,dr=St.low,rn=ae.high,Zr=ae.low,Cn=_e.high,Qr=_e.low,en=Ie.high,bn=Ie.low,xr=Fe,Vn=ct,xi=Et,ea=fr,On=Ht,Ki=qr,za=lr,co=pr,An=tn,qn=dr,Ca=rn,zn=Zr,Xo=Cn,fa=Qr,U=en,te=bn,ne=0;80>ne;ne++){var fe=be[ne];if(16>ne)var Ue=fe.high=0|Ee[Ae+2*ne],ye=fe.low=0|Ee[Ae+2*ne+1];else{Ue=((ye=(Ue=be[ne-15]).high)>>>1|(He=Ue.low)<<31)^(ye>>>8|He<<24)^ye>>>7;var He=(He>>>1|ye<<31)^(He>>>8|ye<<24)^(He>>>7|ye<<25),Rt=((ye=(Rt=be[ne-2]).high)>>>19|(wt=Rt.low)<<13)^(ye<<3|wt>>>29)^ye>>>6,wt=(wt>>>19|ye<<13)^(wt<<3|ye>>>29)^(wt>>>6|ye<<26),It=(ye=be[ne-7]).high,qt=(Vt=be[ne-16]).high,Vt=Vt.low;Ue=(Ue=(Ue=Ue+It+((ye=He+ye.low)>>>0<He>>>0?1:0))+Rt+((ye=ye+wt)>>>0<wt>>>0?1:0))+qt+((ye=ye+Vt)>>>0<Vt>>>0?1:0),fe.high=Ue,fe.low=ye}It=An&Ca^~An&Xo,Vt=qn&zn^~qn&fa,fe=xr&xi^xr&On^xi&On;var Wt=Vn&ea^Vn&Ki^ea&Ki,Ut=(He=(xr>>>28|Vn<<4)^(xr<<30|Vn>>>2)^(xr<<25|Vn>>>7),Rt=(Vn>>>28|xr<<4)^(Vn<<30|xr>>>2)^(Vn<<25|xr>>>7),(wt=oe[ne]).high),Jt=wt.low;qt=U+((An>>>14|qn<<18)^(An>>>18|qn<<14)^(An<<23|qn>>>9))+((wt=te+((qn>>>14|An<<18)^(qn>>>18|An<<14)^(qn<<23|An>>>9)))>>>0<te>>>0?1:0),U=Xo,te=fa,Xo=Ca,fa=zn,Ca=An,zn=qn,An=za+(qt=(qt=(qt=qt+It+((wt=wt+Vt)>>>0<Vt>>>0?1:0))+Ut+((wt=wt+Jt)>>>0<Jt>>>0?1:0))+Ue+((wt=wt+ye)>>>0<ye>>>0?1:0))+((qn=co+wt|0)>>>0<co>>>0?1:0)|0,za=On,co=Ki,On=xi,Ki=ea,xi=xr,ea=Vn,xr=qt+(fe=He+fe+((ye=Rt+Wt)>>>0<Rt>>>0?1:0))+((Vn=wt+ye|0)>>>0<wt>>>0?1:0)|0}ct=De.low=ct+Vn,De.high=Fe+xr+(ct>>>0<Vn>>>0?1:0),fr=Ke.low=fr+ea,Ke.high=Et+xi+(fr>>>0<ea>>>0?1:0),qr=it.low=qr+Ki,it.high=Ht+On+(qr>>>0<Ki>>>0?1:0),pr=gt.low=pr+co,gt.high=lr+za+(pr>>>0<co>>>0?1:0),dr=St.low=dr+qn,St.high=tn+An+(dr>>>0<qn>>>0?1:0),Zr=ae.low=Zr+zn,ae.high=rn+Ca+(Zr>>>0<zn>>>0?1:0),Qr=_e.low=Qr+fa,_e.high=Cn+Xo+(Qr>>>0<fa>>>0?1:0),bn=Ie.low=bn+te,Ie.high=en+U+(bn>>>0<te>>>0?1:0)},_doFinalize:function(){var Ee=this._data,Ae=Ee.words,De=8*this._nDataBytes,Ke=8*Ee.sigBytes;return Ae[Ke>>>5]|=128<<24-Ke%32,Ae[30+(Ke+128>>>10<<5)]=Math.floor(De/4294967296),Ae[31+(Ke+128>>>10<<5)]=De,Ee.sigBytes=4*Ae.length,this._process(),this._hash.toX32()},clone:function(){var Ee=S.clone.call(this);return Ee._hash=this._hash.clone(),Ee},blockSize:32}),m.SHA512=S._createHelper(X),m.HmacSHA512=S._createHmacHelper(X)}(),function(){var v=K,m=(H=v.x64).Word,S=H.WordArray,C=(H=v.algo).SHA512,H=H.SHA384=C.extend({_doReset:function(){this._hash=new S.init([new m.init(3418070365,3238371032),new m.init(1654270250,914150663),new m.init(2438529370,812702999),new m.init(355462360,4144912697),new m.init(1731405415,4290775857),new m.init(2394180231,1750603025),new m.init(3675008525,1694076839),new m.init(1203062813,3204075428)])},_doFinalize:function(){var oe=C._doFinalize.call(this);return oe.sigBytes-=16,oe}});v.SHA384=C._createHelper(H),v.HmacSHA384=C._createHmacHelper(H)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var B,W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Y(v){var m,S,C="";for(m=0;m+3<=v.length;m+=3)S=parseInt(v.substring(m,m+3),16),C+=W.charAt(S>>6)+W.charAt(63&S);for(m+1==v.length?(S=parseInt(v.substring(m,m+1),16),C+=W.charAt(S<<2)):m+2==v.length&&(S=parseInt(v.substring(m,m+2),16),C+=W.charAt(S>>2)+W.charAt((3&S)<<4)),"=";(3&C.length)>0;)C+="=";return C}function q(v){var m,S,C,H="",X=0;for(m=0;m<v.length&&v.charAt(m)!="=";++m)(C=W.indexOf(v.charAt(m)))<0||(X==0?(H+=lt(C>>2),S=3&C,X=1):X==1?(H+=lt(S<<2|C>>4),S=15&C,X=2):X==2?(H+=lt(S),H+=lt(C>>2),S=3&C,X=3):(H+=lt(S<<2|C>>4),H+=lt(15&C),X=0));return X==1&&(H+=lt(S<<2)),H}function Pe(v){var m,S=q(v),C=new Array;for(m=0;2*m<S.length;++m)C[m]=parseInt(S.substring(2*m,2*m+2),16);return C}function $(v,m,S){v!=null&&(typeof v=="number"?this.fromNumber(v,m,S):m==null&&typeof v!="string"?this.fromString(v,256):this.fromString(v,m))}function ie(){return new $(null)}F.appName=="Microsoft Internet Explorer"?($.prototype.am=function(m,S,C,H,X,oe){for(var be=32767&S,he=S>>15;--oe>=0;){var me=32767&this[m],Ee=this[m++]>>15,Ae=he*me+Ee*be;X=((me=be*me+((32767&Ae)<<15)+C[H]+(1073741823&X))>>>30)+(Ae>>>15)+he*Ee+(X>>>30),C[H++]=1073741823&me}return X},B=30):F.appName!="Netscape"?($.prototype.am=function(m,S,C,H,X,oe){for(;--oe>=0;){var be=S*this[m++]+C[H]+X;X=Math.floor(be/67108864),C[H++]=67108863&be}return X},B=26):($.prototype.am=function(m,S,C,H,X,oe){for(var be=16383&S,he=S>>14;--oe>=0;){var me=16383&this[m],Ee=this[m++]>>14,Ae=he*me+Ee*be;X=((me=be*me+((16383&Ae)<<14)+C[H]+X)>>28)+(Ae>>14)+he*Ee,C[H++]=268435455&me}return X},B=28),$.prototype.DB=B,$.prototype.DM=(1<<B)-1,$.prototype.DV=1<<B,$.prototype.FV=Math.pow(2,52),$.prototype.F1=52-B,$.prototype.F2=2*B-52;var ge,Se,tt=new Array;for(ge=48,Se=0;Se<=9;++Se)tt[ge++]=Se;for(ge=97,Se=10;Se<36;++Se)tt[ge++]=Se;for(ge=65,Se=10;Se<36;++Se)tt[ge++]=Se;function lt(v){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(v)}function Ne(v,m){var S=tt[v.charCodeAt(m)];return S??-1}function yt(v){var m=ie();return m.fromInt(v),m}function ve(v){var m,S=1;return(m=v>>>16)!=0&&(v=m,S+=16),(m=v>>8)!=0&&(v=m,S+=8),(m=v>>4)!=0&&(v=m,S+=4),(m=v>>2)!=0&&(v=m,S+=2),(m=v>>1)!=0&&(v=m,S+=1),S}function rt(v){this.m=v}function J(v){this.m=v,this.mp=v.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<v.DB-15)-1,this.mt2=2*v.t}function xe(v,m){return v&m}function Ze(v,m){return v|m}function je(v,m){return v^m}function ht(v,m){return v&~m}function Nt(v){if(v==0)return-1;var m=0;return(65535&v)==0&&(v>>=16,m+=16),(255&v)==0&&(v>>=8,m+=8),(15&v)==0&&(v>>=4,m+=4),(3&v)==0&&(v>>=2,m+=2),(1&v)==0&&++m,m}function kt(v){for(var m=0;v!=0;)v&=v-1,++m;return m}function Me(){}function le(v){return v}function Te(v){this.r2=ie(),this.q3=ie(),$.ONE.dlShiftTo(2*v.t,this.r2),this.mu=this.r2.divide(v),this.m=v}rt.prototype.convert=function(m){return m.s<0||m.compareTo(this.m)>=0?m.mod(this.m):m},rt.prototype.revert=function(m){return m},rt.prototype.reduce=function(m){m.divRemTo(this.m,null,m)},rt.prototype.mulTo=function(m,S,C){m.multiplyTo(S,C),this.reduce(C)},rt.prototype.sqrTo=function(m,S){m.squareTo(S),this.reduce(S)},J.prototype.convert=function(m){var S=ie();return m.abs().dlShiftTo(this.m.t,S),S.divRemTo(this.m,null,S),m.s<0&&S.compareTo($.ZERO)>0&&this.m.subTo(S,S),S},J.prototype.revert=function(m){var S=ie();return m.copyTo(S),this.reduce(S),S},J.prototype.reduce=function(m){for(;m.t<=this.mt2;)m[m.t++]=0;for(var S=0;S<this.m.t;++S){var C=32767&m[S],H=C*this.mpl+((C*this.mph+(m[S]>>15)*this.mpl&this.um)<<15)&m.DM;for(m[C=S+this.m.t]+=this.m.am(0,H,m,S,0,this.m.t);m[C]>=m.DV;)m[C]-=m.DV,m[++C]++}m.clamp(),m.drShiftTo(this.m.t,m),m.compareTo(this.m)>=0&&m.subTo(this.m,m)},J.prototype.mulTo=function(m,S,C){m.multiplyTo(S,C),this.reduce(C)},J.prototype.sqrTo=function(m,S){m.squareTo(S),this.reduce(S)},$.prototype.copyTo=function(m){for(var S=this.t-1;S>=0;--S)m[S]=this[S];m.t=this.t,m.s=this.s},$.prototype.fromInt=function(m){this.t=1,this.s=m<0?-1:0,m>0?this[0]=m:m<-1?this[0]=m+this.DV:this.t=0},$.prototype.fromString=function(m,S){var C;if(S==16)C=4;else if(S==8)C=3;else if(S==256)C=8;else if(S==2)C=1;else if(S==32)C=5;else{if(S!=4)return void this.fromRadix(m,S);C=2}this.t=0,this.s=0;for(var H=m.length,X=!1,oe=0;--H>=0;){var be=C==8?255&m[H]:Ne(m,H);be<0?m.charAt(H)=="-"&&(X=!0):(X=!1,oe==0?this[this.t++]=be:oe+C>this.DB?(this[this.t-1]|=(be&(1<<this.DB-oe)-1)<<oe,this[this.t++]=be>>this.DB-oe):this[this.t-1]|=be<<oe,(oe+=C)>=this.DB&&(oe-=this.DB))}C==8&&(128&m[0])!=0&&(this.s=-1,oe>0&&(this[this.t-1]|=(1<<this.DB-oe)-1<<oe)),this.clamp(),X&&$.ZERO.subTo(this,this)},$.prototype.clamp=function(){for(var m=this.s&this.DM;this.t>0&&this[this.t-1]==m;)--this.t},$.prototype.dlShiftTo=function(m,S){var C;for(C=this.t-1;C>=0;--C)S[C+m]=this[C];for(C=m-1;C>=0;--C)S[C]=0;S.t=this.t+m,S.s=this.s},$.prototype.drShiftTo=function(m,S){for(var C=m;C<this.t;++C)S[C-m]=this[C];S.t=Math.max(this.t-m,0),S.s=this.s},$.prototype.lShiftTo=function(m,S){var C,H=m%this.DB,X=this.DB-H,oe=(1<<X)-1,be=Math.floor(m/this.DB),he=this.s<<H&this.DM;for(C=this.t-1;C>=0;--C)S[C+be+1]=this[C]>>X|he,he=(this[C]&oe)<<H;for(C=be-1;C>=0;--C)S[C]=0;S[be]=he,S.t=this.t+be+1,S.s=this.s,S.clamp()},$.prototype.rShiftTo=function(m,S){S.s=this.s;var C=Math.floor(m/this.DB);if(C>=this.t)S.t=0;else{var H=m%this.DB,X=this.DB-H,oe=(1<<H)-1;S[0]=this[C]>>H;for(var be=C+1;be<this.t;++be)S[be-C-1]|=(this[be]&oe)<<X,S[be-C]=this[be]>>H;H>0&&(S[this.t-C-1]|=(this.s&oe)<<X),S.t=this.t-C,S.clamp()}},$.prototype.subTo=function(m,S){for(var C=0,H=0,X=Math.min(m.t,this.t);C<X;)H+=this[C]-m[C],S[C++]=H&this.DM,H>>=this.DB;if(m.t<this.t){for(H-=m.s;C<this.t;)H+=this[C],S[C++]=H&this.DM,H>>=this.DB;H+=this.s}else{for(H+=this.s;C<m.t;)H-=m[C],S[C++]=H&this.DM,H>>=this.DB;H-=m.s}S.s=H<0?-1:0,H<-1?S[C++]=this.DV+H:H>0&&(S[C++]=H),S.t=C,S.clamp()},$.prototype.multiplyTo=function(m,S){var C=this.abs(),H=m.abs(),X=C.t;for(S.t=X+H.t;--X>=0;)S[X]=0;for(X=0;X<H.t;++X)S[X+C.t]=C.am(0,H[X],S,X,0,C.t);S.s=0,S.clamp(),this.s!=m.s&&$.ZERO.subTo(S,S)},$.prototype.squareTo=function(m){for(var S=this.abs(),C=m.t=2*S.t;--C>=0;)m[C]=0;for(C=0;C<S.t-1;++C){var H=S.am(C,S[C],m,2*C,0,1);(m[C+S.t]+=S.am(C+1,2*S[C],m,2*C+1,H,S.t-C-1))>=S.DV&&(m[C+S.t]-=S.DV,m[C+S.t+1]=1)}m.t>0&&(m[m.t-1]+=S.am(C,S[C],m,2*C,0,1)),m.s=0,m.clamp()},$.prototype.divRemTo=function(m,S,C){var H=m.abs();if(!(H.t<=0)){var X=this.abs();if(X.t<H.t)return S?.fromInt(0),void(C!=null&&this.copyTo(C));C==null&&(C=ie());var oe=ie(),be=this.s,he=m.s,me=this.DB-ve(H[H.t-1]);me>0?(H.lShiftTo(me,oe),X.lShiftTo(me,C)):(H.copyTo(oe),X.copyTo(C));var Ee=oe.t,Ae=oe[Ee-1];if(Ae!=0){var De=Ae*(1<<this.F1)+(Ee>1?oe[Ee-2]>>this.F2:0),Ke=this.FV/De,it=(1<<this.F1)/De,gt=1<<this.F2,St=C.t,ae=St-Ee,_e=S??ie();for(oe.dlShiftTo(ae,_e),C.compareTo(_e)>=0&&(C[C.t++]=1,C.subTo(_e,C)),$.ONE.dlShiftTo(Ee,_e),_e.subTo(oe,oe);oe.t<Ee;)oe[oe.t++]=0;for(;--ae>=0;){var Ie=C[--St]==Ae?this.DM:Math.floor(C[St]*Ke+(C[St-1]+gt)*it);if((C[St]+=oe.am(0,Ie,C,ae,0,Ee))<Ie)for(oe.dlShiftTo(ae,_e),C.subTo(_e,C);C[St]<--Ie;)C.subTo(_e,C)}S!=null&&(C.drShiftTo(Ee,S),be!=he&&$.ZERO.subTo(S,S)),C.t=Ee,C.clamp(),me>0&&C.rShiftTo(me,C),be<0&&$.ZERO.subTo(C,C)}}},$.prototype.invDigit=function(){if(this.t<1)return 0;var m=this[0];if((1&m)==0)return 0;var S=3&m;return(S=(S=(S=(S=S*(2-(15&m)*S)&15)*(2-(255&m)*S)&255)*(2-((65535&m)*S&65535))&65535)*(2-m*S%this.DV)%this.DV)>0?this.DV-S:-S},$.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},$.prototype.exp=function(m,S){if(m>4294967295||m<1)return $.ONE;var C=ie(),H=ie(),X=S.convert(this),oe=ve(m)-1;for(X.copyTo(C);--oe>=0;)if(S.sqrTo(C,H),(m&1<<oe)>0)S.mulTo(H,X,C);else{var be=C;C=H,H=be}return S.revert(C)},$.prototype.toString=function(m){if(this.s<0)return"-"+this.negate().toString(m);var S;if(m==16)S=4;else if(m==8)S=3;else if(m==2)S=1;else if(m==32)S=5;else{if(m!=4)return this.toRadix(m);S=2}var C,H=(1<<S)-1,X=!1,oe="",be=this.t,he=this.DB-be*this.DB%S;if(be-- >0)for(he<this.DB&&(C=this[be]>>he)>0&&(X=!0,oe=lt(C));be>=0;)he<S?(C=(this[be]&(1<<he)-1)<<S-he,C|=this[--be]>>(he+=this.DB-S)):(C=this[be]>>(he-=S)&H,he<=0&&(he+=this.DB,--be)),C>0&&(X=!0),X&&(oe+=lt(C));return X?oe:"0"},$.prototype.negate=function(){var m=ie();return $.ZERO.subTo(this,m),m},$.prototype.abs=function(){return this.s<0?this.negate():this},$.prototype.compareTo=function(m){var S=this.s-m.s;if(S!=0)return S;var C=this.t;if((S=C-m.t)!=0)return this.s<0?-S:S;for(;--C>=0;)if((S=this[C]-m[C])!=0)return S;return 0},$.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+ve(this[this.t-1]^this.s&this.DM)},$.prototype.mod=function(m){var S=ie();return this.abs().divRemTo(m,null,S),this.s<0&&S.compareTo($.ZERO)>0&&m.subTo(S,S),S},$.prototype.modPowInt=function(m,S){var C;return C=m<256||S.isEven()?new rt(S):new J(S),this.exp(m,C)},$.ZERO=yt(0),$.ONE=yt(1),Me.prototype.convert=le,Me.prototype.revert=le,Me.prototype.mulTo=function(m,S,C){m.multiplyTo(S,C)},Me.prototype.sqrTo=function(m,S){m.squareTo(S)},Te.prototype.convert=function(m){if(m.s<0||m.t>2*this.m.t)return m.mod(this.m);if(m.compareTo(this.m)<0)return m;var S=ie();return m.copyTo(S),this.reduce(S),S},Te.prototype.revert=function(m){return m},Te.prototype.reduce=function(m){for(m.drShiftTo(this.m.t-1,this.r2),m.t>this.m.t+1&&(m.t=this.m.t+1,m.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);m.compareTo(this.r2)<0;)m.dAddOffset(1,this.m.t+1);for(m.subTo(this.r2,m);m.compareTo(this.m)>=0;)m.subTo(this.m,m)},Te.prototype.mulTo=function(m,S,C){m.multiplyTo(S,C),this.reduce(C)},Te.prototype.sqrTo=function(m,S){m.squareTo(S),this.reduce(S)};var Je=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],se=(1<<26)/Je[Je.length-1];/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function M(){this.i=0,this.j=0,this.S=new Array}$.prototype.chunkSize=function(m){return Math.floor(Math.LN2*this.DB/Math.log(m))},$.prototype.toRadix=function(m){if(m==null&&(m=10),this.signum()==0||m<2||m>36)return"0";var S=this.chunkSize(m),C=Math.pow(m,S),H=yt(C),X=ie(),oe=ie(),be="";for(this.divRemTo(H,X,oe);X.signum()>0;)be=(C+oe.intValue()).toString(m).substr(1)+be,X.divRemTo(H,X,oe);return oe.intValue().toString(m)+be},$.prototype.fromRadix=function(m,S){this.fromInt(0),S==null&&(S=10);for(var C=this.chunkSize(S),H=Math.pow(S,C),X=!1,oe=0,be=0,he=0;he<m.length;++he){var me=Ne(m,he);me<0?m.charAt(he)=="-"&&this.signum()==0&&(X=!0):(be=S*be+me,++oe>=C&&(this.dMultiply(H),this.dAddOffset(be,0),oe=0,be=0))}oe>0&&(this.dMultiply(Math.pow(S,oe)),this.dAddOffset(be,0)),X&&$.ZERO.subTo(this,this)},$.prototype.fromNumber=function(m,S,C){if(typeof S=="number")if(m<2)this.fromInt(1);else for(this.fromNumber(m,C),this.testBit(m-1)||this.bitwiseTo($.ONE.shiftLeft(m-1),Ze,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(S);)this.dAddOffset(2,0),this.bitLength()>m&&this.subTo($.ONE.shiftLeft(m-1),this);else{var H=new Array,X=7&m;H.length=1+(m>>3),S.nextBytes(H),X>0?H[0]&=(1<<X)-1:H[0]=0,this.fromString(H,256)}},$.prototype.bitwiseTo=function(m,S,C){var H,X,oe=Math.min(m.t,this.t);for(H=0;H<oe;++H)C[H]=S(this[H],m[H]);if(m.t<this.t){for(X=m.s&this.DM,H=oe;H<this.t;++H)C[H]=S(this[H],X);C.t=this.t}else{for(X=this.s&this.DM,H=oe;H<m.t;++H)C[H]=S(X,m[H]);C.t=m.t}C.s=S(this.s,m.s),C.clamp()},$.prototype.changeBit=function(m,S){var C=$.ONE.shiftLeft(m);return this.bitwiseTo(C,S,C),C},$.prototype.addTo=function(m,S){for(var C=0,H=0,X=Math.min(m.t,this.t);C<X;)H+=this[C]+m[C],S[C++]=H&this.DM,H>>=this.DB;if(m.t<this.t){for(H+=m.s;C<this.t;)H+=this[C],S[C++]=H&this.DM,H>>=this.DB;H+=this.s}else{for(H+=this.s;C<m.t;)H+=m[C],S[C++]=H&this.DM,H>>=this.DB;H+=m.s}S.s=H<0?-1:0,H>0?S[C++]=H:H<-1&&(S[C++]=this.DV+H),S.t=C,S.clamp()},$.prototype.dMultiply=function(m){this[this.t]=this.am(0,m-1,this,0,0,this.t),++this.t,this.clamp()},$.prototype.dAddOffset=function(m,S){if(m!=0){for(;this.t<=S;)this[this.t++]=0;for(this[S]+=m;this[S]>=this.DV;)this[S]-=this.DV,++S>=this.t&&(this[this.t++]=0),++this[S]}},$.prototype.multiplyLowerTo=function(m,S,C){var H,X=Math.min(this.t+m.t,S);for(C.s=0,C.t=X;X>0;)C[--X]=0;for(H=C.t-this.t;X<H;++X)C[X+this.t]=this.am(0,m[X],C,X,0,this.t);for(H=Math.min(m.t,S);X<H;++X)this.am(0,m[X],C,X,0,S-X);C.clamp()},$.prototype.multiplyUpperTo=function(m,S,C){--S;var H=C.t=this.t+m.t-S;for(C.s=0;--H>=0;)C[H]=0;for(H=Math.max(S-this.t,0);H<m.t;++H)C[this.t+H-S]=this.am(S-H,m[H],C,0,0,this.t+H-S);C.clamp(),C.drShiftTo(1,C)},$.prototype.modInt=function(m){if(m<=0)return 0;var S=this.DV%m,C=this.s<0?m-1:0;if(this.t>0)if(S==0)C=this[0]%m;else for(var H=this.t-1;H>=0;--H)C=(S*C+this[H])%m;return C},$.prototype.millerRabin=function(m){var S=this.subtract($.ONE),C=S.getLowestSetBit();if(C<=0)return!1;var H=S.shiftRight(C);(m=m+1>>1)>Je.length&&(m=Je.length);for(var X=ie(),oe=0;oe<m;++oe){X.fromInt(Je[Math.floor(Math.random()*Je.length)]);var be=X.modPow(H,this);if(be.compareTo($.ONE)!=0&&be.compareTo(S)!=0){for(var he=1;he++<C&&be.compareTo(S)!=0;)if((be=be.modPowInt(2,this)).compareTo($.ONE)==0)return!1;if(be.compareTo(S)!=0)return!1}}return!0},$.prototype.clone=function(){var m=ie();return this.copyTo(m),m},$.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},$.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},$.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},$.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},$.prototype.toByteArray=function(){var m=this.t,S=new Array;S[0]=this.s;var C,H=this.DB-m*this.DB%8,X=0;if(m-- >0)for(H<this.DB&&(C=this[m]>>H)!=(this.s&this.DM)>>H&&(S[X++]=C|this.s<<this.DB-H);m>=0;)H<8?(C=(this[m]&(1<<H)-1)<<8-H,C|=this[--m]>>(H+=this.DB-8)):(C=this[m]>>(H-=8)&255,H<=0&&(H+=this.DB,--m)),(128&C)!=0&&(C|=-256),X==0&&(128&this.s)!=(128&C)&&++X,(X>0||C!=this.s)&&(S[X++]=C);return S},$.prototype.equals=function(m){return this.compareTo(m)==0},$.prototype.min=function(m){return this.compareTo(m)<0?this:m},$.prototype.max=function(m){return this.compareTo(m)>0?this:m},$.prototype.and=function(m){var S=ie();return this.bitwiseTo(m,xe,S),S},$.prototype.or=function(m){var S=ie();return this.bitwiseTo(m,Ze,S),S},$.prototype.xor=function(m){var S=ie();return this.bitwiseTo(m,je,S),S},$.prototype.andNot=function(m){var S=ie();return this.bitwiseTo(m,ht,S),S},$.prototype.not=function(){for(var m=ie(),S=0;S<this.t;++S)m[S]=this.DM&~this[S];return m.t=this.t,m.s=~this.s,m},$.prototype.shiftLeft=function(m){var S=ie();return m<0?this.rShiftTo(-m,S):this.lShiftTo(m,S),S},$.prototype.shiftRight=function(m){var S=ie();return m<0?this.lShiftTo(-m,S):this.rShiftTo(m,S),S},$.prototype.getLowestSetBit=function(){for(var m=0;m<this.t;++m)if(this[m]!=0)return m*this.DB+Nt(this[m]);return this.s<0?this.t*this.DB:-1},$.prototype.bitCount=function(){for(var m=0,S=this.s&this.DM,C=0;C<this.t;++C)m+=kt(this[C]^S);return m},$.prototype.testBit=function(m){var S=Math.floor(m/this.DB);return S>=this.t?this.s!=0:(this[S]&1<<m%this.DB)!=0},$.prototype.setBit=function(m){return this.changeBit(m,Ze)},$.prototype.clearBit=function(m){return this.changeBit(m,ht)},$.prototype.flipBit=function(m){return this.changeBit(m,je)},$.prototype.add=function(m){var S=ie();return this.addTo(m,S),S},$.prototype.subtract=function(m){var S=ie();return this.subTo(m,S),S},$.prototype.multiply=function(m){var S=ie();return this.multiplyTo(m,S),S},$.prototype.divide=function(m){var S=ie();return this.divRemTo(m,S,null),S},$.prototype.remainder=function(m){var S=ie();return this.divRemTo(m,null,S),S},$.prototype.divideAndRemainder=function(m){var S=ie(),C=ie();return this.divRemTo(m,S,C),new Array(S,C)},$.prototype.modPow=function(m,S){var C,H,X=m.bitLength(),oe=yt(1);if(X<=0)return oe;C=X<18?1:X<48?3:X<144?4:X<768?5:6,H=X<8?new rt(S):S.isEven()?new Te(S):new J(S);var be=new Array,he=3,me=C-1,Ee=(1<<C)-1;if(be[1]=H.convert(this),C>1){var Ae=ie();for(H.sqrTo(be[1],Ae);he<=Ee;)be[he]=ie(),H.mulTo(Ae,be[he-2],be[he]),he+=2}var De,Ke,it=m.t-1,gt=!0,St=ie();for(X=ve(m[it])-1;it>=0;){for(X>=me?De=m[it]>>X-me&Ee:(De=(m[it]&(1<<X+1)-1)<<me-X,it>0&&(De|=m[it-1]>>this.DB+X-me)),he=C;(1&De)==0;)De>>=1,--he;if((X-=he)<0&&(X+=this.DB,--it),gt)be[De].copyTo(oe),gt=!1;else{for(;he>1;)H.sqrTo(oe,St),H.sqrTo(St,oe),he-=2;he>0?H.sqrTo(oe,St):(Ke=oe,oe=St,St=Ke),H.mulTo(St,be[De],oe)}for(;it>=0&&(m[it]&1<<X)==0;)H.sqrTo(oe,St),Ke=oe,oe=St,St=Ke,--X<0&&(X=this.DB-1,--it)}return H.revert(oe)},$.prototype.modInverse=function(m){var S=m.isEven();if(this.isEven()&&S||m.signum()==0)return $.ZERO;for(var C=m.clone(),H=this.clone(),X=yt(1),oe=yt(0),be=yt(0),he=yt(1);C.signum()!=0;){for(;C.isEven();)C.rShiftTo(1,C),S?(X.isEven()&&oe.isEven()||(X.addTo(this,X),oe.subTo(m,oe)),X.rShiftTo(1,X)):oe.isEven()||oe.subTo(m,oe),oe.rShiftTo(1,oe);for(;H.isEven();)H.rShiftTo(1,H),S?(be.isEven()&&he.isEven()||(be.addTo(this,be),he.subTo(m,he)),be.rShiftTo(1,be)):he.isEven()||he.subTo(m,he),he.rShiftTo(1,he);C.compareTo(H)>=0?(C.subTo(H,C),S&&X.subTo(be,X),oe.subTo(he,oe)):(H.subTo(C,H),S&&be.subTo(X,be),he.subTo(oe,he))}return H.compareTo($.ONE)!=0?$.ZERO:he.compareTo(m)>=0?he.subtract(m):he.signum()<0?(he.addTo(m,he),he.signum()<0?he.add(m):he):he},$.prototype.pow=function(m){return this.exp(m,new Me)},$.prototype.gcd=function(m){var S=this.s<0?this.negate():this.clone(),C=m.s<0?m.negate():m.clone();if(S.compareTo(C)<0){var H=S;S=C,C=H}var X=S.getLowestSetBit(),oe=C.getLowestSetBit();if(oe<0)return S;for(X<oe&&(oe=X),oe>0&&(S.rShiftTo(oe,S),C.rShiftTo(oe,C));S.signum()>0;)(X=S.getLowestSetBit())>0&&S.rShiftTo(X,S),(X=C.getLowestSetBit())>0&&C.rShiftTo(X,C),S.compareTo(C)>=0?(S.subTo(C,S),S.rShiftTo(1,S)):(C.subTo(S,C),C.rShiftTo(1,C));return oe>0&&C.lShiftTo(oe,C),C},$.prototype.isProbablePrime=function(m){var S,C=this.abs();if(C.t==1&&C[0]<=Je[Je.length-1]){for(S=0;S<Je.length;++S)if(C[0]==Je[S])return!0;return!1}if(C.isEven())return!1;for(S=1;S<Je.length;){for(var H=Je[S],X=S+1;X<Je.length&&H<se;)H*=Je[X++];for(H=C.modInt(H);S<X;)if(H%Je[S++]==0)return!1}return C.millerRabin(m)},$.prototype.square=function(){var m=ie();return this.squareTo(m),m},M.prototype.init=function(m){var S,C,H;for(S=0;S<256;++S)this.S[S]=S;for(C=0,S=0;S<256;++S)C=C+this.S[S]+m[S%m.length]&255,H=this.S[S],this.S[S]=this.S[C],this.S[C]=H;this.i=0,this.j=0},M.prototype.next=function(){var m;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,m=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=m,this.S[m+this.S[this.i]&255]};var D,G,re;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function we(){(function(m){G[re++]^=255&m,G[re++]^=m>>8&255,G[re++]^=m>>16&255,G[re++]^=m>>24&255,re>=256&&(re-=256)})(new Date().getTime())}if(G==null){var Ce;if(G=new Array,re=0,P!==void 0&&(P.crypto!==void 0||P.msCrypto!==void 0)){var ot=P.crypto||P.msCrypto;if(ot.getRandomValues){var Re=new Uint8Array(32);for(ot.getRandomValues(Re),Ce=0;Ce<32;++Ce)G[re++]=Re[Ce]}else if(F.appName=="Netscape"&&F.appVersion<"5"){var pt=P.crypto.random(32);for(Ce=0;Ce<pt.length;++Ce)G[re++]=255&pt.charCodeAt(Ce)}}for(;re<256;)Ce=Math.floor(65536*Math.random()),G[re++]=Ce>>>8,G[re++]=255&Ce;re=0,we()}function Ct(){if(D==null){for(we(),(D=function(){return new M}()).init(G),re=0;re<G.length;++re)G[re]=0;re=0}return D.next()}function bt(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function We(v,m){return new $(v,m)}function Ge(v,m,S){for(var C="",H=0;C.length<m;)C+=S(String.fromCharCode.apply(String,v.concat([(4278190080&H)>>24,(16711680&H)>>16,(65280&H)>>8,255&H]))),H+=1;return C}function Oe(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function ut(v,m){this.x=m,this.q=v}function Q(v,m,S,C){this.curve=v,this.x=m,this.y=S,this.z=C??$.ONE,this.zinv=null}function k(v,m,S){this.q=v,this.a=this.fromBigInteger(m),this.b=this.fromBigInteger(S),this.infinity=new Q(this,null,null)}bt.prototype.nextBytes=function(m){var S;for(S=0;S<m.length;++S)m[S]=Ct()},Oe.prototype.doPublic=function(m){return m.modPowInt(this.e,this.n)},Oe.prototype.setPublic=function(m,S){if(this.isPublic=!0,this.isPrivate=!1,typeof m!="string")this.n=m,this.e=S;else{if(!(m!=null&&S!=null&&m.length>0&&S.length>0))throw"Invalid RSA public key";this.n=We(m,16),this.e=parseInt(S,16)}},Oe.prototype.encrypt=function(m){var S=function(oe,be){if(be<oe.length+11)throw"Message too long for RSA";for(var he=new Array,me=oe.length-1;me>=0&&be>0;){var Ee=oe.charCodeAt(me--);Ee<128?he[--be]=Ee:Ee>127&&Ee<2048?(he[--be]=63&Ee|128,he[--be]=Ee>>6|192):(he[--be]=63&Ee|128,he[--be]=Ee>>6&63|128,he[--be]=Ee>>12|224)}he[--be]=0;for(var Ae=new bt,De=new Array;be>2;){for(De[0]=0;De[0]==0;)Ae.nextBytes(De);he[--be]=De[0]}return he[--be]=2,he[--be]=0,new $(he)}(m,this.n.bitLength()+7>>3);if(S==null)return null;var C=this.doPublic(S);if(C==null)return null;var H=C.toString(16);return(1&H.length)==0?H:"0"+H},Oe.prototype.encryptOAEP=function(m,S,C){var H=function(he,me,Ee,Ae){var De=j.crypto.MessageDigest,Ke=j.crypto.Util,it=null;if(Ee||(Ee="sha1"),typeof Ee=="string"&&(it=De.getCanonicalAlgName(Ee),Ae=De.getHashLength(it),Ee=function(Ht){return zt(Ke.hashHex(tr(Ht),it))}),he.length+2*Ae+2>me)throw"Message too long for RSA";var gt,St="";for(gt=0;gt<me-he.length-2*Ae-2;gt+=1)St+="\0";var ae=Ee("")+St+""+he,_e=new Array(Ae);new bt().nextBytes(_e);var Ie=Ge(_e,ae.length,Ee),Fe=[];for(gt=0;gt<ae.length;gt+=1)Fe[gt]=ae.charCodeAt(gt)^Ie.charCodeAt(gt);var ct=Ge(Fe,_e.length,Ee),Et=[0];for(gt=0;gt<_e.length;gt+=1)Et[gt+1]=_e[gt]^ct.charCodeAt(gt);return new $(Et.concat(Fe))}(m,this.n.bitLength()+7>>3,S,C);if(H==null)return null;var X=this.doPublic(H);if(X==null)return null;var oe=X.toString(16);return(1&oe.length)==0?oe:"0"+oe},Oe.prototype.type="RSA",ut.prototype.equals=function(m){return m==this||this.q.equals(m.q)&&this.x.equals(m.x)},ut.prototype.toBigInteger=function(){return this.x},ut.prototype.negate=function(){return new ut(this.q,this.x.negate().mod(this.q))},ut.prototype.add=function(m){return new ut(this.q,this.x.add(m.toBigInteger()).mod(this.q))},ut.prototype.subtract=function(m){return new ut(this.q,this.x.subtract(m.toBigInteger()).mod(this.q))},ut.prototype.multiply=function(m){return new ut(this.q,this.x.multiply(m.toBigInteger()).mod(this.q))},ut.prototype.square=function(){return new ut(this.q,this.x.square().mod(this.q))},ut.prototype.divide=function(m){return new ut(this.q,this.x.multiply(m.toBigInteger().modInverse(this.q)).mod(this.q))},Q.prototype.getX=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Q.prototype.getY=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Q.prototype.equals=function(m){return m==this||(this.isInfinity()?m.isInfinity():m.isInfinity()?this.isInfinity():!!m.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(m.z)).mod(this.curve.q).equals($.ZERO)&&m.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(m.z)).mod(this.curve.q).equals($.ZERO))},Q.prototype.isInfinity=function(){return this.x==null&&this.y==null||this.z.equals($.ZERO)&&!this.y.toBigInteger().equals($.ZERO)},Q.prototype.negate=function(){return new Q(this.curve,this.x,this.y.negate(),this.z)},Q.prototype.add=function(m){if(this.isInfinity())return m;if(m.isInfinity())return this;var S=m.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(m.z)).mod(this.curve.q),C=m.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(m.z)).mod(this.curve.q);if($.ZERO.equals(C))return $.ZERO.equals(S)?this.twice():this.curve.getInfinity();var H=new $("3"),X=this.x.toBigInteger(),oe=this.y.toBigInteger(),be=(m.x.toBigInteger(),m.y.toBigInteger(),C.square()),he=be.multiply(C),me=X.multiply(be),Ee=S.square().multiply(this.z),Ae=Ee.subtract(me.shiftLeft(1)).multiply(m.z).subtract(he).multiply(C).mod(this.curve.q),De=me.multiply(H).multiply(S).subtract(oe.multiply(he)).subtract(Ee.multiply(S)).multiply(m.z).add(S.multiply(he)).mod(this.curve.q),Ke=he.multiply(this.z).multiply(m.z).mod(this.curve.q);return new Q(this.curve,this.curve.fromBigInteger(Ae),this.curve.fromBigInteger(De),Ke)},Q.prototype.twice=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var m=new $("3"),S=this.x.toBigInteger(),C=this.y.toBigInteger(),H=C.multiply(this.z),X=H.multiply(C).mod(this.curve.q),oe=this.curve.a.toBigInteger(),be=S.square().multiply(m);$.ZERO.equals(oe)||(be=be.add(this.z.square().multiply(oe)));var he=(be=be.mod(this.curve.q)).square().subtract(S.shiftLeft(3).multiply(X)).shiftLeft(1).multiply(H).mod(this.curve.q),me=be.multiply(m).multiply(S).subtract(X.shiftLeft(1)).shiftLeft(2).multiply(X).subtract(be.square().multiply(be)).mod(this.curve.q),Ee=H.square().multiply(H).shiftLeft(3).mod(this.curve.q);return new Q(this.curve,this.curve.fromBigInteger(he),this.curve.fromBigInteger(me),Ee)},Q.prototype.multiply=function(m){if(this.isInfinity())return this;if(m.signum()==0)return this.curve.getInfinity();var S,C=m,H=C.multiply(new $("3")),X=this.negate(),oe=this,be=this.curve.q.subtract(m),he=be.multiply(new $("3")),me=new Q(this.curve,this.x,this.y),Ee=me.negate();for(S=H.bitLength()-2;S>0;--S){oe=oe.twice();var Ae=H.testBit(S);Ae!=C.testBit(S)&&(oe=oe.add(Ae?this:X))}for(S=he.bitLength()-2;S>0;--S){me=me.twice();var De=he.testBit(S);De!=be.testBit(S)&&(me=me.add(De?me:Ee))}return oe},Q.prototype.multiplyTwo=function(m,S,C){var H;H=m.bitLength()>C.bitLength()?m.bitLength()-1:C.bitLength()-1;for(var X=this.curve.getInfinity(),oe=this.add(S);H>=0;)X=X.twice(),m.testBit(H)?X=C.testBit(H)?X.add(oe):X.add(this):C.testBit(H)&&(X=X.add(S)),--H;return X},k.prototype.getQ=function(){return this.q},k.prototype.getA=function(){return this.a},k.prototype.getB=function(){return this.b},k.prototype.equals=function(m){return m==this||this.q.equals(m.q)&&this.a.equals(m.a)&&this.b.equals(m.b)},k.prototype.getInfinity=function(){return this.infinity},k.prototype.fromBigInteger=function(m){return new ut(this.q,m)},k.prototype.decodePointHex=function(m){switch(parseInt(m.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var S=(m.length-2)/2,C=m.substr(2,S),H=m.substr(S+2,S);return new Q(this,this.fromBigInteger(new $(C,16)),this.fromBigInteger(new $(H,16)));default:return null}},ut.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Q.prototype.getEncoded=function(v){var m=function(oe,be){var he=oe.toByteArrayUnsigned();if(be<he.length)he=he.slice(he.length-be);else for(;be>he.length;)he.unshift(0);return he},S=this.getX().toBigInteger(),C=this.getY().toBigInteger(),H=m(S,32);return v?C.isEven()?H.unshift(2):H.unshift(3):(H.unshift(4),H=H.concat(m(C,32))),H},Q.decodeFrom=function(v,m){m[0];var S=m.length-1,C=m.slice(1,1+S/2),H=m.slice(1+S/2,1+S);C.unshift(0),H.unshift(0);var X=new $(C),oe=new $(H);return new Q(v,v.fromBigInteger(X),v.fromBigInteger(oe))},Q.decodeFromHex=function(v,m){m.substr(0,2);var S=m.length-2,C=m.substr(2,S/2),H=m.substr(2+S/2,S/2),X=new $(C,16),oe=new $(H,16);return new Q(v,v.fromBigInteger(X),v.fromBigInteger(oe))},Q.prototype.add2D=function(v){if(this.isInfinity())return v;if(v.isInfinity())return this;if(this.x.equals(v.x))return this.y.equals(v.y)?this.twice():this.curve.getInfinity();var m=v.x.subtract(this.x),S=v.y.subtract(this.y).divide(m),C=S.square().subtract(this.x).subtract(v.x),H=S.multiply(this.x.subtract(C)).subtract(this.y);return new Q(this.curve,C,H)},Q.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var v=this.curve.fromBigInteger($.valueOf(2)),m=this.curve.fromBigInteger($.valueOf(3)),S=this.x.square().multiply(m).add(this.curve.a).divide(this.y.multiply(v)),C=S.square().subtract(this.x.multiply(v)),H=S.multiply(this.x.subtract(C)).subtract(this.y);return new Q(this.curve,C,H)},Q.prototype.multiply2D=function(v){if(this.isInfinity())return this;if(v.signum()==0)return this.curve.getInfinity();var m,S=v,C=S.multiply(new $("3")),H=this.negate(),X=this;for(m=C.bitLength()-2;m>0;--m){X=X.twice();var oe=C.testBit(m);oe!=S.testBit(m)&&(X=X.add2D(oe?this:H))}return X},Q.prototype.isOnCurve=function(){var v=this.getX().toBigInteger(),m=this.getY().toBigInteger(),S=this.curve.getA().toBigInteger(),C=this.curve.getB().toBigInteger(),H=this.curve.getQ(),X=m.multiply(m).mod(H),oe=v.multiply(v).multiply(v).add(S.multiply(v)).add(C).mod(H);return X.equals(oe)},Q.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Q.prototype.validate=function(){var v=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var m=this.getX().toBigInteger(),S=this.getY().toBigInteger();if(m.compareTo($.ONE)<0||m.compareTo(v.subtract($.ONE))>0)throw new Error("x coordinate out of bounds");if(S.compareTo($.ONE)<0||S.compareTo(v.subtract($.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(v).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var V=function(){var v=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),m=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),S={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function C(oe,be,he){return be?S[be]:String.fromCharCode(parseInt(he,16))}var H=new String(""),X=Object.hasOwnProperty;return function(oe,be){var he,me,Ee=oe.match(v),Ae=Ee[0],De=!1;Ae==="{"?he={}:Ae==="["?he=[]:(he=[],De=!0);for(var Ke=[he],it=1-De,gt=Ee.length;it<gt;++it){var St;switch((Ae=Ee[it]).charCodeAt(0)){default:(St=Ke[0])[me||St.length]=+Ae,me=void 0;break;case 34:if((Ae=Ae.substring(1,Ae.length-1)).indexOf("\\")!==-1&&(Ae=Ae.replace(m,C)),St=Ke[0],!me){if(!(St instanceof Array)){me=Ae||H;break}me=St.length}St[me]=Ae,me=void 0;break;case 91:St=Ke[0],Ke.unshift(St[me||St.length]=[]),me=void 0;break;case 93:Ke.shift();break;case 102:(St=Ke[0])[me||St.length]=!1,me=void 0;break;case 110:(St=Ke[0])[me||St.length]=null,me=void 0;break;case 116:(St=Ke[0])[me||St.length]=!0,me=void 0;break;case 123:St=Ke[0],Ke.unshift(St[me||St.length]={}),me=void 0;break;case 125:Ke.shift()}}if(De){if(Ke.length!==1)throw new Error;he=he[0]}else if(Ke.length)throw new Error;return be&&(he=function ae(_e,Ie){var Fe=_e[Ie];if(Fe&&(Fe===void 0?"undefined":R(Fe))==="object"){var ct=null;for(var Et in Fe)if(X.call(Fe,Et)&&Fe!==_e){var fr=ae(Fe,Et);fr!==void 0?Fe[Et]=fr:(ct||(ct=[]),ct.push(Et))}if(ct)for(var Ht=ct.length;--Ht>=0;)delete Fe[ct[Ht]]}return be.call(_e,Ie,Fe)}({"":he},"")),he}}();j!==void 0&&j||(a.KJUR=j={}),j.asn1!==void 0&&j.asn1||(j.asn1={}),j.asn1.ASN1Util=new function(){this.integerToByteHex=function(v){var m=v.toString(16);return m.length%2==1&&(m="0"+m),m},this.bigIntToMinTwosComplementsHex=function(v){var m=v.toString(16);if(m.substr(0,1)!="-")m.length%2==1?m="0"+m:m.match(/^[0-7]/)||(m="00"+m);else{var S=m.substr(1).length;S%2==1?S+=1:m.match(/^[0-7]/)||(S+=2);for(var C="",H=0;H<S;H++)C+="f";m=new $(C,16).xor(v).add($.ONE).toString(16).replace(/^-/,"")}return m},this.getPEMStringFromHex=function(v,m){return Tt(v,m)},this.newObject=function(v){var m=j.asn1,S=m.ASN1Object,C=m.DERBoolean,H=m.DERInteger,X=m.DERBitString,oe=m.DEROctetString,be=m.DERNull,he=m.DERObjectIdentifier,me=m.DEREnumerated,Ee=m.DERUTF8String,Ae=m.DERNumericString,De=m.DERPrintableString,Ke=m.DERTeletexString,it=m.DERIA5String,gt=m.DERUTCTime,St=m.DERGeneralizedTime,ae=m.DERVisibleString,_e=m.DERBMPString,Ie=m.DERSequence,Fe=m.DERSet,ct=m.DERTaggedObject,Et=m.ASN1Util.newObject;if(v instanceof m.ASN1Object)return v;var fr=Object.keys(v);if(fr.length!=1)throw new Error("key of param shall be only one.");var Ht=fr[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+Ht+":")==-1)throw new Error("undefined key: "+Ht);if(Ht=="bool")return new C(v[Ht]);if(Ht=="int")return new H(v[Ht]);if(Ht=="bitstr")return new X(v[Ht]);if(Ht=="octstr")return new oe(v[Ht]);if(Ht=="null")return new be(v[Ht]);if(Ht=="oid")return new he(v[Ht]);if(Ht=="enum")return new me(v[Ht]);if(Ht=="utf8str")return new Ee(v[Ht]);if(Ht=="numstr")return new Ae(v[Ht]);if(Ht=="prnstr")return new De(v[Ht]);if(Ht=="telstr")return new Ke(v[Ht]);if(Ht=="ia5str")return new it(v[Ht]);if(Ht=="utctime")return new gt(v[Ht]);if(Ht=="gentime")return new St(v[Ht]);if(Ht=="visstr")return new ae(v[Ht]);if(Ht=="bmpstr")return new _e(v[Ht]);if(Ht=="asn1")return new S(v[Ht]);if(Ht=="seq"){for(var qr=v[Ht],lr=[],pr=0;pr<qr.length;pr++){var tn=Et(qr[pr]);lr.push(tn)}return new Ie({array:lr})}if(Ht=="set"){for(qr=v[Ht],lr=[],pr=0;pr<qr.length;pr++)tn=Et(qr[pr]),lr.push(tn);return new Fe({array:lr})}if(Ht=="tag"){var dr=v[Ht];if(Object.prototype.toString.call(dr)==="[object Array]"&&dr.length==3){var rn=Et(dr[2]);return new ct({tag:dr[0],explicit:dr[1],obj:rn})}return new ct(dr)}},this.jsonToASN1HEX=function(v){return this.newObject(v).getEncodedHex()}},j.asn1.ASN1Util.oidHexToInt=function(v){for(var m="",S=parseInt(v.substr(0,2),16),C=(m=Math.floor(S/40)+"."+S%40,""),H=2;H<v.length;H+=2){var X=("00000000"+parseInt(v.substr(H,2),16).toString(2)).slice(-8);C+=X.substr(1,7),X.substr(0,1)=="0"&&(m=m+"."+new $(C,2).toString(10),C="")}return m},j.asn1.ASN1Util.oidIntToHex=function(v){var m=function(he){var me=he.toString(16);return me.length==1&&(me="0"+me),me},S=function(he){var me="",Ee=new $(he,10).toString(2),Ae=7-Ee.length%7;Ae==7&&(Ae=0);for(var De="",Ke=0;Ke<Ae;Ke++)De+="0";for(Ee=De+Ee,Ke=0;Ke<Ee.length-1;Ke+=7){var it=Ee.substr(Ke,7);Ke!=Ee.length-7&&(it="1"+it),me+=m(parseInt(it,2))}return me};if(!v.match(/^[0-9.]+$/))throw"malformed oid string: "+v;var C="",H=v.split("."),X=40*parseInt(H[0])+parseInt(H[1]);C+=m(X),H.splice(0,2);for(var oe=0;oe<H.length;oe++)C+=S(H[oe]);return C},j.asn1.ASN1Object=function(v){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var m=this.hV.length/2,S=m.toString(16);if(S.length%2==1&&(S="0"+S),m<128)return S;var C=S.length/2;if(C>15)throw"ASN.1 length too long to represent by 8x: n = "+m.toString(16);return(128+C).toString(16)+S},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(m){this.params=m},v!=null&&v.tlv!=null&&(this.hTLV=v.tlv,this.isModified=!1)},j.asn1.DERAbstractString=function(v){j.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(m){this.hTLV=null,this.isModified=!0,this.s=m,this.hV=ft(this.s).toLowerCase()},this.setStringHex=function(m){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=m},this.getFreshValueHex=function(){return this.hV},v!==void 0&&(typeof v=="string"?this.setString(v):v.str!==void 0?this.setString(v.str):v.hex!==void 0&&this.setStringHex(v.hex))},sr(j.asn1.DERAbstractString,j.asn1.ASN1Object),j.asn1.DERAbstractTime=function(v){j.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(m){var S=m.getTime()+6e4*m.getTimezoneOffset();return new Date(S)},this.formatDate=function(m,S,C){var H=this.zeroPadding,X=this.localDateToUTC(m),oe=String(X.getFullYear());S=="utc"&&(oe=oe.substr(2,2));var be=oe+H(String(X.getMonth()+1),2)+H(String(X.getDate()),2)+H(String(X.getHours()),2)+H(String(X.getMinutes()),2)+H(String(X.getSeconds()),2);if(C===!0){var he=X.getMilliseconds();if(he!=0){var me=H(String(he),3);be=be+"."+(me=me.replace(/[0]+$/,""))}}return be+"Z"},this.zeroPadding=function(m,S){return m.length>=S?m:new Array(S-m.length+1).join("0")+m},this.getString=function(){return this.s},this.setString=function(m){this.hTLV=null,this.isModified=!0,this.s=m,this.hV=or(m)},this.setByDateValue=function(m,S,C,H,X,oe){var be=new Date(Date.UTC(m,S-1,C,H,X,oe,0));this.setByDate(be)},this.getFreshValueHex=function(){return this.hV}},sr(j.asn1.DERAbstractTime,j.asn1.ASN1Object),j.asn1.DERAbstractStructured=function(v){j.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(m){this.hTLV=null,this.isModified=!0,this.asn1Array=m},this.appendASN1Object=function(m){this.hTLV=null,this.isModified=!0,this.asn1Array.push(m)},this.asn1Array=new Array,v!==void 0&&v.array!==void 0&&(this.asn1Array=v.array)},sr(j.asn1.DERAbstractStructured,j.asn1.ASN1Object),j.asn1.DERBoolean=function(v){j.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=v==0?"010100":"0101ff"},sr(j.asn1.DERBoolean,j.asn1.ASN1Object),j.asn1.DERInteger=function(v){j.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(m){this.hTLV=null,this.isModified=!0,this.hV=j.asn1.ASN1Util.bigIntToMinTwosComplementsHex(m)},this.setByInteger=function(m){var S=new $(String(m),10);this.setByBigInteger(S)},this.setValueHex=function(m){this.hV=m},this.getFreshValueHex=function(){return this.hV},v!==void 0&&(v.bigint!==void 0?this.setByBigInteger(v.bigint):v.int!==void 0?this.setByInteger(v.int):typeof v=="number"?this.setByInteger(v):v.hex!==void 0&&this.setValueHex(v.hex))},sr(j.asn1.DERInteger,j.asn1.ASN1Object),j.asn1.DERBitString=function(v){if(v!==void 0&&v.obj!==void 0){var m=j.asn1.ASN1Util.newObject(v.obj);v.hex="00"+m.getEncodedHex()}j.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(S){this.hTLV=null,this.isModified=!0,this.hV=S},this.setUnusedBitsAndHexValue=function(S,C){if(S<0||7<S)throw"unused bits shall be from 0 to 7: u = "+S;var H="0"+S;this.hTLV=null,this.isModified=!0,this.hV=H+C},this.setByBinaryString=function(S){var C=8-(S=S.replace(/0+$/,"")).length%8;C==8&&(C=0);for(var H=0;H<=C;H++)S+="0";var X="";for(H=0;H<S.length-1;H+=8){var oe=S.substr(H,8),be=parseInt(oe,2).toString(16);be.length==1&&(be="0"+be),X+=be}this.hTLV=null,this.isModified=!0,this.hV="0"+C+X},this.setByBooleanArray=function(S){for(var C="",H=0;H<S.length;H++)S[H]==1?C+="1":C+="0";this.setByBinaryString(C)},this.newFalseArray=function(S){for(var C=new Array(S),H=0;H<S;H++)C[H]=!1;return C},this.getFreshValueHex=function(){return this.hV},v!==void 0&&(typeof v=="string"&&v.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(v):v.hex!==void 0?this.setHexValueIncludingUnusedBits(v.hex):v.bin!==void 0?this.setByBinaryString(v.bin):v.array!==void 0&&this.setByBooleanArray(v.array))},sr(j.asn1.DERBitString,j.asn1.ASN1Object),j.asn1.DEROctetString=function(v){if(v!==void 0&&v.obj!==void 0){var m=j.asn1.ASN1Util.newObject(v.obj);v.hex=m.getEncodedHex()}j.asn1.DEROctetString.superclass.constructor.call(this,v),this.hT="04"},sr(j.asn1.DEROctetString,j.asn1.DERAbstractString),j.asn1.DERNull=function(){j.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},sr(j.asn1.DERNull,j.asn1.ASN1Object),j.asn1.DERObjectIdentifier=function(v){j.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(m){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=m},this.setValueOidString=function(m){var S=function(H){var X=function(De){var Ke=De.toString(16);return Ke.length==1&&(Ke="0"+Ke),Ke},oe=function(De){var Ke="",it=parseInt(De,10).toString(2),gt=7-it.length%7;gt==7&&(gt=0);for(var St="",ae=0;ae<gt;ae++)St+="0";for(it=St+it,ae=0;ae<it.length-1;ae+=7){var _e=it.substr(ae,7);ae!=it.length-7&&(_e="1"+_e),Ke+=X(parseInt(_e,2))}return Ke};try{if(!H.match(/^[0-9.]+$/))return null;var be="",he=H.split("."),me=40*parseInt(he[0],10)+parseInt(he[1],10);be+=X(me),he.splice(0,2);for(var Ee=0;Ee<he.length;Ee++)be+=oe(he[Ee]);return be}catch{return null}}(m);if(S==null)throw new Error("malformed oid string: "+m);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=S},this.setValueName=function(m){var S=j.asn1.x509.OID.name2oid(m);if(S==="")throw new Error("DERObjectIdentifier oidName undefined: "+m);this.setValueOidString(S)},this.setValueNameOrOid=function(m){m.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(m):this.setValueName(m)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(m){typeof m=="string"?this.setValueNameOrOid(m):m.oid!==void 0?this.setValueNameOrOid(m.oid):m.name!==void 0?this.setValueNameOrOid(m.name):m.hex!==void 0&&this.setValueHex(m.hex)},v!==void 0&&this.setByParam(v)},sr(j.asn1.DERObjectIdentifier,j.asn1.ASN1Object),j.asn1.DEREnumerated=function(v){j.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(m){this.hTLV=null,this.isModified=!0,this.hV=j.asn1.ASN1Util.bigIntToMinTwosComplementsHex(m)},this.setByInteger=function(m){var S=new $(String(m),10);this.setByBigInteger(S)},this.setValueHex=function(m){this.hV=m},this.getFreshValueHex=function(){return this.hV},v!==void 0&&(v.int!==void 0?this.setByInteger(v.int):typeof v=="number"?this.setByInteger(v):v.hex!==void 0&&this.setValueHex(v.hex))},sr(j.asn1.DEREnumerated,j.asn1.ASN1Object),j.asn1.DERUTF8String=function(v){j.asn1.DERUTF8String.superclass.constructor.call(this,v),this.hT="0c"},sr(j.asn1.DERUTF8String,j.asn1.DERAbstractString),j.asn1.DERNumericString=function(v){j.asn1.DERNumericString.superclass.constructor.call(this,v),this.hT="12"},sr(j.asn1.DERNumericString,j.asn1.DERAbstractString),j.asn1.DERPrintableString=function(v){j.asn1.DERPrintableString.superclass.constructor.call(this,v),this.hT="13"},sr(j.asn1.DERPrintableString,j.asn1.DERAbstractString),j.asn1.DERTeletexString=function(v){j.asn1.DERTeletexString.superclass.constructor.call(this,v),this.hT="14"},sr(j.asn1.DERTeletexString,j.asn1.DERAbstractString),j.asn1.DERIA5String=function(v){j.asn1.DERIA5String.superclass.constructor.call(this,v),this.hT="16"},sr(j.asn1.DERIA5String,j.asn1.DERAbstractString),j.asn1.DERVisibleString=function(v){j.asn1.DERIA5String.superclass.constructor.call(this,v),this.hT="1a"},sr(j.asn1.DERVisibleString,j.asn1.DERAbstractString),j.asn1.DERBMPString=function(v){j.asn1.DERBMPString.superclass.constructor.call(this,v),this.hT="1e"},sr(j.asn1.DERBMPString,j.asn1.DERAbstractString),j.asn1.DERUTCTime=function(v){j.asn1.DERUTCTime.superclass.constructor.call(this,v),this.hT="17",this.setByDate=function(m){this.hTLV=null,this.isModified=!0,this.date=m,this.s=this.formatDate(this.date,"utc"),this.hV=or(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=or(this.s)),this.hV},v!==void 0&&(v.str!==void 0?this.setString(v.str):typeof v=="string"&&v.match(/^[0-9]{12}Z$/)?this.setString(v):v.hex!==void 0?this.setStringHex(v.hex):v.date!==void 0&&this.setByDate(v.date))},sr(j.asn1.DERUTCTime,j.asn1.DERAbstractTime),j.asn1.DERGeneralizedTime=function(v){j.asn1.DERGeneralizedTime.superclass.constructor.call(this,v),this.hT="18",this.withMillis=!1,this.setByDate=function(m){this.hTLV=null,this.isModified=!0,this.date=m,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=or(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=or(this.s)),this.hV},v!==void 0&&(v.str!==void 0?this.setString(v.str):typeof v=="string"&&v.match(/^[0-9]{14}Z$/)?this.setString(v):v.hex!==void 0?this.setStringHex(v.hex):v.date!==void 0&&this.setByDate(v.date),v.millis===!0&&(this.withMillis=!0))},sr(j.asn1.DERGeneralizedTime,j.asn1.DERAbstractTime),j.asn1.DERSequence=function(v){j.asn1.DERSequence.superclass.constructor.call(this,v),this.hT="30",this.getFreshValueHex=function(){for(var m="",S=0;S<this.asn1Array.length;S++)m+=this.asn1Array[S].getEncodedHex();return this.hV=m,this.hV}},sr(j.asn1.DERSequence,j.asn1.DERAbstractStructured),j.asn1.DERSet=function(v){j.asn1.DERSet.superclass.constructor.call(this,v),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var m=new Array,S=0;S<this.asn1Array.length;S++){var C=this.asn1Array[S];m.push(C.getEncodedHex())}return this.sortFlag==1&&m.sort(),this.hV=m.join(""),this.hV},v!==void 0&&v.sortflag!==void 0&&v.sortflag==0&&(this.sortFlag=!1)},sr(j.asn1.DERSet,j.asn1.DERAbstractStructured),j.asn1.DERTaggedObject=function(v){j.asn1.DERTaggedObject.superclass.constructor.call(this);var m=j.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(S,C,H){this.hT=C,this.isExplicit=S,this.asn1Object=H,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=H.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,C),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(S){S.tag!=null&&(this.hT=S.tag),S.explicit!=null&&(this.isExplicit=S.explicit),S.tage!=null&&(this.hT=S.tage,this.isExplicit=!0),S.tagi!=null&&(this.hT=S.tagi,this.isExplicit=!1),S.obj!=null&&(S.obj instanceof m.ASN1Object?(this.asn1Object=S.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):R(S.obj)=="object"&&(this.asn1Object=m.ASN1Util.newObject(S.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},v!=null&&this.setByParam(v)},sr(j.asn1.DERTaggedObject,j.asn1.ASN1Object);var j,qe,et,ze=new function(){};function Yt(v){for(var m=new Array,S=0;S<v.length;S++)m[S]=v.charCodeAt(S);return m}function Br(v){for(var m="",S=0;S<v.length;S++)m+=String.fromCharCode(v[S]);return m}function jr(v){for(var m="",S=0;S<v.length;S++){var C=v[S].toString(16);C.length==1&&(C="0"+C),m+=C}return m}function or(v){return jr(Yt(v))}function $e(v){return v=(v=(v=v.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function vt(v){return v.length%4==2?v+="==":v.length%4==3&&(v+="="),v=(v=v.replace(/-/g,"+")).replace(/_/g,"/")}function st(v){return v.length%2==1&&(v="0"+v),$e(Y(v))}function Le(v){return q(vt(v))}function ft(v){return rr(Dr(v))}function Xt(v){return decodeURIComponent(Fr(v))}function zt(v){for(var m="",S=0;S<v.length-1;S+=2)m+=String.fromCharCode(parseInt(v.substr(S,2),16));return m}function tr(v){for(var m="",S=0;S<v.length;S++)m+=("0"+v.charCodeAt(S).toString(16)).slice(-2);return m}function jt(v){return Y(v)}function ue(v){var m=jt(v).replace(/(.{64})/g,`$1\r
`);return m=m.replace(/\r\n$/,"")}function pe(v){return q(v.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Tt(v,m){return"-----BEGIN "+m+`-----\r
`+ue(v)+`\r
-----END `+m+`-----\r
`}function xt(v,m){if(v.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+m;return pe(v=m!==void 0?(v=v.replace(new RegExp("^[^]*-----BEGIN "+m+"-----"),"")).replace(new RegExp("-----END "+m+"-----[^]*$"),""):(v=v.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Pt(v){var m,S,C,H,X,oe,be,he,me,Ee,Ae;if(Ae=v.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return he=Ae[1],m=parseInt(he),he.length===2&&(50<=m&&m<100?m=1900+m:0<=m&&m<50&&(m=2e3+m)),S=parseInt(Ae[2])-1,C=parseInt(Ae[3]),H=parseInt(Ae[4]),X=parseInt(Ae[5]),oe=parseInt(Ae[6]),be=0,(me=Ae[7])!==""&&(Ee=(me.substr(1)+"00").substr(0,3),be=parseInt(Ee)),Date.UTC(m,S,C,H,X,oe,be);throw"unsupported zulu format: "+v}function Zt(v){return~~(Pt(v)/1e3)}function rr(v){return v.replace(/%/g,"")}function Fr(v){return v.replace(/(..)/g,"%$1")}function $t(v){var m="malformed IPv6 address";if(!v.match(/^[0-9A-Fa-f:]+$/))throw m;var S=(v=v.toLowerCase()).split(":").length-1;if(S<2)throw m;var C=":".repeat(7-S+2),H=(v=v.replace("::",C)).split(":");if(H.length!=8)throw m;for(var X=0;X<8;X++)H[X]=("0000"+H[X]).slice(-4);return H.join("")}function er(v){if(!v.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var m=(v=v.toLowerCase()).match(/.{1,4}/g),S=0;S<8;S++)m[S]=m[S].replace(/^0+/,""),m[S]==""&&(m[S]="0");var C=(v=":"+m.join(":")+":").match(/:(0:){2,}/g);if(C===null)return v.slice(1,-1);var H="";for(S=0;S<C.length;S++)C[S].length>H.length&&(H=C[S]);return(v=v.replace(H,"::")).slice(1,-1)}function mr(v){var m="malformed hex value";if(!v.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw m;if(v.length!=8)return v.length==32?er(v):v;try{return parseInt(v.substr(0,2),16)+"."+parseInt(v.substr(2,2),16)+"."+parseInt(v.substr(4,2),16)+"."+parseInt(v.substr(6,2),16)}catch{throw m}}function ar(v){return v.match(/.{4}/g).map(function(S){var C=parseInt(S.substr(0,2),16),H=parseInt(S.substr(2),16);if(C==0&H<128)return String.fromCharCode(H);if(C<8){var X=128|63&H;return Xt((192|(7&C)<<3|(192&H)>>6).toString(16)+X.toString(16))}X=128|(15&C)<<2|(192&H)>>6;var oe=128|63&H;return Xt((224|(240&C)>>4).toString(16)+X.toString(16)+oe.toString(16))}).join("")}function Dr(v){for(var m=encodeURIComponent(v),S="",C=0;C<m.length;C++)m[C]=="%"?(S+=m.substr(C,3),C+=2):S=S+"%"+or(m[C]);return S}function Ar(v){return!(v.length%2!=0||!v.match(/^[0-9a-f]+$/)&&!v.match(/^[0-9A-F]+$/))}function Gr(v){return v.length%2==1?"0"+v:v.substr(0,1)>"7"?"00"+v:v}ze.getLblen=function(v,m){if(v.substr(m+2,1)!="8")return 1;var S=parseInt(v.substr(m+3,1));return S==0?-1:0<S&&S<10?S+1:-2},ze.getL=function(v,m){var S=ze.getLblen(v,m);return S<1?"":v.substr(m+2,2*S)},ze.getVblen=function(v,m){var S;return(S=ze.getL(v,m))==""?-1:(S.substr(0,1)==="8"?new $(S.substr(2),16):new $(S,16)).intValue()},ze.getVidx=function(v,m){var S=ze.getLblen(v,m);return S<0?S:m+2*(S+1)},ze.getV=function(v,m){var S=ze.getVidx(v,m),C=ze.getVblen(v,m);return v.substr(S,2*C)},ze.getTLV=function(v,m){return v.substr(m,2)+ze.getL(v,m)+ze.getV(v,m)},ze.getTLVblen=function(v,m){return 2+2*ze.getLblen(v,m)+2*ze.getVblen(v,m)},ze.getNextSiblingIdx=function(v,m){return ze.getVidx(v,m)+2*ze.getVblen(v,m)},ze.getChildIdx=function(v,m){var S,C,H,X=ze,oe=[];S=X.getVidx(v,m),C=2*X.getVblen(v,m),v.substr(m,2)=="03"&&(S+=2,C-=2),H=0;for(var be=S;H<=C;){var he=X.getTLVblen(v,be);if((H+=he)<=C&&oe.push(be),be+=he,H>=C)break}return oe},ze.getNthChildIdx=function(v,m,S){return ze.getChildIdx(v,m)[S]},ze.getIdxbyList=function(v,m,S,C){var H,X,oe=ze;return S.length==0?C!==void 0&&v.substr(m,2)!==C?-1:m:(H=S.shift())>=(X=oe.getChildIdx(v,m)).length?-1:oe.getIdxbyList(v,X[H],S,C)},ze.getIdxbyListEx=function(v,m,S,C){var H,X,oe=ze;if(S.length==0)return C!==void 0&&v.substr(m,2)!==C?-1:m;H=S.shift(),X=oe.getChildIdx(v,m);for(var be=0,he=0;he<X.length;he++){var me=v.substr(X[he],2);if(typeof H=="number"&&!oe.isContextTag(me)&&be==H||typeof H=="string"&&oe.isContextTag(me,H))return oe.getIdxbyListEx(v,X[he],S,C);oe.isContextTag(me)||be++}return-1},ze.getTLVbyList=function(v,m,S,C){var H=ze,X=H.getIdxbyList(v,m,S,C);return X==-1||X>=v.length?null:H.getTLV(v,X)},ze.getTLVbyListEx=function(v,m,S,C){var H=ze,X=H.getIdxbyListEx(v,m,S,C);return X==-1?null:H.getTLV(v,X)},ze.getVbyList=function(v,m,S,C,H){var X,oe,be=ze;return(X=be.getIdxbyList(v,m,S,C))==-1||X>=v.length?null:(oe=be.getV(v,X),H===!0&&(oe=oe.substr(2)),oe)},ze.getVbyListEx=function(v,m,S,C,H){var X,oe,be=ze;return(X=be.getIdxbyListEx(v,m,S,C))==-1?null:(oe=be.getV(v,X),v.substr(X,2)=="03"&&H!==!1&&(oe=oe.substr(2)),oe)},ze.getInt=function(v,m,S){S==null&&(S=-1);try{var C=v.substr(m,2);if(C!="02"&&C!="03")return S;var H=ze.getV(v,m);return C=="02"?parseInt(H,16):function(oe){try{var be=oe.substr(0,2);if(be=="00")return parseInt(oe.substr(2),16);var he=parseInt(be,16),me=oe.substr(2),Ee=parseInt(me,16).toString(2);return Ee=="0"&&(Ee="00000000"),Ee=Ee.slice(0,0-he),parseInt(Ee,2)}catch{return-1}}(H)}catch{return S}},ze.getOID=function(v,m,S){S==null&&(S=null);try{return v.substr(m,2)!="06"?S:function(H){if(!Ar(H))return null;try{var X=[],oe=H.substr(0,2),be=parseInt(oe,16);X[0]=new String(Math.floor(be/40)),X[1]=new String(be%40);for(var he=H.substr(2),me=[],Ee=0;Ee<he.length/2;Ee++)me.push(parseInt(he.substr(2*Ee,2),16));var Ae=[],De="";for(Ee=0;Ee<me.length;Ee++)128&me[Ee]?De+=gr((127&me[Ee]).toString(2),7):(De+=gr((127&me[Ee]).toString(2),7),Ae.push(new String(parseInt(De,2))),De="");var Ke=X.join(".");return Ae.length>0&&(Ke=Ke+"."+Ae.join(".")),Ke}catch{return null}}(ze.getV(v,m))}catch{return S}},ze.getOIDName=function(v,m,S){S==null&&(S=null);try{var C=ze.getOID(v,m,S);if(C==S)return S;var H=j.asn1.x509.OID.oid2name(C);return H==""?C:H}catch{return S}},ze.getString=function(v,m,S){S==null&&(S=null);try{return zt(ze.getV(v,m))}catch{return S}},ze.hextooidstr=function(v){var m=function(De,Ke){return De.length>=Ke?De:new Array(Ke-De.length+1).join("0")+De},S=[],C=v.substr(0,2),H=parseInt(C,16);S[0]=new String(Math.floor(H/40)),S[1]=new String(H%40);for(var X=v.substr(2),oe=[],be=0;be<X.length/2;be++)oe.push(parseInt(X.substr(2*be,2),16));var he=[],me="";for(be=0;be<oe.length;be++)128&oe[be]?me+=m((127&oe[be]).toString(2),7):(me+=m((127&oe[be]).toString(2),7),he.push(new String(parseInt(me,2))),me="");var Ee=S.join(".");return he.length>0&&(Ee=Ee+"."+he.join(".")),Ee},ze.dump=function(v,m,S,C){var H=ze,X=H.getV,oe=H.dump,be=H.getChildIdx,he=v;v instanceof j.asn1.ASN1Object&&(he=v.getEncodedHex());var me=function(Ht,qr){return Ht.length<=2*qr?Ht:Ht.substr(0,qr)+"..(total "+Ht.length/2+"bytes).."+Ht.substr(Ht.length-qr,qr)};m===void 0&&(m={ommit_long_octet:32}),S===void 0&&(S=0),C===void 0&&(C="");var Ee,Ae=m.ommit_long_octet;if((Ee=he.substr(S,2))=="01")return(De=X(he,S))=="00"?C+`BOOLEAN FALSE
`:C+`BOOLEAN TRUE
`;if(Ee=="02")return C+"INTEGER "+me(De=X(he,S),Ae)+`
`;if(Ee=="03"){var De=X(he,S);if(H.isASN1HEX(De.substr(2))){var Ke=C+`BITSTRING, encapsulates
`;return Ke+=oe(De.substr(2),m,0,C+"  ")}return C+"BITSTRING "+me(De,Ae)+`
`}if(Ee=="04")return De=X(he,S),H.isASN1HEX(De)?(Ke=C+`OCTETSTRING, encapsulates
`,Ke+=oe(De,m,0,C+"  ")):C+"OCTETSTRING "+me(De,Ae)+`
`;if(Ee=="05")return C+`NULL
`;if(Ee=="06"){var it=X(he,S),gt=j.asn1.ASN1Util.oidHexToInt(it),St=j.asn1.x509.OID.oid2name(gt),ae=gt.replace(/\./g," ");return St!=""?C+"ObjectIdentifier "+St+" ("+ae+`)
`:C+"ObjectIdentifier ("+ae+`)
`}if(Ee=="0a")return C+"ENUMERATED "+parseInt(X(he,S))+`
`;if(Ee=="0c")return C+"UTF8String '"+Xt(X(he,S))+`'
`;if(Ee=="13")return C+"PrintableString '"+Xt(X(he,S))+`'
`;if(Ee=="14")return C+"TeletexString '"+Xt(X(he,S))+`'
`;if(Ee=="16")return C+"IA5String '"+Xt(X(he,S))+`'
`;if(Ee=="17")return C+"UTCTime "+Xt(X(he,S))+`
`;if(Ee=="18")return C+"GeneralizedTime "+Xt(X(he,S))+`
`;if(Ee=="1a")return C+"VisualString '"+Xt(X(he,S))+`'
`;if(Ee=="1e")return C+"BMPString '"+ar(X(he,S))+`'
`;if(Ee=="30"){if(he.substr(S,4)=="3000")return C+`SEQUENCE {}
`;Ke=C+`SEQUENCE
`;var _e=m;if(((ct=be(he,S)).length==2||ct.length==3)&&he.substr(ct[0],2)=="06"&&he.substr(ct[ct.length-1],2)=="04"){St=H.oidname(X(he,ct[0]));var Ie=JSON.parse(JSON.stringify(m));Ie.x509ExtName=St,_e=Ie}for(var Fe=0;Fe<ct.length;Fe++)Ke+=oe(he,_e,ct[Fe],C+"  ");return Ke}if(Ee=="31"){Ke=C+`SET
`;var ct=be(he,S);for(Fe=0;Fe<ct.length;Fe++)Ke+=oe(he,m,ct[Fe],C+"  ");return Ke}if((128&(Ee=parseInt(Ee,16)))!=0){var Et=31&Ee;if((32&Ee)!=0){for(Ke=C+"["+Et+`]
`,ct=be(he,S),Fe=0;Fe<ct.length;Fe++)Ke+=oe(he,m,ct[Fe],C+"  ");return Ke}if(De=X(he,S),ze.isASN1HEX(De)){var Ke=C+"["+Et+`]
`;return Ke+=oe(De,m,0,C+"  ")}return(De.substr(0,8)=="68747470"||m.x509ExtName==="subjectAltName"&&Et==2)&&(De=Xt(De)),Ke=C+"["+Et+"] "+De+`
`}return C+"UNKNOWN("+Ee+") "+X(he,S)+`
`},ze.isContextTag=function(v,m){var S,C;v=v.toLowerCase();try{S=parseInt(v,16)}catch{return-1}if(m===void 0)return(192&S)==128;try{return m.match(/^\[[0-9]+\]$/)!=null&&!((C=parseInt(m.substr(1,m.length-1),10))>31)&&(192&S)==128&&(31&S)==C}catch{return!1}},ze.isASN1HEX=function(v){var m=ze;if(v.length%2==1)return!1;var S=m.getVblen(v,0),C=v.substr(0,2),H=m.getL(v,0);return v.length-C.length-H.length==2*S},ze.checkStrictDER=function(v,m,S,C,H){var X=ze;if(S===void 0){if(typeof v!="string")throw new Error("not hex string");if(v=v.toLowerCase(),!j.lang.String.isHex(v))throw new Error("not hex string");S=v.length,H=(C=v.length/2)<128?1:Math.ceil(C.toString(16))+1}if(X.getL(v,m).length>2*H)throw new Error("L of TLV too long: idx="+m);var oe=X.getVblen(v,m);if(oe>C)throw new Error("value of L too long than hex: idx="+m);var be=X.getTLV(v,m),he=be.length-2-X.getL(v,m).length;if(he!==2*oe)throw new Error("V string length and L's value not the same:"+he+"/"+2*oe);if(m===0&&v.length!=be.length)throw new Error("total length and TLV length unmatch:"+v.length+"!="+be.length);var me=v.substr(m,2);if(me==="02"){var Ee=X.getVidx(v,m);if(v.substr(Ee,2)=="00"&&v.charCodeAt(Ee+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(me,16)){for(var Ae=X.getVblen(v,m),De=0,Ke=X.getChildIdx(v,m),it=0;it<Ke.length;it++)De+=X.getTLV(v,Ke[it]).length,X.checkStrictDER(v,Ke[it],S,C,H);if(2*Ae!=De)throw new Error("sum of children's TLV length and L unmatch: "+2*Ae+"!="+De)}},ze.oidname=function(v){var m=j.asn1;j.lang.String.isHex(v)&&(v=m.ASN1Util.oidHexToInt(v));var S=m.x509.OID.oid2name(v);return S===""&&(S=v),S},j!==void 0&&j||(a.KJUR=j={}),j.lang!==void 0&&j.lang||(j.lang={}),j.lang.String=function(){},typeof d=="function"?(a.utf8tob64u=qe=function(m){return $e(d.from(m,"utf8").toString("base64"))},a.b64utoutf8=et=function(m){return d.from(vt(m),"base64").toString("utf8")}):(a.utf8tob64u=qe=function(m){return st(rr(Dr(m)))},a.b64utoutf8=et=function(m){return decodeURIComponent(Fr(Le(m)))}),j.lang.String.isInteger=function(v){return!!v.match(/^[0-9]+$/)||!!v.match(/^-[0-9]+$/)},j.lang.String.isHex=function(v){return Ar(v)},j.lang.String.isBase64=function(v){return!(!(v=v.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||v.length%4!=0)},j.lang.String.isBase64URL=function(v){return!v.match(/[+/=]/)&&(v=vt(v),j.lang.String.isBase64(v))},j.lang.String.isIntegerArray=function(v){return!!(v=v.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},j.lang.String.isPrintable=function(v){return v.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},j.lang.String.isIA5=function(v){return v.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},j.lang.String.isMail=function(v){return v.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var gr=function(m,S,C){return C==null&&(C="0"),m.length>=S?m:new Array(S-m.length+1).join(C)+m};function sr(v,m){var S=function(){};S.prototype=m.prototype,v.prototype=new S,v.prototype.constructor=v,v.superclass=m.prototype,m.prototype.constructor==Object.prototype.constructor&&(m.prototype.constructor=m)}j!==void 0&&j||(a.KJUR=j={}),j.crypto!==void 0&&j.crypto||(j.crypto={}),j.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:K.algo.MD5,sha1:K.algo.SHA1,sha224:K.algo.SHA224,sha256:K.algo.SHA256,sha384:K.algo.SHA384,sha512:K.algo.SHA512,ripemd160:K.algo.RIPEMD160},this.getDigestInfoHex=function(v,m){if(this.DIGESTINFOHEAD[m]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+m;return this.DIGESTINFOHEAD[m]+v},this.getPaddedDigestInfoHex=function(v,m,S){var C=this.getDigestInfoHex(v,m),H=S/4;if(C.length+22>H)throw"key is too short for SigAlg: keylen="+S+","+m;for(var X="0001",oe="00"+C,be="",he=H-X.length-oe.length,me=0;me<he;me+=2)be+="ff";return X+be+oe},this.hashString=function(v,m){return new j.crypto.MessageDigest({alg:m}).digestString(v)},this.hashHex=function(v,m){return new j.crypto.MessageDigest({alg:m}).digestHex(v)},this.sha1=function(v){return this.hashString(v,"sha1")},this.sha256=function(v){return this.hashString(v,"sha256")},this.sha256Hex=function(v){return this.hashHex(v,"sha256")},this.sha512=function(v){return this.hashString(v,"sha512")},this.sha512Hex=function(v){return this.hashHex(v,"sha512")},this.isKey=function(v){return v instanceof Oe||v instanceof j.crypto.DSA||v instanceof j.crypto.ECDSA}},j.crypto.Util.md5=function(v){return new j.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(v)},j.crypto.Util.ripemd160=function(v){return new j.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(v)},j.crypto.Util.SECURERANDOMGEN=new bt,j.crypto.Util.getRandomHexOfNbytes=function(v){var m=new Array(v);return j.crypto.Util.SECURERANDOMGEN.nextBytes(m),jr(m)},j.crypto.Util.getRandomBigIntegerOfNbytes=function(v){return new $(j.crypto.Util.getRandomHexOfNbytes(v),16)},j.crypto.Util.getRandomHexOfNbits=function(v){var m=v%8,S=new Array((v-m)/8+1);return j.crypto.Util.SECURERANDOMGEN.nextBytes(S),S[0]=(255<<m&255^255)&S[0],jr(S)},j.crypto.Util.getRandomBigIntegerOfNbits=function(v){return new $(j.crypto.Util.getRandomHexOfNbits(v),16)},j.crypto.Util.getRandomBigIntegerZeroToMax=function(v){for(var m=v.bitLength();;){var S=j.crypto.Util.getRandomBigIntegerOfNbits(m);if(v.compareTo(S)!=-1)return S}},j.crypto.Util.getRandomBigIntegerMinToMax=function(v,m){var S=v.compareTo(m);if(S==1)throw"biMin is greater than biMax";if(S==0)return v;var C=m.subtract(v);return j.crypto.Util.getRandomBigIntegerZeroToMax(C).add(v)},j.crypto.MessageDigest=function(v){this.setAlgAndProvider=function(m,S){if((m=j.crypto.MessageDigest.getCanonicalAlgName(m))!==null&&S===void 0&&(S=j.crypto.Util.DEFAULTPROVIDER[m]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(m)!=-1&&S=="cryptojs"){try{this.md=j.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[m].create()}catch(C){throw"setAlgAndProvider hash alg set fail alg="+m+"/"+C}this.updateString=function(C){this.md.update(C)},this.updateHex=function(C){var H=K.enc.Hex.parse(C);this.md.update(H)},this.digest=function(){return this.md.finalize().toString(K.enc.Hex)},this.digestString=function(C){return this.updateString(C),this.digest()},this.digestHex=function(C){return this.updateHex(C),this.digest()}}if(":sha256:".indexOf(m)!=-1&&S=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(C){throw"setAlgAndProvider hash alg set fail alg="+m+"/"+C}this.updateString=function(C){this.md.update(C)},this.updateHex=function(C){var H=sjcl.codec.hex.toBits(C);this.md.update(H)},this.digest=function(){var C=this.md.finalize();return sjcl.codec.hex.fromBits(C)},this.digestString=function(C){return this.updateString(C),this.digest()},this.digestHex=function(C){return this.updateHex(C),this.digest()}}},this.updateString=function(m){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(m){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(m){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(m){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},v!==void 0&&v.alg!==void 0&&(this.algName=v.alg,v.prov===void 0&&(this.provName=j.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},j.crypto.MessageDigest.getCanonicalAlgName=function(v){return typeof v=="string"&&(v=(v=v.toLowerCase()).replace(/-/,"")),v},j.crypto.MessageDigest.getHashLength=function(v){var m=j.crypto.MessageDigest,S=m.getCanonicalAlgName(v);if(m.HASHLENGTH[S]===void 0)throw"not supported algorithm: "+v;return m.HASHLENGTH[S]},j.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},j.crypto.Mac=function(v){this.setAlgAndProvider=function(m,S){if((m=m.toLowerCase())==null&&(m="hmacsha1"),(m=m.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+m;S===void 0&&(S=j.crypto.Util.DEFAULTPROVIDER[m]),this.algProv=m+"/"+S;var C=m.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(C)!=-1&&S=="cryptojs"){try{var H=j.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[C];this.mac=K.algo.HMAC.create(H,this.pass)}catch(X){throw"setAlgAndProvider hash alg set fail hashAlg="+C+"/"+X}this.updateString=function(X){this.mac.update(X)},this.updateHex=function(X){var oe=K.enc.Hex.parse(X);this.mac.update(oe)},this.doFinal=function(){return this.mac.finalize().toString(K.enc.Hex)},this.doFinalString=function(X){return this.updateString(X),this.doFinal()},this.doFinalHex=function(X){return this.updateHex(X),this.doFinal()}}},this.updateString=function(m){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(m){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(m){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(m){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(m){if(typeof m=="string"){var S=m;return m.length%2!=1&&m.match(/^[0-9A-Fa-f]+$/)||(S=tr(m)),void(this.pass=K.enc.Hex.parse(S))}if((m===void 0?"undefined":R(m))!="object")throw"KJUR.crypto.Mac unsupported password type: "+m;if(S=null,m.hex!==void 0){if(m.hex.length%2!=0||!m.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+m.hex;S=m.hex}if(m.utf8!==void 0&&(S=ft(m.utf8)),m.rstr!==void 0&&(S=tr(m.rstr)),m.b64!==void 0&&(S=q(m.b64)),m.b64u!==void 0&&(S=Le(m.b64u)),S==null)throw"KJUR.crypto.Mac unsupported password type: "+m;this.pass=K.enc.Hex.parse(S)},v!==void 0&&(v.pass!==void 0&&this.setPassword(v.pass),v.alg!==void 0&&(this.algName=v.alg,v.prov===void 0&&(this.provName=j.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},j.crypto.Signature=function(v){var m=null;if(this._setAlgNames=function(){var S=this.algName.match(/^(.+)with(.+)$/);S&&(this.mdAlgName=S[1].toLowerCase(),this.pubkeyAlgName=S[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(S,C){for(var H="",X=C/4-S.length,oe=0;oe<X;oe++)H+="0";return H+S},this.setAlgAndProvider=function(S,C){if(this._setAlgNames(),C!="cryptojs/jsrsa")throw new Error("provider not supported: "+C);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new j.crypto.MessageDigest({alg:this.mdAlgName})}catch(H){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+H)}this.init=function(H,X){var oe=null;try{oe=X===void 0?Gt.getKey(H):Gt.getKey(H,X)}catch(be){throw"init failed:"+be}if(oe.isPrivate===!0)this.prvKey=oe,this.state="SIGN";else{if(oe.isPublic!==!0)throw"init failed.:"+oe;this.pubKey=oe,this.state="VERIFY"}},this.updateString=function(H){this.md.updateString(H)},this.updateHex=function(H){this.md.updateHex(H)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&j.crypto.ECDSA!==void 0&&(this.prvKey=new j.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Oe&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Oe&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof j.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof j.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(H){return this.updateString(H),this.sign()},this.signHex=function(H){return this.updateHex(H),this.sign()},this.verify=function(H){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&j.crypto.ECDSA!==void 0&&(this.pubKey=new j.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Oe&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,H,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Oe&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,H);if(j.crypto.ECDSA!==void 0&&this.pubKey instanceof j.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,H);if(j.crypto.DSA!==void 0&&this.pubKey instanceof j.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,H);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(S,C){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(S){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(S){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(S){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(S){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(S){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=v,v!==void 0&&(v.alg!==void 0&&(this.algName=v.alg,v.prov===void 0?this.provName=j.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=v.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),v.psssaltlen!==void 0&&(this.pssSaltLen=v.psssaltlen),v.prvkeypem!==void 0)){if(v.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{m=Gt.getKey(v.prvkeypem),this.init(m)}catch(S){throw"fatal error to load pem private key: "+S}}},j.crypto.Cipher=function(v){},j.crypto.Cipher.encrypt=function(v,m,S){if(m instanceof Oe&&m.isPublic){var C=j.crypto.Cipher.getAlgByKeyAndName(m,S);if(C==="RSA")return m.encrypt(v);if(C==="RSAOAEP")return m.encryptOAEP(v,"sha1");var H=C.match(/^RSAOAEP(\d+)$/);if(H!==null)return m.encryptOAEP(v,"sha"+H[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+S}throw"Cipher.encrypt: unsupported key or algorithm"},j.crypto.Cipher.decrypt=function(v,m,S){if(m instanceof Oe&&m.isPrivate){var C=j.crypto.Cipher.getAlgByKeyAndName(m,S);if(C==="RSA")return m.decrypt(v);if(C==="RSAOAEP")return m.decryptOAEP(v,"sha1");var H=C.match(/^RSAOAEP(\d+)$/);if(H!==null)return m.decryptOAEP(v,"sha"+H[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+S}throw"Cipher.decrypt: unsupported key or algorithm"},j.crypto.Cipher.getAlgByKeyAndName=function(v,m){if(v instanceof Oe){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(m)!=-1)return m;if(m==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+m}throw"getAlgByKeyAndName: not supported algorithm name: "+m},j.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},j!==void 0&&j||(a.KJUR=j={}),j.crypto!==void 0&&j.crypto||(j.crypto={}),j.crypto.ECDSA=function(v){var m=Error,S=$,C=Q,H=j.crypto.ECDSA,X=j.crypto.ECParameterDB,oe=H.getName,be=ze,he=be.getVbyListEx,me=be.isASN1HEX,Ee=new bt;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(Ae){return new S(Ae.bitLength(),Ee).mod(Ae.subtract(S.ONE)).add(S.ONE)},this.setNamedCurve=function(Ae){this.ecparams=X.getByName(Ae),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=Ae},this.setPrivateKeyHex=function(Ae){this.isPrivate=!0,this.prvKeyHex=Ae},this.setPublicKeyHex=function(Ae){this.isPublic=!0,this.pubKeyHex=Ae},this.getPublicKeyXYHex=function(){var Ae=this.pubKeyHex;if(Ae.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var De=this.ecparams.keylen/4;if(Ae.length!==2+2*De)throw"malformed public key hex length";var Ke={};return Ke.x=Ae.substr(2,De),Ke.y=Ae.substr(2+De),Ke},this.getShortNISTPCurveName=function(){var Ae=this.curveName;return Ae==="secp256r1"||Ae==="NIST P-256"||Ae==="P-256"||Ae==="prime256v1"?"P-256":Ae==="secp384r1"||Ae==="NIST P-384"||Ae==="P-384"?"P-384":null},this.generateKeyPairHex=function(){var Ae=this.ecparams.n,De=this.getBigRandom(Ae),Ke=this.ecparams.G.multiply(De),it=Ke.getX().toBigInteger(),gt=Ke.getY().toBigInteger(),St=this.ecparams.keylen/4,ae=("0000000000"+De.toString(16)).slice(-St),_e="04"+("0000000000"+it.toString(16)).slice(-St)+("0000000000"+gt.toString(16)).slice(-St);return this.setPrivateKeyHex(ae),this.setPublicKeyHex(_e),{ecprvhex:ae,ecpubhex:_e}},this.signWithMessageHash=function(Ae){return this.signHex(Ae,this.prvKeyHex)},this.signHex=function(Ae,De){var Ke=new S(De,16),it=this.ecparams.n,gt=new S(Ae.substring(0,this.ecparams.keylen/4),16);do var St=this.getBigRandom(it),ae=this.ecparams.G.multiply(St).getX().toBigInteger().mod(it);while(ae.compareTo(S.ZERO)<=0);var _e=St.modInverse(it).multiply(gt.add(Ke.multiply(ae))).mod(it);return H.biRSSigToASN1Sig(ae,_e)},this.sign=function(Ae,De){var Ke=De,it=this.ecparams.n,gt=S.fromByteArrayUnsigned(Ae);do var St=this.getBigRandom(it),ae=this.ecparams.G.multiply(St).getX().toBigInteger().mod(it);while(ae.compareTo($.ZERO)<=0);var _e=St.modInverse(it).multiply(gt.add(Ke.multiply(ae))).mod(it);return this.serializeSig(ae,_e)},this.verifyWithMessageHash=function(Ae,De){return this.verifyHex(Ae,De,this.pubKeyHex)},this.verifyHex=function(Ae,De,Ke){try{var it,gt,St=H.parseSigHex(De);it=St.r,gt=St.s;var ae=C.decodeFromHex(this.ecparams.curve,Ke),_e=new S(Ae.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(_e,it,gt,ae)}catch{return!1}},this.verify=function(Ae,De,Ke){var it,gt,St;if(Bitcoin.Util.isArray(De)){var ae=this.parseSig(De);it=ae.r,gt=ae.s}else{if((De===void 0?"undefined":R(De))!=="object"||!De.r||!De.s)throw"Invalid value for signature";it=De.r,gt=De.s}if(Ke instanceof Q)St=Ke;else{if(!Bitcoin.Util.isArray(Ke))throw"Invalid format for pubkey value, must be byte array or ECPointFp";St=C.decodeFrom(this.ecparams.curve,Ke)}var _e=S.fromByteArrayUnsigned(Ae);return this.verifyRaw(_e,it,gt,St)},this.verifyRaw=function(Ae,De,Ke,it){var gt=this.ecparams.n,St=this.ecparams.G;if(De.compareTo(S.ONE)<0||De.compareTo(gt)>=0||Ke.compareTo(S.ONE)<0||Ke.compareTo(gt)>=0)return!1;var ae=Ke.modInverse(gt),_e=Ae.multiply(ae).mod(gt),Ie=De.multiply(ae).mod(gt);return St.multiply(_e).add(it.multiply(Ie)).getX().toBigInteger().mod(gt).equals(De)},this.serializeSig=function(Ae,De){var Ke=Ae.toByteArraySigned(),it=De.toByteArraySigned(),gt=[];return gt.push(2),gt.push(Ke.length),(gt=gt.concat(Ke)).push(2),gt.push(it.length),(gt=gt.concat(it)).unshift(gt.length),gt.unshift(48),gt},this.parseSig=function(Ae){var De;if(Ae[0]!=48)throw new Error("Signature not a valid DERSequence");if(Ae[De=2]!=2)throw new Error("First element in signature must be a DERInteger");var Ke=Ae.slice(De+2,De+2+Ae[De+1]);if(Ae[De+=2+Ae[De+1]]!=2)throw new Error("Second element in signature must be a DERInteger");var it=Ae.slice(De+2,De+2+Ae[De+1]);return De+=2+Ae[De+1],{r:S.fromByteArrayUnsigned(Ke),s:S.fromByteArrayUnsigned(it)}},this.parseSigCompact=function(Ae){if(Ae.length!==65)throw"Signature has the wrong length";var De=Ae[0]-27;if(De<0||De>7)throw"Invalid signature type";var Ke=this.ecparams.n;return{r:S.fromByteArrayUnsigned(Ae.slice(1,33)).mod(Ke),s:S.fromByteArrayUnsigned(Ae.slice(33,65)).mod(Ke),i:De}},this.readPKCS5PrvKeyHex=function(Ae){if(me(Ae)===!1)throw new Error("not ASN.1 hex string");var De,Ke,it;try{De=he(Ae,0,["[0]",0],"06"),Ke=he(Ae,0,[1],"04");try{it=he(Ae,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=oe(De),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(it),this.setPrivateKeyHex(Ke),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(Ae){if(me(Ae)===!1)throw new m("not ASN.1 hex string");var De,Ke,it;try{he(Ae,0,[1,0],"06"),De=he(Ae,0,[1,1],"06"),Ke=he(Ae,0,[2,0,1],"04");try{it=he(Ae,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new m("malformed PKCS#8 plain ECC private key")}if(this.curveName=oe(De),this.curveName===void 0)throw new m("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(it),this.setPrivateKeyHex(Ke),this.isPublic=!1},this.readPKCS8PubKeyHex=function(Ae){if(me(Ae)===!1)throw new m("not ASN.1 hex string");var De,Ke;try{he(Ae,0,[0,0],"06"),De=he(Ae,0,[0,1],"06"),Ke=he(Ae,0,[1],"03")}catch{throw new m("malformed PKCS#8 ECC public key")}if(this.curveName=oe(De),this.curveName===null)throw new m("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ke)},this.readCertPubKeyHex=function(Ae,De){if(me(Ae)===!1)throw new m("not ASN.1 hex string");var Ke,it;try{Ke=he(Ae,0,[0,5,0,1],"06"),it=he(Ae,0,[0,5,1],"03")}catch{throw new m("malformed X.509 certificate ECC public key")}if(this.curveName=oe(Ke),this.curveName===null)throw new m("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(it)},v!==void 0&&v.curve!==void 0&&(this.curveName=v.curve),this.curveName===void 0&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),v!==void 0&&(v.prv!==void 0&&this.setPrivateKeyHex(v.prv),v.pub!==void 0&&this.setPublicKeyHex(v.pub))},j.crypto.ECDSA.parseSigHex=function(v){var m=j.crypto.ECDSA.parseSigHexInHexRS(v);return{r:new $(m.r,16),s:new $(m.s,16)}},j.crypto.ECDSA.parseSigHexInHexRS=function(v){var m=ze,S=m.getChildIdx,C=m.getV;if(m.checkStrictDER(v,0),v.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var H=S(v,0);if(H.length!=2)throw new Error("signature shall have two elements");var X=H[0],oe=H[1];if(v.substr(X,2)!="02")throw new Error("1st item not ASN.1 integer");if(v.substr(oe,2)!="02")throw new Error("2nd item not ASN.1 integer");return{r:C(v,X),s:C(v,oe)}},j.crypto.ECDSA.asn1SigToConcatSig=function(v){var m=j.crypto.ECDSA.parseSigHexInHexRS(v),S=m.r,C=m.s;if(S.substr(0,2)=="00"&&S.length%32==2&&(S=S.substr(2)),C.substr(0,2)=="00"&&C.length%32==2&&(C=C.substr(2)),S.length%32==30&&(S="00"+S),C.length%32==30&&(C="00"+C),S.length%32!=0)throw"unknown ECDSA sig r length error";if(C.length%32!=0)throw"unknown ECDSA sig s length error";return S+C},j.crypto.ECDSA.concatSigToASN1Sig=function(v){if(v.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var m=v.substr(0,v.length/2),S=v.substr(v.length/2);return j.crypto.ECDSA.hexRSSigToASN1Sig(m,S)},j.crypto.ECDSA.hexRSSigToASN1Sig=function(v,m){var S=new $(v,16),C=new $(m,16);return j.crypto.ECDSA.biRSSigToASN1Sig(S,C)},j.crypto.ECDSA.biRSSigToASN1Sig=function(v,m){var S=j.asn1,C=new S.DERInteger({bigint:v}),H=new S.DERInteger({bigint:m});return new S.DERSequence({array:[C,H]}).getEncodedHex()},j.crypto.ECDSA.getName=function(v){return v==="2b8104001f"?"secp192k1":v==="2a8648ce3d030107"?"secp256r1":v==="2b8104000a"?"secp256k1":v==="2b81040021"?"secp224r1":v==="2b81040022"?"secp384r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(v)!==-1?"secp256r1":"|secp256k1|".indexOf(v)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(v)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(v)!==-1?"secp384r1":null},j!==void 0&&j||(a.KJUR=j={}),j.crypto!==void 0&&j.crypto||(j.crypto={}),j.crypto.ECParameterDB=new function(){var v={},m={};function S(C){return new $(C,16)}this.getByName=function(C){var H=C;if(m[H]!==void 0&&(H=m[C]),v[H]!==void 0)return v[H];throw"unregistered EC curve name: "+H},this.regist=function(C,H,X,oe,be,he,me,Ee,Ae,De,Ke,it){v[C]={};var gt=S(X),St=S(oe),ae=S(be),_e=S(he),Ie=S(me),Fe=new k(gt,St,ae),ct=Fe.decodePointHex("04"+Ee+Ae);v[C].name=C,v[C].keylen=H,v[C].curve=Fe,v[C].G=ct,v[C].n=_e,v[C].h=Ie,v[C].oid=Ke,v[C].info=it;for(var Et=0;Et<De.length;Et++)m[De[Et]]=C}},j.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),j.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),j.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),j.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),j.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),j.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),j.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),j.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),j.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),j.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Gt=function(){var v=function(me,Ee,Ae){return m(K.AES,me,Ee,Ae)},m=function(me,Ee,Ae,De){var Ke=K.enc.Hex.parse(Ee),it=K.enc.Hex.parse(Ae),gt=K.enc.Hex.parse(De),St={};St.key=it,St.iv=gt,St.ciphertext=Ke;var ae=me.decrypt(St,it,{iv:gt});return K.enc.Hex.stringify(ae)},S=function(me,Ee,Ae){return C(K.AES,me,Ee,Ae)},C=function(me,Ee,Ae,De){var Ke=K.enc.Hex.parse(Ee),it=K.enc.Hex.parse(Ae),gt=K.enc.Hex.parse(De),St=me.encrypt(Ke,it,{iv:gt}),ae=K.enc.Hex.parse(St.toString());return K.enc.Base64.stringify(ae)},H={"AES-256-CBC":{proc:v,eproc:S,keylen:32,ivlen:16},"AES-192-CBC":{proc:v,eproc:S,keylen:24,ivlen:16},"AES-128-CBC":{proc:v,eproc:S,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(me,Ee,Ae){return m(K.TripleDES,me,Ee,Ae)},eproc:function(me,Ee,Ae){return C(K.TripleDES,me,Ee,Ae)},keylen:24,ivlen:8},"DES-CBC":{proc:function(me,Ee,Ae){return m(K.DES,me,Ee,Ae)},eproc:function(me,Ee,Ae){return C(K.DES,me,Ee,Ae)},keylen:8,ivlen:8}},X=function(me){var Ee={},Ae=me.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Ae&&(Ee.cipher=Ae[1],Ee.ivsalt=Ae[2]);var De=me.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));De&&(Ee.type=De[1]);var Ke=-1,it=0;me.indexOf(`\r
\r
`)!=-1&&(Ke=me.indexOf(`\r
\r
`),it=2),me.indexOf(`

`)!=-1&&(Ke=me.indexOf(`

`),it=1);var gt=me.indexOf("-----END");if(Ke!=-1&&gt!=-1){var St=me.substring(Ke+2*it,gt-it);St=St.replace(/\s+/g,""),Ee.data=St}return Ee},oe=function(me,Ee,Ae){for(var De=Ae.substring(0,16),Ke=K.enc.Hex.parse(De),it=K.enc.Utf8.parse(Ee),gt=H[me].keylen+H[me].ivlen,St="",ae=null;;){var _e=K.algo.MD5.create();if(ae!=null&&_e.update(ae),_e.update(it),_e.update(Ke),ae=_e.finalize(),(St+=K.enc.Hex.stringify(ae)).length>=2*gt)break}var Ie={};return Ie.keyhex=St.substr(0,2*H[me].keylen),Ie.ivhex=St.substr(2*H[me].keylen,2*H[me].ivlen),Ie},be=function(me,Ee,Ae,De){var Ke=K.enc.Base64.parse(me),it=K.enc.Hex.stringify(Ke);return(0,H[Ee].proc)(it,Ae,De)};return{version:"1.0.0",parsePKCS5PEM:function(me){return X(me)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(me,Ee,Ae){return oe(me,Ee,Ae)},decryptKeyB64:function(me,Ee,Ae,De){return be(me,Ee,Ae,De)},getDecryptedKeyHex:function(me,Ee){var Ae=X(me),De=(Ae.type,Ae.cipher),Ke=Ae.ivsalt,it=Ae.data,gt=oe(De,Ee,Ke).keyhex;return be(it,De,gt,Ke)},getEncryptedPKCS5PEMFromPrvKeyHex:function(me,Ee,Ae,De,Ke){var it="";if(De!==void 0&&De!=null||(De="AES-256-CBC"),H[De]===void 0)throw new Error("KEYUTIL unsupported algorithm: "+De);Ke!==void 0&&Ke!=null||(Ke=function(ae){var _e=K.lib.WordArray.random(ae);return K.enc.Hex.stringify(_e)}(H[De].ivlen).toUpperCase());var gt=function(ae,_e,Ie,Fe){return(0,H[_e].eproc)(ae,Ie,Fe)}(Ee,De,oe(De,Ae,Ke).keyhex,Ke);return it="-----BEGIN "+me+` PRIVATE KEY-----\r
`,it+=`Proc-Type: 4,ENCRYPTED\r
`,it+="DEK-Info: "+De+","+Ke+`\r
`,it+=`\r
`,it+=gt.replace(/(.{64})/g,`$1\r
`),it+=`\r
-----END `+me+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(me){var Ee=ze,Ae=Ee.getChildIdx,De=Ee.getV,Ke={},it=Ae(me,0);if(it.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+it.length);Ke.ciphertext=De(me,it[1]);var gt=Ae(me,it[0]);if(gt.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+gt.length);if(De(me,gt[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var St=Ae(me,gt[1]);if(gt.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+St.length);var ae=Ae(me,St[1]);if(ae.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+ae.length);if(De(me,ae[0])!="2a864886f70d0307")throw"this only supports TripleDES";Ke.encryptionSchemeAlg="TripleDES",Ke.encryptionSchemeIV=De(me,ae[1]);var _e=Ae(me,St[0]);if(_e.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+_e.length);if(De(me,_e[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var Ie=Ae(me,_e[1]);if(Ie.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Ie.length);Ke.pbkdf2Salt=De(me,Ie[0]);var Fe=De(me,Ie[1]);try{Ke.pbkdf2Iter=parseInt(Fe,16)}catch{throw new Error("malformed format pbkdf2Iter: "+Fe)}return Ke},getPBKDF2KeyHexFromParam:function(me,Ee){var Ae=K.enc.Hex.parse(me.pbkdf2Salt),De=me.pbkdf2Iter,Ke=K.PBKDF2(Ee,Ae,{keySize:6,iterations:De});return K.enc.Hex.stringify(Ke)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(me,Ee){var Ae=xt(me,"ENCRYPTED PRIVATE KEY"),De=this.parseHexOfEncryptedPKCS8(Ae),Ke=Gt.getPBKDF2KeyHexFromParam(De,Ee),it={};it.ciphertext=K.enc.Hex.parse(De.ciphertext);var gt=K.enc.Hex.parse(Ke),St=K.enc.Hex.parse(De.encryptionSchemeIV),ae=K.TripleDES.decrypt(it,gt,{iv:St});return K.enc.Hex.stringify(ae)},getKeyFromEncryptedPKCS8PEM:function(me,Ee){var Ae=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(me,Ee);return this.getKeyFromPlainPrivatePKCS8Hex(Ae)},parsePlainPrivatePKCS8Hex:function(me){var Ee=ze,Ae=Ee.getChildIdx,De=Ee.getV,Ke={algparam:null};if(me.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var it=Ae(me,0);if(it.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(me.substr(it[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var gt=Ae(me,it[1]);if(gt.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(me.substr(gt[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(Ke.algoid=De(me,gt[0]),me.substr(gt[1],2)=="06"&&(Ke.algparam=De(me,gt[1])),me.substr(it[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return Ke.keyidx=Ee.getVidx(me,it[2]),Ke},getKeyFromPlainPrivatePKCS8PEM:function(me){var Ee=xt(me,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(Ee)},getKeyFromPlainPrivatePKCS8Hex:function(me){var Ee,Ae=this.parsePlainPrivatePKCS8Hex(me);if(Ae.algoid=="2a864886f70d010101")Ee=new Oe;else if(Ae.algoid=="2a8648ce380401")Ee=new j.crypto.DSA;else{if(Ae.algoid!="2a8648ce3d0201")throw new Error("unsupported private key algorithm");Ee=new j.crypto.ECDSA}return Ee.readPKCS8PrvKeyHex(me),Ee},_getKeyFromPublicPKCS8Hex:function(me){var Ee,Ae=ze.getVbyList(me,0,[0,0],"06");if(Ae==="2a864886f70d010101")Ee=new Oe;else if(Ae==="2a8648ce380401")Ee=new j.crypto.DSA;else{if(Ae!=="2a8648ce3d0201")throw new Error("unsupported PKCS#8 public key hex");Ee=new j.crypto.ECDSA}return Ee.readPKCS8PubKeyHex(me),Ee},parsePublicRawRSAKeyHex:function(me){var Ee=ze,Ae=Ee.getChildIdx,De=Ee.getV,Ke={};if(me.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var it=Ae(me,0);if(it.length!=2)throw new Error("malformed RSA key(code:002)");if(me.substr(it[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(Ke.n=De(me,it[0]),me.substr(it[1],2)!="02")throw new Error("malformed RSA key(code:004)");return Ke.e=De(me,it[1]),Ke},parsePublicPKCS8Hex:function(me){var Ee=ze,Ae=Ee.getChildIdx,De=Ee.getV,Ke={algparam:null},it=Ae(me,0);if(it.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+it.length);var gt=it[0];if(me.substr(gt,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var St=Ae(me,gt);if(St.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(me.substr(St[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(Ke.algoid=De(me,St[0]),me.substr(St[1],2)=="06"?Ke.algparam=De(me,St[1]):me.substr(St[1],2)=="30"&&(Ke.algparam={},Ke.algparam.p=Ee.getVbyList(me,St[1],[0],"02"),Ke.algparam.q=Ee.getVbyList(me,St[1],[1],"02"),Ke.algparam.g=Ee.getVbyList(me,St[1],[2],"02")),me.substr(it[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return Ke.key=De(me,it[1]).substr(2),Ke}}}();Gt.getKey=function(v,m,S){var C=(St=ze).getChildIdx,H=(St.getV,St.getVbyList),X=j.crypto,oe=X.ECDSA,be=X.DSA,he=Oe,me=xt,Ee=Gt;if(he!==void 0&&v instanceof he||oe!==void 0&&v instanceof oe||be!==void 0&&v instanceof be)return v;if(v.curve!==void 0&&v.xy!==void 0&&v.d===void 0)return new oe({pub:v.xy,curve:v.curve});if(v.curve!==void 0&&v.d!==void 0)return new oe({prv:v.d,curve:v.curve});if(v.kty===void 0&&v.n!==void 0&&v.e!==void 0&&v.d===void 0)return(pr=new he).setPublic(v.n,v.e),pr;if(v.kty===void 0&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0&&v.p!==void 0&&v.q!==void 0&&v.dp!==void 0&&v.dq!==void 0&&v.co!==void 0&&v.qi===void 0)return(pr=new he).setPrivateEx(v.n,v.e,v.d,v.p,v.q,v.dp,v.dq,v.co),pr;if(v.kty===void 0&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0&&v.p===void 0)return(pr=new he).setPrivate(v.n,v.e,v.d),pr;if(v.p!==void 0&&v.q!==void 0&&v.g!==void 0&&v.y!==void 0&&v.x===void 0)return(pr=new be).setPublic(v.p,v.q,v.g,v.y),pr;if(v.p!==void 0&&v.q!==void 0&&v.g!==void 0&&v.y!==void 0&&v.x!==void 0)return(pr=new be).setPrivate(v.p,v.q,v.g,v.y,v.x),pr;if(v.kty==="RSA"&&v.n!==void 0&&v.e!==void 0&&v.d===void 0)return(pr=new he).setPublic(Le(v.n),Le(v.e)),pr;if(v.kty==="RSA"&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0&&v.p!==void 0&&v.q!==void 0&&v.dp!==void 0&&v.dq!==void 0&&v.qi!==void 0)return(pr=new he).setPrivateEx(Le(v.n),Le(v.e),Le(v.d),Le(v.p),Le(v.q),Le(v.dp),Le(v.dq),Le(v.qi)),pr;if(v.kty==="RSA"&&v.n!==void 0&&v.e!==void 0&&v.d!==void 0)return(pr=new he).setPrivate(Le(v.n),Le(v.e),Le(v.d)),pr;if(v.kty==="EC"&&v.crv!==void 0&&v.x!==void 0&&v.y!==void 0&&v.d===void 0){var Ae=(lr=new oe({curve:v.crv})).ecparams.keylen/4,De="04"+("0000000000"+Le(v.x)).slice(-Ae)+("0000000000"+Le(v.y)).slice(-Ae);return lr.setPublicKeyHex(De),lr}if(v.kty==="EC"&&v.crv!==void 0&&v.x!==void 0&&v.y!==void 0&&v.d!==void 0){Ae=(lr=new oe({curve:v.crv})).ecparams.keylen/4,De="04"+("0000000000"+Le(v.x)).slice(-Ae)+("0000000000"+Le(v.y)).slice(-Ae);var Ke=("0000000000"+Le(v.d)).slice(-Ae);return lr.setPublicKeyHex(De),lr.setPrivateKeyHex(Ke),lr}if(S==="pkcs5prv"){var it,gt=v,St=ze;if((it=C(gt,0)).length===9)(pr=new he).readPKCS5PrvKeyHex(gt);else if(it.length===6)(pr=new be).readPKCS5PrvKeyHex(gt);else{if(!(it.length>2&&gt.substr(it[1],2)==="04"))throw new Error("unsupported PKCS#1/5 hexadecimal key");(pr=new oe).readPKCS5PrvKeyHex(gt)}return pr}if(S==="pkcs8prv")return pr=Ee.getKeyFromPlainPrivatePKCS8Hex(v);if(S==="pkcs8pub")return Ee._getKeyFromPublicPKCS8Hex(v);if(S==="x509pub")return Ur.getPublicKeyFromCertHex(v);if(v.indexOf("-END CERTIFICATE-",0)!=-1||v.indexOf("-END X509 CERTIFICATE-",0)!=-1||v.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Ur.getPublicKeyFromCertPEM(v);if(v.indexOf("-END PUBLIC KEY-")!=-1){var ae=xt(v,"PUBLIC KEY");return Ee._getKeyFromPublicPKCS8Hex(ae)}if(v.indexOf("-END RSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")==-1){var _e=me(v,"RSA PRIVATE KEY");return Ee.getKey(_e,null,"pkcs5prv")}if(v.indexOf("-END DSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")==-1){var Ie=H(rn=me(v,"DSA PRIVATE KEY"),0,[1],"02"),Fe=H(rn,0,[2],"02"),ct=H(rn,0,[3],"02"),Et=H(rn,0,[4],"02"),fr=H(rn,0,[5],"02");return(pr=new be).setPrivate(new $(Ie,16),new $(Fe,16),new $(ct,16),new $(Et,16),new $(fr,16)),pr}if(v.indexOf("-END EC PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")==-1)return _e=me(v,"EC PRIVATE KEY"),Ee.getKey(_e,null,"pkcs5prv");if(v.indexOf("-END PRIVATE KEY-")!=-1)return Ee.getKeyFromPlainPrivatePKCS8PEM(v);if(v.indexOf("-END RSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")!=-1){var Ht=Ee.getDecryptedKeyHex(v,m),qr=new Oe;return qr.readPKCS5PrvKeyHex(Ht),qr}if(v.indexOf("-END EC PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")!=-1){var lr,pr=H(rn=Ee.getDecryptedKeyHex(v,m),0,[1],"04"),tn=H(rn,0,[2,0],"06"),dr=H(rn,0,[3,0],"03").substr(2);if(j.crypto.OID.oidhex2name[tn]===void 0)throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+tn);return(lr=new oe({curve:j.crypto.OID.oidhex2name[tn]})).setPublicKeyHex(dr),lr.setPrivateKeyHex(pr),lr.isPublic=!1,lr}if(v.indexOf("-END DSA PRIVATE KEY-")!=-1&&v.indexOf("4,ENCRYPTED")!=-1){var rn;return Ie=H(rn=Ee.getDecryptedKeyHex(v,m),0,[1],"02"),Fe=H(rn,0,[2],"02"),ct=H(rn,0,[3],"02"),Et=H(rn,0,[4],"02"),fr=H(rn,0,[5],"02"),(pr=new be).setPrivate(new $(Ie,16),new $(Fe,16),new $(ct,16),new $(Et,16),new $(fr,16)),pr}if(v.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return Ee.getKeyFromEncryptedPKCS8PEM(v,m);throw new Error("not supported argument")},Gt.generateKeypair=function(v,m){if(v=="RSA"){var S=m;(oe=new Oe).generate(S,"10001"),oe.isPrivate=!0,oe.isPublic=!0;var C=new Oe,H=oe.n.toString(16),X=oe.e.toString(16);return C.setPublic(H,X),C.isPrivate=!1,C.isPublic=!0,(be={}).prvKeyObj=oe,be.pubKeyObj=C,be}if(v=="EC"){var oe,be,he=m,me=new j.crypto.ECDSA({curve:he}).generateKeyPairHex();return(oe=new j.crypto.ECDSA({curve:he})).setPublicKeyHex(me.ecpubhex),oe.setPrivateKeyHex(me.ecprvhex),oe.isPrivate=!0,oe.isPublic=!1,(C=new j.crypto.ECDSA({curve:he})).setPublicKeyHex(me.ecpubhex),C.isPrivate=!1,C.isPublic=!0,(be={}).prvKeyObj=oe,be.pubKeyObj=C,be}throw new Error("unknown algorithm: "+v)},Gt.getPEM=function(v,m,S,C,H,X){var oe=j,be=oe.asn1,he=be.DERObjectIdentifier,me=be.DERInteger,Ee=be.ASN1Util.newObject,Ae=be.x509.SubjectPublicKeyInfo,De=oe.crypto,Ke=De.DSA,it=De.ECDSA,gt=Oe;function St(lr){return Ee({seq:[{int:0},{int:{bigint:lr.n}},{int:lr.e},{int:{bigint:lr.d}},{int:{bigint:lr.p}},{int:{bigint:lr.q}},{int:{bigint:lr.dmp1}},{int:{bigint:lr.dmq1}},{int:{bigint:lr.coeff}}]})}function ae(lr){return Ee({seq:[{int:1},{octstr:{hex:lr.prvKeyHex}},{tag:["a0",!0,{oid:{name:lr.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+lr.pubKeyHex}}]}]})}function _e(lr){return Ee({seq:[{int:0},{int:{bigint:lr.p}},{int:{bigint:lr.q}},{int:{bigint:lr.g}},{int:{bigint:lr.y}},{int:{bigint:lr.x}}]})}if((gt!==void 0&&v instanceof gt||Ke!==void 0&&v instanceof Ke||it!==void 0&&v instanceof it)&&v.isPublic==1&&(m===void 0||m=="PKCS8PUB"))return Tt(Et=new Ae(v).getEncodedHex(),"PUBLIC KEY");if(m=="PKCS1PRV"&&gt!==void 0&&v instanceof gt&&(S===void 0||S==null)&&v.isPrivate==1)return Tt(Et=St(v).getEncodedHex(),"RSA PRIVATE KEY");if(m=="PKCS1PRV"&&it!==void 0&&v instanceof it&&(S===void 0||S==null)&&v.isPrivate==1){var Ie=new he({name:v.curveName}).getEncodedHex(),Fe=ae(v).getEncodedHex(),ct="";return ct+=Tt(Ie,"EC PARAMETERS"),ct+=Tt(Fe,"EC PRIVATE KEY")}if(m=="PKCS1PRV"&&Ke!==void 0&&v instanceof Ke&&(S===void 0||S==null)&&v.isPrivate==1)return Tt(Et=_e(v).getEncodedHex(),"DSA PRIVATE KEY");if(m=="PKCS5PRV"&&gt!==void 0&&v instanceof gt&&S!==void 0&&S!=null&&v.isPrivate==1){var Et=St(v).getEncodedHex();return C===void 0&&(C="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",Et,S,C,X)}if(m=="PKCS5PRV"&&it!==void 0&&v instanceof it&&S!==void 0&&S!=null&&v.isPrivate==1)return Et=ae(v).getEncodedHex(),C===void 0&&(C="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",Et,S,C,X);if(m=="PKCS5PRV"&&Ke!==void 0&&v instanceof Ke&&S!==void 0&&S!=null&&v.isPrivate==1)return Et=_e(v).getEncodedHex(),C===void 0&&(C="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",Et,S,C,X);var fr=function(pr,tn){var dr=Ht(pr,tn);return new Ee({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:dr.pbkdf2Salt}},{int:dr.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:dr.encryptionSchemeIV}}]}]}]},{octstr:{hex:dr.ciphertext}}]}).getEncodedHex()},Ht=function(pr,tn){var dr=K.lib.WordArray.random(8),rn=K.lib.WordArray.random(8),Zr=K.PBKDF2(tn,dr,{keySize:6,iterations:100}),Cn=K.enc.Hex.parse(pr),Qr=K.TripleDES.encrypt(Cn,Zr,{iv:rn})+"",en={};return en.ciphertext=Qr,en.pbkdf2Salt=K.enc.Hex.stringify(dr),en.pbkdf2Iter=100,en.encryptionSchemeAlg="DES-EDE3-CBC",en.encryptionSchemeIV=K.enc.Hex.stringify(rn),en};if(m=="PKCS8PRV"&&gt!=null&&v instanceof gt&&v.isPrivate==1){var qr=St(v).getEncodedHex();return Et=Ee({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:qr}}]}).getEncodedHex(),S===void 0||S==null?Tt(Et,"PRIVATE KEY"):Tt(Fe=fr(Et,S),"ENCRYPTED PRIVATE KEY")}if(m=="PKCS8PRV"&&it!==void 0&&v instanceof it&&v.isPrivate==1)return qr=new Ee({seq:[{int:1},{octstr:{hex:v.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+v.pubKeyHex}}]}]}).getEncodedHex(),Et=Ee({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:v.curveName}}]},{octstr:{hex:qr}}]}).getEncodedHex(),S===void 0||S==null?Tt(Et,"PRIVATE KEY"):Tt(Fe=fr(Et,S),"ENCRYPTED PRIVATE KEY");if(m=="PKCS8PRV"&&Ke!==void 0&&v instanceof Ke&&v.isPrivate==1)return qr=new me({bigint:v.x}).getEncodedHex(),Et=Ee({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:v.p}},{int:{bigint:v.q}},{int:{bigint:v.g}}]}]},{octstr:{hex:qr}}]}).getEncodedHex(),S===void 0||S==null?Tt(Et,"PRIVATE KEY"):Tt(Fe=fr(Et,S),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Gt.getKeyFromCSRPEM=function(v){var m=xt(v,"CERTIFICATE REQUEST");return Gt.getKeyFromCSRHex(m)},Gt.getKeyFromCSRHex=function(v){var m=Gt.parseCSRHex(v);return Gt.getKey(m.p8pubkeyhex,null,"pkcs8pub")},Gt.parseCSRHex=function(v){var m=ze,S=m.getChildIdx,C=m.getTLV,H={},X=v;if(X.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var oe=S(X,0);if(oe.length<1)throw new Error("malformed CSR(code:002)");if(X.substr(oe[0],2)!="30")throw new Error("malformed CSR(code:003)");var be=S(X,oe[0]);if(be.length<3)throw new Error("malformed CSR(code:004)");return H.p8pubkeyhex=C(X,be[2]),H},Gt.getKeyID=function(v){var m=Gt,S=ze;typeof v=="string"&&v.indexOf("BEGIN ")!=-1&&(v=m.getKey(v));var C=xt(m.getPEM(v)),H=S.getIdxbyList(C,0,[1]),X=S.getV(C,H).substring(2);return j.crypto.Util.hashHex(X,"sha1")},Gt.getJWKFromKey=function(v){var m={};if(v instanceof Oe&&v.isPrivate)return m.kty="RSA",m.n=st(v.n.toString(16)),m.e=st(v.e.toString(16)),m.d=st(v.d.toString(16)),m.p=st(v.p.toString(16)),m.q=st(v.q.toString(16)),m.dp=st(v.dmp1.toString(16)),m.dq=st(v.dmq1.toString(16)),m.qi=st(v.coeff.toString(16)),m;if(v instanceof Oe&&v.isPublic)return m.kty="RSA",m.n=st(v.n.toString(16)),m.e=st(v.e.toString(16)),m;if(v instanceof j.crypto.ECDSA&&v.isPrivate){if((C=v.getShortNISTPCurveName())!=="P-256"&&C!=="P-384")throw new Error("unsupported curve name for JWT: "+C);var S=v.getPublicKeyXYHex();return m.kty="EC",m.crv=C,m.x=st(S.x),m.y=st(S.y),m.d=st(v.prvKeyHex),m}if(v instanceof j.crypto.ECDSA&&v.isPublic){var C;if((C=v.getShortNISTPCurveName())!=="P-256"&&C!=="P-384")throw new Error("unsupported curve name for JWT: "+C);return S=v.getPublicKeyXYHex(),m.kty="EC",m.crv=C,m.x=st(S.x),m.y=st(S.y),m}throw new Error("not supported key object")},Oe.getPosArrayOfChildrenFromHex=function(v){return ze.getChildIdx(v,0)},Oe.getHexValueArrayOfChildrenFromHex=function(v){var m,S=ze.getV,C=S(v,(m=Oe.getPosArrayOfChildrenFromHex(v))[0]),H=S(v,m[1]),X=S(v,m[2]),oe=S(v,m[3]),be=S(v,m[4]),he=S(v,m[5]),me=S(v,m[6]),Ee=S(v,m[7]),Ae=S(v,m[8]);return(m=new Array).push(C,H,X,oe,be,he,me,Ee,Ae),m},Oe.prototype.readPrivateKeyFromPEMString=function(v){var m=xt(v),S=Oe.getHexValueArrayOfChildrenFromHex(m);this.setPrivateEx(S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8])},Oe.prototype.readPKCS5PrvKeyHex=function(v){var m=Oe.getHexValueArrayOfChildrenFromHex(v);this.setPrivateEx(m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8])},Oe.prototype.readPKCS8PrvKeyHex=function(v){var m,S,C,H,X,oe,be,he,me=ze,Ee=me.getVbyListEx;if(me.isASN1HEX(v)===!1)throw new Error("not ASN.1 hex string");try{m=Ee(v,0,[2,0,1],"02"),S=Ee(v,0,[2,0,2],"02"),C=Ee(v,0,[2,0,3],"02"),H=Ee(v,0,[2,0,4],"02"),X=Ee(v,0,[2,0,5],"02"),oe=Ee(v,0,[2,0,6],"02"),be=Ee(v,0,[2,0,7],"02"),he=Ee(v,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(m,S,C,H,X,oe,be,he)},Oe.prototype.readPKCS5PubKeyHex=function(v){var m=ze,S=m.getV;if(m.isASN1HEX(v)===!1)throw new Error("keyHex is not ASN.1 hex string");var C=m.getChildIdx(v,0);if(C.length!==2||v.substr(C[0],2)!=="02"||v.substr(C[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var H=S(v,C[0]),X=S(v,C[1]);this.setPublic(H,X)},Oe.prototype.readPKCS8PubKeyHex=function(v){var m=ze;if(m.isASN1HEX(v)===!1)throw new Error("not ASN.1 hex string");if(m.getTLVbyListEx(v,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var S=m.getTLVbyListEx(v,0,[1,0]);this.readPKCS5PubKeyHex(S)},Oe.prototype.readCertPubKeyHex=function(v,m){var S,C;(S=new Ur).readCertHex(v),C=S.getPublicKeyHex(),this.readPKCS8PubKeyHex(C)};function Yr(v,m){for(var S="",C=m/4-v.length,H=0;H<C;H++)S+="0";return S+v}function Tn(v,m,S){for(var C="",H=0;C.length<m;)C+=zt(S(tr(v+String.fromCharCode.apply(String,[(4278190080&H)>>24,(16711680&H)>>16,(65280&H)>>8,255&H])))),H+=1;return C}function cn(v){for(var m in j.crypto.Util.DIGESTINFOHEAD){var S=j.crypto.Util.DIGESTINFOHEAD[m],C=S.length;if(v.substring(0,C)==S)return[m,v.substring(C)]}return[]}function Ur(v){var m,S=ze,C=S.getChildIdx,H=S.getV,X=S.getTLV,oe=S.getVbyList,be=S.getVbyListEx,he=S.getTLVbyList,me=S.getTLVbyListEx,Ee=S.getIdxbyList,Ae=S.getIdxbyListEx,De=S.getVidx,Ke=S.getInt,it=S.oidname,gt=S.hextooidstr,St=xt;try{m=j.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var ae=he(this.hex,0,[0,0]);if(ae.substr(0,2)=="a0"){var _e=he(ae,0,[0]),Ie=Ke(_e,0);if(Ie<0||2<Ie)throw new Error("malformed version field");return this.version=Ie+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return be(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var ae=me(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(ae)},this.getAlgorithmIdentifierName=function(ae){for(var _e in m)if(ae===m[_e])return _e;return it(be(ae,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return he(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return he(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var ae=oe(this.hex,0,[0,4+this.foffset,0]);return ae=ae.replace(/(..)/g,"%$1"),ae=decodeURIComponent(ae)},this.getNotAfter=function(){var ae=oe(this.hex,0,[0,4+this.foffset,1]);return ae=ae.replace(/(..)/g,"%$1"),ae=decodeURIComponent(ae)},this.getPublicKeyHex=function(){return S.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return Ee(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var ae=this.getPublicKeyIdx();return Ee(this.hex,ae,[1,0],"30")},this.getPublicKey=function(){return Gt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var ae=he(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(ae)},this.getSignatureValueHex=function(){return oe(this.hex,0,[2],"03",!0)},this.verifySignature=function(ae){var _e=this.getSignatureAlgorithmField(),Ie=this.getSignatureValueHex(),Fe=he(this.hex,0,[0],"30"),ct=new j.crypto.Signature({alg:_e});return ct.init(ae),ct.updateHex(Fe),ct.verify(Ie)},this.parseExt=function(ae){var _e,Ie,Fe;if(ae===void 0){if(Fe=this.hex,this.version!==3)return-1;_e=Ee(Fe,0,[0,7,0],"30"),Ie=C(Fe,_e)}else{Fe=xt(ae);var ct=Ee(Fe,0,[0,3,0,0],"06");if(H(Fe,ct)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);_e=Ee(Fe,0,[0,3,0,1,0],"30"),Ie=C(Fe,_e),this.hex=Fe}this.aExtInfo=new Array;for(var Et=0;Et<Ie.length;Et++){var fr={critical:!1},Ht=0;C(Fe,Ie[Et]).length===3&&(fr.critical=!0,Ht=1),fr.oid=S.hextooidstr(oe(Fe,Ie[Et],[0],"06"));var qr=Ee(Fe,Ie[Et],[1+Ht]);fr.vidx=De(Fe,qr),this.aExtInfo.push(fr)}},this.getExtInfo=function(ae){var _e=this.aExtInfo,Ie=ae;if(ae.match(/^[0-9.]+$/)||(Ie=j.asn1.x509.OID.name2oid(ae)),Ie!==""){for(var Fe=0;Fe<_e.length;Fe++)if(_e[Fe].oid===Ie)return _e[Fe]}},this.getExtBasicConstraints=function(ae,_e){if(ae===void 0&&_e===void 0){var Ie=this.getExtInfo("basicConstraints");if(Ie===void 0)return;ae=X(this.hex,Ie.vidx),_e=Ie.critical}var Fe={extname:"basicConstraints"};if(_e&&(Fe.critical=!0),ae==="3000")return Fe;if(ae==="30030101ff")return Fe.cA=!0,Fe;if(ae.substr(0,12)==="30060101ff02"){var ct=H(ae,10),Et=parseInt(ct,16);return Fe.cA=!0,Fe.pathLen=Et,Fe}throw new Error("hExtV parse error: "+ae)},this.getExtKeyUsage=function(ae,_e){if(ae===void 0&&_e===void 0){var Ie=this.getExtInfo("keyUsage");if(Ie===void 0)return;ae=X(this.hex,Ie.vidx),_e=Ie.critical}var Fe={extname:"keyUsage"};return _e&&(Fe.critical=!0),Fe.names=this.getExtKeyUsageString(ae).split(","),Fe},this.getExtKeyUsageBin=function(ae){if(ae===void 0){var _e=this.getExtInfo("keyUsage");if(_e===void 0)return"";ae=X(this.hex,_e.vidx)}if(ae.length!=8&&ae.length!=10)throw new Error("malformed key usage value: "+ae);var Ie="000000000000000"+parseInt(ae.substr(6),16).toString(2);return ae.length==8&&(Ie=Ie.slice(-8)),ae.length==10&&(Ie=Ie.slice(-16)),(Ie=Ie.replace(/0+$/,""))==""&&(Ie="0"),Ie},this.getExtKeyUsageString=function(ae){for(var _e=this.getExtKeyUsageBin(ae),Ie=new Array,Fe=0;Fe<_e.length;Fe++)_e.substr(Fe,1)=="1"&&Ie.push(Ur.KEYUSAGE_NAME[Fe]);return Ie.join(",")},this.getExtSubjectKeyIdentifier=function(ae,_e){if(ae===void 0&&_e===void 0){var Ie=this.getExtInfo("subjectKeyIdentifier");if(Ie===void 0)return;ae=X(this.hex,Ie.vidx),_e=Ie.critical}var Fe={extname:"subjectKeyIdentifier"};_e&&(Fe.critical=!0);var ct=H(ae,0);return Fe.kid={hex:ct},Fe},this.getExtAuthorityKeyIdentifier=function(ae,_e){if(ae===void 0&&_e===void 0){var Ie=this.getExtInfo("authorityKeyIdentifier");if(Ie===void 0)return;ae=X(this.hex,Ie.vidx),_e=Ie.critical}var Fe={extname:"authorityKeyIdentifier"};_e&&(Fe.critical=!0);for(var ct=C(ae,0),Et=0;Et<ct.length;Et++){var fr=ae.substr(ct[Et],2);if(fr==="80"&&(Fe.kid={hex:H(ae,ct[Et])}),fr==="a1"){var Ht=X(ae,ct[Et]),qr=this.getGeneralNames(Ht);Fe.issuer=qr[0].dn}fr==="82"&&(Fe.sn={hex:H(ae,ct[Et])})}return Fe},this.getExtExtKeyUsage=function(ae,_e){if(ae===void 0&&_e===void 0){var Ie=this.getExtInfo("extKeyUsage");if(Ie===void 0)return;ae=X(this.hex,Ie.vidx),_e=Ie.critical}var Fe={extname:"extKeyUsage",array:[]};_e&&(Fe.critical=!0);for(var ct=C(ae,0),Et=0;Et<ct.length;Et++)Fe.array.push(it(H(ae,ct[Et])));return Fe},this.getExtExtKeyUsageName=function(){var ae=this.getExtInfo("extKeyUsage");if(ae===void 0)return ae;var _e=new Array,Ie=X(this.hex,ae.vidx);if(Ie==="")return _e;for(var Fe=C(Ie,0),ct=0;ct<Fe.length;ct++)_e.push(it(H(Ie,Fe[ct])));return _e},this.getExtSubjectAltName=function(ae,_e){if(ae===void 0&&_e===void 0){var Ie=this.getExtInfo("subjectAltName");if(Ie===void 0)return;ae=X(this.hex,Ie.vidx),_e=Ie.critical}var Fe={extname:"subjectAltName",array:[]};return _e&&(Fe.critical=!0),Fe.array=this.getGeneralNames(ae),Fe},this.getExtIssuerAltName=function(ae,_e){if(ae===void 0&&_e===void 0){var Ie=this.getExtInfo("issuerAltName");if(Ie===void 0)return;ae=X(this.hex,Ie.vidx),_e=Ie.critical}var Fe={extname:"issuerAltName",array:[]};return _e&&(Fe.critical=!0),Fe.array=this.getGeneralNames(ae),Fe},this.getGeneralNames=function(ae){for(var _e=C(ae,0),Ie=[],Fe=0;Fe<_e.length;Fe++){var ct=this.getGeneralName(X(ae,_e[Fe]));ct!==void 0&&Ie.push(ct)}return Ie},this.getGeneralName=function(ae){var _e=ae.substr(0,2),Ie=H(ae,0),Fe=zt(Ie);return _e=="81"?{rfc822:Fe}:_e=="82"?{dns:Fe}:_e=="86"?{uri:Fe}:_e=="87"?{ip:mr(Ie)}:_e=="a4"?{dn:this.getX500Name(Ie)}:void 0},this.getExtSubjectAltName2=function(){var ae,_e,Ie,Fe=this.getExtInfo("subjectAltName");if(Fe===void 0)return Fe;for(var ct=new Array,Et=X(this.hex,Fe.vidx),fr=C(Et,0),Ht=0;Ht<fr.length;Ht++)Ie=Et.substr(fr[Ht],2),ae=H(Et,fr[Ht]),Ie==="81"&&(_e=Xt(ae),ct.push(["MAIL",_e])),Ie==="82"&&(_e=Xt(ae),ct.push(["DNS",_e])),Ie==="84"&&(_e=Ur.hex2dn(ae,0),ct.push(["DN",_e])),Ie==="86"&&(_e=Xt(ae),ct.push(["URI",_e])),Ie==="87"&&(_e=mr(ae),ct.push(["IP",_e]));return ct},this.getExtCRLDistributionPoints=function(ae,_e){if(ae===void 0&&_e===void 0){var Ie=this.getExtInfo("cRLDistributionPoints");if(Ie===void 0)return;ae=X(this.hex,Ie.vidx),_e=Ie.critical}var Fe={extname:"cRLDistributionPoints",array:[]};_e&&(Fe.critical=!0);for(var ct=C(ae,0),Et=0;Et<ct.length;Et++){var fr=X(ae,ct[Et]);Fe.array.push(this.getDistributionPoint(fr))}return Fe},this.getDistributionPoint=function(ae){for(var _e={},Ie=C(ae,0),Fe=0;Fe<Ie.length;Fe++){var ct=ae.substr(Ie[Fe],2),Et=X(ae,Ie[Fe]);ct=="a0"&&(_e.dpname=this.getDistributionPointName(Et))}return _e},this.getDistributionPointName=function(ae){for(var _e={},Ie=C(ae,0),Fe=0;Fe<Ie.length;Fe++){var ct=ae.substr(Ie[Fe],2),Et=X(ae,Ie[Fe]);ct=="a0"&&(_e.full=this.getGeneralNames(Et))}return _e},this.getExtCRLDistributionPointsURI=function(){var ae=this.getExtInfo("cRLDistributionPoints");if(ae===void 0)return ae;for(var _e=new Array,Ie=C(this.hex,ae.vidx),Fe=0;Fe<Ie.length;Fe++)try{var ct=Xt(oe(this.hex,Ie[Fe],[0,0,0],"86"));_e.push(ct)}catch{}return _e},this.getExtAIAInfo=function(){var ae=this.getExtInfo("authorityInfoAccess");if(ae===void 0)return ae;for(var _e={ocsp:[],caissuer:[]},Ie=C(this.hex,ae.vidx),Fe=0;Fe<Ie.length;Fe++){var ct=oe(this.hex,Ie[Fe],[0],"06"),Et=oe(this.hex,Ie[Fe],[1],"86");ct==="2b06010505073001"&&_e.ocsp.push(Xt(Et)),ct==="2b06010505073002"&&_e.caissuer.push(Xt(Et))}return _e},this.getExtAuthorityInfoAccess=function(ae,_e){if(ae===void 0&&_e===void 0){var Ie=this.getExtInfo("authorityInfoAccess");if(Ie===void 0)return;ae=X(this.hex,Ie.vidx),_e=Ie.critical}var Fe={extname:"authorityInfoAccess",array:[]};_e&&(Fe.critical=!0);for(var ct=C(ae,0),Et=0;Et<ct.length;Et++){var fr=be(ae,ct[Et],[0],"06"),Ht=Xt(oe(ae,ct[Et],[1],"86"));if(fr=="2b06010505073001")Fe.array.push({ocsp:Ht});else{if(fr!="2b06010505073002")throw new Error("unknown method: "+fr);Fe.array.push({caissuer:Ht})}}return Fe},this.getExtCertificatePolicies=function(ae,_e){if(ae===void 0&&_e===void 0){var Ie=this.getExtInfo("certificatePolicies");if(Ie===void 0)return;ae=X(this.hex,Ie.vidx),_e=Ie.critical}var Fe={extname:"certificatePolicies",array:[]};_e&&(Fe.critical=!0);for(var ct=C(ae,0),Et=0;Et<ct.length;Et++){var fr=X(ae,ct[Et]),Ht=this.getPolicyInformation(fr);Fe.array.push(Ht)}return Fe},this.getPolicyInformation=function(ae){var _e={},Ie=oe(ae,0,[0],"06");_e.policyoid=it(Ie);var Fe=Ae(ae,0,[1],"30");if(Fe!=-1){_e.array=[];for(var ct=C(ae,Fe),Et=0;Et<ct.length;Et++){var fr=X(ae,ct[Et]),Ht=this.getPolicyQualifierInfo(fr);_e.array.push(Ht)}}return _e},this.getPolicyQualifierInfo=function(ae){var _e={},Ie=oe(ae,0,[0],"06");if(Ie==="2b06010505070201"){var Fe=be(ae,0,[1],"16");_e.cps=zt(Fe)}else if(Ie==="2b06010505070202"){var ct=he(ae,0,[1],"30");_e.unotice=this.getUserNotice(ct)}return _e},this.getUserNotice=function(ae){for(var _e={},Ie=C(ae,0),Fe=0;Fe<Ie.length;Fe++){var ct=X(ae,Ie[Fe]);ct.substr(0,2)!="30"&&(_e.exptext=this.getDisplayText(ct))}return _e},this.getDisplayText=function(ae){var _e={};return _e.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[ae.substr(0,2)],_e.str=zt(H(ae,0)),_e},this.getExtCRLNumber=function(ae,_e){var Ie={extname:"cRLNumber"};if(_e&&(Ie.critical=!0),ae.substr(0,2)=="02")return Ie.num={hex:H(ae,0)},Ie;throw new Error("hExtV parse error: "+ae)},this.getExtCRLReason=function(ae,_e){var Ie={extname:"cRLReason"};if(_e&&(Ie.critical=!0),ae.substr(0,2)=="0a")return Ie.code=parseInt(H(ae,0),16),Ie;throw new Error("hExtV parse error: "+ae)},this.getExtOcspNonce=function(ae,_e){var Ie={extname:"ocspNonce"};_e&&(Ie.critical=!0);var Fe=H(ae,0);return Ie.hex=Fe,Ie},this.getExtOcspNoCheck=function(ae,_e){var Ie={extname:"ocspNoCheck"};return _e&&(Ie.critical=!0),Ie},this.getExtAdobeTimeStamp=function(ae,_e){if(ae===void 0&&_e===void 0){var Ie=this.getExtInfo("adobeTimeStamp");if(Ie===void 0)return;ae=X(this.hex,Ie.vidx),_e=Ie.critical}var Fe={extname:"adobeTimeStamp"};_e&&(Fe.critical=!0);var ct=C(ae,0);if(ct.length>1){var Et=X(ae,ct[1]),fr=this.getGeneralName(Et);fr.uri!=null&&(Fe.uri=fr.uri)}if(ct.length>2){var Ht=X(ae,ct[2]);Ht=="0101ff"&&(Fe.reqauth=!0),Ht=="010100"&&(Fe.reqauth=!1)}return Fe},this.getX500NameRule=function(ae){for(var _e=null,Ie=[],Fe=0;Fe<ae.length;Fe++)for(var ct=ae[Fe],Et=0;Et<ct.length;Et++)Ie.push(ct[Et]);for(Fe=0;Fe<Ie.length;Fe++){var fr=Ie[Fe],Ht=fr.ds,qr=fr.value,lr=fr.type;if(Ht!="prn"&&Ht!="utf8"&&Ht!="ia5")return"mixed";if(Ht=="ia5"){if(lr!="CN")return"mixed";if(j.lang.String.isMail(qr))continue;return"mixed"}if(lr=="C"){if(Ht=="prn")continue;return"mixed"}if(_e==null)_e=Ht;else if(_e!==Ht)return"mixed"}return _e??"prn"},this.getX500Name=function(ae){var _e=this.getX500NameArray(ae);return{array:_e,str:this.dnarraytostr(_e)}},this.getX500NameArray=function(ae){for(var _e=[],Ie=C(ae,0),Fe=0;Fe<Ie.length;Fe++)_e.push(this.getRDN(X(ae,Ie[Fe])));return _e},this.getRDN=function(ae){for(var _e=[],Ie=C(ae,0),Fe=0;Fe<Ie.length;Fe++)_e.push(this.getAttrTypeAndValue(X(ae,Ie[Fe])));return _e},this.getAttrTypeAndValue=function(ae){var _e={type:null,value:null,ds:null},Ie=C(ae,0),Fe=oe(ae,Ie[0],[],"06"),ct=oe(ae,Ie[1],[]),Et=j.asn1.ASN1Util.oidHexToInt(Fe);return _e.type=j.asn1.x509.OID.oid2atype(Et),_e.ds=this.HEX2STAG[ae.substr(Ie[1],2)],_e.ds!="bmp"?_e.value=Xt(ct):_e.value=ar(ct),_e},this.readCertPEM=function(ae){this.readCertHex(St(ae))},this.readCertHex=function(ae){this.hex=ae,this.getVersion();try{Ee(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var ae={};return ae.version=this.getVersion(),ae.serial={hex:this.getSerialNumberHex()},ae.sigalg=this.getSignatureAlgorithmField(),ae.issuer=this.getIssuer(),ae.notbefore=this.getNotBefore(),ae.notafter=this.getNotAfter(),ae.subject=this.getSubject(),ae.sbjpubkey=Tt(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(ae.ext=this.getExtParamArray()),ae.sighex=this.getSignatureValueHex(),ae},this.getExtParamArray=function(ae){ae==null&&Ae(this.hex,0,[0,"[3]"])!=-1&&(ae=me(this.hex,0,[0,"[3]",0],"30"));for(var _e=[],Ie=C(ae,0),Fe=0;Fe<Ie.length;Fe++){var ct=X(ae,Ie[Fe]),Et=this.getExtParam(ct);Et!=null&&_e.push(Et)}return _e},this.getExtParam=function(ae){var _e=C(ae,0).length;if(_e!=2&&_e!=3)throw new Error("wrong number elements in Extension: "+_e+" "+ae);var Ie=gt(oe(ae,0,[0],"06")),Fe=!1;_e==3&&he(ae,0,[1])=="0101ff"&&(Fe=!0);var ct=he(ae,0,[_e-1,0]),Et=void 0;if(Ie=="2.5.29.14"?Et=this.getExtSubjectKeyIdentifier(ct,Fe):Ie=="2.5.29.15"?Et=this.getExtKeyUsage(ct,Fe):Ie=="2.5.29.17"?Et=this.getExtSubjectAltName(ct,Fe):Ie=="2.5.29.18"?Et=this.getExtIssuerAltName(ct,Fe):Ie=="2.5.29.19"?Et=this.getExtBasicConstraints(ct,Fe):Ie=="2.5.29.31"?Et=this.getExtCRLDistributionPoints(ct,Fe):Ie=="2.5.29.32"?Et=this.getExtCertificatePolicies(ct,Fe):Ie=="2.5.29.35"?Et=this.getExtAuthorityKeyIdentifier(ct,Fe):Ie=="2.5.29.37"?Et=this.getExtExtKeyUsage(ct,Fe):Ie=="1.3.6.1.5.5.7.1.1"?Et=this.getExtAuthorityInfoAccess(ct,Fe):Ie=="2.5.29.20"?Et=this.getExtCRLNumber(ct,Fe):Ie=="2.5.29.21"?Et=this.getExtCRLReason(ct,Fe):Ie=="1.3.6.1.5.5.7.48.1.2"?Et=this.getExtOcspNonce(ct,Fe):Ie=="1.3.6.1.5.5.7.48.1.5"?Et=this.getExtOcspNoCheck(ct,Fe):Ie=="1.2.840.113583.1.1.9.1"&&(Et=this.getExtAdobeTimeStamp(ct,Fe)),Et!=null)return Et;var fr={extname:Ie,extn:ct};return Fe&&(fr.critical=!0),fr},this.findExt=function(ae,_e){for(var Ie=0;Ie<ae.length;Ie++)if(ae[Ie].extname==_e)return ae[Ie];return null},this.updateExtCDPFullURI=function(ae,_e){var Ie=this.findExt(ae,"cRLDistributionPoints");if(Ie!=null&&Ie.array!=null){for(var Fe=Ie.array,ct=0;ct<Fe.length;ct++)if(Fe[ct].dpname!=null&&Fe[ct].dpname.full!=null)for(var Et=Fe[ct].dpname.full,fr=0;fr<Et.length;fr++){var Ht=Et[ct];Ht.uri!=null&&(Ht.uri=_e)}}},this.updateExtAIAOCSP=function(ae,_e){var Ie=this.findExt(ae,"authorityInfoAccess");if(Ie!=null&&Ie.array!=null)for(var Fe=Ie.array,ct=0;ct<Fe.length;ct++)Fe[ct].ocsp!=null&&(Fe[ct].ocsp=_e)},this.updateExtAIACAIssuer=function(ae,_e){var Ie=this.findExt(ae,"authorityInfoAccess");if(Ie!=null&&Ie.array!=null)for(var Fe=Ie.array,ct=0;ct<Fe.length;ct++)Fe[ct].caissuer!=null&&(Fe[ct].caissuer=_e)},this.dnarraytostr=function(ae){return"/"+ae.map(function(_e){return function(Fe){return Fe.map(function(ct){return function(fr){return fr.type+"="+fr.value}(ct).replace(/\+/,"\\+")}).join("+")}(_e).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var ae,_e,Ie,Fe=function(Zr){return JSON.stringify(Zr.array).replace(/[\[\]\{\}\"]/g,"")},ct=function(Zr){for(var Cn="",Qr=Zr.array,en=0;en<Qr.length;en++){var bn=Qr[en];if(Cn+="    policy oid: "+bn.policyoid+`
`,bn.array!==void 0)for(var xr=0;xr<bn.array.length;xr++){var Vn=bn.array[xr];Vn.cps!==void 0&&(Cn+="    cps: "+Vn.cps+`
`)}}return Cn},Et=function(Zr){for(var Cn="",Qr=Zr.array,en=0;en<Qr.length;en++){var bn=Qr[en];try{bn.dpname.full[0].uri!==void 0&&(Cn+="    "+bn.dpname.full[0].uri+`
`)}catch{}try{bn.dname.full[0].dn.hex!==void 0&&(Cn+="    "+Ur.hex2dn(bn.dpname.full[0].dn.hex)+`
`)}catch{}}return Cn},fr=function(Zr){for(var Cn="",Qr=Zr.array,en=0;en<Qr.length;en++){var bn=Qr[en];bn.caissuer!==void 0&&(Cn+="    caissuer: "+bn.caissuer+`
`),bn.ocsp!==void 0&&(Cn+="    ocsp: "+bn.ocsp+`
`)}return Cn};if(ae=`Basic Fields
`,ae+="  serial number: "+this.getSerialNumberHex()+`
`,ae+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,ae+="  issuer: "+this.getIssuerString()+`
`,ae+="  notBefore: "+this.getNotBefore()+`
`,ae+="  notAfter: "+this.getNotAfter()+`
`,ae+="  subject: "+this.getSubjectString()+`
`,ae+=`  subject public key info: 
`,ae+="    key algorithm: "+(_e=this.getPublicKey()).type+`
`,_e.type==="RSA"&&(ae+="    n="+Gr(_e.n.toString(16)).substr(0,16)+`...
`,ae+="    e="+Gr(_e.e.toString(16))+`
`),(Ie=this.aExtInfo)!=null){ae+=`X509v3 Extensions:
`;for(var Ht=0;Ht<Ie.length;Ht++){var qr=Ie[Ht],lr=j.asn1.x509.OID.oid2name(qr.oid);lr===""&&(lr=qr.oid);var pr="";if(qr.critical===!0&&(pr="CRITICAL"),ae+="  "+lr+" "+pr+`:
`,lr==="basicConstraints"){var tn=this.getExtBasicConstraints();tn.cA===void 0?ae+=`    {}
`:(ae+="    cA=true",tn.pathLen!==void 0&&(ae+=", pathLen="+tn.pathLen),ae+=`
`)}else if(lr==="keyUsage")ae+="    "+this.getExtKeyUsageString()+`
`;else if(lr==="subjectKeyIdentifier")ae+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(lr==="authorityKeyIdentifier"){var dr=this.getExtAuthorityKeyIdentifier();dr.kid!==void 0&&(ae+="    kid="+dr.kid.hex+`
`)}else lr==="extKeyUsage"?ae+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:lr==="subjectAltName"?ae+="    "+Fe(this.getExtSubjectAltName())+`
`:lr==="cRLDistributionPoints"?ae+=Et(this.getExtCRLDistributionPoints()):lr==="authorityInfoAccess"?ae+=fr(this.getExtAuthorityInfoAccess()):lr==="certificatePolicies"&&(ae+=ct(this.getExtCertificatePolicies()))}}return ae+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,ae+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof v=="string"&&(v.indexOf("-----BEGIN")!=-1?this.readCertPEM(v):j.lang.String.isHex(v)&&this.readCertHex(v))}Oe.prototype.sign=function(v,m){var S=function(H){return j.crypto.Util.hashString(H,m)}(v);return this.signWithMessageHash(S,m)},Oe.prototype.signWithMessageHash=function(v,m){var S=We(j.crypto.Util.getPaddedDigestInfoHex(v,m,this.n.bitLength()),16);return Yr(this.doPrivate(S).toString(16),this.n.bitLength())},Oe.prototype.signPSS=function(v,m,S){var C=function(X){return j.crypto.Util.hashHex(X,m)}(tr(v));return S===void 0&&(S=-1),this.signWithMessageHashPSS(C,m,S)},Oe.prototype.signWithMessageHashPSS=function(v,m,S){var C,H=zt(v),X=H.length,oe=this.n.bitLength()-1,be=Math.ceil(oe/8),he=function(ae){return j.crypto.Util.hashHex(ae,m)};if(S===-1||S===void 0)S=X;else if(S===-2)S=be-X-2;else if(S<-2)throw new Error("invalid salt length");if(be<X+S+2)throw new Error("data too long");var me="";S>0&&(me=new Array(S),new bt().nextBytes(me),me=String.fromCharCode.apply(String,me));var Ee=zt(he(tr("\0\0\0\0\0\0\0\0"+H+me))),Ae=[];for(C=0;C<be-S-X-2;C+=1)Ae[C]=0;var De=String.fromCharCode.apply(String,Ae)+""+me,Ke=Tn(Ee,De.length,he),it=[];for(C=0;C<De.length;C+=1)it[C]=De.charCodeAt(C)^Ke.charCodeAt(C);var gt=65280>>8*be-oe&255;for(it[0]&=~gt,C=0;C<X;C++)it.push(Ee.charCodeAt(C));return it.push(188),Yr(this.doPrivate(new $(it)).toString(16),this.n.bitLength())},Oe.prototype.verify=function(v,m){if((m=m.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var S=We(m,16),C=this.n.bitLength();if(S.bitLength()>C)return!1;var H=this.doPublic(S).toString(16);if(H.length+3!=C/4)return!1;var X=cn(H.replace(/^1f+00/,""));if(X.length==0)return!1;var oe=X[0];return X[1]==function(he){return j.crypto.Util.hashString(he,oe)}(v)},Oe.prototype.verifyWithMessageHash=function(v,m){if(m.length!=Math.ceil(this.n.bitLength()/4))return!1;var S=We(m,16);if(S.bitLength()>this.n.bitLength())return 0;var C=cn(this.doPublic(S).toString(16).replace(/^1f+00/,""));return C.length==0?!1:(C[0],C[1]==v)},Oe.prototype.verifyPSS=function(v,m,S,C){var H=function(oe){return j.crypto.Util.hashHex(oe,S)}(tr(v));return C===void 0&&(C=-1),this.verifyWithMessageHashPSS(H,m,S,C)},Oe.prototype.verifyWithMessageHashPSS=function(v,m,S,C){if(m.length!=Math.ceil(this.n.bitLength()/4))return!1;var H,X=new $(m,16),oe=function(Ie){return j.crypto.Util.hashHex(Ie,S)},be=zt(v),he=be.length,me=this.n.bitLength()-1,Ee=Math.ceil(me/8);if(C===-1||C===void 0)C=he;else if(C===-2)C=Ee-he-2;else if(C<-2)throw new Error("invalid salt length");if(Ee<he+C+2)throw new Error("data too long");var Ae=this.doPublic(X).toByteArray();for(H=0;H<Ae.length;H+=1)Ae[H]&=255;for(;Ae.length<Ee;)Ae.unshift(0);if(Ae[Ee-1]!==188)throw new Error("encoded message does not end in 0xbc");var De=(Ae=String.fromCharCode.apply(String,Ae)).substr(0,Ee-he-1),Ke=Ae.substr(De.length,he),it=65280>>8*Ee-me&255;if((De.charCodeAt(0)&it)!=0)throw new Error("bits beyond keysize not zero");var gt=Tn(Ke,De.length,oe),St=[];for(H=0;H<De.length;H+=1)St[H]=De.charCodeAt(H)^gt.charCodeAt(H);St[0]&=~it;var ae=Ee-he-C-2;for(H=0;H<ae;H+=1)if(St[H]!==0)throw new Error("leftmost octets not zero");if(St[ae]!==1)throw new Error("0x01 marker not found");return Ke===zt(oe(tr("\0\0\0\0\0\0\0\0"+be+String.fromCharCode.apply(String,St.slice(-C)))))},Oe.SALT_LEN_HLEN=-1,Oe.SALT_LEN_MAX=-2,Oe.SALT_LEN_RECOVER=-2,Ur.hex2dn=function(v,m){m===void 0&&(m=0);var S=new Ur;return ze.getTLV(v,m),S.getX500Name(v).str},Ur.hex2rdn=function(v,m){if(m===void 0&&(m=0),v.substr(m,2)!=="31")throw new Error("malformed RDN");for(var S=new Array,C=ze.getChildIdx(v,m),H=0;H<C.length;H++)S.push(Ur.hex2attrTypeValue(v,C[H]));return(S=S.map(function(X){return X.replace("+","\\+")})).join("+")},Ur.hex2attrTypeValue=function(v,m){var S=ze,C=S.getV;if(m===void 0&&(m=0),v.substr(m,2)!=="30")throw new Error("malformed attribute type and value");var H=S.getChildIdx(v,m);H.length!==2||v.substr(H[0],2);var X=C(v,H[0]),oe=j.asn1.ASN1Util.oidHexToInt(X);return j.asn1.x509.OID.oid2atype(oe)+"="+zt(C(v,H[1]))},Ur.getPublicKeyFromCertHex=function(v){var m=new Ur;return m.readCertHex(v),m.getPublicKey()},Ur.getPublicKeyFromCertPEM=function(v){var m=new Ur;return m.readCertPEM(v),m.getPublicKey()},Ur.getPublicKeyInfoPropOfCertPEM=function(v){var m,S,C=ze.getVbyList,H={};return H.algparam=null,(m=new Ur).readCertPEM(v),S=m.getPublicKeyHex(),H.keyhex=C(S,0,[1],"03").substr(2),H.algoid=C(S,0,[0,0],"06"),H.algoid==="2a8648ce3d0201"&&(H.algparam=C(S,0,[0,1],"06")),H},Ur.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],j!==void 0&&j||(a.KJUR=j={}),j.jws!==void 0&&j.jws||(j.jws={}),j.jws.JWS=function(){var v=j.jws.JWS.isSafeJSONString;this.parseJWS=function(m,S){if(this.parsedJWS===void 0||!S&&this.parsedJWS.sigvalH===void 0){var C=m.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(C==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var H=C[1],X=C[2],oe=C[3],be=H+"."+X;if(this.parsedJWS={},this.parsedJWS.headB64U=H,this.parsedJWS.payloadB64U=X,this.parsedJWS.sigvalB64U=oe,this.parsedJWS.si=be,!S){var he=Le(oe),me=We(he,16);this.parsedJWS.sigvalH=he,this.parsedJWS.sigvalBI=me}var Ee=et(H),Ae=et(X);if(this.parsedJWS.headS=Ee,this.parsedJWS.payloadS=Ae,!v(Ee,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+Ee}}},j.jws.JWS.sign=function(v,m,S,C,H){var X,oe,be,he=j,me=he.jws.JWS,Ee=me.readSafeJSONString,Ae=me.isSafeJSONString,De=he.crypto,Ke=(De.ECDSA,De.Mac),it=De.Signature,gt=JSON;if(typeof m!="string"&&(m===void 0?"undefined":R(m))!="object")throw"spHeader must be JSON string or object: "+m;if((m===void 0?"undefined":R(m))=="object"&&(oe=m,X=gt.stringify(oe)),typeof m=="string"){if(!Ae(X=m))throw"JWS Head is not safe JSON string: "+X;oe=Ee(X)}if(be=S,(S===void 0?"undefined":R(S))=="object"&&(be=gt.stringify(S)),v!=""&&v!=null||oe.alg===void 0||(v=oe.alg),v!=""&&v!=null&&oe.alg===void 0&&(oe.alg=v,X=gt.stringify(oe)),v!==oe.alg)throw"alg and sHeader.alg doesn't match: "+v+"!="+oe.alg;var St=null;if(me.jwsalg2sigalg[v]===void 0)throw"unsupported alg name: "+v;St=me.jwsalg2sigalg[v];var ae=qe(X)+"."+qe(be),_e="";if(St.substr(0,4)=="Hmac"){if(C===void 0)throw"mac key shall be specified for HS* alg";var Ie=new Ke({alg:St,prov:"cryptojs",pass:C});Ie.updateString(ae),_e=Ie.doFinal()}else if(St.indexOf("withECDSA")!=-1){(ct=new it({alg:St})).init(C,H),ct.updateString(ae);var Fe=ct.sign();_e=j.crypto.ECDSA.asn1SigToConcatSig(Fe)}else{var ct;St!="none"&&((ct=new it({alg:St})).init(C,H),ct.updateString(ae),_e=ct.sign())}return ae+"."+st(_e)},j.jws.JWS.verify=function(v,m,S){var C,H=j,X=H.jws.JWS,oe=X.readSafeJSONString,be=H.crypto,he=be.ECDSA,me=be.Mac,Ee=be.Signature;R(Oe)!==void 0&&(C=Oe);var Ae=v.split(".");if(Ae.length!==3)return!1;var De=Ae[0]+"."+Ae[1],Ke=Le(Ae[2]),it=oe(et(Ae[0])),gt=null,St=null;if(it.alg===void 0)throw"algorithm not specified in header";if(St=(gt=it.alg).substr(0,2),S!=null&&Object.prototype.toString.call(S)==="[object Array]"&&S.length>0&&(":"+S.join(":")+":").indexOf(":"+gt+":")==-1)throw"algorithm '"+gt+"' not accepted in the list";if(gt!="none"&&m===null)throw"key shall be specified to verify.";if(typeof m=="string"&&m.indexOf("-----BEGIN ")!=-1&&(m=Gt.getKey(m)),!(St!="RS"&&St!="PS"||m instanceof C))throw"key shall be a RSAKey obj for RS* and PS* algs";if(St=="ES"&&!(m instanceof he))throw"key shall be a ECDSA obj for ES* algs";var ae=null;if(X.jwsalg2sigalg[it.alg]===void 0)throw"unsupported alg name: "+gt;if((ae=X.jwsalg2sigalg[gt])=="none")throw"not supported";if(ae.substr(0,4)=="Hmac"){if(m===void 0)throw"hexadecimal key shall be specified for HMAC";var _e=new me({alg:ae,pass:m});return _e.updateString(De),Ke==_e.doFinal()}if(ae.indexOf("withECDSA")!=-1){var Ie,Fe=null;try{Fe=he.concatSigToASN1Sig(Ke)}catch{return!1}return(Ie=new Ee({alg:ae})).init(m),Ie.updateString(De),Ie.verify(Fe)}return(Ie=new Ee({alg:ae})).init(m),Ie.updateString(De),Ie.verify(Ke)},j.jws.JWS.parse=function(v){var m,S,C,H=v.split("."),X={};if(H.length!=2&&H.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return m=H[0],S=H[1],H.length==3&&(C=H[2]),X.headerObj=j.jws.JWS.readSafeJSONString(et(m)),X.payloadObj=j.jws.JWS.readSafeJSONString(et(S)),X.headerPP=JSON.stringify(X.headerObj,null,"  "),X.payloadObj==null?X.payloadPP=et(S):X.payloadPP=JSON.stringify(X.payloadObj,null,"  "),C!==void 0&&(X.sigHex=Le(C)),X},j.jws.JWS.verifyJWT=function(v,m,S){var C=j.jws,H=C.JWS,X=H.readSafeJSONString,oe=H.inArray,be=H.includedArray,he=v.split("."),me=he[0],Ee=he[1],Ae=(Le(he[2]),X(et(me))),De=X(et(Ee));if(Ae.alg===void 0)return!1;if(S.alg===void 0)throw"acceptField.alg shall be specified";if(!oe(Ae.alg,S.alg)||De.iss!==void 0&&R(S.iss)==="object"&&!oe(De.iss,S.iss)||De.sub!==void 0&&R(S.sub)==="object"&&!oe(De.sub,S.sub))return!1;if(De.aud!==void 0&&R(S.aud)==="object"){if(typeof De.aud=="string"){if(!oe(De.aud,S.aud))return!1}else if(R(De.aud)=="object"&&!be(De.aud,S.aud))return!1}var Ke=C.IntDate.getNow();return S.verifyAt!==void 0&&typeof S.verifyAt=="number"&&(Ke=S.verifyAt),S.gracePeriod!==void 0&&typeof S.gracePeriod=="number"||(S.gracePeriod=0),!(De.exp!==void 0&&typeof De.exp=="number"&&De.exp+S.gracePeriod<Ke)&&!(De.nbf!==void 0&&typeof De.nbf=="number"&&Ke<De.nbf-S.gracePeriod)&&!(De.iat!==void 0&&typeof De.iat=="number"&&Ke<De.iat-S.gracePeriod)&&(De.jti===void 0||S.jti===void 0||De.jti===S.jti)&&!!H.verify(v,m,S.alg)},j.jws.JWS.includedArray=function(v,m){var S=j.jws.JWS.inArray;if(v===null||(v===void 0?"undefined":R(v))!=="object"||typeof v.length!="number")return!1;for(var C=0;C<v.length;C++)if(!S(v[C],m))return!1;return!0},j.jws.JWS.inArray=function(v,m){if(m===null||(m===void 0?"undefined":R(m))!=="object"||typeof m.length!="number")return!1;for(var S=0;S<m.length;S++)if(m[S]==v)return!0;return!1},j.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},j.jws.JWS.isSafeJSONString=function(v,m,S){var C=null;try{return((C=V(v))===void 0?"undefined":R(C))!="object"||C.constructor===Array?0:(m&&(m[S]=C),1)}catch{return 0}},j.jws.JWS.readSafeJSONString=function(v){var m=null;try{return((m=V(v))===void 0?"undefined":R(m))!="object"||m.constructor===Array?null:m}catch{return null}},j.jws.JWS.getEncodedSignatureValueFromJWS=function(v){var m=v.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(m==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return m[1]},j.jws.JWS.getJWKthumbprint=function(v){if(v.kty!=="RSA"&&v.kty!=="EC"&&v.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var m="{";if(v.kty==="RSA"){if(typeof v.n!="string"||typeof v.e!="string")throw"wrong n and e value for RSA key";m+='"e":"'+v.e+'",',m+='"kty":"'+v.kty+'",',m+='"n":"'+v.n+'"}'}else if(v.kty==="EC"){if(typeof v.crv!="string"||typeof v.x!="string"||typeof v.y!="string")throw"wrong crv, x and y value for EC key";m+='"crv":"'+v.crv+'",',m+='"kty":"'+v.kty+'",',m+='"x":"'+v.x+'",',m+='"y":"'+v.y+'"}'}else if(v.kty==="oct"){if(typeof v.k!="string")throw"wrong k value for oct(symmetric) key";m+='"kty":"'+v.kty+'",',m+='"k":"'+v.k+'"}'}var S=tr(m);return st(j.crypto.Util.hashHex(S,"sha256"))},j.jws.IntDate={},j.jws.IntDate.get=function(v){var m=j.jws.IntDate,S=m.getNow,C=m.getZulu;if(v=="now")return S();if(v=="now + 1hour")return S()+3600;if(v=="now + 1day")return S()+86400;if(v=="now + 1month")return S()+2592e3;if(v=="now + 1year")return S()+31536e3;if(v.match(/Z$/))return C(v);if(v.match(/^[0-9]+$/))return parseInt(v);throw"unsupported format: "+v},j.jws.IntDate.getZulu=function(v){return Zt(v)},j.jws.IntDate.getNow=function(){return~~(new Date/1e3)},j.jws.IntDate.intDate2UTCString=function(v){return new Date(1e3*v).toUTCString()},j.jws.IntDate.intDate2Zulu=function(v){var m=new Date(1e3*v);return("0000"+m.getUTCFullYear()).slice(-4)+("00"+(m.getUTCMonth()+1)).slice(-2)+("00"+m.getUTCDate()).slice(-2)+("00"+m.getUTCHours()).slice(-2)+("00"+m.getUTCMinutes()).slice(-2)+("00"+m.getUTCSeconds()).slice(-2)+"Z"},a.SecureRandom=bt,a.rng_seed_time=we,a.BigInteger=$,a.RSAKey=Oe;var En=j.crypto.EDSA;a.EDSA=En;var Un=j.crypto.DSA;a.DSA=Un;var ur=j.crypto.Signature;a.Signature=ur;var fi=j.crypto.MessageDigest;a.MessageDigest=fi;var Rn=j.crypto.Mac;a.Mac=Rn;var $i=j.crypto.Cipher;a.Cipher=$i,a.KEYUTIL=Gt,a.ASN1HEX=ze,a.X509=Ur,a.CryptoJS=K,a.b64tohex=q,a.b64toBA=Pe,a.stoBA=Yt,a.BAtos=Br,a.BAtohex=jr,a.stohex=or,a.stob64=function(m){return Y(or(m))},a.stob64u=function(m){return $e(Y(or(m)))},a.b64utos=function(m){return Br(Pe(vt(m)))},a.b64tob64u=$e,a.b64utob64=vt,a.hex2b64=Y,a.hextob64u=st,a.b64utohex=Le,a.utf8tob64u=qe,a.b64utoutf8=et,a.utf8tob64=function(m){return Y(rr(Dr(m)))},a.b64toutf8=function(m){return decodeURIComponent(Fr(q(m)))},a.utf8tohex=ft,a.hextoutf8=Xt,a.hextorstr=zt,a.rstrtohex=tr,a.hextob64=jt,a.hextob64nl=ue,a.b64nltohex=pe,a.hextopem=Tt,a.pemtohex=xt,a.hextoArrayBuffer=function(m){if(m.length%2!=0)throw"input is not even length";if(m.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var S=new ArrayBuffer(m.length/2),C=new DataView(S),H=0;H<m.length/2;H++)C.setUint8(H,parseInt(m.substr(2*H,2),16));return S},a.ArrayBuffertohex=function(m){for(var S="",C=new DataView(m),H=0;H<m.byteLength;H++)S+=("00"+C.getUint8(H).toString(16)).slice(-2);return S},a.zulutomsec=Pt,a.zulutosec=Zt,a.zulutodate=function(m){return new Date(Pt(m))},a.datetozulu=function(m,S,C){var H,X=m.getUTCFullYear();if(S){if(X<1950||2049<X)throw"not proper year for UTCTime: "+X;H=(""+X).slice(-2)}else H=("000"+X).slice(-4);if(H+=("0"+(m.getUTCMonth()+1)).slice(-2),H+=("0"+m.getUTCDate()).slice(-2),H+=("0"+m.getUTCHours()).slice(-2),H+=("0"+m.getUTCMinutes()).slice(-2),H+=("0"+m.getUTCSeconds()).slice(-2),C){var oe=m.getUTCMilliseconds();oe!==0&&(H+="."+(oe=(oe=("00"+oe).slice(-3)).replace(/0+$/g,"")))}return H+="Z"},a.uricmptohex=rr,a.hextouricmp=Fr,a.ipv6tohex=$t,a.hextoipv6=er,a.hextoip=mr,a.iptohex=function(m){var S="malformed IP address";if(!(m=m.toLowerCase(m)).match(/^[0-9.]+$/)){if(m.match(/^[0-9a-f:]+$/)&&m.indexOf(":")!==-1)return $t(m);throw S}var C=m.split(".");if(C.length!==4)throw S;var H="";try{for(var X=0;X<4;X++)H+=("0"+parseInt(C[X]).toString(16)).slice(-2);return H}catch{throw S}},a.encodeURIComponentAll=Dr,a.newline_toUnix=function(m){return m=m.replace(/\r\n/gm,`
`)},a.newline_toDos=function(m){return m=(m=m.replace(/\r\n/gm,`
`)).replace(/\n/gm,`\r
`)},a.hextoposhex=Gr,a.intarystrtohex=function(m){m=(m=(m=m.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return m.split(/,/).map(function(S,C,H){var X=parseInt(S);if(X<0||255<X)throw"integer not in range 0-255";return("00"+X.toString(16)).slice(-2)}).join("")}catch(S){throw"malformed integer array string: "+S}},a.strdiffidx=function(m,S){var C=m.length;m.length>S.length&&(C=S.length);for(var H=0;H<C;H++)if(m.charCodeAt(H)!=S.charCodeAt(H))return H;return m.length!=S.length?C:-1},a.KJUR=j;var di=j.crypto;a.crypto=di;var Ta=j.asn1;a.asn1=Ta;var Zi=j.jws;a.jws=Zi;var hi=j.lang;a.lang=hi}).call(this,o(28).Buffer)},function(i,a,o){(function(d){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var l=o(30),u=o(31),h=o(32);function f(){return b.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function y(se,M){if(f()<M)throw new RangeError("Invalid typed array length");return b.TYPED_ARRAY_SUPPORT?(se=new Uint8Array(M)).__proto__=b.prototype:(se===null&&(se=new b(M)),se.length=M),se}function b(se,M,D){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(se,M,D);if(typeof se=="number"){if(typeof M=="string")throw new Error("If encoding is specified then the first argument must be a string");return T(this,se)}return _(this,se,M,D)}function _(se,M,D,G){if(typeof M=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&M instanceof ArrayBuffer?function(we,Ce,ot,Re){if(Ce.byteLength,ot<0||Ce.byteLength<ot)throw new RangeError("'offset' is out of bounds");if(Ce.byteLength<ot+(Re||0))throw new RangeError("'length' is out of bounds");return Ce=ot===void 0&&Re===void 0?new Uint8Array(Ce):Re===void 0?new Uint8Array(Ce,ot):new Uint8Array(Ce,ot,Re),b.TYPED_ARRAY_SUPPORT?(we=Ce).__proto__=b.prototype:we=x(we,Ce),we}(se,M,D,G):typeof M=="string"?function(we,Ce,ot){if(typeof ot=="string"&&ot!==""||(ot="utf8"),!b.isEncoding(ot))throw new TypeError('"encoding" must be a valid string encoding');var Re=0|R(Ce,ot),pt=(we=y(we,Re)).write(Ce,ot);return pt!==Re&&(we=we.slice(0,pt)),we}(se,M,D):function(we,Ce){if(b.isBuffer(Ce)){var ot=0|O(Ce.length);return(we=y(we,ot)).length===0||Ce.copy(we,0,0,ot),we}if(Ce){if(typeof ArrayBuffer<"u"&&Ce.buffer instanceof ArrayBuffer||"length"in Ce)return typeof Ce.length!="number"||function(pt){return pt!=pt}(Ce.length)?y(we,0):x(we,Ce);if(Ce.type==="Buffer"&&h(Ce.data))return x(we,Ce.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(se,M)}function A(se){if(typeof se!="number")throw new TypeError('"size" argument must be a number');if(se<0)throw new RangeError('"size" argument must not be negative')}function T(se,M){if(A(M),se=y(se,M<0?0:0|O(M)),!b.TYPED_ARRAY_SUPPORT)for(var D=0;D<M;++D)se[D]=0;return se}function x(se,M){var D=M.length<0?0:0|O(M.length);se=y(se,D);for(var G=0;G<D;G+=1)se[G]=255&M[G];return se}function O(se){if(se>=f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f().toString(16)+" bytes");return 0|se}function R(se,M){if(b.isBuffer(se))return se.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(se)||se instanceof ArrayBuffer))return se.byteLength;typeof se!="string"&&(se=""+se);var D=se.length;if(D===0)return 0;for(var G=!1;;)switch(M){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":case void 0:return le(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*D;case"hex":return D>>>1;case"base64":return Te(se).length;default:if(G)return le(se).length;M=(""+M).toLowerCase(),G=!0}}function F(se,M,D){var G=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0)<=(M>>>=0))return"";for(se||(se="utf8");;)switch(se){case"hex":return yt(this,M,D);case"utf8":case"utf-8":return Se(this,M,D);case"ascii":return lt(this,M,D);case"latin1":case"binary":return Ne(this,M,D);case"base64":return ge(this,M,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,M,D);default:if(G)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),G=!0}}function P(se,M,D){var G=se[M];se[M]=se[D],se[D]=G}function K(se,M,D,G,re){if(se.length===0)return-1;if(typeof D=="string"?(G=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,isNaN(D)&&(D=re?0:se.length-1),D<0&&(D=se.length+D),D>=se.length){if(re)return-1;D=se.length-1}else if(D<0){if(!re)return-1;D=0}if(typeof M=="string"&&(M=b.from(M,G)),b.isBuffer(M))return M.length===0?-1:B(se,M,D,G,re);if(typeof M=="number")return M&=255,b.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?re?Uint8Array.prototype.indexOf.call(se,M,D):Uint8Array.prototype.lastIndexOf.call(se,M,D):B(se,[M],D,G,re);throw new TypeError("val must be string, number or Buffer")}function B(se,M,D,G,re){var we,Ce=1,ot=se.length,Re=M.length;if(G!==void 0&&((G=String(G).toLowerCase())==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(se.length<2||M.length<2)return-1;Ce=2,ot/=2,Re/=2,D/=2}function pt(Ge,Oe){return Ce===1?Ge[Oe]:Ge.readUInt16BE(Oe*Ce)}if(re){var Ct=-1;for(we=D;we<ot;we++)if(pt(se,we)===pt(M,Ct===-1?0:we-Ct)){if(Ct===-1&&(Ct=we),we-Ct+1===Re)return Ct*Ce}else Ct!==-1&&(we-=we-Ct),Ct=-1}else for(D+Re>ot&&(D=ot-Re),we=D;we>=0;we--){for(var bt=!0,We=0;We<Re;We++)if(pt(se,we+We)!==pt(M,We)){bt=!1;break}if(bt)return we}return-1}function W(se,M,D,G){D=Number(D)||0;var re=se.length-D;G?(G=Number(G))>re&&(G=re):G=re;var we=M.length;if(we%2!=0)throw new TypeError("Invalid hex string");G>we/2&&(G=we/2);for(var Ce=0;Ce<G;++Ce){var ot=parseInt(M.substr(2*Ce,2),16);if(isNaN(ot))return Ce;se[D+Ce]=ot}return Ce}function Y(se,M,D,G){return Je(le(M,se.length-D),se,D,G)}function q(se,M,D,G){return Je(function(we){for(var Ce=[],ot=0;ot<we.length;++ot)Ce.push(255&we.charCodeAt(ot));return Ce}(M),se,D,G)}function Pe(se,M,D,G){return q(se,M,D,G)}function $(se,M,D,G){return Je(Te(M),se,D,G)}function ie(se,M,D,G){return Je(function(we,Ce){for(var ot,Re,pt,Ct=[],bt=0;bt<we.length&&!((Ce-=2)<0);++bt)Re=(ot=we.charCodeAt(bt))>>8,pt=ot%256,Ct.push(pt),Ct.push(Re);return Ct}(M,se.length-D),se,D,G)}function ge(se,M,D){return M===0&&D===se.length?l.fromByteArray(se):l.fromByteArray(se.slice(M,D))}function Se(se,M,D){D=Math.min(se.length,D);for(var G=[],re=M;re<D;){var we,Ce,ot,Re,pt=se[re],Ct=null,bt=pt>239?4:pt>223?3:pt>191?2:1;if(re+bt<=D)switch(bt){case 1:pt<128&&(Ct=pt);break;case 2:(192&(we=se[re+1]))==128&&(Re=(31&pt)<<6|63&we)>127&&(Ct=Re);break;case 3:we=se[re+1],Ce=se[re+2],(192&we)==128&&(192&Ce)==128&&(Re=(15&pt)<<12|(63&we)<<6|63&Ce)>2047&&(Re<55296||Re>57343)&&(Ct=Re);break;case 4:we=se[re+1],Ce=se[re+2],ot=se[re+3],(192&we)==128&&(192&Ce)==128&&(192&ot)==128&&(Re=(15&pt)<<18|(63&we)<<12|(63&Ce)<<6|63&ot)>65535&&Re<1114112&&(Ct=Re)}Ct===null?(Ct=65533,bt=1):Ct>65535&&(Ct-=65536,G.push(Ct>>>10&1023|55296),Ct=56320|1023&Ct),G.push(Ct),re+=bt}return function(Ge){var Oe=Ge.length;if(Oe<=tt)return String.fromCharCode.apply(String,Ge);for(var ut="",Q=0;Q<Oe;)ut+=String.fromCharCode.apply(String,Ge.slice(Q,Q+=tt));return ut}(G)}a.Buffer=b,a.SlowBuffer=function(M){return+M!=M&&(M=0),b.alloc(+M)},a.INSPECT_MAX_BYTES=50,b.TYPED_ARRAY_SUPPORT=d.TYPED_ARRAY_SUPPORT!==void 0?d.TYPED_ARRAY_SUPPORT:function(){try{var M=new Uint8Array(1);return M.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},M.foo()===42&&typeof M.subarray=="function"&&M.subarray(1,1).byteLength===0}catch{return!1}}(),a.kMaxLength=f(),b.poolSize=8192,b._augment=function(se){return se.__proto__=b.prototype,se},b.from=function(se,M,D){return _(null,se,M,D)},b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0})),b.alloc=function(se,M,D){return function(re,we,Ce,ot){return A(we),we<=0?y(re,we):Ce!==void 0?typeof ot=="string"?y(re,we).fill(Ce,ot):y(re,we).fill(Ce):y(re,we)}(null,se,M,D)},b.allocUnsafe=function(se){return T(null,se)},b.allocUnsafeSlow=function(se){return T(null,se)},b.isBuffer=function(M){return!(M==null||!M._isBuffer)},b.compare=function(M,D){if(!b.isBuffer(M)||!b.isBuffer(D))throw new TypeError("Arguments must be Buffers");if(M===D)return 0;for(var G=M.length,re=D.length,we=0,Ce=Math.min(G,re);we<Ce;++we)if(M[we]!==D[we]){G=M[we],re=D[we];break}return G<re?-1:re<G?1:0},b.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(M,D){if(!h(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return b.alloc(0);var G;if(D===void 0)for(D=0,G=0;G<M.length;++G)D+=M[G].length;var re=b.allocUnsafe(D),we=0;for(G=0;G<M.length;++G){var Ce=M[G];if(!b.isBuffer(Ce))throw new TypeError('"list" argument must be an Array of Buffers');Ce.copy(re,we),we+=Ce.length}return re},b.byteLength=R,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<M;D+=2)P(this,D,D+1);return this},b.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<M;D+=4)P(this,D,D+3),P(this,D+1,D+2);return this},b.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<M;D+=8)P(this,D,D+7),P(this,D+1,D+6),P(this,D+2,D+5),P(this,D+3,D+4);return this},b.prototype.toString=function(){var M=0|this.length;return M===0?"":arguments.length===0?Se(this,0,M):F.apply(this,arguments)},b.prototype.equals=function(M){if(!b.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M||b.compare(this,M)===0},b.prototype.inspect=function(){var M="",D=a.INSPECT_MAX_BYTES;return this.length>0&&(M=this.toString("hex",0,D).match(/.{2}/g).join(" "),this.length>D&&(M+=" ... ")),"<Buffer "+M+">"},b.prototype.compare=function(M,D,G,re,we){if(!b.isBuffer(M))throw new TypeError("Argument must be a Buffer");if(D===void 0&&(D=0),G===void 0&&(G=M?M.length:0),re===void 0&&(re=0),we===void 0&&(we=this.length),D<0||G>M.length||re<0||we>this.length)throw new RangeError("out of range index");if(re>=we&&D>=G)return 0;if(re>=we)return-1;if(D>=G)return 1;if(this===M)return 0;for(var Ce=(we>>>=0)-(re>>>=0),ot=(G>>>=0)-(D>>>=0),Re=Math.min(Ce,ot),pt=this.slice(re,we),Ct=M.slice(D,G),bt=0;bt<Re;++bt)if(pt[bt]!==Ct[bt]){Ce=pt[bt],ot=Ct[bt];break}return Ce<ot?-1:ot<Ce?1:0},b.prototype.includes=function(M,D,G){return this.indexOf(M,D,G)!==-1},b.prototype.indexOf=function(M,D,G){return K(this,M,D,G,!0)},b.prototype.lastIndexOf=function(M,D,G){return K(this,M,D,G,!1)},b.prototype.write=function(M,D,G,re){if(D===void 0)re="utf8",G=this.length,D=0;else if(G===void 0&&typeof D=="string")re=D,G=this.length,D=0;else{if(!isFinite(D))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");D|=0,isFinite(G)?(G|=0,re===void 0&&(re="utf8")):(re=G,G=void 0)}var we=this.length-D;if((G===void 0||G>we)&&(G=we),M.length>0&&(G<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var Ce=!1;;)switch(re){case"hex":return W(this,M,D,G);case"utf8":case"utf-8":return Y(this,M,D,G);case"ascii":return q(this,M,D,G);case"latin1":case"binary":return Pe(this,M,D,G);case"base64":return $(this,M,D,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,M,D,G);default:if(Ce)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),Ce=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;function lt(se,M,D){var G="";D=Math.min(se.length,D);for(var re=M;re<D;++re)G+=String.fromCharCode(127&se[re]);return G}function Ne(se,M,D){var G="";D=Math.min(se.length,D);for(var re=M;re<D;++re)G+=String.fromCharCode(se[re]);return G}function yt(se,M,D){var G=se.length;(!M||M<0)&&(M=0),(!D||D<0||D>G)&&(D=G);for(var re="",we=M;we<D;++we)re+=Me(se[we]);return re}function ve(se,M,D){for(var G=se.slice(M,D),re="",we=0;we<G.length;we+=2)re+=String.fromCharCode(G[we]+256*G[we+1]);return re}function rt(se,M,D){if(se%1!=0||se<0)throw new RangeError("offset is not uint");if(se+M>D)throw new RangeError("Trying to access beyond buffer length")}function J(se,M,D,G,re,we){if(!b.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>re||M<we)throw new RangeError('"value" argument is out of bounds');if(D+G>se.length)throw new RangeError("Index out of range")}function xe(se,M,D,G){M<0&&(M=65535+M+1);for(var re=0,we=Math.min(se.length-D,2);re<we;++re)se[D+re]=(M&255<<8*(G?re:1-re))>>>8*(G?re:1-re)}function Ze(se,M,D,G){M<0&&(M=4294967295+M+1);for(var re=0,we=Math.min(se.length-D,4);re<we;++re)se[D+re]=M>>>8*(G?re:3-re)&255}function je(se,M,D,G,re,we){if(D+G>se.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function ht(se,M,D,G,re){return re||je(se,0,D,4),u.write(se,M,D,G,23,4),D+4}function Nt(se,M,D,G,re){return re||je(se,0,D,8),u.write(se,M,D,G,52,8),D+8}b.prototype.slice=function(M,D){var G,re=this.length;if((M=~~M)<0?(M+=re)<0&&(M=0):M>re&&(M=re),(D=D===void 0?re:~~D)<0?(D+=re)<0&&(D=0):D>re&&(D=re),D<M&&(D=M),b.TYPED_ARRAY_SUPPORT)(G=this.subarray(M,D)).__proto__=b.prototype;else{var we=D-M;G=new b(we,void 0);for(var Ce=0;Ce<we;++Ce)G[Ce]=this[Ce+M]}return G},b.prototype.readUIntLE=function(M,D,G){M|=0,D|=0,G||rt(M,D,this.length);for(var re=this[M],we=1,Ce=0;++Ce<D&&(we*=256);)re+=this[M+Ce]*we;return re},b.prototype.readUIntBE=function(M,D,G){M|=0,D|=0,G||rt(M,D,this.length);for(var re=this[M+--D],we=1;D>0&&(we*=256);)re+=this[M+--D]*we;return re},b.prototype.readUInt8=function(M,D){return D||rt(M,1,this.length),this[M]},b.prototype.readUInt16LE=function(M,D){return D||rt(M,2,this.length),this[M]|this[M+1]<<8},b.prototype.readUInt16BE=function(M,D){return D||rt(M,2,this.length),this[M]<<8|this[M+1]},b.prototype.readUInt32LE=function(M,D){return D||rt(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},b.prototype.readUInt32BE=function(M,D){return D||rt(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},b.prototype.readIntLE=function(M,D,G){M|=0,D|=0,G||rt(M,D,this.length);for(var re=this[M],we=1,Ce=0;++Ce<D&&(we*=256);)re+=this[M+Ce]*we;return re>=(we*=128)&&(re-=Math.pow(2,8*D)),re},b.prototype.readIntBE=function(M,D,G){M|=0,D|=0,G||rt(M,D,this.length);for(var re=D,we=1,Ce=this[M+--re];re>0&&(we*=256);)Ce+=this[M+--re]*we;return Ce>=(we*=128)&&(Ce-=Math.pow(2,8*D)),Ce},b.prototype.readInt8=function(M,D){return D||rt(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},b.prototype.readInt16LE=function(M,D){D||rt(M,2,this.length);var G=this[M]|this[M+1]<<8;return 32768&G?4294901760|G:G},b.prototype.readInt16BE=function(M,D){D||rt(M,2,this.length);var G=this[M+1]|this[M]<<8;return 32768&G?4294901760|G:G},b.prototype.readInt32LE=function(M,D){return D||rt(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},b.prototype.readInt32BE=function(M,D){return D||rt(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},b.prototype.readFloatLE=function(M,D){return D||rt(M,4,this.length),u.read(this,M,!0,23,4)},b.prototype.readFloatBE=function(M,D){return D||rt(M,4,this.length),u.read(this,M,!1,23,4)},b.prototype.readDoubleLE=function(M,D){return D||rt(M,8,this.length),u.read(this,M,!0,52,8)},b.prototype.readDoubleBE=function(M,D){return D||rt(M,8,this.length),u.read(this,M,!1,52,8)},b.prototype.writeUIntLE=function(M,D,G,re){M=+M,D|=0,G|=0,re||J(this,M,D,G,Math.pow(2,8*G)-1,0);var we=1,Ce=0;for(this[D]=255&M;++Ce<G&&(we*=256);)this[D+Ce]=M/we&255;return D+G},b.prototype.writeUIntBE=function(M,D,G,re){M=+M,D|=0,G|=0,re||J(this,M,D,G,Math.pow(2,8*G)-1,0);var we=G-1,Ce=1;for(this[D+we]=255&M;--we>=0&&(Ce*=256);)this[D+we]=M/Ce&255;return D+G},b.prototype.writeUInt8=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,1,255,0),b.TYPED_ARRAY_SUPPORT||(M=Math.floor(M)),this[D]=255&M,D+1},b.prototype.writeUInt16LE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[D]=255&M,this[D+1]=M>>>8):xe(this,M,D,!0),D+2},b.prototype.writeUInt16BE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[D]=M>>>8,this[D+1]=255&M):xe(this,M,D,!1),D+2},b.prototype.writeUInt32LE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[D+3]=M>>>24,this[D+2]=M>>>16,this[D+1]=M>>>8,this[D]=255&M):Ze(this,M,D,!0),D+4},b.prototype.writeUInt32BE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[D]=M>>>24,this[D+1]=M>>>16,this[D+2]=M>>>8,this[D+3]=255&M):Ze(this,M,D,!1),D+4},b.prototype.writeIntLE=function(M,D,G,re){if(M=+M,D|=0,!re){var we=Math.pow(2,8*G-1);J(this,M,D,G,we-1,-we)}var Ce=0,ot=1,Re=0;for(this[D]=255&M;++Ce<G&&(ot*=256);)M<0&&Re===0&&this[D+Ce-1]!==0&&(Re=1),this[D+Ce]=(M/ot>>0)-Re&255;return D+G},b.prototype.writeIntBE=function(M,D,G,re){if(M=+M,D|=0,!re){var we=Math.pow(2,8*G-1);J(this,M,D,G,we-1,-we)}var Ce=G-1,ot=1,Re=0;for(this[D+Ce]=255&M;--Ce>=0&&(ot*=256);)M<0&&Re===0&&this[D+Ce+1]!==0&&(Re=1),this[D+Ce]=(M/ot>>0)-Re&255;return D+G},b.prototype.writeInt8=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,1,127,-128),b.TYPED_ARRAY_SUPPORT||(M=Math.floor(M)),M<0&&(M=255+M+1),this[D]=255&M,D+1},b.prototype.writeInt16LE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[D]=255&M,this[D+1]=M>>>8):xe(this,M,D,!0),D+2},b.prototype.writeInt16BE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[D]=M>>>8,this[D+1]=255&M):xe(this,M,D,!1),D+2},b.prototype.writeInt32LE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,4,2147483647,-2147483648),b.TYPED_ARRAY_SUPPORT?(this[D]=255&M,this[D+1]=M>>>8,this[D+2]=M>>>16,this[D+3]=M>>>24):Ze(this,M,D,!0),D+4},b.prototype.writeInt32BE=function(M,D,G){return M=+M,D|=0,G||J(this,M,D,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),b.TYPED_ARRAY_SUPPORT?(this[D]=M>>>24,this[D+1]=M>>>16,this[D+2]=M>>>8,this[D+3]=255&M):Ze(this,M,D,!1),D+4},b.prototype.writeFloatLE=function(M,D,G){return ht(this,M,D,!0,G)},b.prototype.writeFloatBE=function(M,D,G){return ht(this,M,D,!1,G)},b.prototype.writeDoubleLE=function(M,D,G){return Nt(this,M,D,!0,G)},b.prototype.writeDoubleBE=function(M,D,G){return Nt(this,M,D,!1,G)},b.prototype.copy=function(M,D,G,re){if(G||(G=0),re||re===0||(re=this.length),D>=M.length&&(D=M.length),D||(D=0),re>0&&re<G&&(re=G),re===G||M.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("sourceStart out of bounds");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),M.length-D<re-G&&(re=M.length-D+G);var we,Ce=re-G;if(this===M&&G<D&&D<re)for(we=Ce-1;we>=0;--we)M[we+D]=this[we+G];else if(Ce<1e3||!b.TYPED_ARRAY_SUPPORT)for(we=0;we<Ce;++we)M[we+D]=this[we+G];else Uint8Array.prototype.set.call(M,this.subarray(G,G+Ce),D);return Ce},b.prototype.fill=function(M,D,G,re){if(typeof M=="string"){if(typeof D=="string"?(re=D,D=0,G=this.length):typeof G=="string"&&(re=G,G=this.length),M.length===1){var we=M.charCodeAt(0);we<256&&(M=we)}if(re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!b.isEncoding(re))throw new TypeError("Unknown encoding: "+re)}else typeof M=="number"&&(M&=255);if(D<0||this.length<D||this.length<G)throw new RangeError("Out of range index");if(G<=D)return this;var Ce;if(D>>>=0,G=G===void 0?this.length:G>>>0,M||(M=0),typeof M=="number")for(Ce=D;Ce<G;++Ce)this[Ce]=M;else{var ot=b.isBuffer(M)?M:le(new b(M,re).toString()),Re=ot.length;for(Ce=0;Ce<G-D;++Ce)this[Ce+D]=ot[Ce%Re]}return this};var kt=/[^+\/0-9A-Za-z-_]/g;function Me(se){return se<16?"0"+se.toString(16):se.toString(16)}function le(se,M){var D;M=M||1/0;for(var G=se.length,re=null,we=[],Ce=0;Ce<G;++Ce){if((D=se.charCodeAt(Ce))>55295&&D<57344){if(!re){if(D>56319){(M-=3)>-1&&we.push(239,191,189);continue}if(Ce+1===G){(M-=3)>-1&&we.push(239,191,189);continue}re=D;continue}if(D<56320){(M-=3)>-1&&we.push(239,191,189),re=D;continue}D=65536+(re-55296<<10|D-56320)}else re&&(M-=3)>-1&&we.push(239,191,189);if(re=null,D<128){if((M-=1)<0)break;we.push(D)}else if(D<2048){if((M-=2)<0)break;we.push(D>>6|192,63&D|128)}else if(D<65536){if((M-=3)<0)break;we.push(D>>12|224,D>>6&63|128,63&D|128)}else{if(!(D<1114112))throw new Error("Invalid code point");if((M-=4)<0)break;we.push(D>>18|240,D>>12&63|128,D>>6&63|128,63&D|128)}}return we}function Te(se){return l.toByteArray(function(D){if((D=function(re){return re.trim?re.trim():re.replace(/^\s+|\s+$/g,"")}(D).replace(kt,"")).length<2)return"";for(;D.length%4!=0;)D+="=";return D}(se))}function Je(se,M,D,G){for(var re=0;re<G&&!(re+D>=M.length||re>=se.length);++re)M[re+D]=se[re];return re}}).call(this,o(29))},function(i,a){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},function(i,a,o){a.byteLength=function(T){var x=b(T),O=x[0],R=x[1];return 3*(O+R)/4-R},a.toByteArray=function(T){var x,O,R=b(T),F=R[0],P=R[1],K=new u(function(q,Pe,$){return 3*(Pe+$)/4-$}(0,F,P)),B=0,W=P>0?F-4:F;for(O=0;O<W;O+=4)x=l[T.charCodeAt(O)]<<18|l[T.charCodeAt(O+1)]<<12|l[T.charCodeAt(O+2)]<<6|l[T.charCodeAt(O+3)],K[B++]=x>>16&255,K[B++]=x>>8&255,K[B++]=255&x;return P===2&&(x=l[T.charCodeAt(O)]<<2|l[T.charCodeAt(O+1)]>>4,K[B++]=255&x),P===1&&(x=l[T.charCodeAt(O)]<<10|l[T.charCodeAt(O+1)]<<4|l[T.charCodeAt(O+2)]>>2,K[B++]=x>>8&255,K[B++]=255&x),K},a.fromByteArray=function(T){for(var x,O=T.length,R=O%3,F=[],P=16383,K=0,B=O-R;K<B;K+=P)F.push(_(T,K,K+P>B?B:K+P));return R===1?(x=T[O-1],F.push(d[x>>2]+d[x<<4&63]+"==")):R===2&&(x=(T[O-2]<<8)+T[O-1],F.push(d[x>>10]+d[x>>4&63]+d[x<<2&63]+"=")),F.join("")};for(var d=[],l=[],u=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,y=h.length;f<y;++f)d[f]=h[f],l[h.charCodeAt(f)]=f;function b(A){var T=A.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=A.indexOf("=");return x===-1&&(x=T),[x,x===T?0:4-x%4]}function _(A,T,x){for(var O,R,F=[],P=T;P<x;P+=3)O=(A[P]<<16&16711680)+(A[P+1]<<8&65280)+(255&A[P+2]),F.push(d[(R=O)>>18&63]+d[R>>12&63]+d[R>>6&63]+d[63&R]);return F.join("")}l[45]=62,l[95]=63},function(i,a){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */a.read=function(o,d,l,u,h){var f,y,b=8*h-u-1,_=(1<<b)-1,A=_>>1,T=-7,x=l?h-1:0,O=l?-1:1,R=o[d+x];for(x+=O,f=R&(1<<-T)-1,R>>=-T,T+=b;T>0;f=256*f+o[d+x],x+=O,T-=8);for(y=f&(1<<-T)-1,f>>=-T,T+=u;T>0;y=256*y+o[d+x],x+=O,T-=8);if(f===0)f=1-A;else{if(f===_)return y?NaN:1/0*(R?-1:1);y+=Math.pow(2,u),f-=A}return(R?-1:1)*y*Math.pow(2,f-u)},a.write=function(o,d,l,u,h,f){var y,b,_,A=8*f-h-1,T=(1<<A)-1,x=T>>1,O=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=u?0:f-1,F=u?1:-1,P=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(b=isNaN(d)?1:0,y=T):(y=Math.floor(Math.log(d)/Math.LN2),d*(_=Math.pow(2,-y))<1&&(y--,_*=2),(d+=y+x>=1?O/_:O*Math.pow(2,1-x))*_>=2&&(y++,_/=2),y+x>=T?(b=0,y=T):y+x>=1?(b=(d*_-1)*Math.pow(2,h),y+=x):(b=d*Math.pow(2,x-1)*Math.pow(2,h),y=0));h>=8;o[l+R]=255&b,R+=F,b/=256,h-=8);for(y=y<<h|b,A+=h;A>0;o[l+R]=255&y,R+=F,y/=256,A-=8);o[l+R-F]|=128*P}},function(i,a){var o={}.toString;i.exports=Array.isArray||function(d){return o.call(d)=="[object Array]"}},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u){var h=u.jws,f=u.KeyUtil,y=u.X509,b=u.crypto,_=u.hextob64u,A=u.b64tohex,T=u.AllowedSigningAlgs;return function(){function x(){(function(R,F){if(!(R instanceof F))throw new TypeError("Cannot call a class as a function")})(this,x)}return x.parseJwt=function(R){d.Log.debug("JoseUtil.parseJwt");try{var F=h.JWS.parse(R);return{header:F.headerObj,payload:F.payloadObj}}catch(P){d.Log.error(P)}},x.validateJwt=function(R,F,P,K,B,W,Y){d.Log.debug("JoseUtil.validateJwt");try{if(F.kty==="RSA")if(F.e&&F.n)F=f.getKey(F);else{if(!F.x5c||!F.x5c.length)return d.Log.error("JoseUtil.validateJwt: RSA key missing key material",F),Promise.reject(new Error("RSA key missing key material"));var q=A(F.x5c[0]);F=y.getPublicKeyFromCertHex(q)}else{if(F.kty!=="EC")return d.Log.error("JoseUtil.validateJwt: Unsupported key type",F&&F.kty),Promise.reject(new Error(F.kty));if(!(F.crv&&F.x&&F.y))return d.Log.error("JoseUtil.validateJwt: EC key missing key material",F),Promise.reject(new Error("EC key missing key material"));F=f.getKey(F)}return x._validateJwt(R,F,P,K,B,W,Y)}catch(Pe){return d.Log.error(Pe&&Pe.message||Pe),Promise.reject("JWT validation failed")}},x.validateJwtAttributes=function(R,F,P,K,B,W){K||(K=0),B||(B=parseInt(Date.now()/1e3));var Y=x.parseJwt(R).payload;if(!Y.iss)return d.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(Y.iss!==F)return d.Log.error("JoseUtil._validateJwt: Invalid issuer in token",Y.iss),Promise.reject(new Error("Invalid issuer in token: "+Y.iss));if(!Y.aud)return d.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(Y.aud===P||Array.isArray(Y.aud)&&Y.aud.indexOf(P)>=0))return d.Log.error("JoseUtil._validateJwt: Invalid audience in token",Y.aud),Promise.reject(new Error("Invalid audience in token: "+Y.aud));if(Y.azp&&Y.azp!==P)return d.Log.error("JoseUtil._validateJwt: Invalid azp in token",Y.azp),Promise.reject(new Error("Invalid azp in token: "+Y.azp));if(!W){var q=B+K,Pe=B-K;if(!Y.iat)return d.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(q<Y.iat)return d.Log.error("JoseUtil._validateJwt: iat is in the future",Y.iat),Promise.reject(new Error("iat is in the future: "+Y.iat));if(Y.nbf&&q<Y.nbf)return d.Log.error("JoseUtil._validateJwt: nbf is in the future",Y.nbf),Promise.reject(new Error("nbf is in the future: "+Y.nbf));if(!Y.exp)return d.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(Y.exp<Pe)return d.Log.error("JoseUtil._validateJwt: exp is in the past",Y.exp),Promise.reject(new Error("exp is in the past:"+Y.exp))}return Promise.resolve(Y)},x._validateJwt=function(R,F,P,K,B,W,Y){return x.validateJwtAttributes(R,P,K,B,W,Y).then(function(q){try{return h.JWS.verify(R,F,T)?q:(d.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(Pe){return d.Log.error(Pe&&Pe.message||Pe),Promise.reject(new Error("signature validation failed"))}})},x.hashString=function(R,F){try{return b.Util.hashString(R,F)}catch(P){d.Log.error(P)}},x.hexToBase64Url=function(R){try{return _(R)}catch(F){d.Log.error(F)}},x}()};var d=o(0);i.exports=a.default},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.SigninResponse=void 0;var d=function(){function h(f,y){for(var b=0;b<y.length;b++){var _=y[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}return function(f,y,b){return y&&h(f.prototype,y),b&&h(f,b),f}}(),l=o(3);function u(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}a.SigninResponse=function(){function h(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#";u(this,h);var b=l.UrlUtility.parseUrlFragment(f,y);this.error=b.error,this.error_description=b.error_description,this.error_uri=b.error_uri,this.code=b.code,this.state=b.state,this.id_token=b.id_token,this.session_state=b.session_state,this.access_token=b.access_token,this.token_type=b.token_type,this.scope=b.scope,this.profile=void 0,this.expires_in=b.expires_in}return d(h,[{key:"expires_in",get:function(){if(this.expires_at){var y=parseInt(Date.now()/1e3);return this.expires_at-y}},set:function(y){var b=parseInt(y);if(typeof b=="number"&&b>0){var _=parseInt(Date.now()/1e3);this.expires_at=_+b}}},{key:"expired",get:function(){var y=this.expires_in;if(y!==void 0)return y<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),h}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.SignoutRequest=void 0;var d=o(0),l=o(3),u=o(9);a.SignoutRequest=function h(f){var y=f.url,b=f.id_token_hint,_=f.post_logout_redirect_uri,A=f.data,T=f.extraQueryParams,x=f.request_type;if(function(F,P){if(!(F instanceof P))throw new TypeError("Cannot call a class as a function")}(this,h),!y)throw d.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var O in b&&(y=l.UrlUtility.addQueryParam(y,"id_token_hint",b)),_&&(y=l.UrlUtility.addQueryParam(y,"post_logout_redirect_uri",_),A&&(this.state=new u.State({data:A,request_type:x}),y=l.UrlUtility.addQueryParam(y,"state",this.state.id))),T)y=l.UrlUtility.addQueryParam(y,O,T[O]);this.url=y}},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.SignoutResponse=void 0;var d=o(3);a.SignoutResponse=function l(u){(function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")})(this,l);var h=d.UrlUtility.parseUrlFragment(u,"?");this.error=h.error,this.error_description=h.error_description,this.error_uri=h.error_uri,this.state=h.state}},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.InMemoryWebStorage=void 0;var d=function(){function u(h,f){for(var y=0;y<f.length;y++){var b=f[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,f,y){return f&&u(h.prototype,f),y&&u(h,y),h}}(),l=o(0);a.InMemoryWebStorage=function(){function u(){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,u),this._data={}}return u.prototype.getItem=function(f){return l.Log.debug("InMemoryWebStorage.getItem",f),this._data[f]},u.prototype.setItem=function(f,y){l.Log.debug("InMemoryWebStorage.setItem",f),this._data[f]=y},u.prototype.removeItem=function(f){l.Log.debug("InMemoryWebStorage.removeItem",f),delete this._data[f]},u.prototype.key=function(f){return Object.getOwnPropertyNames(this._data)[f]},d(u,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),u}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.UserManager=void 0;var d=function(){function P(K,B){for(var W=0;W<B.length;W++){var Y=B[W];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(K,Y.key,Y)}}return function(K,B,W){return B&&P(K.prototype,B),W&&P(K,W),K}}(),l=o(0),u=o(10),h=o(39),f=o(15),y=o(45),b=o(47),_=o(18),A=o(8),T=o(20),x=o(11),O=o(4);function R(P,K){if(!(P instanceof K))throw new TypeError("Cannot call a class as a function")}function F(P,K){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!K||typeof K!="object"&&typeof K!="function"?P:K}a.UserManager=function(P){function K(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.SilentRenewService,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.SessionMonitor,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T.TokenRevocationClient,Pe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:x.TokenClient,$=arguments.length>5&&arguments[5]!==void 0?arguments[5]:O.JoseUtil;R(this,K),B instanceof h.UserManagerSettings||(B=new h.UserManagerSettings(B));var ie=F(this,P.call(this,B));return ie._events=new y.UserManagerEvents(B),ie._silentRenewService=new W(ie),ie.settings.automaticSilentRenew&&(l.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),ie.startSilentRenew()),ie.settings.monitorSession&&(l.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),ie._sessionMonitor=new Y(ie)),ie._tokenRevocationClient=new q(ie._settings),ie._tokenClient=new Pe(ie._settings),ie._joseUtil=$,ie}return function(W,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);W.prototype=Object.create(Y&&Y.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(W,Y):W.__proto__=Y)}(K,P),K.prototype.getUser=function(){var W=this;return this._loadUser().then(function(Y){return Y?(l.Log.info("UserManager.getUser: user loaded"),W._events.load(Y,!1),Y):(l.Log.info("UserManager.getUser: user not found in storage"),null)})},K.prototype.removeUser=function(){var W=this;return this.storeUser(null).then(function(){l.Log.info("UserManager.removeUser: user removed from storage"),W._events.unload()})},K.prototype.signinRedirect=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(W=Object.assign({},W)).request_type="si:r";var Y={useReplaceToNavigate:W.useReplaceToNavigate};return this._signinStart(W,this._redirectNavigator,Y).then(function(){l.Log.info("UserManager.signinRedirect: successful")})},K.prototype.signinRedirectCallback=function(W){return this._signinEnd(W||this._redirectNavigator.url).then(function(Y){return Y.profile&&Y.profile.sub?l.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",Y.profile.sub):l.Log.info("UserManager.signinRedirectCallback: no sub"),Y})},K.prototype.signinPopup=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(W=Object.assign({},W)).request_type="si:p";var Y=W.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return Y?(W.redirect_uri=Y,W.display="popup",this._signin(W,this._popupNavigator,{startUrl:Y,popupWindowFeatures:W.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:W.popupWindowTarget||this.settings.popupWindowTarget}).then(function(q){return q&&(q.profile&&q.profile.sub?l.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",q.profile.sub):l.Log.info("UserManager.signinPopup: no sub")),q})):(l.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},K.prototype.signinPopupCallback=function(W){return this._signinCallback(W,this._popupNavigator).then(function(Y){return Y&&(Y.profile&&Y.profile.sub?l.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",Y.profile.sub):l.Log.info("UserManager.signinPopupCallback: no sub")),Y}).catch(function(Y){l.Log.error(Y.message)})},K.prototype.signinSilent=function(){var W=this,Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Y=Object.assign({},Y),this._loadUser().then(function(q){return q&&q.refresh_token?(Y.refresh_token=q.refresh_token,W._useRefreshToken(Y)):(Y.request_type="si:s",Y.id_token_hint=Y.id_token_hint||W.settings.includeIdTokenInSilentRenew&&q&&q.id_token,q&&W._settings.validateSubOnSilentRenew&&(l.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",q.profile.sub),Y.current_sub=q.profile.sub),W._signinSilentIframe(Y))})},K.prototype._useRefreshToken=function(){var W=this,Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(Y).then(function(q){return q?q.access_token?W._loadUser().then(function(Pe){if(Pe){var $=Promise.resolve();return q.id_token&&($=W._validateIdTokenFromTokenRefreshToken(Pe.profile,q.id_token)),$.then(function(){return l.Log.debug("UserManager._useRefreshToken: refresh token response success"),Pe.id_token=q.id_token||Pe.id_token,Pe.access_token=q.access_token,Pe.refresh_token=q.refresh_token||Pe.refresh_token,Pe.expires_in=q.expires_in,W.storeUser(Pe).then(function(){return W._events.load(Pe),Pe})})}return null}):(l.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(l.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},K.prototype._validateIdTokenFromTokenRefreshToken=function(W,Y){var q=this;return this._metadataService.getIssuer().then(function(Pe){return q.settings.getEpochTime().then(function($){return q._joseUtil.validateJwtAttributes(Y,Pe,q._settings.client_id,q._settings.clockSkew,$).then(function(ie){return ie?ie.sub!==W.sub?(l.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):ie.auth_time&&ie.auth_time!==W.auth_time?(l.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):ie.azp&&ie.azp!==W.azp?(l.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!ie.azp&&W.azp?(l.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(l.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},K.prototype._signinSilentIframe=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=W.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return Y?(W.redirect_uri=Y,W.prompt=W.prompt||"none",this._signin(W,this._iframeNavigator,{startUrl:Y,silentRequestTimeout:W.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(q){return q&&(q.profile&&q.profile.sub?l.Log.info("UserManager.signinSilent: successful, signed in sub: ",q.profile.sub):l.Log.info("UserManager.signinSilent: no sub")),q})):(l.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},K.prototype.signinSilentCallback=function(W){return this._signinCallback(W,this._iframeNavigator).then(function(Y){return Y&&(Y.profile&&Y.profile.sub?l.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",Y.profile.sub):l.Log.info("UserManager.signinSilentCallback: no sub")),Y})},K.prototype.signinCallback=function(W){var Y=this;return this.readSigninResponseState(W).then(function(q){var Pe=q.state;return q.response,Pe.request_type==="si:r"?Y.signinRedirectCallback(W):Pe.request_type==="si:p"?Y.signinPopupCallback(W):Pe.request_type==="si:s"?Y.signinSilentCallback(W):Promise.reject(new Error("invalid response_type in state"))})},K.prototype.signoutCallback=function(W,Y){var q=this;return this.readSignoutResponseState(W).then(function(Pe){var $=Pe.state,ie=Pe.response;return $?$.request_type==="so:r"?q.signoutRedirectCallback(W):$.request_type==="so:p"?q.signoutPopupCallback(W,Y):Promise.reject(new Error("invalid response_type in state")):ie})},K.prototype.querySessionStatus=function(){var W=this,Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(Y=Object.assign({},Y)).request_type="si:s";var q=Y.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return q?(Y.redirect_uri=q,Y.prompt="none",Y.response_type=Y.response_type||this.settings.query_status_response_type,Y.scope=Y.scope||"openid",Y.skipUserInfo=!0,this._signinStart(Y,this._iframeNavigator,{startUrl:q,silentRequestTimeout:Y.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Pe){return W.processSigninResponse(Pe.url).then(function($){if(l.Log.debug("UserManager.querySessionStatus: got signin response"),$.session_state&&$.profile.sub)return l.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",$.profile.sub),{session_state:$.session_state,sub:$.profile.sub,sid:$.profile.sid};l.Log.info("querySessionStatus successful, user not authenticated")}).catch(function($){if($.session_state&&W.settings.monitorAnonymousSession&&($.message=="login_required"||$.message=="consent_required"||$.message=="interaction_required"||$.message=="account_selection_required"))return l.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:$.session_state};throw $})})):(l.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},K.prototype._signin=function(W,Y){var q=this,Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signinStart(W,Y,Pe).then(function($){return q._signinEnd($.url,W)})},K.prototype._signinStart=function(W,Y){var q=this,Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Y.prepare(Pe).then(function($){return l.Log.debug("UserManager._signinStart: got navigator window handle"),q.createSigninRequest(W).then(function(ie){return l.Log.debug("UserManager._signinStart: got signin request"),Pe.url=ie.url,Pe.id=ie.state.id,$.navigate(Pe)}).catch(function(ie){throw $.close&&(l.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),$.close()),ie})})},K.prototype._signinEnd=function(W){var Y=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.processSigninResponse(W).then(function(Pe){l.Log.debug("UserManager._signinEnd: got signin response");var $=new f.User(Pe);if(q.current_sub){if(q.current_sub!==$.profile.sub)return l.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",$.profile.sub),Promise.reject(new Error("login_required"));l.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return Y.storeUser($).then(function(){return l.Log.debug("UserManager._signinEnd: user stored"),Y._events.load($),$})})},K.prototype._signinCallback=function(W,Y){l.Log.debug("UserManager._signinCallback");var q=this._settings.response_mode==="query"||!this._settings.response_mode&&A.SigninRequest.isCode(this._settings.response_type)?"?":"#";return Y.callback(W,void 0,q)},K.prototype.signoutRedirect=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(W=Object.assign({},W)).request_type="so:r";var Y=W.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;Y&&(W.post_logout_redirect_uri=Y);var q={useReplaceToNavigate:W.useReplaceToNavigate};return this._signoutStart(W,this._redirectNavigator,q).then(function(){l.Log.info("UserManager.signoutRedirect: successful")})},K.prototype.signoutRedirectCallback=function(W){return this._signoutEnd(W||this._redirectNavigator.url).then(function(Y){return l.Log.info("UserManager.signoutRedirectCallback: successful"),Y})},K.prototype.signoutPopup=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(W=Object.assign({},W)).request_type="so:p";var Y=W.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return W.post_logout_redirect_uri=Y,W.display="popup",W.post_logout_redirect_uri&&(W.state=W.state||{}),this._signout(W,this._popupNavigator,{startUrl:Y,popupWindowFeatures:W.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:W.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){l.Log.info("UserManager.signoutPopup: successful")})},K.prototype.signoutPopupCallback=function(W,Y){return Y===void 0&&typeof W=="boolean"&&(Y=W,W=null),this._popupNavigator.callback(W,Y,"?").then(function(){l.Log.info("UserManager.signoutPopupCallback: successful")})},K.prototype._signout=function(W,Y){var q=this,Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signoutStart(W,Y,Pe).then(function($){return q._signoutEnd($.url)})},K.prototype._signoutStart=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=this,q=arguments[1],Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return q.prepare(Pe).then(function($){return l.Log.debug("UserManager._signoutStart: got navigator window handle"),Y._loadUser().then(function(ie){return l.Log.debug("UserManager._signoutStart: loaded current user from storage"),(Y._settings.revokeAccessTokenOnSignout?Y._revokeInternal(ie):Promise.resolve()).then(function(){var ge=W.id_token_hint||ie&&ie.id_token;return ge&&(l.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),W.id_token_hint=ge),Y.removeUser().then(function(){return l.Log.debug("UserManager._signoutStart: user removed, creating signout request"),Y.createSignoutRequest(W).then(function(Se){return l.Log.debug("UserManager._signoutStart: got signout request"),Pe.url=Se.url,Se.state&&(Pe.id=Se.state.id),$.navigate(Pe)})})})}).catch(function(ie){throw $.close&&(l.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),$.close()),ie})})},K.prototype._signoutEnd=function(W){return this.processSignoutResponse(W).then(function(Y){return l.Log.debug("UserManager._signoutEnd: got signout response"),Y})},K.prototype.revokeAccessToken=function(){var W=this;return this._loadUser().then(function(Y){return W._revokeInternal(Y,!0).then(function(q){if(q)return l.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),Y.access_token=null,Y.refresh_token=null,Y.expires_at=null,Y.token_type=null,W.storeUser(Y).then(function(){l.Log.debug("UserManager.revokeAccessToken: user stored"),W._events.load(Y)})})}).then(function(){l.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},K.prototype._revokeInternal=function(W,Y){var q=this;if(W){var Pe=W.access_token,$=W.refresh_token;return this._revokeAccessTokenInternal(Pe,Y).then(function(ie){return q._revokeRefreshTokenInternal($,Y).then(function(ge){return ie||ge||l.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),ie||ge})})}return Promise.resolve(!1)},K.prototype._revokeAccessTokenInternal=function(W,Y){return!W||W.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(W,Y).then(function(){return!0})},K.prototype._revokeRefreshTokenInternal=function(W,Y){return W?this._tokenRevocationClient.revoke(W,Y,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},K.prototype.startSilentRenew=function(){this._silentRenewService.start()},K.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},K.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(W){return W?(l.Log.debug("UserManager._loadUser: user storageString loaded"),f.User.fromStorageString(W)):(l.Log.debug("UserManager._loadUser: no user storageString"),null)})},K.prototype.storeUser=function(W){if(W){l.Log.debug("UserManager.storeUser: storing user");var Y=W.toStorageString();return this._userStore.set(this._userStoreKey,Y)}return l.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},d(K,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),K}(u.OidcClient)},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.UserManagerSettings=void 0;var d=function(){function x(O,R){for(var F=0;F<R.length;F++){var P=R[F];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(O,P.key,P)}}return function(O,R,F){return R&&x(O.prototype,R),F&&x(O,F),O}}(),l=(o(0),o(5)),u=o(40),h=o(41),f=o(43),y=o(6),b=o(1),_=o(8);function A(x,O){if(!(x instanceof O))throw new TypeError("Cannot call a class as a function")}function T(x,O){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||typeof O!="object"&&typeof O!="function"?x:O}a.UserManagerSettings=function(x){function O(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=R.popup_redirect_uri,P=R.popup_post_logout_redirect_uri,K=R.popupWindowFeatures,B=R.popupWindowTarget,W=R.silent_redirect_uri,Y=R.silentRequestTimeout,q=R.automaticSilentRenew,Pe=q!==void 0&&q,$=R.validateSubOnSilentRenew,ie=$!==void 0&&$,ge=R.includeIdTokenInSilentRenew,Se=ge===void 0||ge,tt=R.monitorSession,lt=tt===void 0||tt,Ne=R.monitorAnonymousSession,yt=Ne!==void 0&&Ne,ve=R.checkSessionInterval,rt=ve===void 0?2e3:ve,J=R.stopCheckSessionOnError,xe=J===void 0||J,Ze=R.query_status_response_type,je=R.revokeAccessTokenOnSignout,ht=je!==void 0&&je,Nt=R.accessTokenExpiringNotificationTime,kt=Nt===void 0?60:Nt,Me=R.redirectNavigator,le=Me===void 0?new u.RedirectNavigator:Me,Te=R.popupNavigator,Je=Te===void 0?new h.PopupNavigator:Te,se=R.iframeNavigator,M=se===void 0?new f.IFrameNavigator:se,D=R.userStore,G=D===void 0?new y.WebStorageStateStore({store:b.Global.sessionStorage}):D;A(this,O);var re=T(this,x.call(this,arguments[0]));return re._popup_redirect_uri=F,re._popup_post_logout_redirect_uri=P,re._popupWindowFeatures=K,re._popupWindowTarget=B,re._silent_redirect_uri=W,re._silentRequestTimeout=Y,re._automaticSilentRenew=Pe,re._validateSubOnSilentRenew=ie,re._includeIdTokenInSilentRenew=Se,re._accessTokenExpiringNotificationTime=kt,re._monitorSession=lt,re._monitorAnonymousSession=yt,re._checkSessionInterval=rt,re._stopCheckSessionOnError=xe,Ze?re._query_status_response_type=Ze:arguments[0]&&arguments[0].response_type?re._query_status_response_type=_.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":re._query_status_response_type="id_token",re._revokeAccessTokenOnSignout=ht,re._redirectNavigator=le,re._popupNavigator=Je,re._iframeNavigator=M,re._userStore=G,re}return function(F,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);F.prototype=Object.create(P&&P.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(F,P):F.__proto__=P)}(O,x),d(O,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),O}(l.OidcClientSettings)},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.RedirectNavigator=void 0;var d=function(){function u(h,f){for(var y=0;y<f.length;y++){var b=f[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,f,y){return f&&u(h.prototype,f),y&&u(h,y),h}}(),l=o(0);a.RedirectNavigator=function(){function u(){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.prototype.prepare=function(){return Promise.resolve(this)},u.prototype.navigate=function(f){return f&&f.url?(f.useReplaceToNavigate?window.location.replace(f.url):window.location=f.url,Promise.resolve()):(l.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},d(u,[{key:"url",get:function(){return window.location.href}}]),u}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.PopupNavigator=void 0;var d=o(0),l=o(42);a.PopupNavigator=function(){function u(){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.prototype.prepare=function(f){var y=new l.PopupWindow(f);return Promise.resolve(y)},u.prototype.callback=function(f,y,b){d.Log.debug("PopupNavigator.callback");try{return l.PopupWindow.notifyOpener(f,y,b),Promise.resolve()}catch(_){return Promise.reject(_)}},u}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.PopupWindow=void 0;var d=function(){function h(f,y){for(var b=0;b<y.length;b++){var _=y[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}return function(f,y,b){return y&&h(f.prototype,y),b&&h(f,b),f}}(),l=o(0),u=o(3);a.PopupWindow=function(){function h(f){var y=this;(function(T,x){if(!(T instanceof x))throw new TypeError("Cannot call a class as a function")})(this,h),this._promise=new Promise(function(A,T){y._resolve=A,y._reject=T});var b=f.popupWindowTarget||"_blank",_=f.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",b,_),this._popup&&(l.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return h.prototype.navigate=function(y){return this._popup?y&&y.url?(l.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=y.id,this._id&&(window["popupCallback_"+y.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=y.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},h.prototype._success=function(y){l.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(y)},h.prototype._error=function(y){l.Log.error("PopupWindow.error: ",y),this._cleanup(),this._reject(new Error(y))},h.prototype.close=function(){this._cleanup(!1)},h.prototype._cleanup=function(y){l.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!y&&this._popup.close(),this._popup=null},h.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},h.prototype._callback=function(y,b){this._cleanup(b),y?(l.Log.debug("PopupWindow.callback success"),this._success({url:y})):(l.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},h.notifyOpener=function(y,b,_){if(window.opener){if(y=y||window.location.href){var A=u.UrlUtility.parseUrlFragment(y,_);if(A.state){var T="popupCallback_"+A.state,x=window.opener[T];x?(l.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),x(y,b)):l.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else l.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else l.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},d(h,[{key:"promise",get:function(){return this._promise}}]),h}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.IFrameNavigator=void 0;var d=o(0),l=o(44);a.IFrameNavigator=function(){function u(){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.prototype.prepare=function(f){var y=new l.IFrameWindow(f);return Promise.resolve(y)},u.prototype.callback=function(f){d.Log.debug("IFrameNavigator.callback");try{return l.IFrameWindow.notifyParent(f),Promise.resolve()}catch(y){return Promise.reject(y)}},u}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.IFrameWindow=void 0;var d=function(){function u(h,f){for(var y=0;y<f.length;y++){var b=f[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}return function(h,f,y){return f&&u(h.prototype,f),y&&u(h,y),h}}(),l=o(0);a.IFrameWindow=function(){function u(h){var f=this;(function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")})(this,u),this._promise=new Promise(function(y,b){f._resolve=y,f._reject=b}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return u.prototype.navigate=function(f){if(f&&f.url){var y=f.silentRequestTimeout||1e4;l.Log.debug("IFrameWindow.navigate: Using timeout of:",y),this._timer=window.setTimeout(this._timeout.bind(this),y),this._frame.src=f.url}else this._error("No url provided");return this.promise},u.prototype._success=function(f){this._cleanup(),l.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(f)},u.prototype._error=function(f){this._cleanup(),l.Log.error(f),this._reject(new Error(f))},u.prototype.close=function(){this._cleanup()},u.prototype._cleanup=function(){this._frame&&(l.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},u.prototype._timeout=function(){l.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},u.prototype._message=function(f){if(l.Log.debug("IFrameWindow.message"),this._timer&&f.origin===this._origin&&f.source===this._frame.contentWindow&&typeof f.data=="string"&&(f.data.startsWith("http://")||f.data.startsWith("https://"))){var y=f.data;y?this._success({url:y}):this._error("Invalid response from frame")}},u.notifyParent=function(f){l.Log.debug("IFrameWindow.notifyParent"),(f=f||window.location.href)&&(l.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(f,location.protocol+"//"+location.host))},d(u,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),u}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.UserManagerEvents=void 0;var d=o(0),l=o(16),u=o(17);a.UserManagerEvents=function(h){function f(y){(function(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")})(this,f);var b=function(A,T){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!T||typeof T!="object"&&typeof T!="function"?A:T}(this,h.call(this,y));return b._userLoaded=new u.Event("User loaded"),b._userUnloaded=new u.Event("User unloaded"),b._silentRenewError=new u.Event("Silent renew error"),b._userSignedIn=new u.Event("User signed in"),b._userSignedOut=new u.Event("User signed out"),b._userSessionChanged=new u.Event("User session changed"),b}return function(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}(f,h),f.prototype.load=function(b){var _=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];d.Log.debug("UserManagerEvents.load"),h.prototype.load.call(this,b),_&&this._userLoaded.raise(b)},f.prototype.unload=function(){d.Log.debug("UserManagerEvents.unload"),h.prototype.unload.call(this),this._userUnloaded.raise()},f.prototype.addUserLoaded=function(b){this._userLoaded.addHandler(b)},f.prototype.removeUserLoaded=function(b){this._userLoaded.removeHandler(b)},f.prototype.addUserUnloaded=function(b){this._userUnloaded.addHandler(b)},f.prototype.removeUserUnloaded=function(b){this._userUnloaded.removeHandler(b)},f.prototype.addSilentRenewError=function(b){this._silentRenewError.addHandler(b)},f.prototype.removeSilentRenewError=function(b){this._silentRenewError.removeHandler(b)},f.prototype._raiseSilentRenewError=function(b){d.Log.debug("UserManagerEvents._raiseSilentRenewError",b.message),this._silentRenewError.raise(b)},f.prototype.addUserSignedIn=function(b){this._userSignedIn.addHandler(b)},f.prototype.removeUserSignedIn=function(b){this._userSignedIn.removeHandler(b)},f.prototype._raiseUserSignedIn=function(){d.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},f.prototype.addUserSignedOut=function(b){this._userSignedOut.addHandler(b)},f.prototype.removeUserSignedOut=function(b){this._userSignedOut.removeHandler(b)},f.prototype._raiseUserSignedOut=function(){d.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},f.prototype.addUserSessionChanged=function(b){this._userSessionChanged.addHandler(b)},f.prototype.removeUserSessionChanged=function(b){this._userSessionChanged.removeHandler(b)},f.prototype._raiseUserSessionChanged=function(){d.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},f}(l.AccessTokenEvents)},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.Timer=void 0;var d=function(){function b(_,A){for(var T=0;T<A.length;T++){var x=A[T];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(_,x.key,x)}}return function(_,A,T){return A&&b(_.prototype,A),T&&b(_,T),_}}(),l=o(0),u=o(1),h=o(17);function f(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function y(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?b:_}a.Timer=function(b){function _(A){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.Global.timer,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;f(this,_);var O=y(this,b.call(this,A));return O._timer=T,O._nowFunc=x||function(){return Date.now()/1e3},O}return function(T,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);T.prototype=Object.create(x&&x.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(T,x):T.__proto__=x)}(_,b),_.prototype.init=function(T){T<=0&&(T=1),T=parseInt(T);var x=this.now+T;if(this.expiration===x&&this._timerHandle)l.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),l.Log.debug("Timer.init timer "+this._name+" for duration:",T),this._expiration=x;var O=5;T<O&&(O=T),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*O)}},_.prototype.cancel=function(){this._timerHandle&&(l.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},_.prototype._callback=function(){var T=this._expiration-this.now;l.Log.debug("Timer.callback; "+this._name+" timer expires in:",T),this._expiration<=this.now&&(this.cancel(),b.prototype.raise.call(this))},d(_,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),_}(h.Event)},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.SilentRenewService=void 0;var d=o(0);a.SilentRenewService=function(){function l(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,l),this._userManager=u}return l.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(h){}).catch(function(h){d.Log.error("SilentRenewService.start: Error from getUser:",h.message)}))},l.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},l.prototype._tokenExpiring=function(){var h=this;this._userManager.signinSilent().then(function(f){d.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(f){d.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",f.message),h._userManager.events._raiseSilentRenewError(f)})},l}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.CordovaPopupNavigator=void 0;var d=o(21);a.CordovaPopupNavigator=function(){function l(){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,l)}return l.prototype.prepare=function(h){var f=new d.CordovaPopupWindow(h);return Promise.resolve(f)},l}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.CordovaIFrameNavigator=void 0;var d=o(21);a.CordovaIFrameNavigator=function(){function l(){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,l)}return l.prototype.prepare=function(h){h.popupWindowFeatures="hidden=yes";var f=new d.CordovaPopupWindow(h);return Promise.resolve(f)},l}()},function(i,a,o){Object.defineProperty(a,"__esModule",{value:!0}),a.Version="1.11.6"}])})}(Vy)),Vy.exports}var lo=r2();gf();const{fetch:mb}=globalThis;let Py;const n2=new Uint8Array(16);function i2(){if(!Py&&(Py=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Py))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Py(n2)}const Yi=[];for(let e=0;e<256;++e)Yi.push((e+256).toString(16).slice(1));function a2(e,r=0){return Yi[e[r+0]]+Yi[e[r+1]]+Yi[e[r+2]]+Yi[e[r+3]]+"-"+Yi[e[r+4]]+Yi[e[r+5]]+"-"+Yi[e[r+6]]+Yi[e[r+7]]+"-"+Yi[e[r+8]]+Yi[e[r+9]]+"-"+Yi[e[r+10]]+Yi[e[r+11]]+Yi[e[r+12]]+Yi[e[r+13]]+Yi[e[r+14]]+Yi[e[r+15]]}const o2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),DS={randomUUID:o2};function s2(e,r,i){if(DS.randomUUID&&!e)return DS.randomUUID();e=e||{};const a=e.random||(e.rng||i2)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,a2(a)}const Xy=["ES256","RS256"],l2="openid",u2="offline_access",c2="webid",f2=[l2,u2,c2].join(" ");async function d2(e,r){const i=await mb.call(globalThis,e);if(i.status!==200)throw new Error(`Could not fetch JWKS for [${r}] at [${e}]: ${i.status} ${i.statusText}`);let a;try{a=(await i.json()).keys[0]}catch(o){throw new Error(`Malformed JWKS for [${r}] at [${e}]: ${o.message}`)}return a}async function vb(e,r,i,a){const o=await d2(r,i);let d;try{const{payload:l}=await $1(e,await Eg(o),{issuer:i,audience:a});d=l}catch(l){throw new Error(`Token verification failed: ${l.stack}`)}if(typeof d.webid=="string")return d.webid;if(typeof d.sub!="string")throw new Error(`The token ${JSON.stringify(d)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(d.sub),d.sub}catch(l){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${d.sub}] is invalid as a URL - error [${l}].`)}}function h2(e){const r=new URL(e);return r.searchParams.delete("state"),r.searchParams.delete("code"),r.searchParams.delete("error"),r.searchParams.delete("error_description"),r.searchParams.delete("iss"),r}function p2(e,r){var i;return(i=r.find(a=>e.includes(a)))!==null&&i!==void 0?i:null}class Ny extends Error{constructor(r){super(`Invalid response from OIDC provider: missing fields ${r}`),this.missingFields=r}}class g2 extends Error{constructor(r,i,a){super(r),this.error=i,this.errorDescription=a}}function y2(e){const r=new URL(e);return new URL(r.pathname,r.origin).toString()}async function Q1(e,r,i){return new q1({htu:y2(e),htm:r.toUpperCase(),jti:s2()}).setProtectedHeader({alg:Xy[0],jwk:i.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(i.privateKey,{})}async function m2(){const{privateKey:e,publicKey:r}=await Y1(Xy[0]),i={privateKey:e,publicKey:await cb(r)};return[i.publicKey.alg]=Xy,i}function v2(e,r){var i,a,o,d;throw e.error==="invalid_redirect_uri"?new Error(`Dynamic client registration failed: the provided redirect uri [${(i=r.redirectUrl)===null||i===void 0?void 0:i.toString()}] is invalid - ${(a=e.error_description)!==null&&a!==void 0?a:""}`):e.error==="invalid_client_metadata"?new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(r)} is invalid - ${(o=e.error_description)!==null&&o!==void 0?o:""}`):new Error(`Dynamic client registration failed: ${e.error} - ${(d=e.error_description)!==null&&d!==void 0?d:""}`)}function b2(e,r){if(e.client_id===void 0)throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(e)}`);if(r.redirectUrl&&(e.redirect_uris===void 0||e.redirect_uris[0]!==r.redirectUrl.toString()))throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(e.redirect_uris)} don't match the provided ${JSON.stringify([r.redirectUrl.toString()])}`)}async function w2(e,r){var i;if(!r.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(r.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const a=p2(r.idTokenSigningAlgValuesSupported,Xy),o={client_name:e.clientName,application_type:"web",redirect_uris:[(i=e.redirectUrl)===null||i===void 0?void 0:i.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:a,grant_types:["authorization_code","refresh_token"]},d={"Content-Type":"application/json"},l=await fetch(r.registrationEndpoint.toString(),{method:"POST",headers:d,body:JSON.stringify(o)});if(l.ok){const u=await l.json();return b2(u,e),{clientId:u.client_id,clientSecret:u.client_secret,idTokenSignedResponseAlg:u.id_token_signed_response_alg,clientType:"dynamic"}}throw l.status===400&&v2(await l.json(),e),new Error(`Dynamic client registration failed: the server returned ${l.status} ${l.statusText} - ${await l.text()}`)}function _2(e){return e.error!==void 0&&typeof e.error=="string"}function US(e){return e.error_description!==void 0&&typeof e.error_description=="string"}function S2(e){return e.error_uri!==void 0&&typeof e.error_uri=="string"}function E2(e){return e.access_token!==void 0&&typeof e.access_token=="string"}function A2(e){return e.id_token!==void 0&&typeof e.id_token=="string"}function R2(e){return e.refresh_token!==void 0&&typeof e.refresh_token=="string"}function x2(e){return e.token_type!==void 0&&typeof e.token_type=="string"}function T2(e){return e.expires_in===void 0||typeof e.expires_in=="number"}function C2(e,r){if(r.grantType&&(!e.grantTypesSupported||!e.grantTypesSupported.includes(r.grantType)))throw new Error(`The issuer [${e.issuer}] does not support the [${r.grantType}] grant`);if(!e.tokenEndpoint)throw new Error(`This issuer [${e.issuer}] does not have a token endpoint`)}function X1(e,r){if(_2(e))throw new g2(`Token endpoint returned error [${e.error}]${US(e)?`: ${e.error_description}`:""}${S2(e)?` (see ${e.error_uri})`:""}`,e.error,US(e)?e.error_description:void 0);if(!E2(e))throw new Ny(["access_token"]);if(!A2(e))throw new Ny(["id_token"]);if(!x2(e))throw new Ny(["token_type"]);if(!T2(e))throw new Ny(["expires_in"]);if(!r&&e.token_type.toLowerCase()!=="bearer")throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${e.token_type}].`);return e}async function O2(e,r,i,a){C2(e,i);const o={"content-type":"application/x-www-form-urlencoded"};let d;d=await m2(),o.DPoP=await Q1(e.tokenEndpoint,"POST",d),r.clientSecret&&(o.Authorization=`Basic ${btoa(`${r.clientId}:${r.clientSecret}`)}`);const l={grant_type:i.grantType,redirect_uri:i.redirectUrl,code:i.code,code_verifier:i.codeVerifier,client_id:r.clientId},u={method:"POST",headers:o,body:new URLSearchParams(l).toString()},f=await(await mb(e.tokenEndpoint,u)).json(),y=X1(f,a),b=await vb(y.id_token,e.jwksUri,e.issuer,r.clientId);return{accessToken:y.access_token,idToken:y.id_token,refreshToken:R2(y)?y.refresh_token:void 0,webId:b,dpopKey:d,expiresIn:y.expires_in}}async function I2(e){let r;try{const i=new lo.OidcClient({response_mode:"query",loadUserInfo:!1});if(r=await i.processSigninResponse(e),i.settings.metadata===void 0)throw new Error("Cannot retrieve issuer metadata from client information in storage.");if(i.settings.metadata.jwks_uri===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'jwks_uri' is undefined");if(i.settings.metadata.issuer===void 0)throw new Error("Missing some issuer metadata from client information in storage: 'issuer' is undefined");if(i.settings.client_id===void 0)throw new Error("Missing some client information in storage: 'client_id' is undefined");const a=await vb(r.id_token,i.settings.metadata.jwks_uri,i.settings.metadata.issuer,i.settings.client_id);return{accessToken:r.access_token,idToken:r.id_token,webId:a,refreshToken:r.refresh_token}}catch(i){throw new Error(`Problem handling Auth Code Grant (Flow) redirect - URL [${e}]: ${i}`)}}async function P2(e,r,i){return O2(e,r,i,!0)}const N2=e=>{try{return new URL(e),!0}catch{return!1}};async function F2(e,r,i,a){if(i.clientId===void 0)throw new Error("No client ID available when trying to refresh the access token.");const o={grant_type:"refresh_token",refresh_token:e,scope:f2};let d={};a!==void 0&&(d={DPoP:await Q1(r.tokenEndpoint,"POST",a)});let l={};i.clientSecret!==void 0?l={Authorization:`Basic ${btoa(`${i.clientId}:${i.clientSecret}`)}`}:N2(i.clientId)&&(o.client_id=i.clientId);const u=await mb(r.tokenEndpoint,{method:"POST",body:new URLSearchParams(o).toString(),headers:{...d,...l,"Content-Type":"application/x-www-form-urlencoded"}});let h;try{h=await u.json()}catch{throw new Error(`The token endpoint of issuer ${r.issuer} returned a malformed response.`)}const f=X1(h,a!==void 0),y=await vb(f.id_token,r.jwksUri,r.issuer,i.clientId);return{accessToken:f.access_token,idToken:f.id_token,refreshToken:typeof f.refresh_token=="string"?f.refresh_token:void 0,webId:y,dpopKey:a,expiresIn:f.expires_in}}function D2(e){const r=h2(e);return r.hash="",e.includes(`${r.origin}/`)?r.href:`${r.origin}${r.href.substring(r.origin.length+1)}`}async function U2(){await new lo.OidcClient({response_mode:"query"}).clearStaleState(new lo.WebStorageStateStore({}));const r=window.localStorage,i=[];for(let a=0;a<=r.length;a+=1){const o=r.key(a);o&&(o.match(/^oidc\..+$/)||o.match(/^solidClientAuthenticationUser:.+$/))&&i.push(o)}i.forEach(a=>r.removeItem(a))}const L2=Object.freeze(Object.defineProperty({__proto__:null,CordovaIFrameNavigator:lo.CordovaIFrameNavigator,CordovaPopupNavigator:lo.CordovaPopupNavigator,InMemoryWebStorage:lo.InMemoryWebStorage,Log:lo.Log,OidcClient:lo.OidcClient,SessionMonitor:lo.SessionMonitor,User:lo.User,UserManager:lo.UserManager,Version:lo.Version,WebStorageStateStore:lo.WebStorageStateStore,clearOidcPersistentStorage:U2,getBearerToken:I2,getDpopToken:P2,normalizeCallbackUrl:D2,refresh:F2,registerClient:w2},Symbol.toStringTag,{value:"Module"})),M2=nm(L2);var LS;function k2(){return LS||(LS=1,function(e){var r=e2(),i=nb(),a=gf(),o=M2,d=Qv();class l extends r.StorageUtility{constructor(le,Te){super(le,Te)}}class u extends r.ClientAuthentication{constructor(){super(...arguments),this.login=async(le,Te)=>{var Je,se;await this.sessionInfoManager.clear(le.sessionId);const M=(Je=le.redirectUrl)!==null&&Je!==void 0?Je:o.normalizeCallbackUrl(window.location.href);if(!r.isValidRedirectUrl(M))throw new Error(`${M} is not a valid redirect URL, it is either a malformed IRI, includes a hash fragment, or reserved query parameters ('code' or 'state').`);await this.loginHandler.handle({...le,redirectUrl:M,clientName:(se=le.clientName)!==null&&se!==void 0?se:le.clientId,eventEmitter:Te})},this.validateCurrentSession=async le=>{const Te=await this.sessionInfoManager.get(le);return Te===void 0||Te.clientAppId===void 0||Te.issuer===void 0?null:Te},this.handleIncomingRedirect=async(le,Te)=>{try{const Je=await this.redirectHandler.handle(le,Te);return this.fetch=Je.fetch.bind(window),this.boundLogout=Je.getLogoutUrl,await this.cleanUrlAfterRedirect(le),{isLoggedIn:Je.isLoggedIn,webId:Je.webId,sessionId:Je.sessionId,expirationDate:Je.expirationDate}}catch(Je){await this.cleanUrlAfterRedirect(le),Te.emit(r.EVENTS.ERROR,"redirect",Je);return}}}async cleanUrlAfterRedirect(le){const Te=r.removeOpenIdParams(le).href;for(window.history.replaceState(null,"",Te);window.location.href!==Te;)await new Promise(Je=>{setTimeout(()=>Je(),1)})}}function h(Me){return typeof Me.oidcIssuer=="string"}function f(Me){return typeof Me.redirectUrl=="string"}class y{constructor(le,Te,Je,se){this.storageUtility=le,this.oidcHandler=Te,this.issuerConfigFetcher=Je,this.clientRegistrar=se,this.storageUtility=le,this.oidcHandler=Te,this.issuerConfigFetcher=Je,this.clientRegistrar=se}async canHandle(le){return h(le)&&f(le)}async handle(le){if(!h(le))throw new r.ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(le)}`);if(!f(le))throw new r.ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(le)}`);const Te=await this.issuerConfigFetcher.fetchConfig(le.oidcIssuer),Je=await r.handleRegistration(le,Te,this.storageUtility,this.clientRegistrar),se={issuer:Te.issuer,dpop:le.tokenType.toLowerCase()==="dpop",...le,issuerConfiguration:Te,client:Je};return this.oidcHandler.handle(se)}}class b extends r.AuthorizationCodeWithPkceOidcHandlerBase{async handle(le){var Te;const Je={authority:le.issuer.toString(),client_id:le.client.clientId,client_secret:le.client.clientSecret,redirect_uri:le.redirectUrl.toString(),post_logout_redirect_uri:le.redirectUrl.toString(),response_type:"code",scope:r.DEFAULT_SCOPES,filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:(Te=le.prompt)!==null&&Te!==void 0?Te:"consent"},se=new o.OidcClient(Je);try{const M=await se.createSigninRequest();return await this.handleRedirect({oidcLoginOptions:le,state:M.state._id,codeVerifier:M.state._code_verifier,targetUrl:M.url.toString()})}catch(M){console.error(M)}}}const _=".well-known/openid-configuration",A={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},end_session_endpoint:{toKey:"endSessionEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};function T(Me){const le={};return Object.keys(Me).forEach(Te=>{A[Te]&&(le[A[Te].toKey]=Me[Te])}),Array.isArray(le.scopesSupported)||(le.scopesSupported=["openid"]),le}class x{constructor(le){this.storageUtility=le,this.storageUtility=le}static getLocalStorageKey(le){return`issuerConfig:${le}`}async fetchConfig(le){let Te;const Je=new URL(_,le.endsWith("/")?le:`${le}/`).href,se=await d.fetch.call(globalThis,Je);try{Te=T(await se.json())}catch(M){throw new r.ConfigurationError(`[${le.toString()}] has an invalid configuration: ${M.message}`)}return await this.storageUtility.set(x.getLocalStorageKey(le),JSON.stringify(Te)),Te}}async function O(Me,le){await r.clear(Me,le),await o.clearOidcPersistentStorage()}class R extends r.SessionInfoManagerBase{async get(le){const[Te,Je,se,M,D,G,re,we]=await Promise.all([this.storageUtility.getForUser(le,"isLoggedIn",{secure:!0}),this.storageUtility.getForUser(le,"webId",{secure:!0}),this.storageUtility.getForUser(le,"clientId",{secure:!1}),this.storageUtility.getForUser(le,"clientSecret",{secure:!1}),this.storageUtility.getForUser(le,"redirectUrl",{secure:!1}),this.storageUtility.getForUser(le,"refreshToken",{secure:!0}),this.storageUtility.getForUser(le,"issuer",{secure:!1}),this.storageUtility.getForUser(le,"tokenType",{secure:!1})]);if(typeof D=="string"&&!r.isValidRedirectUrl(D)){await Promise.all([this.storageUtility.deleteAllUserData(le,{secure:!1}),this.storageUtility.deleteAllUserData(le,{secure:!0})]);return}if(we!==void 0&&!r.isSupportedTokenType(we))throw new Error(`Tokens of type [${we}] are not supported.`);if(!(se===void 0&&Te===void 0&&Je===void 0&&G===void 0))return{sessionId:le,webId:Je,isLoggedIn:Te==="true",redirectUrl:D,refreshToken:G,issuer:re,clientAppId:se,clientAppSecret:M,tokenType:we??"DPoP"}}async clear(le){return O(le,this.storageUtility)}}class F{async canHandle(le){try{return new URL(le),!0}catch(Te){throw new Error(`[${le}] is not a valid URL, and cannot be used as a redirect URL: ${Te}`)}}async handle(le){return r.getUnauthenticatedSession()}}const P=(...Me)=>d.fetch.call(globalThis,...Me);class K{constructor(le,Te,Je,se,M){this.storageUtility=le,this.sessionInfoManager=Te,this.issuerConfigFetcher=Je,this.clientRegistrar=se,this.tokerRefresher=M,this.storageUtility=le,this.sessionInfoManager=Te,this.issuerConfigFetcher=Je,this.clientRegistrar=se,this.tokerRefresher=M}async canHandle(le){try{const Te=new URL(le);return Te.searchParams.get("code")!==null&&Te.searchParams.get("state")!==null}catch(Te){throw new Error(`[${le}] is not a valid URL, and cannot be used as a redirect URL: ${Te}`)}}async handle(le,Te){if(!await this.canHandle(le))throw new Error(`AuthCodeRedirectHandler cannot handle [${le}]: it is missing one of [code, state].`);const Je=new URL(le),se=Je.searchParams.get("state"),M=await this.storageUtility.getForUser(se,"sessionId",{errorIfNull:!0}),{issuerConfig:D,codeVerifier:G,redirectUrl:re,dpop:we}=await r.loadOidcContextFromStorage(M,this.storageUtility,this.issuerConfigFetcher),Ce=Je.searchParams.get("iss");if(typeof Ce=="string"&&Ce!==D.issuer)throw new Error(`The value of the iss parameter (${Ce}) does not match the issuer identifier of the authorization server (${D.issuer}). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)`);if(G===void 0)throw new Error(`The code verifier for session ${M} is missing from storage.`);if(re===void 0)throw new Error(`The redirect URL for session ${M} is missing from storage.`);const ot=await this.clientRegistrar.getClient({sessionId:M},D);let Re;const pt=Date.now();we?(Re=await o.getDpopToken(D,ot,{grantType:"authorization_code",code:Je.searchParams.get("code"),codeVerifier:G,redirectUrl:re}),window.localStorage.removeItem(`oidc.${se}`)):Re=await o.getBearerToken(Je.toString());let Ct;Re.refreshToken!==void 0&&(Ct={sessionId:M,refreshToken:Re.refreshToken,tokenRefresher:this.tokerRefresher});const bt=await r.buildAuthenticatedFetch(P,Re.accessToken,{dpopKey:Re.dpopKey,refreshOptions:Ct,eventEmitter:Te,expiresIn:Re.expiresIn});await this.storageUtility.setForUser(M,{webId:Re.webId,isLoggedIn:"true"},{secure:!0});const We=await this.sessionInfoManager.get(M);if(!We)throw new Error(`Could not retrieve session: [${M}].`);return Object.assign(We,{fetch:bt,getLogoutUrl:r.maybeBuildRpInitiatedLogout({idTokenHint:Re.idToken,endSessionEndpoint:D.endSessionEndpoint}),expirationDate:typeof Re.expiresIn=="number"?pt+Re.expiresIn*1e3:void 0})}}class B extends r.AggregateHandler{constructor(le){super(le)}}class W{get storage(){return window.localStorage}async get(le){return this.storage.getItem(le)||void 0}async set(le,Te){this.storage.setItem(le,Te)}async delete(le){this.storage.removeItem(le)}}class Y{redirect(le,Te){Te&&Te.handleRedirect?Te.handleRedirect(le):Te&&Te.redirectByReplacingState?window.history.replaceState({},"",le):window.location.href=le}}class q{constructor(le){this.storageUtility=le,this.storageUtility=le}async getClient(le,Te){const[Je,se]=await Promise.all([this.storageUtility.getForUser(le.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(le.sessionId,"clientSecret",{secure:!1})]);if(Je)return{clientId:Je,clientSecret:se,clientType:"dynamic"};try{const M=await o.registerClient(le,Te),D={clientId:M.clientId};return M.clientSecret&&(D.clientSecret=M.clientSecret),M.idTokenSignedResponseAlg&&(D.idTokenSignedResponseAlg=M.idTokenSignedResponseAlg),await this.storageUtility.setForUser(le.sessionId,D,{secure:!1}),M}catch(M){throw new Error(`Client registration failed: [${M}]`)}}}class Pe{async canHandle(le){try{return new URL(le).searchParams.has("error")}catch(Te){throw new Error(`[${le}] is not a valid URL, and cannot be used as a redirect URL: ${Te}`)}}async handle(le,Te){if(Te!==void 0){const Je=new URL(le),se=Je.searchParams.get("error"),M=Je.searchParams.get("error_description");Te.emit(r.EVENTS.ERROR,se,M)}return r.getUnauthenticatedSession()}}class ${constructor(le,Te,Je){this.storageUtility=le,this.issuerConfigFetcher=Te,this.clientRegistrar=Je,this.storageUtility=le,this.issuerConfigFetcher=Te,this.clientRegistrar=Je}async refresh(le,Te,Je,se){const M=await r.loadOidcContextFromStorage(le,this.storageUtility,this.issuerConfigFetcher),D=await this.clientRegistrar.getClient({sessionId:le},M.issuerConfig);if(Te===void 0)throw new Error(`Session [${le}] has no refresh token to allow it to refresh its access token.`);if(M.dpop&&Je===void 0)throw new Error(`For session [${le}], the key bound to the DPoP access token must be provided to refresh said access token.`);const G=await o.refresh(Te,M.issuerConfig,D,Je);return G.refreshToken!==void 0&&(se?.emit(r.EVENTS.NEW_REFRESH_TOKEN,G.refreshToken),await this.storageUtility.setForUser(le,{refreshToken:G.refreshToken})),G}}function ie(Me){const le=new r.InMemoryStorage,Te=Me.secureStorage||le,Je=Me.insecureStorage||new W,se=new l(Te,Je),M=new x(se),D=new q(se),G=new R(se),re=new $(se,M,D),we=new Y,Ce=new y(se,new b(se,we),M,D),ot=new B([new Pe,new K(se,G,M,D,re),new F]);return new u(Ce,ot,new r.IWaterfallLogoutHandler(G,we),G,M)}const ge=`${r.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentSession`,Se=`${r.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentUrl`;async function tt(Me,le,Te){var Je;const se=await le.validateCurrentSession(Me);return se!==null?(window.localStorage.setItem(Se,window.location.href),await le.login({sessionId:Me,prompt:"none",oidcIssuer:se.issuer,redirectUrl:se.redirectUrl,clientId:se.clientAppId,clientSecret:se.clientAppSecret,tokenType:(Je=se.tokenType)!==null&&Je!==void 0?Je:"DPoP"},Te.events),!0):!1}function lt(Me){return!!Me?.isLoggedIn}class Ne extends a{constructor(le={},Te=void 0){super(),this.tokenRequestInProgress=!1,this.login=async Je=>{var se;return await this.clientAuthentication.login({sessionId:this.info.sessionId,...Je,tokenType:(se=Je.tokenType)!==null&&se!==void 0?se:"DPoP"},this.events),new Promise(()=>{})},this.fetch=(Je,se)=>this.clientAuthentication.fetch(Je,se),this.internalLogout=async(Je,se)=>{window.localStorage.removeItem(ge),await this.clientAuthentication.logout(this.info.sessionId,se),this.info.isLoggedIn=!1,Je&&this.events.emit(r.EVENTS.LOGOUT)},this.logout=async Je=>this.internalLogout(!0,Je),this.handleIncomingRedirect=async(Je={})=>{var se;if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;const M=typeof Je=="string"?{url:Je}:Je,D=(se=M.url)!==null&&se!==void 0?se:window.location.href;this.tokenRequestInProgress=!0;const G=await this.clientAuthentication.handleIncomingRedirect(D,this.events);if(lt(G)){this.setSessionInfo(G);const re=window.localStorage.getItem(Se);re===null?this.events.emit(r.EVENTS.LOGIN):(window.localStorage.removeItem(Se),this.events.emit(r.EVENTS.SESSION_RESTORED,re))}else if(M.restorePreviousSession===!0){const re=window.localStorage.getItem(ge);if(re!==null&&await tt(re,this.clientAuthentication,this))return new Promise(()=>{})}return this.tokenRequestInProgress=!1,G},this.events=new Proxy(this,r.buildProxyHandler(Ne.prototype,"events only implements ISessionEventListener")),le.clientAuthentication?this.clientAuthentication=le.clientAuthentication:le.secureStorage&&le.insecureStorage?this.clientAuthentication=ie({secureStorage:le.secureStorage,insecureStorage:le.insecureStorage}):this.clientAuthentication=ie({}),le.sessionInfo?this.info={sessionId:le.sessionInfo.sessionId,isLoggedIn:!1,webId:le.sessionInfo.webId}:this.info={sessionId:Te??i.v4(),isLoggedIn:!1},this.events.on(r.EVENTS.LOGIN,()=>window.localStorage.setItem(ge,this.info.sessionId)),this.events.on(r.EVENTS.SESSION_EXPIRED,()=>this.internalLogout(!1)),this.events.on(r.EVENTS.ERROR,()=>this.internalLogout(!1))}onLogin(le){this.events.on(r.EVENTS.LOGIN,le)}onLogout(le){this.events.on(r.EVENTS.LOGOUT,le)}onError(le){this.events.on(r.EVENTS.ERROR,le)}onSessionRestore(le){this.events.on(r.EVENTS.SESSION_RESTORED,le)}onSessionExpiration(le){this.events.on(r.EVENTS.SESSION_EXPIRED,le)}setSessionInfo(le){this.info.isLoggedIn=le.isLoggedIn,this.info.webId=le.webId,this.info.sessionId=le.sessionId,this.info.expirationDate=le.expirationDate,this.events.on(r.EVENTS.SESSION_EXTENDED,Te=>{this.info.expirationDate=Date.now()+Te*1e3})}}let yt;function ve(){return typeof yt>"u"&&(yt=new Ne),yt}const rt=(...Me)=>ve().fetch(...Me),J=(...Me)=>ve().login(...Me),xe=(...Me)=>ve().logout(...Me),Ze=(...Me)=>ve().handleIncomingRedirect(...Me),je=(...Me)=>ve().onLogin(...Me),ht=(...Me)=>ve().onLogout(...Me),Nt=(...Me)=>ve().onSessionRestore(...Me),kt=()=>ve().events;Object.defineProperty(e,"ConfigurationError",{enumerable:!0,get:function(){return r.ConfigurationError}}),Object.defineProperty(e,"EVENTS",{enumerable:!0,get:function(){return r.EVENTS}}),Object.defineProperty(e,"InMemoryStorage",{enumerable:!0,get:function(){return r.InMemoryStorage}}),Object.defineProperty(e,"NotImplementedError",{enumerable:!0,get:function(){return r.NotImplementedError}}),e.Session=Ne,e.events=kt,e.fetch=rt,e.getClientAuthenticationWithDependencies=ie,e.getDefaultSession=ve,e.handleIncomingRedirect=Ze,e.login=J,e.logout=xe,e.onLogin=je,e.onLogout=ht,e.onSessionRestore=Nt}(Q0)),Q0}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Z1(e,r,i,a){function o(d){return d instanceof i?d:new i(function(l){l(d)})}return new(i||(i=Promise))(function(d,l){function u(y){try{f(a.next(y))}catch(b){l(b)}}function h(y){try{f(a.throw(y))}catch(b){l(b)}}function f(y){y.done?d(y.value):o(y.value).then(u,h)}f((a=a.apply(e,[])).next())})}function eA(e,r){var i={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},a,o,d,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(y){return h([f,y])}}function h(f){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,o&&(d=f[0]&2?o.return:f[0]?o.throw||((d=o.return)&&d.call(o),0):o.next)&&!(d=d.call(o,f[1])).done)return d;switch(o=0,d&&(f=[f[0]&2,d.value]),f[0]){case 0:case 1:d=f;break;case 4:return i.label++,{value:f[1],done:!1};case 5:i.label++,o=f[1],f=[0];continue;case 7:f=i.ops.pop(),i.trys.pop();continue;default:if(d=i.trys,!(d=d.length>0&&d[d.length-1])&&(f[0]===6||f[0]===2)){i=0;continue}if(f[0]===3&&(!d||f[1]>d[0]&&f[1]<d[3])){i.label=f[1];break}if(f[0]===6&&i.label<d[1]){i.label=d[1],d=f;break}if(d&&i.label<d[2]){i.label=d[2],i.ops.push(f);break}d[2]&&i.ops.pop(),i.trys.pop();continue}f=r.call(e,i)}catch(y){f=[6,y],o=0}finally{a=d=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Cs=function(){},ua=Cs(),sg=Object,Ea=function(e){return e===ua},Lu=function(e){return typeof e=="function"},Nl=function(e,r){return sg.assign({},e,r)},bb="undefined",wb=function(){return typeof window!=bb},B2=function(){return typeof document!=bb},H2=function(){return wb()&&typeof window.requestAnimationFrame!=bb},Fy=new WeakMap,j2=0,hg=function(e){var r=typeof e,i=e&&e.constructor,a=i==Date,o,d;if(sg(e)===e&&!a&&i!=RegExp){if(o=Fy.get(e),o)return o;if(o=++j2+"~",Fy.set(e,o),i==Array){for(o="@",d=0;d<e.length;d++)o+=hg(e[d])+",";Fy.set(e,o)}if(i==sg){o="#";for(var l=sg.keys(e).sort();!Ea(d=l.pop());)Ea(e[d])||(o+=d+":"+hg(e[d])+",");Fy.set(e,o)}}else o=a?e.toJSON():r=="symbol"?e.toString():r=="string"?JSON.stringify(e):""+e;return o},Ev=!0,V2=function(){return Ev},tA=wb(),_b=B2(),Av=tA&&window.addEventListener?window.addEventListener.bind(window):Cs,$2=_b?document.addEventListener.bind(document):Cs,Rv=tA&&window.removeEventListener?window.removeEventListener.bind(window):Cs,K2=_b?document.removeEventListener.bind(document):Cs,G2=function(){var e=_b&&document.visibilityState;return Ea(e)||e!=="hidden"},q2=function(e){return $2("visibilitychange",e),Av("focus",e),function(){K2("visibilitychange",e),Rv("focus",e)}},z2=function(e){var r=function(){Ev=!0,e()},i=function(){Ev=!1};return Av("online",r),Av("offline",i),function(){Rv("online",r),Rv("offline",i)}},W2={isOnline:V2,isVisible:G2},J2={initFocus:q2,initReconnect:z2},vm=!wb()||"Deno"in window,Y2=function(e){return H2()?window.requestAnimationFrame(e):setTimeout(e,1)},lg=vm?Qe.useEffect:Qe.useLayoutEffect,ev=typeof navigator<"u"&&navigator.connection,MS=!vm&&ev&&(["slow-2g","2g"].includes(ev.effectiveType)||ev.saveData),Sb=function(e){if(Lu(e))try{e=e()}catch{e=""}var r=[].concat(e);e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?hg(e):"";var i=e?"$swr$"+e:"";return[e,r,i]},hf=new WeakMap,rA=0,nA=1,iA=2,ug=function(e,r,i,a,o,d,l){l===void 0&&(l=!0);var u=hf.get(e),h=u[0],f=u[1],y=u[3],b=h[r],_=f[r];if(l&&_)for(var A=0;A<_.length;++A)_[A](i,a,o);return d&&(delete y[r],b&&b[0])?b[0](iA).then(function(){return e.get(r)}):e.get(r)},Q2=0,xv=function(){return++Q2},aA=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Z1(void 0,void 0,void 0,function(){var i,a,o,d,l,u,h,f,y,b,_,A,T,x,O,R,F,P,K,B,W;return eA(this,function(Y){switch(Y.label){case 0:if(i=e[0],a=e[1],o=e[2],d=e[3],l=typeof d=="boolean"?{revalidate:d}:d||{},u=Ea(l.populateCache)?!0:l.populateCache,h=l.revalidate!==!1,f=l.rollbackOnError!==!1,y=l.optimisticData,b=Sb(a),_=b[0],A=b[2],!_)return[2];if(T=hf.get(i),x=T[2],e.length<3)return[2,ug(i,_,i.get(_),ua,ua,h,!0)];if(O=o,F=xv(),x[_]=[F,0],P=!Ea(y),K=i.get(_),P&&(B=Lu(y)?y(K):y,i.set(_,B),ug(i,_,B)),Lu(O))try{O=O(i.get(_))}catch(q){R=q}return O&&Lu(O.then)?[4,O.catch(function(q){R=q})]:[3,2];case 1:if(O=Y.sent(),F!==x[_][0]){if(R)throw R;return[2,O]}else R&&P&&f&&(u=!0,O=K,i.set(_,K));Y.label=2;case 2:return u&&(R||(Lu(u)&&(O=u(O,K)),i.set(_,O)),i.set(A,Nl(i.get(A),{error:R}))),x[_][1]=xv(),[4,ug(i,_,O,R,ua,h,!!u)];case 3:if(W=Y.sent(),R)throw R;return[2,u?W:O]}})})},kS=function(e,r){for(var i in e)e[i][0]&&e[i][0](r)},oA=function(e,r){if(!hf.has(e)){var i=Nl(J2,r),a={},o=aA.bind(ua,e),d=Cs;if(hf.set(e,[a,{},{},{},o]),!vm){var l=i.initFocus(setTimeout.bind(ua,kS.bind(ua,a,rA))),u=i.initReconnect(setTimeout.bind(ua,kS.bind(ua,a,nA)));d=function(){l&&l(),u&&u(),hf.delete(e)}}return[e,o,d]}return[e,hf.get(e)[4]]},X2=function(e,r,i,a,o){var d=i.errorRetryCount,l=o.retryCount,u=~~((Math.random()+.5)*(1<<(l<8?l:8)))*i.errorRetryInterval;!Ea(d)&&l>d||setTimeout(a,u,o)},sA=oA(new Map),lA=sA[0],uA=sA[1],cA=Nl({onLoadingSlow:Cs,onSuccess:Cs,onError:Cs,onErrorRetry:X2,onDiscarded:Cs,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:MS?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:MS?5e3:3e3,compare:function(e,r){return hg(e)==hg(r)},isPaused:function(){return!1},cache:lA,mutate:uA,fallback:{}},W2),fA=function(e,r){var i=Nl(e,r);if(r){var a=e.use,o=e.fallback,d=r.use,l=r.fallback;a&&d&&(i.use=a.concat(d)),o&&l&&(i.fallback=Nl(o,l))}return i},Tv=Qe.createContext({}),Z2=function(e){var r=e.value,i=fA(Qe.useContext(Tv),r),a=r&&r.provider,o=Qe.useState(function(){return a?oA(a(i.cache||lA),r):ua})[0];return o&&(i.cache=o[0],i.mutate=o[1]),lg(function(){return o?o[2]:ua},[]),Qe.createElement(Tv.Provider,Nl(e,{value:i}))},eO=function(e,r){var i=Qe.useState({})[1],a=Qe.useRef(e),o=Qe.useRef({data:!1,error:!1,isValidating:!1}),d=Qe.useCallback(function(l){var u=!1,h=a.current;for(var f in l){var y=f;h[y]!==l[y]&&(h[y]=l[y],o.current[y]&&(u=!0))}u&&!r.current&&i({})},[]);return lg(function(){a.current=e}),[a,o.current,d]},tO=function(e){return Lu(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}]},dA=function(){return Nl(cA,Qe.useContext(Tv))},rO=function(e){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=dA(),d=tO(i),l=d[0],u=d[1],h=d[2],f=fA(o,h),y=e,b=f.use;if(b)for(var _=b.length;_-- >0;)y=b[_](y);return y(l,u||f.fetcher,f)}},BS=function(e,r,i){var a=r[e]||(r[e]=[]);return a.push(i),function(){var o=a.indexOf(i);o>=0&&(a[o]=a[a.length-1],a.pop())}},tv={dedupe:!0},nO=function(e,r,i){var a=i.cache,o=i.compare,d=i.fallbackData,l=i.suspense,u=i.revalidateOnMount,h=i.refreshInterval,f=i.refreshWhenHidden,y=i.refreshWhenOffline,b=hf.get(a),_=b[0],A=b[1],T=b[2],x=b[3],O=Sb(e),R=O[0],F=O[1],P=O[2],K=Qe.useRef(!1),B=Qe.useRef(!1),W=Qe.useRef(R),Y=Qe.useRef(r),q=Qe.useRef(i),Pe=function(){return q.current},$=function(){return Pe().isVisible()&&Pe().isOnline()},ie=function(Me){return a.set(P,Nl(a.get(P),Me))},ge=a.get(R),Se=Ea(d)?i.fallback[R]:d,tt=Ea(ge)?Se:ge,lt=a.get(P)||{},Ne=lt.error,yt=!K.current,ve=function(){return yt&&!Ea(u)?u:Pe().isPaused()?!1:l?Ea(tt)?!1:i.revalidateIfStale:Ea(tt)||i.revalidateIfStale},rt=function(){return!R||!r?!1:lt.isValidating?!0:yt&&ve()},J=rt(),xe=eO({data:tt,error:Ne,isValidating:J},B),Ze=xe[0],je=xe[1],ht=xe[2],Nt=Qe.useCallback(function(Me){return Z1(void 0,void 0,void 0,function(){var le,Te,Je,se,M,D,G,re,we,Ce,ot,Re,pt;return eA(this,function(Ct){switch(Ct.label){case 0:if(le=Y.current,!R||!le||B.current||Pe().isPaused())return[2,!1];se=!0,M=Me||{},D=!x[R]||!M.dedupe,G=function(){return!B.current&&R===W.current&&K.current},re=function(){var bt=x[R];bt&&bt[1]===Je&&delete x[R]},we={isValidating:!1},Ce=function(){ie({isValidating:!1}),G()&&ht(we)},ie({isValidating:!0}),ht({isValidating:!0}),Ct.label=1;case 1:return Ct.trys.push([1,3,,4]),D&&(ug(a,R,Ze.current.data,Ze.current.error,!0),i.loadingTimeout&&!a.get(R)&&setTimeout(function(){se&&G()&&Pe().onLoadingSlow(R,i)},i.loadingTimeout),x[R]=[le.apply(void 0,F),xv()]),pt=x[R],Te=pt[0],Je=pt[1],[4,Te];case 2:return Te=Ct.sent(),D&&setTimeout(re,i.dedupingInterval),!x[R]||x[R][1]!==Je?(D&&G()&&Pe().onDiscarded(R),[2,!1]):(ie({error:ua}),we.error=ua,ot=T[R],!Ea(ot)&&(Je<=ot[0]||Je<=ot[1]||ot[1]===0)?(Ce(),D&&G()&&Pe().onDiscarded(R),[2,!1]):(o(Ze.current.data,Te)?we.data=Ze.current.data:we.data=Te,o(a.get(R),Te)||a.set(R,Te),D&&G()&&Pe().onSuccess(Te,R,i),[3,4]));case 3:return Re=Ct.sent(),re(),Pe().isPaused()||(ie({error:Re}),we.error=Re,D&&G()&&(Pe().onError(Re,R,i),(typeof i.shouldRetryOnError=="boolean"&&i.shouldRetryOnError||Lu(i.shouldRetryOnError)&&i.shouldRetryOnError(Re))&&$()&&Pe().onErrorRetry(Re,R,i,Nt,{retryCount:(M.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return se=!1,Ce(),G()&&D&&ug(a,R,we.data,we.error,!1),[2,!0]}})})},[R]),kt=Qe.useCallback(aA.bind(ua,a,function(){return W.current}),[]);if(lg(function(){Y.current=r,q.current=i}),lg(function(){if(R){var Me=R!==W.current,le=Nt.bind(ua,tv),Te=function(G,re,we){ht(Nl({error:re,isValidating:we},o(Ze.current.data,G)?ua:{data:G}))},Je=0,se=function(G){if(G==rA){var re=Date.now();Pe().revalidateOnFocus&&re>Je&&$()&&(Je=re+Pe().focusThrottleInterval,le())}else if(G==nA)Pe().revalidateOnReconnect&&$()&&le();else if(G==iA)return Nt()},M=BS(R,A,Te),D=BS(R,_,se);return B.current=!1,W.current=R,K.current=!0,Me&&ht({data:tt,error:Ne,isValidating:J}),ve()&&(Ea(tt)||vm?le():Y2(le)),function(){B.current=!0,M(),D()}}},[R,Nt]),lg(function(){var Me;function le(){var Je=Lu(h)?h(tt):h;Je&&Me!==-1&&(Me=setTimeout(Te,Je))}function Te(){!Ze.current.error&&(f||Pe().isVisible())&&(y||Pe().isOnline())?Nt(tv).then(le):le()}return le(),function(){Me&&(clearTimeout(Me),Me=-1)}},[h,f,y,Nt]),Qe.useDebugValue(tt),l&&Ea(tt)&&R)throw Y.current=r,q.current=i,B.current=!1,Ea(Ne)?Nt(tv):Ne;return{mutate:kt,get data(){return je.data=!0,tt},get error(){return je.error=!0,Ne},get isValidating(){return je.isValidating=!0,J}}},iO=sg.defineProperty(Z2,"default",{value:cA}),aO=function(e){return Sb(e)[0]},oO=rO(nO);const sO=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:iO,default:oO,mutate:uA,unstable_serialize:aO,useSWRConfig:dA},Symbol.toStringTag,{value:"Module"})),lO=nm(sO);var rv={exports:{}},ng={exports:{}},uO=ng.exports,HS;function cO(){return HS||(HS=1,function(e,r){(function(i,a){a(r,mg())})(uO,function(i,a){function o(U,te,ne,fe,Ue,ye,He){try{var Rt=U[ye](He),wt=Rt.value}catch(It){return void ne(It)}Rt.done?te(wt):Promise.resolve(wt).then(fe,Ue)}function d(U){return function(){var te=this,ne=arguments;return new Promise(function(fe,Ue){var ye=U.apply(te,ne);function He(wt){o(ye,fe,Ue,He,Rt,"next",wt)}function Rt(wt){o(ye,fe,Ue,He,Rt,"throw",wt)}He(void 0)})}}function l(){return(l=Object.assign||function(U){for(var te=1;te<arguments.length;te++){var ne=arguments[te];for(var fe in ne)Object.prototype.hasOwnProperty.call(ne,fe)&&(U[fe]=ne[fe])}return U}).apply(this,arguments)}function u(U,te){if(U==null)return{};var ne,fe,Ue={},ye=Object.keys(U);for(fe=0;fe<ye.length;fe++)ne=ye[fe],te.indexOf(ne)>=0||(Ue[ne]=U[ne]);return Ue}function h(U){var te=function(ne,fe){if(typeof ne!="object"||ne===null)return ne;var Ue=ne[Symbol.toPrimitive];if(Ue!==void 0){var ye=Ue.call(ne,fe);if(typeof ye!="object")return ye;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ne)}(U,"string");return typeof te=="symbol"?te:String(te)}a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var f={init:"init"},y=function(U){var te=U.value;return te===void 0?"":te},b=function(){return a.createElement(a.Fragment,null,"")},_={Cell:y,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function A(){for(var U=arguments.length,te=new Array(U),ne=0;ne<U;ne++)te[ne]=arguments[ne];return te.reduce(function(fe,Ue){var ye=Ue.style,He=Ue.className;return fe=l({},fe,{},u(Ue,["style","className"])),ye&&(fe.style=fe.style?l({},fe.style||{},{},ye||{}):ye),He&&(fe.className=fe.className?fe.className+" "+He:He),fe.className===""&&delete fe.className,fe},{})}var T=function(U,te){return te===void 0&&(te={}),function(ne){return ne===void 0&&(ne={}),[].concat(U,[ne]).reduce(function(fe,Ue){return function ye(He,Rt,wt){return typeof Rt=="function"?ye({},Rt(He,wt)):Array.isArray(Rt)?A.apply(void 0,[He].concat(Rt)):A(He,Rt)}(fe,Ue,l({},te,{userProps:ne}))},{})}},x=function(U,te,ne,fe){return ne===void 0&&(ne={}),U.reduce(function(Ue,ye){return ye(Ue,ne)},te)},O=function(U,te,ne){return ne===void 0&&(ne={}),U.forEach(function(fe){fe(te,ne)})};function R(U,te,ne,fe){U.findIndex(function(Ue){return Ue.pluginName===ne}),te.forEach(function(Ue){U.findIndex(function(ye){return ye.pluginName===Ue})})}function F(U,te){return typeof U=="function"?U(te):U}function P(U){var te=a.useRef();return te.current=U,a.useCallback(function(){return te.current},[])}var K=typeof document<"u"?a.useLayoutEffect:a.useEffect;function B(U,te){var ne=a.useRef(!1);K(function(){ne.current&&U(),ne.current=!0},te)}function W(U,te,ne){return ne===void 0&&(ne={}),function(fe,Ue){Ue===void 0&&(Ue={});var ye=typeof fe=="string"?te[fe]:fe;if(ye===void 0)throw console.info(te),new Error("Renderer Error ");return Y(ye,l({},U,{column:te},ne,{},Ue))}}function Y(U,te){return function(fe){return typeof fe=="function"&&(Ue=Object.getPrototypeOf(fe)).prototype&&Ue.prototype.isReactComponent;var Ue}(ne=U)||typeof ne=="function"||function(fe){return typeof fe=="object"&&typeof fe.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(fe.$$typeof.description)}(ne)?a.createElement(U,te):U;var ne}function q(U,te,ne){return ne===void 0&&(ne=0),U.map(function(fe){return $(fe=l({},fe,{parent:te,depth:ne})),fe.columns&&(fe.columns=q(fe.columns,fe,ne+1)),fe})}function Pe(U){return Ne(U,"columns")}function $(U){var te=U.id,ne=U.accessor,fe=U.Header;if(typeof ne=="string"){te=te||ne;var Ue=ne.split(".");ne=function(ye){return function(He,Rt,wt){if(!Rt)return He;var It,qt=typeof Rt=="function"?Rt:JSON.stringify(Rt),Vt=Se.get(qt)||function(){var Wt=function(Ut){return function Jt(ir,cr){if(cr===void 0&&(cr=[]),Array.isArray(ir))for(var br=0;br<ir.length;br+=1)Jt(ir[br],cr);else cr.push(ir);return cr}(Ut).map(function(Jt){return String(Jt).replace(".","_")}).join(".").replace(Ze,".").replace(je,"").split(".")}(Rt);return Se.set(qt,Wt),Wt}();try{It=Vt.reduce(function(Wt,Ut){return Wt[Ut]},He)}catch{}return It!==void 0?It:wt}(ye,Ue)}}if(!te&&typeof fe=="string"&&fe&&(te=fe),!te&&U.columns)throw console.error(U),new Error('A column ID (or unique "Header" value) is required!');if(!te)throw console.error(U),new Error("A column ID (or string accessor) is required!");return Object.assign(U,{id:te,accessor:ne}),U}function ie(U,te){if(!te)throw new Error;return Object.assign(U,l({Header:b,Footer:b},_,{},te,{},U)),Object.assign(U,{originalWidth:U.width}),U}function ge(U,te,ne){ne===void 0&&(ne=function(){return{}});for(var fe=[],Ue=U,ye=0,He=function(){return ye++},Rt=function(){var wt={headers:[]},It=[],qt=Ue.some(function(Vt){return Vt.parent});Ue.forEach(function(Vt){var Wt,Ut=[].concat(It).reverse()[0];qt&&(Vt.parent?Wt=l({},Vt.parent,{originalId:Vt.parent.id,id:Vt.parent.id+"_"+He(),headers:[Vt]},ne(Vt)):Wt=ie(l({originalId:Vt.id+"_placeholder",id:Vt.id+"_placeholder_"+He(),placeholderOf:Vt,headers:[Vt]},ne(Vt)),te),Ut&&Ut.originalId===Wt.originalId?Ut.headers.push(Vt):It.push(Wt)),wt.headers.push(Vt)}),fe.push(wt),Ue=It};Ue.length;)Rt();return fe.reverse()}var Se=new Map;function tt(){for(var U=arguments.length,te=new Array(U),ne=0;ne<U;ne++)te[ne]=arguments[ne];for(var fe=0;fe<te.length;fe+=1)if(te[fe]!==void 0)return te[fe]}function lt(U){if(typeof U=="function")return U}function Ne(U,te){var ne=[];return function fe(Ue){Ue.forEach(function(ye){ye[te]?fe(ye[te]):ne.push(ye)})}(U),ne}function yt(U,te){var ne=te.manualExpandedKey,fe=te.expanded,Ue=te.expandSubRows,ye=Ue===void 0||Ue,He=[];return U.forEach(function(Rt){return function wt(It,qt){qt===void 0&&(qt=!0),It.isExpanded=It.original&&It.original[ne]||fe[It.id],It.canExpand=It.subRows&&!!It.subRows.length,qt&&He.push(It),It.subRows&&It.subRows.length&&It.isExpanded&&It.subRows.forEach(function(Vt){return wt(Vt,ye)})}(Rt)}),He}function ve(U,te,ne){return lt(U)||te[U]||ne[U]||ne.text}function rt(U,te,ne){return U?U(te,ne):te===void 0}function J(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var xe=null,Ze=/\[/g,je=/\]/g,ht=function(U){return l({role:"table"},U)},Nt=function(U){return l({role:"rowgroup"},U)},kt=function(U,te){var ne=te.column;return l({key:"header_"+ne.id,colSpan:ne.totalVisibleHeaderCount,role:"columnheader"},U)},Me=function(U,te){var ne=te.column;return l({key:"footer_"+ne.id,colSpan:ne.totalVisibleHeaderCount},U)},le=function(U,te){return l({key:"headerGroup_"+te.index,role:"row"},U)},Te=function(U,te){return l({key:"footerGroup_"+te.index},U)},Je=function(U,te){return l({key:"row_"+te.row.id,role:"row"},U)},se=function(U,te){var ne=te.cell;return l({key:"cell_"+ne.row.id+"_"+ne.column.id,role:"cell"},U)};function M(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[ht],getTableBodyProps:[Nt],getHeaderGroupProps:[le],getFooterGroupProps:[Te],getHeaderProps:[kt],getFooterProps:[Me],getRowProps:[Je],getCellProps:[se],useFinalInstance:[]}}f.resetHiddenColumns="resetHiddenColumns",f.toggleHideColumn="toggleHideColumn",f.setHiddenColumns="setHiddenColumns",f.toggleHideAllColumns="toggleHideAllColumns";var D=function(U){U.getToggleHiddenProps=[G],U.getToggleHideAllColumnsProps=[re],U.stateReducers.push(we),U.useInstanceBeforeDimensions.push(Ce),U.headerGroupsDeps.push(function(te,ne){var fe=ne.instance;return[].concat(te,[fe.state.hiddenColumns])}),U.useInstance.push(ot)};D.pluginName="useColumnVisibility";var G=function(U,te){var ne=te.column;return[U,{onChange:function(fe){ne.toggleHidden(!fe.target.checked)},style:{cursor:"pointer"},checked:ne.isVisible,title:"Toggle Column Visible"}]},re=function(U,te){var ne=te.instance;return[U,{onChange:function(fe){ne.toggleHideAllColumns(!fe.target.checked)},style:{cursor:"pointer"},checked:!ne.allColumnsHidden&&!ne.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!ne.allColumnsHidden&&ne.state.hiddenColumns.length}]};function we(U,te,ne,fe){if(te.type===f.init)return l({hiddenColumns:[]},U);if(te.type===f.resetHiddenColumns)return l({},U,{hiddenColumns:fe.initialState.hiddenColumns||[]});if(te.type===f.toggleHideColumn){var Ue=(te.value!==void 0?te.value:!U.hiddenColumns.includes(te.columnId))?[].concat(U.hiddenColumns,[te.columnId]):U.hiddenColumns.filter(function(ye){return ye!==te.columnId});return l({},U,{hiddenColumns:Ue})}return te.type===f.setHiddenColumns?l({},U,{hiddenColumns:F(te.value,U.hiddenColumns)}):te.type===f.toggleHideAllColumns?l({},U,{hiddenColumns:(te.value!==void 0?te.value:!U.hiddenColumns.length)?fe.allColumns.map(function(ye){return ye.id}):[]}):void 0}function Ce(U){var te=U.headers,ne=U.state.hiddenColumns;a.useRef(!1).current;var fe=0;te.forEach(function(Ue){return fe+=function ye(He,Rt){He.isVisible=Rt&&!ne.includes(He.id);var wt=0;return He.headers&&He.headers.length?He.headers.forEach(function(It){return wt+=ye(It,He.isVisible)}):wt=He.isVisible?1:0,He.totalVisibleHeaderCount=wt,wt}(Ue,!0)})}function ot(U){var te=U.columns,ne=U.flatHeaders,fe=U.dispatch,Ue=U.allColumns,ye=U.getHooks,He=U.state.hiddenColumns,Rt=U.autoResetHiddenColumns,wt=Rt===void 0||Rt,It=P(U),qt=Ue.length===He.length,Vt=a.useCallback(function(cr,br){return fe({type:f.toggleHideColumn,columnId:cr,value:br})},[fe]),Wt=a.useCallback(function(cr){return fe({type:f.setHiddenColumns,value:cr})},[fe]),Ut=a.useCallback(function(cr){return fe({type:f.toggleHideAllColumns,value:cr})},[fe]),Jt=T(ye().getToggleHideAllColumnsProps,{instance:It()});ne.forEach(function(cr){cr.toggleHidden=function(br){fe({type:f.toggleHideColumn,columnId:cr.id,value:br})},cr.getToggleHiddenProps=T(ye().getToggleHiddenProps,{instance:It(),column:cr})});var ir=P(wt);B(function(){ir()&&fe({type:f.resetHiddenColumns})},[fe,te]),Object.assign(U,{allColumnsHidden:qt,toggleHideColumn:Vt,setHiddenColumns:Wt,toggleHideAllColumns:Ut,getToggleHideAllColumnsProps:Jt})}var Re={},pt={},Ct=function(U,te,ne){return U},bt=function(U,te){return U.subRows||[]},We=function(U,te,ne){return""+(ne?[ne.id,te].join("."):te)},Ge=function(U){return U};function Oe(U){var te=U.initialState,ne=te===void 0?Re:te,fe=U.defaultColumn,Ue=fe===void 0?pt:fe,ye=U.getSubRows,He=ye===void 0?bt:ye,Rt=U.getRowId,wt=Rt===void 0?We:Rt,It=U.stateReducer,qt=It===void 0?Ct:It,Vt=U.useControlledState,Wt=Vt===void 0?Ge:Vt;return l({},u(U,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:ne,defaultColumn:Ue,getSubRows:He,getRowId:wt,stateReducer:qt,useControlledState:Wt})}function ut(U,te){te===void 0&&(te=0);var ne=0,fe=0,Ue=0,ye=0;return U.forEach(function(He){var Rt=He.headers;if(He.totalLeft=te,Rt&&Rt.length){var wt=ut(Rt,te),It=wt[0],qt=wt[1],Vt=wt[2],Wt=wt[3];He.totalMinWidth=It,He.totalWidth=qt,He.totalMaxWidth=Vt,He.totalFlexWidth=Wt}else He.totalMinWidth=He.minWidth,He.totalWidth=Math.min(Math.max(He.minWidth,He.width),He.maxWidth),He.totalMaxWidth=He.maxWidth,He.totalFlexWidth=He.canResize?He.totalWidth:0;He.isVisible&&(te+=He.totalWidth,ne+=He.totalMinWidth,fe+=He.totalWidth,Ue+=He.totalMaxWidth,ye+=He.totalFlexWidth)}),[ne,fe,Ue,ye]}function Q(U){var te=U.data,ne=U.rows,fe=U.flatRows,Ue=U.rowsById,ye=U.column,He=U.getRowId,Rt=U.getSubRows,wt=U.accessValueHooks,It=U.getInstance;te.forEach(function(qt,Vt){return function Wt(Ut,Jt,ir,cr,br){ir===void 0&&(ir=0);var Kr=Ut,wr=He(Ut,Jt,cr),Qt=Ue[wr];if(Qt)Qt.subRows&&Qt.originalSubRows.forEach(function(hr,Mr){return Wt(hr,Mr,ir+1,Qt)});else if((Qt={id:wr,original:Kr,index:Jt,depth:ir,cells:[{}]}).cells.map=J,Qt.cells.filter=J,Qt.cells.forEach=J,Qt.cells[0].getCellProps=J,Qt.values={},br.push(Qt),fe.push(Qt),Ue[wr]=Qt,Qt.originalSubRows=Rt(Ut,Jt),Qt.originalSubRows){var kr=[];Qt.originalSubRows.forEach(function(hr,Mr){return Wt(hr,Mr,ir+1,Qt,kr)}),Qt.subRows=kr}ye.accessor&&(Qt.values[ye.id]=ye.accessor(Ut,Jt,Qt,br,te)),Qt.values[ye.id]=x(wt,Qt.values[ye.id],{row:Qt,column:ye,instance:It()})}(qt,Vt,0,void 0,ne)})}f.resetExpanded="resetExpanded",f.toggleRowExpanded="toggleRowExpanded",f.toggleAllRowsExpanded="toggleAllRowsExpanded";var k=function(U){U.getToggleAllRowsExpandedProps=[V],U.getToggleRowExpandedProps=[j],U.stateReducers.push(qe),U.useInstance.push(et),U.prepareRow.push(ze)};k.pluginName="useExpanded";var V=function(U,te){var ne=te.instance;return[U,{onClick:function(fe){ne.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},j=function(U,te){var ne=te.row;return[U,{onClick:function(){ne.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function qe(U,te,ne,fe){if(te.type===f.init)return l({expanded:{}},U);if(te.type===f.resetExpanded)return l({},U,{expanded:fe.initialState.expanded||{}});if(te.type===f.toggleAllRowsExpanded){var Ue=te.value,ye=fe.rowsById,He=Object.keys(ye).length===Object.keys(U.expanded).length;if(Ue!==void 0?Ue:!He){var Rt={};return Object.keys(ye).forEach(function(Jt){Rt[Jt]=!0}),l({},U,{expanded:Rt})}return l({},U,{expanded:{}})}if(te.type===f.toggleRowExpanded){var wt,It=te.id,qt=te.value,Vt=U.expanded[It],Wt=qt!==void 0?qt:!Vt;if(!Vt&&Wt)return l({},U,{expanded:l({},U.expanded,(wt={},wt[It]=!0,wt))});if(Vt&&!Wt){var Ut=U.expanded;return Ut[It],l({},U,{expanded:u(Ut,[It].map(h))})}return U}}function et(U){var te=U.data,ne=U.rows,fe=U.rowsById,Ue=U.manualExpandedKey,ye=Ue===void 0?"expanded":Ue,He=U.paginateExpandedRows,Rt=He===void 0||He,wt=U.expandSubRows,It=wt===void 0||wt,qt=U.autoResetExpanded,Vt=qt===void 0||qt,Wt=U.getHooks,Ut=U.plugins,Jt=U.state.expanded,ir=U.dispatch;R(Ut,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var cr=P(Vt),br=!!(Object.keys(fe).length&&Object.keys(Jt).length);br&&Object.keys(fe).some(function(Wr){return!Jt[Wr]})&&(br=!1),B(function(){cr()&&ir({type:f.resetExpanded})},[ir,te]);var Kr=a.useCallback(function(Wr,Dt){ir({type:f.toggleRowExpanded,id:Wr,value:Dt})},[ir]),wr=a.useCallback(function(Wr){return ir({type:f.toggleAllRowsExpanded,value:Wr})},[ir]),Qt=a.useMemo(function(){return Rt?yt(ne,{manualExpandedKey:ye,expanded:Jt,expandSubRows:It}):ne},[Rt,ne,ye,Jt,It]),kr=a.useMemo(function(){return function(Wr){var Dt=0;return Object.keys(Wr).forEach(function(Ir){var mn=Ir.split(".");Dt=Math.max(Dt,mn.length)}),Dt}(Jt)},[Jt]),hr=P(U),Mr=T(Wt().getToggleAllRowsExpandedProps,{instance:hr()});Object.assign(U,{preExpandedRows:ne,expandedRows:Qt,rows:Qt,expandedDepth:kr,isAllRowsExpanded:br,toggleRowExpanded:Kr,toggleAllRowsExpanded:wr,getToggleAllRowsExpandedProps:Mr})}function ze(U,te){var ne=te.instance.getHooks,fe=te.instance;U.toggleRowExpanded=function(Ue){return fe.toggleRowExpanded(U.id,Ue)},U.getToggleRowExpandedProps=T(ne().getToggleRowExpandedProps,{instance:fe,row:U})}var Yt=function(U,te,ne){return U=U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return String(ye).toLowerCase().includes(String(ne).toLowerCase())})})};Yt.autoRemove=function(U){return!U};var Br=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return ye===void 0||String(ye).toLowerCase()===String(ne).toLowerCase()})})};Br.autoRemove=function(U){return!U};var jr=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return ye===void 0||String(ye)===String(ne)})})};jr.autoRemove=function(U){return!U};var or=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){return fe.values[Ue].includes(ne)})})};or.autoRemove=function(U){return!U||!U.length};var $e=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return ye&&ye.length&&ne.every(function(He){return ye.includes(He)})})})};$e.autoRemove=function(U){return!U||!U.length};var vt=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return ye&&ye.length&&ne.some(function(He){return ye.includes(He)})})})};vt.autoRemove=function(U){return!U||!U.length};var st=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){var ye=fe.values[Ue];return ne.includes(ye)})})};st.autoRemove=function(U){return!U||!U.length};var Le=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){return fe.values[Ue]===ne})})};Le.autoRemove=function(U){return U===void 0};var ft=function(U,te,ne){return U.filter(function(fe){return te.some(function(Ue){return fe.values[Ue]==ne})})};ft.autoRemove=function(U){return U==null};var Xt=function(U,te,ne){var fe=ne||[],Ue=fe[0],ye=fe[1];if((Ue=typeof Ue=="number"?Ue:-1/0)>(ye=typeof ye=="number"?ye:1/0)){var He=Ue;Ue=ye,ye=He}return U.filter(function(Rt){return te.some(function(wt){var It=Rt.values[wt];return It>=Ue&&It<=ye})})};Xt.autoRemove=function(U){return!U||typeof U[0]!="number"&&typeof U[1]!="number"};var zt=Object.freeze({__proto__:null,text:Yt,exactText:Br,exactTextCase:jr,includes:or,includesAll:$e,includesSome:vt,includesValue:st,exact:Le,equals:ft,between:Xt});f.resetFilters="resetFilters",f.setFilter="setFilter",f.setAllFilters="setAllFilters";var tr=function(U){U.stateReducers.push(jt),U.useInstance.push(ue)};function jt(U,te,ne,fe){if(te.type===f.init)return l({filters:[]},U);if(te.type===f.resetFilters)return l({},U,{filters:fe.initialState.filters||[]});if(te.type===f.setFilter){var Ue=te.columnId,ye=te.filterValue,He=fe.allColumns,Rt=fe.filterTypes,wt=He.find(function(ir){return ir.id===Ue});if(!wt)throw new Error("React-Table: Could not find a column with id: "+Ue);var It=ve(wt.filter,Rt||{},zt),qt=U.filters.find(function(ir){return ir.id===Ue}),Vt=F(ye,qt&&qt.value);return rt(It.autoRemove,Vt,wt)?l({},U,{filters:U.filters.filter(function(ir){return ir.id!==Ue})}):l({},U,qt?{filters:U.filters.map(function(ir){return ir.id===Ue?{id:Ue,value:Vt}:ir})}:{filters:[].concat(U.filters,[{id:Ue,value:Vt}])})}if(te.type===f.setAllFilters){var Wt=te.filters,Ut=fe.allColumns,Jt=fe.filterTypes;return l({},U,{filters:F(Wt,U.filters).filter(function(ir){var cr=Ut.find(function(br){return br.id===ir.id});return!rt(ve(cr.filter,Jt||{},zt).autoRemove,ir.value,cr)})})}}function ue(U){var te=U.data,ne=U.rows,fe=U.flatRows,Ue=U.rowsById,ye=U.allColumns,He=U.filterTypes,Rt=U.manualFilters,wt=U.defaultCanFilter,It=wt!==void 0&&wt,qt=U.disableFilters,Vt=U.state.filters,Wt=U.dispatch,Ut=U.autoResetFilters,Jt=Ut===void 0||Ut,ir=a.useCallback(function(hr,Mr){Wt({type:f.setFilter,columnId:hr,filterValue:Mr})},[Wt]),cr=a.useCallback(function(hr){Wt({type:f.setAllFilters,filters:hr})},[Wt]);ye.forEach(function(hr){var Mr=hr.id,Wr=hr.accessor,Dt=hr.defaultCanFilter,Ir=hr.disableFilters;hr.canFilter=Wr?tt(Ir!==!0&&void 0,qt!==!0&&void 0,!0):tt(Dt,It,!1),hr.setFilter=function(Lr){return ir(hr.id,Lr)};var mn=Vt.find(function(Lr){return Lr.id===Mr});hr.filterValue=mn&&mn.value});var br=a.useMemo(function(){if(Rt||!Vt.length)return[ne,fe,Ue];var hr=[],Mr={};return[function Wr(Dt,Ir){Ir===void 0&&(Ir=0);var mn=Dt;return(mn=Vt.reduce(function(Lr,hn){var ln=hn.id,In=hn.value,_r=ye.find(function(Wn){return Wn.id===ln});if(!_r)return Lr;Ir===0&&(_r.preFilteredRows=Lr);var Vr=ve(_r.filter,He||{},zt);return Vr?(_r.filteredRows=Vr(Lr,[ln],In),_r.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+_r.id+"."),Lr)},Dt)).forEach(function(Lr){hr.push(Lr),Mr[Lr.id]=Lr,Lr.subRows&&(Lr.subRows=Lr.subRows&&Lr.subRows.length>0?Wr(Lr.subRows,Ir+1):Lr.subRows)}),mn}(ne),hr,Mr]},[Rt,Vt,ne,fe,Ue,ye,He]),Kr=br[0],wr=br[1],Qt=br[2];a.useMemo(function(){ye.filter(function(hr){return!Vt.find(function(Mr){return Mr.id===hr.id})}).forEach(function(hr){hr.preFilteredRows=Kr,hr.filteredRows=Kr})},[Kr,Vt,ye]);var kr=P(Jt);B(function(){kr()&&Wt({type:f.resetFilters})},[Wt,Rt?null:te]),Object.assign(U,{preFilteredRows:ne,preFilteredFlatRows:fe,preFilteredRowsById:Ue,filteredRows:Kr,filteredFlatRows:wr,filteredRowsById:Qt,rows:Kr,flatRows:wr,rowsById:Qt,setFilter:ir,setAllFilters:cr})}tr.pluginName="useFilters",f.resetGlobalFilter="resetGlobalFilter",f.setGlobalFilter="setGlobalFilter";var pe=function(U){U.stateReducers.push(Tt),U.useInstance.push(xt)};function Tt(U,te,ne,fe){if(te.type===f.resetGlobalFilter)return l({},U,{globalFilter:fe.initialState.globalFilter||void 0});if(te.type===f.setGlobalFilter){var Ue=te.filterValue,ye=fe.userFilterTypes,He=ve(fe.globalFilter,ye||{},zt),Rt=F(Ue,U.globalFilter);return rt(He.autoRemove,Rt)?(U.globalFilter,u(U,["globalFilter"])):l({},U,{globalFilter:Rt})}}function xt(U){var te=U.data,ne=U.rows,fe=U.flatRows,Ue=U.rowsById,ye=U.allColumns,He=U.filterTypes,Rt=U.globalFilter,wt=U.manualGlobalFilter,It=U.state.globalFilter,qt=U.dispatch,Vt=U.autoResetGlobalFilter,Wt=Vt===void 0||Vt,Ut=U.disableGlobalFilter,Jt=a.useCallback(function(Qt){qt({type:f.setGlobalFilter,filterValue:Qt})},[qt]),ir=a.useMemo(function(){if(wt||It===void 0)return[ne,fe,Ue];var Qt=[],kr={},hr=ve(Rt,He||{},zt);if(!hr)return console.warn("Could not find a valid 'globalFilter' option."),ne;ye.forEach(function(Wr){var Dt=Wr.disableGlobalFilter;Wr.canFilter=tt(Dt!==!0&&void 0,Ut!==!0&&void 0,!0)});var Mr=ye.filter(function(Wr){return Wr.canFilter===!0});return[function Wr(Dt){return(Dt=hr(Dt,Mr.map(function(Ir){return Ir.id}),It)).forEach(function(Ir){Qt.push(Ir),kr[Ir.id]=Ir,Ir.subRows=Ir.subRows&&Ir.subRows.length?Wr(Ir.subRows):Ir.subRows}),Dt}(ne),Qt,kr]},[wt,It,Rt,He,ye,ne,fe,Ue,Ut]),cr=ir[0],br=ir[1],Kr=ir[2],wr=P(Wt);B(function(){wr()&&qt({type:f.resetGlobalFilter})},[qt,wt?null:te]),Object.assign(U,{preGlobalFilteredRows:ne,preGlobalFilteredFlatRows:fe,preGlobalFilteredRowsById:Ue,globalFilteredRows:cr,globalFilteredFlatRows:br,globalFilteredRowsById:Kr,rows:cr,flatRows:br,rowsById:Kr,setGlobalFilter:Jt,disableGlobalFilter:Ut})}function Pt(U,te){return te.reduce(function(ne,fe){return ne+(typeof fe=="number"?fe:0)},0)}pe.pluginName="useGlobalFilter";var Zt=Object.freeze({__proto__:null,sum:Pt,min:function(U){var te=U[0]||0;return U.forEach(function(ne){typeof ne=="number"&&(te=Math.min(te,ne))}),te},max:function(U){var te=U[0]||0;return U.forEach(function(ne){typeof ne=="number"&&(te=Math.max(te,ne))}),te},minMax:function(U){var te=U[0]||0,ne=U[0]||0;return U.forEach(function(fe){typeof fe=="number"&&(te=Math.min(te,fe),ne=Math.max(ne,fe))}),te+".."+ne},average:function(U){return Pt(0,U)/U.length},median:function(U){if(!U.length)return null;var te=Math.floor(U.length/2),ne=[].concat(U).sort(function(fe,Ue){return fe-Ue});return U.length%2!=0?ne[te]:(ne[te-1]+ne[te])/2},unique:function(U){return Array.from(new Set(U).values())},uniqueCount:function(U){return new Set(U).size},count:function(U){return U.length}}),rr=[],Fr={};f.resetGroupBy="resetGroupBy",f.setGroupBy="setGroupBy",f.toggleGroupBy="toggleGroupBy";var $t=function(U){U.getGroupByToggleProps=[er],U.stateReducers.push(mr),U.visibleColumnsDeps.push(function(te,ne){var fe=ne.instance;return[].concat(te,[fe.state.groupBy])}),U.visibleColumns.push(ar),U.useInstance.push(Ar),U.prepareRow.push(Gr)};$t.pluginName="useGroupBy";var er=function(U,te){var ne=te.header;return[U,{onClick:ne.canGroupBy?function(fe){fe.persist(),ne.toggleGroupBy()}:void 0,style:{cursor:ne.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function mr(U,te,ne,fe){if(te.type===f.init)return l({groupBy:[]},U);if(te.type===f.resetGroupBy)return l({},U,{groupBy:fe.initialState.groupBy||[]});if(te.type===f.setGroupBy)return l({},U,{groupBy:te.value});if(te.type===f.toggleGroupBy){var Ue=te.columnId,ye=te.value,He=ye!==void 0?ye:!U.groupBy.includes(Ue);return l({},U,He?{groupBy:[].concat(U.groupBy,[Ue])}:{groupBy:U.groupBy.filter(function(Rt){return Rt!==Ue})})}}function ar(U,te){var ne=te.instance.state.groupBy,fe=ne.map(function(ye){return U.find(function(He){return He.id===ye})}).filter(Boolean),Ue=U.filter(function(ye){return!ne.includes(ye.id)});return(U=[].concat(fe,Ue)).forEach(function(ye){ye.isGrouped=ne.includes(ye.id),ye.groupedIndex=ne.indexOf(ye.id)}),U}var Dr={};function Ar(U){var te=U.data,ne=U.rows,fe=U.flatRows,Ue=U.rowsById,ye=U.allColumns,He=U.flatHeaders,Rt=U.groupByFn,wt=Rt===void 0?gr:Rt,It=U.manualGroupBy,qt=U.aggregations,Vt=qt===void 0?Dr:qt,Wt=U.plugins,Ut=U.state.groupBy,Jt=U.dispatch,ir=U.autoResetGroupBy,cr=ir===void 0||ir,br=U.disableGroupBy,Kr=U.defaultCanGroupBy,wr=U.getHooks;R(Wt,["useColumnOrder","useFilters"],"useGroupBy");var Qt=P(U);ye.forEach(function(_r){var Vr=_r.accessor,Wn=_r.defaultGroupBy,gi=_r.disableGroupBy;_r.canGroupBy=Vr?tt(_r.canGroupBy,gi!==!0&&void 0,br!==!0&&void 0,!0):tt(_r.canGroupBy,Wn,Kr,!1),_r.canGroupBy&&(_r.toggleGroupBy=function(){return U.toggleGroupBy(_r.id)}),_r.Aggregated=_r.Aggregated||_r.Cell});var kr=a.useCallback(function(_r,Vr){Jt({type:f.toggleGroupBy,columnId:_r,value:Vr})},[Jt]),hr=a.useCallback(function(_r){Jt({type:f.setGroupBy,value:_r})},[Jt]);He.forEach(function(_r){_r.getGroupByToggleProps=T(wr().getGroupByToggleProps,{instance:Qt(),header:_r})});var Mr=a.useMemo(function(){if(It||!Ut.length)return[ne,fe,Ue,rr,Fr,fe,Ue];var _r=Ut.filter(function($n){return ye.find(function(nn){return nn.id===$n})}),Vr=[],Wn={},gi=[],Tr={},Bn=[],Ln={},Xr=function $n(nn,Oa,Ku){if(Oa===void 0&&(Oa=0),Oa===_r.length)return nn.map(function(Wa){return l({},Wa,{depth:Oa})});var Fs=_r[Oa],Gu=wt(nn,Fs);return Object.entries(Gu).map(function(Wa,Zo){var vf=Wa[0],da=Wa[1],Fo=Fs+":"+vf,Ll=$n(da,Oa+1,Fo=Ku?Ku+">"+Fo:Fo),Ds=Oa?Ne(da,"leafRows"):da,Ja=function(pn,Us,bf){var Ls={};return ye.forEach(function(ii){if(_r.includes(ii.id))Ls[ii.id]=Us[0]?Us[0].values[ii.id]:null;else{var qu=typeof ii.aggregate=="function"?ii.aggregate:Vt[ii.aggregate]||Zt[ii.aggregate];if(qu){var wf=Us.map(function(Ya){return Ya.values[ii.id]}),Oi=pn.map(function(Ya){var Ms=Ya.values[ii.id];if(!bf&&ii.aggregateValue){var Ml=typeof ii.aggregateValue=="function"?ii.aggregateValue:Vt[ii.aggregateValue]||Zt[ii.aggregateValue];if(!Ml)throw console.info({column:ii}),new Error("React Table: Invalid column.aggregateValue option for column listed above");Ms=Ml(Ms,Ya,ii)}return Ms});Ls[ii.id]=qu(Oi,wf)}else{if(ii.aggregate)throw console.info({column:ii}),new Error("React Table: Invalid column.aggregate option for column listed above");Ls[ii.id]=null}}}),Ls}(Ds,da,Oa),Ia={id:Fo,isGrouped:!0,groupByID:Fs,groupByVal:vf,values:Ja,subRows:Ll,leafRows:Ds,depth:Oa,index:Zo};return Ll.forEach(function(pn){Vr.push(pn),Wn[pn.id]=pn,pn.isGrouped?(gi.push(pn),Tr[pn.id]=pn):(Bn.push(pn),Ln[pn.id]=pn)}),Ia})}(ne);return Xr.forEach(function($n){Vr.push($n),Wn[$n.id]=$n,$n.isGrouped?(gi.push($n),Tr[$n.id]=$n):(Bn.push($n),Ln[$n.id]=$n)}),[Xr,Vr,Wn,gi,Tr,Bn,Ln]},[It,Ut,ne,fe,Ue,ye,Vt,wt]),Wr=Mr[0],Dt=Mr[1],Ir=Mr[2],mn=Mr[3],Lr=Mr[4],hn=Mr[5],ln=Mr[6],In=P(cr);B(function(){In()&&Jt({type:f.resetGroupBy})},[Jt,It?null:te]),Object.assign(U,{preGroupedRows:ne,preGroupedFlatRow:fe,preGroupedRowsById:Ue,groupedRows:Wr,groupedFlatRows:Dt,groupedRowsById:Ir,onlyGroupedFlatRows:mn,onlyGroupedRowsById:Lr,nonGroupedFlatRows:hn,nonGroupedRowsById:ln,rows:Wr,flatRows:Dt,rowsById:Ir,toggleGroupBy:kr,setGroupBy:hr})}function Gr(U){U.allCells.forEach(function(te){var ne;te.isGrouped=te.column.isGrouped&&te.column.id===U.groupByID,te.isPlaceholder=!te.isGrouped&&te.column.isGrouped,te.isAggregated=!te.isGrouped&&!te.isPlaceholder&&((ne=U.subRows)==null?void 0:ne.length)})}function gr(U,te){return U.reduce(function(ne,fe,Ue){var ye=""+fe.values[te];return ne[ye]=Array.isArray(ne[ye])?ne[ye]:[],ne[ye].push(fe),ne},{})}var sr=/([0-9]+)/gm;function Gt(U,te){return U===te?0:U>te?1:-1}function Yr(U,te,ne){return[U.values[ne],te.values[ne]]}function Tn(U){return typeof U=="number"?isNaN(U)||U===1/0||U===-1/0?"":String(U):typeof U=="string"?U:""}var cn=Object.freeze({__proto__:null,alphanumeric:function(U,te,ne){var fe=Yr(U,te,ne),Ue=fe[0],ye=fe[1];for(Ue=Tn(Ue),ye=Tn(ye),Ue=Ue.split(sr).filter(Boolean),ye=ye.split(sr).filter(Boolean);Ue.length&&ye.length;){var He=Ue.shift(),Rt=ye.shift(),wt=parseInt(He,10),It=parseInt(Rt,10),qt=[wt,It].sort();if(isNaN(qt[0])){if(He>Rt)return 1;if(Rt>He)return-1}else{if(isNaN(qt[1]))return isNaN(wt)?-1:1;if(wt>It)return 1;if(It>wt)return-1}}return Ue.length-ye.length},datetime:function(U,te,ne){var fe=Yr(U,te,ne),Ue=fe[0],ye=fe[1];return Gt(Ue=Ue.getTime(),ye=ye.getTime())},basic:function(U,te,ne){var fe=Yr(U,te,ne);return Gt(fe[0],fe[1])},string:function(U,te,ne){var fe=Yr(U,te,ne),Ue=fe[0],ye=fe[1];for(Ue=Ue.split("").filter(Boolean),ye=ye.split("").filter(Boolean);Ue.length&&ye.length;){var He=Ue.shift(),Rt=ye.shift(),wt=He.toLowerCase(),It=Rt.toLowerCase();if(wt>It)return 1;if(It>wt)return-1;if(He>Rt)return 1;if(Rt>He)return-1}return Ue.length-ye.length},number:function(U,te,ne){var fe=Yr(U,te,ne),Ue=fe[0],ye=fe[1],He=/[^0-9.]/gi;return Gt(Ue=Number(String(Ue).replace(He,"")),ye=Number(String(ye).replace(He,"")))}});f.resetSortBy="resetSortBy",f.setSortBy="setSortBy",f.toggleSortBy="toggleSortBy",f.clearSortBy="clearSortBy",_.sortType="alphanumeric",_.sortDescFirst=!1;var Ur=function(U){U.getSortByToggleProps=[En],U.stateReducers.push(Un),U.useInstance.push(ur)};Ur.pluginName="useSortBy";var En=function(U,te){var ne=te.instance,fe=te.column,Ue=ne.isMultiSortEvent,ye=Ue===void 0?function(He){return He.shiftKey}:Ue;return[U,{onClick:fe.canSort?function(He){He.persist(),fe.toggleSortBy(void 0,!ne.disableMultiSort&&ye(He))}:void 0,style:{cursor:fe.canSort?"pointer":void 0},title:fe.canSort?"Toggle SortBy":void 0}]};function Un(U,te,ne,fe){if(te.type===f.init)return l({sortBy:[]},U);if(te.type===f.resetSortBy)return l({},U,{sortBy:fe.initialState.sortBy||[]});if(te.type===f.clearSortBy)return l({},U,{sortBy:U.sortBy.filter(function(Qt){return Qt.id!==te.columnId})});if(te.type===f.setSortBy)return l({},U,{sortBy:te.sortBy});if(te.type===f.toggleSortBy){var Ue,ye=te.columnId,He=te.desc,Rt=te.multi,wt=fe.allColumns,It=fe.disableMultiSort,qt=fe.disableSortRemove,Vt=fe.disableMultiRemove,Wt=fe.maxMultiSortColCount,Ut=Wt===void 0?Number.MAX_SAFE_INTEGER:Wt,Jt=U.sortBy,ir=wt.find(function(Qt){return Qt.id===ye}).sortDescFirst,cr=Jt.find(function(Qt){return Qt.id===ye}),br=Jt.findIndex(function(Qt){return Qt.id===ye}),Kr=He!=null,wr=[];return(Ue=!It&&Rt?cr?"toggle":"add":br!==Jt.length-1||Jt.length!==1?"replace":cr?"toggle":"replace")!="toggle"||qt||Kr||Rt&&Vt||!(cr&&cr.desc&&!ir||!cr.desc&&ir)||(Ue="remove"),Ue==="replace"?wr=[{id:ye,desc:Kr?He:ir}]:Ue==="add"?(wr=[].concat(Jt,[{id:ye,desc:Kr?He:ir}])).splice(0,wr.length-Ut):Ue==="toggle"?wr=Jt.map(function(Qt){return Qt.id===ye?l({},Qt,{desc:Kr?He:!cr.desc}):Qt}):Ue==="remove"&&(wr=Jt.filter(function(Qt){return Qt.id!==ye})),l({},U,{sortBy:wr})}}function ur(U){var te=U.data,ne=U.rows,fe=U.flatRows,Ue=U.allColumns,ye=U.orderByFn,He=ye===void 0?fi:ye,Rt=U.sortTypes,wt=U.manualSortBy,It=U.defaultCanSort,qt=U.disableSortBy,Vt=U.flatHeaders,Wt=U.state.sortBy,Ut=U.dispatch,Jt=U.plugins,ir=U.getHooks,cr=U.autoResetSortBy,br=cr===void 0||cr;R(Jt,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var Kr=a.useCallback(function(Dt){Ut({type:f.setSortBy,sortBy:Dt})},[Ut]),wr=a.useCallback(function(Dt,Ir,mn){Ut({type:f.toggleSortBy,columnId:Dt,desc:Ir,multi:mn})},[Ut]),Qt=P(U);Vt.forEach(function(Dt){var Ir=Dt.accessor,mn=Dt.canSort,Lr=Dt.disableSortBy,hn=Dt.id,ln=Ir?tt(Lr!==!0&&void 0,qt!==!0&&void 0,!0):tt(It,mn,!1);Dt.canSort=ln,Dt.canSort&&(Dt.toggleSortBy=function(_r,Vr){return wr(Dt.id,_r,Vr)},Dt.clearSortBy=function(){Ut({type:f.clearSortBy,columnId:Dt.id})}),Dt.getSortByToggleProps=T(ir().getSortByToggleProps,{instance:Qt(),column:Dt});var In=Wt.find(function(_r){return _r.id===hn});Dt.isSorted=!!In,Dt.sortedIndex=Wt.findIndex(function(_r){return _r.id===hn}),Dt.isSortedDesc=Dt.isSorted?In.desc:void 0});var kr=a.useMemo(function(){if(wt||!Wt.length)return[ne,fe];var Dt=[],Ir=Wt.filter(function(mn){return Ue.find(function(Lr){return Lr.id===mn.id})});return[function mn(Lr){var hn=He(Lr,Ir.map(function(ln){var In=Ue.find(function(Wn){return Wn.id===ln.id});if(!In)throw new Error("React-Table: Could not find a column with id: "+ln.id+" while sorting");var _r=In.sortType,Vr=lt(_r)||(Rt||{})[_r]||cn[_r];if(!Vr)throw new Error("React-Table: Could not find a valid sortType of '"+_r+"' for column '"+ln.id+"'.");return function(Wn,gi){return Vr(Wn,gi,ln.id,ln.desc)}}),Ir.map(function(ln){var In=Ue.find(function(_r){return _r.id===ln.id});return In&&In.sortInverted?ln.desc:!ln.desc}));return hn.forEach(function(ln){Dt.push(ln),ln.subRows&&ln.subRows.length!==0&&(ln.subRows=mn(ln.subRows))}),hn}(ne),Dt]},[wt,Wt,ne,fe,Ue,He,Rt]),hr=kr[0],Mr=kr[1],Wr=P(br);B(function(){Wr()&&Ut({type:f.resetSortBy})},[wt?null:te]),Object.assign(U,{preSortedRows:ne,preSortedFlatRows:fe,sortedRows:hr,sortedFlatRows:Mr,rows:hr,flatRows:Mr,setSortBy:Kr,toggleSortBy:wr})}function fi(U,te,ne){return[].concat(U).sort(function(fe,Ue){for(var ye=0;ye<te.length;ye+=1){var He=te[ye],Rt=ne[ye]===!1||ne[ye]==="desc",wt=He(fe,Ue);if(wt!==0)return Rt?-wt:wt}return ne[0]?fe.index-Ue.index:Ue.index-fe.index})}f.resetPage="resetPage",f.gotoPage="gotoPage",f.setPageSize="setPageSize";var Rn=function(U){U.stateReducers.push($i),U.useInstance.push(di)};function $i(U,te,ne,fe){if(te.type===f.init)return l({pageSize:10,pageIndex:0},U);if(te.type===f.resetPage)return l({},U,{pageIndex:fe.initialState.pageIndex||0});if(te.type===f.gotoPage){var Ue=fe.pageCount,ye=fe.page,He=F(te.pageIndex,U.pageIndex),Rt=!1;return He>U.pageIndex?Rt=Ue===-1?ye.length>=U.pageSize:He<Ue:He<U.pageIndex&&(Rt=He>-1),Rt?l({},U,{pageIndex:He}):U}if(te.type===f.setPageSize){var wt=te.pageSize,It=U.pageSize*U.pageIndex;return l({},U,{pageIndex:Math.floor(It/wt),pageSize:wt})}}function di(U){var te=U.rows,ne=U.autoResetPage,fe=ne===void 0||ne,Ue=U.manualExpandedKey,ye=Ue===void 0?"expanded":Ue,He=U.plugins,Rt=U.pageCount,wt=U.paginateExpandedRows,It=wt===void 0||wt,qt=U.expandSubRows,Vt=qt===void 0||qt,Wt=U.state,Ut=Wt.pageSize,Jt=Wt.pageIndex,ir=Wt.expanded,cr=Wt.globalFilter,br=Wt.filters,Kr=Wt.groupBy,wr=Wt.sortBy,Qt=U.dispatch,kr=U.data,hr=U.manualPagination;R(He,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var Mr=P(fe);B(function(){Mr()&&Qt({type:f.resetPage})},[Qt,hr?null:kr,cr,br,Kr,wr]);var Wr=hr?Rt:Math.ceil(te.length/Ut),Dt=a.useMemo(function(){return Wr>0?[].concat(new Array(Wr)).fill(null).map(function(Vr,Wn){return Wn}):[]},[Wr]),Ir=a.useMemo(function(){var Vr;if(hr)Vr=te;else{var Wn=Ut*Jt,gi=Wn+Ut;Vr=te.slice(Wn,gi)}return It?Vr:yt(Vr,{manualExpandedKey:ye,expanded:ir,expandSubRows:Vt})},[Vt,ir,ye,hr,Jt,Ut,It,te]),mn=Jt>0,Lr=Wr===-1?Ir.length>=Ut:Jt<Wr-1,hn=a.useCallback(function(Vr){Qt({type:f.gotoPage,pageIndex:Vr})},[Qt]),ln=a.useCallback(function(){return hn(function(Vr){return Vr-1})},[hn]),In=a.useCallback(function(){return hn(function(Vr){return Vr+1})},[hn]),_r=a.useCallback(function(Vr){Qt({type:f.setPageSize,pageSize:Vr})},[Qt]);Object.assign(U,{pageOptions:Dt,pageCount:Wr,page:Ir,canPreviousPage:mn,canNextPage:Lr,gotoPage:hn,previousPage:ln,nextPage:In,setPageSize:_r})}Rn.pluginName="usePagination",f.resetPivot="resetPivot",f.togglePivot="togglePivot";var Ta=function(U){U.getPivotToggleProps=[hi],U.stateReducers.push(v),U.useInstanceAfterData.push(m),U.allColumns.push(S),U.accessValue.push(C),U.materializedColumns.push(H),U.materializedColumnsDeps.push(X),U.visibleColumns.push(oe),U.visibleColumnsDeps.push(be),U.useInstance.push(he),U.prepareRow.push(me)};Ta.pluginName="usePivotColumns";var Zi=[],hi=function(U,te){var ne=te.header;return[U,{onClick:ne.canPivot?function(fe){fe.persist(),ne.togglePivot()}:void 0,style:{cursor:ne.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function v(U,te,ne,fe){if(te.type===f.init)return l({pivotColumns:Zi},U);if(te.type===f.resetPivot)return l({},U,{pivotColumns:fe.initialState.pivotColumns||Zi});if(te.type===f.togglePivot){var Ue=te.columnId,ye=te.value,He=ye!==void 0?ye:!U.pivotColumns.includes(Ue);return l({},U,He?{pivotColumns:[].concat(U.pivotColumns,[Ue])}:{pivotColumns:U.pivotColumns.filter(function(Rt){return Rt!==Ue})})}}function m(U){U.allColumns.forEach(function(te){te.isPivotSource=U.state.pivotColumns.includes(te.id)})}function S(U,te){var ne=te.instance;return U.forEach(function(fe){fe.isPivotSource=ne.state.pivotColumns.includes(fe.id),fe.uniqueValues=new Set}),U}function C(U,te){var ne=te.column;return ne.uniqueValues&&U!==void 0&&ne.uniqueValues.add(U),U}function H(U,te){var ne=te.instance,fe=ne.allColumns,Ue=ne.state;if(!Ue.pivotColumns.length||!Ue.groupBy||!Ue.groupBy.length)return U;var ye=Ue.pivotColumns.map(function(wt){return fe.find(function(It){return It.id===wt})}).filter(Boolean),He=fe.filter(function(wt){return!wt.isPivotSource&&!Ue.groupBy.includes(wt.id)&&!Ue.pivotColumns.includes(wt.id)}),Rt=Pe(function wt(It,qt,Vt){It===void 0&&(It=0),Vt===void 0&&(Vt=[]);var Wt=ye[It];return Wt?Array.from(Wt.uniqueValues).sort().map(function(Ut){var Jt=l({},Wt,{Header:Wt.PivotHeader||typeof Wt.header=="string"?Wt.Header+": "+Ut:Ut,isPivotGroup:!0,parent:qt,depth:It,id:qt?qt.id+"."+Wt.id+"."+Ut:Wt.id+"."+Ut,pivotValue:Ut});return Jt.columns=wt(It+1,Jt,[].concat(Vt,[function(ir){return ir.values[Wt.id]===Ut}])),Jt}):He.map(function(Ut){return l({},Ut,{canPivot:!1,isPivoted:!0,parent:qt,depth:It,id:""+(qt?qt.id+"."+Ut.id:Ut.id),accessor:function(Jt,ir,cr){if(Vt.every(function(br){return br(cr)}))return cr.values[Ut.id]}})})}());return[].concat(U,Rt)}function X(U,te){var ne=te.instance.state,fe=ne.pivotColumns,Ue=ne.groupBy;return[].concat(U,[fe,Ue])}function oe(U,te){var ne=te.instance.state;return U=U.filter(function(fe){return!fe.isPivotSource}),ne.pivotColumns.length&&ne.groupBy&&ne.groupBy.length&&(U=U.filter(function(fe){return fe.isGrouped||fe.isPivoted})),U}function be(U,te){var ne=te.instance;return[].concat(U,[ne.state.pivotColumns,ne.state.groupBy])}function he(U){var te=U.columns,ne=U.allColumns,fe=U.flatHeaders,Ue=U.getHooks,ye=U.plugins,He=U.dispatch,Rt=U.autoResetPivot,wt=Rt===void 0||Rt,It=U.manaulPivot,qt=U.disablePivot,Vt=U.defaultCanPivot;R(ye,["useGroupBy"],"usePivotColumns");var Wt=P(U);ne.forEach(function(Jt){var ir=Jt.accessor,cr=Jt.defaultPivot,br=Jt.disablePivot;Jt.canPivot=ir?tt(Jt.canPivot,br!==!0&&void 0,qt!==!0&&void 0,!0):tt(Jt.canPivot,cr,Vt,!1),Jt.canPivot&&(Jt.togglePivot=function(){return U.togglePivot(Jt.id)}),Jt.Aggregated=Jt.Aggregated||Jt.Cell}),fe.forEach(function(Jt){Jt.getPivotToggleProps=T(Ue().getPivotToggleProps,{instance:Wt(),header:Jt})});var Ut=P(wt);B(function(){Ut()&&He({type:f.resetPivot})},[He,It?null:te]),Object.assign(U,{togglePivot:function(Jt,ir){He({type:f.togglePivot,columnId:Jt,value:ir})}})}function me(U){U.allCells.forEach(function(te){te.isPivoted=te.column.isPivoted})}f.resetSelectedRows="resetSelectedRows",f.toggleAllRowsSelected="toggleAllRowsSelected",f.toggleRowSelected="toggleRowSelected",f.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var Ee=function(U){U.getToggleRowSelectedProps=[Ae],U.getToggleAllRowsSelectedProps=[De],U.getToggleAllPageRowsSelectedProps=[Ke],U.stateReducers.push(it),U.useInstance.push(gt),U.prepareRow.push(St)};Ee.pluginName="useRowSelect";var Ae=function(U,te){var ne=te.instance,fe=te.row,Ue=ne.manualRowSelectedKey,ye=Ue===void 0?"isSelected":Ue;return[U,{onChange:function(He){fe.toggleRowSelected(He.target.checked)},style:{cursor:"pointer"},checked:!(!fe.original||!fe.original[ye])||fe.isSelected,title:"Toggle Row Selected",indeterminate:fe.isSomeSelected}]},De=function(U,te){var ne=te.instance;return[U,{onChange:function(fe){ne.toggleAllRowsSelected(fe.target.checked)},style:{cursor:"pointer"},checked:ne.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:!!(!ne.isAllRowsSelected&&Object.keys(ne.state.selectedRowIds).length)}]},Ke=function(U,te){var ne=te.instance;return[U,{onChange:function(fe){ne.toggleAllPageRowsSelected(fe.target.checked)},style:{cursor:"pointer"},checked:ne.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:!!(!ne.isAllPageRowsSelected&&ne.page.some(function(fe){var Ue=fe.id;return ne.state.selectedRowIds[Ue]}))}]};function it(U,te,ne,fe){if(te.type===f.init)return l({selectedRowIds:{}},U);if(te.type===f.resetSelectedRows)return l({},U,{selectedRowIds:fe.initialState.selectedRowIds||{}});if(te.type===f.toggleAllRowsSelected){var Ue=te.value,ye=fe.isAllRowsSelected,He=fe.rowsById,Rt=fe.nonGroupedRowsById,wt=Rt===void 0?He:Rt,It=Ue!==void 0?Ue:!ye,qt=Object.assign({},U.selectedRowIds);return It?Object.keys(wt).forEach(function(hn){qt[hn]=!0}):Object.keys(wt).forEach(function(hn){delete qt[hn]}),l({},U,{selectedRowIds:qt})}if(te.type===f.toggleRowSelected){var Vt=te.id,Wt=te.value,Ut=fe.rowsById,Jt=fe.selectSubRows,ir=Jt===void 0||Jt,cr=fe.getSubRows,br=U.selectedRowIds[Vt],Kr=Wt!==void 0?Wt:!br;if(br===Kr)return U;var wr=l({},U.selectedRowIds);return function hn(ln){var In=Ut[ln];if(In&&(In.isGrouped||(Kr?wr[ln]=!0:delete wr[ln]),ir&&cr(In)))return cr(In).forEach(function(_r){return hn(_r.id)})}(Vt),l({},U,{selectedRowIds:wr})}if(te.type===f.toggleAllPageRowsSelected){var Qt=te.value,kr=fe.page,hr=fe.rowsById,Mr=fe.selectSubRows,Wr=Mr===void 0||Mr,Dt=fe.isAllPageRowsSelected,Ir=fe.getSubRows,mn=Qt!==void 0?Qt:!Dt,Lr=l({},U.selectedRowIds);return kr.forEach(function(hn){return function ln(In){var _r=hr[In];if(_r.isGrouped||(mn?Lr[In]=!0:delete Lr[In]),Wr&&Ir(_r))return Ir(_r).forEach(function(Vr){return ln(Vr.id)})}(hn.id)}),l({},U,{selectedRowIds:Lr})}return U}function gt(U){var te=U.data,ne=U.rows,fe=U.getHooks,Ue=U.plugins,ye=U.rowsById,He=U.nonGroupedRowsById,Rt=He===void 0?ye:He,wt=U.autoResetSelectedRows,It=wt===void 0||wt,qt=U.state.selectedRowIds,Vt=U.selectSubRows,Wt=Vt===void 0||Vt,Ut=U.dispatch,Jt=U.page,ir=U.getSubRows;R(Ue,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var cr=a.useMemo(function(){var Ir=[];return ne.forEach(function(mn){var Lr=Wt?function hn(ln,In,_r){if(In[ln.id])return!0;var Vr=_r(ln);if(Vr&&Vr.length){var Wn=!0,gi=!1;return Vr.forEach(function(Tr){gi&&!Wn||(hn(Tr,In,_r)?gi=!0:Wn=!1)}),!!Wn||!!gi&&null}return!1}(mn,qt,ir):!!qt[mn.id];mn.isSelected=!!Lr,mn.isSomeSelected=Lr===null,Lr&&Ir.push(mn)}),Ir},[ne,Wt,qt,ir]),br=!!(Object.keys(Rt).length&&Object.keys(qt).length),Kr=br;br&&Object.keys(Rt).some(function(Ir){return!qt[Ir]})&&(br=!1),br||Jt&&Jt.length&&Jt.some(function(Ir){var mn=Ir.id;return!qt[mn]})&&(Kr=!1);var wr=P(It);B(function(){wr()&&Ut({type:f.resetSelectedRows})},[Ut,te]);var Qt=a.useCallback(function(Ir){return Ut({type:f.toggleAllRowsSelected,value:Ir})},[Ut]),kr=a.useCallback(function(Ir){return Ut({type:f.toggleAllPageRowsSelected,value:Ir})},[Ut]),hr=a.useCallback(function(Ir,mn){return Ut({type:f.toggleRowSelected,id:Ir,value:mn})},[Ut]),Mr=P(U),Wr=T(fe().getToggleAllRowsSelectedProps,{instance:Mr()}),Dt=T(fe().getToggleAllPageRowsSelectedProps,{instance:Mr()});Object.assign(U,{selectedFlatRows:cr,isAllRowsSelected:br,isAllPageRowsSelected:Kr,toggleRowSelected:hr,toggleAllRowsSelected:Qt,getToggleAllRowsSelectedProps:Wr,getToggleAllPageRowsSelectedProps:Dt,toggleAllPageRowsSelected:kr})}function St(U,te){var ne=te.instance;U.toggleRowSelected=function(fe){return ne.toggleRowSelected(U.id,fe)},U.getToggleRowSelectedProps=T(ne.getHooks().getToggleRowSelectedProps,{instance:ne,row:U})}var ae=function(U){return{}},_e=function(U){return{}};f.setRowState="setRowState",f.setCellState="setCellState",f.resetRowState="resetRowState";var Ie=function(U){U.stateReducers.push(Fe),U.useInstance.push(ct),U.prepareRow.push(Et)};function Fe(U,te,ne,fe){var Ue=fe.initialRowStateAccessor,ye=Ue===void 0?ae:Ue,He=fe.initialCellStateAccessor,Rt=He===void 0?_e:He,wt=fe.rowsById;if(te.type===f.init)return l({rowState:{}},U);if(te.type===f.resetRowState)return l({},U,{rowState:fe.initialState.rowState||{}});if(te.type===f.setRowState){var It,qt=te.rowId,Vt=te.value,Wt=U.rowState[qt]!==void 0?U.rowState[qt]:ye(wt[qt]);return l({},U,{rowState:l({},U.rowState,(It={},It[qt]=F(Vt,Wt),It))})}if(te.type===f.setCellState){var Ut,Jt,ir,cr,br,Kr=te.rowId,wr=te.columnId,Qt=te.value,kr=U.rowState[Kr]!==void 0?U.rowState[Kr]:ye(wt[Kr]),hr=(kr==null||(Ut=kr.cellState)==null?void 0:Ut[wr])!==void 0?kr.cellState[wr]:Rt((Jt=wt[Kr])==null||(ir=Jt.cells)==null?void 0:ir.find(function(Mr){return Mr.column.id===wr}));return l({},U,{rowState:l({},U.rowState,(br={},br[Kr]=l({},kr,{cellState:l({},kr.cellState||{},(cr={},cr[wr]=F(Qt,hr),cr))}),br))})}}function ct(U){var te=U.autoResetRowState,ne=te===void 0||te,fe=U.data,Ue=U.dispatch,ye=a.useCallback(function(wt,It){return Ue({type:f.setRowState,rowId:wt,value:It})},[Ue]),He=a.useCallback(function(wt,It,qt){return Ue({type:f.setCellState,rowId:wt,columnId:It,value:qt})},[Ue]),Rt=P(ne);B(function(){Rt()&&Ue({type:f.resetRowState})},[fe]),Object.assign(U,{setRowState:ye,setCellState:He})}function Et(U,te){var ne=te.instance,fe=ne.initialRowStateAccessor,Ue=fe===void 0?ae:fe,ye=ne.initialCellStateAccessor,He=ye===void 0?_e:ye,Rt=ne.state.rowState;U&&(U.state=Rt[U.id]!==void 0?Rt[U.id]:Ue(U),U.setState=function(wt){return ne.setRowState(U.id,wt)},U.cells.forEach(function(wt){U.state.cellState||(U.state.cellState={}),wt.state=U.state.cellState[wt.column.id]!==void 0?U.state.cellState[wt.column.id]:He(wt),wt.setState=function(It){return ne.setCellState(U.id,wt.column.id,It)}}))}Ie.pluginName="useRowState",f.resetColumnOrder="resetColumnOrder",f.setColumnOrder="setColumnOrder";var fr=function(U){U.stateReducers.push(Ht),U.visibleColumnsDeps.push(function(te,ne){var fe=ne.instance;return[].concat(te,[fe.state.columnOrder])}),U.visibleColumns.push(qr),U.useInstance.push(lr)};function Ht(U,te,ne,fe){return te.type===f.init?l({columnOrder:[]},U):te.type===f.resetColumnOrder?l({},U,{columnOrder:fe.initialState.columnOrder||[]}):te.type===f.setColumnOrder?l({},U,{columnOrder:F(te.columnOrder,U.columnOrder)}):void 0}function qr(U,te){var ne=te.instance.state.columnOrder;if(!ne||!ne.length)return U;for(var fe=[].concat(ne),Ue=[].concat(U),ye=[],He=function(){var Rt=fe.shift(),wt=Ue.findIndex(function(It){return It.id===Rt});wt>-1&&ye.push(Ue.splice(wt,1)[0])};Ue.length&&fe.length;)He();return[].concat(ye,Ue)}function lr(U){var te=U.dispatch;U.setColumnOrder=a.useCallback(function(ne){return te({type:f.setColumnOrder,columnOrder:ne})},[te])}fr.pluginName="useColumnOrder",_.canResize=!0,f.columnStartResizing="columnStartResizing",f.columnResizing="columnResizing",f.columnDoneResizing="columnDoneResizing",f.resetResize="resetResize";var pr=function(U){U.getResizerProps=[tn],U.getHeaderProps.push({style:{position:"relative"}}),U.stateReducers.push(dr),U.useInstance.push(Zr),U.useInstanceBeforeDimensions.push(rn)},tn=function(U,te){var ne=te.instance,fe=te.header,Ue=ne.dispatch,ye=function(He,Rt){var wt=!1;if(He.type==="touchstart"){if(He.touches&&He.touches.length>1)return;wt=!0}var It,qt,Vt=function(wr){var Qt=[];return function kr(hr){hr.columns&&hr.columns.length&&hr.columns.map(kr),Qt.push(hr)}(wr),Qt}(Rt).map(function(wr){return[wr.id,wr.totalWidth]}),Wt=wt?Math.round(He.touches[0].clientX):He.clientX,Ut=function(){window.cancelAnimationFrame(It),It=null,Ue({type:f.columnDoneResizing})},Jt=function(){window.cancelAnimationFrame(It),It=null,Ue({type:f.columnResizing,clientX:qt})},ir=function(wr){qt=wr,It||(It=window.requestAnimationFrame(Jt))},cr={mouse:{moveEvent:"mousemove",moveHandler:function(wr){return ir(wr.clientX)},upEvent:"mouseup",upHandler:function(wr){document.removeEventListener("mousemove",cr.mouse.moveHandler),document.removeEventListener("mouseup",cr.mouse.upHandler),Ut()}},touch:{moveEvent:"touchmove",moveHandler:function(wr){return wr.cancelable&&(wr.preventDefault(),wr.stopPropagation()),ir(wr.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(wr){document.removeEventListener(cr.touch.moveEvent,cr.touch.moveHandler),document.removeEventListener(cr.touch.upEvent,cr.touch.moveHandler),Ut()}}},br=wt?cr.touch:cr.mouse,Kr=!!function(){if(typeof xe=="boolean")return xe;var wr=!1;try{var Qt={get passive(){return wr=!0,!1}};window.addEventListener("test",null,Qt),window.removeEventListener("test",null,Qt)}catch{wr=!1}return xe=wr}()&&{passive:!1};document.addEventListener(br.moveEvent,br.moveHandler,Kr),document.addEventListener(br.upEvent,br.upHandler,Kr),Ue({type:f.columnStartResizing,columnId:Rt.id,columnWidth:Rt.totalWidth,headerIdWidths:Vt,clientX:Wt})};return[U,{onMouseDown:function(He){return He.persist()||ye(He,fe)},onTouchStart:function(He){return He.persist()||ye(He,fe)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function dr(U,te){if(te.type===f.init)return l({columnResizing:{columnWidths:{}}},U);if(te.type===f.resetResize)return l({},U,{columnResizing:{columnWidths:{}}});if(te.type===f.columnStartResizing){var ne=te.clientX,fe=te.columnId,Ue=te.columnWidth,ye=te.headerIdWidths;return l({},U,{columnResizing:l({},U.columnResizing,{startX:ne,headerIdWidths:ye,columnWidth:Ue,isResizingColumn:fe})})}if(te.type===f.columnResizing){var He=te.clientX,Rt=U.columnResizing,wt=Rt.startX,It=Rt.columnWidth,qt=Rt.headerIdWidths,Vt=(He-wt)/It,Wt={};return(qt===void 0?[]:qt).forEach(function(Ut){var Jt=Ut[0],ir=Ut[1];Wt[Jt]=Math.max(ir+ir*Vt,0)}),l({},U,{columnResizing:l({},U.columnResizing,{columnWidths:l({},U.columnResizing.columnWidths,{},Wt)})})}return te.type===f.columnDoneResizing?l({},U,{columnResizing:l({},U.columnResizing,{startX:null,isResizingColumn:null})}):void 0}pr.pluginName="useResizeColumns";var rn=function(U){var te=U.flatHeaders,ne=U.disableResizing,fe=U.getHooks,Ue=U.state.columnResizing,ye=P(U);te.forEach(function(He){var Rt=tt(He.disableResizing!==!0&&void 0,ne!==!0&&void 0,!0);He.canResize=Rt,He.width=Ue.columnWidths[He.id]||He.originalWidth||He.width,He.isResizing=Ue.isResizingColumn===He.id,Rt&&(He.getResizerProps=T(fe().getResizerProps,{instance:ye(),header:He}))})};function Zr(U){var te=U.plugins,ne=U.dispatch,fe=U.autoResetResize,Ue=fe===void 0||fe,ye=U.columns;R(te,["useAbsoluteLayout"],"useResizeColumns");var He=P(Ue);B(function(){He()&&ne({type:f.resetResize})},[ye]);var Rt=a.useCallback(function(){return ne({type:f.resetResize})},[ne]);Object.assign(U,{resetResizing:Rt})}var Cn={position:"absolute",top:0},Qr=function(U){U.getTableBodyProps.push(en),U.getRowProps.push(en),U.getHeaderGroupProps.push(en),U.getFooterGroupProps.push(en),U.getHeaderProps.push(function(te,ne){var fe=ne.column;return[te,{style:l({},Cn,{left:fe.totalLeft+"px",width:fe.totalWidth+"px"})}]}),U.getCellProps.push(function(te,ne){var fe=ne.cell;return[te,{style:l({},Cn,{left:fe.column.totalLeft+"px",width:fe.column.totalWidth+"px"})}]}),U.getFooterProps.push(function(te,ne){var fe=ne.column;return[te,{style:l({},Cn,{left:fe.totalLeft+"px",width:fe.totalWidth+"px"})}]})};Qr.pluginName="useAbsoluteLayout";var en=function(U,te){return[U,{style:{position:"relative",width:te.instance.totalColumnsWidth+"px"}}]},bn={display:"inline-block",boxSizing:"border-box"},xr=function(U,te){return[U,{style:{display:"flex",width:te.instance.totalColumnsWidth+"px"}}]},Vn=function(U){U.getRowProps.push(xr),U.getHeaderGroupProps.push(xr),U.getFooterGroupProps.push(xr),U.getHeaderProps.push(function(te,ne){var fe=ne.column;return[te,{style:l({},bn,{width:fe.totalWidth+"px"})}]}),U.getCellProps.push(function(te,ne){var fe=ne.cell;return[te,{style:l({},bn,{width:fe.column.totalWidth+"px"})}]}),U.getFooterProps.push(function(te,ne){var fe=ne.column;return[te,{style:l({},bn,{width:fe.totalWidth+"px"})}]})};function xi(U){U.getTableProps.push(ea),U.getRowProps.push(On),U.getHeaderGroupProps.push(On),U.getFooterGroupProps.push(On),U.getHeaderProps.push(Ki),U.getCellProps.push(za),U.getFooterProps.push(co)}Vn.pluginName="useBlockLayout",xi.pluginName="useFlexLayout";var ea=function(U,te){return[U,{style:{minWidth:te.instance.totalColumnsMinWidth+"px"}}]},On=function(U,te){return[U,{style:{display:"flex",flex:"1 0 auto",minWidth:te.instance.totalColumnsMinWidth+"px"}}]},Ki=function(U,te){var ne=te.column;return[U,{style:{boxSizing:"border-box",flex:ne.totalFlexWidth?ne.totalFlexWidth+" 0 auto":void 0,minWidth:ne.totalMinWidth+"px",width:ne.totalWidth+"px"}}]},za=function(U,te){var ne=te.cell;return[U,{style:{boxSizing:"border-box",flex:ne.column.totalFlexWidth+" 0 auto",minWidth:ne.column.totalMinWidth+"px",width:ne.column.totalWidth+"px"}}]},co=function(U,te){var ne=te.column;return[U,{style:{boxSizing:"border-box",flex:ne.totalFlexWidth?ne.totalFlexWidth+" 0 auto":void 0,minWidth:ne.totalMinWidth+"px",width:ne.totalWidth+"px"}}]};function An(U){U.stateReducers.push(Xo),U.getTableProps.push(qn),U.getHeaderProps.push(Ca),U.getRowProps.push(zn)}f.columnStartResizing="columnStartResizing",f.columnResizing="columnResizing",f.columnDoneResizing="columnDoneResizing",f.resetResize="resetResize",An.pluginName="useGridLayout";var qn=function(U,te){var ne=te.instance;return[U,{style:{display:"grid",gridTemplateColumns:ne.visibleColumns.map(function(fe){var Ue;return ne.state.gridLayout.columnWidths[fe.id]?ne.state.gridLayout.columnWidths[fe.id]+"px":(Ue=ne.state.columnResizing)!=null&&Ue.isResizingColumn?ne.state.gridLayout.startWidths[fe.id]+"px":typeof fe.width=="number"?fe.width+"px":fe.width}).join(" ")}}]},Ca=function(U,te){var ne=te.column;return[U,{id:"header-cell-"+ne.id,style:{position:"sticky",gridColumn:"span "+ne.totalVisibleHeaderCount}}]},zn=function(U,te){var ne=te.row;return ne.isExpanded?[U,{style:{gridColumn:"1 / "+(ne.cells.length+1)}}]:[U,{}]};function Xo(U,te,ne,fe){if(te.type===f.init)return l({gridLayout:{columnWidths:{}}},U);if(te.type===f.resetResize)return l({},U,{gridLayout:{columnWidths:{}}});if(te.type===f.columnStartResizing){var Ue=te.columnId,ye=te.headerIdWidths,He=fa(Ue);if(He!==void 0){var Rt=fe.visibleColumns.reduce(function(Qt,kr){var hr;return l({},Qt,((hr={})[kr.id]=fa(kr.id),hr))},{}),wt=fe.visibleColumns.reduce(function(Qt,kr){var hr;return l({},Qt,((hr={})[kr.id]=kr.minWidth,hr))},{}),It=fe.visibleColumns.reduce(function(Qt,kr){var hr;return l({},Qt,((hr={})[kr.id]=kr.maxWidth,hr))},{}),qt=ye.map(function(Qt){var kr=Qt[0];return[kr,fa(kr)]});return l({},U,{gridLayout:l({},U.gridLayout,{startWidths:Rt,minWidths:wt,maxWidths:It,headerIdGridWidths:qt,columnWidth:He})})}return U}if(te.type===f.columnResizing){var Vt=te.clientX,Wt=U.columnResizing.startX,Ut=U.gridLayout,Jt=Ut.columnWidth,ir=Ut.minWidths,cr=Ut.maxWidths,br=Ut.headerIdGridWidths,Kr=(Vt-Wt)/Jt,wr={};return(br===void 0?[]:br).forEach(function(Qt){var kr=Qt[0],hr=Qt[1];wr[kr]=Math.min(Math.max(ir[kr],hr+hr*Kr),cr[kr])}),l({},U,{gridLayout:l({},U.gridLayout,{columnWidths:l({},U.gridLayout.columnWidths,{},wr)})})}return te.type===f.columnDoneResizing?l({},U,{gridLayout:l({},U.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function fa(U){var te,ne=(te=document.getElementById("header-cell-"+U))==null?void 0:te.offsetWidth;if(ne!==void 0)return ne}i._UNSTABLE_usePivotColumns=Ta,i.actions=f,i.defaultColumn=_,i.defaultGroupByFn=gr,i.defaultOrderByFn=fi,i.defaultRenderer=y,i.emptyRenderer=b,i.ensurePluginOrder=R,i.flexRender=Y,i.functionalUpdate=F,i.loopHooks=O,i.makePropGetter=T,i.makeRenderer=W,i.reduceHooks=x,i.safeUseLayoutEffect=K,i.useAbsoluteLayout=Qr,i.useAsyncDebounce=function(U,te){te===void 0&&(te=0);var ne=a.useRef({}),fe=P(U),Ue=P(te);return a.useCallback(function(){var ye=d(regeneratorRuntime.mark(function He(){var Rt,wt,It,qt=arguments;return regeneratorRuntime.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:for(Rt=qt.length,wt=new Array(Rt),It=0;It<Rt;It++)wt[It]=qt[It];return ne.current.promise||(ne.current.promise=new Promise(function(Wt,Ut){ne.current.resolve=Wt,ne.current.reject=Ut})),ne.current.timeout&&clearTimeout(ne.current.timeout),ne.current.timeout=setTimeout(d(regeneratorRuntime.mark(function Wt(){return regeneratorRuntime.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return delete ne.current.timeout,Ut.prev=1,Ut.t0=ne.current,Ut.next=5,fe().apply(void 0,wt);case 5:Ut.t1=Ut.sent,Ut.t0.resolve.call(Ut.t0,Ut.t1),Ut.next=12;break;case 9:Ut.prev=9,Ut.t2=Ut.catch(1),ne.current.reject(Ut.t2);case 12:return Ut.prev=12,delete ne.current.promise,Ut.finish(12);case 15:case"end":return Ut.stop()}},Wt,null,[[1,9,12,15]])})),Ue()),Vt.abrupt("return",ne.current.promise);case 5:case"end":return Vt.stop()}},He)}));return function(){return ye.apply(this,arguments)}}(),[fe,Ue])},i.useBlockLayout=Vn,i.useColumnOrder=fr,i.useExpanded=k,i.useFilters=tr,i.useFlexLayout=xi,i.useGetLatest=P,i.useGlobalFilter=pe,i.useGridLayout=An,i.useGroupBy=$t,i.useMountedLayoutEffect=B,i.usePagination=Rn,i.useResizeColumns=pr,i.useRowSelect=Ee,i.useRowState=Ie,i.useSortBy=Ur,i.useTable=function(U){for(var te=arguments.length,ne=new Array(te>1?te-1:0),fe=1;fe<te;fe++)ne[fe-1]=arguments[fe];U=Oe(U),ne=[D].concat(ne);var Ue=a.useRef({}),ye=P(Ue.current);Object.assign(ye(),l({},U,{plugins:ne,hooks:M()})),ne.filter(Boolean).forEach(function(Tr){Tr(ye().hooks)});var He=P(ye().hooks);ye().getHooks=He,delete ye().hooks,Object.assign(ye(),x(He().useOptions,Oe(U)));var Rt=ye(),wt=Rt.data,It=Rt.columns,qt=Rt.initialState,Vt=Rt.defaultColumn,Wt=Rt.getSubRows,Ut=Rt.getRowId,Jt=Rt.stateReducer,ir=Rt.useControlledState,cr=P(Jt),br=a.useCallback(function(Tr,Bn){if(!Bn.type)throw console.info({action:Bn}),new Error("Unknown Action ");return[].concat(He().stateReducers,Array.isArray(cr())?cr():[cr()]).reduce(function(Ln,Xr){return Xr(Ln,Bn,Tr,ye())||Ln},Tr)},[He,cr,ye]),Kr=a.useReducer(br,void 0,function(){return br(qt,{type:f.init})}),wr=Kr[0],Qt=Kr[1],kr=x([].concat(He().useControlledState,[ir]),wr,{instance:ye()});Object.assign(ye(),{state:kr,dispatch:Qt});var hr=a.useMemo(function(){return q(x(He().columns,It,{instance:ye()}))},[He,ye,It].concat(x(He().columnsDeps,[],{instance:ye()})));ye().columns=hr;var Mr=a.useMemo(function(){return x(He().allColumns,Pe(hr),{instance:ye()}).map($)},[hr,He,ye].concat(x(He().allColumnsDeps,[],{instance:ye()})));ye().allColumns=Mr;var Wr=a.useMemo(function(){for(var Tr=[],Bn=[],Ln={},Xr=[].concat(Mr);Xr.length;){var $n=Xr.shift();Q({data:wt,rows:Tr,flatRows:Bn,rowsById:Ln,column:$n,getRowId:Ut,getSubRows:Wt,accessValueHooks:He().accessValue,getInstance:ye})}return[Tr,Bn,Ln]},[Mr,wt,Ut,Wt,He,ye]),Dt=Wr[0],Ir=Wr[1],mn=Wr[2];Object.assign(ye(),{rows:Dt,initialRows:[].concat(Dt),flatRows:Ir,rowsById:mn}),O(He().useInstanceAfterData,ye());var Lr=a.useMemo(function(){return x(He().visibleColumns,Mr,{instance:ye()}).map(function(Tr){return ie(Tr,Vt)})},[He,Mr,ye,Vt].concat(x(He().visibleColumnsDeps,[],{instance:ye()})));Mr=a.useMemo(function(){var Tr=[].concat(Lr);return Mr.forEach(function(Bn){Tr.find(function(Ln){return Ln.id===Bn.id})||Tr.push(Bn)}),Tr},[Mr,Lr]),ye().allColumns=Mr;var hn=a.useMemo(function(){return x(He().headerGroups,ge(Lr,Vt),ye())},[He,Lr,Vt,ye].concat(x(He().headerGroupsDeps,[],{instance:ye()})));ye().headerGroups=hn;var ln=a.useMemo(function(){return hn.length?hn[0].headers:[]},[hn]);ye().headers=ln,ye().flatHeaders=hn.reduce(function(Tr,Bn){return[].concat(Tr,Bn.headers)},[]),O(He().useInstanceBeforeDimensions,ye());var In=Lr.filter(function(Tr){return Tr.isVisible}).map(function(Tr){return Tr.id}).sort().join("_");Lr=a.useMemo(function(){return Lr.filter(function(Tr){return Tr.isVisible})},[Lr,In]),ye().visibleColumns=Lr;var _r=ut(ln),Vr=_r[0],Wn=_r[1],gi=_r[2];return ye().totalColumnsMinWidth=Vr,ye().totalColumnsWidth=Wn,ye().totalColumnsMaxWidth=gi,O(He().useInstance,ye()),[].concat(ye().flatHeaders,ye().allColumns).forEach(function(Tr){Tr.render=W(ye(),Tr),Tr.getHeaderProps=T(He().getHeaderProps,{instance:ye(),column:Tr}),Tr.getFooterProps=T(He().getFooterProps,{instance:ye(),column:Tr})}),ye().headerGroups=a.useMemo(function(){return hn.filter(function(Tr,Bn){return Tr.headers=Tr.headers.filter(function(Ln){return Ln.headers?function Xr($n){return $n.filter(function(nn){return nn.headers?Xr(nn.headers):nn.isVisible}).length}(Ln.headers):Ln.isVisible}),!!Tr.headers.length&&(Tr.getHeaderGroupProps=T(He().getHeaderGroupProps,{instance:ye(),headerGroup:Tr,index:Bn}),Tr.getFooterGroupProps=T(He().getFooterGroupProps,{instance:ye(),headerGroup:Tr,index:Bn}),!0)})},[hn,ye,He]),ye().footerGroups=[].concat(ye().headerGroups).reverse(),ye().prepareRow=a.useCallback(function(Tr){Tr.getRowProps=T(He().getRowProps,{instance:ye(),row:Tr}),Tr.allCells=Mr.map(function(Bn){var Ln=Tr.values[Bn.id],Xr={column:Bn,row:Tr,value:Ln};return Xr.getCellProps=T(He().getCellProps,{instance:ye(),cell:Xr}),Xr.render=W(ye(),Bn,{row:Tr,cell:Xr,value:Ln}),Xr}),Tr.cells=Lr.map(function(Bn){return Tr.allCells.find(function(Ln){return Ln.column.id===Bn.id})}),O(He().prepareRow,Tr,{instance:ye()})},[He,ye,Mr,Lr]),ye().getTableProps=T(He().getTableProps,{instance:ye()}),ye().getTableBodyProps=T(He().getTableBodyProps,{instance:ye()}),O(He().useFinalInstance,ye()),ye()},Object.defineProperty(i,"__esModule",{value:!0})})}(ng,ng.exports)),ng.exports}var jS;function fO(){return jS||(jS=1,rv.exports=cO()),rv.exports}var dO=ky.exports,VS;function hO(){return VS||(VS=1,function(e,r){(function(a,o){e.exports=o(mg(),FT(),k2(),lO,fO())})(dO,(i,a,o,d,l)=>(()=>{var u={577:b=>{b.exports=a},606:b=>{b.exports=o},156:b=>{b.exports=i},767:b=>{b.exports=l},928:b=>{b.exports=d}},h={};function f(b){var _=h[b];if(_!==void 0)return _.exports;var A=h[b]={exports:{}};return u[b](A,A.exports,f),A.exports}f.n=b=>{var _=b&&b.__esModule?()=>b.default:()=>b;return f.d(_,{a:_}),_},f.d=(b,_)=>{for(var A in _)f.o(_,A)&&!f.o(b,A)&&Object.defineProperty(b,A,{enumerable:!0,get:_[A]})},f.o=(b,_)=>Object.prototype.hasOwnProperty.call(b,_),f.r=b=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(b,"__esModule",{value:!0})};var y={};return(()=>{f.r(y),f.d(y,{CombinedDataProvider:()=>k,DatasetContext:()=>W,DatasetProvider:()=>Y,FileUpload:()=>R,Image:()=>xe,Link:()=>We,LoginButton:()=>Ge,LogoutButton:()=>Oe,SessionContext:()=>x,SessionProvider:()=>O,Table:()=>qe,TableColumn:()=>j,Text:()=>ze,ThingContext:()=>Pe,ThingProvider:()=>$,Value:()=>Ct,Video:()=>Br,useDataset:()=>K,useFile:()=>rt,useSession:()=>jr,useThing:()=>or});var b=f(156),_=f.n(b),A=f(577),T=f(606);const x=(0,b.createContext)({login:T.login,logout:T.logout,fetch:T.fetch,session:(0,T.getDefaultSession)(),sessionRequestInProgress:!0,profile:void 0}),O=({sessionId:$e,children:vt,onError:st,sessionRequestInProgress:Le,restorePreviousSession:ft,skipLoadingProfile:Xt,onSessionRestore:zt})=>{const tr=ft||typeof zt<"u",[jt,ue]=(0,b.useState)((0,T.getDefaultSession)()),[pe,Tt]=(0,b.useState)();(0,b.useEffect)(()=>{zt!==void 0&&(0,T.onSessionRestore)(zt)},[zt]);const xt=typeof Le>"u"?!jt.info.isLoggedIn:Le,[Pt,Zt]=(0,b.useState)(xt);let rr;typeof window<"u"&&(rr=window.location),(0,b.useEffect)(()=>{(0,T.handleIncomingRedirect)({url:window.location.href,restorePreviousSession:tr}).then(async er=>{if(Xt!==!0&&er?.webId!==void 0){const mr=await(0,A.getProfileAll)(er?.webId,{fetch:jt.fetch});Tt(mr)}}).catch(er=>{if(st)st(er);else throw er}).finally(()=>{Zt(!1)}),(0,T.getDefaultSession)().on("logout",()=>{ue((0,T.getDefaultSession)())})},[jt,$e,st,rr,tr,Xt]);const Fr=async er=>{Zt(!0);try{await(0,T.login)(er)}catch(mr){if(st)st(mr);else throw mr}finally{Zt(!1)}},$t=async()=>{try{await(0,T.logout)(),Tt(void 0)}catch(er){if(st)st(er);else throw er}};return _().createElement(x.Provider,{value:{session:jt,login:Fr,logout:$t,sessionRequestInProgress:Pt,setSessionRequestInProgress:Zt,fetch:T.fetch,profile:pe}},vt)};function R({saveLocation:$e,onError:vt,onSave:st,inputProps:Le,autosave:ft}){const{fetch:Xt}=(0,b.useContext)(x),zt=async tr=>{const jt=tr.target;if(jt.files&&ft)try{const ue=await(0,A.saveFileInContainer)($e,jt.files[0],{slug:jt.files[0].name?jt.files[0].name:void 0,fetch:Xt});st&&st(ue)}catch(ue){vt&&vt(ue)}};return _().createElement(_().Fragment,null,_().createElement("input",Object.assign({type:"file"},Le,{onChange:tr=>zt(tr),"data-testid":"form-input"})))}var F=f(928),P=f.n(F);function K($e,vt){const{fetch:st}=(0,b.useContext)(x),{solidDataset:Le}=(0,b.useContext)(W),{data:ft,error:Xt}=P()($e?[$e,vt,st]:null,()=>{const tr=Object.assign({fetch:st},vt);return(0,A.getSolidDataset)($e,tr)});return{dataset:$e?ft:Le,error:Xt}}const B=(0,b.createContext)({solidDataset:void 0,setDataset:()=>{}}),W=B,Y=({children:$e,onError:vt,solidDataset:st,datasetUrl:Le,loading:ft,loadingComponent:Xt})=>{const{dataset:zt,error:tr}=K(Le);tr&&vt&&vt(tr);const jt=st??zt,[ue,pe]=(0,b.useState)(jt);(0,b.useEffect)(()=>{pe(jt)},[jt]);let Tt=Xt&&_().createElement(Xt,null)||ft||_().createElement("span",null,"Fetching data...");return Xt===null&&(Tt=null),_().createElement(B.Provider,{value:{solidDataset:ue,setDataset:pe}},ue?$e:Tt)},q=(0,b.createContext)({thing:null,setThing:()=>{}}),Pe=q,$=({children:$e,thing:vt,thingUrl:st})=>{const{solidDataset:Le}=(0,b.useContext)(W);let ft=vt;Le&&st&&(ft=(0,A.getThing)(Le,st));const[Xt,zt]=(0,b.useState)(ft||null);return(0,b.useEffect)(()=>{Le&&st?zt((0,A.getThing)(Le,st)):vt&&zt(vt)},[Le,st,vt]),_().createElement(q.Provider,{value:{thing:Xt,setThing:zt}},$e)},ie=async($e,vt,st,Le,ft,Xt,zt)=>{try{return ft!==void 0&&vt.size>ft*1024?(st.setCustomValidity(`The selected file must not be larger than ${ft}kB`),st.reportValidity(),null):(st.setCustomValidity(""),await(0,A.overwriteFile)($e,vt,{fetch:Le}),Xt&&Xt(),URL.createObjectURL(vt))}catch(tr){return zt&&zt(tr),null}},ge=async($e,vt)=>await(0,A.getFile)($e,{fetch:vt});function Se($e,vt,st,Le){switch($e){case"boolean":return(0,A.getBoolean)(vt,st);case"datetime":return(0,A.getDatetime)(vt,st);case"decimal":return(0,A.getDecimal)(vt,st);case"integer":return(0,A.getInteger)(vt,st);case"url":return(0,A.getUrl)(vt,st);default:return Le?(0,A.getStringWithLocale)(vt,st,Le):(0,A.getStringNoLocale)(vt,st)}}function tt($e,vt,st,Le){switch($e){case"boolean":return(0,A.getBooleanAll)(vt,st);case"datetime":return(0,A.getDatetimeAll)(vt,st);case"decimal":return(0,A.getDecimalAll)(vt,st);case"integer":return(0,A.getIntegerAll)(vt,st);case"url":return(0,A.getUrlAll)(vt,st);default:return Le?(0,A.getStringWithLocaleAll)(vt,st,Le):(0,A.getStringNoLocaleAll)(vt,st)}}function lt($e,vt,st,Le,ft){return Le.find(Xt=>$e(vt,st,Xt,ft))||Le[0]}function Ne($e){const{dataset:vt,thing:st,properties:Le,property:ft,type:Xt,locale:zt}=$e,{solidDataset:tr,setDataset:jt=()=>{}}=(0,b.useContext)(W),ue=vt||tr,{thing:pe,setThing:Tt=()=>{}}=(0,b.useContext)(Pe),xt=st||pe||void 0;let Pt;xt||(Pt=new Error("Thing not found as property or in context"));const Zt=xt&&Le?lt(Se,Xt,xt,Le,zt)||Le[0]:ft;if(!Zt)throw new Error("No property provided");const rr=xt&&Zt?Se(Xt,xt,Zt,zt):null;return{dataset:ue,thing:xt,property:Zt,error:Pt,value:rr,setDataset:jt,setThing:Tt}}function yt(){const[$e,vt]=(0,b.useState)(null);return(0,b.useEffect)(()=>{const st=document.createElement("input");st.type="datetime-local",vt(st.type!=="text")},[]),$e}async function ve($e,vt){const st=await(0,A.getSolidDataset)($e);vt(st)}function rt($e){const[vt,st]=(0,b.useState)(),[Le,ft]=(0,b.useState)(!1),[Xt,zt]=(0,b.useState)(),{fetch:tr}=(0,b.useContext)(x);return(0,b.useEffect)(()=>{$e&&(ft(!0),ge($e,tr).then(jt=>{zt(jt),ft(!1)}).catch(jt=>{st(jt),ft(!1)}))},[$e,tr]),{error:vt,inProgress:Le,data:Xt}}var J=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};function xe($e){var{thing:vt,property:st,properties:Le,edit:ft,autosave:Xt,allowDelete:zt,onSave:tr,onError:jt,maxSize:ue,alt:pe,inputProps:Tt,errorComponent:xt,loadingComponent:Pt,deleteComponent:Zt,saveLocation:rr,solidDataset:Fr}=$e,$t=J($e,["thing","property","properties","edit","autosave","allowDelete","onSave","onError","maxSize","alt","inputProps","errorComponent","loadingComponent","deleteComponent","saveLocation","solidDataset"]);const{fetch:er}=(0,b.useContext)(x),mr=Ne({thing:vt,property:st,properties:Le,type:"url"}),{value:ar,thing:Dr,error:Ar}=mr;let Gr;ar||(Gr=new Error("No value found for property."));const gr=!Dr&&!Ar,[sr,Gt]=(0,b.useState)(Ar??Gr);(0,b.useEffect)(()=>{sr&&jt&&jt(sr)},[sr,jt,xt]);const[Yr,Tn]=(0,b.useState)(),{data:cn,error:Ur,inProgress:En}=rt(ar);(0,b.useEffect)(()=>{if(En)return;if(Ur){Gt(Ur);return}const Rn=cn&&URL.createObjectURL(cn);Rn&&Tn(Rn)},[cn,En,Ur]);const Un=async()=>{if(!(!vt||!Fr||!st||typeof ar!="string"||!Xt))try{const Rn=(0,A.removeUrl)(vt,st,ar),$i=(0,A.setThing)(Fr,Rn),di=(0,A.getSourceUrl)(Fr);if(!di)return;await(0,A.saveSolidDatasetAt)(di,$i,{fetch:er})}catch(Rn){Gt(Rn)}},ur=async Rn=>{const $i=Rn.files;if(Xt&&$i&&$i.length>0){if(ar){const di=await ie(ar,$i[0],Rn,er,ue,tr,jt);di&&Tn(di)}else if(!ar&&rr){const di=await(0,A.saveFileInContainer)(rr,$i[0],{fetch:er}),Ta=(0,A.getSourceUrl)(di);if(Ta&&vt&&st&&Fr){Tn(Ta);try{const Zi=(0,A.addUrl)(vt,st,Ta),hi=(0,A.setThing)(Fr,Zi),v=(0,A.getSourceUrl)(Fr);if(!v)return;await(0,A.saveSolidDatasetAt)(v,hi,{fetch:er})}catch(Zi){Gt(Zi)}}}}};let fi=null;if(gr||En){let Rn=Pt&&_().createElement(Pt,null)||_().createElement("span",null,"fetching data in progress");return Pt===null&&(Rn=null),Rn}return sr?fi=xt?_().createElement(xt,{error:sr}):_().createElement("span",null,sr.toString()):ar&&(fi=_().createElement("img",Object.assign({src:Yr,alt:pe??""},$t))),_().createElement(_().Fragment,null,fi,ft&&_().createElement("input",Object.assign({},Tt,{type:"file",accept:"image/*",onChange:Rn=>ur(Rn.target)})),zt&&(Zt?_().createElement(Zt,{onClick:Un}):_().createElement("button",{type:"button",onClick:Un},"Delete")))}var Ze=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};const je=$e=>{var vt;const{thing:st,solidDataset:Le,property:ft,properties:Xt,saveDatasetTo:zt,onSave:tr,onError:jt,edit:ue,autosave:pe,inputProps:Tt}=$e,xt=Ze($e,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:Pt}=(0,b.useContext)(x),{value:Zt,thing:rr,property:Fr,dataset:$t,setDataset:er,error:mr}=Ne({dataset:Le,thing:st,type:"datetime",property:ft,properties:Xt}),ar=yt();(0,b.useEffect)(()=>{mr&&jt&&jt(mr)},[mr,jt]);const Dr=Zt?Zt.toISOString().substring(0,Zt.toISOString().length-5):null,[Ar,Gr]=(0,b.useState)(Dr);let gr="";ar||(gr=Ar?.split(/T(.+)/)[0].toString());let sr="00:00";ar||(sr=(vt=Ar?.split(/T(.+)/)[1])===null||vt===void 0?void 0:vt.toString());const[Gt,Yr]=(0,b.useState)(sr),[Tn,cn]=(0,b.useState)(gr);(0,b.useEffect)(()=>{!Gt&&!Tn||ar||Gr(`${Tn??""}T${Gt??"00:00"}`)},[Gt,Tn,ar]);const Ur=async Un=>{if(Dr!==Ar&&rr&&$t&&Un.target.reportValidity()){const ur=Ar,fi=(0,A.setDatetime)(rr,Fr,new Date(`${ur}Z`));try{let Rn;zt?(Rn=await(0,A.saveSolidDatasetAt)(zt,(0,A.setThing)($t,fi),{fetch:Pt}),await ve(zt,er)):(0,A.hasResourceInfo)($t)?(Rn=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)($t),(0,A.setThing)($t,fi),{fetch:Pt}),await ve((0,A.getSourceUrl)($t),er)):jt&&jt(new Error("Please provide saveDatasetTo location for new data")),!mr&&tr&&tr(Rn,fi)}catch(Rn){jt&&jt(Rn)}}};let En;return ar?En="datetime-local":En="datetime-workaround",_().createElement(_().Fragment,null,!ue&&$t&&rr&&_().createElement("span",Object.assign({},xt),`${Ar}`),ue&&$t&&rr&&En==="datetime-local"&&_().createElement("input",Object.assign({type:En,"aria-label":"Date and Time",step:"any"},Tt,{onChange:Un=>{Gr(Un.target.value)},onBlur:Un=>pe&&Ur(Un),value:Ar,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}",placeholder:"yyyy-mm-ddThh:mm"})),ue&&$t&&rr&&En==="datetime-workaround"&&_().createElement(_().Fragment,null,_().createElement("input",Object.assign({type:"date","aria-label":"Date",step:"any"},Tt,{onChange:Un=>{cn(Un.target.value)},onBlur:Un=>pe&&Ur(Un),value:Tn,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",placeholder:"yyyy-mm-dd"})),_().createElement("input",{type:"time","aria-label":"Time",value:Gt,onChange:Un=>Yr(Un.target.value),onBlur:Un=>pe&&Ur(Un),pattern:"[0-9]{2}:[0-9]{2}"})))};je.defaultProps={autosave:!1,edit:!1};const ht=je;var Nt=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};const kt=$e=>{var vt;const{thing:st,solidDataset:Le,property:ft,properties:Xt,saveDatasetTo:zt,locale:tr,onSave:jt,onError:ue,edit:pe,autosave:Tt,inputProps:xt}=$e,Pt=Nt($e,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","edit","autosave","inputProps"]),{fetch:Zt}=(0,b.useContext)(x),{value:rr,thing:Fr,property:$t,dataset:er,setDataset:mr,error:ar}=Ne({dataset:Le,thing:st,type:"string",property:ft,properties:Xt,locale:tr});(0,b.useEffect)(()=>{ar&&ue&&ue(ar)},[ar,ue]);const Dr=(vt=rr?.toString())!==null&&vt!==void 0?vt:"",[Ar,Gr]=(0,b.useState)(Dr),gr=async sr=>{if(Dr!==Ar&&Fr&&er&&sr.target.reportValidity()){let Gt;tr?Gt=(0,A.setStringWithLocale)(Fr,$t,Ar,tr):Gt=(0,A.setStringNoLocale)(Fr,$t,Ar);try{let Yr;zt?(Yr=await(0,A.saveSolidDatasetAt)(zt,(0,A.setThing)(er,Gt),{fetch:Zt}),await ve(zt,mr)):(0,A.hasResourceInfo)(er)?(Yr=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)(er),(0,A.setThing)(er,Gt),{fetch:Zt}),await ve((0,A.getSourceUrl)(er),mr)):ue&&ue(new Error("Please provide saveDatasetTo location for new data")),!ar&&jt&&jt(Yr,Gt)}catch(Yr){ue&&ue(Yr)}}};return _().createElement(_().Fragment,null,!pe&&er&&Fr&&_().createElement("span",Object.assign({},Pt),Ar),pe&&er&&Fr&&_().createElement("input",Object.assign({type:"text"},xt,{onChange:sr=>{Gr(sr.target.value)},onBlur:sr=>Tt&&gr(sr),value:Ar})))};kt.defaultProps={autosave:!1,edit:!1};const Me=kt;var le=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};const Te=$e=>{var vt;const{thing:st,solidDataset:Le,property:ft,properties:Xt,saveDatasetTo:zt,onSave:tr,onError:jt,edit:ue,autosave:pe,inputProps:Tt}=$e,xt=le($e,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:Pt}=(0,b.useContext)(x),{value:Zt,thing:rr,property:Fr,dataset:$t,setDataset:er,error:mr}=Ne({dataset:Le,thing:st,type:"boolean",property:ft,properties:Xt});(0,b.useEffect)(()=>{mr&&jt&&jt(mr)},[mr,jt]);let ar=Zt,Dr=!1;Dr=(vt=Zt)!==null&&vt!==void 0?vt:!1,ar=Dr.toString();const[Ar,Gr]=(0,b.useState)(ar),[gr,sr]=(0,b.useState)(Dr);(0,b.useEffect)(()=>{Gr(gr.toString())},[gr]);const Gt=async Yr=>{if(ar!==Ar&&rr&&$t&&Yr.target.reportValidity()){const Tn=(0,A.setBoolean)(rr,Fr,gr);try{let cn;zt?(cn=await(0,A.saveSolidDatasetAt)(zt,(0,A.setThing)($t,Tn),{fetch:Pt}),await ve(zt,er)):(0,A.hasResourceInfo)($t)?(cn=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)($t),(0,A.setThing)($t,Tn),{fetch:Pt}),await ve((0,A.getSourceUrl)($t),er)):jt&&jt(new Error("Please provide saveDatasetTo location for new data")),!mr&&tr&&tr(cn,Tn)}catch(cn){jt&&jt(cn)}}};return _().createElement(_().Fragment,null,!ue&&$t&&rr&&_().createElement("span",Object.assign({},xt),`${Ar}`),ue&&$t&&rr&&_().createElement("input",Object.assign({type:"checkbox",checked:gr},Tt,{onChange:Yr=>{sr(Yr.target.checked)},onBlur:Yr=>pe&&Gt(Yr),value:Ar})))};Te.defaultProps={autosave:!1,edit:!1};const Je=Te;var se=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};const M=$e=>{var vt;const{thing:st,solidDataset:Le,property:ft,properties:Xt,saveDatasetTo:zt,onSave:tr,onError:jt,edit:ue,autosave:pe,inputProps:Tt}=$e,xt=se($e,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:Pt}=(0,b.useContext)(x),{value:Zt,thing:rr,property:Fr,dataset:$t,setDataset:er,error:mr}=Ne({dataset:Le,thing:st,type:"url",property:ft,properties:Xt});(0,b.useEffect)(()=>{mr&&jt&&jt(mr)},[mr,jt]);const ar=(vt=Zt?.toString())!==null&&vt!==void 0?vt:"",[Dr,Ar]=(0,b.useState)(ar),Gr=async gr=>{if(ar!==Dr&&rr&&$t&&gr.target.reportValidity()){const sr=(0,A.setUrl)(rr,Fr,Dr);try{let Gt;zt?(Gt=await(0,A.saveSolidDatasetAt)(zt,(0,A.setThing)($t,sr),{fetch:Pt}),await ve(zt,er)):(0,A.hasResourceInfo)($t)?(Gt=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)($t),(0,A.setThing)($t,sr),{fetch:Pt}),await ve((0,A.getSourceUrl)($t),er)):jt&&jt(new Error("Please provide saveDatasetTo location for new data")),!mr&&tr&&tr(Gt,sr)}catch(Gt){jt&&jt(Gt)}}};return _().createElement(_().Fragment,null,!ue&&$t&&rr&&_().createElement("span",Object.assign({},xt),`${Dr}`),ue&&$t&&rr&&_().createElement("input",Object.assign({type:"url"},Tt,{onChange:gr=>{Ar(gr.target.value)},onBlur:gr=>pe&&Gr(gr),value:Dr})))};M.defaultProps={autosave:!1,edit:!1};const D=M;var G=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};const re=$e=>{var vt;const{thing:st,solidDataset:Le,property:ft,properties:Xt,saveDatasetTo:zt,onSave:tr,onError:jt,edit:ue,autosave:pe,inputProps:Tt}=$e,xt=G($e,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:Pt}=(0,b.useContext)(x),{value:Zt,thing:rr,property:Fr,dataset:$t,setDataset:er,error:mr}=Ne({dataset:Le,thing:st,type:"integer",property:ft,properties:Xt});(0,b.useEffect)(()=>{mr&&jt&&jt(mr)},[mr,jt]);const ar=(vt=Zt?.toString())!==null&&vt!==void 0?vt:"",[Dr,Ar]=(0,b.useState)(ar),Gr=async gr=>{if(ar!==Dr&&rr&&$t&&gr.target.reportValidity()){const sr=(0,A.setInteger)(rr,Fr,parseInt(Dr,10));try{let Gt;zt?(Gt=await(0,A.saveSolidDatasetAt)(zt,(0,A.setThing)($t,sr),{fetch:Pt}),await ve(zt,er)):(0,A.hasResourceInfo)($t)?(Gt=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)($t),(0,A.setThing)($t,sr),{fetch:Pt}),await ve((0,A.getSourceUrl)($t),er)):jt&&jt(new Error("Please provide saveDatasetTo location for new data")),!mr&&tr&&tr(Gt,sr)}catch(Gt){jt&&jt(Gt)}}};return _().createElement(_().Fragment,null,!ue&&$t&&rr&&_().createElement("span",Object.assign({},xt),`${Dr}`),ue&&$t&&rr&&_().createElement("input",Object.assign({type:"number",step:"any"},Tt,{onChange:gr=>{Ar(gr.target.value)},onBlur:gr=>pe&&Gr(gr),value:Dr})))};re.defaultProps={autosave:!1,edit:!1};const we=re;var Ce=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};const ot=$e=>{var vt;const{thing:st,solidDataset:Le,property:ft,properties:Xt,saveDatasetTo:zt,onSave:tr,onError:jt,edit:ue,autosave:pe,inputProps:Tt}=$e,xt=Ce($e,["thing","solidDataset","property","properties","saveDatasetTo","onSave","onError","edit","autosave","inputProps"]),{fetch:Pt}=(0,b.useContext)(x),{value:Zt,thing:rr,property:Fr,dataset:$t,setDataset:er,error:mr}=Ne({dataset:Le,thing:st,type:"decimal",property:ft,properties:Xt});(0,b.useEffect)(()=>{mr&&jt&&jt(mr)},[mr,jt]);const ar=(vt=Zt?.toString())!==null&&vt!==void 0?vt:"",[Dr,Ar]=(0,b.useState)(ar),Gr=async gr=>{if(ar!==Dr&&rr&&$t&&gr.target.reportValidity()){const sr=(0,A.setDecimal)(rr,Fr,parseFloat(Dr));try{let Gt;zt?(Gt=await(0,A.saveSolidDatasetAt)(zt,(0,A.setThing)($t,sr),{fetch:Pt}),await ve(zt,er)):(0,A.hasResourceInfo)($t)?(Gt=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)($t),(0,A.setThing)($t,sr),{fetch:Pt}),await ve((0,A.getSourceUrl)($t),er)):jt&&jt(new Error("Please provide saveDatasetTo location for new data")),!mr&&tr&&tr(Gt,sr)}catch(Gt){jt&&jt(Gt)}}};return _().createElement(_().Fragment,null,!ue&&$t&&rr&&_().createElement("span",Object.assign({},xt),`${Dr}`),ue&&$t&&rr&&_().createElement("input",Object.assign({type:"number",step:"any"},Tt,{onChange:gr=>{Ar(gr.target.value)},onBlur:gr=>pe&&Gr(gr),value:Dr})))};ot.defaultProps={autosave:!1,edit:!1};const Re=ot;var pt=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};function Ct($e){const vt=$e,{dataType:st}=vt,Le=pt(vt,["dataType"]),{thing:ft,solidDataset:Xt,property:zt,properties:tr,edit:jt,loadingComponent:ue,errorComponent:pe,locale:Tt}=Le,{thing:xt,value:Pt,error:Zt}=Ne({dataset:Xt,thing:ft,property:zt,properties:tr,type:st,locale:Tt});let rr;!jt&&!Pt&&st!=="boolean"&&(rr=new Error("No value found for property."));const Fr=!xt&&!Zt,[$t]=(0,b.useState)(Zt??rr);if(Fr){let mr=ue&&_().createElement(ue,null)||_().createElement("span",null,"fetching data in progress");return ue===null&&(mr=null),mr}if($t)return pe?_().createElement(pe,{error:$t}):_().createElement("span",null,$t.toString());let er=Me;switch(st){case"boolean":er=Je;break;case"datetime":er=ht;break;case"decimal":er=Re;break;case"integer":er=we;break;case"url":er=D;break;default:er=Me}return _().createElement(er,Object.assign({},Le))}Ct.defaultProps={autosave:!1,edit:!1};var bt=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};function We($e){var{children:vt,property:st,properties:Le,thing:ft,solidDataset:Xt,autosave:zt,rel:tr,target:jt,edit:ue,loadingComponent:pe,errorComponent:Tt,onSave:xt,onError:Pt}=$e,Zt=bt($e,["children","property","properties","thing","solidDataset","autosave","rel","target","edit","loadingComponent","errorComponent","onSave","onError"]);const{value:rr,thing:Fr,property:$t,dataset:er,error:mr}=Ne({dataset:Xt,thing:ft,property:st,properties:Le,type:"url"});let ar;!ue&&!rr&&(ar=new Error("URL not found for given property"));const Dr=!Fr&&!mr,[Ar]=(0,b.useState)(mr??ar);if(Dr){let gr=pe&&_().createElement(pe,null)||_().createElement("span",null,"fetching data in progress");return pe===null&&(gr=null),gr}if(Ar)return Tt?_().createElement(Tt,{error:Ar}):_().createElement("span",null,Ar.toString());const Gr=tr||(jt==="_blank"?"noopener noreferrer":"nofollow");return ue?_().createElement(Ct,{dataType:"url",solidDataset:er,thing:Fr,property:$t,autosave:zt,onSave:xt,onError:Pt,edit:!0}):_().createElement("a",Object.assign({href:rr,rel:Gr,target:jt},Zt),vt??rr)}const Ge=({oidcIssuer:$e,redirectUrl:vt,children:st,authOptions:Le,onError:ft})=>{const Xt=Object.assign({redirectUrl:vt,oidcIssuer:$e},Le),{login:zt,setSessionRequestInProgress:tr}=(0,b.useContext)(x);async function jt(){tr(!0);try{await zt(Xt),tr(!1)}catch(pe){tr(!1),ft&&ft(pe)}}function ue(pe){return pe.preventDefault(),pe.key==="Enter"?jt():Promise.resolve()}return st?_().createElement("div",{role:"button",tabIndex:0,onClick:jt,onKeyDown:ue},st):_().createElement("button",{type:"button",onClick:jt,onKeyDown:ue},"Log In")},Oe=({children:$e,onLogout:vt,onError:st})=>{const{logout:Le}=(0,b.useContext)(x);async function ft(){try{await Le(),vt&&vt()}catch(zt){st&&st(zt)}}function Xt(zt){return zt.preventDefault(),zt.key==="Enter"?ft():Promise.resolve()}return $e?_().createElement("div",{role:"button",tabIndex:0,onClick:ft,onKeyDown:Xt},$e):_().createElement("button",{type:"button",onClick:ft,onKeyDown:Xt},"Log Out")};var ut=f(767);function Q($e){const{children:vt,solidDataset:st,datasetUrl:Le,thing:ft,thingUrl:Xt,onError:zt,loadingComponent:tr}=$e;return _().createElement(Y,{onError:zt,solidDataset:st,datasetUrl:Le,loadingComponent:tr},_().createElement($,{thing:ft,thingUrl:Xt},vt))}const k=Q;var V=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};function j($e){throw new Error("Can't use TableColumn outside a Table.")}function qe($e){var{children:vt,emptyStateComponent:st,things:Le,filter:ft,ascIndicator:Xt,descIndicator:zt,getRowProps:tr}=$e,jt=V($e,["children","emptyStateComponent","things","filter","ascIndicator","descIndicator","getRowProps"]);const{columns:ue,data:pe}=(0,b.useMemo)(()=>{const $t=[],er=Le.map(()=>({}));return b.Children.forEach(vt,(mr,ar)=>{if(mr){const{property:Dr,header:Ar,body:Gr,dataType:gr="string",locale:sr,multiple:Gt=!1,sortable:Yr,sortFn:Tn,filterable:cn}=mr.props;if($t.push({Header:Ar??`${Dr}`,accessor:`col${ar}`,disableGlobalFilter:!cn,disableSortBy:!Yr,Cell:Gr??(({value:Ur})=>Ur!=null?`${Ur}`:"")}),Tn){const Ur=(En,Un,ur)=>{const fi=En.values[ur],Rn=Un.values[ur];return Tn(fi,Rn)};$t[ar].sortType=Ur}else gr==="string"&&($t[ar].sortType=gr),(gr==="integer"||gr==="decimal")&&($t[ar].sortType="number");Le.forEach((Ur,En)=>{er[En][`col${ar}`]=Gt?tt(gr,Ur.thing,Dr,sr):Se(gr,Ur.thing,Dr,sr)})}}),{columns:$t,data:er}},[vt,Le]),Tt=(0,ut.useTable)({columns:ue,data:pe,initialState:{globalFilter:ft||void 0}},ut.useGlobalFilter,ut.useSortBy),{getTableProps:xt,getTableBodyProps:Pt,headerGroups:Zt,rows:rr,prepareRow:Fr}=Tt;return rr.length?_().createElement("table",Object.assign({},xt(),jt),_().createElement("thead",null,Zt.map($t=>_().createElement("tr",Object.assign({},$t.getHeaderGroupProps()),$t.headers.map(er=>_().createElement("th",Object.assign({},er.getHeaderProps(er.getSortByToggleProps())),er.render("Header"),er.isSorted&&(er.isSortedDesc?zt:Xt)))))),_().createElement("tbody",Object.assign({},Pt()),rr.map($t=>{Fr($t);const er=Le[$t.index].dataset,mr=Le[$t.index].thing;return _().createElement("tr",Object.assign({},$t.getRowProps(tr($t,mr,er))),_().createElement(k,{solidDataset:er,thing:mr},$t.cells.map(ar=>_().createElement("td",Object.assign({},ar.getCellProps()),ar.render("Cell")))))}))):st?_().createElement(st,null):null}qe.defaultProps={filter:void 0,ascIndicator:_().createElement("span",{role:"img","aria-label":"Sorted in ascending order"}," ",""),descIndicator:_().createElement("span",{role:"img","aria-label":"Sorted in descending order"}," ",""),getRowProps:()=>({})};var et=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};function ze($e){var{thing:vt,solidDataset:st,property:Le,properties:ft,saveDatasetTo:Xt,locale:zt,onSave:tr,onError:jt,inputProps:ue,errorComponent:pe,loadingComponent:Tt,edit:xt=!1,autosave:Pt=!1}=$e,Zt=et($e,["thing","solidDataset","property","properties","saveDatasetTo","locale","onSave","onError","inputProps","errorComponent","loadingComponent","edit","autosave"]);const{fetch:rr}=(0,b.useContext)(x),{error:Fr,value:$t,thing:er,property:mr,dataset:ar,setDataset:Dr}=Ne({dataset:st,thing:vt,property:Le,properties:ft,type:"string",locale:zt});let Ar;!xt&&!$t&&(Ar=new Error("No value found for property."));const Gr=!er&&!Fr,[gr]=(0,b.useState)(Fr??Ar);(0,b.useEffect)(()=>{gr&&jt&&jt(gr)},[gr,jt]);const[sr,Gt]=(0,b.useState)($t),[,Yr]=(0,b.useState)(),[Tn,cn]=(0,b.useState)($t),Ur=async En=>{if(Tn!==En.target.value&&er&&ar){const Un=En.target.value;let ur;zt?ur=(0,A.setStringWithLocale)(er,mr,Un,zt):ur=(0,A.setStringNoLocale)(er,mr,Un);try{let fi;Xt?(fi=await(0,A.saveSolidDatasetAt)(Xt,(0,A.setThing)(ar,ur),{fetch:rr}),await ve(Xt,Dr)):(0,A.hasResourceInfo)(ar)?(fi=await(0,A.saveSolidDatasetAt)((0,A.getSourceUrl)(ar),(0,A.setThing)(ar,ur),{fetch:rr}),await ve((0,A.getSourceUrl)(ar),Dr)):Yr(()=>{throw new Error("Please provide saveDatasetTo location for new data")}),tr&&tr(fi,ur)}catch(fi){jt&&jt(fi)}}};if(Gr){let En=Tt&&_().createElement(Tt,null)||_().createElement("span",null,"fetching data in progress");return Tt===null&&(En=null),En}return gr?pe?_().createElement(pe,{error:gr}):_().createElement("span",null,gr.toString()):_().createElement(_().Fragment,null,!xt&&ar&&er&&_().createElement("span",Object.assign({},Zt),sr),xt&&ar&&er&&_().createElement("input",Object.assign({type:ue&&ue.type?ue.type:"text"},ue,{onFocus:En=>cn(En.target.value),onChange:En=>Gt(En.target.value),onBlur:En=>Pt&&Ur(En),value:sr||""})))}var Yt=function($e,vt){var st={};for(var Le in $e)Object.prototype.hasOwnProperty.call($e,Le)&&vt.indexOf(Le)<0&&(st[Le]=$e[Le]);if($e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Le=Object.getOwnPropertySymbols($e);ft<Le.length;ft++)vt.indexOf(Le[ft])<0&&Object.prototype.propertyIsEnumerable.call($e,Le[ft])&&(st[Le[ft]]=$e[Le[ft]]);return st};function Br($e){var{property:vt,properties:st,thing:Le,edit:ft,autosave:Xt,onSave:zt,onError:tr,maxSize:jt,inputProps:ue,errorComponent:pe,loadingComponent:Tt}=$e,xt=Yt($e,["property","properties","thing","edit","autosave","onSave","onError","maxSize","inputProps","errorComponent","loadingComponent"]);const{fetch:Pt}=(0,b.useContext)(x),Zt=Ne({thing:Le,property:vt,properties:st,type:"url"}),{value:rr,thing:Fr,error:$t}=Zt;let er;!ft&&!rr&&(er=new Error("No value found for property."));const mr=!Fr&&!$t,[ar,Dr]=(0,b.useState)($t??er);(0,b.useEffect)(()=>{ar&&tr&&tr(ar)},[ar,tr,pe]);const[Ar,Gr]=(0,b.useState)(""),{data:gr,error:sr,inProgress:Gt}=rt(rr);(0,b.useEffect)(()=>{if(Gt)return;if(sr){Dr(sr);return}const cn=gr&&URL.createObjectURL(gr);cn&&Gr(cn)},[gr,Gt,sr]);const Yr=async cn=>{const Ur=cn.files;if(Xt&&Ur&&Ur.length>0&&rr){const En=await ie(rr,Ur[0],cn,Pt,jt,zt,tr);En&&Gr(En)}};let Tn=null;if(mr||Gt){let cn=Tt&&_().createElement(Tt,null)||_().createElement("span",null,"fetching data in progress");return Tt===null&&(cn=null),cn}return ar?Tn=pe?_().createElement(pe,{error:ar}):_().createElement("span",null,ar.toString()):rr&&(Tn=_().createElement("video",Object.assign({src:Ar||rr,controls:!0},xt))),_().createElement(_().Fragment,null,Tn,ft&&_().createElement("input",Object.assign({},ue,{type:"file",accept:"video/*",onChange:cn=>Yr(cn.target)})))}function jr(){const{session:$e,sessionRequestInProgress:vt,fetch:st,login:Le,logout:ft}=(0,b.useContext)(x);return{session:$e,sessionRequestInProgress:vt,fetch:st,login:Le,logout:ft}}function or($e,vt,st){const{dataset:Le,error:ft}=K($e,st),{thing:Xt}=(0,b.useContext)(Pe);return vt?Le?{thing:(0,A.getThing)(Le,vt),error:ft}:{thing:null,error:ft}:{thing:Xt||void 0,error:ft}}})(),y})())}(ky)),ky.exports}var pO=hO(),Cv=function(e,r){return Cv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},Cv(e,r)};function Po(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Cv(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var Rr=function(){return Rr=Object.assign||function(r){for(var i,a=1,o=arguments.length;a<o;a++){i=arguments[a];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(r[d]=i[d])}return r},Rr.apply(this,arguments)};function Nd(e,r){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)r.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(i[a[o]]=e[a[o]]);return i}function Ts(e,r,i){if(i||arguments.length===2)for(var a=0,o=r.length,d;a<o;a++)(d||!(a in r))&&(d||(d=Array.prototype.slice.call(r,0,a)),d[a]=r[a]);return e.concat(d||Array.prototype.slice.call(r))}function Rs(e,r){var i=r&&r.cache?r.cache:_O,a=r&&r.serializer?r.serializer:bO,o=r&&r.strategy?r.strategy:mO;return o(e,{cache:i,serializer:a})}function gO(e){return e==null||typeof e=="number"||typeof e=="boolean"}function yO(e,r,i,a){var o=gO(a)?a:i(a),d=r.get(o);return typeof d>"u"&&(d=e.call(this,a),r.set(o,d)),d}function hA(e,r,i){var a=Array.prototype.slice.call(arguments,3),o=i(a),d=r.get(o);return typeof d>"u"&&(d=e.apply(this,a),r.set(o,d)),d}function pA(e,r,i,a,o){return i.bind(r,e,a,o)}function mO(e,r){var i=e.length===1?yO:hA;return pA(e,this,i,r.cache.create(),r.serializer)}function vO(e,r){return pA(e,this,hA,r.cache.create(),r.serializer)}var bO=function(){return JSON.stringify(arguments)},wO=function(){function e(){this.cache=Object.create(null)}return e.prototype.get=function(r){return this.cache[r]},e.prototype.set=function(r,i){this.cache[r]=i},e}(),_O={create:function(){return new wO}},xs={variadic:vO},xn;(function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(xn||(xn={}));var ci;(function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"})(ci||(ci={}));var Fd;(function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"})(Fd||(Fd={}));function $S(e){return e.type===ci.literal}function SO(e){return e.type===ci.argument}function gA(e){return e.type===ci.number}function yA(e){return e.type===ci.date}function mA(e){return e.type===ci.time}function vA(e){return e.type===ci.select}function bA(e){return e.type===ci.plural}function EO(e){return e.type===ci.pound}function wA(e){return e.type===ci.tag}function _A(e){return!!(e&&typeof e=="object"&&e.type===Fd.number)}function Ov(e){return!!(e&&typeof e=="object"&&e.type===Fd.dateTime)}var SA=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,AO=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function RO(e){var r={};return e.replace(AO,function(i){var a=i.length;switch(i[0]){case"G":r.era=a===4?"long":a===5?"narrow":"short";break;case"y":r.year=a===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":r.month=["numeric","2-digit","short","long","narrow"][a-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":r.day=["numeric","2-digit"][a-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":r.weekday=a===4?"long":a===5?"narrow":"short";break;case"e":if(a<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");r.weekday=["short","long","narrow","short"][a-4];break;case"c":if(a<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");r.weekday=["short","long","narrow","short"][a-4];break;case"a":r.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":r.hourCycle="h12",r.hour=["numeric","2-digit"][a-1];break;case"H":r.hourCycle="h23",r.hour=["numeric","2-digit"][a-1];break;case"K":r.hourCycle="h11",r.hour=["numeric","2-digit"][a-1];break;case"k":r.hourCycle="h24",r.hour=["numeric","2-digit"][a-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":r.minute=["numeric","2-digit"][a-1];break;case"s":r.second=["numeric","2-digit"][a-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":r.timeZoneName=a<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),r}var xO=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function TO(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");for(var r=e.split(xO).filter(function(_){return _.length>0}),i=[],a=0,o=r;a<o.length;a++){var d=o[a],l=d.split("/");if(l.length===0)throw new Error("Invalid number skeleton");for(var u=l[0],h=l.slice(1),f=0,y=h;f<y.length;f++){var b=y[f];if(b.length===0)throw new Error("Invalid number skeleton")}i.push({stem:u,options:h})}return i}function CO(e){return e.replace(/^(.*?)-/,"")}var KS=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,EA=/^(@+)?(\+|#+)?[rs]?$/g,OO=/(\*)(0+)|(#+)(0+)|(0+)/g,AA=/^(0+)$/;function GS(e){var r={};return e[e.length-1]==="r"?r.roundingPriority="morePrecision":e[e.length-1]==="s"&&(r.roundingPriority="lessPrecision"),e.replace(EA,function(i,a,o){return typeof o!="string"?(r.minimumSignificantDigits=a.length,r.maximumSignificantDigits=a.length):o==="+"?r.minimumSignificantDigits=a.length:a[0]==="#"?r.maximumSignificantDigits=a.length:(r.minimumSignificantDigits=a.length,r.maximumSignificantDigits=a.length+(typeof o=="string"?o.length:0)),""}),r}function RA(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function IO(e){var r;if(e[0]==="E"&&e[1]==="E"?(r={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(r={notation:"scientific"},e=e.slice(1)),r){var i=e.slice(0,2);if(i==="+!"?(r.signDisplay="always",e=e.slice(2)):i==="+?"&&(r.signDisplay="exceptZero",e=e.slice(2)),!AA.test(e))throw new Error("Malformed concise eng/scientific notation");r.minimumIntegerDigits=e.length}return r}function qS(e){var r={},i=RA(e);return i||r}function PO(e){for(var r={},i=0,a=e;i<a.length;i++){var o=a[i];switch(o.stem){case"percent":case"%":r.style="percent";continue;case"%x100":r.style="percent",r.scale=100;continue;case"currency":r.style="currency",r.currency=o.options[0];continue;case"group-off":case",_":r.useGrouping=!1;continue;case"precision-integer":case".":r.maximumFractionDigits=0;continue;case"measure-unit":case"unit":r.style="unit",r.unit=CO(o.options[0]);continue;case"compact-short":case"K":r.notation="compact",r.compactDisplay="short";continue;case"compact-long":case"KK":r.notation="compact",r.compactDisplay="long";continue;case"scientific":r=Rr(Rr(Rr({},r),{notation:"scientific"}),o.options.reduce(function(h,f){return Rr(Rr({},h),qS(f))},{}));continue;case"engineering":r=Rr(Rr(Rr({},r),{notation:"engineering"}),o.options.reduce(function(h,f){return Rr(Rr({},h),qS(f))},{}));continue;case"notation-simple":r.notation="standard";continue;case"unit-width-narrow":r.currencyDisplay="narrowSymbol",r.unitDisplay="narrow";continue;case"unit-width-short":r.currencyDisplay="code",r.unitDisplay="short";continue;case"unit-width-full-name":r.currencyDisplay="name",r.unitDisplay="long";continue;case"unit-width-iso-code":r.currencyDisplay="symbol";continue;case"scale":r.scale=parseFloat(o.options[0]);continue;case"rounding-mode-floor":r.roundingMode="floor";continue;case"rounding-mode-ceiling":r.roundingMode="ceil";continue;case"rounding-mode-down":r.roundingMode="trunc";continue;case"rounding-mode-up":r.roundingMode="expand";continue;case"rounding-mode-half-even":r.roundingMode="halfEven";continue;case"rounding-mode-half-down":r.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":r.roundingMode="halfExpand";continue;case"integer-width":if(o.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");o.options[0].replace(OO,function(h,f,y,b,_,A){if(f)r.minimumIntegerDigits=y.length;else{if(b&&_)throw new Error("We currently do not support maximum integer digits");if(A)throw new Error("We currently do not support exact integer digits")}return""});continue}if(AA.test(o.stem)){r.minimumIntegerDigits=o.stem.length;continue}if(KS.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace(KS,function(h,f,y,b,_,A){return y==="*"?r.minimumFractionDigits=f.length:b&&b[0]==="#"?r.maximumFractionDigits=b.length:_&&A?(r.minimumFractionDigits=_.length,r.maximumFractionDigits=_.length+A.length):(r.minimumFractionDigits=f.length,r.maximumFractionDigits=f.length),""});var d=o.options[0];d==="w"?r=Rr(Rr({},r),{trailingZeroDisplay:"stripIfInteger"}):d&&(r=Rr(Rr({},r),GS(d)));continue}if(EA.test(o.stem)){r=Rr(Rr({},r),GS(o.stem));continue}var l=RA(o.stem);l&&(r=Rr(Rr({},r),l));var u=IO(o.stem);u&&(r=Rr(Rr({},r),u))}return r}var Dy={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function NO(e,r){for(var i="",a=0;a<e.length;a++){var o=e.charAt(a);if(o==="j"){for(var d=0;a+1<e.length&&e.charAt(a+1)===o;)d++,a++;var l=1+(d&1),u=d<2?1:3+(d>>1),h="a",f=FO(r);for((f=="H"||f=="k")&&(u=0);u-- >0;)i+=h;for(;l-- >0;)i=f+i}else o==="J"?i+="H":i+=o}return i}function FO(e){var r=e.hourCycle;if(r===void 0&&e.hourCycles&&e.hourCycles.length&&(r=e.hourCycles[0]),r)switch(r){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var i=e.language,a;i!=="root"&&(a=e.maximize().region);var o=Dy[a||""]||Dy[i||""]||Dy["".concat(i,"-001")]||Dy["001"];return o[0]}var nv,DO=new RegExp("^".concat(SA.source,"*")),UO=new RegExp("".concat(SA.source,"*$"));function Fn(e,r){return{start:e,end:r}}var LO=!!String.prototype.startsWith&&"_a".startsWith("a",1),MO=!!String.fromCodePoint,kO=!!Object.fromEntries,BO=!!String.prototype.codePointAt,HO=!!String.prototype.trimStart,jO=!!String.prototype.trimEnd,VO=!!Number.isSafeInteger,$O=VO?Number.isSafeInteger:function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},Iv=!0;try{var KO=TA("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Iv=((nv=KO.exec("a"))===null||nv===void 0?void 0:nv[0])==="a"}catch{Iv=!1}var zS=LO?function(r,i,a){return r.startsWith(i,a)}:function(r,i,a){return r.slice(a,a+i.length)===i},Pv=MO?String.fromCodePoint:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var a="",o=r.length,d=0,l;o>d;){if(l=r[d++],l>1114111)throw RangeError(l+" is not a valid code point");a+=l<65536?String.fromCharCode(l):String.fromCharCode(((l-=65536)>>10)+55296,l%1024+56320)}return a},WS=kO?Object.fromEntries:function(r){for(var i={},a=0,o=r;a<o.length;a++){var d=o[a],l=d[0],u=d[1];i[l]=u}return i},xA=BO?function(r,i){return r.codePointAt(i)}:function(r,i){var a=r.length;if(!(i<0||i>=a)){var o=r.charCodeAt(i),d;return o<55296||o>56319||i+1===a||(d=r.charCodeAt(i+1))<56320||d>57343?o:(o-55296<<10)+(d-56320)+65536}},GO=HO?function(r){return r.trimStart()}:function(r){return r.replace(DO,"")},qO=jO?function(r){return r.trimEnd()}:function(r){return r.replace(UO,"")};function TA(e,r){return new RegExp(e,r)}var Nv;if(Iv){var JS=TA("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Nv=function(r,i){var a;JS.lastIndex=i;var o=JS.exec(r);return(a=o[1])!==null&&a!==void 0?a:""}}else Nv=function(r,i){for(var a=[];;){var o=xA(r,i);if(o===void 0||CA(o)||YO(o))break;a.push(o),i+=o>=65536?2:1}return Pv.apply(void 0,a)};var zO=function(){function e(r,i){i===void 0&&(i={}),this.message=r,this.position={offset:0,line:1,column:1},this.ignoreTag=!!i.ignoreTag,this.locale=i.locale,this.requiresOtherClause=!!i.requiresOtherClause,this.shouldParseSkeletons=!!i.shouldParseSkeletons}return e.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(r,i,a){for(var o=[];!this.isEOF();){var d=this.char();if(d===123){var l=this.parseArgument(r,a);if(l.err)return l;o.push(l.val)}else{if(d===125&&r>0)break;if(d===35&&(i==="plural"||i==="selectordinal")){var u=this.clonePosition();this.bump(),o.push({type:ci.pound,location:Fn(u,this.clonePosition())})}else if(d===60&&!this.ignoreTag&&this.peek()===47){if(a)break;return this.error(xn.UNMATCHED_CLOSING_TAG,Fn(this.clonePosition(),this.clonePosition()))}else if(d===60&&!this.ignoreTag&&Fv(this.peek()||0)){var l=this.parseTag(r,i);if(l.err)return l;o.push(l.val)}else{var l=this.parseLiteral(r,i);if(l.err)return l;o.push(l.val)}}}return{val:o,err:null}},e.prototype.parseTag=function(r,i){var a=this.clonePosition();this.bump();var o=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:ci.literal,value:"<".concat(o,"/>"),location:Fn(a,this.clonePosition())},err:null};if(this.bumpIf(">")){var d=this.parseMessage(r+1,i,!0);if(d.err)return d;var l=d.val,u=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Fv(this.char()))return this.error(xn.INVALID_TAG,Fn(u,this.clonePosition()));var h=this.clonePosition(),f=this.parseTagName();return o!==f?this.error(xn.UNMATCHED_CLOSING_TAG,Fn(h,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:ci.tag,value:o,children:l,location:Fn(a,this.clonePosition())},err:null}:this.error(xn.INVALID_TAG,Fn(u,this.clonePosition())))}else return this.error(xn.UNCLOSED_TAG,Fn(a,this.clonePosition()))}else return this.error(xn.INVALID_TAG,Fn(a,this.clonePosition()))},e.prototype.parseTagName=function(){var r=this.offset();for(this.bump();!this.isEOF()&&JO(this.char());)this.bump();return this.message.slice(r,this.offset())},e.prototype.parseLiteral=function(r,i){for(var a=this.clonePosition(),o="";;){var d=this.tryParseQuote(i);if(d){o+=d;continue}var l=this.tryParseUnquoted(r,i);if(l){o+=l;continue}var u=this.tryParseLeftAngleBracket();if(u){o+=u;continue}break}var h=Fn(a,this.clonePosition());return{val:{type:ci.literal,value:o,location:h},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!WO(this.peek()||0))?(this.bump(),"<"):null},e.prototype.tryParseQuote=function(r){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(r==="plural"||r==="selectordinal")break;return null;default:return null}this.bump();var i=[this.char()];for(this.bump();!this.isEOF();){var a=this.char();if(a===39)if(this.peek()===39)i.push(39),this.bump();else{this.bump();break}else i.push(a);this.bump()}return Pv.apply(void 0,i)},e.prototype.tryParseUnquoted=function(r,i){if(this.isEOF())return null;var a=this.char();return a===60||a===123||a===35&&(i==="plural"||i==="selectordinal")||a===125&&r>0?null:(this.bump(),Pv(a))},e.prototype.parseArgument=function(r,i){var a=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(xn.EXPECT_ARGUMENT_CLOSING_BRACE,Fn(a,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(xn.EMPTY_ARGUMENT,Fn(a,this.clonePosition()));var o=this.parseIdentifierIfPossible().value;if(!o)return this.error(xn.MALFORMED_ARGUMENT,Fn(a,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(xn.EXPECT_ARGUMENT_CLOSING_BRACE,Fn(a,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:ci.argument,value:o,location:Fn(a,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(xn.EXPECT_ARGUMENT_CLOSING_BRACE,Fn(a,this.clonePosition())):this.parseArgumentOptions(r,i,o,a);default:return this.error(xn.MALFORMED_ARGUMENT,Fn(a,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var r=this.clonePosition(),i=this.offset(),a=Nv(this.message,i),o=i+a.length;this.bumpTo(o);var d=this.clonePosition(),l=Fn(r,d);return{value:a,location:l}},e.prototype.parseArgumentOptions=function(r,i,a,o){var d,l=this.clonePosition(),u=this.parseIdentifierIfPossible().value,h=this.clonePosition();switch(u){case"":return this.error(xn.EXPECT_ARGUMENT_TYPE,Fn(l,h));case"number":case"date":case"time":{this.bumpSpace();var f=null;if(this.bumpIf(",")){this.bumpSpace();var y=this.clonePosition(),b=this.parseSimpleArgStyleIfPossible();if(b.err)return b;var _=qO(b.val);if(_.length===0)return this.error(xn.EXPECT_ARGUMENT_STYLE,Fn(this.clonePosition(),this.clonePosition()));var A=Fn(y,this.clonePosition());f={style:_,styleLocation:A}}var T=this.tryParseArgumentClose(o);if(T.err)return T;var x=Fn(o,this.clonePosition());if(f&&zS(f?.style,"::",0)){var O=GO(f.style.slice(2));if(u==="number"){var b=this.parseNumberSkeletonFromString(O,f.styleLocation);return b.err?b:{val:{type:ci.number,value:a,location:x,style:b.val},err:null}}else{if(O.length===0)return this.error(xn.EXPECT_DATE_TIME_SKELETON,x);var R=O;this.locale&&(R=NO(O,this.locale));var _={type:Fd.dateTime,pattern:R,location:f.styleLocation,parsedOptions:this.shouldParseSkeletons?RO(R):{}},F=u==="date"?ci.date:ci.time;return{val:{type:F,value:a,location:x,style:_},err:null}}}return{val:{type:u==="number"?ci.number:u==="date"?ci.date:ci.time,value:a,location:x,style:(d=f?.style)!==null&&d!==void 0?d:null},err:null}}case"plural":case"selectordinal":case"select":{var P=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(xn.EXPECT_SELECT_ARGUMENT_OPTIONS,Fn(P,Rr({},P)));this.bumpSpace();var K=this.parseIdentifierIfPossible(),B=0;if(u!=="select"&&K.value==="offset"){if(!this.bumpIf(":"))return this.error(xn.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Fn(this.clonePosition(),this.clonePosition()));this.bumpSpace();var b=this.tryParseDecimalInteger(xn.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,xn.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(b.err)return b;this.bumpSpace(),K=this.parseIdentifierIfPossible(),B=b.val}var W=this.tryParsePluralOrSelectOptions(r,u,i,K);if(W.err)return W;var T=this.tryParseArgumentClose(o);if(T.err)return T;var Y=Fn(o,this.clonePosition());return u==="select"?{val:{type:ci.select,value:a,options:WS(W.val),location:Y},err:null}:{val:{type:ci.plural,value:a,options:WS(W.val),offset:B,pluralType:u==="plural"?"cardinal":"ordinal",location:Y},err:null}}default:return this.error(xn.INVALID_ARGUMENT_TYPE,Fn(l,h))}},e.prototype.tryParseArgumentClose=function(r){return this.isEOF()||this.char()!==125?this.error(xn.EXPECT_ARGUMENT_CLOSING_BRACE,Fn(r,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var r=0,i=this.clonePosition();!this.isEOF();){var a=this.char();switch(a){case 39:{this.bump();var o=this.clonePosition();if(!this.bumpUntil("'"))return this.error(xn.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Fn(o,this.clonePosition()));this.bump();break}case 123:{r+=1,this.bump();break}case 125:{if(r>0)r-=1;else return{val:this.message.slice(i.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(i.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(r,i){var a=[];try{a=TO(r)}catch{return this.error(xn.INVALID_NUMBER_SKELETON,i)}return{val:{type:Fd.number,tokens:a,location:i,parsedOptions:this.shouldParseSkeletons?PO(a):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(r,i,a,o){for(var d,l=!1,u=[],h=new Set,f=o.value,y=o.location;;){if(f.length===0){var b=this.clonePosition();if(i!=="select"&&this.bumpIf("=")){var _=this.tryParseDecimalInteger(xn.EXPECT_PLURAL_ARGUMENT_SELECTOR,xn.INVALID_PLURAL_ARGUMENT_SELECTOR);if(_.err)return _;y=Fn(b,this.clonePosition()),f=this.message.slice(b.offset,this.offset())}else break}if(h.has(f))return this.error(i==="select"?xn.DUPLICATE_SELECT_ARGUMENT_SELECTOR:xn.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,y);f==="other"&&(l=!0),this.bumpSpace();var A=this.clonePosition();if(!this.bumpIf("{"))return this.error(i==="select"?xn.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:xn.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Fn(this.clonePosition(),this.clonePosition()));var T=this.parseMessage(r+1,i,a);if(T.err)return T;var x=this.tryParseArgumentClose(A);if(x.err)return x;u.push([f,{value:T.val,location:Fn(A,this.clonePosition())}]),h.add(f),this.bumpSpace(),d=this.parseIdentifierIfPossible(),f=d.value,y=d.location}return u.length===0?this.error(i==="select"?xn.EXPECT_SELECT_ARGUMENT_SELECTOR:xn.EXPECT_PLURAL_ARGUMENT_SELECTOR,Fn(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!l?this.error(xn.MISSING_OTHER_CLAUSE,Fn(this.clonePosition(),this.clonePosition())):{val:u,err:null}},e.prototype.tryParseDecimalInteger=function(r,i){var a=1,o=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(a=-1);for(var d=!1,l=0;!this.isEOF();){var u=this.char();if(u>=48&&u<=57)d=!0,l=l*10+(u-48),this.bump();else break}var h=Fn(o,this.clonePosition());return d?(l*=a,$O(l)?{val:l,err:null}:this.error(i,h)):this.error(r,h)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var r=this.position.offset;if(r>=this.message.length)throw Error("out of bound");var i=xA(this.message,r);if(i===void 0)throw Error("Offset ".concat(r," is at invalid UTF-16 code unit boundary"));return i},e.prototype.error=function(r,i){return{val:null,err:{kind:r,message:this.message,location:i}}},e.prototype.bump=function(){if(!this.isEOF()){var r=this.char();r===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=r<65536?1:2)}},e.prototype.bumpIf=function(r){if(zS(this.message,r,this.offset())){for(var i=0;i<r.length;i++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(r){var i=this.offset(),a=this.message.indexOf(r,i);return a>=0?(this.bumpTo(a),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(r){if(this.offset()>r)throw Error("targetOffset ".concat(r," must be greater than or equal to the current offset ").concat(this.offset()));for(r=Math.min(r,this.message.length);;){var i=this.offset();if(i===r)break;if(i>r)throw Error("targetOffset ".concat(r," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&CA(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var r=this.char(),i=this.offset(),a=this.message.charCodeAt(i+(r>=65536?2:1));return a??null},e}();function Fv(e){return e>=97&&e<=122||e>=65&&e<=90}function WO(e){return Fv(e)||e===47}function JO(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function CA(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function YO(e){return e>=33&&e<=35||e===36||e>=37&&e<=39||e===40||e===41||e===42||e===43||e===44||e===45||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||e===91||e===92||e===93||e===94||e===96||e===123||e===124||e===125||e===126||e===161||e>=162&&e<=165||e===166||e===167||e===169||e===171||e===172||e===174||e===176||e===177||e===182||e===187||e===191||e===215||e===247||e>=8208&&e<=8213||e>=8214&&e<=8215||e===8216||e===8217||e===8218||e>=8219&&e<=8220||e===8221||e===8222||e===8223||e>=8224&&e<=8231||e>=8240&&e<=8248||e===8249||e===8250||e>=8251&&e<=8254||e>=8257&&e<=8259||e===8260||e===8261||e===8262||e>=8263&&e<=8273||e===8274||e===8275||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||e===8608||e>=8609&&e<=8610||e===8611||e>=8612&&e<=8613||e===8614||e>=8615&&e<=8621||e===8622||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||e===8658||e===8659||e===8660||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||e===8968||e===8969||e===8970||e===8971||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||e===9001||e===9002||e>=9003&&e<=9083||e===9084||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||e===9655||e>=9656&&e<=9664||e===9665||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||e===9839||e>=9840&&e<=10087||e===10088||e===10089||e===10090||e===10091||e===10092||e===10093||e===10094||e===10095||e===10096||e===10097||e===10098||e===10099||e===10100||e===10101||e>=10132&&e<=10175||e>=10176&&e<=10180||e===10181||e===10182||e>=10183&&e<=10213||e===10214||e===10215||e===10216||e===10217||e===10218||e===10219||e===10220||e===10221||e===10222||e===10223||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||e===10627||e===10628||e===10629||e===10630||e===10631||e===10632||e===10633||e===10634||e===10635||e===10636||e===10637||e===10638||e===10639||e===10640||e===10641||e===10642||e===10643||e===10644||e===10645||e===10646||e===10647||e===10648||e>=10649&&e<=10711||e===10712||e===10713||e===10714||e===10715||e>=10716&&e<=10747||e===10748||e===10749||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||e===11158||e>=11159&&e<=11263||e>=11776&&e<=11777||e===11778||e===11779||e===11780||e===11781||e>=11782&&e<=11784||e===11785||e===11786||e===11787||e===11788||e===11789||e>=11790&&e<=11798||e===11799||e>=11800&&e<=11801||e===11802||e===11803||e===11804||e===11805||e>=11806&&e<=11807||e===11808||e===11809||e===11810||e===11811||e===11812||e===11813||e===11814||e===11815||e===11816||e===11817||e>=11818&&e<=11822||e===11823||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||e===11840||e===11841||e===11842||e>=11843&&e<=11855||e>=11856&&e<=11857||e===11858||e>=11859&&e<=11903||e>=12289&&e<=12291||e===12296||e===12297||e===12298||e===12299||e===12300||e===12301||e===12302||e===12303||e===12304||e===12305||e>=12306&&e<=12307||e===12308||e===12309||e===12310||e===12311||e===12312||e===12313||e===12314||e===12315||e===12316||e===12317||e>=12318&&e<=12319||e===12320||e===12336||e===64830||e===64831||e>=65093&&e<=65094}function Dv(e){e.forEach(function(r){if(delete r.location,vA(r)||bA(r))for(var i in r.options)delete r.options[i].location,Dv(r.options[i].value);else gA(r)&&_A(r.style)||(yA(r)||mA(r))&&Ov(r.style)?delete r.style.location:wA(r)&&Dv(r.children)})}function QO(e,r){r===void 0&&(r={}),r=Rr({shouldParseSkeletons:!0,requiresOtherClause:!0},r);var i=new zO(e,r).parse();if(i.err){var a=SyntaxError(xn[i.err.kind]);throw a.location=i.err.location,a.originalMessage=i.err.message,a}return r?.captureLocation||Dv(i.val),i.val}var Os;(function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"})(Os||(Os={}));var Vu=function(e){Po(r,e);function r(i,a,o){var d=e.call(this,i)||this;return d.code=a,d.originalMessage=o,d}return r.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},r}(Error),YS=function(e){Po(r,e);function r(i,a,o,d){return e.call(this,'Invalid values for "'.concat(i,'": "').concat(a,'". Options are "').concat(Object.keys(o).join('", "'),'"'),Os.INVALID_VALUE,d)||this}return r}(Vu),XO=function(e){Po(r,e);function r(i,a,o){return e.call(this,'Value for "'.concat(i,'" must be of type ').concat(a),Os.INVALID_VALUE,o)||this}return r}(Vu),ZO=function(e){Po(r,e);function r(i,a){return e.call(this,'The intl string context variable "'.concat(i,'" was not provided to the string "').concat(a,'"'),Os.MISSING_VALUE,a)||this}return r}(Vu),Sa;(function(e){e[e.literal=0]="literal",e[e.object=1]="object"})(Sa||(Sa={}));function eI(e){return e.length<2?e:e.reduce(function(r,i){var a=r[r.length-1];return!a||a.type!==Sa.literal||i.type!==Sa.literal?r.push(i):a.value+=i.value,r},[])}function OA(e){return typeof e=="function"}function $y(e,r,i,a,o,d,l){if(e.length===1&&$S(e[0]))return[{type:Sa.literal,value:e[0].value}];for(var u=[],h=0,f=e;h<f.length;h++){var y=f[h];if($S(y)){u.push({type:Sa.literal,value:y.value});continue}if(EO(y)){typeof d=="number"&&u.push({type:Sa.literal,value:i.getNumberFormat(r).format(d)});continue}var b=y.value;if(!(o&&b in o))throw new ZO(b,l);var _=o[b];if(SO(y)){(!_||typeof _=="string"||typeof _=="number")&&(_=typeof _=="string"||typeof _=="number"?String(_):""),u.push({type:typeof _=="string"?Sa.literal:Sa.object,value:_});continue}if(yA(y)){var A=typeof y.style=="string"?a.date[y.style]:Ov(y.style)?y.style.parsedOptions:void 0;u.push({type:Sa.literal,value:i.getDateTimeFormat(r,A).format(_)});continue}if(mA(y)){var A=typeof y.style=="string"?a.time[y.style]:Ov(y.style)?y.style.parsedOptions:a.time.medium;u.push({type:Sa.literal,value:i.getDateTimeFormat(r,A).format(_)});continue}if(gA(y)){var A=typeof y.style=="string"?a.number[y.style]:_A(y.style)?y.style.parsedOptions:void 0;A&&A.scale&&(_=_*(A.scale||1)),u.push({type:Sa.literal,value:i.getNumberFormat(r,A).format(_)});continue}if(wA(y)){var T=y.children,x=y.value,O=o[x];if(!OA(O))throw new XO(x,"function",l);var R=$y(T,r,i,a,o,d),F=O(R.map(function(B){return B.value}));Array.isArray(F)||(F=[F]),u.push.apply(u,F.map(function(B){return{type:typeof B=="string"?Sa.literal:Sa.object,value:B}}))}if(vA(y)){var P=y.options[_]||y.options.other;if(!P)throw new YS(y.value,_,Object.keys(y.options),l);u.push.apply(u,$y(P.value,r,i,a,o));continue}if(bA(y)){var P=y.options["=".concat(_)];if(!P){if(!Intl.PluralRules)throw new Vu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Os.MISSING_INTL_API,l);var K=i.getPluralRules(r,{type:y.pluralType}).select(_-(y.offset||0));P=y.options[K]||y.options.other}if(!P)throw new YS(y.value,_,Object.keys(y.options),l);u.push.apply(u,$y(P.value,r,i,a,o,_-(y.offset||0)));continue}}return eI(u)}function tI(e,r){return r?Rr(Rr(Rr({},e||{}),r||{}),Object.keys(e).reduce(function(i,a){return i[a]=Rr(Rr({},e[a]),r[a]||{}),i},{})):e}function rI(e,r){return r?Object.keys(e).reduce(function(i,a){return i[a]=tI(e[a],r[a]),i},Rr({},e)):e}function iv(e){return{create:function(){return{get:function(r){return e[r]},set:function(r,i){e[r]=i}}}}}function nI(e){return e===void 0&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Rs(function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return new((r=Intl.NumberFormat).bind.apply(r,Ts([void 0],i,!1)))},{cache:iv(e.number),strategy:xs.variadic}),getDateTimeFormat:Rs(function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return new((r=Intl.DateTimeFormat).bind.apply(r,Ts([void 0],i,!1)))},{cache:iv(e.dateTime),strategy:xs.variadic}),getPluralRules:Rs(function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return new((r=Intl.PluralRules).bind.apply(r,Ts([void 0],i,!1)))},{cache:iv(e.pluralRules),strategy:xs.variadic})}}var IA=function(){function e(r,i,a,o){i===void 0&&(i=e.defaultLocale);var d=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(h){var f=d.formatToParts(h);if(f.length===1)return f[0].value;var y=f.reduce(function(b,_){return!b.length||_.type!==Sa.literal||typeof b[b.length-1]!="string"?b.push(_.value):b[b.length-1]+=_.value,b},[]);return y.length<=1?y[0]||"":y},this.formatToParts=function(h){return $y(d.ast,d.locales,d.formatters,d.formats,h,void 0,d.message)},this.resolvedOptions=function(){var h;return{locale:((h=d.resolvedLocale)===null||h===void 0?void 0:h.toString())||Intl.NumberFormat.supportedLocalesOf(d.locales)[0]}},this.getAst=function(){return d.ast},this.locales=i,this.resolvedLocale=e.resolveLocale(i),typeof r=="string"){if(this.message=r,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var l=o||{};l.formatters;var u=Nd(l,["formatters"]);this.ast=e.__parse(r,Rr(Rr({},u),{locale:this.resolvedLocale}))}else this.ast=r;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=rI(e.formats,a),this.formatters=o&&o.formatters||nI(this.formatterCache)}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(r){if(!(typeof Intl.Locale>"u")){var i=Intl.NumberFormat.supportedLocalesOf(r);return i.length>0?new Intl.Locale(i[0]):new Intl.Locale(typeof r=="string"?r:r[0])}},e.__parse=QO,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}(),pf;(function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"})(pf||(pf={}));var Rg=function(e){Po(r,e);function r(i,a,o){var d=this,l=o?o instanceof Error?o:new Error(String(o)):void 0;return d=e.call(this,"[@formatjs/intl Error ".concat(i,"] ").concat(a,`
`).concat(l?`
`.concat(l.message,`
`).concat(l.stack):""))||this,d.code=i,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(d,r),d}return r}(Error),iI=function(e){Po(r,e);function r(i,a){return e.call(this,pf.UNSUPPORTED_FORMATTER,i,a)||this}return r}(Rg),aI=function(e){Po(r,e);function r(i,a){return e.call(this,pf.INVALID_CONFIG,i,a)||this}return r}(Rg),QS=function(e){Po(r,e);function r(i,a){return e.call(this,pf.MISSING_DATA,i,a)||this}return r}(Rg),No=function(e){Po(r,e);function r(i,a,o){var d=e.call(this,pf.FORMAT_ERROR,"".concat(i,`
Locale: `).concat(a,`
`),o)||this;return d.locale=a,d}return r}(Rg),av=function(e){Po(r,e);function r(i,a,o,d){var l=e.call(this,"".concat(i,`
MessageID: `).concat(o?.id,`
Default Message: `).concat(o?.defaultMessage,`
Description: `).concat(o?.description,`
`),a,d)||this;return l.descriptor=o,l.locale=a,l}return r}(No),oI=function(e){Po(r,e);function r(i,a){var o=e.call(this,pf.MISSING_TRANSLATION,'Missing message: "'.concat(i.id,'" for locale "').concat(a,'", using ').concat(i.defaultMessage?"default message (".concat(typeof i.defaultMessage=="string"?i.defaultMessage:i.defaultMessage.map(function(d){var l;return(l=d.value)!==null&&l!==void 0?l:JSON.stringify(d)}).join(),")"):"id"," as fallback."))||this;return o.descriptor=i,o}return r}(Rg);function sI(e,r,i){if(i===void 0&&(i=Error),!e)throw new i(r)}function Ld(e,r,i){return i===void 0&&(i={}),r.reduce(function(a,o){return o in e?a[o]=e[o]:o in i&&(a[o]=i[o]),a},{})}var lI=function(e){},uI=function(e){},PA={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:lI,onWarn:uI};function NA(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function lf(e){return{create:function(){return{get:function(r){return e[r]},set:function(r,i){e[r]=i}}}}}function cI(e){e===void 0&&(e=NA());var r=Intl.RelativeTimeFormat,i=Intl.ListFormat,a=Intl.DisplayNames,o=Rs(function(){for(var u,h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return new((u=Intl.DateTimeFormat).bind.apply(u,Ts([void 0],h,!1)))},{cache:lf(e.dateTime),strategy:xs.variadic}),d=Rs(function(){for(var u,h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return new((u=Intl.NumberFormat).bind.apply(u,Ts([void 0],h,!1)))},{cache:lf(e.number),strategy:xs.variadic}),l=Rs(function(){for(var u,h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];return new((u=Intl.PluralRules).bind.apply(u,Ts([void 0],h,!1)))},{cache:lf(e.pluralRules),strategy:xs.variadic});return{getDateTimeFormat:o,getNumberFormat:d,getMessageFormat:Rs(function(u,h,f,y){return new IA(u,h,f,Rr({formatters:{getNumberFormat:d,getDateTimeFormat:o,getPluralRules:l}},y||{}))},{cache:lf(e.message),strategy:xs.variadic}),getRelativeTimeFormat:Rs(function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];return new(r.bind.apply(r,Ts([void 0],u,!1)))},{cache:lf(e.relativeTime),strategy:xs.variadic}),getPluralRules:l,getListFormat:Rs(function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];return new(i.bind.apply(i,Ts([void 0],u,!1)))},{cache:lf(e.list),strategy:xs.variadic}),getDisplayNames:Rs(function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];return new(a.bind.apply(a,Ts([void 0],u,!1)))},{cache:lf(e.displayNames),strategy:xs.variadic})}}function Eb(e,r,i,a){var o=e&&e[r],d;if(o&&(d=o[i]),d)return d;a(new iI("No ".concat(r," format named: ").concat(i)))}function Uy(e,r){return Object.keys(e).reduce(function(i,a){return i[a]=Rr({timeZone:r},e[a]),i},{})}function XS(e,r){var i=Object.keys(Rr(Rr({},e),r));return i.reduce(function(a,o){return a[o]=Rr(Rr({},e[o]||{}),r[o]||{}),a},{})}function ZS(e,r){if(!r)return e;var i=IA.formats;return Rr(Rr(Rr({},i),e),{date:XS(Uy(i.date,r),Uy(e.date||{},r)),time:XS(Uy(i.time,r),Uy(e.time||{},r))})}var Uv=function(e,r,i,a,o){var d=e.locale,l=e.formats,u=e.messages,h=e.defaultLocale,f=e.defaultFormats,y=e.fallbackOnEmptyString,b=e.onError,_=e.timeZone,A=e.defaultRichTextElements;i===void 0&&(i={id:""});var T=i.id,x=i.defaultMessage;sI(!!T,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var O=String(T),R=u&&Object.prototype.hasOwnProperty.call(u,O)&&u[O];if(Array.isArray(R)&&R.length===1&&R[0].type===ci.literal)return R[0].value;if(!a&&R&&typeof R=="string"&&!A)return R.replace(/'\{(.*?)\}'/gi,"{$1}");if(a=Rr(Rr({},A),a||{}),l=ZS(l,_),f=ZS(f,_),!R){if(y===!1&&R==="")return R;if((!x||d&&d.toLowerCase()!==h.toLowerCase())&&b(new oI(i,d)),x)try{var F=r.getMessageFormat(x,h,f,o);return F.format(a)}catch(P){return b(new av('Error formatting default message for: "'.concat(O,'", rendering default message verbatim'),d,i,P)),typeof x=="string"?x:O}return O}try{var F=r.getMessageFormat(R,d,l,Rr({formatters:r},o||{}));return F.format(a)}catch(P){b(new av('Error formatting message: "'.concat(O,'", using ').concat(x?"default message":"id"," as fallback."),d,i,P))}if(x)try{var F=r.getMessageFormat(x,h,f,o);return F.format(a)}catch(P){b(new av('Error formatting the default message for: "'.concat(O,'", rendering message verbatim'),d,i,P))}return typeof R=="string"?R:typeof x=="string"?x:O},fI=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function xg(e,r,i,a){var o=e.locale,d=e.formats,l=e.onError,u=e.timeZone;a===void 0&&(a={});var h=a.format,f=Rr(Rr({},u&&{timeZone:u}),h&&Eb(d,r,h,l)),y=Ld(a,fI,f);return r==="time"&&!y.hour&&!y.minute&&!y.second&&!y.timeStyle&&!y.dateStyle&&(y=Rr(Rr({},y),{hour:"numeric",minute:"numeric"})),i(o,y)}function dI(e,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var o=i[0],d=i[1],l=d===void 0?{}:d,u=typeof o=="string"?new Date(o||0):o;try{return xg(e,"date",r,l).format(u)}catch(h){e.onError(new No("Error formatting date.",e.locale,h))}return String(u)}function hI(e,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var o=i[0],d=i[1],l=d===void 0?{}:d,u=typeof o=="string"?new Date(o||0):o;try{return xg(e,"time",r,l).format(u)}catch(h){e.onError(new No("Error formatting time.",e.locale,h))}return String(u)}function pI(e,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var o=i[0],d=i[1],l=i[2],u=l===void 0?{}:l,h=typeof o=="string"?new Date(o||0):o,f=typeof d=="string"?new Date(d||0):d;try{return xg(e,"dateTimeRange",r,u).formatRange(h,f)}catch(y){e.onError(new No("Error formatting date time range.",e.locale,y))}return String(h)}function gI(e,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var o=i[0],d=i[1],l=d===void 0?{}:d,u=typeof o=="string"?new Date(o||0):o;try{return xg(e,"date",r,l).formatToParts(u)}catch(h){e.onError(new No("Error formatting date.",e.locale,h))}return[]}function yI(e,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var o=i[0],d=i[1],l=d===void 0?{}:d,u=typeof o=="string"?new Date(o||0):o;try{return xg(e,"time",r,l).formatToParts(u)}catch(h){e.onError(new No("Error formatting time.",e.locale,h))}return[]}var mI=["style","type","fallback","languageDisplay"];function vI(e,r,i,a){var o=e.locale,d=e.onError,l=Intl.DisplayNames;l||d(new Vu(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,Os.MISSING_INTL_API));var u=Ld(a,mI);try{return r(o,u).of(i)}catch(h){d(new No("Error formatting display name.",o,h))}}var bI=["type","style"],eE=Date.now();function wI(e){return"".concat(eE,"_").concat(e,"_").concat(eE)}function _I(e,r,i,a){a===void 0&&(a={});var o=FA(e,r,i,a).reduce(function(d,l){var u=l.value;return typeof u!="string"?d.push(u):typeof d[d.length-1]=="string"?d[d.length-1]+=u:d.push(u),d},[]);return o.length===1?o[0]:o.length===0?"":o}function FA(e,r,i,a){var o=e.locale,d=e.onError;a===void 0&&(a={});var l=Intl.ListFormat;l||d(new Vu(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,Os.MISSING_INTL_API));var u=Ld(a,bI);try{var h={},f=i.map(function(y,b){if(typeof y=="object"){var _=wI(b);return h[_]=y,_}return String(y)});return r(o,u).formatToParts(f).map(function(y){return y.type==="literal"?y:Rr(Rr({},y),{value:h[y.value]||y.value})})}catch(y){d(new No("Error formatting list.",o,y))}return i}var SI=["type"];function EI(e,r,i,a){var o=e.locale,d=e.onError;a===void 0&&(a={}),Intl.PluralRules||d(new Vu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Os.MISSING_INTL_API));var l=Ld(a,SI);try{return r(o,l).select(i)}catch(u){d(new No("Error formatting plural.",o,u))}return"other"}var AI=["numeric","style"];function RI(e,r,i){var a=e.locale,o=e.formats,d=e.onError;i===void 0&&(i={});var l=i.format,u=!!l&&Eb(o,"relative",l,d)||{},h=Ld(i,AI,u);return r(a,h)}function xI(e,r,i,a,o){o===void 0&&(o={}),a||(a="second");var d=Intl.RelativeTimeFormat;d||e.onError(new Vu(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,Os.MISSING_INTL_API));try{return RI(e,r,o).format(i,a)}catch(l){e.onError(new No("Error formatting relative time.",e.locale,l))}return String(i)}var TI=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function DA(e,r,i){var a=e.locale,o=e.formats,d=e.onError;i===void 0&&(i={});var l=i.format,u=l&&Eb(o,"number",l,d)||{},h=Ld(i,TI,u);return r(a,h)}function CI(e,r,i,a){a===void 0&&(a={});try{return DA(e,r,a).format(i)}catch(o){e.onError(new No("Error formatting number.",e.locale,o))}return String(i)}function OI(e,r,i,a){a===void 0&&(a={});try{return DA(e,r,a).formatToParts(i)}catch(o){e.onError(new No("Error formatting number.",e.locale,o))}return[]}function II(e){var r=e?e[Object.keys(e)[0]]:void 0;return typeof r=="string"}function PI(e){e.onWarn&&e.defaultRichTextElements&&II(e.messages||{})&&e.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function NI(e,r){var i=cI(r),a=Rr(Rr({},PA),e),o=a.locale,d=a.defaultLocale,l=a.onError;return o?!Intl.NumberFormat.supportedLocalesOf(o).length&&l?l(new QS('Missing locale data for locale: "'.concat(o,'" in Intl.NumberFormat. Using default locale: "').concat(d,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(o).length&&l&&l(new QS('Missing locale data for locale: "'.concat(o,'" in Intl.DateTimeFormat. Using default locale: "').concat(d,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):(l&&l(new aI('"locale" was not configured, using "'.concat(d,'" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details'))),a.locale=a.defaultLocale||"en"),PI(a),Rr(Rr({},a),{formatters:i,formatNumber:CI.bind(null,a,i.getNumberFormat),formatNumberToParts:OI.bind(null,a,i.getNumberFormat),formatRelativeTime:xI.bind(null,a,i.getRelativeTimeFormat),formatDate:dI.bind(null,a,i.getDateTimeFormat),formatDateToParts:gI.bind(null,a,i.getDateTimeFormat),formatTime:hI.bind(null,a,i.getDateTimeFormat),formatDateTimeRange:pI.bind(null,a,i.getDateTimeFormat),formatTimeToParts:yI.bind(null,a,i.getDateTimeFormat),formatPlural:EI.bind(null,a,i.getPluralRules),formatMessage:Uv.bind(null,a,i),$t:Uv.bind(null,a,i),formatList:_I.bind(null,a,i.getListFormat),formatListToParts:FA.bind(null,a,i.getListFormat),formatDisplayName:vI.bind(null,a,i.getDisplayNames)})}function FI(e,r,i){if(i===void 0&&(i=Error),!e)throw new i(r)}function UA(e){FI(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var LA=Rr(Rr({},PA),{textComponent:Qe.Fragment}),DI={key:42},UI=function(e){return Qe.isValidElement(e)?Qe.createElement(Qe.Fragment,DI,e):e},LI=function(e){var r;return(r=Qe.Children.map(e,UI))!==null&&r!==void 0?r:[]};function MI(e){return function(r){return e(Qe.Children.toArray(r))}}function Lv(e,r){if(e===r)return!0;if(!e||!r)return!1;var i=Object.keys(e),a=Object.keys(r),o=i.length;if(a.length!==o)return!1;for(var d=0;d<o;d++){var l=i[d];if(e[l]!==r[l]||!Object.prototype.hasOwnProperty.call(r,l))return!1}return!0}var ov={exports:{}},Gn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function kI(){if(tE)return Gn;tE=1;var e=typeof Symbol=="function"&&Symbol.for,r=e?Symbol.for("react.element"):60103,i=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,d=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,h=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,y=e?Symbol.for("react.forward_ref"):60112,b=e?Symbol.for("react.suspense"):60113,_=e?Symbol.for("react.suspense_list"):60120,A=e?Symbol.for("react.memo"):60115,T=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,O=e?Symbol.for("react.fundamental"):60117,R=e?Symbol.for("react.responder"):60118,F=e?Symbol.for("react.scope"):60119;function P(B){if(typeof B=="object"&&B!==null){var W=B.$$typeof;switch(W){case r:switch(B=B.type,B){case h:case f:case a:case d:case o:case b:return B;default:switch(B=B&&B.$$typeof,B){case u:case y:case T:case A:case l:return B;default:return W}}case i:return W}}}function K(B){return P(B)===f}return Gn.AsyncMode=h,Gn.ConcurrentMode=f,Gn.ContextConsumer=u,Gn.ContextProvider=l,Gn.Element=r,Gn.ForwardRef=y,Gn.Fragment=a,Gn.Lazy=T,Gn.Memo=A,Gn.Portal=i,Gn.Profiler=d,Gn.StrictMode=o,Gn.Suspense=b,Gn.isAsyncMode=function(B){return K(B)||P(B)===h},Gn.isConcurrentMode=K,Gn.isContextConsumer=function(B){return P(B)===u},Gn.isContextProvider=function(B){return P(B)===l},Gn.isElement=function(B){return typeof B=="object"&&B!==null&&B.$$typeof===r},Gn.isForwardRef=function(B){return P(B)===y},Gn.isFragment=function(B){return P(B)===a},Gn.isLazy=function(B){return P(B)===T},Gn.isMemo=function(B){return P(B)===A},Gn.isPortal=function(B){return P(B)===i},Gn.isProfiler=function(B){return P(B)===d},Gn.isStrictMode=function(B){return P(B)===o},Gn.isSuspense=function(B){return P(B)===b},Gn.isValidElementType=function(B){return typeof B=="string"||typeof B=="function"||B===a||B===f||B===d||B===o||B===b||B===_||typeof B=="object"&&B!==null&&(B.$$typeof===T||B.$$typeof===A||B.$$typeof===l||B.$$typeof===u||B.$$typeof===y||B.$$typeof===O||B.$$typeof===R||B.$$typeof===F||B.$$typeof===x)},Gn.typeOf=P,Gn}var rE;function BI(){return rE||(rE=1,ov.exports=kI()),ov.exports}var sv,nE;function HI(){if(nE)return sv;nE=1;var e=BI(),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},d={};d[e.ForwardRef]=a,d[e.Memo]=o;function l(T){return e.isMemo(T)?o:d[T.$$typeof]||r}var u=Object.defineProperty,h=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,y=Object.getOwnPropertyDescriptor,b=Object.getPrototypeOf,_=Object.prototype;function A(T,x,O){if(typeof x!="string"){if(_){var R=b(x);R&&R!==_&&A(T,R,O)}var F=h(x);f&&(F=F.concat(f(x)));for(var P=l(T),K=l(x),B=0;B<F.length;++B){var W=F[B];if(!i[W]&&!(O&&O[W])&&!(K&&K[W])&&!(P&&P[W])){var Y=y(x,W);try{u(T,W,Y)}catch{}}}}return T}return sv=A,sv}HI();var Ab=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=Qe.createContext(null)):Qe.createContext(null);Ab.Consumer;var jI=Ab.Provider,VI=jI,$I=Ab;function Tg(){var e=Qe.useContext($I);return UA(e),e}var Mv;(function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"})(Mv||(Mv={}));var kv;(function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"})(kv||(kv={}));function MA(e){var r=function(i){var a=Tg(),o=i.value,d=i.children,l=Nd(i,["value","children"]),u=typeof o=="string"?new Date(o||0):o,h=e==="formatDate"?a.formatDateToParts(u,l):a.formatTimeToParts(u,l);return d(h)};return r.displayName=kv[e],r}function Cg(e){var r=function(i){var a=Tg(),o=i.value,d=i.children,l=Nd(i,["value","children"]),u=a[e](o,l);if(typeof d=="function")return d(u);var h=a.textComponent||Qe.Fragment;return Qe.createElement(h,null,u)};return r.displayName=Mv[e],r}function kA(e){return e&&Object.keys(e).reduce(function(r,i){var a=e[i];return r[i]=OA(a)?MI(a):a,r},{})}var iE=function(e,r,i,a){for(var o=[],d=4;d<arguments.length;d++)o[d-4]=arguments[d];var l=kA(a),u=Uv.apply(void 0,Ts([e,r,i,l],o,!1));return Array.isArray(u)?LI(u):u},aE=function(e,r){var i=e.defaultRichTextElements,a=Nd(e,["defaultRichTextElements"]),o=kA(i),d=NI(Rr(Rr(Rr({},LA),a),{defaultRichTextElements:o}),r),l={locale:d.locale,timeZone:d.timeZone,fallbackOnEmptyString:d.fallbackOnEmptyString,formats:d.formats,defaultLocale:d.defaultLocale,defaultFormats:d.defaultFormats,messages:d.messages,onError:d.onError,defaultRichTextElements:o};return Rr(Rr({},d),{formatMessage:iE.bind(null,l,d.formatters),$t:iE.bind(null,l,d.formatters)})};function KI(e,r){var i=e.values,a=Nd(e,["values"]),o=r.values,d=Nd(r,["values"]);return Lv(o,i)&&Lv(a,d)}function BA(e){var r=Tg(),i=r.formatMessage,a=r.textComponent,o=a===void 0?Qe.Fragment:a,d=e.id,l=e.description,u=e.defaultMessage,h=e.values,f=e.children,y=e.tagName,b=y===void 0?o:y,_=e.ignoreTag,A={id:d,description:l,defaultMessage:u},T=i(A,h,{ignoreTag:_});return typeof f=="function"?f(Array.isArray(T)?T:[T]):b?Qe.createElement(b,null,T):Qe.createElement(Qe.Fragment,null,T)}BA.displayName="FormattedMessage";var Mu=Qe.memo(BA,KI);Mu.displayName="MemoizedFormattedMessage";function lv(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}var GI=function(e){Po(r,e);function r(){var i=e!==null&&e.apply(this,arguments)||this;return i.cache=NA(),i.state={cache:i.cache,intl:aE(lv(i.props),i.cache),prevConfig:lv(i.props)},i}return r.getDerivedStateFromProps=function(i,a){var o=a.prevConfig,d=a.cache,l=lv(i);return Lv(o,l)?null:{intl:aE(l,d),prevConfig:l}},r.prototype.render=function(){return UA(this.state.intl),Qe.createElement(VI,{value:this.state.intl},this.props.children)},r.displayName="IntlProvider",r.defaultProps=LA,r}(Qe.PureComponent);Cg("formatDate");Cg("formatTime");Cg("formatNumber");Cg("formatList");Cg("formatDisplayName");MA("formatDate");MA("formatTime");const qI=ax.createContext({selectedLanguage:"",setSelectedLanguage:()=>{}}),zI={manageYourProfileLoginScreenHeading:"Spravujte svoje jedlne preferencie",selectSignInMethod:"Vyberte spsob prihlsenia",signInWithSolid:"Solid",whatIsSolid:"o je to Solid?",signInDivider:"alebo",signInWithFacebook:"Facebook",signInWithGoogle:"Google",redirectToProvider:"Prejs na poskytovatea",welcomeToTheApplication:"Vitajte v editore vho ditneho profilu!",aboutTheApplication:"O aplikcii",sourceCode:"Zdrojov kd",createdBy:"Vytvoril",editProfile:"Upravi profil",importProfile:"Importova profil",downloadProfile:"Stiahnu profil",userManual:"Pouvatesk prruka",signOut:"Odhlsi sa",allergicTo:"Ste alergick na: ",diets:"Dity",onDiets:"Vae dity s: ",tastePreferencesHeading:"Preferencie chut",worldCuisines:"Obben svetov kuchyne",tasteOfDesserts:"Preferovan chu zkuskov",tasteSpiciness:"rove tipavosti",whatAreYouAllergicTo:"Na o mte alergiu?",nextStep:"al krok: ",saveProfile:"Uloi profil",whichDietsAreYouOn:"Ktor dity dodriavate?",showLessDietOptions:"Zobrazi menej monost",showMoreDietOptions:"Zobrazi viac monost",isYourDietNotListed:"Chba vaa dita v zozname?",searchForMoreDiets:"Hada alie dity...",specifyYourTastePreferences:"pecifikujte vae chuov preferencie",whichWorldCuisinesDoYouLike:"Ktor svetov kuchyne mte radi?",loadingData:"Natavam dta",searchForMoreWorldCuisines:"Hada alie svetov kuchyne...",whichTasteOfDessertsDoYouPrefer:"Ak zkusky mte radej?",doesNotMatter:"Nezle",sweet:"Sladk",savory:"Slan",yes:"no",no:"Nie",howSpicyShouldItBe:"Ako vemi pliv by malo by?",mild:"Jemne",medium:"Stredne",hot:"Vemi",selectASolidProvider:"Vyberte poskytovatea Solid",typeInProviderUrlHeading:"Alebo vlote poskytovateovu URL",providerUrlPlaceholder:"Zadajte URL poskytovatea",chooseSolidProvider:"Zvote Solid poskytovatea",goBack:"Sp",loginSolidErrorMessage:`Mon dvody s:
      1. Nie ste pripojen na internet.
      2. Zadan URL poskytovatea je nesprvna.
      3. Problm je na strane zvolenho Solid poskytovatea.
    `,emptyUrlAlert:"Vyberte poskytovatea alebo zadajte poskytovateovu URL.",solidDescription:`
    <b>Solid</b> vm umouje ma kontrolu nad tm kde s vae dta uloen a kto k nim m prstup. Na zaiatok si budete musie u poskytovatea Solid zaobstara vae WebID. Taktie sa mete prihlsi pod vam Google alebo Facebook tom, priom vae dta bud uloen na serveroch tchto poskytovateov. Solid mete zaa pouva aj neskr a vae dta si v rmci aplikcie prenies. Viac sa dozviete na <a>oficilnej strnke</a> projektu Solid.
  `,closeModal:"Zavrie",firebaseLoginErrorMessageFacebook:"Prihlsenie zlyhalo z dvodu chyby v prihlasovacej slube.",firebaseLoginErrorMessageGoogle:"Prihlsenie zlyhalo pretoe bu nemte prstup na internet alebo z dvodu chyby v prihlasovacej slube.",loginFailed:"Prihlsenie bolo nespen",aboutApplicationTitle:"O aplikcii",aboutApplicationBody:"<b>Editor ditneho profilu</b> sli pre ud ktor radi jedia v retaurcich a s obmedzovan alergiami alebo maj in jedlne preferencie. Aplikcia vm umouje uloi a spravova v ditny profil. Vnimon je v tom, e umouje poui technolgiu <b>Solid</b>, a tm pdom bud vae dta uloen decentralizovanm spsobom a budete ma kontrolu nad tm kto ich me vidie, o zaru vyiu mieru skromia.",emailAndPassword:"Email a heslo",loginWithEmail:"Prihlste sa pomocou emailu",password:"Heslo",signIn:"Prihlsi sa",newAccount:"Ak ste nov, je taktie mon",createAccount:"Vytvori et",createYourAccount:"Zalote si et",signUp:"Zaregistrova sa",provideValidEmail:"Zadajte platn emailov adresu",passwordMustContain:"Heslo mus obsahova",atLeastEightChars:"Aspo 8 znakov",lowerCaseLetter:"Mal psmeno",upperCaseLetter:"Vek psmeno",number:"slo",close:"Zatvori",signUpFailed:"Chyba pri vytvran tu",singUpDefaultErrorMessage:"et sa nepodarilo vytvori. Skontrolujte prosm vae internetov pripojenie a skste to znovu.",signUpEmailInUse:"Pre zadan emailov adresu u existuje et. Zvote prosm in adresu alebo sa prihlste.",emailOrPasswordInvalid:"Zadan email alebo heslo s nesprvne. Skontrolujte si prosm daje a skste to znovu.",loginCredentialsNotValid:"Buto je zadan email v nesprvnom formte alebo ste nezadali heslo. Skontrolujte prosm vae prihlasovacie daje a skste to znovu.",emailLoginErrorMessage:"Prihlsenie bolo nespen kvli nesprvnym prihlasovacm dajom.",profileOverviewHeading:"Vae jedlne preferencie",gluten:"Lepok",crustaceans:"Krovce",eggs:"Vajcia",fish:"Ryby",peanuts:"Araidy",soya:"Sja",milk:"Mlieko",nuts:"Orechy",celery:"Zeler",mustard:"Horica",sesame:"Sezam",sulphites:"Siriitany",lupin:"Vl bb",molluscs:"Mkke",dietPreferencesHeading:"Dity",whichDietsDoYouFollow:"Ktor dity dodriavate?",calorieTrackingGoal:"V prpade e si potate kalrie, ak je v denn prjem?",tastesAndFoodPreparation:"Preferencie chut",favoriteWorldCuisines:"Ak s vae obben svetov kuchyne?",foodIngredientsLikeOrDislike:"Ktor ingrediencie mte radi a ktor naopak nie?",doYouLikeSpicyFood:"Mte radi pliv jedl?",notSpecified:"Nepecifikovan",notAtAll:"Vbec",yesIDo:"no, mm",howSpicyShouldFoodBe:"Zvote rove ostrosti",whichCookingMethodsDoYouPrefer:"Ktor spsoby prpravy jedla uprednostujete?",dailyCalorieIntakeGoal:"V denn prjem kalri je: ",yourFavoriteCuisines:"Vae obben svetov kuchyne s: ",likedIngredients:"Obben ingrediencie: ",dislikedIngredients:"Neobben ingrediencie: ",howSpicyYouLikeYourFood:"Preferovan rove plivosti jedla: ",preferredCookingMethods:"Uprednostovan spsoby prpravy jedla",finish:"Uloi",allergenPreferencesHeading:"Alergny",deleteProfile:"Zmaza profil",searchMoreDiets:"Vyhadajte alie dity",next:"alej",vegetarianDiet:"Vegetarinstvo",mediterraneanDiet:"Stredomorsk strava",lowCarbDiet:"Nzkosacharidov dita",veganDiet:"Veganstvo",ketoDiet:"Ketognna dita",atkinsDiet:"Atkinsonova dita",paleoDiet:"Paleo dita",error:"Chyba",fetchingDietsFailed:"Natanie dit bolo nespen",italianCuisine:"Talianska",greekCuisine:"Grcka",mexicanCuisine:"Mexick",chineseCuisine:"nska",turkishCuisine:"Tureck",spanishCuisine:"panielska",japaneseCuisine:"Japonsk",frenchCuisine:"Franczska",searchMoreCuisines:"Vyhadajte alie svetov kuchyne",fetchingCuisinesFailed:"Natanie svetovch kuch bolo nespen",fetchingIngredientsFailed:"Natanie ingredienci bolo nespen",whatILike:"Mm rd",searchIngredients:"Vyhadajte ingrediencie",whatIDontLike:"Nemm rd",extraHot:"Extra",bakingMethod:"Peenie",grillingMethod:"Grilovanie",boilingMethod:"Varenie",deepFryingMethod:"Vypranie",steamingMethod:"Naparovanie",sauteingMethod:"Restovanie",fetchingCookingMethodsFailed:"Natanie spsobov prpravy jedla bolo nespen",searchMoreCookingMethods:"Vyhadajte spsoby prpravy",emptyProfileText:"Profil je przdny, kliknite na tlaidlo editcie profilu.",preferredCookingMethodsOverview:"Preferovan spsoby prpravy jedla: ",profileSavedSuccessfully:"Profil bol spene uloen",profileDeletion:"Zmazanie profilu",profileDeletionConfirm:"Naozaj chcete zmaza v ditny profil?",delete:"Zmaza",profileDeletionSuccessMessage:"Profil bol spene zmazan",profileDeletionNotFoundMessage:"Profil nebol njden",profileDeletionErrorMessage:"Profil sa nepodarilo zmaza",saveProfileModalTitle:"Uloenie profilu",profileSaveError:"Profil sa nepodarilo uloi",profileLoading:"Natanie profilu",loadingProfileError:"Natanie profilu sa skonilo chybou",menuOverviewHeading:"Prehad menu",editMenu:"Upravi",visible:"Viditen",scheduleMenu:"Rozvrh"},WI=e=>{const[r,i]=Qe.useState("en"),a={selectedLanguage:r,setSelectedLanguage:i};function o(d){return d==="sk"?zI:{}}return Ot.jsx(qI.Provider,{value:a,children:Ot.jsx(GI,{messages:o(r),locale:r,children:e.children})})};var eg={},oE;function JI(){if(oE)return eg;oE=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.parse=l,eg.serialize=f;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,d=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function l(_,A){const T=new d,x=_.length;if(x<2)return T;const O=A?.decode||y;let R=0;do{const F=_.indexOf("=",R);if(F===-1)break;const P=_.indexOf(";",R),K=P===-1?x:P;if(F>K){R=_.lastIndexOf(";",F-1)+1;continue}const B=u(_,R,F),W=h(_,F,B),Y=_.slice(B,W);if(T[Y]===void 0){let q=u(_,F+1,K),Pe=h(_,K,q);const $=O(_.slice(q,Pe));T[Y]=$}R=K+1}while(R<x);return T}function u(_,A,T){do{const x=_.charCodeAt(A);if(x!==32&&x!==9)return A}while(++A<T);return T}function h(_,A,T){for(;A>T;){const x=_.charCodeAt(--A);if(x!==32&&x!==9)return A+1}return T}function f(_,A,T){const x=T?.encode||encodeURIComponent;if(!e.test(_))throw new TypeError(`argument name is invalid: ${_}`);const O=x(A);if(!r.test(O))throw new TypeError(`argument val is invalid: ${A}`);let R=_+"="+O;if(!T)return R;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);R+="; Max-Age="+T.maxAge}if(T.domain){if(!i.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);R+="; Domain="+T.domain}if(T.path){if(!a.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);R+="; Path="+T.path}if(T.expires){if(!b(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);R+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(R+="; HttpOnly"),T.secure&&(R+="; Secure"),T.partitioned&&(R+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":R+="; Priority=Low";break;case"medium":R+="; Priority=Medium";break;case"high":R+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":R+="; SameSite=Strict";break;case"lax":R+="; SameSite=Lax";break;case"none":R+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return R}function y(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function b(_){return o.call(_)==="[object Date]"}return eg}JI();var sE="popstate";function YI(e={}){function r(a,o){let{pathname:d,search:l,hash:u}=a.location;return Bv("",{pathname:d,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(a,o){return typeof o=="string"?o:pg(o)}return XI(r,i,null,e)}function pi(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function Yo(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function QI(){return Math.random().toString(36).substring(2,10)}function lE(e,r){return{usr:e.state,key:e.key,idx:r}}function Bv(e,r,i=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?Md(r):r,state:i,key:r&&r.key||a||QI()}}function pg({pathname:e="/",search:r="",hash:i=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Md(e){let r={};if(e){let i=e.indexOf("#");i>=0&&(r.hash=e.substring(i),e=e.substring(0,i));let a=e.indexOf("?");a>=0&&(r.search=e.substring(a),e=e.substring(0,a)),e&&(r.pathname=e)}return r}function XI(e,r,i,a={}){let{window:o=document.defaultView,v5Compat:d=!1}=a,l=o.history,u="POP",h=null,f=y();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function y(){return(l.state||{idx:null}).idx}function b(){u="POP";let O=y(),R=O==null?null:O-f;f=O,h&&h({action:u,location:x.location,delta:R})}function _(O,R){u="PUSH";let F=Bv(x.location,O,R);f=y()+1;let P=lE(F,f),K=x.createHref(F);try{l.pushState(P,"",K)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;o.location.assign(K)}d&&h&&h({action:u,location:x.location,delta:1})}function A(O,R){u="REPLACE";let F=Bv(x.location,O,R);f=y();let P=lE(F,f),K=x.createHref(F);l.replaceState(P,"",K),d&&h&&h({action:u,location:x.location,delta:0})}function T(O){return ZI(O)}let x={get action(){return u},get location(){return e(o,l)},listen(O){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(sE,b),h=O,()=>{o.removeEventListener(sE,b),h=null}},createHref(O){return r(o,O)},createURL:T,encodeLocation(O){let R=T(O);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:_,replace:A,go(O){return l.go(O)}};return x}function ZI(e,r=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),pi(i,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:pg(e);return a=a.replace(/ $/,"%20"),!r&&a.startsWith("//")&&(a=i+a),new URL(a,i)}function HA(e,r,i="/"){return eP(e,r,i,!1)}function eP(e,r,i,a){let o=typeof r=="string"?Md(r):r,d=Fl(o.pathname||"/",i);if(d==null)return null;let l=jA(e);tP(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let f=dP(d);u=cP(l[h],f,a)}return u}function jA(e,r=[],i=[],a=""){let o=(d,l,u)=>{let h={relativePath:u===void 0?d.path||"":u,caseSensitive:d.caseSensitive===!0,childrenIndex:l,route:d};h.relativePath.startsWith("/")&&(pi(h.relativePath.startsWith(a),`Absolute route path "${h.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(a.length));let f=Il([a,h.relativePath]),y=i.concat(h);d.children&&d.children.length>0&&(pi(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),jA(d.children,r,y,f)),!(d.path==null&&!d.index)&&r.push({path:f,score:lP(f,d.index),routesMeta:y})};return e.forEach((d,l)=>{if(d.path===""||!d.path?.includes("?"))o(d,l);else for(let u of VA(d.path))o(d,l,u)}),r}function VA(e){let r=e.split("/");if(r.length===0)return[];let[i,...a]=r,o=i.endsWith("?"),d=i.replace(/\?$/,"");if(a.length===0)return o?[d,""]:[d];let l=VA(a.join("/")),u=[];return u.push(...l.map(h=>h===""?d:[d,h].join("/"))),o&&u.push(...l),u.map(h=>e.startsWith("/")&&h===""?"/":h)}function tP(e){e.sort((r,i)=>r.score!==i.score?i.score-r.score:uP(r.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var rP=/^:[\w-]+$/,nP=3,iP=2,aP=1,oP=10,sP=-2,uE=e=>e==="*";function lP(e,r){let i=e.split("/"),a=i.length;return i.some(uE)&&(a+=sP),r&&(a+=iP),i.filter(o=>!uE(o)).reduce((o,d)=>o+(rP.test(d)?nP:d===""?aP:oP),a)}function uP(e,r){return e.length===r.length&&e.slice(0,-1).every((a,o)=>a===r[o])?e[e.length-1]-r[r.length-1]:0}function cP(e,r,i=!1){let{routesMeta:a}=e,o={},d="/",l=[];for(let u=0;u<a.length;++u){let h=a[u],f=u===a.length-1,y=d==="/"?r:r.slice(d.length)||"/",b=Zy({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},y),_=h.route;if(!b&&f&&i&&!a[a.length-1].route.index&&(b=Zy({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!b)return null;Object.assign(o,b.params),l.push({params:o,pathname:Il([d,b.pathname]),pathnameBase:yP(Il([d,b.pathnameBase])),route:_}),b.pathnameBase!=="/"&&(d=Il([d,b.pathnameBase]))}return l}function Zy(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,a]=fP(e.path,e.caseSensitive,e.end),o=r.match(i);if(!o)return null;let d=o[0],l=d.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:a.reduce((f,{paramName:y,isOptional:b},_)=>{if(y==="*"){let T=u[_]||"";l=d.slice(0,d.length-T.length).replace(/(.)\/+$/,"$1")}const A=u[_];return b&&!A?f[y]=void 0:f[y]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:d,pathnameBase:l,pattern:e}}function fP(e,r=!1,i=!0){Yo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(a.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),a]}function dP(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Yo(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function Fl(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,a=e.charAt(i);return a&&a!=="/"?null:e.slice(i)||"/"}function hP(e,r="/"){let{pathname:i,search:a="",hash:o=""}=typeof e=="string"?Md(e):e;return{pathname:i?i.startsWith("/")?i:pP(i,r):r,search:mP(a),hash:vP(o)}}function pP(e,r){let i=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function uv(e,r,i,a){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gP(e){return e.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function Rb(e){let r=gP(e);return r.map((i,a)=>a===r.length-1?i.pathname:i.pathnameBase)}function xb(e,r,i,a=!1){let o;typeof e=="string"?o=Md(e):(o={...e},pi(!o.pathname||!o.pathname.includes("?"),uv("?","pathname","search",o)),pi(!o.pathname||!o.pathname.includes("#"),uv("#","pathname","hash",o)),pi(!o.search||!o.search.includes("#"),uv("#","search","hash",o)));let d=e===""||o.pathname==="",l=d?"/":o.pathname,u;if(l==null)u=i;else{let b=r.length-1;if(!a&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),b-=1;o.pathname=_.join("/")}u=b>=0?r[b]:"/"}let h=hP(o,u),f=l&&l!=="/"&&l.endsWith("/"),y=(d||l===".")&&i.endsWith("/");return!h.pathname.endsWith("/")&&(f||y)&&(h.pathname+="/"),h}var Il=e=>e.join("/").replace(/\/\/+/g,"/"),yP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function bP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var $A=["POST","PUT","PATCH","DELETE"];new Set($A);var wP=["GET",...$A];new Set(wP);var kd=Qe.createContext(null);kd.displayName="DataRouter";var bm=Qe.createContext(null);bm.displayName="DataRouterState";var KA=Qe.createContext({isTransitioning:!1});KA.displayName="ViewTransition";var _P=Qe.createContext(new Map);_P.displayName="Fetchers";var SP=Qe.createContext(null);SP.displayName="Await";var Qo=Qe.createContext(null);Qo.displayName="Navigation";var Og=Qe.createContext(null);Og.displayName="Location";var Ns=Qe.createContext({outlet:null,matches:[],isDataRoute:!1});Ns.displayName="Route";var Tb=Qe.createContext(null);Tb.displayName="RouteError";function EP(e,{relative:r}={}){pi(Bd(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=Qe.useContext(Qo),{hash:o,pathname:d,search:l}=Ig(e,{relative:r}),u=d;return i!=="/"&&(u=d==="/"?i:Il([i,d])),a.createHref({pathname:u,search:l,hash:o})}function Bd(){return Qe.useContext(Og)!=null}function $u(){return pi(Bd(),"useLocation() may be used only in the context of a <Router> component."),Qe.useContext(Og).location}var GA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qA(e){Qe.useContext(Qo).static||Qe.useLayoutEffect(e)}function zA(){let{isDataRoute:e}=Qe.useContext(Ns);return e?LP():AP()}function AP(){pi(Bd(),"useNavigate() may be used only in the context of a <Router> component.");let e=Qe.useContext(kd),{basename:r,navigator:i}=Qe.useContext(Qo),{matches:a}=Qe.useContext(Ns),{pathname:o}=$u(),d=JSON.stringify(Rb(a)),l=Qe.useRef(!1);return qA(()=>{l.current=!0}),Qe.useCallback((h,f={})=>{if(Yo(l.current,GA),!l.current)return;if(typeof h=="number"){i.go(h);return}let y=xb(h,JSON.parse(d),o,f.relative==="path");e==null&&r!=="/"&&(y.pathname=y.pathname==="/"?r:Il([r,y.pathname])),(f.replace?i.replace:i.push)(y,f.state,f)},[r,i,d,o,e])}Qe.createContext(null);function Ig(e,{relative:r}={}){let{matches:i}=Qe.useContext(Ns),{pathname:a}=$u(),o=JSON.stringify(Rb(i));return Qe.useMemo(()=>xb(e,JSON.parse(o),a,r==="path"),[e,o,a,r])}function RP(e,r){return WA(e,r)}function WA(e,r,i,a){pi(Bd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=Qe.useContext(Qo),{matches:d}=Qe.useContext(Ns),l=d[d.length-1],u=l?l.params:{},h=l?l.pathname:"/",f=l?l.pathnameBase:"/",y=l&&l.route;{let R=y&&y.path||"";JA(h,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let b=$u(),_;if(r){let R=typeof r=="string"?Md(r):r;pi(f==="/"||R.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${R.pathname}" was given in the \`location\` prop.`),_=R}else _=b;let A=_.pathname||"/",T=A;if(f!=="/"){let R=f.replace(/^\//,"").split("/");T="/"+A.replace(/^\//,"").split("/").slice(R.length).join("/")}let x=HA(e,{pathname:T});Yo(y||x!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Yo(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=IP(x&&x.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:Il([f,o.encodeLocation?o.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:Il([f,o.encodeLocation?o.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),d,i,a);return r&&O?Qe.createElement(Og.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},O):O}function xP(){let e=UP(),r=bP(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},d={padding:"2px 4px",backgroundColor:a},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=Qe.createElement(Qe.Fragment,null,Qe.createElement("p",null," Hey developer "),Qe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Qe.createElement("code",{style:d},"ErrorBoundary")," or"," ",Qe.createElement("code",{style:d},"errorElement")," prop on your route.")),Qe.createElement(Qe.Fragment,null,Qe.createElement("h2",null,"Unexpected Application Error!"),Qe.createElement("h3",{style:{fontStyle:"italic"}},r),i?Qe.createElement("pre",{style:o},i):null,l)}var TP=Qe.createElement(xP,null),CP=class extends Qe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?Qe.createElement(Ns.Provider,{value:this.props.routeContext},Qe.createElement(Tb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function OP({routeContext:e,match:r,children:i}){let a=Qe.useContext(kd);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),Qe.createElement(Ns.Provider,{value:e},i)}function IP(e,r=[],i=null,a=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(r.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let o=e,d=i?.errors;if(d!=null){let h=o.findIndex(f=>f.route.id&&d?.[f.route.id]!==void 0);pi(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(i)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:y,errors:b}=i,_=f.route.loader&&!y.hasOwnProperty(f.route.id)&&(!b||b[f.route.id]===void 0);if(f.route.lazy||_){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,y)=>{let b,_=!1,A=null,T=null;i&&(b=d&&f.route.id?d[f.route.id]:void 0,A=f.route.errorElement||TP,l&&(u<0&&y===0?(JA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,T=null):u===y&&(_=!0,T=f.route.hydrateFallbackElement||null)));let x=r.concat(o.slice(0,y+1)),O=()=>{let R;return b?R=A:_?R=T:f.route.Component?R=Qe.createElement(f.route.Component,null):f.route.element?R=f.route.element:R=h,Qe.createElement(OP,{match:f,routeContext:{outlet:h,matches:x,isDataRoute:i!=null},children:R})};return i&&(f.route.ErrorBoundary||f.route.errorElement||y===0)?Qe.createElement(CP,{location:i.location,revalidation:i.revalidation,component:A,error:b,children:O(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):O()},null)}function Cb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PP(e){let r=Qe.useContext(kd);return pi(r,Cb(e)),r}function NP(e){let r=Qe.useContext(bm);return pi(r,Cb(e)),r}function FP(e){let r=Qe.useContext(Ns);return pi(r,Cb(e)),r}function Ob(e){let r=FP(e),i=r.matches[r.matches.length-1];return pi(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function DP(){return Ob("useRouteId")}function UP(){let e=Qe.useContext(Tb),r=NP("useRouteError"),i=Ob("useRouteError");return e!==void 0?e:r.errors?.[i]}function LP(){let{router:e}=PP("useNavigate"),r=Ob("useNavigate"),i=Qe.useRef(!1);return qA(()=>{i.current=!0}),Qe.useCallback(async(o,d={})=>{Yo(i.current,GA),i.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:r,...d}))},[e,r])}var cE={};function JA(e,r,i){!r&&!cE[e]&&(cE[e]=!0,Yo(!1,i))}Qe.memo(MP);function MP({routes:e,future:r,state:i}){return WA(e,void 0,i,r)}function kP({to:e,replace:r,state:i,relative:a}){pi(Bd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=Qe.useContext(Qo);Yo(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=Qe.useContext(Ns),{pathname:l}=$u(),u=zA(),h=xb(e,Rb(d),l,a==="path"),f=JSON.stringify(h);return Qe.useEffect(()=>{u(JSON.parse(f),{replace:r,state:i,relative:a})},[u,f,a,r,i]),null}function ig(e){pi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BP({basename:e="/",children:r=null,location:i,navigationType:a="POP",navigator:o,static:d=!1}){pi(!Bd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=Qe.useMemo(()=>({basename:l,navigator:o,static:d,future:{}}),[l,o,d]);typeof i=="string"&&(i=Md(i));let{pathname:h="/",search:f="",hash:y="",state:b=null,key:_="default"}=i,A=Qe.useMemo(()=>{let T=Fl(h,l);return T==null?null:{location:{pathname:T,search:f,hash:y,state:b,key:_},navigationType:a}},[l,h,f,y,b,_,a]);return Yo(A!=null,`<Router basename="${l}"> is not able to match the URL "${h}${f}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:Qe.createElement(Qo.Provider,{value:u},Qe.createElement(Og.Provider,{children:r,value:A}))}function HP({children:e,location:r}){return RP(Hv(e),r)}function Hv(e,r=[]){let i=[];return Qe.Children.forEach(e,(a,o)=>{if(!Qe.isValidElement(a))return;let d=[...r,o];if(a.type===Qe.Fragment){i.push.apply(i,Hv(a.props.children,d));return}pi(a.type===ig,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pi(!a.props.index||!a.props.children,"An index route cannot have child routes.");let l={id:a.props.id||d.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=Hv(a.props.children,d)),i.push(l)}),i}var Ky="get",Gy="application/x-www-form-urlencoded";function wm(e){return e!=null&&typeof e.tagName=="string"}function jP(e){return wm(e)&&e.tagName.toLowerCase()==="button"}function VP(e){return wm(e)&&e.tagName.toLowerCase()==="form"}function $P(e){return wm(e)&&e.tagName.toLowerCase()==="input"}function KP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function GP(e,r){return e.button===0&&(!r||r==="_self")&&!KP(e)}var Ly=null;function qP(){if(Ly===null)try{new FormData(document.createElement("form"),0),Ly=!1}catch{Ly=!0}return Ly}var zP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cv(e){return e!=null&&!zP.has(e)?(Yo(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gy}"`),null):e}function WP(e,r){let i,a,o,d,l;if(VP(e)){let u=e.getAttribute("action");a=u?Fl(u,r):null,i=e.getAttribute("method")||Ky,o=cv(e.getAttribute("enctype"))||Gy,d=new FormData(e)}else if(jP(e)||$P(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||u.getAttribute("action");if(a=h?Fl(h,r):null,i=e.getAttribute("formmethod")||u.getAttribute("method")||Ky,o=cv(e.getAttribute("formenctype"))||cv(u.getAttribute("enctype"))||Gy,d=new FormData(u,e),!qP()){let{name:f,type:y,value:b}=e;if(y==="image"){let _=f?`${f}.`:"";d.append(`${_}x`,"0"),d.append(`${_}y`,"0")}else f&&d.append(f,b)}}else{if(wm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Ky,a=null,o=Gy,l=e}return d&&o==="text/plain"&&(l=d,d=void 0),{action:a,method:i.toLowerCase(),encType:o,formData:d,body:l}}function Ib(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}async function JP(e,r){if(e.id in r)return r[e.id];try{let i=await import(e.module);return r[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YP(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function QP(e,r,i){let a=await Promise.all(e.map(async o=>{let d=r.routes[o.route.id];if(d){let l=await JP(d,i);return l.links?l.links():[]}return[]}));return tN(a.flat(1).filter(YP).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function fE(e,r,i,a,o,d){let l=(h,f)=>i[f]?h.route.id!==i[f].route.id:!0,u=(h,f)=>i[f].pathname!==h.pathname||i[f].route.path?.endsWith("*")&&i[f].params["*"]!==h.params["*"];return d==="assets"?r.filter((h,f)=>l(h,f)||u(h,f)):d==="data"?r.filter((h,f)=>{let y=a.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(l(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function XP(e,r,{includeHydrateFallback:i}={}){return ZP(e.map(a=>{let o=r.routes[a.route.id];if(!o)return[];let d=[o.module];return o.clientActionModule&&(d=d.concat(o.clientActionModule)),o.clientLoaderModule&&(d=d.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(d=d.concat(o.hydrateFallbackModule)),o.imports&&(d=d.concat(o.imports)),d}).flat(1))}function ZP(e){return[...new Set(e)]}function eN(e){let r={},i=Object.keys(e).sort();for(let a of i)r[a]=e[a];return r}function tN(e,r){let i=new Set;return new Set(r),e.reduce((a,o)=>{let d=JSON.stringify(eN(o));return i.has(d)||(i.add(d),a.push({key:d,link:o})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rN=new Set([100,101,204,205]);function nN(e,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname="_root.data":r&&Fl(i.pathname,r)==="/"?i.pathname=`${r.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function YA(){let e=Qe.useContext(kd);return Ib(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function iN(){let e=Qe.useContext(bm);return Ib(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Pb=Qe.createContext(void 0);Pb.displayName="FrameworkContext";function QA(){let e=Qe.useContext(Pb);return Ib(e,"You must render this element inside a <HydratedRouter> element"),e}function aN(e,r){let i=Qe.useContext(Pb),[a,o]=Qe.useState(!1),[d,l]=Qe.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:y,onTouchStart:b}=r,_=Qe.useRef(null);Qe.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let x=R=>{R.forEach(F=>{l(F.isIntersecting)})},O=new IntersectionObserver(x,{threshold:.5});return _.current&&O.observe(_.current),()=>{O.disconnect()}}},[e]),Qe.useEffect(()=>{if(a){let x=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(x)}}},[a]);let A=()=>{o(!0)},T=()=>{o(!1),l(!1)};return i?e!=="intent"?[d,_,{}]:[d,_,{onFocus:tg(u,A),onBlur:tg(h,T),onMouseEnter:tg(f,A),onMouseLeave:tg(y,T),onTouchStart:tg(b,A)}]:[!1,_,{}]}function tg(e,r){return i=>{e&&e(i),i.defaultPrevented||r(i)}}function oN({page:e,...r}){let{router:i}=YA(),a=Qe.useMemo(()=>HA(i.routes,e,i.basename),[i.routes,e,i.basename]);return a?Qe.createElement(lN,{page:e,matches:a,...r}):null}function sN(e){let{manifest:r,routeModules:i}=QA(),[a,o]=Qe.useState([]);return Qe.useEffect(()=>{let d=!1;return QP(e,r,i).then(l=>{d||o(l)}),()=>{d=!0}},[e,r,i]),a}function lN({page:e,matches:r,...i}){let a=$u(),{manifest:o,routeModules:d}=QA(),{basename:l}=YA(),{loaderData:u,matches:h}=iN(),f=Qe.useMemo(()=>fE(e,r,h,o,a,"data"),[e,r,h,o,a]),y=Qe.useMemo(()=>fE(e,r,h,o,a,"assets"),[e,r,h,o,a]),b=Qe.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let T=new Set,x=!1;if(r.forEach(R=>{let F=o.routes[R.route.id];!F||!F.hasLoader||(!f.some(P=>P.route.id===R.route.id)&&R.route.id in u&&d[R.route.id]?.shouldRevalidate||F.hasClientLoader?x=!0:T.add(R.route.id))}),T.size===0)return[];let O=nN(e,l);return x&&T.size>0&&O.searchParams.set("_routes",r.filter(R=>T.has(R.route.id)).map(R=>R.route.id).join(",")),[O.pathname+O.search]},[l,u,a,o,f,r,e,d]),_=Qe.useMemo(()=>XP(y,o),[y,o]),A=sN(y);return Qe.createElement(Qe.Fragment,null,b.map(T=>Qe.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...i})),_.map(T=>Qe.createElement("link",{key:T,rel:"modulepreload",href:T,...i})),A.map(({key:T,link:x})=>Qe.createElement("link",{key:T,...x})))}function uN(...e){return r=>{e.forEach(i=>{typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var XA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XA&&(window.__reactRouterVersion="7.6.3")}catch{}function cN({basename:e,children:r,window:i}){let a=Qe.useRef();a.current==null&&(a.current=YI({window:i,v5Compat:!0}));let o=a.current,[d,l]=Qe.useState({action:o.action,location:o.location}),u=Qe.useCallback(h=>{Qe.startTransition(()=>l(h))},[l]);return Qe.useLayoutEffect(()=>o.listen(u),[o,u]),Qe.createElement(BP,{basename:e,children:r,location:d.location,navigationType:d.action,navigator:o})}var ZA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eR=Qe.forwardRef(function({onClick:r,discover:i="render",prefetch:a="none",relative:o,reloadDocument:d,replace:l,state:u,target:h,to:f,preventScrollReset:y,viewTransition:b,..._},A){let{basename:T}=Qe.useContext(Qo),x=typeof f=="string"&&ZA.test(f),O,R=!1;if(typeof f=="string"&&x&&(O=f,XA))try{let Pe=new URL(window.location.href),$=f.startsWith("//")?new URL(Pe.protocol+f):new URL(f),ie=Fl($.pathname,T);$.origin===Pe.origin&&ie!=null?f=ie+$.search+$.hash:R=!0}catch{Yo(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=EP(f,{relative:o}),[P,K,B]=aN(a,_),W=pN(f,{replace:l,state:u,target:h,preventScrollReset:y,relative:o,viewTransition:b});function Y(Pe){r&&r(Pe),Pe.defaultPrevented||W(Pe)}let q=Qe.createElement("a",{..._,...B,href:O||F,onClick:R||d?r:Y,ref:uN(A,K),target:h,"data-discover":!x&&i==="render"?"true":void 0});return P&&!x?Qe.createElement(Qe.Fragment,null,q,Qe.createElement(oN,{page:F})):q});eR.displayName="Link";var fN=Qe.forwardRef(function({"aria-current":r="page",caseSensitive:i=!1,className:a="",end:o=!1,style:d,to:l,viewTransition:u,children:h,...f},y){let b=Ig(l,{relative:f.relative}),_=$u(),A=Qe.useContext(bm),{navigator:T,basename:x}=Qe.useContext(Qo),O=A!=null&&bN(b)&&u===!0,R=T.encodeLocation?T.encodeLocation(b).pathname:b.pathname,F=_.pathname,P=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(F=F.toLowerCase(),P=P?P.toLowerCase():null,R=R.toLowerCase()),P&&x&&(P=Fl(P,x)||P);const K=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let B=F===R||!o&&F.startsWith(R)&&F.charAt(K)==="/",W=P!=null&&(P===R||!o&&P.startsWith(R)&&P.charAt(R.length)==="/"),Y={isActive:B,isPending:W,isTransitioning:O},q=B?r:void 0,Pe;typeof a=="function"?Pe=a(Y):Pe=[a,B?"active":null,W?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let $=typeof d=="function"?d(Y):d;return Qe.createElement(eR,{...f,"aria-current":q,className:Pe,ref:y,style:$,to:l,viewTransition:u},typeof h=="function"?h(Y):h)});fN.displayName="NavLink";var dN=Qe.forwardRef(({discover:e="render",fetcherKey:r,navigate:i,reloadDocument:a,replace:o,state:d,method:l=Ky,action:u,onSubmit:h,relative:f,preventScrollReset:y,viewTransition:b,..._},A)=>{let T=mN(),x=vN(u,{relative:f}),O=l.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&ZA.test(u),F=P=>{if(h&&h(P),P.defaultPrevented)return;P.preventDefault();let K=P.nativeEvent.submitter,B=K?.getAttribute("formmethod")||l;T(K||P.currentTarget,{fetcherKey:r,method:B,navigate:i,replace:o,state:d,relative:f,preventScrollReset:y,viewTransition:b})};return Qe.createElement("form",{ref:A,method:O,action:x,onSubmit:a?h:F,..._,"data-discover":!R&&e==="render"?"true":void 0})});dN.displayName="Form";function hN(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tR(e){let r=Qe.useContext(kd);return pi(r,hN(e)),r}function pN(e,{target:r,replace:i,state:a,preventScrollReset:o,relative:d,viewTransition:l}={}){let u=zA(),h=$u(),f=Ig(e,{relative:d});return Qe.useCallback(y=>{if(GP(y,r)){y.preventDefault();let b=i!==void 0?i:pg(h)===pg(f);u(e,{replace:b,state:a,preventScrollReset:o,relative:d,viewTransition:l})}},[h,u,f,i,a,r,e,o,d,l])}var gN=0,yN=()=>`__${String(++gN)}__`;function mN(){let{router:e}=tR("useSubmit"),{basename:r}=Qe.useContext(Qo),i=DP();return Qe.useCallback(async(a,o={})=>{let{action:d,method:l,encType:u,formData:h,body:f}=WP(a,r);if(o.navigate===!1){let y=o.fetcherKey||yN();await e.fetch(y,i,o.action||d,{preventScrollReset:o.preventScrollReset,formData:h,body:f,formMethod:o.method||l,formEncType:o.encType||u,flushSync:o.flushSync})}else await e.navigate(o.action||d,{preventScrollReset:o.preventScrollReset,formData:h,body:f,formMethod:o.method||l,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,r,i])}function vN(e,{relative:r}={}){let{basename:i}=Qe.useContext(Qo),a=Qe.useContext(Ns);pi(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),d={...Ig(e||".",{relative:r})},l=$u();if(e==null){d.search=l.search;let u=new URLSearchParams(d.search),h=u.getAll("index");if(h.some(y=>y==="")){u.delete("index"),h.filter(b=>b).forEach(b=>u.append("index",b));let y=u.toString();d.search=y?`?${y}`:""}}return(!e||e===".")&&o.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(d.pathname=d.pathname==="/"?i:Il([i,d.pathname])),pg(d)}function bN(e,r={}){let i=Qe.useContext(KA);pi(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=tR("useViewTransitionState"),o=Ig(e,{relative:r.relative});if(!i.isTransitioning)return!1;let d=Fl(i.currentLocation.pathname,a)||i.currentLocation.pathname,l=Fl(i.nextLocation.pathname,a)||i.nextLocation.pathname;return Zy(o.pathname,l)!=null||Zy(o.pathname,d)!=null}[...rN];var _m=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Sm=typeof window>"u"||"Deno"in globalThis;function Wo(){}function wN(e,r){return typeof e=="function"?e(r):e}function _N(e){return typeof e=="number"&&e>=0&&e!==1/0}function SN(e,r){return Math.max(e+(r||0)-Date.now(),0)}function jv(e,r){return typeof e=="function"?e(r):e}function EN(e,r){return typeof e=="function"?e(r):e}function dE(e,r){const{type:i="all",exact:a,fetchStatus:o,predicate:d,queryKey:l,stale:u}=e;if(l){if(a){if(r.queryHash!==Nb(l,r.options))return!1}else if(!yg(r.queryKey,l))return!1}if(i!=="all"){const h=r.isActive();if(i==="active"&&!h||i==="inactive"&&h)return!1}return!(typeof u=="boolean"&&r.isStale()!==u||o&&o!==r.state.fetchStatus||d&&!d(r))}function hE(e,r){const{exact:i,status:a,predicate:o,mutationKey:d}=e;if(d){if(!r.options.mutationKey)return!1;if(i){if(gg(r.options.mutationKey)!==gg(d))return!1}else if(!yg(r.options.mutationKey,d))return!1}return!(a&&r.state.status!==a||o&&!o(r))}function Nb(e,r){return(r?.queryKeyHashFn||gg)(e)}function gg(e){return JSON.stringify(e,(r,i)=>Vv(i)?Object.keys(i).sort().reduce((a,o)=>(a[o]=i[o],a),{}):i)}function yg(e,r){return e===r?!0:typeof e!=typeof r?!1:e&&r&&typeof e=="object"&&typeof r=="object"?Object.keys(r).every(i=>yg(e[i],r[i])):!1}function rR(e,r){if(e===r)return e;const i=pE(e)&&pE(r);if(i||Vv(e)&&Vv(r)){const a=i?e:Object.keys(e),o=a.length,d=i?r:Object.keys(r),l=d.length,u=i?[]:{},h=new Set(a);let f=0;for(let y=0;y<l;y++){const b=i?y:d[y];(!i&&h.has(b)||i)&&e[b]===void 0&&r[b]===void 0?(u[b]=void 0,f++):(u[b]=rR(e[b],r[b]),u[b]===e[b]&&e[b]!==void 0&&f++)}return o===l&&f===o?e:u}return r}function pE(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Vv(e){if(!gE(e))return!1;const r=e.constructor;if(r===void 0)return!0;const i=r.prototype;return!(!gE(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function gE(e){return Object.prototype.toString.call(e)==="[object Object]"}function AN(e){return new Promise(r=>{setTimeout(r,e)})}function RN(e,r,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,r):i.structuralSharing!==!1?rR(e,r):r}function xN(e,r,i=0){const a=[...e,r];return i&&a.length>i?a.slice(1):a}function TN(e,r,i=0){const a=[r,...e];return i&&a.length>i?a.slice(0,-1):a}var Fb=Symbol();function nR(e,r){return!e.queryFn&&r?.initialPromise?()=>r.initialPromise:!e.queryFn||e.queryFn===Fb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var CN=class extends _m{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Sm&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},iR=new CN,ON=class extends _m{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Sm&&window.addEventListener){const r=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(i=>{i(e)}))}isOnline(){return this.#e}},em=new ON;function IN(){let e,r;const i=new Promise((o,d)=>{e=o,r=d});i.status="pending",i.catch(()=>{});function a(o){Object.assign(i,o),delete i.resolve,delete i.reject}return i.resolve=o=>{a({status:"fulfilled",value:o}),e(o)},i.reject=o=>{a({status:"rejected",reason:o}),r(o)},i}function PN(e){return Math.min(1e3*2**e,3e4)}function aR(e){return(e??"online")==="online"?em.isOnline():!0}var oR=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function fv(e){return e instanceof oR}function sR(e){let r=!1,i=0,a=!1,o;const d=IN(),l=x=>{a||(_(new oR(x)),e.abort?.())},u=()=>{r=!0},h=()=>{r=!1},f=()=>iR.isFocused()&&(e.networkMode==="always"||em.isOnline())&&e.canRun(),y=()=>aR(e.networkMode)&&e.canRun(),b=x=>{a||(a=!0,e.onSuccess?.(x),o?.(),d.resolve(x))},_=x=>{a||(a=!0,e.onError?.(x),o?.(),d.reject(x))},A=()=>new Promise(x=>{o=O=>{(a||f())&&x(O)},e.onPause?.()}).then(()=>{o=void 0,a||e.onContinue?.()}),T=()=>{if(a)return;let x;const O=i===0?e.initialPromise:void 0;try{x=O??e.fn()}catch(R){x=Promise.reject(R)}Promise.resolve(x).then(b).catch(R=>{if(a)return;const F=e.retry??(Sm?0:3),P=e.retryDelay??PN,K=typeof P=="function"?P(i,R):P,B=F===!0||typeof F=="number"&&i<F||typeof F=="function"&&F(i,R);if(r||!B){_(R);return}i++,e.onFail?.(i,R),AN(K).then(()=>f()?void 0:A()).then(()=>{r?_(R):T()})})};return{promise:d,cancel:l,continue:()=>(o?.(),d),cancelRetry:u,continueRetry:h,canStart:y,start:()=>(y()?T():A().then(T),d)}}var NN=e=>setTimeout(e,0);function FN(){let e=[],r=0,i=u=>{u()},a=u=>{u()},o=NN;const d=u=>{r?e.push(u):o(()=>{i(u)})},l=()=>{const u=e;e=[],u.length&&o(()=>{a(()=>{u.forEach(h=>{i(h)})})})};return{batch:u=>{let h;r++;try{h=u()}finally{r--,r||l()}return h},batchCalls:u=>(...h)=>{d(()=>{u(...h)})},schedule:d,setNotifyFunction:u=>{i=u},setBatchNotifyFunction:u=>{a=u},setScheduler:u=>{o=u}}}var Aa=FN(),lR=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_N(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Sm?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},DN=class extends lR{#e;#t;#r;#i;#n;#o;#s;constructor(e){super(),this.#s=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#r=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=LN(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,r){const i=RN(this.state.data,e,this.options);return this.#a({data:i,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),i}setState(e,r){this.#a({type:"setState",state:e,setStateOptions:r})}cancel(e){const r=this.#n?.promise;return this.#n?.cancel(e),r?r.then(Wo).catch(Wo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>EN(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>jv(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!SN(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.#n&&(this.#s?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(e,r){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const i=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#s=!0,i.signal)})},o=()=>{const h=nR(this.options,r),y=(()=>{const b={client:this.#i,queryKey:this.queryKey,meta:this.meta};return a(b),b})();return this.#s=!1,this.options.persister?this.options.persister(h,y,this):h(y)},l=(()=>{const h={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:o};return a(h),h})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta});const u=h=>{fv(h)&&h.silent||this.#a({type:"error",error:h}),fv(h)||(this.#r.config.onError?.(h,this),this.#r.config.onSettled?.(this.state.data,h,this)),this.scheduleGc()};return this.#n=sR({initialPromise:r?.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:h=>{if(h===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(f){u(f);return}this.#r.config.onSuccess?.(h,this),this.#r.config.onSettled?.(h,this.state.error,this),this.scheduleGc()},onError:u,onFail:(h,f)=>{this.#a({type:"failed",failureCount:h,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}),this.#n.start()}#a(e){const r=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...UN(i.data,this.options),fetchMeta:e.meta??null};case"success":return this.#t=void 0,{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return fv(a)&&a.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=r(this.state),Aa.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function UN(e,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:aR(r.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function LN(e){const r=typeof e.initialData=="function"?e.initialData():e.initialData,i=r!==void 0,a=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:i?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var MN=class extends _m{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,r,i){const a=r.queryKey,o=r.queryHash??Nb(a,r);let d=this.get(o);return d||(d=new DN({client:e,queryKey:a,queryHash:o,options:e.defaultQueryOptions(r),state:i,defaultOptions:e.getQueryDefaults(a)}),this.add(d)),d}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=this.#e.get(e.queryHash);r&&(e.destroy(),r===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Aa.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const r={exact:!0,...e};return this.getAll().find(i=>dE(r,i))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(i=>dE(e,i)):r}notify(e){Aa.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Aa.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Aa.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},kN=class extends lR{#e;#t;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||BN(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(r=>r!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const r=()=>{this.#i({type:"continue"})};this.#r=sR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(o,d)=>{this.#i({type:"failed",failureCount:o,error:d})},onPause:()=>{this.#i({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const i=this.state.status==="pending",a=!this.#r.canStart();try{if(i)r();else{this.#i({type:"pending",variables:e,isPaused:a}),await this.#t.config.onMutate?.(e,this);const d=await this.options.onMutate?.(e);d!==this.state.context&&this.#i({type:"pending",context:d,variables:e,isPaused:a})}const o=await this.#r.start();return await this.#t.config.onSuccess?.(o,e,this.state.context,this),await this.options.onSuccess?.(o,e,this.state.context),await this.#t.config.onSettled?.(o,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(o,null,e,this.state.context),this.#i({type:"success",data:o}),o}catch(o){try{throw await this.#t.config.onError?.(o,e,this.state.context,this),await this.options.onError?.(o,e,this.state.context),await this.#t.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,o,e,this.state.context),o}finally{this.#i({type:"error",error:o})}}finally{this.#t.runNext(this)}}#i(e){const r=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Aa.batch(()=>{this.#e.forEach(i=>{i.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function BN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var HN=class extends _m{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,r,i){const a=new kN({mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(r),state:i});return this.add(a),a}add(e){this.#e.add(e);const r=My(e);if(typeof r=="string"){const i=this.#t.get(r);i?i.push(e):this.#t.set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const r=My(e);if(typeof r=="string"){const i=this.#t.get(r);if(i)if(i.length>1){const a=i.indexOf(e);a!==-1&&i.splice(a,1)}else i[0]===e&&this.#t.delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=My(e);if(typeof r=="string"){const a=this.#t.get(r)?.find(o=>o.state.status==="pending");return!a||a===e}else return!0}runNext(e){const r=My(e);return typeof r=="string"?this.#t.get(r)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Aa.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const r={exact:!0,...e};return this.getAll().find(i=>hE(r,i))}findAll(e={}){return this.getAll().filter(r=>hE(e,r))}notify(e){Aa.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Aa.batch(()=>Promise.all(e.map(r=>r.continue().catch(Wo))))}};function My(e){return e.options.scope?.id}function yE(e){return{onFetch:(r,i)=>{const a=r.options,o=r.fetchOptions?.meta?.fetchMore?.direction,d=r.state.data?.pages||[],l=r.state.data?.pageParams||[];let u={pages:[],pageParams:[]},h=0;const f=async()=>{let y=!1;const b=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(r.signal.aborted?y=!0:r.signal.addEventListener("abort",()=>{y=!0}),r.signal)})},_=nR(r.options,r.fetchOptions),A=async(T,x,O)=>{if(y)return Promise.reject();if(x==null&&T.pages.length)return Promise.resolve(T);const F=(()=>{const W={client:r.client,queryKey:r.queryKey,pageParam:x,direction:O?"backward":"forward",meta:r.options.meta};return b(W),W})(),P=await _(F),{maxPages:K}=r.options,B=O?TN:xN;return{pages:B(T.pages,P,K),pageParams:B(T.pageParams,x,K)}};if(o&&d.length){const T=o==="backward",x=T?jN:mE,O={pages:d,pageParams:l},R=x(a,O);u=await A(O,R,T)}else{const T=e??d.length;do{const x=h===0?l[0]??a.initialPageParam:mE(a,u);if(h>0&&x==null)break;u=await A(u,x),h++}while(h<T)}return u};r.options.persister?r.fetchFn=()=>r.options.persister?.(f,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},i):r.fetchFn=f}}}function mE(e,{pages:r,pageParams:i}){const a=r.length-1;return r.length>0?e.getNextPageParam(r[a],r,i[a],i):void 0}function jN(e,{pages:r,pageParams:i}){return r.length>0?e.getPreviousPageParam?.(r[0],r,i[0],i):void 0}var VN=class{#e;#t;#r;#i;#n;#o;#s;#a;constructor(e={}){this.#e=e.queryCache||new MN,this.#t=e.mutationCache||new HN,this.#r=e.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#s=iR.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=em.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const r=this.defaultQueryOptions({queryKey:e});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(e){const r=this.defaultQueryOptions(e),i=this.#e.build(this,r),a=i.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime(jv(r.staleTime,i))&&this.prefetchQuery(r),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:r,state:i})=>{const a=i.data;return[r,a]})}setQueryData(e,r,i){const a=this.defaultQueryOptions({queryKey:e}),d=this.#e.get(a.queryHash)?.state.data,l=wN(r,d);if(l!==void 0)return this.#e.build(this,a).setData(l,{...i,manual:!0})}setQueriesData(e,r,i){return Aa.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,r,i)]))}getQueryState(e){const r=this.defaultQueryOptions({queryKey:e});return this.#e.get(r.queryHash)?.state}removeQueries(e){const r=this.#e;Aa.batch(()=>{r.findAll(e).forEach(i=>{r.remove(i)})})}resetQueries(e,r){const i=this.#e;return Aa.batch(()=>(i.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},r)))}cancelQueries(e,r={}){const i={revert:!0,...r},a=Aa.batch(()=>this.#e.findAll(e).map(o=>o.cancel(i)));return Promise.all(a).then(Wo).catch(Wo)}invalidateQueries(e,r={}){return Aa.batch(()=>(this.#e.findAll(e).forEach(i=>{i.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},r)))}refetchQueries(e,r={}){const i={...r,cancelRefetch:r.cancelRefetch??!0},a=Aa.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let d=o.fetch(void 0,i);return i.throwOnError||(d=d.catch(Wo)),o.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(a).then(Wo)}fetchQuery(e){const r=this.defaultQueryOptions(e);r.retry===void 0&&(r.retry=!1);const i=this.#e.build(this,r);return i.isStaleByTime(jv(r.staleTime,i))?i.fetch(r):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Wo).catch(Wo)}fetchInfiniteQuery(e){return e.behavior=yE(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Wo).catch(Wo)}ensureInfiniteQueryData(e){return e.behavior=yE(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return em.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,r){this.#i.set(gg(e),{queryKey:e,defaultOptions:r})}getQueryDefaults(e){const r=[...this.#i.values()],i={};return r.forEach(a=>{yg(e,a.queryKey)&&Object.assign(i,a.defaultOptions)}),i}setMutationDefaults(e,r){this.#n.set(gg(e),{mutationKey:e,defaultOptions:r})}getMutationDefaults(e){const r=[...this.#n.values()],i={};return r.forEach(a=>{yg(e,a.mutationKey)&&Object.assign(i,a.defaultOptions)}),i}defaultQueryOptions(e){if(e._defaulted)return e;const r={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return r.queryHash||(r.queryHash=Nb(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===Fb&&(r.enabled=!1),r}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},$N=Qe.createContext(void 0),KN=({client:e,children:r})=>(Qe.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Ot.jsx($N.Provider,{value:e,children:r})),dv={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var vE;function GN(){return vE||(vE=1,function(e){(function(){var r={}.hasOwnProperty;function i(){for(var d="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(d=o(d,a(u)))}return d}function a(d){if(typeof d=="string"||typeof d=="number")return d;if(typeof d!="object")return"";if(Array.isArray(d))return i.apply(null,d);if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]"))return d.toString();var l="";for(var u in d)r.call(d,u)&&d[u]&&(l=o(l,u));return l}function o(d,l){return l?d?d+" "+l:d+l:d}e.exports?(i.default=i,e.exports=i):window.classNames=i})()}(dv)),dv.exports}var qN=GN();const Yn=$v(qN),uR=["xxl","xl","lg","md","sm","xs"],cR="xs",Em=Qe.createContext({prefixes:{},breakpoints:uR,minBreakpoint:cR}),{Consumer:NF,Provider:FF}=Em;function ni(e,r){const{prefixes:i}=Qe.useContext(Em);return e||i[r]||r}function Db(){const{breakpoints:e}=Qe.useContext(Em);return e}function Ub(){const{minBreakpoint:e}=Qe.useContext(Em);return e}const Lb=Qe.forwardRef(({className:e,bsPrefix:r,as:i="div",...a},o)=>(r=ni(r,"card-body"),Ot.jsx(i,{ref:o,className:Yn(e,r),...a})));Lb.displayName="CardBody";const fR=Qe.forwardRef(({className:e,bsPrefix:r,as:i="div",...a},o)=>(r=ni(r,"card-footer"),Ot.jsx(i,{ref:o,className:Yn(e,r),...a})));fR.displayName="CardFooter";const dR=Qe.createContext(null);dR.displayName="CardHeaderContext";const hR=Qe.forwardRef(({bsPrefix:e,className:r,as:i="div",...a},o)=>{const d=ni(e,"card-header"),l=Qe.useMemo(()=>({cardHeaderBsPrefix:d}),[d]);return Ot.jsx(dR.Provider,{value:l,children:Ot.jsx(i,{ref:o,...a,className:Yn(r,d)})})});hR.displayName="CardHeader";const pR=Qe.forwardRef(({bsPrefix:e,className:r,variant:i,as:a="img",...o},d)=>{const l=ni(e,"card-img");return Ot.jsx(a,{ref:d,className:Yn(i?`${l}-${i}`:l,r),...o})});pR.displayName="CardImg";const gR=Qe.forwardRef(({className:e,bsPrefix:r,as:i="div",...a},o)=>(r=ni(r,"card-img-overlay"),Ot.jsx(i,{ref:o,className:Yn(e,r),...a})));gR.displayName="CardImgOverlay";const yR=Qe.forwardRef(({className:e,bsPrefix:r,as:i="a",...a},o)=>(r=ni(r,"card-link"),Ot.jsx(i,{ref:o,className:Yn(e,r),...a})));yR.displayName="CardLink";const mR=e=>Qe.forwardRef((r,i)=>Ot.jsx("div",{...r,ref:i,className:Yn(r.className,e)})),zN=mR("h6"),vR=Qe.forwardRef(({className:e,bsPrefix:r,as:i=zN,...a},o)=>(r=ni(r,"card-subtitle"),Ot.jsx(i,{ref:o,className:Yn(e,r),...a})));vR.displayName="CardSubtitle";const bR=Qe.forwardRef(({className:e,bsPrefix:r,as:i="p",...a},o)=>(r=ni(r,"card-text"),Ot.jsx(i,{ref:o,className:Yn(e,r),...a})));bR.displayName="CardText";const WN=mR("h5"),wR=Qe.forwardRef(({className:e,bsPrefix:r,as:i=WN,...a},o)=>(r=ni(r,"card-title"),Ot.jsx(i,{ref:o,className:Yn(e,r),...a})));wR.displayName="CardTitle";const _R=Qe.forwardRef(({bsPrefix:e,className:r,bg:i,text:a,border:o,body:d=!1,children:l,as:u="div",...h},f)=>{const y=ni(e,"card");return Ot.jsx(u,{ref:f,...h,className:Yn(r,y,i&&`bg-${i}`,a&&`text-${a}`,o&&`border-${o}`),children:d?Ot.jsx(Lb,{children:l}):l})});_R.displayName="Card";const Fu=Object.assign(_R,{Img:pR,Title:wR,Subtitle:vR,Body:Lb,Link:yR,Text:bR,Header:hR,Footer:fR,ImgOverlay:gR});var hv={exports:{}},pv,bE;function JN(){if(bE)return pv;bE=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return pv=e,pv}var gv,wE;function YN(){if(wE)return gv;wE=1;var e=JN();function r(){}function i(){}return i.resetWarningCache=r,gv=function(){function a(l,u,h,f,y,b){if(b!==e){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}a.isRequired=a;function o(){return a}var d={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:o,element:a,elementType:a,instanceOf:o,node:a,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:i,resetWarningCache:r};return d.PropTypes=d,d},gv}var _E;function QN(){return _E||(_E=1,hv.exports=YN()()),hv.exports}var XN=QN();const Od=$v(XN);function ZN(e,r=uR,i=cR){const a=[];return Object.entries(e).forEach(([o,d])=>{d!=null&&(typeof d=="object"?r.forEach(l=>{const u=d[l];if(u!=null){const h=l!==i?`-${l}`:"";a.push(`${o}${h}-${u}`)}}):a.push(`${o}-${d}`))}),a}const Mb=Qe.forwardRef(({as:e="div",bsPrefix:r,className:i,direction:a,gap:o,...d},l)=>{r=ni(r,a==="horizontal"?"hstack":"vstack");const u=Db(),h=Ub();return Ot.jsx(e,{...d,ref:l,className:Yn(i,r,...ZN({gap:o},u,h))})});Mb.displayName="Stack";const eF={type:Od.string,tooltip:Od.bool,as:Od.elementType},Am=Qe.forwardRef(({as:e="div",className:r,type:i="valid",tooltip:a=!1,...o},d)=>Ot.jsx(e,{...o,ref:d,className:Yn(r,`${i}-${a?"tooltip":"feedback"}`)}));Am.displayName="Feedback";Am.propTypes=eF;const Dl=Qe.createContext({}),kb=Qe.forwardRef(({id:e,bsPrefix:r,className:i,type:a="checkbox",isValid:o=!1,isInvalid:d=!1,as:l="input",...u},h)=>{const{controlId:f}=Qe.useContext(Dl);return r=ni(r,"form-check-input"),Ot.jsx(l,{...u,ref:h,type:a,id:e||f,className:Yn(i,r,o&&"is-valid",d&&"is-invalid")})});kb.displayName="FormCheckInput";const tm=Qe.forwardRef(({bsPrefix:e,className:r,htmlFor:i,...a},o)=>{const{controlId:d}=Qe.useContext(Dl);return e=ni(e,"form-check-label"),Ot.jsx("label",{...a,ref:o,htmlFor:i||d,className:Yn(r,e)})});tm.displayName="FormCheckLabel";function tF(e,r){return Qe.Children.toArray(e).some(i=>Qe.isValidElement(i)&&i.type===r)}const SR=Qe.forwardRef(({id:e,bsPrefix:r,bsSwitchPrefix:i,inline:a=!1,reverse:o=!1,disabled:d=!1,isValid:l=!1,isInvalid:u=!1,feedbackTooltip:h=!1,feedback:f,feedbackType:y,className:b,style:_,title:A="",type:T="checkbox",label:x,children:O,as:R="input",...F},P)=>{r=ni(r,"form-check"),i=ni(i,"form-switch");const{controlId:K}=Qe.useContext(Dl),B=Qe.useMemo(()=>({controlId:e||K}),[K,e]),W=!O&&x!=null&&x!==!1||tF(O,tm),Y=Ot.jsx(kb,{...F,type:T==="switch"?"checkbox":T,ref:P,isValid:l,isInvalid:u,disabled:d,as:R});return Ot.jsx(Dl.Provider,{value:B,children:Ot.jsx("div",{style:_,className:Yn(b,W&&r,a&&`${r}-inline`,o&&`${r}-reverse`,T==="switch"&&i),children:O||Ot.jsxs(Ot.Fragment,{children:[Y,W&&Ot.jsx(tm,{title:A,children:x}),f&&Ot.jsx(Am,{type:y,tooltip:h,children:f})]})})})});SR.displayName="FormCheck";const rm=Object.assign(SR,{Input:kb,Label:tm}),ER=Qe.forwardRef(({bsPrefix:e,type:r,size:i,htmlSize:a,id:o,className:d,isValid:l=!1,isInvalid:u=!1,plaintext:h,readOnly:f,as:y="input",...b},_)=>{const{controlId:A}=Qe.useContext(Dl);return e=ni(e,"form-control"),Ot.jsx(y,{...b,type:r,size:a,ref:_,readOnly:f,id:o||A,className:Yn(d,h?`${e}-plaintext`:e,i&&`${e}-${i}`,r==="color"&&`${e}-color`,l&&"is-valid",u&&"is-invalid")})});ER.displayName="FormControl";const rF=Object.assign(ER,{Feedback:Am}),AR=Qe.forwardRef(({className:e,bsPrefix:r,as:i="div",...a},o)=>(r=ni(r,"form-floating"),Ot.jsx(i,{ref:o,className:Yn(e,r),...a})));AR.displayName="FormFloating";const Bb=Qe.forwardRef(({controlId:e,as:r="div",...i},a)=>{const o=Qe.useMemo(()=>({controlId:e}),[e]);return Ot.jsx(Dl.Provider,{value:o,children:Ot.jsx(r,{...i,ref:a})})});Bb.displayName="FormGroup";function nF({as:e,bsPrefix:r,className:i,...a}){r=ni(r,"col");const o=Db(),d=Ub(),l=[],u=[];return o.forEach(h=>{const f=a[h];delete a[h];let y,b,_;typeof f=="object"&&f!=null?{span:y,offset:b,order:_}=f:y=f;const A=h!==d?`-${h}`:"";y&&l.push(y===!0?`${r}${A}`:`${r}${A}-${y}`),_!=null&&u.push(`order${A}-${_}`),b!=null&&u.push(`offset${A}-${b}`)}),[{...a,className:Yn(i,...l,...u)},{as:e,bsPrefix:r,spans:l}]}const As=Qe.forwardRef((e,r)=>{const[{className:i,...a},{as:o="div",bsPrefix:d,spans:l}]=nF(e);return Ot.jsx(o,{...a,ref:r,className:Yn(i,!l.length&&d)})});As.displayName="Col";const RR=Qe.forwardRef(({as:e="label",bsPrefix:r,column:i=!1,visuallyHidden:a=!1,className:o,htmlFor:d,...l},u)=>{const{controlId:h}=Qe.useContext(Dl);r=ni(r,"form-label");let f="col-form-label";typeof i=="string"&&(f=`${f} ${f}-${i}`);const y=Yn(o,r,a&&"visually-hidden",i&&f);return d=d||h,i?Ot.jsx(As,{ref:u,as:"label",className:y,htmlFor:d,...l}):Ot.jsx(e,{ref:u,className:y,htmlFor:d,...l})});RR.displayName="FormLabel";const xR=Qe.forwardRef(({bsPrefix:e,className:r,id:i,...a},o)=>{const{controlId:d}=Qe.useContext(Dl);return e=ni(e,"form-range"),Ot.jsx("input",{...a,type:"range",ref:o,className:Yn(r,e),id:i||d})});xR.displayName="FormRange";const TR=Qe.forwardRef(({bsPrefix:e,size:r,htmlSize:i,className:a,isValid:o=!1,isInvalid:d=!1,id:l,...u},h)=>{const{controlId:f}=Qe.useContext(Dl);return e=ni(e,"form-select"),Ot.jsx("select",{...u,size:i,ref:h,className:Yn(a,e,r&&`${e}-${r}`,o&&"is-valid",d&&"is-invalid"),id:l||f})});TR.displayName="FormSelect";const CR=Qe.forwardRef(({bsPrefix:e,className:r,as:i="small",muted:a,...o},d)=>(e=ni(e,"form-text"),Ot.jsx(i,{...o,ref:d,className:Yn(r,e,a&&"text-muted")})));CR.displayName="FormText";const OR=Qe.forwardRef((e,r)=>Ot.jsx(rm,{...e,ref:r,type:"switch"}));OR.displayName="Switch";const iF=Object.assign(OR,{Input:rm.Input,Label:rm.Label}),IR=Qe.forwardRef(({bsPrefix:e,className:r,children:i,controlId:a,label:o,...d},l)=>(e=ni(e,"form-floating"),Ot.jsxs(Bb,{ref:l,className:Yn(r,e),controlId:a,...d,children:[i,Ot.jsx("label",{htmlFor:a,children:o})]})));IR.displayName="FloatingLabel";const aF={_ref:Od.any,validated:Od.bool,as:Od.elementType},Hb=Qe.forwardRef(({className:e,validated:r,as:i="form",...a},o)=>Ot.jsx(i,{...a,ref:o,className:Yn(e,r&&"was-validated")}));Hb.displayName="Form";Hb.propTypes=aF;const Id=Object.assign(Hb,{Group:Bb,Control:rF,Floating:AR,Check:rm,Switch:iF,Label:RR,Text:CR,Range:xR,Select:TR,FloatingLabel:IR}),oF=["as","disabled"];function sF(e,r){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;i[a]=e[a]}return i}function lF(e){return!e||e.trim()==="#"}function PR({tagName:e,disabled:r,href:i,target:a,rel:o,role:d,onClick:l,tabIndex:u=0,type:h}){e||(i!=null||a!=null||o!=null?e="a":e="button");const f={tagName:e};if(e==="button")return[{type:h||"button",disabled:r},f];const y=_=>{if((r||e==="a"&&lF(i))&&_.preventDefault(),r){_.stopPropagation();return}l?.(_)},b=_=>{_.key===" "&&(_.preventDefault(),y(_))};return e==="a"&&(i||(i="#"),r&&(i=void 0)),[{role:d??"button",disabled:void 0,tabIndex:r?void 0:u,href:i,target:e==="a"?a:void 0,"aria-disabled":r||void 0,rel:e==="a"?o:void 0,onClick:y,onKeyDown:b},f]}const uF=Qe.forwardRef((e,r)=>{let{as:i,disabled:a}=e,o=sF(e,oF);const[d,{tagName:l}]=PR(Object.assign({tagName:i,disabled:a},o));return Ot.jsx(l,Object.assign({},o,d,{ref:r}))});uF.displayName="Button";const Ol=Qe.forwardRef(({as:e,bsPrefix:r,variant:i="primary",size:a,active:o=!1,disabled:d=!1,className:l,...u},h)=>{const f=ni(r,"btn"),[y,{tagName:b}]=PR({tagName:e,disabled:d,...u}),_=b;return Ot.jsx(_,{...y,...u,ref:h,disabled:d,className:Yn(l,f,o&&"active",i&&`${f}-${i}`,a&&`${f}-${a}`,u.href&&d&&"disabled")})});Ol.displayName="Button";const cF={"Inrupt Pod Spaces":"https://login.inrupt.com/","Data Pod":"https://datapod.igrant.io/","solidcommunity.net":"https://solidcommunity.net/","solidweb.org":"https://solidweb.org/","redpencil.io":"https://solid.redpencil.io/"},fF=()=>{const e=Tg();return Ot.jsxs(Ot.Fragment,{children:[Ot.jsx(Fu,{className:"position-absolute top-50 start-50 translate-middle text-center pb-4 pt-3 ps-4 pe-4",children:Ot.jsx(Fu.Body,{children:Ot.jsxs(Mb,{gap:3,style:{width:"250px"},children:[Ot.jsx("span",{style:{fontSize:"large",fontWeight:500},children:Ot.jsx(Mu,{id:"selectASolidProvider",defaultMessage:"Select a Solid provider"})}),Ot.jsxs(Id.Select,{style:{borderColor:"#cccccc",height:"45px"},children:[Ot.jsx("option",{hidden:!0,children:e.formatMessage({id:"chooseSolidProvider",defaultMessage:"Choose a Solid provider"})},"defaultOption"),Object.keys(cF).map(r=>Ot.jsx("option",{children:r},r))]}),Ot.jsx(Mu,{id:"typeInProviderUrlHeading",defaultMessage:"Or type in a provider URL"}),Ot.jsx(Id.Control,{type:"text",placeholder:e.formatMessage({id:"providerUrlPlaceholder",defaultMessage:"Place a provider URL"}),style:{borderColor:"#cccccc",height:"45px"}}),Ot.jsx(Ol,{className:"solid-button mt-2 w-100",children:Ot.jsx(Mu,{id:"redirectToProvider",defaultMessage:"Redirect to provider"})})]})})}),Ot.jsx("div",{className:"position-absolute bottom-0 start-0 ms-3 mb-3",children:Ot.jsxs(Id.Select,{style:{borderColor:"#cccccc",height:"45px"},tabIndex:1,children:[Ot.jsx("option",{children:"English"},"en"),Ot.jsx("option",{children:"Slovensky"},"sk")]})})]})},ag=Qe.forwardRef(({bsPrefix:e,className:r,as:i="div",...a},o)=>{const d=ni(e,"row"),l=Db(),u=Ub(),h=`${d}-cols`,f=[];return l.forEach(y=>{const b=a[y];delete a[y];let _;b!=null&&typeof b=="object"?{cols:_}=b:_=b;const A=y!==u?`-${y}`:"";_!=null&&f.push(`${h}${A}-${_}`)}),Ot.jsx(i,{ref:o,...a,className:Yn(r,d,...f)})});ag.displayName="Row";const NR=Qe.forwardRef(({bsPrefix:e,fluid:r=!1,as:i="div",className:a,...o},d)=>{const l=ni(e,"container"),u=typeof r=="string"?`-${r}`:"-fluid";return Ot.jsx(i,{ref:d,...o,className:Yn(a,r?`${l}${u}`:l)})});NR.displayName="Container";const dF=()=>{const e=Tg();return Ot.jsxs("div",{className:"position-relative",style:{height:"100dvh",backgroundColor:"#FAFAFA"},children:[Ot.jsx(NR,{fluid:!0,children:Ot.jsxs(ag,{className:"sticky-top align-items-center",style:{backgroundColor:"#7C4DFF",height:"86px"},children:[Ot.jsx(As,{className:"ms-3",xs:8,children:Ot.jsx("span",{style:{color:"white",fontSize:"x-large",fontWeight:500},children:Ot.jsx(Mu,{id:"menuOverviewHeading",defaultMessage:"Menu overview"})})}),Ot.jsx(As,{className:"text-end",children:Ot.jsx("button",{style:{background:"none",border:"none"},"aria-label":"Open offcanvas",children:Ot.jsx("img",{src:"images/list.svg",alt:"Hamburger icon",style:{width:"40px"}})})})]})}),Ot.jsxs(Mb,{gap:3,className:"ps-3 pe-3 mt-3",children:[Ot.jsx(Fu,{style:{maxWidth:"470px",height:"160px"},children:Ot.jsx(Fu.Body,{children:Ot.jsxs(ag,{children:[Ot.jsxs(As,{xs:9,children:[Ot.jsx("div",{style:{fontSize:"large",fontWeight:700},children:"A la Carte Menu"}),Ot.jsxs("div",{className:"mt-2",children:[Ot.jsx("img",{src:"images/calendar-week.svg",alt:"Calendar icon",style:{width:"22px"}}),Ot.jsx("span",{className:"text-muted ms-3",style:{fontWeight:500},children:"Monday - Friday"})]}),Ot.jsx(Ol,{variant:"secondary",className:"mt-4",children:Ot.jsx(Mu,{id:"editMenu",defaultMessage:"Edit"})})]}),Ot.jsxs(As,{xs:3,className:"text-end",children:[Ot.jsx(Id.Switch,{reverse:!0,label:e.formatMessage({id:"visible",defaultMessage:"Visible"})}),Ot.jsx(Ol,{variant:"secondary",style:{marginTop:"43pt",marginRight:"4pt"},children:e.formatMessage({id:"scheduleMenu",defaultMessage:"Schedule"})})]})]})})}),Ot.jsx(Fu,{style:{maxWidth:"470px",height:"160px"},children:Ot.jsx(Fu.Body,{children:Ot.jsxs(ag,{children:[Ot.jsxs(As,{xs:9,children:[Ot.jsx("div",{style:{fontSize:"large",fontWeight:700},children:"Weekend Menu"}),Ot.jsxs("div",{className:"mt-2",children:[Ot.jsx("img",{src:"images/calendar-week.svg",alt:"Calendar icon",style:{width:"22px"}}),Ot.jsx("span",{className:"text-muted ms-3",style:{fontWeight:500},children:"Saturday, Sunday"})]}),Ot.jsx(Ol,{variant:"secondary",className:"mt-4",children:Ot.jsx(Mu,{id:"editMenu",defaultMessage:"Edit"})})]}),Ot.jsxs(As,{xs:3,className:"text-end",children:[Ot.jsx(Id.Switch,{reverse:!0,label:e.formatMessage({id:"visible",defaultMessage:"Visible"})}),Ot.jsx(Ol,{variant:"secondary",style:{marginTop:"43pt",marginRight:"4pt"},children:e.formatMessage({id:"scheduleMenu",defaultMessage:"Schedule"})})]})]})})}),Ot.jsx(Fu,{style:{maxWidth:"470px",height:"160px"},children:Ot.jsx(Fu.Body,{children:Ot.jsxs(ag,{children:[Ot.jsxs(As,{xs:9,children:[Ot.jsx("div",{style:{fontSize:"large",fontWeight:700},children:"Lunch Menu"}),Ot.jsxs("div",{className:"mt-2",children:[Ot.jsx("img",{src:"images/calendar-week.svg",alt:"Calendar icon",style:{width:"22px"}}),Ot.jsx("span",{className:"text-muted ms-3",style:{fontWeight:500},children:"Daily, 11:00 AM - 3:00 PM"})]}),Ot.jsx(Ol,{variant:"secondary",className:"mt-4",children:Ot.jsx(Mu,{id:"editMenu",defaultMessage:"Edit"})})]}),Ot.jsxs(As,{xs:3,className:"text-end",children:[Ot.jsx(Id.Switch,{reverse:!0,label:e.formatMessage({id:"visible",defaultMessage:"Visible"})}),Ot.jsx(Ol,{variant:"secondary",style:{marginTop:"43pt",marginRight:"4pt"},children:e.formatMessage({id:"scheduleMenu",defaultMessage:"Schedule"})})]})]})})})]}),Ot.jsx(Ol,{className:"position-absolute position-fixed bottom-0 end-0 mb-4 me-4 add-menu-round-button shadow",children:Ot.jsx("img",{src:"images/plus.svg",alt:"Add menu icon",className:"edit-profile-round-icon",style:{width:"36px"}})})]})},hF=()=>{const e=new VN;return Ot.jsx(pO.SessionProvider,{restorePreviousSession:!0,children:Ot.jsx(WI,{children:Ot.jsx(KN,{client:e,children:Ot.jsx(cN,{basename:"/solid-menu-manager/",children:Ot.jsxs(HP,{children:[Ot.jsx(ig,{path:"/",element:Ot.jsx("h1",{children:"Base path"})}),Ot.jsx(ig,{path:"/login",element:Ot.jsx(fF,{})}),Ot.jsx(ig,{path:"/menuOverview",element:Ot.jsx(dF,{})}),Ot.jsx(ig,{path:"*",element:Ot.jsx(kP,{to:"/",replace:!0})})]})})})})})};dx.createRoot(document.getElementById("root")).render(Ot.jsx(Qe.StrictMode,{children:Ot.jsx(hF,{})}));
